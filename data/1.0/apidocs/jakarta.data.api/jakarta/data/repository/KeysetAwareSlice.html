<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>KeysetAwareSlice (Jakarta Data API 1.0.0-b3 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: jakarta.data.api, package: jakarta.data.repository, interface: KeysetAwareSlice">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/KeysetAwareSlice.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">jakarta.data.api</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jakarta.data.repository</a></div>
<h1 title="Interface KeysetAwareSlice" class="title">Interface KeysetAwareSlice&lt;T&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of elements in this slice</dd>
</dl>
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;T&gt;</code>, <code><a href="Slice.html" title="interface in jakarta.data.repository">Slice</a>&lt;T&gt;</code>, <code><a href="Streamable.html" title="interface in jakarta.data.repository">Streamable</a>&lt;T&gt;</code></dd>
</dl>
<dl class="notes">
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="KeysetAwarePage.html" title="interface in jakarta.data.repository">KeysetAwarePage</a>&lt;T&gt;</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">KeysetAwareSlice&lt;T&gt;</span><span class="extends-implements">
extends <a href="Slice.html" title="interface in jakarta.data.repository">Slice</a>&lt;T&gt;</span></div>
<div class="block"><p>Keyset pagination is a form of pagination that aims to reduce the
 possibility of missed or duplicate results by making the request for
 each subsequent page relative to the observed values of entity properties
 from the current page. This list of values is referred to as the keyset
 and only includes values of entity properties that are in the sort criteria
 of the repository method. The combination of sort criteria must uniquely
 identify each entity. The keyset values can be from the last entity
 (for pagination in a forward direction) or first entity on the page
 (if requesting pages in a reverse direction),
 or can be any other desired list of values which serve as a new starting
 point. Keyset pagination also has the potential to improve performance
 by avoiding the fetching and ordering of results from prior pages
 because these become non-matching.</p>

 <p>To use keyset pagination, define a repository method with return value of
 <a href="KeysetAwareSlice.html" title="interface in jakarta.data.repository"><code>KeysetAwareSlice</code></a> or <a href="KeysetAwarePage.html" title="interface in jakarta.data.repository"><code>KeysetAwarePage</code></a> and which accepts a
 special parameter (after the normal query parameters) that is a
 <a href="Pageable.html" title="interface in jakarta.data.repository"><code>Pageable</code></a>. For example,</p>

 <pre>
 &#64;OrderBy("lastName")
 &#64;OrderBy("firstName")
 &#64;OrderBy("id")
 KeysetAwareSlice&lt;Employee&gt; findByHoursWorkedGreaterThan(int hours, Pageable pagination);
 </pre>

 <p>You can use a normal <a href="Pageable.html" title="interface in jakarta.data.repository"><code>Pageable</code></a> to request an initial page,</p>

 <pre>
 page = employees.findByHoursWorkedGreaterThan(1500, Pageable.ofSize(50));
 </pre>

 <p>For subsequent pages, you can request pagination relative to the
 end of the current page as follows,</p>

 <pre>
 page = employees.findByHoursWorkedGreaterThan(1500, page.nextPageable());
 </pre>

 <p>Because the page is keyset aware, the <a href="Pageable.html" title="interface in jakarta.data.repository"><code>Pageable</code></a>
 that it returns from the call to <a href="#nextPageable()"><code>nextPageable()</code></a>
 above is based upon a keyset from that page to use as a starting point
 after which the results for the next page are to be found.</p>

 <p>You can also construct a <a href="Pageable.html" title="interface in jakarta.data.repository"><code>Pageable</code></a> with a <a href="Pageable.Cursor.html" title="interface in jakarta.data.repository"><code>Cursor</code></a> directly, which
 allows you to make it relative to a specific list of values. The number and
 order of values must match that of the <a href="OrderBy.html" title="annotation interface in jakarta.data.repository"><code>OrderBy</code></a> annotations,
 <a href="Pageable.html#sortBy(jakarta.data.repository.Sort...)"><code>Pageable.sortBy(Sort...)</code></a> or <a href="Pageable.html#sortBy(java.lang.Iterable)"><code>Pageable.sortBy(Iterable)</code></a> parameters,
 or <code>OrderBy</code> name pattern of the repository method.
 For example,</p>

 <pre>
 Employee emp = ...
 Pageable pagination = Pageable.ofSize(50).afterKeyset(emp.lastName, emp.firstName, emp.id);
 page = employees.findByHoursWorkedGreaterThan(1500, pagination);
 </pre>

 <p>By making the query for the next page relative to observed values,
 not a numerical position, keyset pagination is less vulnerable to changes
 that are made to data in between page requests. Adding or removing entities
 is possible without causing unexpected missed or duplicate results.
 Keyset pagination does not prevent misses and duplicates if the entity
 properties which are the sort criteria for existing entities are modified
 or if an entity is re-added with different sort criteria after having
 previously been removed.</p>

 <h2>Keyset Pagination with &#64;Query</h2>

 <p>Keyset pagination involves generating and appending to the query
 additional query conditions for the keyset properties. In order for that to
 be possible, a user-provided
 <a href="https://eclipse-ee4j.github.io/jakartaee-tutorial/#full-query-language-syntax">JPQL</a>
 query must end with a
 <code>WHERE</code> clause to which additional conditions can be appended.
 Enclose the entire conditional expression of the <code>WHERE</code> clause
 in parenthesis.
 Sort criteria must be specified independently from the user-provided query,
 either with the <a href="OrderBy.html" title="annotation interface in jakarta.data.repository"><code>OrderBy</code></a> annotation or
 <a href="Pageable.html#sortBy(jakarta.data.repository.Sort...)"><code>Pageable.sortBy(Sort...)</code></a> or <a href="Pageable.html#sortBy(java.lang.Iterable)"><code>Pageable.sortBy(Iterable)</code></a> parameters.
 For example,</p>

 <pre>
 &#64;Query("SELECT o FROM Customer o WHERE (o.ordersPlaced &gt;= ?1 OR o.totalSpent &gt;= ?2)")
 &#64;OrderBy("zipcode")
 &#64;OrderBy("birthYear")
 &#64;OrderBy("id")
 KeysetAwareSlice&lt;Customer&gt; getTopBuyers(int minOrders, float minSpent, Pageable pagination);
 </pre>

 <h2>Page Numbers and Totals</h2>

 <p>Page numbers, total numbers of elements across all pages, and total
 count of pages are not accurate when keyset pagination is used and should
 not be relied upon.</p>

 <h2>Database Support for Keyset Pagination</h2>

 <p>A repository method with return type of <code>KeysetAwareSlice</code> or
 <a href="KeysetAwarePage.html" title="interface in jakarta.data.repository"><code>KeysetAwarePage</code></a> must raise <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link"><code>UnsupportedOperationException</code></a>
 if the database is incapable of keyset pagination.
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Pageable.Cursor.html" title="interface in jakarta.data.repository">Pageable.Cursor</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getKeysetCursor(int)" class="member-name-link">getKeysetCursor</a><wbr>(int&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a <a href="Pageable.Cursor.html" title="interface in jakarta.data.repository"><code>Cursor</code></a> for keyset values at the
 specified position.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Pageable.html" title="interface in jakarta.data.repository">Pageable</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#nextPageable()" class="member-name-link">nextPageable</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns pagination information for requesting the next page
 in a forward direction from the current page.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Pageable.html" title="interface in jakarta.data.repository">Pageable</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#previousPageable()" class="member-name-link">previousPageable</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns pagination information for requesting the previous page
 in a reverse direction from the current page.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Iterable">Methods inherited from interface&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)" title="class or interface in java.lang" class="external-link">forEach</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html#iterator()" title="class or interface in java.lang" class="external-link">iterator</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html#spliterator()" title="class or interface in java.lang" class="external-link">spliterator</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-jakarta.data.repository.Slice">Methods inherited from interface&nbsp;jakarta.data.repository.<a href="Slice.html" title="interface in jakarta.data.repository">Slice</a></h3>
<code><a href="Slice.html#content()">content</a>, <a href="Slice.html#hasContent()">hasContent</a>, <a href="Slice.html#numberOfElements()">numberOfElements</a>, <a href="Slice.html#pageable()">pageable</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-jakarta.data.repository.Streamable">Methods inherited from interface&nbsp;jakarta.data.repository.<a href="Streamable.html" title="interface in jakarta.data.repository">Streamable</a></h3>
<code><a href="Streamable.html#stream()">stream</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getKeysetCursor(int)">
<h3>getKeysetCursor</h3>
<div class="member-signature"><span class="return-type"><a href="Pageable.Cursor.html" title="interface in jakarta.data.repository">Pageable.Cursor</a></span>&nbsp;<span class="element-name">getKeysetCursor</span><wbr><span class="parameters">(int&nbsp;index)</span></div>
<div class="block">Returns a <a href="Pageable.Cursor.html" title="interface in jakarta.data.repository"><code>Cursor</code></a> for keyset values at the
 specified position.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>index</code> - position (0 is first) of a result on the page.</dd>
<dt>Returns:</dt>
<dd>cursor for keyset values at the specified position.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nextPageable()">
<h3>nextPageable</h3>
<div class="member-signature"><span class="return-type"><a href="Pageable.html" title="interface in jakarta.data.repository">Pageable</a></span>&nbsp;<span class="element-name">nextPageable</span>()</div>
<div class="block"><p>Returns pagination information for requesting the next page
 in a forward direction from the current page. This method computes a
 keyset from the last entity of the current page and includes the
 keyset in the pagination information so that it can be used to
 obtain the next slice in a forward direction according to the
 sort criteria and relative to that entity.</p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="Slice.html#nextPageable()">nextPageable</a></code>&nbsp;in interface&nbsp;<code><a href="Slice.html" title="interface in jakarta.data.repository">Slice</a>&lt;<a href="KeysetAwareSlice.html" title="type parameter in KeysetAwareSlice">T</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>pagination information for requesting the next page, or
         <code>null</code> if the current page is empty
         or if it is known that there is not a next page.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="previousPageable()">
<h3>previousPageable</h3>
<div class="member-signature"><span class="return-type"><a href="Pageable.html" title="interface in jakarta.data.repository">Pageable</a></span>&nbsp;<span class="element-name">previousPageable</span>()</div>
<div class="block"><p>Returns pagination information for requesting the previous page
 in a reverse direction from the current page. This method computes a
 keyset from the first entity of the current page and includes the
 keyset in the pagination information so that it can be used to
 obtain the previous slice in a reverse direction to the sort criteria
 and relative to that entity. Within a single page, results are not
 reversed and remain ordered according to the sort criteria.</p>

 <p>Page numbers are not accurate and should not be relied upon when
 using keyset pagination. Jakarta Data providers should aim to at least
 avoid returning negative or <code>0</code> as page numbers when
 traversing pages in the reverse direction (this might otherwise occur
 when matching entities are added prior to the first page and the
 previous page is requested) by assigning a page number of <code>1</code>
 to such pages. This means that there can be multiple consecutive pages
 numbered <code>1</code> and that
 <code>currentPage.previousPageable().next().page()</code>
 cannot be relied upon to return a page number that is equal to the
 current page number.</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>pagination information for requesting the previous page, or
         <code>null</code> if the current page is empty
         or if it is known that there is not a previous page.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2017&#x2013;2020 <a href="https://www.eclipse.org">Eclipse Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
