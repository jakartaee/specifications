<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>CursoredPage (Jakarta Data API 1.0.0-M4 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: jakarta.data, package: jakarta.data.page, interface: CursoredPage">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/CursoredPage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">jakarta.data</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jakarta.data.page</a></div>
<h1 title="Interface CursoredPage" class="title">Interface CursoredPage&lt;T&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the type of elements in this page</dd>
</dl>
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;T&gt;</code>, <code><a href="Page.html" title="interface in jakarta.data.page">Page</a>&lt;T&gt;</code></dd>
</dl>
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="impl/CursoredPageRecord.html" title="class in jakarta.data.page.impl">CursoredPageRecord</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">CursoredPage&lt;T&gt;</span><span class="extends-implements">
extends <a href="Page.html" title="interface in jakarta.data.page">Page</a>&lt;T&gt;</span></div>
<div class="block"><p>A page of data retrieved to satisfy a given page request, with a
 <a href="PageRequest.Cursor.html" title="interface in jakarta.data.page">cursor</a> for each result on the page.
 A repository method which returns the type <code>CursoredPage</code> uses
 <em>cursor-based pagination</em> to determine page boundaries.</p>

 <p>Compared to offset-based pagination, cursor-based pagination reduces
 the possibility of missed or duplicate results when records are
 inserted, deleted, or updated in the database between page requests.
 Cursor-based pagination is possible when a query result set has a
 well-defined total order, that is, when the results are sorted by a
 list of entity fields which forms a unique key on the result set.
 This list of entity fields must be the entity fields of the combined
 sort criteria of the repository method, in the same order of precedence.
 This could just be the identifier field of the entity, or it might be
 some other combination of fields which uniquely identifies each query
 result.</p>

 <p>When cursor-based pagination is used, a <a href="#nextPageRequest()">next page request</a> is made relative to the last entity of the current
 page and a <a href="#previousPageRequest()">previous page request</a> is
 made relative to the first entity of the current page. Alternatively,
 a page request might be made relative to an arbitrary starting point
 in the result set, that is, with an arbitrary value of the key.</p>

 <p>The key for a given element of the result set is represented by an
 instance of <a href="PageRequest.Cursor.html" title="interface in jakarta.data.page"><code>Cursor</code></a>.</p>

 <p>To use cursor-based pagination, declare a repository method with return
 type <code>CursoredPage</code> and with a special parameter (after the normal
 query parameters) of type <a href="PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a>, for example:</p>

 <pre>
 &#64;OrderBy("lastName")
 &#64;OrderBy("firstName")
 &#64;OrderBy("id")
 CursoredPage&lt;Employee&gt; findByHoursWorkedGreaterThan(int hours, <code>PageRequest&lt;Employee&gt;</code> pageRequest);
 </pre>

 <p>In initial page may be requested using an offset-based page request:</p>

 <pre>
 page = employees.findByHoursWorkedGreaterThan(1500, PageRequest.of(Employee.class).size(50));
 </pre>

 <p>The next page may be requested relative to the end of the current page,
 as follows:</p>

 <pre>
 page = employees.findByHoursWorkedGreaterThan(1500, page.nextPageRequest());
 </pre>

 <p>Here, the instance of <a href="PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a> returned by
 <a href="#nextPageRequest()"><code>nextPageRequest()</code></a> is based on a key value encapsulated
 in an instance of <a href="PageRequest.Cursor.html" title="interface in jakarta.data.page"><code>Cursor</code></a> and identifying the last
 result on the current page.</p>

 <p>A <a href="PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a> based on an explicit key may be constructed by
 calling <a href="PageRequest.html#afterKey(java.lang.Object...)"><code>PageRequest.afterKey(Object...)</code></a>. The arguments supplied
 to this method must match the list of sorting criteria specified by
 <a href="../repository/OrderBy.html" title="annotation interface in jakarta.data.repository"><code>OrderBy</code></a> annotations of the repository method, <a href="../Sort.html" title="class in jakarta.data"><code>Sort</code></a>
 parameters of the page request, or <code>OrderBy</code> name pattern of
 the repository method. For example:</p>

 <pre>
 Employee emp = ...
 <code>PageRequest&lt;Employee&gt;</code> pageRequest = PageRequest.of(Employee.class)
                                                .size(50)
                                                .afterKey(emp.lastName, emp.firstName, emp.id);
 page = employees.findByHoursWorkedGreaterThan(1500, pageRequest);
 </pre>

 <p>By making the query for the next page relative to observed values,
 instead of to a numerical position, cursor-based pagination is less
 vulnerable to changes made to data in between page requests. Adding or
 removing entities is possible without causing unexpected missed or
 duplicate results. Cursor-based pagination does not prevent misses and
 duplicates if the entity properties which are the sort criteria for
 existing entities are modified or if an entity is re-added with different
 sort criteria after having previously been removed.</p>

 <h2 id="cursor-based-pagination-with-query-heading">Cursor-based Pagination with <code>@Query</code></h2>

 <p>Cursor-based pagination involves generating and appending additional
 restrictions involving the key fields to the <code>WHERE</code> clause of the
 query. For this to be possible, a user-provided JDQL or JPQL query must
 end with a <code>WHERE</code> clause to which additional conditions may be
 appended.</p>

 <p>Sorting criteria must be specified independently of the user-provided
 query, either via the <a href="../repository/OrderBy.html" title="annotation interface in jakarta.data.repository"><code>OrderBy</code></a> annotation or, or by passing
 <a href="../Sort.html" title="class in jakarta.data"><code>Sort</code></a> criteria within the <a href="PageRequest.html#sorts()">page
 request</a>. For example:</p>

 <pre>
 <code>@Query("WHERE ordersPlaced &gt;= ?1 OR totalSpent &gt;= ?2")</code>
 <code>@OrderBy("zipcode")</code>
 <code>@OrderBy("birthYear")</code>
 <code>@OrderBy("id")</code>
 <code>CursoredPage&lt;Customer&gt;</code> getTopBuyers(int minOrders, float minSpent,
                                     <code>PageRequest&lt;Customer&gt;</code> pageRequest);
 </pre>

 <p>Only queries which return entities may be used with cursor-based pagination
 because cursors are created from the entity attribute values that
 form the unique key.</p>

 <h2 id="page-numbers-and-totals-heading">Page Numbers and Totals</h2>

 <p>Page numbers, total numbers of elements across all pages, and total count
 of pages are not accurate when cursor-based pagination is used and should not
 be relied upon.</p>

 <h2 id="database-support-for-cursor-based-pagination-heading">Database Support for Cursor-based Pagination</h2>

 <p>A repository method with return type <code>CursoredPage</code> must raise
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link"><code>UnsupportedOperationException</code></a> if the database itself is not capable
 of cursor-based pagination.</p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="PageRequest.Cursor.html" title="interface in jakarta.data.page">PageRequest.Cursor</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#cursor(int)" class="member-name-link">cursor</a><wbr>(int&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a <a href="PageRequest.Cursor.html" title="interface in jakarta.data.page"><code>Cursor</code></a> for key values at the
 specified position.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#hasPrevious()" class="member-name-link">hasPrevious</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns <code>true</code> when it is possible to navigate to a previous
 page of results or if it is necessary to request a previous page in
 order to determine whether there are more previous results.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="PageRequest.html" title="interface in jakarta.data.page">PageRequest</a><wbr>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#nextPageRequest()" class="member-name-link">nextPageRequest</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates a request for the next page in a forward direction from
 the current page.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="PageRequest.html" title="interface in jakarta.data.page">PageRequest</a><wbr>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#previousPageRequest()" class="member-name-link">previousPageRequest</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates a request for the previous page in a reverse direction from
 the current page.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Iterable">Methods inherited from interface&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html#forEach(java.util.function.Consumer)" title="class or interface in java.lang" class="external-link">forEach</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html#iterator()" title="class or interface in java.lang" class="external-link">iterator</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html#spliterator()" title="class or interface in java.lang" class="external-link">spliterator</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-jakarta.data.page.Page">Methods inherited from interface&nbsp;jakarta.data.page.<a href="Page.html" title="interface in jakarta.data.page">Page</a></h3>
<code><a href="Page.html#content()">content</a>, <a href="Page.html#hasContent()">hasContent</a>, <a href="Page.html#hasNext()">hasNext</a>, <a href="Page.html#hasTotals()">hasTotals</a>, <a href="Page.html#nextPageRequest(java.lang.Class)">nextPageRequest</a>, <a href="Page.html#numberOfElements()">numberOfElements</a>, <a href="Page.html#pageRequest()">pageRequest</a>, <a href="Page.html#pageRequest(java.lang.Class)">pageRequest</a>, <a href="Page.html#previousPageRequest(java.lang.Class)">previousPageRequest</a>, <a href="Page.html#stream()">stream</a>, <a href="Page.html#totalElements()">totalElements</a>, <a href="Page.html#totalPages()">totalPages</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="cursor(int)">
<h3>cursor</h3>
<div class="member-signature"><span class="return-type"><a href="PageRequest.Cursor.html" title="interface in jakarta.data.page">PageRequest.Cursor</a></span>&nbsp;<span class="element-name">cursor</span><wbr><span class="parameters">(int&nbsp;index)</span></div>
<div class="block">Returns a <a href="PageRequest.Cursor.html" title="interface in jakarta.data.page"><code>Cursor</code></a> for key values at the
 specified position.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>index</code> - position (0 is first) of a result on the page.</dd>
<dt>Returns:</dt>
<dd>cursor for key values at the specified position.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasPrevious()">
<h3>hasPrevious</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">hasPrevious</span>()</div>
<div class="block">Returns <code>true</code> when it is possible to navigate to a previous
 page of results or if it is necessary to request a previous page in
 order to determine whether there are more previous results.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="Page.html#hasPrevious()">hasPrevious</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in jakarta.data.page">Page</a>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd><code>false</code> if the current page is empty or if it is known
         that there is not a previous page.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nextPageRequest()">
<h3>nextPageRequest</h3>
<div class="member-signature"><span class="return-type"><a href="PageRequest.html" title="interface in jakarta.data.page">PageRequest</a>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</span>&nbsp;<span class="element-name">nextPageRequest</span>()</div>
<div class="block"><p>Creates a request for the next page in a forward direction from
 the current page. This method computes a cursor from the last
 entity of the current page and includes the cursor in the pagination
 information so that it can be used to obtain the next page in a
 forward direction according to the sort criteria and relative to that
 entity.</p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="Page.html#nextPageRequest()">nextPageRequest</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in jakarta.data.page">Page</a>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>pagination information for requesting the next page.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NoSuchElementException.html" title="class or interface in java.util" class="external-link">NoSuchElementException</a></code> - if the current page is empty or if
         it is known that there is no next page.
         To avoid this exception, check for a <code>true</code> result
         of <a href="Page.html#hasNext()"><code>Page.hasNext()</code></a> before invoking this method.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="previousPageRequest()">
<h3>previousPageRequest</h3>
<div class="member-signature"><span class="return-type"><a href="PageRequest.html" title="interface in jakarta.data.page">PageRequest</a>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</span>&nbsp;<span class="element-name">previousPageRequest</span>()</div>
<div class="block"><p>Creates a request for the previous page in a reverse direction from
 the current page. This method computes a cursor from the first
 entity of the current page and includes the cursor in the pagination
 information so that it can be used to obtain the previous page in a
 reverse direction to the sort criteria and relative to that entity.
 Within a single page, results are not reversed and remain ordered
 according to the sort criteria.</p>

 <p>Page numbers are not accurate and should not be relied upon when
 using cursor-based pagination. Jakarta Data providers should aim to at
 least avoid returning negative or <code>0</code> as page numbers when
 traversing pages in the previous page direction (this might otherwise occur
 when matching entities are added prior to the first page and the
 previous page is requested) by assigning a page number of <code>1</code>
 to such pages. This means that there can be multiple consecutive pages
 numbered <code>1</code> and that
 <code>currentPage.previousPageRequest().next().page()</code>
 cannot be relied upon to return a page number that is equal to the
 current page number.</p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="Page.html#previousPageRequest()">previousPageRequest</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in jakarta.data.page">Page</a>&lt;<a href="CursoredPage.html" title="type parameter in CursoredPage">T</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>pagination information for requesting the previous page.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NoSuchElementException.html" title="class or interface in java.util" class="external-link">NoSuchElementException</a></code> - if the current page is empty or if
         it is known that there is no previous page.
         To avoid this exception, check for a <code>true</code> result
         of <a href="#hasPrevious()"><code>hasPrevious()</code></a> before invoking this method.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2017&#x2013;2020 <a href="https://www.eclipse.org">Eclipse Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
