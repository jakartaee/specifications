<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>jakarta.data (Jakarta Data API 1.0.0-RC1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: jakarta.data">
<meta name="generator" content="javadoc/ModuleWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="module-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li class="nav-bar-cell1-rev">Module</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="../overview-tree.html">Tree</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html#module">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Module:</p>
<ul>
<li><a href="#module-description">Description</a></li>
<li>Modules</li>
<li><a href="#packages-summary">Packages</a></li>
<li>Services</li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Module:&nbsp;</li>
<li><a href="#module-description">Description</a>&nbsp;|&nbsp;</li>
<li>Modules&nbsp;|&nbsp;</li>
<li><a href="#packages-summary">Packages</a>&nbsp;|&nbsp;</li>
<li>Services</li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Module jakarta.data" class="title">Module jakarta.data</h1>
</div>
<hr>
<div class="module-signature">module <span class="element-name">jakarta.data</span></div>
<section class="module-description" id="module-description">
<!-- ============ MODULE DESCRIPTION =========== -->
<div class="block"><p>Jakarta Data standardizes a programming model where data is represented by
 simple Java classes and where operations on data are represented by interface
 methods.</p>

 <p>The application defines simple Java objects called entities to represent
 data in the database. Fields or accessor methods designate each entity property.
 For example,</p>

 <pre>
 &#64;Entity
 public class Product {
     &#64;Id
     public long id;
     public String name;
     public float price;
     public int yearProduced;
     ...
 }
 </pre>

 <p>A repository is an interface annotated with the <a href="jakarta/data/repository/Repository.html" title="annotation interface in jakarta.data.repository"><code>Repository</code></a> annotation.
 A repository declares methods which perform queries and other operations on entities.
 For example,</p>

 <pre>
 &#64;Repository
 public interface Products extends BasicRepository&lt;Product, Long&gt; {

     &#64;Insert
     void create(Product prod);

     &#64;OrderBy("price")
     List&lt;Product&gt; findByNameIgnoreCaseLikeAndPriceLessThan(String namePattern, float max);

     &#64;Query("UPDATE Product SET price = price * (1.0 - ?1) WHERE yearProduced &lt;= ?2")
     int discountOldInventory(float rateOfDiscount, int maxYear);

     ...
 }
 </pre>

 <p>Repository interfaces are implemented by the container/runtime and are made
 available to applications via the <code>jakarta.inject.Inject</code> annotation. For
 example,</p>

 <pre>
 &#64;Inject
 Products products;

 ...
 products.create(newProduct);

 found = products.findByNameIgnoreCaseLikeAndPriceLessThan("%cell%phone%", 900.0f);

 numDiscounted = products.discountOldInventory(0.15f, Year.now().getValue() - 1);
 </pre>

 <p>Jakarta Persistence and Jakarta NoSQL define programming models for entity
 classes that may be used with Jakarta Data:</p>
 <ul>
 <li><code>jakarta.persistence.Entity</code> and the corresponding entity-related
    annotations of the Jakarta Persistence specification may be used to
    define entities stored in a relational database, or</li>
 <li><code>jakarta.nosql.Entity</code> and the corresponding entity-related
     annotations of the Jakarta NoSQL specification may be used to define
     entities stored in a NoSQL database.
 </ul>
 <p>A Jakarta Data provider may define its own programming model for entity
    classes representing some other arbitrary kind of data.</p>

 <p>Methods of repository interfaces must be styled according to a
 well-defined set of conventions, which instruct the container/runtime
 about the desired data access operation to perform. These conventions
 consist of patterns of reserved keywords within the method name, method
 parameters with special meaning, method return types, and annotations
 placed upon the method and its parameters.</p>

 <p>Built-in repository superinterfaces, such as <a href="jakarta/data/repository/DataRepository.html" title="interface in jakarta.data.repository"><code>DataRepository</code></a>,
 are provided as a convenient way to inherit commonly used methods and
 are parameterized by the entity type and by its id type. Other built-in
 repository interfaces, such as <a href="jakarta/data/repository/BasicRepository.html" title="interface in jakarta.data.repository"><code>BasicRepository</code></a>, may be used in
 place of <a href="jakarta/data/repository/DataRepository.html" title="interface in jakarta.data.repository"><code>DataRepository</code></a> and provide a base set of predefined
 repository operations serving as an optional starting point. The Java
 application programmer may extend these built-in interfaces, adding
 custom methods. Alternatively, the programmer may define a repository
 interface without inheriting the built-in superinterfaces. A programmer
 may even copy individual method signatures from the built-in repositories
 to a repository which does not inherit any built-in superinterface. This
 is possible because the methods of the built-in repository superinterfaces
 respect the conventions defined for custom repository methods.</p>

 <p>The following example shows an entity class, an embeddable class, and
 a repository interface:</p>
 <pre>
 &#64;Entity
 public class Purchase {
     &#64;Id
     public String purchaseId;
     &#64;Embedded
     public Address address;
     ...
 }

 &#64;Embeddable
 public class Address {
     public int zipCode;
     ...
 }

 &#64;Repository
 public interface Purchases {
     &#64;OrderBy("address.zipCode")
     List&lt;Purchase&gt; findByAddressZipCodeIn(List&lt;Integer&gt; zipCodes);

     &#64;Query("WHERE address.zipCode = ?1")
     List&lt;Purchase&gt; forZipCode(int zipCode);

     &#64;Save
     Purchase checkout(Purchase purchase);
 }
 </pre>

 <h2 id="entities-heading">Entities</h2>

 <p>An entity programming model typically specifies an entity-defining
 annotation that is used to identify entity classes. For Jakarta Persistence,
 this is <code>jakarta.persistence.Entity</code>. For Jakarta NoSQL, it is
 <code>jakarta.nosql.Entity</code>. A provider may even have no entity-defining
 annotation and feature a programming model for entity classes where the
 entity classes are unannotated.</p>

 <p>Furthermore, an entity programming model must define an annotation which
 identifies the field or property holding the unique identifier of an entity.
 For Jakarta Persistence, it is <code>jakarta.persistence.Id</code> or
 <code>jakarta.persistence.EmbeddedId</code>. For Jakarta NoSQL, it is
 <code>jakarta.nosql.Id</code>. Alternatively, an entity programming model might
 allow the identifier field or property to be identified via some convention.
 Every entity has a unique identifier.</p>

 <p>An entity has an arbitrary number of persistent fields or properties.</p>

 <h3 id="persistent-field-names-heading">Persistent field names</h3>

 <p>Each persistent field of an entity or embeddable class is assigned a
 name:</p>
 <ul>
 <li>when direct field access is used, the name of a persistent field is
     simply the name of the Java field, but</li>
 <li>when property-based access is used, the name of the field is derived
     from the accessor methods, according to JavaBeans conventions.</li>
 </ul>
 <p>Within a given entity class or embeddable class, names assigned to
 persistent fields must be unique ignoring case.</p>
 <p>Furthermore, within the context of a given entity, each persistent field
 of an embeddable class reachable by navigation from the entity class may be
 assigned a compound name. The compound name is obtained by concatenating the
 names assigned to each field traversed by navigation from the entity class
 to the persistent field of the embedded class, optionally joined by a
 delimiter.</p>
 <ul>
 <li>For parameters of a <a href="jakarta/data/repository/Find.html" title="annotation interface in jakarta.data.repository"><code>Find</code></a> method, the delimiter is <code>_</code>.
 <li>For path expressions within a <a href="jakarta/data/repository/Query.html" title="annotation interface in jakarta.data.repository">query</a>, the delimiter
     is <code>.</code>.
 <li>For method names in <em>Query by Method Name</em>, the delimiter is
     <code>_</code> and it is optional. For example, <code>findByAddress_ZipCode</code>
     or <code>findByAddressZipCode</code> are both legal.
 <li>For arguments to constructor methods of <a href="jakarta/data/Sort.html" title="class in jakarta.data"><code>Sort</code></a>, the delimiter
     is <code>_</code> or <code>.</code>.
 <li>For the <code>value</code> member of the <a href="jakarta/data/repository/OrderBy.html" title="annotation interface in jakarta.data.repository"><code>OrderBy</code></a> or <a href="jakarta/data/repository/By.html" title="annotation interface in jakarta.data.repository"><code>By</code></a>
     annotation the delimiter is <code>_</code> or <code>.</code>.
 </ul>

 <p>A persistent field name used in a Query by Method Name must not contain
 a keyword reserved by Query by Method Name.</p>

 <h3 id="persistent-field-types-basic-types--heading">Persistent field types (basic types)</h3>

 <p>The following is a list of valid basic entity attribute types.
 These can be used as the types of repository method parameters
 for the respective entity attribute.</p>

 <table style="width: 100%">
 <caption><b>Basic Types for Entity Attributes</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top; width:20%"><b>Category</b></td>
 <td style="vertical-align: top; width:20%"><b>Basic Types</b></td>
 <td style="vertical-align: top; width:*"><b>Notes</b></td>
 </tr>

 <tr style="vertical-align: top; background-color:#eee"><td>Primitives and primitive wrappers</td>
 <td><code>boolean</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link"><code>Boolean</code></a>
 <br><code>byte</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="class or interface in java.lang" class="external-link"><code>Byte</code></a>
 <br><code>char</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html" title="class or interface in java.lang" class="external-link"><code>Character</code></a>
 <br><code>double</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html" title="class or interface in java.lang" class="external-link"><code>Double</code></a>
 <br><code>float</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Float.html" title="class or interface in java.lang" class="external-link"><code>Float</code></a>
 <br><code>int</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link"><code>Integer</code></a>
 <br><code>long</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link"><code>Long</code></a>
 <br><code>short</code> and <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Short.html" title="class or interface in java.lang" class="external-link"><code>Short</code></a></td>
 <td></td></tr>

 <tr style="vertical-align: top"><td>Binary data</td>
 <td><code>byte[]</code></td>
 <td>Not sortable.</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td>Enumerated types</td>
 <td><code>enum</code> types</td>
 <td>It is provider-specific whether sorting is based on
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Enum.html#ordinal()" title="class or interface in java.lang" class="external-link"><code>Enum.ordinal()</code></a> or <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Enum.html#name()" title="class or interface in java.lang" class="external-link"><code>Enum.name()</code></a>.
 The Jakarta Persistence default of <code>ordinal</code> can be
 overridden with the <code>jakarta.persistence.Enumerated</code>
 annotation.</td></tr>

 <tr style="vertical-align: top"><td>Large numbers</td>
 <td><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html" title="class or interface in java.math" class="external-link"><code>BigDecimal</code></a>
 <br><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html" title="class or interface in java.math" class="external-link"><code>BigInteger</code></a></td>
 <td></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td>Textual data</td>
 <td><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a></td>
 <td></td></tr>

 <tr style="vertical-align: top"><td>Time and Dates</td>
 <td><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link"><code>Instant</code></a>
 <br><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html" title="class or interface in java.time" class="external-link"><code>LocalDate</code></a>
 <br><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html" title="class or interface in java.time" class="external-link"><code>LocalDateTime</code></a>
 <br><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html" title="class or interface in java.time" class="external-link"><code>LocalTime</code></a></td>
 <td></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td>Universally unique identifier</td>
 <td><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/UUID.html" title="class or interface in java.util" class="external-link"><code>UUID</code></a></td>
 <td></td></tr>

 </table>

 <p>All of the basic types are sortable except for <code>byte[]</code>.
 A Jakarta Data provider might allow additional entity attribute types.</p>

 <h2 id="lifecycle-methods-heading">Lifecycle methods</h2>

 <p>A lifecycle method makes changes to persistent data in the data store.
 A lifecycle method must be annotated with a lifecycle annotation such as
 <a href="jakarta/data/repository/Insert.html" title="annotation interface in jakarta.data.repository"><code>Insert</code></a>, <a href="jakarta/data/repository/Update.html" title="annotation interface in jakarta.data.repository"><code>Update</code></a>, <a href="jakarta/data/repository/Save.html" title="annotation interface in jakarta.data.repository"><code>Save</code></a>, or <a href="jakarta/data/repository/Delete.html" title="annotation interface in jakarta.data.repository"><code>Delete</code></a>. The
 method must accept a single parameter, whose type is either:</p>

 <ul>
 <li>the class of the entity, or</li>
 <li><code>List&lt;E&gt;</code> or <code>E[]</code> where <code>E</code> is the class of the
     entities.</li>
 </ul>

 <p>The annotated method must be declared <code>void</code>, or, except in the
 case of <code>@Delete</code>, have a return type that is the same as the type
 of its parameter.</p>

 <table style="width: 100%">
 <caption><b>Lifecycle Annotations</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top; width: 10%"><b>Annotation</b></td>
 <td style="vertical-align: top; width: 25%"><b>Description</b></td>
 <td style="vertical-align: top; width: 65%"><b>Example</b></td>
 </tr>

 <tr style="vertical-align: top; background-color:#eee"><td><a href="jakarta/data/repository/Delete.html" title="annotation interface in jakarta.data.repository"><code>Delete</code></a></td>
 <td>deletes entities</td>
 <td><code>@Delete</code><br><code>public void remove(person);</code></td></tr>

 <tr style="vertical-align: top"><td><a href="jakarta/data/repository/Insert.html" title="annotation interface in jakarta.data.repository"><code>Insert</code></a></td>
 <td>creates new entities</td>
 <td><code>@Insert</code><br><code>public List&lt;Employee&gt; add(List&lt;Employee&gt; newEmployees);</code></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><a href="jakarta/data/repository/Save.html" title="annotation interface in jakarta.data.repository"><code>Save</code></a></td>
 <td>update if exists, otherwise insert</td>
 <td><code>@Save</code><br><code>Product[] saveAll(Product... products)</code></td></tr>

 <tr style="vertical-align: top"><td><a href="jakarta/data/repository/Update.html" title="annotation interface in jakarta.data.repository"><code>Update</code></a></td>
 <td>updates an existing entity</td>
 <td><code>@Update</code><br><code>public boolean modify(Product modifiedProduct);</code></td></tr>
 </table>

 <p>Refer to the API documentation for <a href="jakarta/data/repository/Insert.html" title="annotation interface in jakarta.data.repository"><code>Insert</code></a>, <a href="jakarta/data/repository/Update.html" title="annotation interface in jakarta.data.repository"><code>Update</code></a>, <a href="jakarta/data/repository/Delete.html" title="annotation interface in jakarta.data.repository"><code>Delete</code></a>,
 and <a href="jakarta/data/repository/Save.html" title="annotation interface in jakarta.data.repository"><code>Save</code></a> for further information about these annotations.</p>

 <h2 id="jdql-query-methods-heading">JDQL query methods</h2>

 <p>The <a href="jakarta/data/repository/Query.html" title="annotation interface in jakarta.data.repository"><code>Query</code></a> annotation specifies that a method executes a query written
 in Jakarta Data Query Language (JDQL) or Jakarta Persistence Query Language (JPQL).
 A Jakarta Data provider is not required to support the complete JPQL language,
 which targets relational data stores.</p>

 <p>Each parameter of the annotated method must either:</p>
 <ul>
 <li>have exactly the same name (the parameter name in the Java source, or a name
     assigned by <a href="jakarta/data/repository/Param.html" title="annotation interface in jakarta.data.repository"><code>@Param</code></a>) and type as a named parameter of the query,</li>
 <li>have exactly the same type and position within the parameter list of the method
     as a positional parameter of the query, or</li>
 <li>be of type <code>Limit</code>, <code>Order</code>, <code>PageRequest</code>, or <code>Sort</code>.</li>
 </ul>

 <p>The <a href="jakarta/data/repository/Param.html" title="annotation interface in jakarta.data.repository"><code>Param</code></a> annotation associates a method parameter with a named parameter.
 The <code>Param</code> annotation is unnecessary when the method parameter name matches the
 name of a named parameter and the application is compiled with the <code>-parameters</code>
 compiler option making parameter names available at runtime.</p>

 <pre>
 // example using named parameters
 &#64;Query("where age between :min and :max order by age")
 List&lt;Person&gt; peopleInAgeRange(int min, int max);
 </pre>

 <pre>
 // example using an ordinal parameter
 &#64;Query("where ssn = ?1 and deceased = false")
 Optional&lt;Person&gt; person(String ssn);
 </pre>

 <p>Refer to the <a href="jakarta/data/repository/Query.html" title="annotation interface in jakarta.data.repository">API documentation</a> for <code>@Query</code> for further
 information.</p>

 <h2 id="query-by-method-name-heading">Query by Method Name</h2>

 <p>The <em>Query by Method Name</em> pattern translates the name of the
 repository method into a query. The repository method must not include the
 <code>@Find</code> annotation, <code>@Query</code> annotation, or any life cycle
 annotations on the method, and it must not include any data access related
 annotations on the method parameters. The method name must be composed of
 one or more clauses that specify the query's action and optionally any
 restrictions for matching and ordering of results. The following table lists
 the method name prefixes available and shows an example query for each.</p>

 <table id="methodNamePrefixes" style="width: 100%">
 <caption><b>Query By Method Name</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top; width: 10%"><b>Prefix</b></td>
 <td style="vertical-align: top; width: 25%"><b>Description</b></td>
 <td style="vertical-align: top; width: 65%"><b>Example</b></td>
 </tr>

 <tr style="vertical-align: top"><td><code>count</code></td>
 <td>counts the number of entities</td>
 <td><code>countByAgeGreaterThanEqual(ageLimit)</code></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>delete</code></td>
 <td>for delete operations</td>
 <td><code>deleteByStatus("DISCONTINUED")</code></td></tr>

 <tr style="vertical-align: top"><td><code>exists</code></td>
 <td>for determining existence</td>
 <td><code>existsByYearHiredAndWageLessThan(2022, 60000)</code></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>find</code></td>
 <td>for find operations</td>
 <td><code>findByHeightBetweenOrderByAge(minHeight, maxHeight)</code></td></tr>
 </table>

 <p>The method name must begin with an <em>action clause</em> that starts with a
 prefix (<code>count</code>, <code>delete</code>, <code>exists</code>, or <code>find</code>) that
 specifies the action of the query. The <code>find</code> prefix can optionally be
 followed by the keyword <code>First</code> and 0 or more digits, which limit the
 number of results retrieved. The remaining portion of the action clause is
 ignored text that must not contain reserved keywords.</p>

 <p>A <em>restriction clause</em> consisting of the <code>By</code> keyword
 followed by one or more conditions can optionally follow the action clause.
 Multiple conditions must be delimited by the <code>And</code> or <code>Or</code> keyword.
 Each condition consists of a case insensitive entity attribute name, optionally
 followed by the <code>IgnoreCase</code> keyword (for text properties), optionally
 followed by the <code>Not</code> keyword, optionally followed by a condition operator
 keyword such as <code>StartsWith</code>. The equality condition is implied when no
 condition operator keyword is present. Most of the condition operations, such as
 <code>Like</code> or <code>LessThan</code>, correspond to a single method parameter. The
 exceptions to this rule are <code>Between</code>, which corresponds to two method
 parameters, and <code>Null</code>, <code>True</code>, and <code>False</code>, which require
 no method parameters.</p>

 <p>A <code>find</code> query can optionally end with an <em>order</em>,
 consisting of the <code>OrderBy</code> keyword and one or more pairings of case
 insensitive entity attribute name followed by the <code>Asc</code> or <code>Desc</code>
 keyword, indicating ascending or descending sort. In the case of a single entity
 attribute, the paired keyword can be omitted, in which case ascending sort is
 implied.</p>

 <p>Key-value and Wide-Column databases raise <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link"><code>UnsupportedOperationException</code></a>
 for queries on attributes other than the identifier/key.</p>

 <h3 id="reserved-keywords-for-query-by-method-name-heading">Reserved keywords for Query by Method Name</h3>

 <table style="width: 100%">
 <caption><b>Reserved for Predicate</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top"><b>Keyword</b></td>
 <td style="vertical-align: top"><b>Applies to</b></td>
 <td style="vertical-align: top"><b>Description</b></td>
 <td style="vertical-align: top"><b>Example</b></td>
 <td style="vertical-align: top"><b>Unavailable In</b></td>
 </tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>And</code></td>
 <td>conditions</td>
 <td>Requires both conditions to be satisfied in order to match an entity.</td>
 <td><code>findByNameLikeAndPriceLessThanEqual(namePattern, maxPrice)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top"><td><code>Between</code></td>
 <td>sortable basic types</td>
 <td>Requires that the entity's attribute value be within the range specified by two parameters,
 inclusive of the parameters. The minimum is listed first, then the maximum.</td>
 <td><code>findByAgeBetween(minAge, maxAge)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>Contains</code></td>
 <td>strings</td>
 <td>Requires that a substring of the entity's attribute value
 matches the parameter value, which can be a pattern.</td>
 <td><code>findByNameContains(middleName)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top"><td><code>EndsWith</code></td>
 <td>strings</td>
 <td>Requires that the characters at the end of the entity's attribute value
 match the parameter value, which can be a pattern.</td>
 <td><code>findByNameEndsWith(surname)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>False</code></td>
 <td>boolean</td>
 <td>Requires that the entity's attribute value has a boolean value of false.</td>
 <td><code>findByCanceledFalse()</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top"><td><code>GreaterThan</code></td>
 <td>sortable basic types</td>
 <td>Requires that the entity's attribute value be larger than the parameter value.</td>
 <td><code>findByStartTimeGreaterThan(startedAfter)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>GreaterThanEqual</code></td>
 <td>sortable basic types</td>
 <td>Requires that the entity's attribute value be at least as big as the parameter value.</td>
 <td><code>findByAgeGreaterThanEqual(minimumAge)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: "><td><code>IgnoreCase</code></td>
 <td>strings</td>
 <td>Requires case insensitive comparison. For query conditions
 as well as ordering, the <code>IgnoreCase</code> keyword can be
 specified immediately following the entity property name.</td>
 <td><code>countByStatusIgnoreCaseNotLike("%Delivered%")</code>
 <br><code>findByZipcodeOrderByStreetIgnoreCaseAscHouseNumAsc(55904)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>In</code></td>
 <td>sortable basic types</td>
 <td>Requires that the entity attribute value belong to the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link"><code>Set</code></a> that is
 the parameter value.</td>
 <td><code>findByMonthIn(Set.of(Month.MAY, Month.JUNE))</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top"><td><code>LessThan</code></td>
 <td>sortable basic types</td>
 <td>Requires that the entity's attribute value be less than the parameter value.</td>
 <td><code>findByStartTimeLessThan(startedBefore)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>LessThanEqual</code></td>
 <td>sortable basic types</td>
 <td>Requires that the entity's attribute value be at least as small as the parameter value.</td>
 <td><code>findByAgeLessThanEqual(maximumAge)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top"><td><code>Like</code></td>
 <td>strings</td>
 <td>Requires that the entity's attribute value match the parameter value, which can be a pattern.</td>
 <td><code>findByNameLike(namePattern)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>Not</code></td>
 <td>condition</td>
 <td>Negates a condition.</td>
 <td><code>deleteByNameNotLike(namePattern)</code>
 <br><code>findByStatusNot("RUNNING")</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top"><td><code>Null</code></td>
 <td>nullable types</td>
 <td>Requires that the entity's attribute has a null value.</td>
 <td><code>findByEndTimeNull()</code>
 <br><code>findByAgeNotNull()</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>Or</code></td>
 <td>conditions</td>
 <td>Requires at least one of the two conditions to be satisfied in order to match an entity.</td>
 <td><code>findByPriceLessThanEqualOrDiscountGreaterThanEqual(maxPrice, minDiscount)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 <tr style="vertical-align: top"><td><code>StartsWith</code></td>
 <td>strings</td>
 <td>Requires that the characters at the beginning of the entity's attribute value
 match the parameter value, which can be a pattern.</td>
 <td><code>findByNameStartsWith(firstTwoLetters)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>True</code></td>
 <td>boolean</td>
 <td>Requires that the entity's attribute value has a boolean value of true.</td>
 <td><code>findByAvailableTrue()</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column</td></tr>

 </table>

 <br><br>

 <table style="width: 100%">
 <caption><b>Reserved for Subject</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top; width: 12%"><b>Keyword</b></td>
 <td style="vertical-align: top; width: *%"><b>Applies to</b></td>
 <td style="vertical-align: top; width: *"><b>Description</b></td>
 <td style="vertical-align: top; width: 48%"><b>Example</b></td>
 <td style="vertical-align: top; width: *"><b>Unavailable In</b></td>
 </tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>First</code></td>
 <td>find...By</td>
 <td>Limits the amount of results that can be returned by the query
 to the number that is specified after <code>First</code>,
 or absent that to a single result.</td>
 <td><code>findFirst25ByYearHiredOrderBySalaryDesc(int yearHired)</code>
 <br><code>findFirstByYearHiredOrderBySalaryDesc(int yearHired)</code></td>
 <td style="font-family:sans-serif; font-size:0.8em">Key-value<br>Wide-Column<br>Document<br>Graph</td></tr>
 </table>

 <br><br>

 <table style="width: 100%">
 <caption><b>Reserved for Order Clause</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top"><b>Keyword</b></td>
 <td style="vertical-align: top"><b>Description</b></td>
 <td style="vertical-align: top"><b>Example</b></td>
 </tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>Asc</code></td>
 <td>Specifies ascending sort order for <code>findBy</code> queries</td>
 <td><code>findByAgeOrderByFirstNameAsc(age)</code></td></tr>

 <tr style="vertical-align: top"><td><code>Desc</code></td>
 <td>Specifies descending sort order for <code>findBy</code> queries</td>
 <td><code>findByAuthorLastNameOrderByYearPublishedDesc(surname)</code></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>OrderBy</code></td>
 <td>Sorts results of a <code>findBy</code> query according to one or more entity attributes.
 Multiple attributes are delimited by <code>Asc</code> and <code>Desc</code>,
 which indicate ascending and descending sort direction.
 Precedence in sorting is determined by the order in which attributes are listed.</td>
 <td><code>findByStatusOrderByYearHiredDescLastNameAsc(empStatus)</code></td></tr>

 </table>

 <p>Key-value and Wide-Column databases raise <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link"><code>UnsupportedOperationException</code></a>
 if an order clause is present.</p>

 <h3 id="reserved-for-future-use-heading">Reserved for future use</h3>
 <p>
 The specification does not define behavior for the following keywords, but reserves
 them as keywords that must not be used as entity attribute names when using
 Query by Method Name. This gives the specification the flexibility to add them in
 future releases without introducing breaking changes to applications.
 </p>
 <p>
 Reserved for query conditions: <code>AbsoluteValue</code>, <code>CharCount</code>,
 <code>ElementCount</code>, <code>Empty</code>,
 <code>Rounded</code>, <code>RoundedDown</code>, <code>RoundedUp</code>, <code>Trimmed</code>,
 <code>WithDay</code>, <code>WithHour</code>, <code>WithMinute</code>, <code>WithMonth</code>,
 <code>WithQuarter</code>, <code>WithSecond</code>, <code>WithWeek</code>, <code>WithYear</code>.
 </p>
 <p>
 Reserved for <code>find</code> and <code>count</code>: <code>Distinct</code>.
 </p>
 <p>
 Reserved for updates: <code>Add</code>, <code>Divide</code>, <code>Multiply</code>, <code>Set</code>, <code>Subtract</code>.
 </p>

 <h3 id="wildcard-characters-heading">Wildcard characters</h3>
 <p>
 Wildcard characters for patterns are determined by the data access provider.
 For Jakarta Persistence providers, <code>_</code> matches any one character
 and <code>%</code> matches 0 or more characters.
 </p>

 <h3 id="logical-operator-precedence-heading">Logical operator precedence</h3>
 <p>
 For relational databases, the logical operator <code>And</code>
 is evaluated on conditions before <code>Or</code> when both are specified
 on the same method. Precedence for other database types is limited to
 the capabilities of the database.
 </p>

 <h3 id="return-types-for-query-by-method-name-heading">Return types for Query by Method Name</h3>

 <p>The following is a table of valid return types.
 The <b>Method</b> column shows name patterns for Query by Method Name.</p>

 <table style="width: 100%">
 <caption><b>Return Types for Query by Method Name</b></caption>
 <tr style="background-color:#ccc">
 <td style="vertical-align: top"><b>Method</b></td>
 <td style="vertical-align: top"><b>Return Types</b></td>
 <td style="vertical-align: top"><b>Notes</b></td>
 </tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>count</code></td>
 <td><code>long</code></td>
 <td></td></tr>

 <tr style="vertical-align: top"><td><code>delete</code></td>
 <td><code>void</code>,
 <br><code>long</code>,
 <br><code>int</code></td>
 <td></td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>exists</code></td>
 <td><code>boolean</code></td>
 <td>For determining existence</td></tr>

 <tr style="vertical-align: top"><td><code>find</code></td>
 <td><code>E</code>,
 <br><code>Optional&lt;E&gt;</code></td>
 <td>For queries returning a single item (or none)</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>find</code></td>
 <td><code>E[]</code>,
 <br><code>List&lt;E&gt;</code></td>
 <td>For queries where it is possible to return more than 1 item</td></tr>

 <tr style="vertical-align: top"><td><code>find</code></td>
 <td><code>Stream&lt;E&gt;</code></td>
 <td>The caller must call <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/BaseStream.html#close()" title="class or interface in java.util.stream" class="external-link"><code>close</code></a>
 for every stream returned by the repository method</td></tr>

 <tr style="vertical-align: top; background-color:#eee"><td><code>find</code> accepting <a href="jakarta/data/page/PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a></td>
 <td><code>Page&lt;E&gt;</code>, <code>CursoredPage&lt;E&gt;</code></td>
 <td>For use with pagination</td></tr>

 </table>

 <h2 id="parameter-based-automatic-query-methods-heading">Parameter-based automatic query methods</h2>

 <p>The <a href="jakarta/data/repository/Find.html" title="annotation interface in jakarta.data.repository"><code>Find</code></a> annotation indicates that the repository method is
 a parameter-based automatic query method. In this case, the method name
 does not determine the semantics of the method, and the query conditions
 are determined by the method parameters.</p>

 <p>Each parameter of the annotated method must either:</p>
 <ul>
 <li>have exactly the same type and name (the parameter name in the Java
     source, or a name assigned by <a href="jakarta/data/repository/By.html" title="annotation interface in jakarta.data.repository"><code>@By</code></a>) as a persistent field
     or property of the entity class, or</li>
 <li>be of type <a href="jakarta/data/Limit.html" title="class in jakarta.data"><code>Limit</code></a>, <a href="jakarta/data/Sort.html" title="class in jakarta.data"><code>Sort</code></a>,
     <a href="jakarta/data/Order.html" title="class in jakarta.data"><code>Order</code></a>, or <a href="jakarta/data/page/PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a>.</li>
 </ul>

 <p>A parameter may be annotated with the <a href="jakarta/data/repository/By.html" title="annotation interface in jakarta.data.repository"><code>By</code></a> annotation to specify
 the name of the entity attribute that the argument is to be compared with.
 If the <a href="jakarta/data/repository/By.html" title="annotation interface in jakarta.data.repository"><code>By</code></a> annotation is missing, the method parameter name must
 match the name of an entity attribute and the repository must be compiled
 with the <code>-parameters</code> compiler option so that parameter names are
 available at runtime.</p>

 <p>Each parameter determines a query condition, and each such condition
 is an equality condition. All conditions must match for a record to
 satisfy the query.</p>

 <pre>
 &#64;Find
 &#64;OrderBy("lastName")
 &#64;OrderBy("firstName")
 List&lt;Person&gt; peopleByAgeAndNationality(int age, Country nationality);
 </pre>

 <pre>
 &#64;Find
 Optional&lt;Person&gt; person(String ssn);
 </pre>

 <p>The <code>_</code> character may be used in a method parameter name to
 reference an embedded attribute.</p>

 <pre>
 &#64;Find
 &#64;OrderBy("address.zip")
 Stream&lt;Person&gt; peopleInCity(String address_city);
 </pre>

 <p>The following examples illustrate the difference between Query By Method
 Name and parameter-based automatic query methods. Both methods accept the
 same parameters and have the same behavior.</p>

 <pre>
 // Query by Method Name
 Vehicle[] findByMakeAndModelAndYear(String makerName, String model, int year, Sort&lt;?&gt;... sorts);

 // parameter-based conditions
 &#64;Find
 Vehicle[] searchFor(String make, String model, int year, Sort&lt;?&gt;... sorts);
 </pre>

 <p>For further information, refer to the <a href="jakarta/data/repository/Find.html" title="annotation interface in jakarta.data.repository">API documentation</a>
 for <code>@Find</code>.</p>

 <h2 id="special-parameters-heading">Special parameters</h2>

 <p>A repository method annotated <a href="jakarta/data/repository/Query.html" title="annotation interface in jakarta.data.repository"><code>@Query</code></a>, <a href="jakarta/data/repository/Find.html" title="annotation interface in jakarta.data.repository"><code>@Find</code></a> or
 following the <em>Query by Method Name</em> pattern may have <em>special
 parameters</em> of type <a href="jakarta/data/Limit.html" title="class in jakarta.data"><code>Limit</code></a>, <a href="jakarta/data/Order.html" title="class in jakarta.data"><code>Order</code></a>, <a href="jakarta/data/Sort.html" title="class in jakarta.data"><code>Sort</code></a>, or
 <a href="jakarta/data/page/PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a> if the method return type indicates that the method may
 return multiple entities. Special parameters occur after parameters related
 to query conditions and JDQL query parameters, and enable capabilities such
 as pagination, limits, and sorting.</p>

 <h3 id="limits-heading">Limits</h3>

 <p>The number of results returned by a single invocation of a repository
 find method may be limited by adding a parameter of type <a href="jakarta/data/Limit.html" title="class in jakarta.data"><code>Limit</code></a>.
 The results may even be limited to a positioned range. For example,</p>

 <pre>
 &#64;Query("WHERE (fullPrice - salePrice) / fullPrice &gt;= ?1 ORDER BY salePrice DESC, id ASC")
 Product[] highlyDiscounted(float minPercentOff, Limit limit);

 ...
 first50 = products.highlyDiscounted(0.30, Limit.of(50));
 ...
 second50 = products.highlyDiscounted(0.30, Limit.range(51, 100));
 </pre>

 <h3 id="pagination-heading">Pagination</h3>

 <p>A repository find method with a parameter of type <a href="jakarta/data/page/PageRequest.html" title="interface in jakarta.data.page"><code>PageRequest</code></a>
 allows its results to be split and retrieved in pages. For example,</p>

 <pre>
 Product[] findByNameLikeOrderByAmountSoldDescIdAsc(
                 String pattern, PageRequest pageRequest);
 ...
 page1 = products.findByNameLikeOrderByAmountSoldDescIdAsc(
                 "%phone%", PageRequest.ofSize(20));
 </pre>

 <p>When using pagination, always ensure that the ordering is consistent
 across invocations. One way to achieve this is to include the unique
 identifier in the sort criteria.</p>

 <h3 id="sorting-heading">Sorting</h3>

 <p>When a page is requested with a <code>PageRequest</code>, dynamic sorting
 criteria may be supplied by passing instances of <a href="jakarta/data/Sort.html" title="class in jakarta.data"><code>Sort</code></a> or <a href="jakarta/data/Order.html" title="class in jakarta.data"><code>Order</code></a>.
 For example,</p>

 <pre>
 Product[] findByNameLike(String pattern, PageRequest pageRequest, Order&lt;Product&gt; order);

 ...
 PageRequest page1Request = PageRequest.ofSize(25);

 page1 = products.findByNameLikeAndPriceBetween(
                 namePattern, minPrice, maxPrice, page1Request,
                 Order.by(Sort.desc("price"), Sort.asc("id"));
 </pre>

 <p>To supply sort criteria dynamically without using pagination, an
 instance of <a href="jakarta/data/Order.html" title="class in jakarta.data"><code>Order</code></a> may be populated with one or more instances
 of <a href="jakarta/data/Sort.html" title="class in jakarta.data"><code>Sort</code></a> and passed to the repository find method. For example,</p>

 <pre>
 Product[] findByNameLike(String pattern, Limit max, Order&lt;Product&gt; sortBy);

 ...
 found = products.findByNameLike(namePattern, Limit.of(25),
                                 Order.by(Sort.desc("price"),
                                          Sort.desc("amountSold"),
                                          Sort.asc("id")));
 </pre>

 <p>Generic, untyped <a href="jakarta/data/Sort.html" title="class in jakarta.data"><code>Sort</code></a> criteria can be supplied directly to a
 repository method with a variable arguments <code>Sort&lt;?&gt;...</code> parameter.
 For example,</p>

 <pre>
 Product[] findByNameLike(String pattern, Limit max, <code>Sort&lt;?&gt;...</code> sortBy);

 ...
 found = products.findByNameLike(namePattern, Limit.of(25),
                                 Sort.desc("price"),
                                 Sort.desc("amountSold"),
                                 Sort.asc("name"));
 </pre>

 <h2 id="repository-default-methods-heading">Repository default methods</h2>

 <p>A repository interface may declare any number of <code>default</code> methods
 with user-written implementations.</p>

 <h2 id="resource-accessor-methods-heading">Resource accessor methods</h2>

 <p>In advanced scenarios, the application program might make direct use of
 some underlying resource acquired by the Jakarta Data provider, such as a
 <code>javax.sql.DataSource</code>, <code>java.sql.Connection</code>, or even an
 <code>jakarta.persistence.EntityManager</code>.</p>

 <p>To expose access to an instance of such a resource, the repository
 interface may declare an accessor method, a method with no parameters
 whose return type is the type of the resource, for example, one of the
 types listed above. When this method is called, the Jakarta Data provider
 supplies an instance of the requested type of resource.</p>

 <p>For example,</p>

 <pre>
 &#64;Repository
 public interface Cars extends BasicRepository&lt;Car, Long&gt; {
     ...

     EntityManager getEntityManager();

     default Car[] advancedSearch(SearchOptions filter) {
         EntityManager em = getEntityManager();
         ... use entity manager
         return results;
     }
 }
 </pre>

 <p>If the resource type inherits from <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link"><code>AutoCloseable</code></a> and the
 accessor method is called from within an invocation of a default method
 of the repository, the Jakarta Data provider automatically closes the
 resource after the invocation of the default method ends. On the other
 hand, if the accessor method is called from outside the scope of a
 default method of the repository, it is not automatically closed, and
 the application programmer is responsible for closing the resource
 instance.</p>

 <h2 id="precedence-of-repository-methods-heading">Precedence of repository methods</h2>

 <p>The following order, with the lower number having higher precedence,
 is used to interpret the meaning of repository methods.</p>

 <ol>
 <li>If the method is a Java <code>default</code> method, then the provided
     implementation is used.</li>
 <li>If a method has a <em>resource accessor method</em> return type
     recognized by the Jakarta Data provider, then the method is
     implemented as a resource accessor method.</li>
 <li>If a method is annotated with a <em>query annotation</em>
     recognized by the Jakarta Data provider, such as <a href="jakarta/data/repository/Query.html" title="annotation interface in jakarta.data.repository"><code>Query</code></a>,
     then the method is implemented to execute the query specified by
     the query annotation.</li>
 <li>If the method is annotated with an automatic query annotation,
     such as <a href="jakarta/data/repository/Find.html" title="annotation interface in jakarta.data.repository"><code>Find</code></a>, or with a lifecycle annotation declaring
     the type of operation, for example, with <a href="jakarta/data/repository/Insert.html" title="annotation interface in jakarta.data.repository"><code>Insert</code></a>,
     <a href="jakarta/data/repository/Update.html" title="annotation interface in jakarta.data.repository"><code>Update</code></a>, <a href="jakarta/data/repository/Save.html" title="annotation interface in jakarta.data.repository"><code>Save</code></a>, or <a href="jakarta/data/repository/Delete.html" title="annotation interface in jakarta.data.repository"><code>Delete</code></a>, and the provider
     recognizes the annotation, then the annotation determines how the
     method is implemented.</li>
 <li>If a method is named according to the conventions of <em>Query by
     Method Name</em>, then the implementation follows the Query by
     Method Name pattern.</li>
 </ol>

 <p>A repository method which does not fit any of the listed patterns
 and is not handled as a vendor-specific extension must either cause
 an error at build time or raise <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link"><code>UnsupportedOperationException</code></a>
 at runtime.</p>

 <h2 id="identifying-the-type-of-entity-heading">Identifying the type of entity</h2>

 <p>Most repository methods perform operations related to a type of entity.
 In some cases, the entity type is explicit within the signature of the
 repository method, and in other cases, such as <code>countBy...</code> and
 <code>existsBy...</code> the entity type cannot be determined from the method
 signature and a primary entity type must be defined for the repository.</p>

 <h3 id="methods-where-the-entity-type-is-explicitly-specified-heading">Methods where the entity type is explicitly specified</h3>

 <p>In the following cases, the entity type is determined by the signature
 of the repository method.</p>

 <ul>
 <li>For repository methods annotated with <a href="jakarta/data/repository/Insert.html" title="annotation interface in jakarta.data.repository"><code>Insert</code></a>, <a href="jakarta/data/repository/Update.html" title="annotation interface in jakarta.data.repository"><code>Update</code></a>,
     <a href="jakarta/data/repository/Save.html" title="annotation interface in jakarta.data.repository"><code>Save</code></a>, or <a href="jakarta/data/repository/Delete.html" title="annotation interface in jakarta.data.repository"><code>Delete</code></a> where the method parameter type is a
     type, an array of a type, or is parameterized with a type annotated
     as an entity, such as <code>MyEntity</code>, <code>MyEntity[]</code>, or
     <code>List&lt;MyEntity&gt;</code>, the entity type is determined by the method
     parameter type.</li>
 <li>For <code>find</code> and <code>delete</code> methods where the return type is
     a type, an array of a type, or is parameterized with a type annotated
     as an entity, such as <code>MyEntity</code>, <code>MyEntity[]</code>, or
     <code>Page&lt;MyEntity&gt;</code>, the entity type is determined by the method
     return type.</li>
 </ul>

 <h3 id="identifying-a-primary-entity-type--heading">Identifying a primary entity type:</h3>

 <p>The following precedence, from highest to lowest, is used to determine
 a primary entity type for a repository.</p>

 <ol>
 <li>The primary entity type for a repository interface may be specified
 explicitly by having the repository interface inherit a superinterface
 like <a href="jakarta/data/repository/CrudRepository.html" title="interface in jakarta.data.repository"><code>CrudRepository</code></a>, where the primary entity type is the argument
 to the first type parameter of the superinterface. For example,
 <code>Product</code>, in,
 <pre>
 &#64;Repository
 public interface Products extends CrudRepository&lt;Product, Long&gt; {
     // applies to the primary entity type: Product
     long countByPriceLessThan(float max);
 }
 </pre>
 </li>
 <li>Otherwise, if the repository declares lifecycle methods&mdash;that is,
 has methods annotated with a lifecycle annotation like <a href="jakarta/data/repository/Insert.html" title="annotation interface in jakarta.data.repository"><code>Insert</code></a>,
 <a href="jakarta/data/repository/Update.html" title="annotation interface in jakarta.data.repository"><code>Update</code></a>, <a href="jakarta/data/repository/Save.html" title="annotation interface in jakarta.data.repository"><code>Save</code></a>, or <a href="jakarta/data/repository/Delete.html" title="annotation interface in jakarta.data.repository"><code>Delete</code></a>, where the method
 parameter type is a type, an array of a type, or is parameterized with a
 type annotated as an entity&mdash;and all of these methods share the same
 entity type, then the primary entity type for the repository is that entity
 type. For example,
 <pre>
 &#64;Repository
 public interface Products {
     &#64;Insert
     List&lt;Product&gt; add(List&lt;Product&gt; p);

     &#64;Update
     Product modify(Product p);

     &#64;Save
     Product[] save(Product... p);

     // applies to the primary entity type: Product
     boolean existsByName(String name);
 }
 </pre>
 </li>
 </ol>

 <h2 id="jakarta-validation-heading">Jakarta Validation</h2>

 <p>When a Jakarta Validation provider is present, constraints that are defined on
 repository method parameters and return values are validated according to the section,
 "Method and constructor validation", of the Jakarta Validation specification.</p>

 <p>The <code>jakarta.validation.Valid</code> annotation opts in to cascading validation,
 causing constraints within the objects that are supplied as parameters
 or returned as results to also be validated.</p>

 <p>Repository methods raise <code>jakarta.validation.ConstraintViolationException</code>
 if validation fails.</p>

 <p>The following is an example of method validation, where the
 parameter to <code>findByEmailIn</code> must not be the empty set,
 and cascading validation, where the <code>Email</code> and <code>NotNull</code> constraints
 on the entity that is supplied to <code>save</code> are validated,</p>

 <pre>
 import jakarta.validation.Valid;
 import jakarta.validation.constraints.Email;
 import jakarta.validation.constraints.NotEmpty;
 import jakarta.validation.constraints.NotNull;
 ...

 &#64;Repository
 public interface AddressBook extends DataRepository&lt;Contact, Long&gt; {

     List&lt;Contact&gt; findByEmailIn(&#64;NotEmpty Set&lt;String&gt; emails);

     &#64;Save
     void save(&#64;Valid Contact c);
 }

 &#64;Entity
 public class Contact {
     &#64;Email
     &#64;NotNull
     public String email;
     &#64;Id
     public long id;
     ...
 }
 </pre>


 <h2 id="jakarta-interceptors-heading">Jakarta Interceptors</h2>

 <p>A repository interface or method of a repository interface may be annotated with an
 interceptor binding annotation. In the Jakarta EE environment, or in any other environment
 where Jakarta Interceptors is available and integrated with Jakarta CDI, the repository
 implementation is instantiated by the CDI bean container, and the interceptor binding type
 is declared <code>@Inherited</code>, the interceptor binding annotation is inherited by the
 repository implementation, and the interceptors bound to the annotation are applied
 automatically by the implementation of Jakarta Interceptors.</p>

 <h2 id="jakarta-transactions-heading">Jakarta Transactions</h2>

 <p>When Jakarta Transactions is available, repository methods can participate in global
 transactions. If a global transaction is active on the thread of execution in which a
 repository method is called, and the data source backing the repository is capable of
 transaction enlistment, then the repository operation is performed within the context of
 the global transaction.</p>

 <p>The repository operation must not not commit or roll back a transaction which was
 already associated with the thread in which the repository operation was called, but it
 might cause the transaction to be marked for rollback if the repository operation fails,
 that is, it may set the transaction status to <code>Status.STATUS_MARKED_ROLLBACK</code>.</p>

 <p>A repository interface or method of a repository interface may be marked with the
 annotation <code>jakarta.transaction.Transactional</code>. When a repository operation marked
 <code>@Transactional</code> is called in an environment where both Jakarta Transactions and
 Jakarta CDI are available, the semantics of this annotation are observed during execution
 of the repository operation.</p></div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<section class="packages-summary" id="packages-summary">
<!-- ============ PACKAGES SUMMARY =========== -->
<h2>Packages</h2>
<div id="package-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="package-summary-table-tab0" role="tab" aria-selected="true" aria-controls="package-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('package-summary-table', 'package-summary-table', 4)" class="active-table-tab">All Packages</button><button id="package-summary-table-tab1" role="tab" aria-selected="false" aria-controls="package-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('package-summary-table', 'package-summary-table-tab1', 4)" class="table-tab">Exports</button><button id="package-summary-table-tab2" role="tab" aria-selected="false" aria-controls="package-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('package-summary-table', 'package-summary-table-tab2', 4)" class="table-tab">Opens</button></div>
<div id="package-summary-table.tabpanel" role="tabpanel">
<div class="summary-table four-column-summary" aria-labelledby="package-summary-table-tab0">
<div class="table-header col-first">Package</div>
<div class="table-header col-second">Exported To Modules</div>
<div class="table-header col-second">Opened To Modules</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/package-summary.html">jakarta.data</a></div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last even-row-color package-summary-table package-summary-table-tab1">
<div class="block">Jakarta Data provides an API that simplifies data access.</div>
</div>
<div class="col-first odd-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/exceptions/package-summary.html">jakarta.data.exceptions</a></div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last odd-row-color package-summary-table package-summary-table-tab1">
<div class="block">Common data access exceptions.</div>
</div>
<div class="col-first even-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/metamodel/package-summary.html">jakarta.data.metamodel</a></div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last even-row-color package-summary-table package-summary-table-tab1">
<div class="block">A static metamodel for entities that are used in Jakarta Data repositories.</div>
</div>
<div class="col-first odd-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/metamodel/impl/package-summary.html">jakarta.data.metamodel.impl</a></div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last odd-row-color package-summary-table package-summary-table-tab1">&nbsp;</div>
<div class="col-first even-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/page/package-summary.html">jakarta.data.page</a></div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last even-row-color package-summary-table package-summary-table-tab1">
<div class="block">Splits query results into pages.</div>
</div>
<div class="col-first odd-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/page/impl/package-summary.html">jakarta.data.page.impl</a></div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last odd-row-color package-summary-table package-summary-table-tab1">&nbsp;</div>
<div class="col-first even-row-color package-summary-table package-summary-table-tab1 package-summary-table-tab2"><a href="jakarta/data/repository/package-summary.html">jakarta.data.repository</a></div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1 package-summary-table-tab2">All Modules</div>
<div class="col-second even-row-color package-summary-table package-summary-table-tab1 package-summary-table-tab2">All Modules</div>
<div class="col-last even-row-color package-summary-table package-summary-table-tab1 package-summary-table-tab2">
<div class="block">A repository is an interface annotated with <a href="jakarta/data/repository/Repository.html" title="annotation interface in jakarta.data.repository"><code>Repository</code></a> that defines
 operations on entities.</div>
</div>
<div class="col-first odd-row-color package-summary-table package-summary-table-tab1"><a href="jakarta/data/spi/package-summary.html">jakarta.data.spi</a></div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">All Modules</div>
<div class="col-second odd-row-color package-summary-table package-summary-table-tab1">None</div>
<div class="col-last odd-row-color package-summary-table package-summary-table-tab1">&nbsp;</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2017&#x2013;2020 <a href="https://www.eclipse.org">Eclipse Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
