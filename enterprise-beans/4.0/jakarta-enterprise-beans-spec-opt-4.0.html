<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Jakarta Enterprise Beans Team, https://projects.eclipse.org/projects/ee4j.ejb">
<title>Jakarta&#174; Enterprise Beans, Optional Features</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta&#174; Enterprise Beans, Optional Features</h1>
<div class="details">
<span id="author" class="author">Jakarta Enterprise Beans Team, https://projects.eclipse.org/projects/ee4j.ejb</span><br>
<span id="email" class="email"><a href="https://accounts.eclipse.org/mailing-list/ejb-dev" class="bare">https://accounts.eclipse.org/mailing-list/ejb-dev</a></span><br>
<span id="revnumber"> 4.0,</span>
<span id="revdate">November 05, 2020</span>
<br><span id="revremark">Final</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#copyright">Copyright</a>
<ul class="sectlevel2">
<li><a href="#eclipse-foundation-specification-license">Eclipse Foundation Specification License</a>
<ul class="sectlevel3">
<li><a href="#disclaimers">Disclaimers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#acknowledgements">1.1. Acknowledgements</a></li>
<li><a href="#organization-of-the-specification-documents">1.2. Organization of the Specification Documents</a></li>
<li><a href="#document-conventions">1.3. Document Conventions</a></li>
</ul>
</li>
<li><a href="#overview">2. Overview</a></li>
<li><a href="#a41">3. Client View of an Entity Bean</a>
<ul class="sectlevel2">
<li><a href="#overview-2">3.1. Overview</a></li>
<li><a href="#remote-clients">3.2. Remote Clients</a></li>
<li><a href="#local-clients">3.3. Local Clients</a></li>
<li><a href="#choosing-between-a-local-or-remote-client-view">3.4. Choosing Between a Local or Remote Client View</a></li>
<li><a href="#enterprise-beans-container">3.5. Enterprise Beans Container</a>
<ul class="sectlevel3">
<li><a href="#locating-an-entity-beans-home-interface">3.5.1. Locating an Entity Bean’s Home Interface</a></li>
<li><a href="#what-a-container-provides">3.5.2. What a Container Provides</a></li>
</ul>
</li>
<li><a href="#entity-beans-remote-home-interface">3.6. Entity Bean’s Remote Home Interface</a>
<ul class="sectlevel3">
<li><a href="#create-methods">3.6.1. Create Methods</a></li>
<li><a href="#finder-methods">3.6.2. Finder Methods</a></li>
<li><a href="#remove-methods">3.6.3. Remove Methods</a></li>
<li><a href="#home-methods">3.6.4. Home Methods</a></li>
</ul>
</li>
<li><a href="#a179">3.7. Entity Bean’s Local Home Interface</a>
<ul class="sectlevel3">
<li><a href="#create-methods-2">3.7.1. Create Methods</a></li>
<li><a href="#finder-methods-2">3.7.2. Finder Methods</a></li>
<li><a href="#remove-methods-2">3.7.3. Remove Methods</a></li>
<li><a href="#home-methods-2">3.7.4. Home Methods</a></li>
</ul>
</li>
<li><a href="#entity-objects-life-cycle">3.8. Entity Object’s Life Cycle</a>
<ul class="sectlevel3">
<li><a href="#references-to-entity-object-remote-interfaces">3.8.1. References to Entity Object Remote Interfaces</a></li>
<li><a href="#references-to-entity-object-local-interfaces">3.8.2. References to Entity Object Local Interfaces</a></li>
<li><a href="#references-to-entity-object-and-stateful-session-bean-instance-passivation-and-conversational-state">3.8.3. References to Entity Object and Stateful Session Bean Instance Passivation and Conversational State</a></li>
</ul>
</li>
<li><a href="#primary-key-and-object-identity">3.9. Primary Key and Object Identity</a></li>
<li><a href="#entity-beans-remote-interface">3.10. Entity Bean’s Remote Interface</a></li>
<li><a href="#entity-beans-local-interface">3.11. Entity Bean’s Local Interface</a></li>
<li><a href="#a349">3.12. Entity Bean’s Handle</a></li>
<li><a href="#entity-home-handles">3.13. Entity Home Handles</a></li>
<li><a href="#type-narrowing-of-object-references">3.14. Type Narrowing of Object References</a></li>
</ul>
</li>
<li><a href="#a384">4. Enterprise Beans 2.1 Entity Bean Component Contract for Container-Managed Persistence</a>
<ul class="sectlevel2">
<li><a href="#overview-3">4.1. Overview</a></li>
<li><a href="#container-managed-entity-persistence-and-data-independence">4.2. Container-Managed Entity Persistence and Data Independence</a></li>
<li><a href="#the-entity-bean-providers-view-of-container-managed-persistence">4.3. The Entity Bean Provider’s View of Container-Managed Persistence</a>
<ul class="sectlevel3">
<li><a href="#the-entity-bean-providers-programming-contract">4.3.1. The Entity Bean Provider’s Programming Contract</a></li>
<li><a href="#a437">4.3.2. The Entity Bean Provider’s View of Persistent Relationships</a></li>
<li><a href="#dependent-value-classes">4.3.3. Dependent Value Classes</a></li>
<li><a href="#remove-protocols">4.3.4. Remove Protocols</a>
<ul class="sectlevel4">
<li><a href="#remove-methods-3">4.3.4.1. Remove Methods</a></li>
<li><a href="#cascade-delete">4.3.4.2. Cascade-delete</a></li>
</ul>
</li>
<li><a href="#identity-of-entity-objects">4.3.5. Identity of Entity Objects</a></li>
<li><a href="#a496">4.3.6. Semantics of Assignment for Relationships</a>
<ul class="sectlevel4">
<li><a href="#use-of-the-java-util-collection-api-to-update-relationships">4.3.6.1. Use of the java.util.Collection API to Update Relationships</a></li>
<li><a href="#use-of-set-accessor-methods-to-update-relationships">4.3.6.2. Use of Set Accessor Methods to Update Relationships</a></li>
</ul>
</li>
<li><a href="#a558">4.3.7. Assignment Rules for Relationships</a>
<ul class="sectlevel4">
<li><a href="#one-to-one-bidirectional-relationships">4.3.7.1. One-to-one Bidirectional Relationships</a></li>
<li><a href="#one-to-one-unidirectional-relationships">4.3.7.2. One-to-one Unidirectional Relationships</a></li>
<li><a href="#one-to-many-bidirectional-relationships">4.3.7.3. One-to-many Bidirectional Relationships</a></li>
<li><a href="#one-to-many-unidirectional-relationships">4.3.7.4. One-to-many Unidirectional Relationships</a></li>
<li><a href="#many-to-one-unidirectional-relationships">4.3.7.5. Many-to-one Unidirectional Relationships</a></li>
<li><a href="#many-to-many-bidirectional-relationships">4.3.7.6. Many-to-many Bidirectional Relationships</a></li>
<li><a href="#many-to-many-unidirectional-relationships">4.3.7.7. Many-to-many Unidirectional Relationships</a></li>
</ul>
</li>
<li><a href="#collections-managed-by-the-container">4.3.8. Collections Managed by the Container</a></li>
<li><a href="#non-persistent-state">4.3.9. Non-persistent State</a></li>
<li><a href="#the-relationship-between-the-internal-view-and-the-client-view">4.3.10. The Relationship Between the Internal View and the Client View</a>
<ul class="sectlevel4">
<li><a href="#restrictions-on-remote-interfaces">4.3.10.1. Restrictions on Remote Interfaces</a></li>
</ul>
</li>
<li><a href="#mapping-data-to-a-persistent-store">4.3.11. Mapping Data to a Persistent Store</a></li>
<li><a href="#example">4.3.12. Example</a></li>
<li><a href="#a1013">4.3.13. The Bean Provider’s View of the Deployment Descriptor</a></li>
</ul>
</li>
<li><a href="#the-entity-bean-component-contract">4.4. The Entity Bean Component Contract</a>
<ul class="sectlevel3">
<li><a href="#runtime-execution-model-of-entity-beans">4.4.1. Runtime Execution Model of Entity Beans</a></li>
<li><a href="#container-responsibilities">4.4.2. Container Responsibilities</a>
<ul class="sectlevel4">
<li><a href="#container-managed-fields">4.4.2.1. Container-Managed Fields</a></li>
<li><a href="#container-managed-relationships">4.4.2.2. Container-Managed Relationships</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#instance-life-cycle-contract-between-the-bean-and-the-container">4.5. Instance Life Cycle Contract Between the Bean and the Container</a>
<ul class="sectlevel3">
<li><a href="#instance-life-cycle">4.5.1. Instance Life Cycle</a></li>
<li><a href="#bean-providers-entity-bean-instances-view">4.5.2. Bean Provider’s Entity Bean Instance’s View</a></li>
<li><a href="#a1279">4.5.3. Container’s View</a></li>
<li><a href="#a1342">4.5.4. Read-only Entity Beans</a></li>
<li><a href="#the-entitycontext-interface">4.5.5. The EntityContext Interface</a></li>
<li><a href="#operations-allowed-in-the-methods-of-the-entity-bean-class">4.5.6. Operations Allowed in the Methods of the Entity Bean Class</a></li>
<li><a href="#a1446">4.5.7. Finder Methods</a>
<ul class="sectlevel4">
<li><a href="#single-object-finder-methods">4.5.7.1. Single-Object Finder Methods</a></li>
<li><a href="#multi-object-finder-methods">4.5.7.2. Multi-Object Finder Methods</a></li>
</ul>
</li>
<li><a href="#a1479">4.5.8. Select Methods</a>
<ul class="sectlevel4">
<li><a href="#single-object-select-methods">4.5.8.1. Single-Object Select Methods</a></li>
<li><a href="#multi-object-select-methods">4.5.8.2. Multi-Object Select Methods</a></li>
</ul>
</li>
<li><a href="#timer-notifications">4.5.9. Timer Notifications</a></li>
<li><a href="#a1524">4.5.10. Standard Application Exceptions for Entities</a>
<ul class="sectlevel4">
<li><a href="#createexception">4.5.10.1. CreateException</a></li>
<li><a href="#duplicatekeyexception">4.5.10.2. DuplicateKeyException</a></li>
<li><a href="#finderexception">4.5.10.3. FinderException</a></li>
<li><a href="#objectnotfoundexception">4.5.10.4. ObjectNotFoundException</a></li>
<li><a href="#removeexception">4.5.10.5. RemoveException</a></li>
</ul>
</li>
<li><a href="#a1554">4.5.11. Commit Options</a></li>
<li><a href="#concurrent-access-from-multiple-transactions">4.5.12. Concurrent Access from Multiple Transactions</a></li>
<li><a href="#a1596">4.5.13. Non-reentrant and Re-entrant Instances</a></li>
</ul>
</li>
<li><a href="#responsibilities-of-the-enterprise-bean-provider">4.6. Responsibilities of the Enterprise Bean Provider</a>
<ul class="sectlevel3">
<li><a href="#classes-and-interfaces">4.6.1. Classes and Interfaces</a></li>
<li><a href="#enterprise-bean-class">4.6.2. Enterprise Bean Class</a></li>
<li><a href="#dependent-value-classes-2">4.6.3. Dependent Value Classes</a></li>
<li><a href="#ejbcreatemethod-methods">4.6.4. ejbCreate&lt;METHOD&gt; Methods</a></li>
<li><a href="#ejbpostcreatemethod-methods">4.6.5. ejbPostCreate&lt;METHOD&gt; Methods</a></li>
<li><a href="#ejbhomemethod-methods">4.6.6. ejbHome&lt;METHOD&gt; Methods</a></li>
<li><a href="#ejbselectmethod-methods">4.6.7. ejbSelect&lt;METHOD&gt; Methods</a></li>
<li><a href="#business-methods">4.6.8. Business Methods</a></li>
<li><a href="#entity-beans-remote-interface-2">4.6.9. Entity Bean’s Remote Interface</a></li>
<li><a href="#entity-beans-remote-home-interface-2">4.6.10. Entity Bean’s Remote Home Interface</a></li>
<li><a href="#entity-beans-local-interface-2">4.6.11. Entity Bean’s Local Interface</a></li>
<li><a href="#entity-beans-local-home-interface">4.6.12. Entity Bean’s Local Home Interface</a></li>
<li><a href="#a1725">4.6.13. Entity Bean’s Primary Key Class</a></li>
<li><a href="#entity-beans-deployment-descriptor">4.6.14. Entity Bean’s Deployment Descriptor</a></li>
</ul>
</li>
<li><a href="#the-responsibilities-of-the-container-provider">4.7. The Responsibilities of the Container Provider</a>
<ul class="sectlevel3">
<li><a href="#generation-of-implementation-classes">4.7.1. Generation of Implementation Classes</a></li>
<li><a href="#enterprise-bean-class-2">4.7.2. Enterprise Bean Class</a></li>
<li><a href="#ejbfindmethod-methods">4.7.3. ejbFind&lt;METHOD&gt; Methods</a></li>
<li><a href="#ejbselectmethod-methods-2">4.7.4. ejbSelect&lt;METHOD&gt; Methods</a></li>
<li><a href="#entity-ejbhome-class">4.7.5. Entity EJBHome Class</a></li>
<li><a href="#entity-ejbobject-class">4.7.6. Entity EJBObject Class</a></li>
<li><a href="#entity-ejblocalhome-class">4.7.7. Entity EJBLocalHome Class</a></li>
<li><a href="#entity-ejblocalobject-class">4.7.8. Entity EJBLocalObject Class</a></li>
<li><a href="#handle-class">4.7.9. Handle Class</a></li>
<li><a href="#home-handle-class">4.7.10. Home Handle Class</a></li>
<li><a href="#metadata-class">4.7.11. Metadata Class</a></li>
<li><a href="#instances-re-entrance">4.7.12. Instance’s Re-entrance</a></li>
<li><a href="#transaction-scoping-security-exceptions">4.7.13. Transaction Scoping, Security, Exceptions</a></li>
<li><a href="#implementation-of-object-references">4.7.14. Implementation of Object References</a></li>
<li><a href="#entitycontext">4.7.15. EntityContext</a></li>
</ul>
</li>
<li><a href="#a1820">4.8. Primary Keys</a>
<ul class="sectlevel3">
<li><a href="#primary-key-that-maps-to-a-single-field-in-the-entity-bean-class">4.8.1. Primary Key That Maps to a Single Field in the Entity Bean Class</a></li>
<li><a href="#primary-key-that-maps-to-multiple-fields-in-the-entity-bean-class">4.8.2. Primary Key That Maps to Multiple Fields in the Entity Bean Class</a></li>
<li><a href="#a1833">4.8.3. Special Case: Unknown Primary Key Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a1840">5. Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a>
<ul class="sectlevel2">
<li><a href="#overview-4">5.1. Overview</a></li>
<li><a href="#enterprise-beans-ql-definition">5.2. Enterprise Beans QL Definition</a>
<ul class="sectlevel3">
<li><a href="#abstract-schema-types-and-query-domains">5.2.1. Abstract Schema Types and Query Domains</a></li>
<li><a href="#query-methods">5.2.2. Query Methods</a></li>
<li><a href="#naming">5.2.3. Naming</a></li>
<li><a href="#a1882">5.2.4. Examples</a></li>
<li><a href="#the-from-clause-and-navigational-declarations">5.2.5. The FROM Clause and Navigational Declarations</a>
<ul class="sectlevel4">
<li><a href="#identifiers">5.2.5.1. Identifiers</a></li>
<li><a href="#a1914">5.2.5.2. Identification Variables</a></li>
<li><a href="#range-variable-declarations">5.2.5.3. Range Variable Declarations</a></li>
<li><a href="#collection-member-declarations">5.2.5.4. Collection Member Declarations</a></li>
<li><a href="#example-2">5.2.5.5. Example</a></li>
<li><a href="#a1956">5.2.5.6. Path Expressions</a></li>
</ul>
</li>
<li><a href="#where-clause-and-conditional-expressions">5.2.6. WHERE Clause and Conditional Expressions</a>
<ul class="sectlevel4">
<li><a href="#literals">5.2.6.1. Literals</a></li>
<li><a href="#identification-variables">5.2.6.2. Identification Variables</a></li>
<li><a href="#path-expressions">5.2.6.3. Path Expressions</a></li>
<li><a href="#input-parameters">5.2.6.4. Input Parameters</a></li>
<li><a href="#conditional-expression-composition">5.2.6.5. Conditional Expression Composition</a></li>
<li><a href="#operators-and-operator-precedence">5.2.6.6. Operators and Operator Precedence</a></li>
<li><a href="#between-expressions">5.2.6.7. Between Expressions</a></li>
<li><a href="#in-expressions">5.2.6.8. In Expressions</a></li>
<li><a href="#like-expressions">5.2.6.9. Like Expressions</a></li>
<li><a href="#null-comparison-expressions">5.2.6.10. Null Comparison Expressions</a></li>
<li><a href="#empty-collection-comparison-expressions">5.2.6.11. Empty Collection Comparison Expressions</a></li>
<li><a href="#collection-member-expressions">5.2.6.12. Collection Member Expressions</a></li>
<li><a href="#functional-expressions">5.2.6.13. Functional Expressions</a></li>
</ul>
</li>
<li><a href="#select-clause">5.2.7. SELECT Clause</a>
<ul class="sectlevel4">
<li><a href="#null-values-in-the-query-result">5.2.7.1. Null Values in the Query Result</a></li>
<li><a href="#aggregate-functions-in-the-select-clause">5.2.7.2. Aggregate Functions in the SELECT Clause</a></li>
<li><a href="#examples">5.2.7.3. Examples</a></li>
</ul>
</li>
<li><a href="#order-by-clause">5.2.8. ORDER BY Clause</a></li>
<li><a href="#a2190">5.2.9. Return Value Types</a></li>
<li><a href="#a2207">5.2.10. Null Values</a></li>
<li><a href="#a2265">5.2.11. Equality and Comparison Semantics</a></li>
<li><a href="#restrictions">5.2.12. Restrictions</a></li>
</ul>
</li>
<li><a href="#examples-2">5.3. Examples</a>
<ul class="sectlevel3">
<li><a href="#simple-queries">5.3.1. Simple Queries</a></li>
<li><a href="#queries-with-relationships">5.3.2. Queries with Relationships</a></li>
<li><a href="#queries-using-input-parameters">5.3.3. Queries Using Input Parameters</a></li>
<li><a href="#queries-for-select-methods">5.3.4. Queries for Select Methods</a></li>
<li><a href="#enterprise-beans-ql-and-sql">5.3.5. Enterprise Beans QL and SQL</a></li>
</ul>
</li>
<li><a href="#enterprise-beans-ql-bnf">5.4. Enterprise Beans QL BNF</a></li>
</ul>
</li>
<li><a href="#a2456">6. Enterprise Beans 2.1 Entity Bean Component Contract for Bean-Managed Persistence</a>
<ul class="sectlevel2">
<li><a href="#overview-of-bean-managed-entity-persistence">6.1. Overview of Bean-Managed Entity Persistence</a>
<ul class="sectlevel3">
<li><a href="#entity-bean-providers-view-of-persistence">6.1.1. Entity Bean Provider’s View of Persistence</a></li>
<li><a href="#runtime-execution-model">6.1.2. Runtime Execution Model</a></li>
<li><a href="#instance-life-cycle-2">6.1.3. Instance Life Cycle</a></li>
<li><a href="#the-entity-bean-component-contract-2">6.1.4. The Entity Bean Component Contract</a>
<ul class="sectlevel4">
<li><a href="#entity-bean-instances-view">6.1.4.1. Entity Bean Instance’s View</a></li>
<li><a href="#a2553">6.1.4.2. Container’s View</a></li>
</ul>
</li>
<li><a href="#a2598">6.1.5. Read-only Entity Beans</a></li>
<li><a href="#the-entitycontext-interface-2">6.1.6. The EntityContext Interface</a></li>
<li><a href="#operations-allowed-in-the-methods-of-the-entity-bean-class-2">6.1.7. Operations Allowed in the Methods of the Entity Bean Class</a></li>
<li><a href="#caching-of-entity-state-and-the-ejbload-and-ejbstore-methods">6.1.8. Caching of Entity State and the ejbLoad and ejbStore Methods</a>
<ul class="sectlevel4">
<li><a href="#ejbload-and-ejbstore-with-the-notsupported-transaction-attribute">6.1.8.1. ejbLoad and ejbStore with the NotSupported Transaction Attribute</a></li>
</ul>
</li>
<li><a href="#a2729">6.1.9. Finder Method Return Type</a>
<ul class="sectlevel4">
<li><a href="#single-object-finder">6.1.9.1. Single-Object Finder</a></li>
<li><a href="#multi-object-finders">6.1.9.2. Multi-Object Finders</a></li>
</ul>
</li>
<li><a href="#timer-notifications-2">6.1.10. Timer Notifications</a></li>
<li><a href="#a2806">6.1.11. Standard Application Exceptions for Entities</a>
<ul class="sectlevel4">
<li><a href="#createexception-2">6.1.11.1. CreateException</a></li>
<li><a href="#duplicatekeyexception-2">6.1.11.2. DuplicateKeyException</a></li>
<li><a href="#finderexception-2">6.1.11.3. FinderException</a></li>
<li><a href="#objectnotfoundexception-2">6.1.11.4. ObjectNotFoundException</a></li>
<li><a href="#removeexception-2">6.1.11.5. RemoveException</a></li>
</ul>
</li>
<li><a href="#commit-options">6.1.12. Commit Options</a></li>
<li><a href="#concurrent-access-from-multiple-transactions-2">6.1.13. Concurrent Access from Multiple Transactions</a></li>
<li><a href="#a2872">6.1.14. Non-reentrant and Re-entrant Instances</a></li>
</ul>
</li>
<li><a href="#responsibilities-of-the-enterprise-bean-provider-2">6.2. Responsibilities of the Enterprise Bean Provider</a>
<ul class="sectlevel3">
<li><a href="#classes-and-interfaces-2">6.2.1. Classes and Interfaces</a></li>
<li><a href="#enterprise-bean-class-3">6.2.2. Enterprise Bean Class</a></li>
<li><a href="#ejbcreatemethod-methods-2">6.2.3. ejbCreate&lt;METHOD&gt; Methods</a></li>
<li><a href="#ejbpostcreatemethod-methods-2">6.2.4. ejbPostCreate&lt;METHOD&gt; Methods</a></li>
<li><a href="#ejbfind-methods">6.2.5. ejbFind Methods</a></li>
<li><a href="#ejbhomemethod-methods-2">6.2.6. ejbHome&lt;METHOD&gt; Methods</a></li>
<li><a href="#business-methods-2">6.2.7. Business Methods</a></li>
<li><a href="#entity-beans-remote-interface-3">6.2.8. Entity Bean’s Remote Interface</a></li>
<li><a href="#entity-beans-remote-home-interface-3">6.2.9. Entity Bean’s Remote Home Interface</a></li>
<li><a href="#entity-beans-local-interface-3">6.2.10. Entity Bean’s Local Interface</a></li>
<li><a href="#entity-beans-local-home-interface-2">6.2.11. Entity Bean’s Local Home Interface</a></li>
<li><a href="#a3011">6.2.12. Entity Bean’s Primary Key Class</a></li>
</ul>
</li>
<li><a href="#the-responsibilities-of-the-container-provider-2">6.3. The Responsibilities of the Container Provider</a>
<ul class="sectlevel3">
<li><a href="#generation-of-implementation-classes-2">6.3.1. Generation of Implementation Classes</a></li>
<li><a href="#entity-ejbhome-class-2">6.3.2. Entity EJBHome Class</a></li>
<li><a href="#entity-ejbobject-class-2">6.3.3. Entity EJBObject Class</a></li>
<li><a href="#entity-ejblocalhome-class-2">6.3.4. Entity EJBLocalHome Class</a></li>
<li><a href="#entity-ejblocalobject-class-2">6.3.5. Entity EJBLocalObject Class</a></li>
<li><a href="#handle-class-2">6.3.6. Handle Class</a></li>
<li><a href="#home-handle-class-2">6.3.7. Home Handle Class</a></li>
<li><a href="#metadata-class-2">6.3.8. Metadata Class</a></li>
<li><a href="#instances-re-entrance-2">6.3.9. Instance’s Re-entrance</a></li>
<li><a href="#transaction-scoping-security-exceptions-2">6.3.10. Transaction Scoping, Security, Exceptions</a></li>
<li><a href="#implementation-of-object-references-2">6.3.11. Implementation of Object References</a></li>
<li><a href="#entitycontext-2">6.3.12. EntityContext</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a3071">7. Enterprise Beans 1.1 Entity Bean Component Contract for Container-Managed Persistence</a>
<ul class="sectlevel2">
<li><a href="#enterprise-beans-1-1-entity-beans-with-container-managed-persistence">7.1. Enterprise Beans 1.1 Entity Beans with Container-Managed Persistence</a>
<ul class="sectlevel3">
<li><a href="#container-managed-fields-2">7.1.1. Container-Managed Fields</a></li>
<li><a href="#ejbcreate-ejbpostcreate">7.1.2. ejbCreate, ejbPostCreate</a></li>
<li><a href="#ejbremove">7.1.3. ejbRemove</a></li>
<li><a href="#ejbload">7.1.4. ejbLoad</a></li>
<li><a href="#ejbstore">7.1.5. ejbStore</a></li>
<li><a href="#finder-hethods">7.1.6. Finder Hethods</a></li>
<li><a href="#home-methods-3">7.1.7. Home Methods</a></li>
<li><a href="#create-methods-3">7.1.8. Create Methods</a></li>
<li><a href="#primary-key-type">7.1.9. Primary Key Type</a>
<ul class="sectlevel4">
<li><a href="#primary-key-that-maps-to-a-single-field-in-the-entity-bean-class-2">7.1.9.1. Primary Key that Maps to a Single Field in the Entity Bean Class</a></li>
<li><a href="#primary-key-that-maps-to-multiple-fields-in-the-entity-bean-class-2">7.1.9.2. Primary Key that Maps to Multiple Fields in the Entity Bean Class</a></li>
<li><a href="#special-case-unknown-primary-key-class">7.1.9.3. Special Case: Unknown Primary Key Class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#a3185">8. Support for Transactions</a>
<ul class="sectlevel2">
<li><a href="#overview-5">8.1. Overview</a></li>
<li><a href="#bean-providers-responsibilities">8.2. Bean Provider’s Responsibilities</a>
<ul class="sectlevel3">
<li><a href="#bean-managed-versus-container-managed-transaction-demarcation">8.2.1. Bean-Managed Versus Container-Managed Transaction Demarcation</a></li>
<li><a href="#isolation-levels">8.2.2. Isolation Levels</a></li>
<li><a href="#specification-of-the-transaction-attributes-for-a-beans-methods">8.2.3. Specification of the Transaction Attributes for a Bean’s Methods</a></li>
</ul>
</li>
<li><a href="#container-provider-responsibilities">8.3. Container Provider Responsibilities</a>
<ul class="sectlevel3">
<li><a href="#container-managed-transaction-demarcation-for-entity-beans">8.3.1. Container-Managed Transaction Demarcation for Entity Beans</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a3210">9. Exception Handling</a>
<ul class="sectlevel2">
<li><a href="#application-exceptions">9.1. Application Exceptions</a></li>
<li><a href="#bean-providers-responsibilities-2">9.2. Bean Provider’s Responsibilities</a>
<ul class="sectlevel3">
<li><a href="#application-exceptions-2">9.2.1. Application Exceptions</a></li>
<li><a href="#a3221">9.2.2. System Exceptions</a></li>
<li><a href="#jakarta-ejb-nosuchentityexception">9.2.3. jakarta.ejb.NoSuchEntityException</a></li>
</ul>
</li>
<li><a href="#a3227">9.3. Container Provider Responsibilities</a>
<ul class="sectlevel3">
<li><a href="#a3229">9.3.1. Exceptions from Method Invoked via Entity Bean’s Client View</a></li>
<li><a href="#a3232">9.3.2. Exceptions from Other Container-invoked Callbacks</a></li>
<li><a href="#jakarta-ejb-nosuchentityexception-2">9.3.3. jakarta.ejb.NoSuchEntityException</a></li>
<li><a href="#non-existing-entity-object">9.3.4. Non-existing Entity Object</a></li>
<li><a href="#support-for-deprecated-use-of-java-rmi-remoteexception">9.3.5. Support for Deprecated Use of java.rmi.RemoteException</a></li>
</ul>
</li>
<li><a href="#clients-view-of-exceptions">9.4. Client’s View of Exceptions</a></li>
</ul>
</li>
<li><a href="#a3258">10. Timer Service</a>
<ul class="sectlevel2">
<li><a href="#bean-providers-view-of-the-timer-service">10.1. Bean Provider’s View of the Timer Service</a>
<ul class="sectlevel3">
<li><a href="#calendar-based-time-expressions">10.1.1. Calendar-Based Time Expressions</a></li>
<li><a href="#non-persistent-timers">10.1.2. Non-persistent Timers</a></li>
<li><a href="#the-timerservice-interface">10.1.3. The TimerService Interface</a></li>
<li><a href="#timer-expiration-and-timeout-callback-method">10.1.4. Timer Expiration and Timeout Callback Method</a></li>
<li><a href="#entity-bean-removal">10.1.5. Entity Bean Removal</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a3273">11. Deployment Descriptor</a>
<ul class="sectlevel2">
<li><a href="#bean-providers-responsibilities-3">11.1. Bean Provider’s Responsibilities</a></li>
<li><a href="#application-assemblers-responsibility">11.2. Application Assembler’s Responsibility</a></li>
</ul>
</li>
<li><a href="#packaging-restrictions">12. Packaging Restrictions</a>
<ul class="sectlevel2">
<li><a href="#restrictions-2">12.1. Restrictions</a></li>
</ul>
</li>
<li><a href="#a3321">Related Documents</a></li>
<li><a href="#revision-history">13. Revision History</a>
<ul class="sectlevel2">
<li><a href="#early-draft">13.1. Early Draft</a></li>
<li><a href="#early-draft-2">13.2. Early Draft 2</a></li>
<li><a href="#public-draft">13.3. Public Draft</a></li>
<li><a href="#proposed-final-draft">13.4. Proposed Final Draft</a></li>
<li><a href="#final-release-candidate">13.5. Final Release Candidate</a></li>
<li><a href="#final-release">13.6. Final Release</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta&#174; Enterprise Beans, Optional Features

Version: 4.0

Status: Final

Release: November 05, 2020</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright"><a class="anchor" href="#copyright"></a>Copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2018, 2020 Eclipse Foundation.
<a href="https://www.eclipse.org/legal/efsl.php" class="bare">https://www.eclipse.org/legal/efsl.php</a></p>
</div>
<div class="sect2">
<h3 id="eclipse-foundation-specification-license"><a class="anchor" href="#eclipse-foundation-specification-license"></a>Eclipse Foundation Specification License</h3>
<div class="paragraph">
<p>By using and/or copying this document, or the Eclipse Foundation
document from which this statement is linked, you (the licensee) agree
that you have read, understood, and will comply with the following
terms and conditions:</p>
</div>
<div class="paragraph">
<p>Permission to copy, and distribute the contents of this document, or
the Eclipse Foundation document from which this statement is linked, in
any medium for any purpose and without fee or royalty is hereby
granted, provided that you include the following on ALL copies of the
document, or portions thereof, that you use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link or URL to the original Eclipse Foundation document.</p>
</li>
<li>
<p>All existing copyright notices, or if one does not exist, a notice
(hypertext is preferred, but a textual representation is permitted)
of the form: "Copyright &#169; [$date-of-document]
Eclipse Foundation, Inc. &lt;&lt;url to this license&gt;&gt;"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inclusion of the full text of this NOTICE must be provided. We
request that authorship attribution be provided in any software,
documents, or other items or products that you create pursuant to the
implementation of the contents of this document, or any portion
thereof.</p>
</div>
<div class="paragraph">
<p>No right to create modifications or derivatives of Eclipse Foundation
documents is granted pursuant to this license, except anyone may
prepare and distribute derivative works and portions of this document
in software that implements the specification, in supporting materials
accompanying such software, and in documentation of such software,
PROVIDED that all such works include the notice below. HOWEVER, the
publication of derivative works of this document for use as a technical
specification is expressly prohibited.</p>
</div>
<div class="paragraph">
<p>The notice is:</p>
</div>
<div class="paragraph">
<p>"Copyright &#169; [$date-of-document] Eclipse Foundation. This software or
document includes material copied from or derived from [title and URI
of the Eclipse Foundation specification document]."</p>
</div>
<div class="sect3">
<h4 id="disclaimers"><a class="anchor" href="#disclaimers"></a>Disclaimers</h4>
<div class="paragraph">
<p>THIS DOCUMENT IS PROVIDED &quot;AS IS,&quot; AND THE COPYRIGHT
HOLDERS AND THE ECLIPSE FOUNDATION MAKE NO REPRESENTATIONS OR
WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE DOCUMENT ARE
SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS
WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR
OTHER RIGHTS.</p>
</div>
<div class="paragraph">
<p>THE COPYRIGHT HOLDERS AND THE ECLIPSE FOUNDATION WILL NOT BE LIABLE
FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT
OF ANY USE OF THE DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE
CONTENTS THEREOF.</p>
</div>
<div class="paragraph">
<p>The name and trademarks of the copyright holders or the Eclipse
Foundation may NOT be used in advertising or publicity pertaining to
this document or its contents without specific, written prior
permission. Title to copyright in this document will at all times
remain with copyright holders.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document describes features for which support has been made optional as of the 3.2 release of the Enterprise Beans specification:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Enterprise Beans 2.1 Entity Bean Component Contract for Container-Managed Persistence</em></p>
</li>
<li>
<p><em>Enterprise Beans 2.1 Entity Bean Component Contract for Bean-Managed Persistence</em></p>
</li>
<li>
<p><em>Enterprise Beans 1.1 Entity Bean Component Contract for Container-Managed Persistence</em></p>
</li>
<li>
<p><em>Client View of an Entity Bean</em></p>
</li>
<li>
<p><em>Enterprise Beans QL: Query Language for Container-Managed Persistence Query Methods</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="acknowledgements"><a class="anchor" href="#acknowledgements"></a>1.1. Acknowledgements</h3>
<div class="paragraph">
<p>The Enterprise Beans 3.2 specification work was conducted as part of JSR-345 under the Java Community Process Program.
This specification is the result of the collaborative work of the members of the EJB 3.2 Expert Group: Caucho Technology, Inc: Reza Rahman; IBM: Jeremy Bauer; Oracle: Marina Vatkina, Linda DeMichiel; OW2: Florent Benoit; Pramati Technologies: Ravikiran Noothi; RedHat: Pete Muir, Carlo de Wolf; TmaxSoft, Inc.: Miju Byon; individual members: Adam Bien; David Blevins; Antonio Goncalves; Stefan Heldt; Richard Hightower, Jean-Louis Monteiro.</p>
</div>
</div>
<div class="sect2">
<h3 id="organization-of-the-specification-documents"><a class="anchor" href="#organization-of-the-specification-documents"></a>1.2. Organization of the Specification Documents</h3>
<div class="paragraph">
<p>This specification is organized into the following documents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enterprise Beans Core Contracts and Requirements</p>
</li>
<li>
<p>Enterprise Beans Optional Features</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Enterprise Beans Core Contracts and Requirements document defines the contracts and requirements for the use and implementation of Enterprise Beans.
These contracts include those for the Enterprise Beans 3.2 API, as well as for the earlier Enterprise Beans API that is required to be supported in this release.</p>
</div>
<div class="paragraph">
<p>This Enterprise Beans Optional Features document defines the contracts and requirements for the use and implementation of features support for which has been made optional for the Enterprise Beans.
These contracts are separated from the core contracts requirements in the Enterprise Beans 3.1 specification <a href="#a3323">[1]</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="document-conventions"><a class="anchor" href="#document-conventions"></a>1.3. Document Conventions</h3>
<div class="paragraph">
<p>The regular font is used for information that is prescriptive by the Enterprise Beans specification.</p>
</div>
<div class="paragraph">
<p><em>The italic font is used for paragraphs that contain descriptive information, such as notes describing typical use, or notes clarifying the text with prescriptive specification.</em></p>
</div>
<div class="paragraph">
<p><code>The monospace font is used for code examples.</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document describes features for which support has been made optional as of the 3.2 release of the Enterprise Beans specification:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Enterprise Beans 2.1 Entity Bean Component Contract for Container-Managed Persistence</em></p>
</li>
<li>
<p><em>Enterprise Beans 2.1 Entity Bean Component Contract for Bean-Managed Persistence</em></p>
</li>
<li>
<p><em>Enterprise Beans 1.1 Entity Bean Component Contract for Container-Managed Persistence</em></p>
</li>
<li>
<p><em>Client View of an Entity Bean</em></p>
</li>
<li>
<p><em>Enterprise Beans QL: Query Language for Container-Managed Persistence Query Methods</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If an implementation supports such features, it must do so in accordance with the requirements of this specification.
In addition, the following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If any of the following features is supported, all features in the list must be supported:</p>
<div class="ulist">
<ul>
<li>
<p>Enterprise Beans 2.x entity beans with container-managed persistence</p>
</li>
<li>
<p>Enterprise Beans 1.1 entity beans with container-managed persistence</p>
</li>
<li>
<p>Enterprise Beans 2.x entity beans with bean-managed persistence</p>
</li>
<li>
<p>Enterprise Beans QL</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the general description of the Enterprise Beans goals and requirements in the Enterprise Beans Core Contracts and Requirements <a href="#a3339">[2]</a> document.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a41"><a class="anchor" href="#a41"></a>3. Client View of an Entity Bean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the client view of an entity bean. It is actually a contract fulfilled by the container in which the entity bean is deployed.
Only the business methods are supplied by the enterprise bean itself.</p>
</div>
<div class="paragraph">
<p>Although the client view of the deployed entity beans is provided by classes implemented by the container, the container itself is transparent to the client.</p>
</div>
<div class="sect2">
<h3 id="overview-2"><a class="anchor" href="#overview-2"></a>3.1. Overview</h3>
<div class="paragraph">
<p>For a client, an entity bean is a component that represents an object-oriented view of some entities stored in a persistent storage, such as a database, or entities that are implemented by an existing enterprise application.</p>
</div>
<div class="paragraph">
<p>The client of an entity bean may be a local client or the client may be a remote client.</p>
</div>
<div class="paragraph">
<p>This section provides an overview of the entity bean client view that is independent of whether the client is a remote client or a local client.
The differences between remote clients and local clients are discussed in the following sections.</p>
</div>
<div class="paragraph">
<p>From its creation until its destruction, an entity object lives in a container.
Transparently to the client, the container provides security, concurrency, transactions, persistence, and other services for the entity objects that live in the container.
The container is transparent to the client—there is no API that a client can use to manipulate the container.</p>
</div>
<div class="paragraph">
<p>Multiple clients can access an entity object concurrently. The container in which the entity bean is deployed properly synchronizes access to the entity object’s state using transactions.</p>
</div>
<div class="paragraph">
<p>Each entity object has an identity which, in general, survives a crash and restart of the container in which the entity object has been created.
The object identity is implemented by the container with the cooperation of the enterprise bean class.</p>
</div>
<div class="paragraph">
<p>Multiple enterprise beans can be deployed in a container.
For each entity bean deployed in a container, the container provides a class that implements a home interface for the entity bean.
This interface allows the client to create, find, and remove entity objects within the enterprise bean’s home as well as to execute home business methods, which are not specific to a particular entity bean object.
A client can obtain the entity bean’s home interface through dependency injection, or the client can look up the entity bean’s home interface through JNDI.
It is the responsibility of the container to make the entity bean’s home interface available in the JNDI name space.</p>
</div>
<div class="paragraph">
<p>A client view of an entity bean is independent of the implementation of the entity bean and its container.
This ensures that a client application is portable across all container implementations in which the entity bean might be deployed.</p>
</div>
</div>
<div class="sect2">
<h3 id="remote-clients"><a class="anchor" href="#remote-clients"></a>3.2. Remote Clients</h3>
<div class="paragraph">
<p>A remote client accesses an entity bean through the entity bean’s remote and remote home interfaces.
The remote and remote home interfaces of the entity bean provide the remote client view.</p>
</div>
<div class="paragraph">
<p>The remote client view of an entity bean is location independent.
A client running in the same JVM as an entity bean instance uses the same API to access the entity bean as a client running in a different JVM on the same or different machine.</p>
</div>
<div class="paragraph">
<p>The container provides classes that implement the entity bean’s remote and remote home interfaces.
The objects that implement the remote home and remote objects are remote Java objects, and are accessible from a client through the standard Java™ APIs for remote object invocation <a href="#a3327">[3]</a>.</p>
</div>
<div class="paragraph">
<p>A remote client of an entity object can be another enterprise bean deployed in the same or different container or can be an arbitrary Java program, such as an application, applet, or servlet.
The remote client view of an entity bean can also be mapped to non-Java client environments, such as CORBA clients not written in the Java programming language.</p>
</div>
</div>
<div class="sect2">
<h3 id="local-clients"><a class="anchor" href="#local-clients"></a>3.3. Local Clients</h3>
<div class="paragraph">
<p>Entity beans may also have local clients.
A local client is a client that is collocated with the entity bean and which may be tightly coupled to the bean.</p>
</div>
<div class="paragraph">
<p>Unlike the remote client view, the local client view of an entity bean is not location independent.
The local client view requires the collocation in the same JVM of both the local client and the entity bean that provides the local client view. The local client view therefore does not provide the location transparency provided by the remote client view.</p>
</div>
<div class="paragraph">
<p>A local client accesses an entity bean through the entity bean’s local home and local component interfaces.
The container provides classes that implement the entity bean’s local home and local component interfaces. The objects that implement the local home and local component interfaces are local Java objects.</p>
</div>
<div class="paragraph">
<p>The arguments of the methods of the local component interface and local home interface are passed by reference.
<sup class="footnote" id="_footnote_a3365">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
Such entity beans and their clients must be coded to assume that the state of any Java object that is passed as an argument or result is potentially shared by caller and callee.</p>
</div>
<div class="paragraph">
<p>A local client of an entity bean may be a session bean, a message-driven bean, another entity bean, or a web-tier component.</p>
</div>
<div class="paragraph">
<p>The choice between the use of a local or remote programming model is a design decision that the Bean Provider
makes when developing the entity bean application.
In general, however, entity beans are intended to be used with local clients.
While it is possible to provide both a client view and a local client view for an entity bean with container-managed persistence, it is more likely that the entity bean will be designed with the local view in mind.</p>
</div>
<div class="paragraph">
<p>Entity beans that have container-managed relationships with other entity beans, as described in <a href="#a384">Enterprise Beans 2.1 Entity Bean Component Contract for Container-Managed Persistence</a>, must be accessed in the same local scope as those related beans, and therefore typically provide a local client view.
In order to be the target of a container-managed relationship, an entity bean with container-managed persistence must provide a local component interface.</p>
</div>
</div>
<div class="sect2">
<h3 id="choosing-between-a-local-or-remote-client-view"><a class="anchor" href="#choosing-between-a-local-or-remote-client-view"></a>3.4. Choosing Between a Local or Remote Client View</h3>
<div class="paragraph">
<p>The following considerations should be taken into account in determining whether a local or remote access should be used for an entity bean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the Enterprise Beans 2.1 and earlier remote home and remote component interfaces are used, the narrowing of remote types requires the use of <code>javax.rmi.PortableRemoteObject.narrow</code> rather than Java language casts.</p>
</li>
<li>
<p>Remote calls may involve error cases due to communication, resource usage on other servers, etc., which are not expected in local calls.
When the Enterprise Beans 2.1 and earlier remote home and remote component interfaces are used, the client has to explicitly program handlers for handling the <code>java.rmi.RemoteException</code></p>
</li>
<li>
<p>Methods of a session bean’s remote business interface must not expose entity beans local interface types, or the managed collection classes that are used for Enterprise Beans 2.1 entity beans with container-managed persistence as arguments or results.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See Enterprise Beans Core Contracts and Requirements
document <a href="#a3339">[2]</a> Subsection "Choosing Between a Local or Remote Client View" for the more considerations.</p>
</div>
</div>
<div class="sect2">
<h3 id="enterprise-beans-container"><a class="anchor" href="#enterprise-beans-container"></a>3.5. Enterprise Beans Container</h3>
<div class="paragraph">
<p>An Enterprise Beans container (container for short) is a system that functions as a runtime container for enterprise beans.</p>
</div>
<div class="paragraph">
<p>Multiple enterprise beans can be deployed in a single container.
For each entity bean deployed in a container, the container provides a home interface that allows the client to create, find, and remove entity objects that belong to the entity bean.
The home interface may also provide home business methods, which are not specific to a particular entity bean object.
The container makes the entity bean’s home interface (defined by the Bean Provider and implemented by the Container Provider) available in the JNDI name space for clients.</p>
</div>
<div class="paragraph">
<p>An Enterprise Beans server may host one or multiple Enterprise Beans containers.
The containers are transparent to the client: there is no client-level API to manipulate the container.</p>
</div>
<div class="sect3">
<h4 id="locating-an-entity-beans-home-interface"><a class="anchor" href="#locating-an-entity-beans-home-interface"></a>3.5.1. Locating an Entity Bean’s Home Interface</h4>
<div class="paragraph">
<p>A client obtains an entity bean’s home interface through dependency injection, or the client locates an entity bean’s home interface using JNDI.
A client’s JNDI name space may be configured to include the home interfaces of enterprise beans deployed in multiple Enterprise Beans containers located on multiple machines on a network.
The actual location of an Enterprise Beans container is, in general, transparent to the client.</p>
</div>
<div class="paragraph">
<p>For example, the local home interface for the
<code>Account</code> entity bean can be located using the following code segment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Context</span> initialContext = <span class="keyword">new</span> <span class="predefined-type">InitialContext</span>();
AccountHome accountHome = (AccountHome)
              initialContext.lookup(<span class="string"><span class="delimiter">&quot;</span><span class="content">java:comp/env/ejb/accounts</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If dependency injection were used, the home interface could be obtained as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@EJB</span>
AccountHome accountHome;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="what-a-container-provides"><a class="anchor" href="#what-a-container-provides"></a>3.5.2. What a Container Provides</h4>
<div class="paragraph">
<p>The following diagram illustrates the view that a container provides to the client of the entity beans deployed in the container.
Note that a client may be a local client of some entity beans and a remote client of others.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNTQ2IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxyZWN0IHdpZHRoPSIyMjUiIGhlaWdodD0iNTI1IiB4PSIzNjQiIHk9IjEwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjI4LjEyNSIgcnk9IjI4LjEyNSIvPgogIDxyZWN0IHdpZHRoPSIxNzUiIGhlaWdodD0iMTg4IiB4PSIzNzgiIHk9IjI2MyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIyMS44NzUiIHJ5PSIyMS44NzUiLz4KICA8cmVjdCB3aWR0aD0iMTc1IiBoZWlnaHQ9IjE4OCIgeD0iMzc4IiB5PSI0OSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIyMS44NzUiIHJ5PSIyMS44NzUiLz4KICA8dGV4dCB4PSI0MDQiIHk9IjM4Ij4KICAgIDx0c3BhbiB4PSI0NDAuNjk1IiB5PSIzOCI+Y29udGFpbmVyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMjgiIHk9IjI1MSI+CiAgICA8dHNwYW4geD0iMjcuMDQ3IiB5PSIyNTEiPmNsaWVudDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNzQuNDcyIDIzMi43NjRsMjQzLjU4NC0xMjEuNzkyIDQuNDcyLTIuMjM2TTMxNSAxMDZsNy41MjggMi43MzZMMzIwIDExNiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzY3LjgzMyA2OWg4My4zMzRDNDYxLjU4MyA2OSA0NzIgNzcuNzUgNDcyIDg2LjVTNDYxLjU4MyAxMDQgNDUxLjE2NyAxMDRoLTgzLjMzNEMzNTcuNDE3IDEwNCAzNDcgOTUuMjUgMzQ3IDg2LjVTMzU3LjQxNyA2OSAzNjcuODMzIDY5Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNTcuODMzIDc5aDgzLjMzNEM0NTEuNTgzIDc5IDQ2MiA4Ny43NSA0NjIgOTYuNVM0NTEuNTgzIDExNCA0NDEuMTY3IDExNGgtODMuMzM0QzM0Ny40MTcgMTE0IDMzNyAxMDUuMjUgMzM3IDk2LjVTMzQ3LjQxNyA3OSAzNTcuODMzIDc5Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNDcuODMzIDg5aDgzLjMzNEM0NDEuNTgzIDg5IDQ1MiA5Ny43NSA0NTIgMTA2LjVTNDQxLjU4MyAxMjQgNDMxLjE2NyAxMjRoLTgzLjMzNEMzMzcuNDE3IDEyNCAzMjcgMTE1LjI1IDMyNyAxMDYuNVMzMzcuNDE3IDg5IDM0Ny44MzMgODkiLz4KICA8dGV4dCB4PSIzMzUiIHk9IjExMiI+CiAgICA8dHNwYW4geD0iMzUxLjYzMyIgeT0iMTEyIj5FSkJPYmplY3RzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03NC44MDIgMjQzLjYwOGwyNDIuNTkzLTcwLjMyNCA0LjgwMy0xLjM5Mk0zMTUgMTY4bDcuMTk4IDMuODkyTDMxOCAxNzkiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM0Ny44MzMgMTUzaDgzLjMzNGMxMC40MTYgMCAyMC44MzMgOC43NSAyMC44MzMgMTcuNVM0NDEuNTgzIDE4OCA0MzEuMTY3IDE4OGgtODMuMzM0QzMzNy40MTcgMTg4IDMyNyAxNzkuMjUgMzI3IDE3MC41czEwLjQxNy0xNy41IDIwLjgzMy0xNy41Ii8+CiAgPHRleHQgeD0iMzM1IiB5PSIxNzYiPgogICAgPHRzcGFuIHg9IjM1Ni41NjMiIHk9IjE3NiI+RUpCSG9tZTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjQwNCIgeT0iMjE3Ij4KICAgIDx0c3BhbiB4PSI0MDQuNjgiIHk9IjIxNyI+ZW50aXR5IGJlYW4gMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNzQuODAyIDI0Ni4zOTJsMjQyLjU5MyA3MC4zMjQgNC44MDMgMS4zOTJNMzE4IDMxMWw0LjE5OCA3LjEwOEwzMTUgMzIyIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNjcuODMzIDI4M2g4My4zMzRjMTAuNDE2IDAgMjAuODMzIDguNzUgMjAuODMzIDE3LjVTNDYxLjU4MyAzMTggNDUxLjE2NyAzMThoLTgzLjMzNEMzNTcuNDE3IDMxOCAzNDcgMzA5LjI1IDM0NyAzMDAuNXMxMC40MTctMTcuNSAyMC44MzMtMTcuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzU3LjgzMyAyOTJoODMuMzM0YzEwLjQxNiAwIDIwLjgzMyA4Ljc1IDIwLjgzMyAxNy41UzQ1MS41ODMgMzI3IDQ0MS4xNjcgMzI3aC04My4zMzRDMzQ3LjQxNyAzMjcgMzM3IDMxOC4yNSAzMzcgMzA5LjVzMTAuNDE3LTE3LjUgMjAuODMzLTE3LjUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM0Ny44MzMgMzAyaDgzLjMzNGMxMC40MTYgMCAyMC44MzMgOC43NSAyMC44MzMgMTcuNVM0NDEuNTgzIDMzNyA0MzEuMTY3IDMzN2gtODMuMzM0QzMzNy40MTcgMzM3IDMyNyAzMjguMjUgMzI3IDMxOS41czEwLjQxNy0xNy41IDIwLjgzMy0xNy41Ii8+CiAgPHRleHQgeD0iMzM1IiB5PSIzMjUiPgogICAgPHRzcGFuIHg9IjMzMy40MjIiIHk9IjMyNSI+RUpCTG9jYWxPYmplY3RzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03NC40NjUgMjU3LjI1TDMxOC4wNyAzODBsNC40NjUgMi4yNU0zMjAgMzc1bDIuNTM1IDcuMjVMMzE1IDM4NSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzQ3LjgzMyAzNjdoODMuMzM0YzEwLjQxNiAwIDIwLjgzMyA4Ljc1IDIwLjgzMyAxNy41UzQ0MS41ODMgNDAyIDQzMS4xNjcgNDAyaC04My4zMzRDMzM3LjQxNyA0MDIgMzI3IDM5My4yNSAzMjcgMzg0LjVzMTAuNDE3LTE3LjUgMjAuODMzLTE3LjUiLz4KICA8dGV4dCB4PSIzMzUiIHk9IjM5MCI+CiAgICA8dHNwYW4geD0iMzM4LjM1MiIgeT0iMzkwIj5FSkJMb2NhbEhvbWU8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSI0MDQiIHk9IjQzMCI+CiAgICA8dHNwYW4geD0iNDA0LjY4IiB5PSI0MzAiPmVudGl0eSBiZWFuIDI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIzOTkiIHk9IjQ5MyI+CiAgICA8dHNwYW4geD0iNDAwLjcxOSIgeT0iNDkzIj5vdGhlciBlbnRlcnByaXNlIGJlYW5zPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 6">
</div>
<div class="title">Figure 1. Client View of Entity Beans Deployed in a Container</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="entity-beans-remote-home-interface"><a class="anchor" href="#entity-beans-remote-home-interface"></a>3.6. Entity Bean’s Remote Home Interface</h3>
<div class="paragraph">
<p>This section is specific to entity beans that provide a remote client view.
Local home interfaces are described in <a href="#a179">Entity Bean’s Local Home Interface</a>.</p>
</div>
<div class="paragraph">
<p>The container provides the implementation of the remote home interface for each entity bean deployed in the container that defines a remote home interface.
An object that implements an entity bean’s remote home interface is called an <strong>EJBHome</strong> object.</p>
</div>
<div class="paragraph">
<p>The entity bean’s remote home interface allows a client to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create new entity objects within the home.</p>
</li>
<li>
<p>Find existing entity objects within the home.</p>
</li>
<li>
<p>Remove an entity object from the home.</p>
</li>
<li>
<p>Execute a home business method.</p>
</li>
<li>
<p>Get the <code>jakarta.ejb.EJBMetaData</code> interface for the entity bean.
The <code>jakarta.ejb.EJBMetaData</code> interface is intended to allow application assembly tools to discover the metadata information about the entity bean.
The metadata information allows loose client/server binding and scripting.</p>
</li>
<li>
<p>Obtain a handle for the home interface.
The home handle can be serialized and written to stable storage.
Later, possibly in a different JVM, the handle can be deserialized from stable storage and used to obtain a reference to the home interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An entity bean’s remote home interface must extend the <code>jakarta.ejb.EJBHome</code> interface and follow the standard rules for Java programming language remote interfaces.</p>
</div>
<div class="sect3">
<h4 id="create-methods"><a class="anchor" href="#create-methods"></a>3.6.1. Create Methods</h4>
<div class="paragraph">
<p>An entity bean’s remote home interface can define zero or more <code>create&lt;METHOD&gt;</code> methods, one for each way to create an entity object.
The arguments of the <code>create</code> methods are typically used to initialize the state of the created entity object.
The name of each <code>create</code> method starts with the prefix &#8220;<code>create</code>&#8221;.</p>
</div>
<div class="paragraph">
<p>The return type of a <code>create&lt;METHOD&gt;</code> method on the remote home interface is the entity bean’s remote interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of every <code>create&lt;METHOD&gt;</code> method on the remote home interface includes the <code>java.rmi.RemoteException</code> and the <code>jakarta.ejb.CreateException</code>.
It may include additional application-level exceptions.</p>
</div>
<div class="paragraph">
<p>The following home interface illustrates three possible create methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">AccountHome</span> <span class="directive">extends</span> jakarta.ejb.EJBHome {
    <span class="directive">public</span> Account create(<span class="predefined-type">String</span> firstName, <span class="predefined-type">String</span> lastName,
        <span class="type">double</span> initialBalance)
         <span class="directive">throws</span> <span class="exception">RemoteException</span>, CreateException;
    <span class="directive">public</span> Account create(<span class="predefined-type">String</span> accountNumber,
        <span class="type">double</span> initialBalance)
         <span class="directive">throws</span> <span class="exception">RemoteException</span>, CreateException,
             LowInitialBalanceException;
    <span class="directive">public</span> Account createLargeAccount(<span class="predefined-type">String</span> firstname,
        <span class="predefined-type">String</span> lastname, <span class="type">double</span> initialBalance)
         <span class="directive">throws</span> <span class="exception">RemoteException</span>, CreateException;
     ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example illustrates how a client creates a new entity object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AccountHome accountHome = ...;
Account account = accountHome.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Smith</span><span class="delimiter">&quot;</span></span>, <span class="float">500.00</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="finder-methods"><a class="anchor" href="#finder-methods"></a>3.6.2. Finder Methods</h4>
<div class="paragraph">
<p>An entity bean’s remote home interface defines one or more finder methods
<sup class="footnote" id="_footnote_a3366">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>
, one for each way to find an entity object or collection of entity objects within the home.
The name of each finder method starts with the prefix &#8220;<code>find</code>&#8221;, such as <code>findLargeAccounts</code>.
The arguments of a finder method are used by the entity bean implementation to locate the requested entity objects.
The return type of a finder method on the remote home interface must be the entity bean’s remote interface, or a type representing a collection of objects that implement the entity bean’s remote interface (see <a href="#a1446">Finder Methods</a> and <a href="#a2729">Finder Method Return Type</a>).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of every finder method on the remote home interface includes the <code>java.rmi.RemoteException</code> and the <code>jakarta.ejb.FinderException</code> exceptions.</p>
</div>
<div class="paragraph">
<p>The remote home interface includes the <code>findByPrimaryKey(primaryKey)</code> method, which allows a client to locate an entity object using a primary key.
The name of the method is always <code>findByPrimaryKey</code>; it has a single argument that is the same type as the entity bean’s primary key type, and its return type is the entity bean’s remote interface.
There is a unique <code>findByPrimaryKey(primaryKey)</code> method for an entity bean on its remote home interface; this method must not be overloaded.
The implementation of the <code>findByPrimaryKey(primaryKey)</code> method must ensure that the entity object exists.</p>
</div>
<div class="paragraph">
<p>The following example shows the <code>findByPrimaryKey</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">AccountHome</span> <span class="directive">extends</span> jakarta.ejb.EJBHome {
     ...
    public Account findByPrimaryKey(<span class="predefined-type">String</span> AccountNumber)
        <span class="directive">throws</span> <span class="exception">RemoteException</span>, FinderException;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example illustrates how a client uses the <code>findByPrimaryKey</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AccountHome = ...;
Account account = accountHome.findByPrimaryKey(<span class="string"><span class="delimiter">&quot;</span><span class="content">100-3450-3333</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="remove-methods"><a class="anchor" href="#remove-methods"></a>3.6.3. Remove Methods</h4>
<div class="paragraph">
<p>The <code>jakarta.ejb.EJBHome</code> interface defines several methods that allow the client to remove an entity object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">EJBHome</span> <span class="directive">extends</span> <span class="predefined-type">Remote</span> {
    <span class="type">void</span> remove(Handle handle) <span class="directive">throws</span> <span class="exception">RemoteException</span>,
        RemoveException;
    <span class="type">void</span> remove(<span class="predefined-type">Object</span> primaryKey) <span class="directive">throws</span> <span class="exception">RemoteException</span>,
        RemoveException;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After an entity object has been removed, subsequent attempts to access the entity object by a remote client result in the <code>java.rmi.NoSuchObjectException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="home-methods"><a class="anchor" href="#home-methods"></a>3.6.4. Home Methods</h4>
<div class="paragraph">
<p>An entity bean’s remote home interface may define one or more
home methods.
Home methods are methods that the Bean Provider supplies for business logic that is not specific to an entity bean instance.</p>
</div>
<div class="paragraph">
<p>Home methods on the remote home interface can have arbitrary method names, but they must not start with &#8220;<code>create</code>&#8221;, &#8220;<code>find</code>&#8221;, or &#8220;<code>remove</code>&#8221;.
The arguments of a home method are used by the entity bean implementation in computations that do not depend on a specific entity bean instance.
The method arguments and return value types of a home method on the remote home interface must be legal types for RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of every home method on the remote home interface includes the <code>java.rmi.RemoteException</code>.
It may also include additional application-level exceptions.</p>
</div>
<div class="paragraph">
<p>The following example shows two home methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">EmployeeHome</span> <span class="directive">extends</span> jakarta.ejb.EJBHome {
    ...
    <span class="comment">// this method returns a living index depending on</span>
    <span class="comment">// the state and the base salary of an employee:</span>
    <span class="comment">// the method is not specific to an instance</span>
    public <span class="type">float</span> livingIndex(<span class="predefined-type">String</span> state, <span class="type">float</span> salary)
        <span class="directive">throws</span> <span class="exception">RemoteException</span>;

    <span class="comment">// this method adds a bonus to all of the employees</span>
    <span class="comment">// based on a company profit-sharing index</span>
    <span class="directive">public</span> <span class="type">void</span> addBonus(<span class="type">float</span> company_share_index)
        <span class="directive">throws</span> <span class="exception">RemoteException</span>, ShareIndexOutOfRangeException;
    ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a179"><a class="anchor" href="#a179"></a>3.7. Entity Bean’s Local Home Interface</h3>
<div class="paragraph">
<p>The container provides the implementation of the local home interface for each entity bean deployed in the container that defines a local home interface.
An object that implements an entity bean’s local home interface is called an <strong>EJBLocalHome</strong> object.</p>
</div>
<div class="paragraph">
<p>The entity bean’s local home interface allows a local client to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create new entity objects within the home.</p>
</li>
<li>
<p>Find existing entity objects within the home.</p>
</li>
<li>
<p>Remove an entity object from the home.</p>
</li>
<li>
<p>Execute a home business method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An entity bean’s local home interface must extend the <code>jakarta.ejb.EJBLocalHome</code> interface.</p>
</div>
<div class="sect3">
<h4 id="create-methods-2"><a class="anchor" href="#create-methods-2"></a>3.7.1. Create Methods</h4>
<div class="paragraph">
<p>An entity bean’s local home interface can define zero or more <code>create&lt;METHOD&gt;</code> methods, one for each way to create an entity object.
The arguments of the <code>create</code> methods are typically used to initialize the state of the created entity object.
The name of each create method starts with the prefix &#8220;<code>create</code>&#8221;.</p>
</div>
<div class="paragraph">
<p>The return type of a <code>create&lt;METHOD&gt;</code> method on the local home interface is the entity bean’s local interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of every <code>create&lt;METHOD&gt;</code> method on the local home interface includes the <code>jakarta.ejb.CreateException</code>.
It may include additional application-level exceptions.
It must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The following local home interface illustrates three possible create methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">AccountHome</span> <span class="directive">extends</span> jakarta.ejb.EJBLocalHome {
    <span class="directive">public</span> Account create(<span class="predefined-type">String</span> firstName, <span class="predefined-type">String</span> lastName,
        <span class="type">double</span> initialBalance)
         <span class="directive">throws</span> CreateException;
    <span class="directive">public</span> Account create(<span class="predefined-type">String</span> accountNumber,
        <span class="type">double</span> initialBalance)
         <span class="directive">throws</span> CreateException, LowInitialBalanceException;
    <span class="directive">public</span> Account createLargeAccount(<span class="predefined-type">String</span> firstname,
        <span class="predefined-type">String</span> lastname, <span class="type">double</span> initialBalance)
         <span class="directive">throws</span> CreateException;
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example illustrates how a client creates a new entity object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AccountHome accountHome = ...;
Account account = accountHome.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Smith</span><span class="delimiter">&quot;</span></span>, <span class="float">500.00</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="finder-methods-2"><a class="anchor" href="#finder-methods-2"></a>3.7.2. Finder Methods</h4>
<div class="paragraph">
<p>An entity bean’s local home interface defines one or more finder methods
<sup class="footnote" id="_footnote_a3367">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>
, one for each way to find an entity object or collection of entity objects within the home.
The name of each finder method starts with the prefix &#8220;<code>find</code>&#8221;, such as <code>findLargeAccounts</code>.
The arguments of a finder method are used by the entity bean
implementation to locate the requested entity objects.
The return type of a finder method on the local home interface must be the entity bean’s local interface, or a type representing a collection of objects that implement the entity bean’s local interface (see <a href="#a1446">Finder Methods</a> and <a href="#a2729">Finder Method Return Type</a>).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of every finder method on the local home interface includes the <code>jakarta.ejb.FinderException</code>.
The <code>throws</code> clause must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The local home interface includes the <code>findByPrimaryKey(primaryKey)</code> method, which allows a client to locate an entity object using a primary key.
The name of the method is always <code>findByPrimaryKey</code>; it has a single argument that is the same type as the entity bean’s primary key type, and its return type is the entity bean’s local interface.
There is a unique <code>findByPrimaryKey(primaryKey)</code> method for an entity bean on its local home interface; this method must not be overloaded.
The implementation of the <code>findByPrimaryKey</code> method must ensure that the entity object exists.</p>
</div>
<div class="paragraph">
<p>The following example shows the <code>findByPrimaryKey</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">AccountHome</span> <span class="directive">extends</span> jakarta.ejb.EJBLocalHome {
    ...
    public Account findByPrimaryKey(<span class="predefined-type">String</span> AccountNumber)
        <span class="directive">throws</span> FinderException;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example illustrates how a client uses the <code>findByPrimaryKey</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AccountHome accountHome = ...;
Account account = accountHome.findByPrimaryKey(<span class="string"><span class="delimiter">&quot;</span><span class="content">100-3450-3333</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="remove-methods-2"><a class="anchor" href="#remove-methods-2"></a>3.7.3. Remove Methods</h4>
<div class="paragraph">
<p>The <code>jakarta.ejb.EJBLocalHome</code> interface defines the <code>remove</code> method to allow the client to remove an entity object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">EJBLocalHome</span> {
    <span class="type">void</span> remove(<span class="predefined-type">Object</span> primaryKey) <span class="directive">throws</span> RemoveException,
        EJBException;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After an entity object has been removed, subsequent attempts to access the local entity object by the local client result in the <code>jakarta.ejb.NoSuchObjectLocalException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="home-methods-2"><a class="anchor" href="#home-methods-2"></a>3.7.4. Home Methods</h4>
<div class="paragraph">
<p>An entity bean’s local home interface may define one or more home methods.
Home methods are methods that the Bean Provider supplies for business logic that is not specific to an entity bean instance.</p>
</div>
<div class="paragraph">
<p>Home methods can have arbitrary method names, but they must not start with &#8220;<code>create</code>&#8221;, &#8220;<code>find</code>&#8221; or &#8220;<code>remove</code>&#8221;.
The arguments of a home method are used by the entity bean implementation in computations that do not depend on a specific entity bean instance.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a home method on the local home interface may include additional application-level exceptions.
It must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows two home methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">EmployeeHome</span> <span class="directive">extends</span> jakarta.ejb.EJBLocalHome {
    ...
    <span class="comment">// this method returns a living index depending on</span>
    <span class="comment">// the state and the base salary of an employee:</span>
    <span class="comment">// the method is not specific to an instance</span>
    public <span class="type">float</span> livingIndex(<span class="predefined-type">String</span> state, <span class="type">float</span> salary);

    <span class="comment">// this method adds a bonus to all of the employees</span>
    <span class="comment">// based on a company profit sharing index</span>
    <span class="directive">public</span> <span class="type">void</span> addBonus(<span class="type">float</span> company_share_index)
        <span class="directive">throws</span> ShareIndexOutOfRangeException;
    ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="entity-objects-life-cycle"><a class="anchor" href="#entity-objects-life-cycle"></a>3.8. Entity Object’s Life Cycle</h3>
<div class="paragraph">
<p>This section describes the life cycle of an entity object from the perspective of a client.</p>
</div>
<div class="paragraph">
<p>The following diagram illustrates a client’s point of view of an entity object life cycle.
(The term "referenced" in the diagram means that the client program has a reference to the entity object’s remote or local interface.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NTAiIGhlaWdodD0iNTgwIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA1LjgzMyAxMzNoODMuMzM0QzE5OS41ODMgMTMzIDIxMCAxNDggMjEwIDE2M3MtMTAuNDE3IDMwLTIwLjgzMyAzMGgtODMuMzM0Qzk1LjQxNyAxOTMgODUgMTc4IDg1IDE2M3MxMC40MTctMzAgMjAuODMzLTMwIi8+CiAgPHRleHQgeD0iOTQiIHk9IjE1MSI+CiAgICA8dHNwYW4geD0iMTA0LjMyIiB5PSIxNTEiPmRvZXMgbm90IGV4aXN0PC90c3Bhbj4gPHRzcGFuIHg9IjEzNC45NDUiIHk9IjE2OC42MDkiPmFuZDwvdHNwYW4+IDx0c3BhbiB4PSIxMDEuNzE5IiB5PSIxODYuMjE5Ij5ub3QgcmVmZXJlbmNlZDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIzIDE5OXYxMzdtNi02bC02IDYtNi02Ii8+CiAgPHRleHQgeD0iNDAiIHk9IjI2NCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3BhbiB4PSI1MC43OTciIHk9IjI2NCI+ZGlyZWN0PC90c3Bhbj4gPHRzcGFuIHg9IjUwLjkzOCIgeT0iMjgxLjI5NyI+aW5zZXJ0PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDUuODMzIDM0Mmg4My4zMzRDMTk5LjU4MyAzNDIgMjEwIDM1NyAyMTAgMzcycy0xMC40MTcgMzAtMjAuODMzIDMwaC04My4zMzRDOTUuNDE3IDQwMiA4NSAzODcgODUgMzcyczEwLjQxNy0zMCAyMC44MzMtMzAiLz4KICA8dGV4dCB4PSI5NCIgeT0iMzYwIj4KICAgIDx0c3BhbiB4PSIxMjguMjczIiB5PSIzNjAiPmV4aXN0czwvdHNwYW4+IDx0c3BhbiB4PSIxMzQuOTQ1IiB5PSIzNzcuNjA5Ij5hbmQ8L3RzcGFuPiA8dHNwYW4geD0iMTAxLjcxOSIgeT0iMzk1LjIxOSI+bm90IHJlZmVyZW5jZWQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMi44NTcgNDAyQzI3LjYgNDUxLjggMTQ3LjYgNDkxLjggMTQ3LjUgNDAybS01LjkgNS44bDUuOS01LjggNi4xIDUuOCIvPgogIDx0ZXh0IHg9IjIyIiB5PSI0ODciIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iMzQuMjg5IiB5PSI0ODciPmhvbWUuYnVzaW5lc3NNZXRob2QoLi4uKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQyIDIwNGw1LjUtNiA1LjUgNm0tNS41LTZ2MTM5Ii8+CiAgPHRleHQgeD0iMTY1IiB5PSIyNjYiIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iMTc3LjAzOSIgeT0iMjY2Ij5kaXJlY3QgZGVsZXRlPC90c3Bhbj4gPHRzcGFuIHg9IjIwOS4xNDEiIHk9IjI4My44NDQiPm9yPC90c3Bhbj4gPHRzcGFuIHg9IjE2Mi41OTQiIHk9IjMwMS42ODgiPmhvbWUucmVtb3ZlKC4uLik8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE5Ni40NzYgMTk1LjQ5NUw0NDIuMTkyIDMzNy4wMWw0LjMzMiAyLjQ5Nk00NDQgMzMybDIuNTI0IDcuNTA1TDQzOSAzNDIiLz4KICA8dGV4dCB4PSIzMDEiIHk9IjIzMSIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3BhbiB4PSIyOTQuNTIzIiB5PSIyMzEiPmhvbWUuY3JlYXRlJmx0O01FVEhPRCZndDsoLi4uKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDUzLjgzMyAzNDJoODMuMzM0QzU0Ny41ODMgMzQyIDU1OCAzNTcgNTU4IDM3MnMtMTAuNDE3IDMwLTIwLjgzMyAzMGgtODMuMzM0QzQ0My40MTcgNDAyIDQzMyAzODcgNDMzIDM3MnMxMC40MTctMzAgMjAuODMzLTMwIi8+CiAgPHRleHQgeD0iNDQyIiB5PSIzNjAiPgogICAgPHRzcGFuIHg9IjQ3Ni4yNzMiIHk9IjM2MCI+ZXhpc3RzPC90c3Bhbj4gPHRzcGFuIHg9IjQ4Mi45NDUiIHk9IjM3Ny42MDkiPmFuZDwvdHNwYW4+IDx0c3BhbiB4PSI0NjEuOTQ1IiB5PSIzOTUuMjE5Ij5yZWZlcmVuY2VkPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NDYuNzMgNDA0LjgyM0MzNzIgNDU2IDQ5NiA0OTcgNDk1LjUgNDA3bS01LjUgNmw1LjUtNiA1LjUgNiIvPgogIDx0ZXh0IHg9IjQwMSIgeT0iNDg3IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuIHg9IjQxMS4wNyIgeT0iNDg3Ij5vYmplY3QuYnVzaW5lc3NNZXRob2QoLi4uKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjE4IDM5NGwtNi02IDYtNm0tNiA2aDIyMCIvPgogIDx0ZXh0IHg9IjI1OSIgeT0iNDE0IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuIHg9IjI4MC4wMzEiIHk9IjQxNCI+cmVsZWFzZSByZWZlcmVuY2U8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQyNiAzNTBsNiA2LTYgNm02LTZIMjExIi8+CiAgPHRleHQgeD0iMjU5IiB5PSIzNDAiIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iMjcwLjM5OCIgeT0iMzQwIj5ob21lLmZpbmQoLi4uKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDkwIDIwNGw1LjUtNiA1LjUgNm0tNS41LTZ2MTM5Ii8+CiAgPHRleHQgeD0iNTIzIiB5PSIyMzUiIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iNTI0Ljg3NSIgeT0iMjM1Ij5vYmplY3QucmVtb3ZlKCk8L3RzcGFuPiA8dHNwYW4geD0iNTY3LjM5OCIgeT0iMjUyLjYwOSI+b3I8L3RzcGFuPiA8dHNwYW4geD0iNTIxLjA5NCIgeT0iMjcwLjIxOSI+aG9tZS5yZW1vdmUoLi4uKTwvdHNwYW4+IDx0c3BhbiB4PSI1NjUuODgzIiB5PSIyODcuODI4Ij5vcjwvdHNwYW4+IDx0c3BhbiB4PSI1MzUuNDg0IiB5PSIzMDUuNDM4Ij5kaXJlY3QgZGVsZXRlPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NTMuODMzIDEzM2g4My4zMzRDNTQ3LjU4MyAxMzMgNTU4IDE0OCA1NTggMTYzcy0xMC40MTcgMzAtMjAuODMzIDMwaC04My4zMzRDNDQzLjQxNyAxOTMgNDMzIDE3OCA0MzMgMTYzczEwLjQxNy0zMCAyMC44MzMtMzAiLz4KICA8dGV4dCB4PSI0NDEiIHk9IjE1MSI+CiAgICA8dHNwYW4geD0iNDQ5LjUiIHk9IjE1MSI+ZG9lcyBub3QgZXhpc3Q8L3RzcGFuPiA8dHNwYW4geD0iNDgxLjk0NSIgeT0iMTY4LjYwOSI+YW5kPC90c3Bhbj4gPHRzcGFuIHg9IjQ2MC45NDUiIHk9IjE4Ni4yMTkiPnJlZmVyZW5jZWQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU0NC4yNyAxMzAuMTc3QzYxOSA3OSA0OTUgMzggNDk1LjUgMTI4bTUuNS02bC01LjUgNi01LjUtNiIvPgogIDx0ZXh0IHg9IjM3NSIgeT0iMjgiIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iMzc1IiB5PSIyOCI+b2JqZWN0LmJ1c2luZXNzTWV0aG9kKC4uLik8L3RzcGFuPiA8dHNwYW4geD0iMzc1IiB5PSI0NS42MDkiPnRocm93cyBOb1N1Y2hPYmplY3RFeGNlcHRpb24gb3I8L3RzcGFuPiA8dHNwYW4geD0iNDIwIiB5PSI2My4yMTkiPk5vU3VjaExvY2FsT2JqZWN0RXhjZXB0aW9uPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMjEgMTY5bC02LTYgNi02bS02IDZoMjEzIi8+CiAgPHRleHQgeD0iMjYyIiB5PSIxNDkiIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iMjgzLjAzMSIgeT0iMTQ5Ij5yZWxlYXNlIHJlZmVyZW5jZTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA3IDUxNGg0Mjl2NTVIMTA3eiIvPgogIDx0ZXh0IHg9IjExNyIgeT0iNTM1Ij4KICAgIDx0c3BhbiB4PSIxMTciIHk9IjUzNSIgZm9udC1zdHlsZT0iaXRhbGljIj5jcmVhdGUoKTwvdHNwYW4+IDx0c3BhbiB4PSIyMTMiIHk9IjUzNSI+YWN0aW9uIGluaXRpYXRlZCBieSBjbGllbnQ8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIxMTciIHk9IjU2MCI+CiAgICA8dHNwYW4geD0iMTE3IiB5PSI1NjAiPmRpcmVjdCBkZWxldGU8L3RzcGFuPiA8dHNwYW4geD0iMjEyIiB5PSI1NjAiPmFjdGlvbiBvbiBkYXRhYmFzZSBmcm9tIG91dHNpZGUgRW50ZXJwcmlzZSBCZWFuczwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 7">
</div>
<div class="title">Figure 2. Client View of Entity Object Life Cycle</div>
</div>
<div class="paragraph">
<p>An entity object does not exist until it is created.
Until it is created, it has no identity.
After it is created, it has identity.
A client creates an entity object using the entity bean’s home interface, whose class is implemented by the container.
When a client creates an entity object, the client obtains a reference to the newly created entity object.</p>
</div>
<div class="paragraph">
<p>In an environment with legacy data, entity objects may &#8220;exist&#8221; before the container and entity bean are deployed.
In addition, an entity object may be &#8220;created&#8221; in the environment via a mechanism other than by invoking a <code>create&lt;METHOD&gt;</code> method of the home interface (e.g. by inserting a database record), but still may be accessible via the finder methods.
Also, an entity object may be deleted directly using other means than the remove operation (e.g. by deletion of a database record).
The &#8220;direct insert&#8221; and &#8220;direct delete&#8221; transitions in the diagram represent such direct database manipulation.</p>
</div>
<div class="paragraph">
<p>All entity objects are considered persistent objects.
The lifetime of an entity object is not limited by the lifetime of the Java Virtual Machine process in which the entity bean instance executes.
While a crash of the Java Virtual Machine may result in a rollback of current transactions, it does not destroy previously created entity objects nor invalidate the references to the home and component interfaces held by clients.</p>
</div>
<div class="paragraph">
<p>Multiple clients can access the same entity object concurrently.
Transactions are used to isolate the clients’ work from each other.</p>
</div>
<div class="sect3">
<h4 id="references-to-entity-object-remote-interfaces"><a class="anchor" href="#references-to-entity-object-remote-interfaces"></a>3.8.1. References to Entity Object Remote Interfaces</h4>
<div class="paragraph">
<p>A client can get a reference to an existing entity object’s remote interface in any of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Receive the reference as a parameter in a method call (input parameter or result).</p>
</li>
<li>
<p>Find the entity object using a finder method defined in the entity bean’s remote home interface.</p>
</li>
<li>
<p>Obtain the reference from the entity object’s handle. (See <a href="#a349">Entity Bean’s Handle</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A client that has a reference to an entity object’s remote interface can do any of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Invoke business methods on the entity object through the remote interface.</p>
</li>
<li>
<p>Obtain a reference to the enterprise bean’s remote home interface.</p>
</li>
<li>
<p>Pass the reference as a parameter or return value of a method call.</p>
</li>
<li>
<p>Obtain the entity object’s primary key.</p>
</li>
<li>
<p>Obtain the entity object’s handle.</p>
</li>
<li>
<p>Remove the entity object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All references to an entity object that does not exist are invalid.
All attempted invocations on an entity object that does not exist result in an <code>java.rmi.NoSuchObjectException</code> being thrown.</p>
</div>
</div>
<div class="sect3">
<h4 id="references-to-entity-object-local-interfaces"><a class="anchor" href="#references-to-entity-object-local-interfaces"></a>3.8.2. References to Entity Object Local Interfaces</h4>
<div class="paragraph">
<p>A local client can get a reference to an existing entity object’s local interface in any of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Receive the reference as a result of a method call.</p>
</li>
<li>
<p>Find the entity object using a finder method defined in the entity bean’s local home interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A local client that has a reference to an entity object’s local interface can do any of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Invoke business methods on the entity object through the local interface.</p>
</li>
<li>
<p>Obtain a reference to the enterprise bean’s local home interface.</p>
</li>
<li>
<p>Pass the reference as a parameter or return value of a local method call.</p>
</li>
<li>
<p>Obtain the entity object’s primary key.</p>
</li>
<li>
<p>Remove the entity object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All local references to an entity object that does not exist are invalid.
All attempted invocations on an entity object that does not exist result in a <code>jakarta.ejb.NoSuchObjectLocalException</code> being thrown.</p>
</div>
<div class="paragraph">
<p>A local interface type must not be passed as an argument or result of a remote interface method.</p>
</div>
</div>
<div class="sect3">
<h4 id="references-to-entity-object-and-stateful-session-bean-instance-passivation-and-conversational-state"><a class="anchor" href="#references-to-entity-object-and-stateful-session-bean-instance-passivation-and-conversational-state"></a>3.8.3. References to Entity Object and Stateful Session Bean Instance Passivation and Conversational State</h4>
<div class="paragraph">
<p>If an entity bean is referenced from a stateful session bean, the Bean Provider is required to ensure that the <code>PrePassivate</code> method leaves the instance fields ready to be serialized by the container.
In addition to the rules described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection "Instance Passivation and Conversational State", for the entity bean references, the objects that are assigned to the instance’s non-<code>transient</code> fields after the session bean <code>PrePassivate</code> method completes can also be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A reference to an entity bean’s local component interface, even if it is not serializable.</p>
</li>
<li>
<p>A reference to an entity bean’s local home interface, even if it is not serializable.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="primary-key-and-object-identity"><a class="anchor" href="#primary-key-and-object-identity"></a>3.9. Primary Key and Object Identity</h3>
<div class="paragraph">
<p>Every entity object has a unique identity within its home.
If two entity objects have the same home and the same primary key, they are considered identical.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans architecture allows a primary key class to be any class that is a legal Value Type in RMI-IIOP, subject to the restrictions defined in <a href="#a1725">Entity Bean’s Primary Key Class</a> and <a href="#a3011">Entity Bean’s Primary Key Class</a>.
The primary key class may be specific to an entity bean class (i.e., each entity bean class may define a different class for its primary key, but it is possible that multiple entity beans use the same primary key class).</p>
</div>
<div class="paragraph">
<p>A client that holds a reference to an entity object’s component interface can determine the entity object’s identity within its home by invoking the <code>getPrimaryKey</code> method on the reference.</p>
</div>
<div class="paragraph">
<p>The object identity associated with a reference does not change over the lifetime of the reference.
(That is, <code>getPrimaryKey</code> always returns the same value when called on the same entity object reference).
If an entity object has both a remote home interface and a local home interface, the result of invoking the <code>getPrimaryKey</code> method on a reference to the entity object’s remote interface and on a reference to the entity object’s local interface is the same.</p>
</div>
<div class="paragraph">
<p>A client can test whether two entity object references refer to the same entity object by using the <code>isIdentical</code> method.
Alternatively, if a client obtains two entity object references from the same home, it can determine if they refer to the same entity by comparing their primary keys using the <code>equals</code> method.</p>
</div>
<div class="paragraph">
<p>The following code illustrates using the <code>isIdentical</code> method to test if two object references refer to the same entity object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Account acc1 = ...;
Account acc2 = ...;

<span class="keyword">if</span> (acc1.isIdentical(acc2)) {
    <span class="comment">// acc1 and acc2 are the same entity object</span>
} <span class="keyword">else</span> {
    <span class="comment">// acc2 and acc2 are different entity objects</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A client that knows the primary key of an entity object can obtain a reference to the entity object by invoking the <code>findByPrimaryKey(key)</code> method on the entity bean’s home interface.</p>
</div>
<div class="paragraph">
<p>Note that the Enterprise Beans architecture does not specify &#8220;object equality&#8221; (i.e. use of the == operator) for entity object references.
The result of comparing two object references using the Java programming language <code>Object.equals(Object obj)</code> method is unspecified.
Performing the <code>Object.hashCode()</code> method on two object references that represent the entity object is not guaranteed to yield the same result.
Therefore, a client should always use the <code>isIdentical</code> method to determine if two entity object references refer to the same entity object.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that the use of <code>isIdentical</code> for the comparison of object references applies to the implementation of the methods of the <code>java.util.Collection</code> API as well.</em></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="entity-beans-remote-interface"><a class="anchor" href="#entity-beans-remote-interface"></a>3.10. Entity Bean’s Remote Interface</h3>
<div class="paragraph">
<p>A client can access an entity object through the entity bean’s remote interface.
An entity bean’s remote interface must extend the <code>jakarta.ejb.EJBObject</code>
interface.
A remote interface defines the business methods that are callable by remote clients.</p>
</div>
<div class="paragraph">
<p>The following example illustrates the definition of an entity bean’s remote interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">Account</span> <span class="directive">extends</span> jakarta.ejb.EJBObject {
    <span class="type">void</span> debit(<span class="type">double</span> amount)
        <span class="directive">throws</span> java.rmi.RemoteException,
            InsufficientBalanceException;
    <span class="type">void</span> credit(<span class="type">double</span> amount)
        <span class="directive">throws</span> java.rmi.RemoteException;
    <span class="type">double</span> getBalance()
        <span class="directive">throws</span> java.rmi.RemoteException;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>jakarta.ejb.EJBObject</code> interface defines the methods that allow the client to perform the following operations on an entity object’s reference:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Obtain the remote home interface for the entity object.</p>
</li>
<li>
<p>Remove the entity object.</p>
</li>
<li>
<p>Obtain the entity object’s handle.</p>
</li>
<li>
<p>Obtain the entity object’s primary key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The container provides the implementation of the methods defined in the <code>jakarta.ejb.EJBObject</code> interface.
Only the business methods are delegated to the instances of the enterprise bean class.</p>
</div>
<div class="paragraph">
<p>Note that the entity object does not expose the methods of the <code>jakarta.ejb.EnterpriseBean</code> interface to the client.
These methods are not intended for the client—they are used by the
container to manage the enterprise bean instances.</p>
</div>
</div>
<div class="sect2">
<h3 id="entity-beans-local-interface"><a class="anchor" href="#entity-beans-local-interface"></a>3.11. Entity Bean’s Local Interface</h3>
<div class="paragraph">
<p>A local client can access an entity object through the entity bean’s local interface.
An entity bean’s local interface must extend the <code>jakarta.ejb.EJBLocalObject</code> interface.
A local interface defines the business methods that are callable by local clients.</p>
</div>
<div class="paragraph">
<p>The following example illustrates the definition of an entity bean’s local interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">Account</span> <span class="directive">extends</span> jakarta.ejb.EJBLocalObject {
    <span class="type">void</span> debit(<span class="type">double</span> amount)
        <span class="directive">throws</span> InsufficientBalanceException;
    <span class="type">void</span> credit(<span class="type">double</span> amount);
    <span class="type">double</span> getBalance();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Note that the methods of the entity bean’s
local interface must not throw the <code>java.rmi.RemoteException</code>.</em></p>
</div>
<div class="paragraph">
<p>The <code>jakarta.ejb.EJBLocalObject</code> interface defines the methods that allow the local client to perform the following operations on an entity object’s local reference:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Obtain the local home interface for the entity object.</p>
</li>
<li>
<p>Remove the entity object.</p>
</li>
<li>
<p>Obtain the entity object’s primary key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The container provides the implementation of
the methods defined in the <code>jakarta.ejb.EJBLocalObject</code> interface.
Only the business methods are delegated to the instances of the enterprise bean class.</p>
</div>
<div class="paragraph">
<p>Note that the entity object does not expose the methods of the <code>jakarta.ejb.EntityBean</code> or the optional <code>jakarta.ejb.TimedObject</code> interface to the local client.
These methods are not intended for the local client—they are used by the container to manage the enterprise bean instances.</p>
</div>
</div>
<div class="sect2">
<h3 id="a349"><a class="anchor" href="#a349"></a>3.12. Entity Bean’s Handle</h3>
<div class="paragraph">
<p>An entity object’s handle is an object that identifies the entity object on a network.
A client that has a reference to an entity object’s remote interface can obtain the entity object’s handle by invoking the <code>getHandle</code> method on the remote interface.
The <code>getHandle</code> method is only available on the remote interface.</p>
</div>
<div class="paragraph">
<p>Since a handle class extends <code>java.io.Serializable</code>, a client may serialize the handle.
The client may use the serialized handle later, possibly in a different process or even system, to re-obtain a reference to the entity object identified by the handle.</p>
</div>
<div class="paragraph">
<p>The client code must use the <code>javax.rmi.PortableRemoteObject.narrow</code> method to convert the result of the <code>getEJBObject</code> method invoked on a handle to the entity bean’s remote interface type.</p>
</div>
<div class="paragraph">
<p>The lifetime and scope of a handle is specific to the handle implementation.
At the minimum, a program running in one JVM must be able to obtain and serialize the handle, and another program running in a different JVM must be able to deserialize it and re-create an object reference.
An entity handle is typically implemented to be usable over a long period of time—it must be usable at least across a server restart.</p>
</div>
<div class="paragraph">
<p><em>Containers that store long-lived entities will typically provide handle implementations that allow clients to store a handle for a long time (possibly many years).
Such a handle will be usable even if parts of the technology used by the container (e.g. ORB, DBMS, server) have been upgraded or replaced while the client has stored the handle.
Support for this &#8220;quality of service&#8221; is not required by the Enterprise Beans specification.</em></p>
</div>
<div class="paragraph">
<p>An Enterprise Beans container is not required to accept a handle that was generated by another vendor’s Enterprise Beans container.</p>
</div>
<div class="paragraph">
<p>The use of a handle is illustrated by the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// A client obtains a handle of an account entity object and</span>
<span class="comment">// stores the handle in stable storage.</span>
<span class="comment">//</span>
<span class="predefined-type">ObjectOutputStream</span> stream = ...;
Account account = ...;
Handle handle = account.getHandle();
stream.writeObject(handle);

<span class="comment">// A client can read the handle from stable storage, and use the</span>
<span class="comment">// handle to resurrect an object reference to the</span>
<span class="comment">// account entity object.</span>
<span class="comment">//</span>
<span class="predefined-type">ObjectInputStream</span> stream = ...;
Handle handle = (Handle)stream.readObject(handle);
Account account = (Account)javax.rmi.PortableRemoteObject.narrow(
         handle.getEJBObject(), Account.class);
account.debit(<span class="float">100.00</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>A handle is not a capability, in the security sense, that would automatically grant its holder the right to invoke methods on the object.
When a reference to an object is obtained from a handle, and then a method on the object is invoked, the container performs the usual access checks based on the caller’s principal.</p>
</div>
</div>
<div class="sect2">
<h3 id="entity-home-handles"><a class="anchor" href="#entity-home-handles"></a>3.13. Entity Home Handles</h3>
<div class="paragraph">
<p>The Enterprise Beans specification allows a client to obtain a handle for the remote home interface.
The client can use the home handle to store a reference to an entity bean’s remote home interface in stable storage, and re-create the reference later.
This handle functionality may be useful to a client that needs to use the remote home interface in the future, but does not know the JNDI name of the remote home interface.</p>
</div>
<div class="paragraph">
<p>A handle to a remote home interface must implement the <code>jakarta.ejb.HomeHandle</code> interface.</p>
</div>
<div class="paragraph">
<p>The client code must use the <code>javax.rmi.PortableRemoteObject.narrow</code> method to convert the result of the <code>getEJBHome</code> method invoked on a handle to the home interface type.</p>
</div>
<div class="paragraph">
<p>The lifetime and scope of a handle is specific to the handle implementation.
At a minimum, a program running in one JVM must be able to serialize the handle, and another program running in a different JVM must be able to deserialize it and re-create an object reference.
An entity handle is typically implemented to be usable over a long period of time—it must be usable at least across a server restart.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-narrowing-of-object-references"><a class="anchor" href="#type-narrowing-of-object-references"></a>3.14. Type Narrowing of Object References</h3>
<div class="paragraph">
<p>A client program that is intended to be interoperable with all compliant Enterprise Beans container implementations must use the <code>javax.rmi.PortableRemoteObject.narrow</code> method to perform type-narrowing of the client-side representations of the remote home and remote interfaces.</p>
</div>
<div class="paragraph">
<p><em>Note: Programs that use the cast operator to narrow the remote and remote home interfaces are likely to fail if the container implementation uses RMI-IIOP as the underlying communication transport.</em></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a384"><a class="anchor" href="#a384"></a>4. Enterprise Beans 2.1 Entity Bean Component Contract for Container-Managed Persistence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Enterprise Beans 2.1 entity bean component contract for container-managed persistence is the contract between an entity bean and its container.
It defines the life cycle of the entity bean instances, the model for method delegation of the business methods invoked by the client, and the model for the management of the entity bean’s persistent state and relationships.
The main goal of this contract is to ensure that an entity bean component using container-managed persistence is portable across all compliant Enterprise Beans containers.</p>
</div>
<div class="paragraph">
<p>This chapter defines the Enterprise Bean Provider’s view of this contract and responsibilities of the Container Provider for managing the life cycle of the enterprise bean instances and their persistent state and relationships.</p>
</div>
<div class="paragraph">
<p><em>Note that use of dependency injection, interceptors, and Java language metadata annotations is not supported for Enterprise Beans 2.1 entity beans.</em></p>
</div>
<div class="sect2">
<h3 id="overview-3"><a class="anchor" href="#overview-3"></a>4.1. Overview</h3>
<div class="paragraph">
<p>In accordance with the architecture for container-managed persistence, the Bean Provider develops a set of entity beans for an application, and determines the relationships among them.
The Bean Provider designs an abstract persistence schema for each entity bean, which defines its container-managed fields and relationships, and determines the methods for accessing them.
The entity bean instance accesses its container-managed fields and relationships at runtime by means of the methods defined for its abstract persistence schema.</p>
</div>
<div class="paragraph">
<p>The abstract persistence schema is specified in the deployment descriptor that is produced by the Bean Provider.
The Deployer, using the Container Provider’s tools, determines how the persistent fields and relationships defined by the abstract persistence schema are mapped to a database or other persistent store, and generates the necessary additional classes and interfaces that enable the container to manage the persistent fields and relationships of the entity bean instances at runtime.</p>
</div>
<div class="paragraph">
<p>This chapter describes the component contract for an Enterprise Beans 2.1 entity bean with container-managed persistence, and how data independence is maintained between the entity bean instance and its representation in the persistent store.
It describes this contract from the viewpoints of both the Bean Provider and the container.</p>
</div>
</div>
<div class="sect2">
<h3 id="container-managed-entity-persistence-and-data-independence"><a class="anchor" href="#container-managed-entity-persistence-and-data-independence"></a>4.2. Container-Managed Entity Persistence and Data Independence</h3>
<div class="paragraph">
<p>The Enterprise Beans component model provides a separation between the client view of a bean (as presented by its home and component interfaces) and the entity bean class (which provides the implementation of the client view).
The Enterprise Beans architecture for container-managed persistence adds to this a separation between the entity bean class (as defined by the Bean Provider) and its persistent representation.
The container-managed persistence architecture thus provides not only a layer of data independence between the client view of a bean as an <em>entity object</em> and the Bean Provider’s internal view of the bean in terms of the entity bean instance, but also between the entity bean instance and its persistent representation.
This allows an entity bean to be evolved independently from its clients, without requiring the redefinition or recompilation of those clients, and it allows an entity bean to be redeployed across different containers and different persistent data stores, without requiring the redefinition or recompilation of the entity bean class.</p>
</div>
<div class="paragraph">
<p>In container-managed persistence, unlike in bean-managed persistence, the Bean Provider does not write database access calls in the methods of the entity bean class.
Instead, persistence is handled by the container at runtime. The entity Bean Provider must specify in the deployment descriptor those persistent fields and relationships for which the container must handle data access.
The Bean Provider codes all persistent data access by using the accessor methods that are defined for the abstract persistence schema.
The implementation of the persistent fields and relationships, as well as all data access, is deferred to the container.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the Deployer to map the abstract persistence schema of a set of interrelated entity bean classes into the physical schema used by the underlying data store (e.g., into a relational schema) by using the Container Provider’s tools.
The Deployer uses the deployment descriptor as input to the Container Provider’s tools to perform this mapping.
The Container Provider’s tools are also used to generate the concrete implementation of the entity bean classes, including the code that delegates calls to the accessor methods of the entity bean class to the runtime persistent data access layer of the container.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans deployment descriptor for Enterprise Beans 2.1 entity beans describes <em>logical</em> relationships among entity beans.
It does not provide a mechanism for specifying how the abstract persistence schema of an entity bean or of a set of interrelated entity beans is to be mapped to an underlying database.
This is the responsibility of the Deployer, who, using the Container Provider’s tools, uses the logical relationships that are specified in the deployment descriptor to map to the physical relationships that are specific to the underlying resource.
It is the responsibility of the container to manage the mapping between the logical and physical relationships at runtime and to manage the referential integrity of the relationships.</p>
</div>
<div class="paragraph">
<p>The advantage of using container-managed persistence is that the entity bean can be logically independent of the data source in which the entity is stored.
The Container Provider’s tools can, for example, generate classes that use JDBC or SQLJ to access the entity state in a relational database; classes that implement access to a non-relational data source, such as an IMS database; or classes that implement function calls to existing enterprise applications. These tools are typically specific to each data source.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MTMiIGhlaWdodD0iNTQ0IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9Ijk0IiB5PSIzNCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3BhbiB4PSI5NCIgeT0iMzQiPihhKSBFbnRpdHkgYmVhbiBpcyBhbiBvYmplY3QgdmlldyBvZiBhIGNvbGxlY3Rpb24gb2YgcmVsYXRlZCByZWNvcmRzPC90c3Bhbj4gPHRzcGFuIHg9Ijk0IiB5PSI1MS42MDkiPmluIHRoZSBkYXRhYmFzZTwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIxNzYiIGhlaWdodD0iMTYyIiB4PSIxOTMiIHk9Ijc1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjIwLjI1IiByeT0iMjAuMjUiLz4KICA8dGV4dCB4PSIyNTQiIHk9IjEwMCI+CiAgICA8dHNwYW4geD0iMjUwLjY5NSIgeT0iMTAwIj5jb250YWluZXI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI2LjY2NyAxMzdoNjYuNjY2YzguMzM0IDAgMTYuNjY3IDEwIDE2LjY2NyAyMHMtOC4zMzMgMjAtMTYuNjY3IDIwSDI2LjY2N0MxOC4zMzMgMTc3IDEwIDE2NyAxMCAxNTdzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMTgiIHk9IjE2MyI+CiAgICA8dHNwYW4geD0iNDIuMDQ3IiB5PSIxNjMiPmNsaWVudDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE1IDE1N2gxMTFtLTYtNmw2IDYtNiA2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDcuNjY3IDEzN2g2Ni42NjZjOC4zMzQgMCAxNi42NjcgMTAgMTYuNjY3IDIwcy04LjMzMyAyMC0xNi42NjcgMjBoLTY2LjY2NkMyMzkuMzMzIDE3NyAyMzEgMTY3IDIzMSAxNTdzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMjM5IiB5PSIxNTQiPgogICAgPHRzcGFuIHg9IjI0My41IiB5PSIxNTQiPm9yZGVyIGVudGl0eTwvdHNwYW4+IDx0c3BhbiB4PSIyNjUuMDg2IiB5PSIxNzEuNjA5Ij5iZWFuPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMzYgMTU3aDEyNG0tNi02bDYgNi02IDYiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ2NSAxMjMuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3di02Ni42NjZjMCA4LjMzMy0yNSAxNi42NjYtNTAgMTYuNjY2cy01MC04LjMzMy01MC0xNi42NjZjMC04LjMzNCAyNS0xNi42NjcgNTAtMTYuNjY3czUwIDguMzMzIDUwIDE2LjY2NyIvPgogIDx0ZXh0IHg9IjQ3MyIgeT0iMTc5Ij4KICAgIDx0c3BhbiB4PSI0ODIuMzQ0IiB5PSIxNzkiPk9yZGVyIDEwMDwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjExMCIgeT0iMjk5IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuIHg9IjExMCIgeT0iMjk5Ij4oYikgRW50aXR5IGJlYW4gaXMgYW4gb2JqZWN0IHZpZXcgb2YgYW4gZXhpc3RpbmcgYXBwbGljYXRpb248L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iMTc2IiBoZWlnaHQ9IjE2MiIgeD0iMTM0IiB5PSIzMjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjAuMjUiIHJ5PSIyMC4yNSIvPgogIDx0ZXh0IHg9IjE5NSIgeT0iMzQ3Ij4KICAgIDx0c3BhbiB4PSIxOTEuNjk1IiB5PSIzNDciPmNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjYuNjY3IDM4NGg2Ni42NjZjOC4zMzQgMCAxNi42NjcgMTAgMTYuNjY3IDIwcy04LjMzMyAyMC0xNi42NjcgMjBIMjYuNjY3QzE4LjMzMyA0MjQgMTAgNDE0IDEwIDQwNHM4LjMzMy0yMCAxNi42NjctMjAiLz4KICA8dGV4dCB4PSIxOCIgeT0iNDEwIj4KICAgIDx0c3BhbiB4PSI0Mi4wNDciIHk9IjQxMCI+Y2xpZW50PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTUgNDA0aDUybS02LTZsNiA2LTYgNiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTg4LjY2NyAzODRoNjYuNjY2YzguMzM0IDAgMTYuNjY3IDEwIDE2LjY2NyAyMHMtOC4zMzMgMjAtMTYuNjY3IDIwaC02Ni42NjZDMTgwLjMzMyA0MjQgMTcyIDQxNCAxNzIgNDA0czguMzMzLTIwIDE2LjY2Ny0yMCIvPgogIDx0ZXh0IHg9IjE4MCIgeT0iNDAxIj4KICAgIDx0c3BhbiB4PSIxODQuNSIgeT0iNDAxIj5vcmRlciBlbnRpdHk8L3RzcGFuPiA8dHNwYW4geD0iMjA2LjA4NiIgeT0iNDE4LjYwOSI+YmVhbjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjc3IDQwMy45Nmw0OS0uMzgyIDUtLjAzOU0zMjUgMzk4bDYgNS41NC02IDUuNDYiLz4KICA8ZWxsaXBzZSBjeD0iMzk4LjUiIGN5PSI0MDMuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSI2Mi41IiByeT0iMzcuNSIvPgogIDx0ZXh0IHg9IjM0NCIgeT0iNDAwIj4KICAgIDx0c3BhbiB4PSIzNzAuOTQ1IiB5PSI0MDAiPmV4aXNpdGluZzwvdHNwYW4+IDx0c3BhbiB4PSIzNjIuNTU1IiB5PSI0MTcuNjA5Ij5hcHBsaWNhdGlvbjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDY2IDQwMy41NjFsMjYgLjMxNyA1IC4wNjFNNDkxIDM5OGw2IDUuOTM5LTYgNi4wNjEiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTUwMiAzNzAuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3di02Ni42NjZjMCA4LjMzMy0yNSAxNi42NjYtNTAgMTYuNjY2cy01MC04LjMzMy01MC0xNi42NjZjMC04LjMzNCAyNS0xNi42NjcgNTAtMTYuNjY3czUwIDguMzMzIDUwIDE2LjY2NyIvPgogIDx0ZXh0IHg9IjUxMCIgeT0iNDI2Ij4KICAgIDx0c3BhbiB4PSI1MTkuMzQ0IiB5PSI0MjYiPk9yZGVyIDEwMDwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 8">
</div>
<div class="title">Figure 3. View of Underlying Data Sources Accessed Through Entity Bean</div>
</div>
</div>
<div class="sect2">
<h3 id="the-entity-bean-providers-view-of-container-managed-persistence"><a class="anchor" href="#the-entity-bean-providers-view-of-container-managed-persistence"></a>4.3. The Entity Bean Provider’s View of Container-Managed Persistence</h3>
<div class="paragraph">
<p>An entity bean implements an object view of a business entity or set of business entities stored in an underlying database or implemented by an existing enterprise application (for example, by a mainframe program or by an ERP application).</p>
</div>
<div class="paragraph">
<p>An entity bean with container-managed persistence typically consists of its entity bean class; a component interface which defines its client view business methods; a home interface which defines the create, remove, home, and finder methods of its client view; and its abstract persistence schema as specified in the deployment descriptor.</p>
</div>
<div class="paragraph">
<p>A client of an entity bean can control the life cycle of a bean by using the bean’s home interface and can manipulate the bean as a business entity by using the methods defined by its component interface.
The home and component interfaces of a bean define its client view.</p>
</div>
<div class="paragraph">
<p>An entity bean with container-managed persistence typically has container-managed relationships with other container-managed persistence entity beans, as defined by the <code>relationships</code>  element of
the deployment descriptor.
The architecture for container-managed persistence thus allows the Bean Provider to implement complex applications by defining a complex abstract persistence schema encompassing multiple entity bean classes related by means of container-managed relationships.</p>
</div>
<div class="paragraph">
<p>An entity bean accesses related entity beans by means of the accessor methods for its container-managed relationship fields, which are specified by the <code>cmr-field</code>  elements of its abstract persistence schema defined in the deployment descriptor.
Entity bean relationships are defined in terms of the local interfaces of the related beans, and the view an entity bean presents to its related beans is defined by its local home and local interfaces. Thus, an entity bean can be the target of a relationship from another entity bean only if it has a local interface.</p>
</div>
<div class="paragraph">
<p>The Bean Provider programming an application that uses container-managed persistence typically avoids calls to the methods of the remote home and remote interfaces in favor of invoking related beans by means of the methods of their local interfaces.
Unlike remote method calls, such internal method invocations are made using call-by-reference and commonly do not involve the checking of method permissions.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans architecture for container-managed persistence provides great flexibility to the Bean Provider in designing an application.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>For example, a group of related entity beans—<code>Order</code>, <code>LineItem</code> and <code>Customer</code>—might all be defined as having only local interfaces, with a remotable session bean containing the business logic that drives their invocation.
The individual entity beans form a coordinated whole that provides an interrelated set of services that are exposed by their several home and component interfaces.
The services provided by the local network of entity beans is exposed to the remote client view through the home and remote interfaces of the session bean, which offers a coarser grained remote service.</em></p>
</div>
<div class="paragraph">
<p><em>Alternatively, a single entity bean might represent an independent, remotable business object that forms a unit of distribution that is designed to be referenced remotely by multiple enterprise beans and/or other remote clients.
Such a remotable entity bean might make use of other entity beans within its local scope to further model its complex internal state.
For example, an <code>Order</code> entity bean might make use of a <code>LineItem</code> entity bean internally, not exposing it to remote clients.
In this case, the <code>Order</code> entity bean might define both a remote and a local component interface, where the local interface is presented only to the related entity beans, such as <code>LineItem</code>, and the remote interface is presented to session beans and/or web-tier clients.</em></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-entity-bean-providers-programming-contract"><a class="anchor" href="#the-entity-bean-providers-programming-contract"></a>4.3.1. The Entity Bean Provider’s Programming Contract</h4>
<div class="paragraph">
<p>The Bean Provider must observe the following programming contract when defining an entity bean class that uses container-managed persistence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Bean Provider must define the entity bean class as an abstract class.
The container provides the implementation class that is used at runtime.</p>
</li>
<li>
<p>The container-managed persistent fields and container-managed relationship fields must <em>not</em> be defined in the entity bean class.
From the perspective of the Bean Provider, the container-managed persistent fields and container-managed relationship fields are virtual fields only, and are accessed through get and set accessor methods.
The implementation of the container-managed persistent fields and container-managed relationship fields is supplied by the container.</p>
</li>
<li>
<p>The container-managed persistent fields and container-managed relationship fields must be specified in the deployment descriptor using the <code>cmp-field</code> and <code>cmr-field</code> elements respectively.
The names of these fields must be valid Java identifiers and must begin with a lowercase letter, as determined by <code>java.lang.Character.isLowerCase</code>.</p>
</li>
<li>
<p>The Bean Provider must define the accessor methods for the container-managed persistent fields and container-managed relationship fields as get and set methods, using the JavaBeans conventions. The implementation of the accessor methods is supplied by the container.</p>
</li>
<li>
<p>The accessor methods must be public, must be abstract, and must bear the name of the container-managed persistent field (<code>cmp-field</code>) or container-managed relationship field (<code>cmr-field</code>) that is specified in the deployment descriptor, and in which the first letter of the name of the cmp-field or cmr-field has been uppercased and prefixed by &#8220;<code>get</code>&#8221; or &#8220;<code>set</code>&#8221;.</p>
</li>
<li>
<p>The accessor methods for a container-managed relationship field must be defined in terms of the local interface of the related entity bean, as described in <a href="#a437">The Entity Bean Provider’s View of Persistent Relationships</a>.</p>
</li>
<li>
<p>The accessor methods for container-managed relationship fields for one-to-many or many-to-many relationships must utilize one of the following Collection interfaces: <code>java.util.Collection</code> or <code>java.util.Set</code>.
The Collection interfaces used in relationships are specified in the deployment descriptor.
The implementation of the collection classes used for the container-managed relationship fields is supplied by the container.</p>
</li>
<li>
<p>An entity bean local interface type (or a collection of such) can be the type of a cmr-field. An entity bean local interface type (or a collection of such) cannot be the type of a cmp-field.</p>
</li>
<li>
<p>The accessor methods for the container-managed relationship fields must not be exposed in the remote interface of an entity bean.</p>
</li>
<li>
<p>The local interface types of the entity bean and of related entity beans must not be exposed through the remote interface of the entity bean.</p>
</li>
<li>
<p>The collection classes that are used for container-managed relationships must not be exposed through the remote interface of the entity bean.</p>
</li>
<li>
<p>Once the primary key for an entity bean has been set, the Bean Provider must not attempt to change it by use of set accessor methods on the primary key cmp-fields.
The Bean Provider should therefore not expose the set accessor methods for the primary key cmp-fields in the component interface of the entity bean.</p>
</li>
<li>
<p>The Bean Provider must ensure that the Java types assigned to the cmp-fields are restricted to the following: Java primitive types and Java serializable types.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="a437"><a class="anchor" href="#a437"></a>4.3.2. The Entity Bean Provider’s View of Persistent Relationships</h4>
<div class="paragraph">
<p>An entity bean may have relationships with other entity beans with container-managed persistence.</p>
</div>
<div class="paragraph">
<p>Relationships may be one-to-one, one-to-many, or many-to-many relationships.</p>
</div>
<div class="paragraph">
<p>Container-managed relationships can exist only among entity beans within the same local relationship scope, as defined by the <code>relationships</code> element in the deployment descriptor.
Container-managed relationships are defined in terms of the local interfaces of the related beans.</p>
</div>
<div class="paragraph">
<p>Relationships may be either bidirectional or unidirectional.
If a relationship is bidirectional, it can be navigated in both directions, whereas a unidirectional relationship can be navigated in one direction only.</p>
</div>
<div class="paragraph">
<p>A unidirectional relationship is implemented with a cmr-field on the entity bean instance from which navigation can take place, and no related cmr-field on the entity bean instance that is the target of the relationship.
Unidirectional relationships are typically used when the Bean Provider wishes to restrict the visibility of a relationship.</p>
</div>
<div class="paragraph">
<p>An entity bean that does not have a local interface can have only unidirectional relationships from itself to other entity beans.
The lack of a local interface prevents other entity beans from having a relationship to it.</p>
</div>
<div class="paragraph">
<p>The bean developer navigates or manipulates relationships by using the get and set accessor methods for the container-managed relationship fields and the <code>java.util.Collection</code> API for collection-valued container-managed
relationship fields.</p>
</div>
<div class="paragraph">
<p>The Bean Provider must consider the type and cardinality of relationships when the entity bean classes are programmed.
The get method for a cmr-field must return either the local interface of the entity bean or a collection (either <code>java.util.Collection</code> or <code>java.util.Set</code>) of the same.
The set method for the relationship must take as an argument the entity bean’s local interface or a collection of the same.</p>
</div>
</div>
<div class="sect3">
<h4 id="dependent-value-classes"><a class="anchor" href="#dependent-value-classes"></a>4.3.3. Dependent Value Classes</h4>
<div class="paragraph">
<p>A dependent value class is a concrete class that is the value of a cmp-field.
A dependent value class may be a class that the Bean Provider wishes to use internally within an entity bean with container-managed persistence, and/or it may be a class that the Bean Provider chooses to expose through the remote (or local) interface of the entity bean.</p>
</div>
<div class="paragraph">
<p>A dependent value class can be the value of a cmp-field; it cannot be the value of a cmr-field.</p>
</div>
<div class="paragraph">
<p>The get accessor method for a cmp-field that corresponds to a dependent value class returns a <em>copy</em> of the dependent value class instance.
The assignment of a dependent value class value to a cmp-field using the set accessor method causes the value to be copied to the target cmp-field.</p>
</div>
<div class="paragraph">
<p>A dependent value class must be serializable.
The internal structure of a dependent value class is not described in
the Enterprise Beans deployment descriptor.</p>
</div>
</div>
<div class="sect3">
<h4 id="remove-protocols"><a class="anchor" href="#remove-protocols"></a>4.3.4. Remove Protocols</h4>
<div class="paragraph">
<p>The Bean Provider can specify the removal of an entity object in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>By the use of a <code>remove</code> method on the entity bean’s component interface or home interface.</p>
</li>
<li>
<p>By the use of a <code>cascade-delete</code> specification in the deployment descriptor.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="remove-methods-3"><a class="anchor" href="#remove-methods-3"></a>4.3.4.1. Remove Methods</h5>
<div class="paragraph">
<p>When the <code>remove</code> method is invoked on an entity object, the container must invoke the entity Bean Provider’s <code>ejbRemove</code> method as described in <a href="#a1279">Container’s View</a>.
After the Bean Provider’s <code>ejbRemove</code> method returns (and prior to returning to the client), the container must remove the entity object from all relationships in which it participates, and then remove its persistent
representation.
<sup class="footnote" id="_footnote_a3368">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Once an entity has been removed from a relationship, the accessor methods for any relationships to the entity will reflect this removal.
An accessor method for a one-to-one or many-to-one relationship to the entity will return null; and an accessor method for a many-to-many relationship to the entity will return a collection from which the entity object has been removed.</p>
</li>
<li>
<p>The container must detect any subsequent attempt to invoke an accessor method on the removed entity object and throw the <code>java.rmi.NoSuchObjectException</code> if the client is a remote client or the <code>jakarta.ejb.NoSuchObjectLocalException</code> if the client is a local client.
The container must detect an attempt to assign a removed entity object as the value of a cmr-field of another object (whether as an argument to a set accessor method or as an argument to a method of the <code>java.util.Collection</code> API) and throw the <code>java.lang.IllegalArgumentException</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After removing the entity object from all relationships and removing its persistent representation, the container must then cascade the removal to all entity beans with which the entity had been previously in container-managed relationships for which the <code>cascade-delete</code> option was specified.</p>
</div>
<div class="paragraph">
<p>More than one relationship may be affected by the removal of an entity object, as in the following example.
Once the shipping address object used by the <code>Order</code> bean has been removed, the billing address accessor method will also return null.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> changeAddress()
    Address a = createAddress();
    setShippingAddress(a);
    setBillingAddress(a);
    <span class="comment">//both relationships now reference the same entity object</span>
    getShippingAddress().remove();
    <span class="keyword">if</span> (getBillingAddress() == <span class="predefined-constant">null</span>) <span class="comment">// it must be</span>
        ...
    else ...
         <span class="comment">// this is impossible....</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>remove</code> method, alone, causes only the entity on which it is invoked to be removed.
It does not cause the deletion to be cascaded to other entity objects.
In order for the deletion of one entity object to be automatically cascaded to another, the <code>cascade-delete</code> mechanism should be used.</p>
</div>
</div>
<div class="sect4">
<h5 id="cascade-delete"><a class="anchor" href="#cascade-delete"></a>4.3.4.2. Cascade-delete</h5>
<div class="paragraph">
<p>The <code>cascade-delete</code> deployment descriptor element is used within a particular relationship to specify that the lifetime of one or more entity objects is dependent upon the lifetime of another entity object.</p>
</div>
<div class="paragraph">
<p>The <code>cascade-delete</code> deployment descriptor element is contained within the <code>ejb-relationship-role</code> element.
The <code>cascade-delete</code> element can only be specified for an <code>ejb-relationship-role</code> element contained in an <code>ejb-relation</code> element if the <em>other</em> <code>ejb-relationship-role</code> element in the same <code>ejb-relation</code> element specifies a <code>multiplicity</code> of <code>One</code>.
The <code>cascade-delete</code> option cannot be specified for a many-to-many relationship.
The deletion of one entity object can only be cascaded to cause the deletion of other entity objects if the first entity object is in a one-to-one or one-to-many relationship with those other entity objects.</p>
</div>
<div class="paragraph">
<p>If an entity is deleted, and the <code>cascade-delete</code> deployment descriptor element is specified for a related entity bean, then the removal is cascaded to cause the removal of the related entity object or objects.
As with the <code>remove</code> operation, the removal triggered by the <code>cascade-delete</code> option causes the container to invoke the <code>ejbRemove</code> method on the entity bean instance that is to be removed before the persistent representation of that entity object is removed.
Once an entity has been removed from a relationship because of a cascaded delete, the accessor methods for any relationships to the entity will reflect this removal.
An accessor method for a one-to-one or many-to-one relationship to the entity will return null; and an accessor method for a many-to-many relationship to the entity will return a collection from which the entity object has been removed.
After removing the entity object from all relationships and removing its persistent representation, the container must then cascade the removal to all entity beans with which the entity had been previously been in container-managed relationships for which the <code>cascade-delete</code> option was specified.</p>
</div>
<div class="paragraph">
<p>The use of <code>cascade-delete</code> causes only the entity object or objects in the relationship for which it is specified to be deleted.
It does not cause the deletion to be further cascaded to other entity objects, unless they are participants in relationship roles for which <code>cascade-delete</code> has also been specified.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="identity-of-entity-objects"><a class="anchor" href="#identity-of-entity-objects"></a>4.3.5. Identity of Entity Objects</h4>
<div class="paragraph">
<p>From the viewpoint of the Bean Provider, entity objects have a runtime object identity that is maintained by the container.</p>
</div>
<div class="paragraph">
<p>The container maintains the persistent identity of an entity object on the basis of its primary key.</p>
</div>
<div class="paragraph">
<p>The primary key of an entity bean may or may not be visible as one or more cmp-fields of the instance, depending on the way in which it is specified. The Bean Provider specifies the primary key as described in <a href="#a1820">Primary Keys</a>.
Once it has been set, the Bean Provider must not attempt to change the value of a primary key field by means of a set method on its cmp-fields.</p>
</div>
<div class="paragraph">
<p>When a new instance of an entity bean whose primary key fields are visible in the entity bean class is created, the Bean Provider must use the <code>ejbCreate&lt;METHOD&gt;</code> method to set all the primary key fields of the entity bean instance before the instance can participate in a relationship, e.g. be used in a set accessor method for a cmr-field.
The Bean Provider must not reset a primary key value by means of a set method on any of its cmp-fields after it has been set in the <code>ejbCreate&lt;METHOD&gt;</code> method.
If the Bean Provider attempts to reset a primary key value, the container must throw the <code>java.lang.IllegalStateException</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that the container’s implementation of the referential integrity semantics for container-managed relationships must not cause the value of the primary key to change.</em></p>
</div>
<div class="paragraph">
<p><em>The Bean Provider should not use untrimmed or blank-padded string-valued primary key fields. Use of untrimmed primary key fields may cause comparison operations based on primary keys to fail, and may result in non-portable behavior.
If untrimmed strings are used in primary key fields or other cmp-fields, the container or database system may trim them.</em></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a496"><a class="anchor" href="#a496"></a>4.3.6. Semantics of Assignment for Relationships</h4>
<div class="paragraph">
<p>The assignment operations for container-managed relationships have a special semantics that is determined by the referential integrity semantics for the relationship multiplicity.</p>
</div>
<div class="paragraph">
<p>In the case of a one-to-one relationship, when the Bean Provider uses a set accessor method to assign an object from a cmr-field in one instance to a cmr-field of the <em>same relationship type</em> (i.e., as defined by the <code>ejb-relation</code> and <code>ejb-relationship-role</code> deployment descriptor elements) in another instance, the object is effectively <em>moved</em> and the value of the source cmr-field is set to null in the same transaction context.
If the argument to the set accessor method is not of the same type as the cmr-field, the container must throw the <code>java.lang.IllegalArgumentException</code>.</p>
</div>
<div class="paragraph">
<p>In the case of a one-to-many or many-to-many relationship, either the <code>java.util.Collection</code> API or a set accessor method may be used to manipulate the contents of a collection-valued cmr-field.
These two approaches are discussed below.</p>
</div>
<div class="sect4">
<h5 id="use-of-the-java-util-collection-api-to-update-relationships"><a class="anchor" href="#use-of-the-java-util-collection-api-to-update-relationships"></a>4.3.6.1. Use of the java.util.Collection API to Update Relationships</h5>
<div class="paragraph">
<p>The methods of the <code>java.util.Collection</code> API for the container-managed collections used for collection-valued cmr-fields have the usual semantics, with the following exception: the <code>add</code> and <code>addAll</code> methods applied to container-managed collections in one-to-many relationships have a special semantics that is determined by the referential integrity of one-to-many relationships.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the argument to the <code>add</code> method is already an element of a collection-valued relationship field of the <em>same relationship type</em> as the target collection (as defined by the <code>ejb-relation</code> and <code>ejb-relationship-role</code> deployment descriptor elements), it is removed from this first relationship and added, in the same transaction context, to the target relationship (i.e., it is effectively moved from one collection of the relationship type to the other).
For example, if there is a one-to-many relationship between field offices and sales representatives, adding a sales representative to a new field office will have the effect of removing him or her from his or her current field office.
If the argument to the <code>add</code> method is not an element of a collection-valued relationship of the <em>same relationship type</em>, it is simply added to the target collection and not removed from its current collection, if any.</p>
</li>
<li>
<p>The <code>addAll</code> method, when applied to a target collection in a one-to-many relationship, has similar semantics, applied to the members of its collection argument individually.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that in the case of many-to-many relationships, adding an element or elements to the contents of a collection-valued cmr-field has no effect on the source collection, if any.
For example, if there is a many-to-many relationship between customers and sales representatives, a customer can be added to the set of customers handled by a particular sales representative without affecting the set of customers handled by any other sales representative.</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>When the <code>java.util.Collection</code> API is used to manipulate the contents of container-managed relationship fields, the argument to any Collection method defined with a single Object parameter must be of the element type of the collection defined for the target cmr-field.
The argument for any collection-valued parameter must be a <code>java.util.Collection</code> (or <code>java.util.Set</code>), all of whose elements are of the element type of the collection defined for the target cmr-field.
If an argument is not of the correct type for the relationship, the container must throw the <code>java.lang.IllegalArgumentException</code>.</p>
</div>
<div class="paragraph">
<p>The Bean Provider should exercise caution when using an Iterator over a collection in a container-managed relationship.
In particular, the Bean Provider should not modify the container-managed collection while the iteration is in progress in any way that causes elements to be added or removed, other than by the <code>java.util.Iterator.remove()</code> method.
If elements are added or removed from the underlying container-managed collection used by an iterator other than by the <code>java.util.Iterator.remove()</code> method, the container should throw the <code>java.lang.IllegalStateException</code> on the next operation on the iterator.</p>
</div>
<div class="paragraph">
<p>The following example illustrates how operations on container-managed relationships that affect the contents of a collection-valued cmr-field viewed through an iterator can be avoided.
Because there is a one-to-many relationship between field offices and sales representatives, adding a sales representative to a new field office causes the sales representative to be removed from the current field office.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Collection</span> nySalesreps = nyOffice.getSalesreps();
<span class="predefined-type">Collection</span> sfSalesreps = sfOffice.getSalesreps();

<span class="predefined-type">Iterator</span> i = nySalesreps.iterator();
Salesrep salesrep;

<span class="comment">// a wrong way to transfer the salesrep</span>
<span class="keyword">while</span> (i.hasNext()) {
    salesrep = (Salesrep)i.next();
    sfSalesreps.add(salesrep); <span class="comment">// removes salesrep from nyOffice</span>
}

<span class="comment">// this is a correct and safe way to transfer the salesrep</span>
<span class="keyword">while</span> (i.hasNext()) {
    salesrep = (Salesrep)i.next();
    i.remove();
    sfSalesreps.add(salesrep);
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="use-of-set-accessor-methods-to-update-relationships"><a class="anchor" href="#use-of-set-accessor-methods-to-update-relationships"></a>4.3.6.2. Use of Set Accessor Methods to Update Relationships</h5>
<div class="paragraph">
<p>The semantics of a set accessor method, when applied to a collection-valued cmr-field, is also determined by the referential integrity semantics associated with the multiplicity of the relationship.
The identity of the collection object referenced by a cmr-field does not change when a set accessor method is executed.</p>
</div>
<div class="paragraph">
<p>In the case of a one-to-many relationship, if a collection of entity objects is assigned from a cmr-field of in one instance to a cmr-field of the same relationship type in another instance, the objects in the collection are effectively moved.
The contents of the collection of the target instance are replaced with the contents of the collection of the source instance, but the <em>identity</em> of the collection object containing the instances in the relationship does not change.
The source cmr-field references the same collection object as before (i.e., the identity of the collection object is preserved), but the collection is empty.</p>
</div>
<div class="paragraph">
<p>The Bean Provider can thus use the set method to move objects between the collections referenced by cmr-fields of the same relationship type in different instances.
The set accessor method, when applied to a cmr-field in a one-to-many relationship thus has the semantics of the <code>java.util.Collection</code> methods <code>clear</code>, followed by <code>addAll</code>, applied to the target collection; and <code>clear</code>, applied to the source collection.
It is the responsibility of the container to transfer the contents of the collection instances in the same transaction context.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that if the collection that is passed to the cmr setter method is an unmanaged collection (i.e., not itself the value of a collection-valued cmr-field), the same requirements apply in the case that the collection contains entity objects that already participate in a one-to-many relationship of the same relationship type as the target cmr-field.</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In the following example, the telephone numbers associated with the billing address of an <code>Order</code> bean instance are transferred to the shipping address.
Billing address and shipping address are different instances of the same local interface type, <code>Address</code>.
<code>Address</code> is related to <code>TelephoneNumber</code> in a one-to-many relationship.
The example illustrates how a Bean Provider uses the set method to move a set of instances.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> changeTelephoneNumber() {
    Address a = getShippingAddress();
    Address b = getBillingAddress();
    <span class="predefined-type">Collection</span> c = b.getTelephoneNumbers();
    a.setTelephoneNumbers(b.getTelephoneNumbers());
    <span class="keyword">if</span> (c.isEmpty()) { <span class="comment">// must be true...</span>
     ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the case of a many-to-many relationship, if the value of a cmr-field is assigned to a cmr-field of the same relationship type in another instance, the objects in the collection of the first instance are assigned as the contents of the cmr-field of the second instance.
The identities of the collection objects referenced by the cmr-fields do not change.
The contents of the collections are shared, but not the collections themselves.
The set accessor method, when applied to a cmr-field in a many-to-many relationship thus has the semantics of the <code>java.util.Collection</code> methods <code>clear</code>, followed by <code>addAll</code>, applied to the target collection.</p>
</div>
<div class="paragraph">
<p>For example, if there is a many-to-many relationship between customers and sales representatives, assigning the set of customers of one sales representative to the another sales representative will result in both sales representatives handling the same customers.
If the second sales representative originally handled a different group of customers, those customers will no longer be handled by that sales representative.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> shareCustomers(SalesRep rep) {
    setCustomers(rep.getCustomers());
    <span class="comment">// the customers are shared among the sales reps</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following section, <a href="#a558">Assignment Rules for Relationships</a>, defines the semantics of assignment for relationships in further detail.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a558"><a class="anchor" href="#a558"></a>4.3.7. Assignment Rules for Relationships</h4>
<div class="paragraph">
<p>This section defines the semantics of assignment and collection manipulation in one-to-one, one-to-many, and many-to-many container-managed relationships.</p>
</div>
<div class="paragraph">
<p>The figures make use of two entity beans, with local interface types A and B. Instances with local interface type <code>A</code> are typically designated as <code>a1</code>,&#8230;&#8203;,<code>an</code>; instances with local interface type <code>B</code> are typically designated as <code>b1</code>,&#8230;&#8203;,<code>bm</code>.
Interface <code>A</code> exposes accessor methods <code>getB</code> and <code>setB</code> for navigable relationships with <code>B</code>: <code>getB</code> returns an instance of <code>B</code> or a collection of instances of <code>B</code>, depending on the multiplicity of the relationship.
Similarly, <code>B</code> exposes accessor methods <code>getA</code> and <code>setA</code> for navigable relationships with <code>A</code>.</p>
</div>
<div class="paragraph">
<p>All changes in each subsection are assumed to be applied to the figure labeled &#8220;Before change&#8221; at the beginning of the subsection (i.e., changes are not cumulative).
The results of changes are designated graphically as well as in conditional expressions expressed in the Java&#8482; programming language.</p>
</div>
<div class="sect4">
<h5 id="one-to-one-bidirectional-relationships"><a class="anchor" href="#one-to-one-bidirectional-relationships"></a>4.3.7.1. One-to-one Bidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODYiIGhlaWdodD0iMzYxIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjE5IiB5PSIyNiIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BIGFuZCBCIGFyZSBpbiBhIG9uZS10by1vbmUgYmlkaXJlY3Rpb25hbCByZWxhdGlvbnNoaXA6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNCA3MmgxMDB2ODBIMzR6Ii8+CiAgPHRleHQgeD0iMzQiIHk9IjExOCI+CiAgICA8dHNwYW4gZHg9IjQ1Ij5BPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDUgMTE4bC02LTYgNi02bS02IDZoMTA2bS02LTZsNiA2LTYgNiIvPgogIDx0ZXh0IHg9IjE0MiIgeT0iOTYiPgogICAgPHRzcGFuPjAuLjE8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMTYiIHk9Ijk2Ij4KICAgIDx0c3Bhbj4wLi4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTAgNzJoMTAwdjgwSDI1MHoiLz4KICA8dGV4dCB4PSIyNTAiIHk9IjExOCI+CiAgICA8dHNwYW4gZHg9IjQ1Ij5CPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMTEiIHk9IjE5NSIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5CZWZvcmUgQ2hhbmdlOjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iNjUiIHk9IjIzMiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iNzQiIHk9IjI1NSI+CiAgICA8dHNwYW4gZHg9IjIwIj5hMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ3IDI1NWwtNi01LjUgNi01LjVtLTYgNS41aDk0bS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iMjQyIiB5PSIyMzIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI0OSIgeT0iMjU1Ij4KICAgIDx0c3BhbiBkeD0iMjAiPmIxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSI2NSIgeT0iMzA1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI3NCIgeT0iMzI4Ij4KICAgIDx0c3BhbiBkeD0iMjAiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDcgMzI4bC02LTUuNSA2LTUuNW0tNiA1LjVoOTRtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSIyNDIiIHk9IjMwNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjQ5IiB5PSIzMjgiPgogICAgPHRzcGFuIGR4PSIyMCI+YjI8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 9">
</div>
</div>
<div class="paragraph">
<p>Before change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">B b1 = a1.getB();
B b2 = a2.getB();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.setB(a2.getB());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(b2.isIdentical(a1.getB())) &amp;&amp;
(a2.getB() == <span class="predefined-constant">null</span>) &amp;&amp;
(b1.getA() == <span class="predefined-constant">null</span>) &amp;&amp;
(a1.isIdentical(b2.getA()))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMjAiIGhlaWdodD0iMTc2IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMiIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSI2NSIgeT0iNTciIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjY1IiB5PSI1NyI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmExPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDAgODVsLS45MTctNy42MTRMMTQ3IDc2bS03LjkxNyAxLjM4Nmw5MS43NSA2NC44NDMgNC4wODQgMi44ODVNMjM0IDEzN2wuOTE3IDguMTE0TDIyNyAxNDYiLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjI0MCIgeT0iNTciIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI0MCIgeT0iNTciPgogICAgPHRzcGFuIGR4PSIyNyIgZHk9IjI0Ij5iMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iNjUiIHk9IjEzMCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iNjUiIHk9IjEzMCI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSIyNDAiIHk9IjEzMCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjQwIiB5PSIxMzAiPgogICAgPHRzcGFuIGR4PSIyNyIgZHk9IjI0Ij5iMjwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 10">
</div>
</div>
</div>
<div class="sect4">
<h5 id="one-to-one-unidirectional-relationships"><a class="anchor" href="#one-to-one-unidirectional-relationships"></a>4.3.7.2. One-to-one Unidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOTYiIGhlaWdodD0iMzUxIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjIwIiB5PSIyNiIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BIGFuZCBCIGFyZSBpbiBhIG9uZS10by1vbmUgdW5pZGlyZWN0aW9uYWwgcmVsYXRpb25zaGlwOjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDQgNzJoMTAwdjgwSDQ0eiIvPgogIDx0ZXh0IHg9IjQ0IiB5PSIxMTgiPgogICAgPHRzcGFuIGR4PSI0NSI+QTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ5IDExMmgxMDZtLTYtNmw2IDYtNiA2Ii8+CiAgPHRleHQgeD0iMTUyIiB5PSI5OCI+CiAgICA8dHNwYW4+MC4uMTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjIyNiIgeT0iOTgiPgogICAgPHRzcGFuPjAuLjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI2MCA3MmgxMDB2ODBIMjYweiIvPgogIDx0ZXh0IHg9IjI2MCIgeT0iMTE4Ij4KICAgIDx0c3BhbiBkeD0iNDUiPkI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMCIgeT0iMTk3IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuPkJlZm9yZSBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSI3NiIgeT0iMjMyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI3NiIgeT0iMjMyIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSAyNDkuNWg5NG0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjI1MCIgeT0iMjMyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNTAiIHk9IjIzMiI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmIxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSI3NiIgeT0iMzA1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI3NiIgeT0iMzA1Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSAzMjIuNWg5NG0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjI1MCIgeT0iMzA1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNTAiIHk9IjMwNSI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmIyPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 11">
</div>
</div>
<div class="paragraph">
<p>Before change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">B b1 = a1.getB();
B b2 = a2.getB();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.setB(a2.getB());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(b2.isIdentical(a1.getB())) &amp;&amp; (a2.getB() == <span class="predefined-constant">null</span>)</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMjAiIGhlaWdodD0iMTc2IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMiIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSI2NSIgeT0iNTciIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjY1IiB5PSI1NyI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmExPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzkuMDkyIDc3LjM3M2w5MS43MjMgNjQuMzgyIDQuMDkzIDIuODcyTTIzNCAxMzdsLjkwOCA3LjYyN0wyMjcgMTQ2Ii8+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSIyNDAiIHk9IjU3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNDAiIHk9IjU3Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjY1IiB5PSIxMzAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjY1IiB5PSIxMzAiPgogICAgPHRzcGFuIGR4PSIyNyIgZHk9IjI0Ij5hMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iMjQwIiB5PSIxMzAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI0MCIgeT0iMTMwIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YjI8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 12">
</div>
</div>
</div>
<div class="sect4">
<h5 id="one-to-many-bidirectional-relationships"><a class="anchor" href="#one-to-many-bidirectional-relationships"></a>4.3.7.3. One-to-many Bidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOTYiIGhlaWdodD0iNTU1IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjE5IiB5PSIyNiIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BIGFuZCBCIGFyZSBpbiBhIG9uZS10by1tYW55IGJpZGlyZWN0aW9uYWwgcmVsYXRpb25zaGlwOjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDMgNzJoMTAwdjgwSDQzeiIvPgogIDx0ZXh0IHg9IjQzIiB5PSI3MiI+CiAgICA8dHNwYW4gZHg9IjQ1IiBkeT0iNDYiPkE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NCAxMThsLTYtNiA2LTZtLTYgNmgxMDZtLTYtNmw2IDYtNiA2Ii8+CiAgPHRleHQgeD0iMTUyIiB5PSI5OCI+CiAgICA8dHNwYW4+MC4uMTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjIyNiIgeT0iOTgiPgogICAgPHRzcGFuPjAuLio8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI1OSA3MmgxMDB2ODBIMjU5eiIvPgogIDx0ZXh0IHg9IjI1OSIgeT0iNzIiPgogICAgPHRzcGFuIGR4PSI0NSIgZHk9IjQ2Ij5CPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMjAiIHk9IjE5NyIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5CZWZvcmUgQ2hhbmdlOjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iNzMiIHk9IjMwMSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iNzMiIHk9IjMwMSI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmExPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTIgMzEwbC03LjQxOSAzLjc1N0wxNDEgMzA3bTMuNTgxIDYuNzU3bDI1LjI1Ny03NS43NyAxLjU4LTQuNzQ0TTE2NCAyMzdsNy40MTktMy43NTdMMTc1IDI0MCIvPgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iMTc1IiB5PSIyMTAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE3NSIgeT0iMjEwIj4KICAgIDx0c3BhbiBkeD0iMjQiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTU0IDMxNWwtNy41ODgtLjE1NUwxNDYgMzA3bS40MTIgNy44NDVsNDUuNzY1LTQ5LjAzNSAzLjQxMS0zLjY1Nk0xODggMjYybDcuNTg4LjE1NUwxOTYgMjcwIi8+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSIyMDAiIHk9IjI0MCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjAwIiB5PSIyNDAiPgogICAgPHRzcGFuIGR4PSIyNCIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTUgMzIwbC03LjMwNC0zLjIxOEwxNTEgMzEwbS0zLjMwNCA2Ljc4Mmw2Ny45MTMtMjQuODQ2IDQuNjk1LTEuNzE4TTIxMyAyODdsNy4zMDQgMy4yMThMMjE3IDI5NyIvPgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iMjI1IiB5PSIyNzAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIyNSIgeT0iMjcwIj4KICAgIDx0c3BhbiBkeD0iMjQiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTU0IDMyNGwtNi01LjUgNi01LjVtLTYgNS41aDk2bS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxyZWN0IHdpZHRoPSI3MCIgaGVpZ2h0PSIzNiIgeD0iMjUwIiB5PSIzMDAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI1MCIgeT0iMzAwIj4KICAgIDx0c3BhbiBkeD0iMjQiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bi0xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTIgMzI2bC00LjEzNC02LjM0OUwxNTUgMzE1bS03LjEzNCA0LjY1MWwxMTYuNDAzIDI3LjU0NiA0Ljg2NSAxLjE1Mk0yNjUgMzQybDQuMTM0IDYuMzQ5TDI2MiAzNTMiLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjI3NSIgeT0iMzMwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNzUiIHk9IjMzMCI+CiAgICA8dHNwYW4gZHg9IjI0IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm48L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjczIiB5PSI0MTciIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjczIiB5PSI0MTciPgogICAgPHRzcGFuIGR4PSIyNyIgZHk9IjI0Ij5hMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTU1IDQzOGwtNy4xMjYtNC42MTZMMTUyIDQyN20tNC4xMjYgNi4zODRsMTE2LjM3OC0yNi42NTIgNC44NzQtMS4xMTZNMjYyIDQwMWw3LjEyNiA0LjYxNkwyNjUgNDEyIi8+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSIyNzUiIHk9IjM4NyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjc1IiB5PSIzODciPgogICAgPHRzcGFuIGR4PSIyNCIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTQgNDQwbC02LTUuNDUzIDYtNS41NDdtLTYgNS41NDdsOTEgLjg1OSA1IC4wNDdNMjM4IDQzMGw2IDUuNDUzLTYgNS41NDciLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjI1MCIgeT0iNDE3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNTAiIHk9IjQxNyI+CiAgICA8dHNwYW4gZHg9IjI0IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSA0NDRsLTMuMzIzLTcuNzMyTDE1NSA0MzNtLTcuMzIzIDMuMjY4bDY3Ljk3IDI1LjY5NiA0LjY3NiAxLjc2OE0yMTcgNDU2bDMuMzIzIDcuNzMyTDIxMyA0NjciLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjIyNSIgeT0iNDQ3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMjUiIHk9IjQ0NyI+CiAgICA8dHNwYW4gZHg9IjI0IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0NiA0NDZsLjM4MS03LjgxN0wxNTQgNDM5bS03LjYxOS0uODE3bDQ1Ljg1NiA0OS45NSAzLjM4MiAzLjY4NE0xOTYgNDg0bC0uMzgxIDcuODE3TDE4OCA0OTEiLz4KICA8cmVjdCB3aWR0aD0iNzAiIGhlaWdodD0iMzYiIHg9IjIwMCIgeT0iNDc3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMDAiIHk9IjQ3NyI+CiAgICA8dHNwYW4gZHg9IjI0IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm0tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQxIDQ0NmwzLjU4MS02Ljc1N0wxNTIgNDQzbS03LjQxOS0zLjc1N2wyNS4yNTcgNzUuNzcgMS41OCA0Ljc0NE0xNzUgNTEzbC0zLjU4MSA2Ljc1N0wxNjQgNTE2Ii8+CiAgPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjM2IiB4PSIxNzUiIHk9IjUwNyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTc1IiB5PSI1MDciPgogICAgPHRzcGFuIGR4PSIyNCIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 13">
</div>
</div>
<div class="paragraph">
<p>Before change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Collection</span> b1 = a1.getB();
<span class="predefined-type">Collection</span> b2 = a2.getB();
B b11, b12, ... , b1n; <span class="comment">// members of b1</span>
B b21, b22, ... , b2m; <span class="comment">// members of b2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.setB(a2.getB());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a2.getB().isEmpty()) &amp;&amp;
(b2.isEmpty()) &amp;&amp;
(b1 == a1.getB()) &amp;&amp;
(b2 == a2.getB()) &amp;&amp;
(a1.getB().contains(b21)) &amp;&amp;
(a1.getB().contains(b22)) &amp;&amp; ... &amp;&amp;
(a1.getB().contains(b2m)) &amp;&amp;
(b11.getA() == <span class="predefined-constant">null</span>) &amp;&amp;
(b12.getA() == <span class="predefined-constant">null</span>) &amp;&amp; ... &amp;&amp;
(b1n.getA() == <span class="predefined-constant">null</span>) &amp;&amp;
(a1.isIdentical(b21.getA())) &amp;&amp;
(a1.isIdentical(b22.getA())) &amp;&amp; ...&amp;&amp;
(a1.isIdentical(b2m.getA()))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSI2MCIgeT0iMTI2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI2MiIgeT0iMTI2Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE2NCIgeT0iMzYiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE2MiIgeT0iMzYiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxOTAiIHk9IjY2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxODgiIHk9IjY2Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjE2IiB5PSI5NiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjE0IiB5PSI5NiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjI0MCIgeT0iMTI2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMzgiIHk9IjEyNiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm4tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjY1IiB5PSIxNTYiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI2MyIgeT0iMTU2Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iNjAiIHk9IjI0MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iNjAiIHk9IjI0MiI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzkgMTU0bC0xLjgyOC03Ljc0NUwxNDUgMTQ1bS03LjgyOCAxLjI1NWwxMTguNDgzIDc4LjIzNSA0LjE3MyAyLjc1NU0yNTggMjE5bDEuODI4IDguMjQ1TDI1MiAyMjkiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjI2NSIgeT0iMjEzIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNjMiIHk9IjIxMiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzNiAxNTVsLjM1LTcuNzg3TDE0NCAxNDhtLTcuNjUtLjc4N2w5NS45NTIgMTA2LjM2MiAzLjM0OSAzLjcxMk0yMzYgMjQ5bC0uMzUgOC4yODdMMjI4IDI1NyIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjQwIiB5PSIyNDMiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIzOCIgeT0iMjQzIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTMzIDE1NmwyLjQzLTguMTNMMTQzIDE1MG0tNy41Ny0yLjEzbDc0LjcxIDEzNC4zOSAyLjQzIDQuMzdNMjE1IDI3OWwtMi40MyA3LjYzTDIwNSAyODQiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjIxNiIgeT0iMjczIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMTQiIHk9IjI3MyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzMSAxNTVsMy41MDgtNi43MzNMMTQyIDE1Mm0tNy40OTItMy43MzNsNTEuNDc2IDE2Mi42OTkgMS41MDggNC43NjdNMTkxIDMwOWwtMy41MDggNi43MzNMMTgwIDMxMiIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMTkwIiB5PSIzMDMiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE4OCIgeT0iMzAzIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bS0xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMjkgMTU1bDQuNzItNi41NTJMMTQwIDE1M20tNi4yOC00LjU1MmwyNy44MzkgMTkxLjE1Ni43MiA0Ljk0OE0xNjcgMzM4bC00LjcyIDYuNTUyTDE1NiAzNDAiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE2NCIgeT0iMzMzIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxNjIiIHk9IjMzMyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm08L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 14">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">b2m.setA(b1n.getA());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(b1.contains(b11)) &amp;&amp;
(b1.contains(b12)) &amp;&amp; ... &amp;&amp;
(b1.contains(b1n)) &amp;&amp;
(b1.contains(b2m)) &amp;&amp;
(b2.contains(b21)) &amp;&amp;
(b2.contains(b22)) &amp;&amp; ... &amp;&amp;
(b2.contains(b2m_1)) &amp;&amp;
(a1.isIdentical(b11.getA())) &amp;&amp;
(a1.isIdentical(b12.getA())) &amp;&amp; ... &amp;&amp;
(a1.isIdentical(b1n.getA())) &amp;&amp;
(a2.isIdentical(b21.getA())) &amp;&amp;
(a2.isIdentical(b22.getA())) &amp;&amp; ... &amp;&amp;
(a2.isIdentical(b2m_1.getA())) &amp;&amp;
(a1.isIdentical(b2m.getA()))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIzMCIgeT0iMTIyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIzMCIgeT0iMTIyIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMCAxMzFsLTcuNDE5IDMuNzU3TDk5IDEyOG0zLjU4MSA2Ljc1N2wyNS4yNTctNzUuNzcgMS41OC00Ljc0NE0xMjIgNThsNy40MTktMy43NTdMMTMzIDYxIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxMzIiIHk9IjMyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxMzIiIHk9IjMyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEyIDEzNmwtNy41ODgtLjE1NUwxMDQgMTI4bS40MTIgNy44NDVsNDUuNzY1LTQ5LjAzNSAzLjQxMS0zLjY1Nk0xNDYgODNsNy41ODguMTU1TDE1NCA5MSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMTU4IiB5PSI2MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTU4IiB5PSI2MiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMyAxNDFsLTcuMzA0LTMuMjE4TDEwOSAxMzFtLTMuMzA0IDYuNzgybDY3LjkxMy0yNC44NDYgNC42OTUtMS43MThNMTcxIDEwOGw3LjMwNCAzLjIxOEwxNzUgMTE4Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxODIiIHk9IjkyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxODIiIHk9IjkyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEyIDE0NWwtNi01LjUgNi01LjVtLTYgNS41aDk2bS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjA2IiB5PSIxMjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIwNiIgeT0iMTIyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bi0xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTAgMTQ3bC00LjEzNC02LjM0OUwxMTMgMTM2bS03LjEzNCA0LjY1MWwxMTYuNDAzIDI3LjU0NiA0Ljg2NSAxLjE1Mk0yMjMgMTYzbDQuMTM0IDYuMzQ5TDIyMCAxNzQiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjIzMCIgeT0iMTUyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMzAiIHk9IjE1MiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm48L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwOSAxNDlsLTMuMzU0LTcuMTVMMTEzIDEzOW0tNy4zNTQgMi44NDlsMTM4LjA2MyA1NC45NTMgNC42NDUgMS44NDlNMjQ1IDE5MWwzLjM1NCA3LjY1MUwyNDEgMjAyIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyNTIiIHk9IjE4MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjUyIiB5PSIxODIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIzMCIgeT0iMjc0IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIzMCIgeT0iMjc0Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMSAyOTVsLTcuMTI2LTQuNjE2TDEwOCAyODRtLTQuMTI2IDYuMzg0bDExNi4zNzgtMjYuNjUyIDQuODc0LTEuMTE2TTIxOCAyNThsNy4xMjYgNC42MTZMMjIxIDI2OSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjMwIiB5PSIyNDQiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIzMCIgeT0iMjQ0Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEwIDI5N2wtNi01LjQ1MyA2LTUuNTQ3bS02IDUuNTQ3bDkxIC44NTkgNSAuMDQ3TTE5NCAyODdsNiA1LjQ1My02IDUuNTQ3Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyMDYiIHk9IjI3NCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjA2IiB5PSIyNzQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDcgMzAxbC0zLjMyMy03LjczMkwxMTEgMjkwbS03LjMyMyAzLjI2OGw2Ny45NyAyNS42OTYgNC42NzYgMS43NjhNMTczIDMxM2wzLjMyMyA3LjczMkwxNjkgMzI0Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxODIiIHk9IjMwNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTgyIiB5PSIzMDQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4zPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDIgMzAzbC4zODEtNy44MTdMMTEwIDI5Nm0tNy42MTktLjgxN2w0NS44NTYgNDkuOTUgMy4zODIgMy42ODRNMTUyIDM0MWwtLjM4MSA3LjgxN0wxNDQgMzQ4Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxNTgiIHk9IjMzNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTU4IiB5PSIzMzQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tLTE8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 15">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.getB().add(b2m);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(b1.contains(b11)) &amp;&amp;
(b1.contains(b12)) &amp;&amp; ... &amp;&amp;
(b1.contains(b1n)) &amp;&amp;
(b1.contains(b2m)) &amp;&amp;
(b2.contains(b21)) &amp;&amp;
(b2.contains(b22)) &amp;&amp; ... &amp;&amp;
(b2.contains(b2m_1)) &amp;&amp;
(a1.isIdentical(b11.getA())) &amp;&amp;
(a1.isIdentical(b12.getA())) &amp;&amp; ... &amp;&amp;
(a1.isIdentical(b1n.getA())) &amp;&amp;
(a2.isIdentical(b21.getA())) &amp;&amp;
(a2.isIdentical(b22.getA())) &amp;&amp; ... &amp;&amp;
(a2.isIdentical(b2m_1.getA())) &amp;&amp;
(a1.isIdentical(b2m.getA()))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIzMCIgeT0iMTIyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIzMCIgeT0iMTIyIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMCAxMzFsLTcuNDE5IDMuNzU3TDk5IDEyOG0zLjU4MSA2Ljc1N2wyNS4yNTctNzUuNzcgMS41OC00Ljc0NE0xMjIgNThsNy40MTktMy43NTdMMTMzIDYxIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxMzIiIHk9IjMyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxMzIiIHk9IjMyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEyIDEzNmwtNy41ODgtLjE1NUwxMDQgMTI4bS40MTIgNy44NDVsNDUuNzY1LTQ5LjAzNSAzLjQxMS0zLjY1Nk0xNDYgODNsNy41ODguMTU1TDE1NCA5MSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMTU4IiB5PSI2MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTU4IiB5PSI2MiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMyAxNDFsLTcuMzA0LTMuMjE4TDEwOSAxMzFtLTMuMzA0IDYuNzgybDY3LjkxMy0yNC44NDYgNC42OTUtMS43MThNMTcxIDEwOGw3LjMwNCAzLjIxOEwxNzUgMTE4Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxODIiIHk9IjkyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxODIiIHk9IjkyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEyIDE0NWwtNi01LjUgNi01LjVtLTYgNS41aDk2bS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjA2IiB5PSIxMjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIwNiIgeT0iMTIyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bi0xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTAgMTQ3bC00LjEzNC02LjM0OUwxMTMgMTM2bS03LjEzNCA0LjY1MWwxMTYuNDAzIDI3LjU0NiA0Ljg2NSAxLjE1Mk0yMjMgMTYzbDQuMTM0IDYuMzQ5TDIyMCAxNzQiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjIzMCIgeT0iMTUyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMzAiIHk9IjE1MiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm48L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwOSAxNDlsLTMuMzU0LTcuMTVMMTEzIDEzOW0tNy4zNTQgMi44NDlsMTM4LjA2MyA1NC45NTMgNC42NDUgMS44NDlNMjQ1IDE5MWwzLjM1NCA3LjY1MUwyNDEgMjAyIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyNTIiIHk9IjE4MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjUyIiB5PSIxODIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIzMCIgeT0iMjc0IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIzMCIgeT0iMjc0Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMSAyOTVsLTcuMTI2LTQuNjE2TDEwOCAyODRtLTQuMTI2IDYuMzg0bDExNi4zNzgtMjYuNjUyIDQuODc0LTEuMTE2TTIxOCAyNThsNy4xMjYgNC42MTZMMjIxIDI2OSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjMwIiB5PSIyNDQiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIzMCIgeT0iMjQ0Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEwIDI5N2wtNi01LjQ1MyA2LTUuNTQ3bS02IDUuNTQ3bDkxIC44NTkgNSAuMDQ3TTE5NCAyODdsNiA1LjQ1My02IDUuNTQ3Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyMDYiIHk9IjI3NCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjA2IiB5PSIyNzQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDcgMzAxbC0zLjMyMy03LjczMkwxMTEgMjkwbS03LjMyMyAzLjI2OGw2Ny45NyAyNS42OTYgNC42NzYgMS43NjhNMTczIDMxM2wzLjMyMyA3LjczMkwxNjkgMzI0Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxODIiIHk9IjMwNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTgyIiB5PSIzMDQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4zPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDIgMzAzbC4zODEtNy44MTdMMTEwIDI5Nm0tNy42MTktLjgxN2w0NS44NTYgNDkuOTUgMy4zODIgMy42ODRNMTUyIDM0MWwtLjM4MSA3LjgxN0wxNDQgMzQ4Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxNTgiIHk9IjMzNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTU4IiB5PSIzMzQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tLTE8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 16">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.getB().remove(b1n);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(b1n.getA() == <span class="predefined-constant">null</span>) &amp;&amp;
(b1 == a1.getB()) &amp;&amp;
(b1.contains(b11)) &amp;&amp;
(b1.contains(b12)) &amp;&amp; ... &amp;&amp;
(b1.contains(b1n_1)) &amp;&amp;
!(b1.contains(b1n))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MzAiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSI2MiIgeT0iMTI2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI2MiIgeT0iMTI2Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0MiAxMzVsLTcuNDI3IDMuNzU0TDEzMSAxMzJtMy41NzMgNi43NTRsMjUuMjgtNzYuMjYyIDEuNTc0LTQuNzQ2TTE1NCA2MWw3LjQyNy0zLjI1NEwxNjUgNjUiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE2MiIgeT0iMzYiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE2MiIgeT0iMzYiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDQgMTQwbC03LjYwNC0uMTdMMTM2IDEzMm0uMzk2IDcuODNsNDUuODExLTQ5LjQ5IDMuMzk3LTMuNjdNMTc4IDg3bDcuNjA0LS4zM0wxODYgOTUiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE4OCIgeT0iNjYiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE4OCIgeT0iNjYiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDUgMTQ1bC03LjI5NS0zLjE5M0wxNDEgMTM1bS0zLjI5NSA2LjgwN2w2Ny44ODUtMjQuNDIyIDQuNzA1LTEuNjkyTTIwMyAxMTJsNy4yOTUgMy42OTNMMjA3IDEyMyIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjE0IiB5PSI5NiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjE0IiB5PSI5NiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0NCAxNDlsLTYtNS40NzYgNi01LjUyNG0tNiA1LjUyNGw5MSAuNDI5IDUgLjAyM00yMjggMTM4bDYgNS45NzYtNiA2LjAyNCIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjM4IiB5PSIxMjYiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIzOCIgeT0iMTI2Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bi0xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIzNDgiIHk9IjE2MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMzQ4IiB5PSIxNjIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5uPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSI2MiIgeT0iMjQyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI2MiIgeT0iMjQyIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0NSAyNjNsLTcuMTI2LTQuNjE2TDE0MiAyNTJtLTQuMTI2IDYuMzg0bDExNi4zNzgtMjYuNjUyIDQuODc0LTEuMTE2TTI1MiAyMjZsNy4xMjYgNC42MTZMMjU1IDIzNyIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjYzIiB5PSIyMTIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI2MyIgeT0iMjEyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ0IDI2NWwtNi01Ljk1MyA2LTYuMDQ3bS02IDYuMDQ3bDkxIC44NTkgNSAuMDQ3TTIyOCAyNTRsNiA1Ljk1My02IDYuMDQ3Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyMzgiIHk9IjI0MyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjM4IiB5PSIyNDMiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDEgMjY4bC0zLjMyMy03LjIzMkwxNDUgMjU3bS03LjMyMyAzLjc2OGw2Ny45NyAyNS42OTYgNC42NzYgMS43NjhNMjA3IDI4MWwzLjMyMyA3LjIzMkwyMDMgMjkyIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyMTQiIHk9IjI3MyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjE0IiB5PSIyNzMiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4zPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzYgMjcxbC4zODEtOC4zMTdMMTQ0IDI2M20tNy42MTktLjMxN2w0NS44NTYgNDkuOTUgMy4zODIgMy42ODRNMTg2IDMwOGwtLjM4MSA4LjMxN0wxNzggMzE2Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxODgiIHk9IjMwMyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTg4IiB5PSIzMDMiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tLTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzMSAyNzFsMy41ODEtNy4yNTdMMTQyIDI2N20tNy40MTktMy4yNTdsMjUuMjU3IDc1Ljc3IDEuNTggNC43NDRNMTY1IDMzN2wtMy41ODEgNy4yNTdMMTU0IDM0MSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMTY0IiB5PSIzMzIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE2NCIgeT0iMzMyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bTwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 17">
</div>
</div>
</div>
<div class="sect4">
<h5 id="one-to-many-unidirectional-relationships"><a class="anchor" href="#one-to-many-unidirectional-relationships"></a>4.3.7.4. One-to-many Unidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOTYiIGhlaWdodD0iNTU1IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjIwIiB5PSIyNSIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BIGFuZCBCIGFyZSBpbiBhIG9uZS10by1tYW55IHVuaWRpcmVjdGlvbmFsIHJlbGF0aW9uc2hpcDo8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQzIDcyaDEwMHY4MEg0M3oiLz4KICA8dGV4dCB4PSI0MyIgeT0iNzIiPgogICAgPHRzcGFuIGR4PSI0NSIgZHk9IjQ1Ij5BPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDggMTEyaDEwNm0tNi02bDYgNi02IDYiLz4KICA8dGV4dCB4PSIxNTAiIHk9Ijk2Ij4KICAgIDx0c3Bhbj4wLi4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMjIwIiB5PSI5NiI+CiAgICA8dHNwYW4+MC4uKjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjU5IDcyaDEwMHY4MEgyNTl6Ii8+CiAgPHRleHQgeD0iMjU5IiB5PSI3MiI+CiAgICA8dHNwYW4gZHg9IjQ1IiBkeT0iNDUiPkI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMCIgeT0iMTk1IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuPkJlZm9yZSBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSI3MiIgeT0iMzAxIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI3MiIgeT0iMzAxIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0NC41ODEgMzEzLjc1N2wyNS4yNTctNzUuNzcgMS41OC00Ljc0NE0xNjQgMjM3bDcuNDE5LTMuNzU3TDE3NSAyNDAiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE3MiIgeT0iMjExIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxNzIiIHk9IjIxMSI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0Ni40MTIgMzE0Ljg0NWw0NS43NjUtNDkuMDM1IDMuNDExLTMuNjU2TTE4OCAyNjJsNy41ODguMTU1TDE5NiAyNzAiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE5OCIgeT0iMjQxIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxOTgiIHk9IjI0MSI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0Ny42OTYgMzE2Ljc4Mmw2Ny45MTMtMjQuODQ2IDQuNjk1LTEuNzE4TTIxMyAyODdsNy4zMDQgMy4yMThMMjE3IDI5NyIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjI0IiB5PSIyNzEiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIyNCIgeT0iMjcxIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ4IDMxOC41aDk2bS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjQ4IiB5PSIzMDEiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI0OCIgeT0iMzAxIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bi0xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDcuODY2IDMxOS42NTFsMTE2LjQwMyAyNy41NDYgNC44NjUgMS4xNTJNMjY1IDM0Mmw0LjEzNCA2LjM0OUwyNjIgMzUzIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyNzMiIHk9IjMzMiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjczIiB5PSIzMzIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5uPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSI3MiIgeT0iNDE3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI3MiIgeT0iNDE3Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0Ny44NzQgNDMzLjM4NGwxMTYuMzc4LTI2LjY1MiA0Ljg3NC0xLjExNk0yNjIgNDAxbDcuMTI2IDQuNjE2TDI2NSA0MTIiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjI3MyIgeT0iMzg3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNzMiIHk9IjM4NyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0OCA0MzQuNTQ3bDkxIC44NTkgNSAuMDQ3TTIzOCA0MzBsNiA1LjQ1My02IDUuNTQ3Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyNDgiIHk9IjQxOCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjQ4IiB5PSI0MTgiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDcuNjc3IDQzNi4yNjhsNjcuOTcgMjUuNjk2IDQuNjc2IDEuNzY4TTIxNyA0NTZsMy4zMjMgNy43MzJMMjEzIDQ2NyIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjI0IiB5PSI0NDgiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIyNCIgeT0iNDQ4Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ2LjM4MSA0MzguMTgzbDQ1Ljg1NiA0OS45NSAzLjM4MiAzLjY4NE0xOTYgNDg0bC0uMzgxIDcuODE3TDE4OCA0OTEiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE5OCIgeT0iNDc4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxOTgiIHk9IjQ3OCI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm0tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ0LjU4MSA0MzkuMjQzbDI1LjI1NyA3NS43NyAxLjU4IDQuNzQ0TTE3NSA1MTNsLTMuNTgxIDYuNzU3TDE2NCA1MTYiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE3MiIgeT0iNTA3IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxNzIiIHk9IjUwNyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm08L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 18">
</div>
</div>
<div class="paragraph">
<p>Before change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Collection</span> b1 = a1.getB();
<span class="predefined-type">Collection</span> b2 = a2.getB();
B b11, b12, ... , b1n; <span class="comment">// members of b1</span>
B b21, b22, ... , b2m; <span class="comment">// members of b2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.setB(a2.getB());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a2.getB().isEmpty()) &amp;&amp;
(b2.isEmpty()) &amp;&amp;
(b1 == a1.getB()) &amp;&amp;
(b2 == a2.getB()) &amp;&amp;
(a1.getB().contains(b21)) &amp;&amp;
(a1.getB().contains(b22)) &amp;&amp; ... &amp;&amp;
(a1.getB().contains(b2m))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSI2MSIgeT0iMTI2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSI2MSIgeT0iMTI2Ij4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyMiI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE2MiIgeT0iMzYiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE2MiIgeT0iMzYiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxODgiIHk9IjY2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxODgiIHk9IjY2Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjE0IiB5PSI5NiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjE0IiB5PSI5NiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjIzOCIgeT0iMTI2IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMzgiIHk9IjEyNiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm4tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjYzIiB5PSIxNTciIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI2MyIgeT0iMTU3Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iNjEiIHk9IjI0MiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iNjEiIHk9IjI0MiI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjIiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzcuMTggMTQ2LjI0NGwxMTguNDYgNzcuNzY4IDQuMTggMi43NDRNMjU4IDIxOWwxLjgyIDcuNzU2TDI1MiAyMjgiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjI2MyIgeT0iMjEyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyNjMiIHk9IjIxMiI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzNi4zNTcgMTQ3LjIwNWw5NS45MjkgMTA1Ljg4NCAzLjM1NyAzLjcwNk0yMzYgMjQ5bC0uMzU3IDcuNzk1TDIyOCAyNTYiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjIzOCIgeT0iMjQzIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMzgiIHk9IjI0MyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzNS40MzYgMTQ3Ljg2N2w3NC42OTIgMTMzLjkgMi40MzYgNC4zNjZNMjE1IDI3OGwtMi40MzYgOC4xMzNMMjA1IDI4NCIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjE0IiB5PSIyNzMiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIxNCIgeT0iMjczIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTM0LjUwOCAxNDguMjY3bDUxLjQ3NiAxNjIuNjk5IDEuNTA4IDQuNzY3TTE5MSAzMDlsLTMuNTA4IDYuNzMzTDE4MCAzMTIiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE4OCIgeT0iMzAzIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxODgiIHk9IjMwMyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm0tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTMzLjcyIDE0OC40NDhsMjcuODM5IDE5MS4xNTYuNzIgNC45NDhNMTY3IDMzOGwtNC43MiA2LjU1MkwxNTYgMzQwIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxNjIiIHk9IjMzMiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTYyIiB5PSIzMzIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 19">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.getB().add(b2m);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(b1 == a1.getB()) &amp;&amp;
(b1.contains(b2m))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyOSIgeT0iMTIyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyOSIgeT0iMTIyIj4KICAgIDx0c3BhbiBkeD0iMjciIGR5PSIyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMi41ODEgMTM0Ljc1N2wyNS4yNTctNzUuNzcgMS41OC00Ljc0NE0xMjIgNThsNy40MTktMy43NTdMMTMzIDYxIi8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxMzAiIHk9IjMyIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxMzAiIHk9IjMyIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA0LjQxMiAxMzUuODQ1bDQ1Ljc2NS00OS4wMzUgMy40MTEtMy42NTZNMTQ2IDgzbDcuNTg4LjE1NUwxNTQgOTEiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE1NiIgeT0iNjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE1NiIgeT0iNjIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDUuNjk2IDEzNy43ODJsNjcuOTEzLTI0Ljg0NiA0LjY5NS0xLjcxOE0xNzEgMTA4bDcuMzA0IDMuMjE4TDE3NSAxMTgiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE4MiIgeT0iOTIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjE4MiIgeT0iOTIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4zPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDYgMTM5LjVoOTZtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyMDYiIHk9IjEyMiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjA2IiB5PSIxMjIiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5uLTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwNS44NjYgMTQwLjY1MWwxMTYuNDAzIDI3LjU0NiA0Ljg2NSAxLjE1Mk0yMjMgMTYzbDQuMTM0IDYuMzQ5TDIyMCAxNzQiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjIzMSIgeT0iMTUzIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIyMzEiIHk9IjE1MyI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm48L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwNS42NCAxNDEuMzYybDEzOC4wOCA1NS40MTQgNC42NCAxLjg2Mk0yNDUgMTkxbDMuMzYgNy42MzhMMjQxIDIwMiIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjUyIiB5PSIxODMiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjI1MiIgeT0iMTgzIj4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bTwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjkiIHk9IjI3NCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjkiIHk9IjI3NCI+CiAgICA8dHNwYW4gZHg9IjI3IiBkeT0iMjQiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDMuODc0IDI5MC4zODRsMTE2LjM3OC0yNi42NTIgNC44NzQtMS4xMTZNMjE4IDI1OGw3LjEyNiA0LjYxNkwyMjEgMjY5Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIyMjkiIHk9IjI0NCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMjI5IiB5PSIyNDQiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDQgMjkxLjU0N2w5MSAuODU5IDUgLjA0N00xOTQgMjg3bDYgNS40NTMtNiA1LjU0NyIvPgogIDxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIzNiIgeD0iMjA0IiB5PSIyNzUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMTgiIHJ5PSIxNSIvPgogIDx0ZXh0IHg9IjIwNCIgeT0iMjc1Ij4KICAgIDx0c3BhbiBkeD0iMjUiIGR5PSIyMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTAzLjY3NyAyOTMuMjY4bDY3Ljk3IDI1LjY5NiA0LjY3NiAxLjc2OE0xNzMgMzEzbDMuMzIzIDcuNzMyTDE2OSAzMjQiLz4KICA8cmVjdCB3aWR0aD0iNzIiIGhlaWdodD0iMzYiIHg9IjE4MCIgeT0iMzA1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjE4IiByeT0iMTUiLz4KICA8dGV4dCB4PSIxODAiIHk9IjMwNSI+CiAgICA8dHNwYW4gZHg9IjI1IiBkeT0iMjIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMi4zODEgMjk1LjE4M2w0NS44NTYgNDkuOTUgMy4zODIgMy42ODRNMTUyIDM0MWwtLjM4MSA3LjgxN0wxNDQgMzQ4Ii8+CiAgPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjM2IiB4PSIxNTQiIHk9IjMzNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSIxOCIgcnk9IjE1Ii8+CiAgPHRleHQgeD0iMTU0IiB5PSIzMzUiPgogICAgPHRzcGFuIGR4PSIyNSIgZHk9IjIyIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tLTE8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 20">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.getB().remove(b1n);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b11)) &amp;&amp;
(a1.getB().contains(b12)) &amp;&amp; ... &amp;&amp;
(a1.getB().contains(b1n_1)) &amp;&amp;
!(a1.getB().contains(b1n)) &amp;&amp;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MzAiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03NC42NjcgMTI2aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDc0LjY2N0M2OC44MzMgMTYxIDYzIDE1Mi4yNSA2MyAxNDMuNVM2OC44MzMgMTI2IDc0LjY2NyAxMjYiLz4KICA8dGV4dCB4PSI3MSIgeT0iMTQ5Ij4KICAgIDx0c3BhbiB4PSI5MC40NDUiIHk9IjE0OSI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzNC41ODEgMTM4Ljc1N2wyNS4yNTctNzUuNzcgMS41OC00Ljc0NE0xNTQgNjJsNy40MTktMy43NTdMMTY1IDY1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNzQuNjY3IDM2aDQ2LjY2NkMyMjcuMTY3IDM2IDIzMyA0NC43NSAyMzMgNTMuNVMyMjcuMTY3IDcxIDIyMS4zMzMgNzFoLTQ2LjY2NkMxNjguODMzIDcxIDE2MyA2Mi4yNSAxNjMgNTMuNVMxNjguODMzIDM2IDE3NC42NjcgMzYiLz4KICA8dGV4dCB4PSIxNzIiIHk9IjU5Ij4KICAgIDx0c3BhbiB4PSIxODYuODkxIiB5PSI1OSI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTM2LjQxMiAxMzkuODQ1bDQ1Ljc2NS00OS4wMzUgMy40MTEtMy42NTZNMTc4IDg3bDcuNTg4LjE1NUwxODYgOTUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMC42NjcgNjZoNDYuNjY2QzI1My4xNjcgNjYgMjU5IDc0Ljc1IDI1OSA4My41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZDMTk0LjgzMyAxMDEgMTg5IDkyLjI1IDE4OSA4My41UzE5NC44MzMgNjYgMjAwLjY2NyA2NiIvPgogIDx0ZXh0IHg9IjE5OCIgeT0iODkiPgogICAgPHRzcGFuIHg9IjIxMi41OTQiIHk9Ijg5Ij5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4yPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzcuNjk2IDE0MS43ODJsNjcuOTEzLTI0Ljg0NiA0LjY5NS0xLjcxOE0yMDMgMTEybDcuMzA0IDMuMjE4TDIwNyAxMjIiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNi42NjcgOTZoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNVMyMjAuODMzIDk2IDIyNi42NjcgOTYiLz4KICA8dGV4dCB4PSIyMjQiIHk9IjExOSI+CiAgICA8dHNwYW4geD0iMjM4LjU5NCIgeT0iMTE5Ij5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4zPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzggMTQzLjVoOTZtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTAuNjY3IDEyNmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNDgiIHk9IjE0OSI+CiAgICA8dHNwYW4geD0iMjU1LjkzIiB5PSIxNDkiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm4tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzYwLjY2NyAxNjJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMzU4IiB5PSIxODUiPgogICAgPHRzcGFuIHg9IjM3Mi4xODgiIHk9IjE4NSI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNzQuNjY3IDI0Mmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg3NC42NjdDNjguODMzIDI3NyA2MyAyNjguMjUgNjMgMjU5LjVTNjguODMzIDI0MiA3NC42NjcgMjQyIi8+CiAgPHRleHQgeD0iNzEiIHk9IjI2NSI+CiAgICA8dHNwYW4geD0iOTAuNDQ1IiB5PSIyNjUiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzcuODc0IDI1OC4zODRsMTE2LjM3OC0yNi42NTIgNC44NzQtMS4xMTZNMjUyIDIyNmw3LjEyNiA0LjYxNkwyNTUgMjM3Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNzUuNjY3IDIxMmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNzMiIHk9IjIzNSI+CiAgICA8dHNwYW4geD0iMjg3LjU5NCIgeT0iMjM1Ij5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMzggMjU5LjU0N2w5MSAuODU5IDUgLjA0N00yMjggMjU1bDYgNS40NTMtNiA1LjU0NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjUwLjY2NyAyNDNoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjQ4IiB5PSIyNjYiPgogICAgPHRzcGFuIHg9IjI2Mi41OTQiIHk9IjI2NiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTM3LjY3NyAyNjEuMjY4bDY3Ljk3IDI1LjY5NiA0LjY3NiAxLjc2OE0yMDcgMjgxbDMuMzIzIDcuNzMyTDIwMyAyOTIiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNi42NjcgMjczaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIyNCIgeT0iMjk2Ij4KICAgIDx0c3BhbiB4PSIyMzguNTk0IiB5PSIyOTYiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzNi4zODEgMjYzLjE4M2w0NS44NTYgNDkuOTUgMy4zODIgMy42ODRNMTg2IDMwOWwtLjM4MSA3LjgxN0wxNzggMzE2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMDAuNjY3IDMwM2g0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIxOTgiIHk9IjMyNiI+CiAgICA8dHNwYW4geD0iMjEyIiB5PSIzMjYiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm0tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTM0LjU4MSAyNjQuMjQzbDI1LjI1NyA3NS43NyAxLjU4IDQuNzQ0TTE2NSAzMzhsLTMuNTgxIDYuNzU3TDE1NCAzNDEiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE3NC42NjcgMzMyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjE3MiIgeT0iMzU1Ij4KICAgIDx0c3BhbiB4PSIxODYiIHk9IjM1NSI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+bTwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 21">
</div>
</div>
</div>
<div class="sect4">
<h5 id="many-to-one-unidirectional-relationships"><a class="anchor" href="#many-to-one-unidirectional-relationships"></a>4.3.7.5. Many-to-one Unidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOTYiIGhlaWdodD0iNTU1IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjE4IiB5PSIyNiIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BIGFuZCBCIGFyZSBpbiBhIG1hbnktdG8tb25lIHVuaWRpcmVjdGlvbmFsIHJlbGF0aW9uc2hpcDo8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQzIDcyaDEwMHY4MEg0M3oiLz4KICA8dGV4dCB4PSI1MiIgeT0iMTE4Ij4KICAgIDx0c3BhbiB4PSI4Ny41OTQiIHk9IjExOCI+QTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTU0IDExOGwtNi02IDYtNm0tNiA2aDEwNiIvPgogIDx0ZXh0IHg9IjE1MSIgeT0iOTYiPgogICAgPHRzcGFuPjAuLjE8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMjUiIHk9Ijk2Ij4KICAgIDx0c3Bhbj4wLi4qPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTkgNzJoMTAwdjgwSDI1OXoiLz4KICA8dGV4dCB4PSIyNjciIHk9IjExOCI+CiAgICA8dHNwYW4geD0iMzAzLjY2NCIgeT0iMTE4Ij5CPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMjAiIHk9IjE5NSI+CiAgICA8dHNwYW4+QmVmb3JlIENoYW5nZTo8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTg0LjY2NyAzMDFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVIODQuNjY3Qzc4LjgzMyAzMzYgNzMgMzI3LjI1IDczIDMxOC41Uzc4LjgzMyAzMDEgODQuNjY3IDMwMSIvPgogIDx0ZXh0IHg9IjgxIiB5PSIzMjQiPgogICAgPHRzcGFuIHg9IjEwMC40NDUiIHk9IjMyNCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MiAzMTBsLTcuNDE5IDMuNzU3TDE0MSAzMDdtMy41ODEgNi43NTdsMjUuMjU3LTc1Ljc3IDEuNTgtNC43NDQiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE4NC42NjcgMjExaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjE4MiIgeT0iMjM0Ij4KICAgIDx0c3BhbiB4PSIxOTYuODkxIiB5PSIyMzQiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NCAzMTVsLTcuNTg4LS4xNTVMMTQ2IDMwN20uNDEyIDcuODQ1bDQ1Ljc2NS00OS4wMzUgMy40MTEtMy42NTYiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxMC42NjcgMjQxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIwOCIgeT0iMjY0Ij4KICAgIDx0c3BhbiB4PSIyMjIuNTk0IiB5PSIyNjQiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NSAzMjBsLTcuMzA0LTMuMjE4TDE1MSAzMTBtLTMuMzA0IDYuNzgybDY3LjkxMy0yNC44NDYgNC42OTUtMS43MTgiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzNi42NjcgMjcxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIzNCIgeT0iMjkyIj4KICAgIDx0c3BhbiB4PSIyNTAiIHk9IjI5MiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+ajwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTU0IDMyNGwtNi01LjUgNi01LjVtLTYgNS41aDk2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNjAuNjY3IDMwMWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNTgiIHk9IjMyNCI+CiAgICA8dHNwYW4geD0iMjY1LjkzIiB5PSIzMjQiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm4tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUyIDMyNmwtNC4xMzQtNi4zNDlMMTU1IDMxNW0tNy4xMzQgNC42NTFsMTE2LjQwMyAyNy41NDYgNC44NjUgMS4xNTIiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI4NS42NjcgMzMyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjI4MyIgeT0iMzU1Ij4KICAgIDx0c3BhbiB4PSIyOTcuMTg4IiB5PSIzNTUiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm48L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTg0LjY2NyA0MTdoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVIODQuNjY3Qzc4LjgzMyA0NTIgNzMgNDQzLjI1IDczIDQzNC41Uzc4LjgzMyA0MTcgODQuNjY3IDQxNyIvPgogIDx0ZXh0IHg9IjgxIiB5PSI0NDAiPgogICAgPHRzcGFuIHg9IjEwMC40NDUiIHk9IjQ0MCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NSA0MzhsLTcuMTI2LTQuNjE2TDE1MiA0MjdtLTQuMTI2IDYuMzg0bDExNi4zNzgtMjYuNjUyIDQuODc0LTEuMTE2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yODUuNjY3IDM4N2g0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyODMiIHk9IjQxMCI+CiAgICA8dHNwYW4geD0iMjk3LjU5NCIgeT0iNDEwIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTQgNDQwbC02LTUuNDUzIDYtNS41NDdtLTYgNS41NDdsOTEgLjg1OSA1IC4wNDciLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI2MC42NjcgNDE4aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjI1OCIgeT0iNDQxIj4KICAgIDx0c3BhbiB4PSIyNzIuNTk0IiB5PSI0NDEiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSA0NDRsLTMuMzIzLTcuNzMyTDE1NSA0MzNtLTcuMzIzIDMuMjY4bDY3Ljk3IDI1LjY5NiA0LjY3NiAxLjc2OCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjM2LjY2NyA0NDhoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjM0IiB5PSI0NzEiPgogICAgPHRzcGFuIHg9IjI0OC4xODgiIHk9IjQ3MSI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+azwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQ2IDQ0NmwuMzgxLTcuODE3TDE1NCA0MzltLTcuNjE5LS44MTdsNDUuODU2IDQ5Ljk1IDMuMzgyIDMuNjg0Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMTAuNjY3IDQ3OGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMDgiIHk9IjUwMSI+CiAgICA8dHNwYW4geD0iMjIyIiB5PSI1MDEiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm0tMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQxIDQ0NmwzLjU4MS02Ljc1N0wxNTIgNDQzbS03LjQxOS0zLjc1N2wyNS4yNTcgNzUuNzcgMS41OCA0Ljc0NCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTg0LjY2NyA1MDdoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMTgyIiB5PSI1MzAiPgogICAgPHRzcGFuIHg9IjE5NiIgeT0iNTMwIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="image">
</div>
</div>
<div class="paragraph">
<p>Before change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">B b11, b12, ... , b1n;
B b21, b22, ... , b2m;
<span class="comment">// the following is true</span>
<span class="comment">// (a1.isIdentical(b11.getA())) &amp;&amp; ... &amp;&amp; (a1.isIdentical(b1n.getA())) &amp;&amp;</span>
<span class="comment">// (a2.isIdentical(b21.getA())) &amp;&amp; ... &amp;&amp; (a2.isIdentical(b2m.getA()))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">b1j.setA(b2k.getA());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.isIdentical(b11.getA())) &amp;&amp;
(a1.isIdentical(b12.getA())) &amp;&amp;
...
(a2.isIdentical(b1j.getA())) &amp;&amp;
...
(a1.isIdentical(b1n.getA())) &amp;&amp;
(a2.isIdentical(b21.getA())) &amp;&amp;
(a2.isIdentical(b22.getA())) &amp;&amp;
...
(a2.isIdentical(b2k.getA())) &amp;&amp;
...
(a2.isIdentical(b2m.getA()))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zOC42NjcgMTAzaDQ2LjY2NkM5MS4xNjcgMTAzIDk3IDExMS43NSA5NyAxMjAuNVM5MS4xNjcgMTM4IDg1LjMzMyAxMzhIMzguNjY3QzMyLjgzMyAxMzggMjcgMTI5LjI1IDI3IDEyMC41UzMyLjgzMyAxMDMgMzguNjY3IDEwMyIvPgogIDx0ZXh0IHg9IjM1IiB5PSIxMjYiPgogICAgPHRzcGFuIHg9IjU0LjQ0NSIgeT0iMTI2Ij5hMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA4IDExN2wtNy42MDQtLjE3TDEwMCAxMDltLjM5NiA3LjgzbDQ1LjgxMS00OS40OSAzLjM5Ny0zLjY3Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNjQuNjY3IDQzaDQ2LjY2NkMyMTcuMTY3IDQzIDIyMyA1MS43NSAyMjMgNjAuNVMyMTcuMTY3IDc4IDIxMS4zMzMgNzhoLTQ2LjY2NkMxNTguODMzIDc4IDE1MyA2OS4yNSAxNTMgNjAuNVMxNTguODMzIDQzIDE2NC42NjcgNDMiLz4KICA8dGV4dCB4PSIxNjIiIHk9IjY2Ij4KICAgIDx0c3BhbiB4PSIxNzYuODkxIiB5PSI2NiI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA5IDEyMmwtNy4zMDQtMy4yMThMMTA1IDExMm0tMy4zMDQgNi43ODJsNjcuOTEzLTI0Ljg0NiA0LjY5NS0xLjcxOCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTkwLjY2NyA3M2g0Ni42NjZDMjQzLjE2NyA3MyAyNDkgODEuNzUgMjQ5IDkwLjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NkMxODQuODMzIDEwOCAxNzkgOTkuMjUgMTc5IDkwLjVTMTg0LjgzMyA3MyAxOTAuNjY3IDczIi8+CiAgPHRleHQgeD0iMTg4IiB5PSI5NiI+CiAgICA8dHNwYW4geD0iMjAyLjU5NCIgeT0iOTYiPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwOCAxMjZsLTYtNS40NzYgNi01LjUyNG0tNiA1LjUyNGw5MSAuNDI5IDUgLjAyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjE0LjY2NyAxMDNoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjEyIiB5PSIxMjYiPgogICAgPHRzcGFuIHg9IjIyNCIgeT0iMTI2Ij5iMTwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5uLTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwNiAxMjhsLTQuMTMtNi4zNjZMMTA5IDExN20tNy4xMyA0LjYzNGwxMTYuMzkgMjcuMDk4IDQuODcgMS4xMzQiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzOS42NjcgMTM0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIzNyIgeT0iMTU3Ij4KICAgIDx0c3BhbiB4PSIyNTEuMTg4IiB5PSIxNTciPmIxPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm48L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM4LjY2NyAyMTloNDYuNjY2QzkxLjE2NyAyMTkgOTcgMjI3Ljc1IDk3IDIzNi41UzkxLjE2NyAyNTQgODUuMzMzIDI1NEgzOC42NjdDMzIuODMzIDI1NCAyNyAyNDUuMjUgMjcgMjM2LjVTMzIuODMzIDIxOSAzOC42NjcgMjE5Ii8+CiAgPHRleHQgeD0iMzUiIHk9IjI0MiI+CiAgICA8dHNwYW4geD0iNTQuNDQ1IiB5PSIyNDIiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDkgMjQxbC03LjE0Ny0zLjcwNEwxMDYgMjMwbS00LjE0NyA3LjI5NmwxMTYuNDQxLTI4Ljg4OCA0Ljg1My0xLjIwNCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjM5LjY2NyAxODloNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjM3IiB5PSIyMTIiPgogICAgPHRzcGFuIHg9IjI1MS41OTQiIHk9IjIxMiI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA4IDI0MmwtNi01LjQzIDYtNS41N20tNiA1LjU3bDkxIDEuMjkgNSAuMDciLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxNC42NjcgMjIwaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIxMiIgeT0iMjQzIj4KICAgIDx0c3BhbiB4PSIyMjYuNTk0IiB5PSIyNDMiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwNSAyNDZsLTMuMzIzLTcuNzMyTDEwOSAyMzVtLTcuMzIzIDMuMjY4bDY3Ljk3IDI1LjY5NiA0LjY3NiAxLjc2OCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTkwLjY2NyAyNTBoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMTg4IiB5PSIyNzMiPgogICAgPHRzcGFuIHg9IjIwMi4xODgiIHk9IjI3MyI+YjI8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+azwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTAwIDI0OGwuMzY2LTcuODAzTDEwOCAyNDFtLTcuNjM0LS44MDNsNDUuOTAxIDUwLjQwOSAzLjM2NyAzLjY5NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTY0LjY2NyAyODBoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMTYyIiB5PSIzMDMiPgogICAgPHRzcGFuIHg9IjE3NiIgeT0iMzAzIj5iMjwvdHNwYW4+PHRzcGFuIGR5PSI1IiBmb250LXNpemU9Ii43NWVtIj5tLTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTk1IDI0OGwzLjU3My02Ljc1NEwxMDYgMjQ1bS03LjQyNy0zLjc1NGwyNS4yOCA3Ni4yNjIgMS41NzQgNC43NDYiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzOC42NjcgMzA5aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjEzNiIgeT0iMzMyIj4KICAgIDx0c3BhbiB4PSIxNDguMTg4IiB5PSIzMzIiPmIyPC90c3Bhbj48dHNwYW4gZHk9IjUiIGZvbnQtc2l6ZT0iLjc1ZW0iPm08L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTkyIDI0N2w1LjIwNi01LjUwNEwxMDMgMjQ3bS01Ljc5NC01LjUwNGw0LjM4MSAxMDYuMDEzLjIwNyA0Ljk5NSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTEzLjY2NyAzNDBoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMTExIiB5PSIzNjMiPgogICAgPHRzcGFuIHg9IjEyNy4zNjciIHk9IjM2MyI+YjE8L3RzcGFuPjx0c3BhbiBkeT0iNSIgZm9udC1zaXplPSIuNzVlbSI+ajwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 23">
</div>
</div>
</div>
<div class="sect4">
<h5 id="many-to-many-bidirectional-relationships"><a class="anchor" href="#many-to-many-bidirectional-relationships"></a>4.3.7.6. Many-to-many Bidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOTYiIGhlaWdodD0iNTU1IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyNSIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BIGFuZCBCIGFyZSBpbiBhIG1hbnktdG8tbWFueSBiaWRpcmVjdGlvbmFsIHJlbGF0aW9uc2hpcDo8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQzIDcyaDEwMHY4MEg0M3oiLz4KICA8dGV4dCB4PSI1MiIgeT0iMTE4Ij4KICAgIDx0c3BhbiB4PSI4Ny41OTQiIHk9IjExOCI+QTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTU0IDExOGwtNi02IDYtNm0tNiA2aDEwNm0tNi02bDYgNi02IDYiLz4KICA8dGV4dCB4PSIxNTEuNiIgeT0iOTYiPgogICAgPHRzcGFuPjAuLio8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMjUuNiIgeT0iOTYiPgogICAgPHRzcGFuPjAuLio8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI1OSA3MmgxMDB2ODBIMjU5eiIvPgogIDx0ZXh0IHg9IjI2NyIgeT0iMTE4Ij4KICAgIDx0c3BhbiB4PSIzMDMuNjY0IiB5PSIxMTgiPkI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMCIgeT0iMTk1IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuPkJlZm9yZSBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDEuNjY3IDIxNGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Qzk1LjgzMyAyNDkgOTAgMjQwLjI1IDkwIDIzMS41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSI5OCIgeT0iMjM3Ij4KICAgIDx0c3BhbiB4PSIxMTcuNDQ1IiB5PSIyMzciPmExPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNzEgMjM3bC02LTUuNSA2LTUuNW0tNiA1LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTMuNjY3IDIxNGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNTEiIHk9IjIzNyI+CiAgICA8dHNwYW4geD0iMjY5LjU5NCIgeT0iMjM3Ij5iMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTYyIDI4NmwtNy4yNy0zLjYyM0wxNTggMjc1bS0zLjI3IDcuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTI0MCAyNDdsNy4yNyAzLjYyM0wyNDQgMjU4Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDEuNjY3IDI4NGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Qzk1LjgzMyAzMTkgOTAgMzEwLjI1IDkwIDMwMS41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSI5OCIgeT0iMzA3Ij4KICAgIDx0c3BhbiB4PSIxMTcuNDQ1IiB5PSIzMDciPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNzEgMzA3bC02LTUuNSA2LTUuNW0tNiA1LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTMuNjY3IDI4NGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNTEiIHk9IjMwNyI+CiAgICA8dHNwYW4geD0iMjY5LjU5NCIgeT0iMzA3Ij5iMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjQ0IDI3NWwzLjI3IDcuMzc3TDI0MCAyODZtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTU4IDI1OGwtMy4yNy03LjM3N0wxNjIgMjQ3Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDEuNjY3IDM1NGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Qzk1LjgzMyAzODkgOTAgMzgwLjI1IDkwIDM3MS41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSI5OCIgeT0iMzc3Ij4KICAgIDx0c3BhbiB4PSIxMTcuNDQ1IiB5PSIzNzciPmEzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNzEgMzc3bC02LTUuNSA2LTUuNW0tNiA1LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTMuNjY3IDM1NGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNTEiIHk9IjM3NyI+CiAgICA8dHNwYW4geD0iMjY5LjU5NCIgeT0iMzc3Ij5iMzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTYyIDM1NmwtNy4yNy0zLjYyM0wxNTggMzQ1bS0zLjI3IDcuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTI0MCAzMTdsNy4yNyAzLjYyM0wyNDQgMzI4Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDQgMzQ1bDMuMjcgNy4zNzdMMjQwIDM1Nm03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyM00xNTggMzI4bC0zLjI3LTcuMzc3TDE2MiAzMTciLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMS42NjcgNDI0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZDOTUuODMzIDQ1OSA5MCA0NTAuMjUgOTAgNDQxLjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9Ijk4IiB5PSI0NDciPgogICAgPHRzcGFuIHg9IjExNy40NDUiIHk9IjQ0NyI+YTQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE3MSA0NDdsLTYtNS41IDYtNS41bS02IDUuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI1My42NjcgNDI0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjI1MSIgeT0iNDQ3Ij4KICAgIDx0c3BhbiB4PSIyNjkuNTk0IiB5PSI0NDciPmI0PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNjIgNDI2bC03LjI3LTMuNjIzTDE1OCA0MTVtLTMuMjcgNy4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMjQwIDM4N2w3LjI3IDMuNjIzTDI0NCAzOTgiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI0NCA0MTVsMy4yNyA3LjM3N0wyNDAgNDI2bTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzTTE1OCAzOThsLTMuMjctNy4zNzdMMTYyIDM4NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTAxLjY2NyA0OTRoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NkM5NS44MzMgNTI5IDkwIDUyMC4yNSA5MCA1MTEuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iOTgiIHk9IjUxNyI+CiAgICA8dHNwYW4geD0iMTE3LjQ0NSIgeT0iNTE3Ij5hNTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTcxIDUxN2wtNi01LjUgNi01LjVtLTYgNS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjUzLjY2NyA0OTRoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjUxIiB5PSI1MTciPgogICAgPHRzcGFuIHg9IjI2OS41OTQiIHk9IjUxNyI+YjU8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE2MiA0OTZsLTcuMjctMy42MjNMMTU4IDQ4NW0tMy4yNyA3LjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00yNDAgNDU3bDcuMjcgMy42MjNMMjQ0IDQ2OCIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjQ0IDQ4NWwzLjI3IDcuMzc3TDI0MCA0OTZtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTU4IDQ2OGwtMy4yNy03LjM3N0wxNjIgNDU3Ii8+Cjwvc3ZnPgo=" alt="image">
</div>
</div>
<div class="paragraph">
<p>Before change the following holds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b1)) &amp;&amp;
(a1.getB().contains(b2)) &amp;&amp;
(a2.getB().contains(b1)) &amp;&amp;
(a2.getB().contains(b2)) &amp;&amp;
(a2.getB().contains(b3)) &amp;&amp;
(a3.getB().contains(b2)) &amp;&amp;
(a3.getB().contains(b3)) &amp;&amp;
(a3.getB().contains(b4)) &amp;&amp;
(a4.getB().contains(b3)) &amp;&amp;
(a4.getB().contains(b4)) &amp;&amp;
(a4.getB().contains(b5)) &amp;&amp;
(a5.getB().contains(b4)) &amp;&amp;
(a5.getB().contains(b5)) &amp;&amp;
(b1.getA().contains(a1)) &amp;&amp;
(b1.getA().contains(a2)) &amp;&amp;
(b2.getA().contains(a1)) &amp;&amp;
(b2.getA().contains(a2)) &amp;&amp;
(b2.getA().contains(a3)) &amp;&amp;
(b3.getA().contains(a2)) &amp;&amp;
(b3.getA().contains(a3)) &amp;&amp;
(b3.getA().contains(a4)) &amp;&amp;
(b4.getA().contains(a3)) &amp;&amp;
(b4.getA().contains(a4)) &amp;&amp;
(b4.getA().contains(a5)) &amp;&amp;
(b5.getA().contains(a4)) &amp;&amp;
(b5.getA().contains(a5)) &amp;&amp;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.setB(a3.getB());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b2)) &amp;&amp;
(a1.getB().contains(b3)) &amp;&amp;
(a1.getB().contains(b4)) &amp;&amp;
(a3.getB().contains(b2)) &amp;&amp;
(a3.getB().contains(b3)) &amp;&amp;
(a3.getB().contains(b4)) &amp;&amp;
(b1.getA().contains(a2)) &amp;&amp;
(b2.getA().contains(a1)) &amp;&amp;
(b2.getA().contains(a2)) &amp;&amp;
(b2.getA().contains(a3)) &amp;&amp;
(b3.getA().contains(a1)) &amp;&amp;
(b3.getA().contains(a2)) &amp;&amp;
(b3.getA().contains(a3)) &amp;&amp;
(b3.getA().contains(a4)) &amp;&amp;
(b4.getA().contains(a1)) &amp;&amp;
(b4.getA().contains(a3)) &amp;&amp;
(b4.getA().contains(a4)) &amp;&amp;
(b4.getA().contains(a5))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgNDFoNDYuNjY2QzEzNC4xNjcgNDEgMTQwIDQ5Ljc1IDE0MCA1OC41UzEzNC4xNjcgNzYgMTI4LjMzMyA3Nkg4MS42NjdDNzUuODMzIDc2IDcwIDY3LjI1IDcwIDU4LjVTNzUuODMzIDQxIDgxLjY2NyA0MSIvPgogIDx0ZXh0IHg9Ijc4IiB5PSI2NCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSI2NCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzMiA4OGwxLjAwMy04LjAwMkwxNDEgODFtLTcuOTk3LTEuMDAybDgyLjk5MiAxMTAuNTA2IDMuMDAyIDMuOTk4TTIyMCAxODdsLTEuMDAzIDcuNTAyTDIxMSAxOTMiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNCAxMDJsMy4yNyA3LjM3N0wyMjAgMTEzbTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzTTEzOCA4NWwtMy4yNy03LjM3N0wxNDIgNzQiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEzMCA4OGwyLjUxOC03LjY4TDE0MCA4Mm0tNy40ODItMS42OGw5NC40NDYgMTYyLjA0IDIuNTE4IDQuMzJNMjMyIDIzOWwtMi41MTggNy42OEwyMjIgMjQ1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzMuNjY3IDQxaDQ2LjY2NkMyODYuMTY3IDQxIDI5MiA0OS43NSAyOTIgNTguNVMyODYuMTY3IDc2IDI4MC4zMzMgNzZoLTQ2LjY2NkMyMjcuODMzIDc2IDIyMiA2Ny4yNSAyMjIgNTguNVMyMjcuODMzIDQxIDIzMy42NjcgNDEiLz4KICA8dGV4dCB4PSIyMzEiIHk9IjY0Ij4KICAgIDx0c3BhbiB4PSIyNDkuNTk0IiB5PSI2NCI+YjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0MiAxMTNsLTcuMjctMy42MjNMMTM4IDEwMm0tMy4yNyA3LjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00yMjAgNzRsNy4yNyAzLjYyM0wyMjQgODUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTgxLjY2NyAxMTFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVIODEuNjY3Qzc1LjgzMyAxNDYgNzAgMTM3LjI1IDcwIDEyOC41Uzc1LjgzMyAxMTEgODEuNjY3IDExMSIvPgogIDx0ZXh0IHg9Ijc4IiB5PSIxMzQiPgogICAgPHRzcGFuIHg9Ijk3LjQ0NSIgeT0iMTM0Ij5hMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQwIDEyOC41aDgybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjI0IDE3MmwzLjI3IDcuMzc3TDIyMCAxODNtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTM4IDE1NWwtMy4yNy03LjM3N0wxNDIgMTQ0Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzMuNjY3IDExMWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMzEiIHk9IjEzNCI+CiAgICA8dHNwYW4geD0iMjQ5LjU5NCIgeT0iMTM0Ij5iMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQyIDE4M2wtNy4yNy0zLjYyM0wxMzggMTcybS0zLjI3IDcuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTIyMCAxNDRsNy4yNyAzLjYyM0wyMjQgMTU1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgMTgxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDgxLjY2N0M3NS44MzMgMjE2IDcwIDIwNy4yNSA3MCAxOTguNVM3NS44MzMgMTgxIDgxLjY2NyAxODEiLz4KICA8dGV4dCB4PSI3OCIgeT0iMjA0Ij4KICAgIDx0c3BhbiB4PSI5Ny40NDUiIHk9IjIwNCI+YTM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSAyMDRsLTYtNS41IDYtNS41bS02IDUuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNCAyNDJsMy4yNyA3LjM3N0wyMjAgMjUzbTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzTTEzOCAyMjVsLTMuMjctNy4zNzdMMTQyIDIxNCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjMzLjY2NyAxODFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjMxIiB5PSIyMDQiPgogICAgPHRzcGFuIHg9IjI0OS41OTQiIHk9IjIwNCI+YjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0MiAyNTNsLTcuMjctMy42MjNMMTM4IDI0Mm0tMy4yNyA3LjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00yMjAgMjE0bDcuMjcgMy42MjNMMjI0IDIyNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNODEuNjY3IDI1MWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg4MS42NjdDNzUuODMzIDI4NiA3MCAyNzcuMjUgNzAgMjY4LjVTNzUuODMzIDI1MSA4MS42NjcgMjUxIi8+CiAgPHRleHQgeD0iNzgiIHk9IjI3NCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSIyNzQiPmE0PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTEgMjc0bC02LTUuNSA2LTUuNW0tNiA1LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMjQgMzEybDMuMjcgNy4zNzdMMjIwIDMyM203LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyM00xMzggMjk1bC0zLjI3LTcuMzc3TDE0MiAyODQiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzMy42NjcgMjUxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIzMSIgeT0iMjc0Ij4KICAgIDx0c3BhbiB4PSIyNDkuNTk0IiB5PSIyNzQiPmI0PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDIgMzIzbC03LjI3LTMuNjIzTDEzOCAzMTJtLTMuMjcgNy4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMjIwIDI4NGw3LjI3IDMuNjIzTDIyNCAyOTUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTgxLjY2NyAzMjFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVIODEuNjY3Qzc1LjgzMyAzNTYgNzAgMzQ3LjI1IDcwIDMzOC41Uzc1LjgzMyAzMjEgODEuNjY3IDMyMSIvPgogIDx0ZXh0IHg9Ijc4IiB5PSIzNDQiPgogICAgPHRzcGFuIHg9Ijk3LjQ0NSIgeT0iMzQ0Ij5hNTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUxIDM0NGwtNi01LjUgNi01LjVtLTYgNS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjMzLjY2NyAzMjFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjMxIiB5PSIzNDQiPgogICAgPHRzcGFuIHg9IjI0OS41OTQiIHk9IjM0NCI+YjU8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 25">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.getB().add(b3);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b1)) &amp;&amp;
(a1.getB().contains(b2)) &amp;&amp;
(a1.getB().contains(b3)) &amp;&amp;
(b3.getA().contains(a1)) &amp;&amp;
(b3.getA().contains(a2)) &amp;&amp;
(b3.getA().contains(a3)) &amp;&amp;
(b3.getA().contains(a4)) &amp;&amp;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgNDFoNDYuNjY2QzEzNC4xNjcgNDEgMTQwIDQ5Ljc1IDE0MCA1OC41UzEzNC4xNjcgNzYgMTI4LjMzMyA3Nkg4MS42NjdDNzUuODMzIDc2IDcwIDY3LjI1IDcwIDU4LjVTNzUuODMzIDQxIDgxLjY2NyA0MSIvPgogIDx0ZXh0IHg9Ijc4IiB5PSI2NCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSI2NCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSA2NWwtNi02IDYtNm0tNiA2aDcybS02LTZsNiA2LTYgNiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjI0IDEwMmwzLjI3IDcuMzc3TDIyMCAxMTNtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTM4IDg1bC0zLjI3LTcuMzc3TDE0MiA3NCIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTMyIDg4bDEuMDEtOC4wMDhMMTQxIDgxbS03Ljk5LTEuMDA4bDgyLjk3IDExMC4wMjQgMy4wMSAzLjk5Mk0yMjAgMTg2bC0xLjAxIDguMDA4TDIxMSAxOTMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzMy42NjcgNDFoNDYuNjY2QzI4Ni4xNjcgNDEgMjkyIDQ5Ljc1IDI5MiA1OC41UzI4Ni4xNjcgNzYgMjgwLjMzMyA3NmgtNDYuNjY2QzIyNy44MzMgNzYgMjIyIDY3LjI1IDIyMiA1OC41UzIyNy44MzMgNDEgMjMzLjY2NyA0MSIvPgogIDx0ZXh0IHg9IjIzMSIgeT0iNjQiPgogICAgPHRzcGFuIHg9IjI0OS41OTQiIHk9IjY0Ij5iMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQyIDExM2wtNy4yNy0zLjYyM0wxMzggMTAybS0zLjI3IDcuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTIyMCA3NGw3LjI3IDMuNjIzTDIyNCA4NSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNODEuNjY3IDExMWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg4MS42NjdDNzUuODMzIDE0NiA3MCAxMzcuMjUgNzAgMTI4LjVTNzUuODMzIDExMSA4MS42NjcgMTExIi8+CiAgPHRleHQgeD0iNzgiIHk9IjEzNCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSIxMzQiPmEyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTEgMTM0bC02LTYgNi02bS02IDZoNzJtLTYtNmw2IDYtNiA2Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMjQgMTcybDMuMjcgNy4zNzdMMjIwIDE4M203LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyM00xMzggMTU1bC0zLjI3LTcuMzc3TDE0MiAxNDQiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzMy42NjcgMTExaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIzMSIgeT0iMTM0Ij4KICAgIDx0c3BhbiB4PSIyNDkuNTk0IiB5PSIxMzQiPmIyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDIgMTgzbC03LjI3LTMuNjIzTDEzOCAxNzJtLTMuMjcgNy4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMjIwIDE0NGw3LjI3IDMuNjIzTDIyNCAxNTUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTgxLjY2NyAxODFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVIODEuNjY3Qzc1LjgzMyAyMTYgNzAgMjA3LjI1IDcwIDE5OC41Uzc1LjgzMyAxODEgODEuNjY3IDE4MSIvPgogIDx0ZXh0IHg9Ijc4IiB5PSIyMDQiPgogICAgPHRzcGFuIHg9Ijk3LjQ0NSIgeT0iMjA0Ij5hMzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUxIDIwNGwtNi02IDYtNm0tNiA2aDcybS02LTZsNiA2LTYgNiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjI0IDI0MmwzLjI3IDcuMzc3TDIyMCAyNTNtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTM4IDIyNWwtMy4yNy03LjM3N0wxNDIgMjE0Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzMuNjY3IDE4MWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMzEiIHk9IjIwNCI+CiAgICA8dHNwYW4geD0iMjQ5LjU5NCIgeT0iMjA0Ij5iMzwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQyIDI1M2wtNy4yNy0zLjYyM0wxMzggMjQybS0zLjI3IDcuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTIyMCAyMTRsNy4yNyAzLjYyM0wyMjQgMjI1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgMjUxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDgxLjY2N0M3NS44MzMgMjg2IDcwIDI3Ny4yNSA3MCAyNjguNVM3NS44MzMgMjUxIDgxLjY2NyAyNTEiLz4KICA8dGV4dCB4PSI3OCIgeT0iMjc0Ij4KICAgIDx0c3BhbiB4PSI5Ny40NDUiIHk9IjI3NCI+YTQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSAyNzRsLTYtNS45NyA2LTYuMDNtLTYgNi4wM2w2NyAuNDA5IDUgLjAzTTIxMSAyNjNsNiA1LjQ3LTYgNS41MyIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjI0IDMxMmwzLjI3IDcuMzc3TDIyMCAzMjNtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTM4IDI5NWwtMy4yNy03LjM3N0wxNDIgMjg0Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzMuNjY3IDI1MWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMzEiIHk9IjI3NCI+CiAgICA8dHNwYW4geD0iMjQ5LjU5NCIgeT0iMjc0Ij5iNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTQyIDMyM2wtNy4yNy0zLjYyM0wxMzggMzEybS0zLjI3IDcuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTIyMCAyODRsNy4yNyAzLjYyM0wyMjQgMjk1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgMzIxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDgxLjY2N0M3NS44MzMgMzU2IDcwIDM0Ny4yNSA3MCAzMzguNVM3NS44MzMgMzIxIDgxLjY2NyAzMjEiLz4KICA8dGV4dCB4PSI3OCIgeT0iMzQ0Ij4KICAgIDx0c3BhbiB4PSI5Ny40NDUiIHk9IjM0NCI+YTU8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSAzNDRsLTYtNiA2LTZtLTYgNmg3Mm0tNi02bDYgNi02IDYiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzMy42NjcgMzIxaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIzMSIgeT0iMzQ0Ij4KICAgIDx0c3BhbiB4PSIyNDkuNTk0IiB5PSIzNDQiPmI1PC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 26">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a2.getB().remove(b2);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a2.getB().contains(b1)) &amp;&amp;
(a2.getB().contains(b3)) &amp;&amp;
(b2.getA().contains(a1)) &amp;&amp;
(b2.getA().contains(a3))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDUiIGhlaWdodD0iMzc4IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgNDFoNDYuNjY2QzEzNC4xNjcgNDEgMTQwIDQ5Ljc1IDE0MCA1OC41UzEzNC4xNjcgNzYgMTI4LjMzMyA3Nkg4MS42NjdDNzUuODMzIDc2IDcwIDY3LjI1IDcwIDU4LjVTNzUuODMzIDQxIDgxLjY2NyA0MSIvPgogIDx0ZXh0IHg9Ijc4IiB5PSI2NCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSI2NCI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1MSA2NGwtNi01LjUgNi01LjVtLTYgNS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjI0IDEwMmwzLjI3IDcuMzc3TDIyMCAxMTNtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjNNMTM4IDg1bC0zLjI3LTcuMzc3TDE0MiA3NCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjMzLjY2NyA0MWg0Ni42NjZDMjg2LjE2NyA0MSAyOTIgNDkuNzUgMjkyIDU4LjVTMjg2LjE2NyA3NiAyODAuMzMzIDc2aC00Ni42NjZDMjI3LjgzMyA3NiAyMjIgNjcuMjUgMjIyIDU4LjVTMjI3LjgzMyA0MSAyMzMuNjY3IDQxIi8+CiAgPHRleHQgeD0iMjMxIiB5PSI2NCI+CiAgICA8dHNwYW4geD0iMjQ5LjU5NCIgeT0iNjQiPmIxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNDIgMTEzbC03LjI3LTMuNjIzTDEzOCAxMDJtLTMuMjcgNy4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMjIwIDc0bDcuMjcgMy42MjNMMjI0IDg1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04MS42NjcgMTExaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDgxLjY2N0M3NS44MzMgMTQ2IDcwIDEzNy4yNSA3MCAxMjguNVM3NS44MzMgMTExIDgxLjY2NyAxMTEiLz4KICA8dGV4dCB4PSI3OCIgeT0iMTM0Ij4KICAgIDx0c3BhbiB4PSI5Ny40NDUiIHk9IjEzNCI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNCAxNzJsMy4yNyA3LjM3N0wyMjAgMTgzbTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzTTEzOCAxNTVsLTMuMjctNy4zNzdMMTQyIDE0NCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjMzLjY2NyAxMTFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjMxIiB5PSIxMzQiPgogICAgPHRzcGFuIHg9IjI0OS41OTQiIHk9IjEzNCI+YjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0MiAxODNsLTcuMjctMy42MjNMMTM4IDE3Mm0tMy4yNyA3LjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00yMjAgMTQ0bDcuMjcgMy42MjNMMjI0IDE1NSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNODEuNjY3IDE4MWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg4MS42NjdDNzUuODMzIDIxNiA3MCAyMDcuMjUgNzAgMTk4LjVTNzUuODMzIDE4MSA4MS42NjcgMTgxIi8+CiAgPHRleHQgeD0iNzgiIHk9IjIwNCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSIyMDQiPmEzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTEgMjA0bC02LTUuNTMgNi01LjQ3bS02IDUuNDdsNjctLjQwOSA1LS4wM00yMTEgMTkybDYgNi4wMy02IDUuOTciLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNCAyNDJsMy4yNyA3LjM3N0wyMjAgMjUzbTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzTTEzOCAyMjVsLTMuMjctNy4zNzdMMTQyIDIxNCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjMzLjY2NyAxODFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjMxIiB5PSIyMDQiPgogICAgPHRzcGFuIHg9IjI0OS41OTQiIHk9IjIwNCI+YjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0MiAyNTNsLTcuMjctMy42MjNMMTM4IDI0Mm0tMy4yNyA3LjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00yMjAgMjE0bDcuMjcgMy42MjNMMjI0IDIyNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNODEuNjY3IDI1MWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg4MS42NjdDNzUuODMzIDI4NiA3MCAyNzcuMjUgNzAgMjY4LjVTNzUuODMzIDI1MSA4MS42NjcgMjUxIi8+CiAgPHRleHQgeD0iNzgiIHk9IjI3NCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSIyNzQiPmE0PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTEgMjc0bC02LTUuOTcgNi02LjAzbS02IDYuMDNsNjcgLjQwOSA1IC4wM00yMTEgMjYzbDYgNS40Ny02IDUuNTMiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIyNCAzMTJsMy4yNyA3LjM3N0wyMjAgMzIzbTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzTTEzOCAyOTVsLTMuMjctNy4zNzdMMTQyIDI4NCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjMzLjY2NyAyNTFoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjMxIiB5PSIyNzQiPgogICAgPHRzcGFuIHg9IjI0OS41OTQiIHk9IjI3NCI+YjQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0MiAzMjNsLTcuMjctMy42MjNMMTM4IDMxMm0tMy4yNyA3LjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00yMjAgMjg0bDcuMjcgMy42MjNMMjI0IDI5NSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNODEuNjY3IDMyMWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg4MS42NjdDNzUuODMzIDM1NiA3MCAzNDcuMjUgNzAgMzM4LjVTNzUuODMzIDMyMSA4MS42NjcgMzIxIi8+CiAgPHRleHQgeD0iNzgiIHk9IjM0NCI+CiAgICA8dHNwYW4geD0iOTcuNDQ1IiB5PSIzNDQiPmE1PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNTEgMzQ0bC02LTYgNi02bS02IDZoNzJtLTYtNmw2IDYtNiA2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzMuNjY3IDMyMWg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMzEiIHk9IjM0NCI+CiAgICA8dHNwYW4geD0iMjQ5LjU5NCIgeT0iMzQ0Ij5iNTwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 27">
</div>
</div>
</div>
<div class="sect4">
<h5 id="many-to-many-unidirectional-relationships"><a class="anchor" href="#many-to-many-unidirectional-relationships"></a>4.3.7.7. Many-to-many Unidirectional Relationships</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOTYiIGhlaWdodD0iNTU1IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyNSIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3BhbiB4PSIxMi4zMTMiIHk9IjI1Ij5BIGFuZCBCIGFyZSBpbiBhIG1hbnktdG8tbWFueSB1bmlkaXJlY3Rpb25hbCByZWxhdGlvbnNoaXA6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00MyA3MmgxMDB2ODBINDN6Ii8+CiAgPHRleHQgeD0iNTIiIHk9IjExOCI+CiAgICA8dHNwYW4geD0iODcuNTk0IiB5PSIxMTgiPkE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE0OCAxMTJoMTA2bS02LTZsNiA2LTYgNiIvPgogIDx0ZXh0IHg9IjE1MSIgeT0iOTYiPgogICAgPHRzcGFuPjAuLio8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMjUuNiIgeT0iOTYiPgogICAgPHRzcGFuPjAuLio8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI1OSA3MmgxMDB2ODBIMjU5eiIvPgogIDx0ZXh0IHg9IjI2NyIgeT0iMTE4Ij4KICAgIDx0c3BhbiB4PSIzMDMuNjY0IiB5PSIxMTgiPkI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyMCIgeT0iMTk1IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuPkJlZm9yZSBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMDEuNjY3IDIxNGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Qzk1LjgzMyAyNDkgOTAgMjQwLjI1IDkwIDIzMS41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSI5OCIgeT0iMjM3Ij4KICAgIDx0c3BhbiB4PSIxMTcuNDQ1IiB5PSIyMzciPmExPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNjUgMjMxLjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDQgMjc1bDMuMjcgNy4zNzdMMjQwIDI4Nm03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjUzLjY2NyAyMTRoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjUxIiB5PSIyMzciPgogICAgPHRzcGFuIHg9IjI2OS41OTQiIHk9IjIzNyI+YjE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMS42NjcgMjg0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZDOTUuODMzIDMxOSA5MCAzMTAuMjUgOTAgMzAxLjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9Ijk4IiB5PSIzMDciPgogICAgPHRzcGFuIHg9IjExNy40NDUiIHk9IjMwNyI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NC43MyAyODIuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTI0MCAyNDdsNy4yNyAzLjYyM0wyNDQgMjU4Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNjUgMzAxLjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDQgMzQ1bDMuMjcgNy4zNzdMMjQwIDM1Nm03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjUzLjY2NyAyODRoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjUxIiB5PSIzMDciPgogICAgPHRzcGFuIHg9IjI2OS41OTQiIHk9IjMwNyI+YjI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMS42NjcgMzU0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZDOTUuODMzIDM4OSA5MCAzODAuMjUgOTAgMzcxLjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9Ijk4IiB5PSIzNzciPgogICAgPHRzcGFuIHg9IjExNy40NDUiIHk9IjM3NyI+YTM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE2NSAzNzEuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NC43MyAzNTIuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTI0MCAzMTdsNy4yNyAzLjYyM0wyNDQgMzI4Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDQgNDE1bDMuMjcgNy4zNzdMMjQwIDQyNm03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjUzLjY2NyAzNTRoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjUxIiB5PSIzNzciPgogICAgPHRzcGFuIHg9IjI2OS41OTQiIHk9IjM3NyI+YjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMS42NjcgNDI0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZDOTUuODMzIDQ1OSA5MCA0NTAuMjUgOTAgNDQxLjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9Ijk4IiB5PSI0NDciPgogICAgPHRzcGFuIHg9IjExNy40NDUiIHk9IjQ0NyI+YTQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE2NSA0NDEuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NC43MyA0MjIuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTI0MCAzODdsNy4yNyAzLjYyM0wyNDQgMzk4Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDQgNDg1bDMuMjcgNy4zNzdMMjQwIDQ5Nm03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjUzLjY2NyA0MjRoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjUxIiB5PSI0NDciPgogICAgPHRzcGFuIHg9IjI2OS41OTQiIHk9IjQ0NyI+YjQ8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwMS42NjcgNDk0aDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZDOTUuODMzIDUyOSA5MCA1MjAuMjUgOTAgNTExLjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9Ijk4IiB5PSI1MTciPgogICAgPHRzcGFuIHg9IjExNy40NDUiIHk9IjUxNyI+YTU8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE2NSA1MTEuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE1NC43MyA0OTIuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTI0MCA0NTdsNy4yNyAzLjYyM0wyNDQgNDY4Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNTMuNjY3IDQ5NGg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyNTEiIHk9IjUxNyI+CiAgICA8dHNwYW4geD0iMjY5LjU5NCIgeT0iNTE3Ij5iNTwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 28">
</div>
</div>
<div class="paragraph">
<p>Before change the following holds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b1)) &amp;&amp;
(a1.getB().contains(b2)) &amp;&amp;
(a2.getB().contains(b1)) &amp;&amp;
(a2.getB().contains(b2)) &amp;&amp;
(a2.getB().contains(b3)) &amp;&amp;
(a3.getB().contains(b2)) &amp;&amp;
(a3.getB().contains(b3)) &amp;&amp;
(a3.getB().contains(b4)) &amp;&amp;
(a4.getB().contains(b3)) &amp;&amp;
(a4.getB().contains(b4)) &amp;&amp;
(a4.getB().contains(b5)) &amp;&amp;
(a5.getB().contains(b4)) &amp;&amp;
(a5.getB().contains(b5)) &amp;&amp;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.setB(a3.getB());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b2)) &amp;&amp;
(a1.getB().contains(b3)) &amp;&amp;
(a1.getB().contains(b4)) &amp;&amp;
(a3.getB().contains(b2)) &amp;&amp;
(a3.getB().contains(b3)) &amp;&amp;
(a3.getB().contains(b4)) &amp;&amp;</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iNDMwIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgNTJoNDYuNjY2QzExMS4xNjcgNTIgMTE3IDYwLjc1IDExNyA2OS41UzExMS4xNjcgODcgMTA1LjMzMyA4N0g1OC42NjdDNTIuODMzIDg3IDQ3IDc4LjI1IDQ3IDY5LjVTNTIuODMzIDUyIDU4LjY2NyA1MiIvPgogIDx0ZXh0IHg9IjU1IiB5PSI3NSI+CiAgICA8dHNwYW4geD0iNzQuNDQ1IiB5PSI3NSI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMyAxMTJsMS42NTcgNy41MjJMMTk3IDEyMm03LjY1Ny0yLjQ3OGwtNzguOTcyLTQ1LjA2Ni00LjM0Mi0yLjQ3OCIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE5LjUyNyA3My44MTRsNzQuNDE5IDEyNy4wNTcgMi41MjcgNC4zMTVNMTk4IDE5N2wtMS41MjcgOC4xODZMMTg5IDIwMyIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTA5LjE1NiA5MS41MTFsODUuNTMyIDE3OC45NjYgMi4xNTYgNC41MTJNMjAwIDI2N2wtMy4xNTYgNy45ODlMMTg5IDI3MiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyA1Mmg0Ni42NjZDMjYzLjE2NyA1MiAyNjkgNjAuNzUgMjY5IDY5LjVTMjYzLjE2NyA4NyAyNTcuMzMzIDg3aC00Ni42NjZDMjA0LjgzMyA4NyAxOTkgNzguMjUgMTk5IDY5LjVTMjA0LjgzMyA1MiAyMTAuNjY3IDUyIi8+CiAgPHRleHQgeD0iMjA4IiB5PSI3NSI+CiAgICA8dHNwYW4geD0iMjI2LjU5NCIgeT0iNzUiPmIxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgMTIyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDU4LjY2N0M1Mi44MzMgMTU3IDQ3IDE0OC4yNSA0NyAxMzkuNVM1Mi44MzMgMTIyIDU4LjY2NyAxMjIiLz4KICA8dGV4dCB4PSI1NSIgeT0iMTQ1Ij4KICAgIDx0c3BhbiB4PSI3NC40NDUiIHk9IjE0NSI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMS43MyAxMjAuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTE5NyA4NWw3LjI3IDMuNjIzTDIwMSA5NiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDEzOS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjAxIDE4M2wzLjI3IDcuMzc3TDE5NyAxOTRtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxMC42NjcgMTIyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIwOCIgeT0iMTQ1Ij4KICAgIDx0c3BhbiB4PSIyMjYuNTk0IiB5PSIxNDUiPmIyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgMTkyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDU4LjY2N0M1Mi44MzMgMjI3IDQ3IDIxOC4yNSA0NyAyMDkuNVM1Mi44MzMgMTkyIDU4LjY2NyAxOTIiLz4KICA8dGV4dCB4PSI1NSIgeT0iMjE1Ij4KICAgIDx0c3BhbiB4PSI3NC40NDUiIHk9IjIxNSI+YTM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMS43MyAxOTAuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTE5NyAxNTVsNy4yNyAzLjYyM0wyMDEgMTY2Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMjIgMjA5LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMDEgMjUzbDMuMjcgNy4zNzdMMTk3IDI2NG03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyAxOTJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjA4IiB5PSIyMTUiPgogICAgPHRzcGFuIHg9IjIyNi41OTQiIHk9IjIxNSI+YjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU4LjY2NyAyNjJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVINTguNjY3QzUyLjgzMyAyOTcgNDcgMjg4LjI1IDQ3IDI3OS41UzUyLjgzMyAyNjIgNTguNjY3IDI2MiIvPgogIDx0ZXh0IHg9IjU1IiB5PSIyODUiPgogICAgPHRzcGFuIHg9Ijc0LjQ0NSIgeT0iMjg1Ij5hNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTExLjczIDI2MC4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMTk3IDIyNWw3LjI3IDMuNjIzTDIwMSAyMzYiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyMiAyNzkuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMSAzMjNsMy4yNyA3LjM3N0wxOTcgMzM0bTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMTAuNjY3IDI2Mmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMDgiIHk9IjI4NSI+CiAgICA8dHNwYW4geD0iMjI2LjU5NCIgeT0iMjg1Ij5iNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNTguNjY3IDMzMmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg1OC42NjdDNTIuODMzIDM2NyA0NyAzNTguMjUgNDcgMzQ5LjVTNTIuODMzIDMzMiA1OC42NjcgMzMyIi8+CiAgPHRleHQgeD0iNTUiIHk9IjM1NSI+CiAgICA8dHNwYW4geD0iNzQuNDQ1IiB5PSIzNTUiPmE1PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTEuNzMgMzMwLjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00xOTcgMjk1bDcuMjcgMy42MjNMMjAxIDMwNiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDM0OS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyAzMzJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjA4IiB5PSIzNTUiPgogICAgPHRzcGFuIHg9IjIyNi41OTQiIHk9IjM1NSI+YjU8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 29">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a1.getB().add(b3);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a1.getB().contains(b1)) &amp;&amp;
(a1.getB().contains(b2)) &amp;&amp;
(a1.getB().contains(b3))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iNDMwIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgNTJoNDYuNjY2QzExMS4xNjcgNTIgMTE3IDYwLjc1IDExNyA2OS41UzExMS4xNjcgODcgMTA1LjMzMyA4N0g1OC42NjdDNTIuODMzIDg3IDQ3IDc4LjI1IDQ3IDY5LjVTNTIuODMzIDUyIDU4LjY2NyA1MiIvPgogIDx0ZXh0IHg9IjU1IiB5PSI3NSI+CiAgICA8dHNwYW4geD0iNzQuNDQ1IiB5PSI3NSI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMyAxMTJsMS42NTcgNy41MjJMMTk3IDEyMm03LjY1Ny0yLjQ3OGwtNzguOTcyLTQ1LjA2Ni00LjM0Mi0yLjQ3OCIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE5LjUyNyA3My44MTRsNzQuNDE5IDEyNy4wNTcgMi41MjcgNC4zMTVNMTk4IDE5N2wtMS41MjcgOC4xODZMMTg5IDIwMyIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDcwaDcybS02LTZsNiA2LTYgNiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyA1Mmg0Ni42NjZDMjYzLjE2NyA1MiAyNjkgNjAuNzUgMjY5IDY5LjVTMjYzLjE2NyA4NyAyNTcuMzMzIDg3aC00Ni42NjZDMjA0LjgzMyA4NyAxOTkgNzguMjUgMTk5IDY5LjVTMjA0LjgzMyA1MiAyMTAuNjY3IDUyIi8+CiAgPHRleHQgeD0iMjA4IiB5PSI3NSI+CiAgICA8dHNwYW4geD0iMjI2LjU5NCIgeT0iNzUiPmIxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgMTIyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDU4LjY2N0M1Mi44MzMgMTU3IDQ3IDE0OC4yNSA0NyAxMzkuNVM1Mi44MzMgMTIyIDU4LjY2NyAxMjIiLz4KICA8dGV4dCB4PSI1NSIgeT0iMTQ1Ij4KICAgIDx0c3BhbiB4PSI3NC40NDUiIHk9IjE0NSI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMS43MyAxMjAuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTE5NyA4NWw3LjI3IDMuNjIzTDIwMSA5NiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDEzOS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjAxIDE4M2wzLjI3IDcuMzc3TDE5NyAxOTRtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxMC42NjcgMTIyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIwOCIgeT0iMTQ1Ij4KICAgIDx0c3BhbiB4PSIyMjYuNTk0IiB5PSIxNDUiPmIyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgMTkyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDU4LjY2N0M1Mi44MzMgMjI3IDQ3IDIxOC4yNSA0NyAyMDkuNVM1Mi44MzMgMTkyIDU4LjY2NyAxOTIiLz4KICA8dGV4dCB4PSI1NSIgeT0iMjE1Ij4KICAgIDx0c3BhbiB4PSI3NC40NDUiIHk9IjIxNSI+YTM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMS43MyAxOTAuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTE5NyAxNTVsNy4yNyAzLjYyM0wyMDEgMTY2Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMjIgMjA5LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMDEgMjUzbDMuMjcgNy4zNzdMMTk3IDI2NG03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyAxOTJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjA4IiB5PSIyMTUiPgogICAgPHRzcGFuIHg9IjIyNi41OTQiIHk9IjIxNSI+YjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU4LjY2NyAyNjJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVINTguNjY3QzUyLjgzMyAyOTcgNDcgMjg4LjI1IDQ3IDI3OS41UzUyLjgzMyAyNjIgNTguNjY3IDI2MiIvPgogIDx0ZXh0IHg9IjU1IiB5PSIyODUiPgogICAgPHRzcGFuIHg9Ijc0LjQ0NSIgeT0iMjg1Ij5hNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTExLjczIDI2MC4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMTk3IDIyNWw3LjI3IDMuNjIzTDIwMSAyMzYiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyMiAyNzkuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMSAzMjNsMy4yNyA3LjM3N0wxOTcgMzM0bTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMTAuNjY3IDI2Mmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMDgiIHk9IjI4NSI+CiAgICA8dHNwYW4geD0iMjI2LjU5NCIgeT0iMjg1Ij5iNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNTguNjY3IDMzMmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg1OC42NjdDNTIuODMzIDM2NyA0NyAzNTguMjUgNDcgMzQ5LjVTNTIuODMzIDMzMiA1OC42NjcgMzMyIi8+CiAgPHRleHQgeD0iNTUiIHk9IjM1NSI+CiAgICA8dHNwYW4geD0iNzQuNDQ1IiB5PSIzNTUiPmE1PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTEuNzMgMzMwLjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00xOTcgMjk1bDcuMjcgMy42MjNMMjAxIDMwNiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDM0OS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyAzMzJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjA4IiB5PSIzNTUiPgogICAgPHRzcGFuIHg9IjIyNi41OTQiIHk9IjM1NSI+YjU8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 30">
</div>
</div>
<div class="paragraph">
<p>Change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">a2.getB().remove(b2);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">(a2.getB().contains(b1)) &amp;&amp;
(a2.getB().contains(b3))</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iNDMwIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwIiB5PSIyMCIgZm9udC1zdHlsZT0iaXRhbGljIj4KICAgIDx0c3Bhbj5BZnRlciBDaGFuZ2U6PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgNTJoNDYuNjY2QzExMS4xNjcgNTIgMTE3IDYwLjc1IDExNyA2OS41UzExMS4xNjcgODcgMTA1LjMzMyA4N0g1OC42NjdDNTIuODMzIDg3IDQ3IDc4LjI1IDQ3IDY5LjVTNTIuODMzIDUyIDU4LjY2NyA1MiIvPgogIDx0ZXh0IHg9IjU1IiB5PSI3NSI+CiAgICA8dHNwYW4geD0iNzQuNDQ1IiB5PSI3NSI+YTE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMyAxMTJsMS42NTcgNy41MjJMMTk3IDEyMm03LjY1Ny0yLjQ3OGwtNzguOTcyLTQ1LjA2Ni00LjM0Mi0yLjQ3OCIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDcwaDcybS02LTZsNiA2LTYgNiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyA1Mmg0Ni42NjZDMjYzLjE2NyA1MiAyNjkgNjAuNzUgMjY5IDY5LjVTMjYzLjE2NyA4NyAyNTcuMzMzIDg3aC00Ni42NjZDMjA0LjgzMyA4NyAxOTkgNzguMjUgMTk5IDY5LjVTMjA0LjgzMyA1MiAyMTAuNjY3IDUyIi8+CiAgPHRleHQgeD0iMjA4IiB5PSI3NSI+CiAgICA8dHNwYW4geD0iMjI2LjU5NCIgeT0iNzUiPmIxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgMTIyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDU4LjY2N0M1Mi44MzMgMTU3IDQ3IDE0OC4yNSA0NyAxMzkuNVM1Mi44MzMgMTIyIDU4LjY2NyAxMjIiLz4KICA8dGV4dCB4PSI1NSIgeT0iMTQ1Ij4KICAgIDx0c3BhbiB4PSI3NC40NDUiIHk9IjE0NSI+YTI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMS43MyAxMjAuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTE5NyA4NWw3LjI3IDMuNjIzTDIwMSA5NiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjAxIDE4M2wzLjI3IDcuMzc3TDE5NyAxOTRtNy4yNy0zLjYyM2wtODcuODEtMzAuMTMxLTQuNzMtMS42MjMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIxMC42NjcgMTIyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41aC00Ni42NjZjLTUuODM0IDAtMTEuNjY3LTguNzUtMTEuNjY3LTE3LjVzNS44MzMtMTcuNSAxMS42NjctMTcuNSIvPgogIDx0ZXh0IHg9IjIwOCIgeT0iMTQ1Ij4KICAgIDx0c3BhbiB4PSIyMjYuNTk0IiB5PSIxNDUiPmIyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01OC42NjcgMTkyaDQ2LjY2NmM1LjgzNCAwIDExLjY2NyA4Ljc1IDExLjY2NyAxNy41cy01LjgzMyAxNy41LTExLjY2NyAxNy41SDU4LjY2N0M1Mi44MzMgMjI3IDQ3IDIxOC4yNSA0NyAyMDkuNVM1Mi44MzMgMTkyIDU4LjY2NyAxOTIiLz4KICA8dGV4dCB4PSI1NSIgeT0iMjE1Ij4KICAgIDx0c3BhbiB4PSI3NC40NDUiIHk9IjIxNSI+YTM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExMS43MyAxOTAuMzc3bDg3LjgxLTMwLjEzMSA0LjczLTEuNjIzTTE5NyAxNTVsNy4yNyAzLjYyM0wyMDEgMTY2Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMjIgMjA5LjVoNzJtLTYtNS41bDYgNS41LTYgNS41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMDEgMjUzbDMuMjcgNy4zNzdMMTk3IDI2NG03LjI3LTMuNjIzbC04Ny44MS0zMC4xMzEtNC43My0xLjYyMyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyAxOTJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjA4IiB5PSIyMTUiPgogICAgPHRzcGFuIHg9IjIyNi41OTQiIHk9IjIxNSI+YjM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU4LjY2NyAyNjJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVINTguNjY3QzUyLjgzMyAyOTcgNDcgMjg4LjI1IDQ3IDI3OS41UzUyLjgzMyAyNjIgNTguNjY3IDI2MiIvPgogIDx0ZXh0IHg9IjU1IiB5PSIyODUiPgogICAgPHRzcGFuIHg9Ijc0LjQ0NSIgeT0iMjg1Ij5hNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTExLjczIDI2MC4zNzdsODcuODEtMzAuMTMxIDQuNzMtMS42MjNNMTk3IDIyNWw3LjI3IDMuNjIzTDIwMSAyMzYiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyMiAyNzkuNWg3Mm0tNi01LjVsNiA1LjUtNiA1LjUiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIwMSAzMjNsMy4yNyA3LjM3N0wxOTcgMzM0bTcuMjctMy42MjNsLTg3LjgxLTMwLjEzMS00LjczLTEuNjIzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMTAuNjY3IDI2Mmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNWgtNDYuNjY2Yy01LjgzNCAwLTExLjY2Ny04Ljc1LTExLjY2Ny0xNy41czUuODMzLTE3LjUgMTEuNjY3LTE3LjUiLz4KICA8dGV4dCB4PSIyMDgiIHk9IjI4NSI+CiAgICA8dHNwYW4geD0iMjI2LjU5NCIgeT0iMjg1Ij5iNDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNTguNjY3IDMzMmg0Ni42NjZjNS44MzQgMCAxMS42NjcgOC43NSAxMS42NjcgMTcuNXMtNS44MzMgMTcuNS0xMS42NjcgMTcuNUg1OC42NjdDNTIuODMzIDM2NyA0NyAzNTguMjUgNDcgMzQ5LjVTNTIuODMzIDMzMiA1OC42NjcgMzMyIi8+CiAgPHRleHQgeD0iNTUiIHk9IjM1NSI+CiAgICA8dHNwYW4geD0iNzQuNDQ1IiB5PSIzNTUiPmE1PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTEuNzMgMzMwLjM3N2w4Ny44MS0zMC4xMzEgNC43My0xLjYyM00xOTcgMjk1bDcuMjcgMy42MjNMMjAxIDMwNiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTIyIDM0OS41aDcybS02LTUuNWw2IDUuNS02IDUuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjEwLjY2NyAzMzJoNDYuNjY2YzUuODM0IDAgMTEuNjY3IDguNzUgMTEuNjY3IDE3LjVzLTUuODMzIDE3LjUtMTEuNjY3IDE3LjVoLTQ2LjY2NmMtNS44MzQgMC0xMS42NjctOC43NS0xMS42NjctMTcuNXM1LjgzMy0xNy41IDExLjY2Ny0xNy41Ii8+CiAgPHRleHQgeD0iMjA4IiB5PSIzNTUiPgogICAgPHRzcGFuIHg9IjIyNi41OTQiIHk9IjM1NSI+YjU8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 31">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="collections-managed-by-the-container"><a class="anchor" href="#collections-managed-by-the-container"></a>4.3.8. Collections Managed by the Container</h4>
<div class="paragraph">
<p>The collections that are used in the representation of one-to-many and many-to-many container-managed relationships are implemented and managed by the container.
The following semantics apply to these collections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is the responsibility of the container to preserve the runtime identity of the collection objects used in container-managed relationships.</p>
</li>
<li>
<p>There is no constructor available to the Bean Provider for the container-managed collections.</p>
</li>
<li>
<p>If there are no related values for a given container-managed relationship, the get accessor method for that cmr-field returns an empty collection (and not <code>null</code>).</p>
</li>
<li>
<p>It is the responsibility of the container to raise the <code>java.lang.IllegalArgumentException</code> if the Bean Provider attempts to assign <code>null</code> as the value of a collection-valued cmr-field by means of the set accessor method.</p>
</li>
<li>
<p>It is the responsibility of the container to ensure that when the <code>java.util.Collection</code> API is used to manipulate the contents of container-managed relationship fields, the argument to any Collection method defined with a single Object parameter must be of the element type of the collection defined for the target cmr-field.
The argument for any collection-valued parameter must be a <code>java.util.Collection</code> (or <code>java.util.Set</code>), all of whose elements are of the element type of the collection defined for the target cmr-field.
If an argument is not of the correct type for the relationship, the container must throw the <code>java.lang.IllegalArgumentException</code>.</p>
</li>
<li>
<p>It is the responsibility of the container to throw the <code>java.lang.IllegalStateException</code> if an attempt is made to modify a container-managed collection corresponding to a multivalued cmr-field using the <code>java.util.Collection</code> API outside of the transaction context in which the collection object was initially materialized.</p>
</li>
<li>
<p>It is the responsibility of the container to throw the <code>java.lang.IllegalStateException</code> if an attempt is made to use a <code>java.util.Iterator</code> for a container-managed collection in a transaction context other than that in which the iterator was obtained.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="non-persistent-state"><a class="anchor" href="#non-persistent-state"></a>4.3.9. Non-persistent State</h4>
<div class="paragraph">
<p>The Bean Provider may use instance variables in the entity bean instance to maintain non-persistent state, e.g. a Jakarta Messaging connection.</p>
</div>
<div class="paragraph">
<p>The Bean Provider can use instance variables to store values that depend on the persistent state of the entity bean instance, although this use is not encouraged. The Bean Provider should use the <code>ejbLoad</code> method to resynchronize the values of any instance variables that depend on the entity bean’s persistent state.
In general, any non-persistent state that depends on the persistent state of an entity bean should be recomputed during the <code>ejbLoad</code> method.</p>
</div>
<div class="paragraph">
<p>The Bean Provider should exercise care in passing the contents of instance variables as the arguments or results of method invocations when local interfaces are used.
In general, the Bean Provider should avoid passing state that is maintained in instance variables as the argument or result of a local method invocation.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-relationship-between-the-internal-view-and-the-client-view"><a class="anchor" href="#the-relationship-between-the-internal-view-and-the-client-view"></a>4.3.10. The Relationship Between the Internal View and the Client View</h4>
<div class="paragraph">
<p>In designing the entity bean, the Bean Provider should keep in mind the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The classes that are exposed by the remote interface are decoupled from the persistence layer.
Instances of these classes are passed to and from the client by value.</p>
</li>
<li>
<p>The classes that are exposed by the local interface of the bean may be tightly coupled to the bean’s internal state.
Instances of these classes are passed to and from the client by reference and may therefore be modified by the client.
The Bean Provider should exercise care in determining what is exposed through the local interface of the bean.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="restrictions-on-remote-interfaces"><a class="anchor" href="#restrictions-on-remote-interfaces"></a>4.3.10.1. Restrictions on Remote Interfaces</h5>
<div class="paragraph">
<p>The following restrictions apply to the remote interface of an entity bean with container-managed persistence.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Bean Provider must not expose the get and set methods for container-managed relationship fields or the persistent <code>Collection</code> classes that are used in container-managed relationships through the remote interface of the bean.</p>
</li>
<li>
<p>The Bean Provider must not expose local interface types or local home interface types through the remote interface or remote home interface of the bean.</p>
</li>
<li>
<p>The Bean Provider must not expose the container-managed collection classes that are used for relationships through the remote interface of the bean.</p>
</li>
<li>
<p>The Bean Provider must not expose timers or timer handles through the remote interface of the bean.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dependent value classes can be exposed in the remote interface or remote home interface and can be included in the client ejb-jar file.</p>
</div>
<div class="paragraph">
<p>The Bean Provider is free to expose get and set methods that correspond to cmp-fields of the entity bean through the bean’s remote interface.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="mapping-data-to-a-persistent-store"><a class="anchor" href="#mapping-data-to-a-persistent-store"></a>4.3.11. Mapping Data to a Persistent Store</h4>
<div class="paragraph">
<p>This specification does not prescribe how the abstract persistence schema of an entity bean should be mapped to a relational (or other) schema of a persistent store, or define how such a mapping is described.</p>
</div>
</div>
<div class="sect3">
<h4 id="example"><a class="anchor" href="#example"></a>4.3.12. Example</h4>
<div class="paragraph">
<p><a href="#a861">Relationship Example</a> illustrates an <code>Order</code> entity bean with relationships to line items and customers, which are other entity beans within the same local scope.
<code>Product</code> is indirectly related to <code>Order</code> by means of the
relationship between <code>LineItem</code> and <code>Product</code>.
Sample code for the <code>OrderBean</code> class follows the figure.</p>
</div>
<div id="a861" class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0ODkiIGhlaWdodD0iMzM5IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTAgMzJoMTUwdjQwSDEweiIvPgogIDx0ZXh0IHg9IjEwIiB5PSIzMiI+CiAgICA8dHNwYW4gZHg9IjQwIiBkeT0iMTYiPiZsdDthYnN0cmFjdCZndDs8L3RzcGFuPiA8dHNwYW4geD0iMTAiIGR4PSI0MCIgZHk9IjE2Ij5PcmRlckJlYW48L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEwIDcyaDE1MHYxNzFIMTB6Ii8+CiAgPHRleHQgeD0iMTAiIHk9IjcyIj4KICAgIDx0c3BhbiB4PSIxMCIgZHg9IjEzIiBkeT0iMTgiPmdldE9yZGVyU3RhdHVzPC90c3Bhbj4gPHRzcGFuIHg9IjEwIiBkeD0iMTMiIGR5PSIxOCI+c2V0T3JkZXJTdGF0dXM8L3RzcGFuPiA8dHNwYW4geD0iMTAiIGR4PSIxMyIgZHk9IjE4Ij5nZXRMaW5lU3RhdHVzPC90c3Bhbj4gPHRzcGFuIHg9IjEwIiBkeD0iMTMiIGR5PSIxOCI+c2V0TGluZVN0YXR1czwvdHNwYW4+IDx0c3BhbiB4PSIxMCIgZHg9IjEzIiBkeT0iMTgiPmdldENyZWRpdEFwcHJvdmVkPC90c3Bhbj4gPHRzcGFuIHg9IjEwIiBkeD0iMTMiIGR5PSIxOCI+c2V0Q3JlZGl0QXBwcm92ZWQ8L3RzcGFuPiA8dHNwYW4geD0iMTAiIGR4PSIxMyIgZHk9IjE4Ij5nZXRDdXN0b21lcjwvdHNwYW4+IDx0c3BhbiB4PSIxMCIgZHg9IjEzIiBkeT0iMTgiPnNldEN1c3RvbWVyPC90c3Bhbj4gPHRzcGFuIHg9IjEwIiBkeD0iMTMiIGR5PSIxOCI+Li4uPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNTIuNCAyNi40bDYuNzAzIDQuNjA4TDM1NC40IDM3LjRtNC43MDMtNi4zOTJMMTY5Ljc5NSA2OS45ODNsLTQuODk4IDEuMDA5TTE3MS40IDc1LjRsLTYuNTAzLTQuNDA4TDE2OS40IDY0LjQiLz4KICA8dGV4dCB4PSIxNjkiIHk9IjYyIj4KICAgIDx0c3Bhbj4qPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMjE0IiB5PSIzNSI+CiAgICA8dHNwYW4+T3JkZXItQ3VzdG9tZXI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIzNDQiIHk9IjUyIj4KICAgIDx0c3Bhbj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNjQgMTBoMTAwdjQwSDM2NHoiLz4KICA8dGV4dCB4PSIzNjQiIHk9IjEwIj4KICAgIDx0c3BhbiBkeD0iMjAiIGR5PSIyNiI+Q3VzdG9tZXI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE3MC4wNzEgMjQ2LjUzNmwzLjUzNiAxMC42MDZMMTYzIDI1My42MDcgMTU5LjQ2NCAyNDN6Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNzkuNzU3IDI2Ny4yM2wtMS45MS03LjQzOCA3LjkxLTEuNTYybS03LjkxIDEuNTYybDY4LjY3MyA0Mi45MSA0LjI0IDIuNjQ5bS0yLjAwMy04LjEyMWwyLjAwMyA4LjEyMS04LjAwMyAxLjg3OSIvPgogIDx0ZXh0IHg9IjE4OSIgeT0iMjUzIj4KICAgIDx0c3Bhbj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMTIwIiB5PSIzMDEiPgogICAgPHRzcGFuPk9yZGVyLUxpbmVJdGVtPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMjI5IiB5PSIzMTgiPgogICAgPHRzcGFuPio8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI1NSAyODhoMTAwdjQwSDI1NXoiLz4KICA8dGV4dCB4PSIyNTUiIHk9IjI4OCI+CiAgICA8dHNwYW4gZHg9IjIwIiBkeT0iMjYiPkxpbmVJdGVtPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMDkgMjg1bDk4LjQ5LTEwMC4yOTcgMy41MDQtMy41NjhtLTcuODk3LjA5N2w3Ljg5Ny0uMDk3LjEwMyA4LjA5NyIvPgogIDx0ZXh0IHg9IjMyNyIgeT0iMjg1Ij4KICAgIDx0c3Bhbj4qPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMzY0IiB5PSIyNDgiPgogICAgPHRzcGFuPlByb2R1Y3QtTGluZUl0ZW08L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIzNzgiIHk9IjE5NSI+CiAgICA8dHNwYW4+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzY0IDEzN2gxMDB2NDBIMzY0eiIvPgogIDx0ZXh0IHg9IjM2NCIgeT0iMTM3Ij4KICAgIDx0c3BhbiBkeD0iMjYiIGR5PSIyNiI+UHJvZHVjdDwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 32">
</div>
<div class="title">Figure 4. Relationship Example</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.acme.order</span>;

<span class="comment">// This example shows the implementation of OrderBean, the</span>
<span class="comment">// entity bean class for the OrderEJB entity bean. OrderEJB has</span>
<span class="comment">// container-managed relationships with the entity beans</span>
<span class="comment">// CustomerEJB and LineItemEJB.</span>
<span class="comment">// This example illustrates the use of local interfaces.</span>

<span class="keyword">import</span> <span class="include">java.util.Collection</span>;
<span class="keyword">import</span> <span class="include">java.util.Vector</span>;
<span class="keyword">import</span> <span class="include">java.util.Date</span>;
<span class="keyword">import</span> <span class="include">javax.naming</span>.*;

<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">OrderBean</span> <span class="directive">implements</span> jakarta.ejb.EntityBean {

    <span class="directive">private</span> jakarta.ejb.EntityContext context;

    <span class="comment">// define status codes for processing</span>

    <span class="directive">static</span> <span class="directive">final</span> <span class="type">int</span> BACKORDER = <span class="integer">1</span>;
    <span class="directive">static</span> <span class="directive">final</span> <span class="type">int</span> SHIPPED = <span class="integer">2</span>;
    <span class="directive">static</span> <span class="directive">final</span> <span class="type">int</span> UNSHIPPED = <span class="integer">3</span>;

    <span class="comment">// get and set methods for the cmp fields</span>

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">int</span> getOrderStatus();
    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> setOrderStatus(<span class="type">int</span> orderStatus);

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">boolean</span> getCreditApproved();
    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> setCreditApproved(<span class="type">boolean</span> creditapproved);

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="predefined-type">Date</span> getOrderDate();
    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> setOrderDate(<span class="predefined-type">Date</span> orderDate);

    <span class="comment">// get and set methods for the relationship fields</span>

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="predefined-type">Collection</span> getLineItems();
    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> setLineItems(<span class="predefined-type">Collection</span> lineitems);

    <span class="directive">public</span> <span class="directive">abstract</span> Customer getCustomer();
    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> setCustomer(Customer customer);

    <span class="comment">// business methods.</span>

    <span class="comment">// addLineItem:</span>
    <span class="comment">// This method is used to add a line item.</span>
    <span class="comment">// It creates the lineitem object and adds it to the</span>
    <span class="comment">// persistent managed relationship.</span>

    <span class="directive">public</span> <span class="type">void</span> addLineItem(Product product,
                 <span class="type">int</span> quantity,
                 Address address)
     <span class="directive">throws</span> InsufficientInfoException
    {
        <span class="comment">// create a new line item</span>
        <span class="keyword">if</span> (validAddress(address)) {
            <span class="comment">// Address is a legacy class. It is a dependent value</span>
            <span class="comment">// class that is available both in the client and in</span>
            <span class="comment">// the entity bean, and is serializable.</span>
            <span class="comment">// We will use the address as the value of a cmp field</span>
            <span class="comment">// of lineItem.</span>
            <span class="keyword">try</span> {
                <span class="predefined-type">Context</span> ic = <span class="keyword">new</span> <span class="predefined-type">InitialContext</span>();
                LineItemLocalHome litemLocalHome =
                    (LineItemLocalHome)ic.lookup(<span class="string"><span class="delimiter">&quot;</span><span class="content">LineItemEJB</span><span class="delimiter">&quot;</span></span>);
                LineItem litem = litemLocalHome.create();

                litem.setProduct(product);
                litem.setQuantity(quantity);
                litem.setTax(calculateTax(product.getPrice(),
                                          quantity,
                                          address));
                litem.setStatus(UNSHIPPED);
                <span class="comment">// set the address for the line item to be shipped</span>
                litem.setAddress(address);
                <span class="comment">// The lineItem entity bean uses a dependent value</span>
                <span class="comment">// class to represent the dates for the order status.</span>
                <span class="comment">// This class holds shipment date, expected shipment</span>
                <span class="comment">// date, credit approval date, and inventory</span>
                <span class="comment">// dates which are internal to the order fullfillment</span>
                <span class="comment">// process. Not all this information will be available</span>
                <span class="comment">// to the client.</span>
                Dates dates = <span class="keyword">new</span> Dates();
                litem.setDates(dates);
                getLineItems().add(litem);
            } <span class="keyword">catch</span> (<span class="exception">Exception</span> someexception) {}
        } <span class="keyword">else</span> {
            <span class="keyword">throw</span> <span class="keyword">new</span> InsufficientInfoException();
        }
    }

    <span class="comment">// getOrderLineItems:</span>
    <span class="comment">// This method makes a view of the lineitems that are in this</span>
    <span class="comment">// order available in the client. It makes only the relevant</span>
    <span class="comment">// information visible to the client and hides the internal</span>
    <span class="comment">// details of the representation of the lineitem</span>
    <span class="directive">public</span> <span class="predefined-type">Collection</span> getOrderLineItems() {
        <span class="predefined-type">Vector</span> clientlineitems = <span class="keyword">new</span> <span class="predefined-type">Vector</span>();
        <span class="predefined-type">Collection</span> lineitems = getLineItems();
        java.util.Iterator iterator = lineitems.iterator();
        <span class="comment">// ClientLineItem is a value class that is used in</span>
        <span class="comment">// the client view.</span>
        <span class="comment">// The entity Bean Provider abstracts from the persistent</span>
        <span class="comment">// representation of the line item to construct the client</span>
        <span class="comment">// view.</span>
        ClientLineItem clitem;
        <span class="keyword">while</span> (iterator.hasNext()) {
            LineItem litem = (LineItem)iterator.next();
            clitem = <span class="keyword">new</span> ClientLineItem();
            <span class="comment">// only the name of the product is available in the</span>
            <span class="comment">// client view</span>
            clitem.setProductName(litem.getProduct().getName());
            clitem.setQuantity(litem.getQuantity());
            <span class="comment">// the client view gets a specific descriptive message</span>
            <span class="comment">// depending on the line item status.</span>
            clitem.setCurrentStatus(
            statusCodeToString(litem.getStatus()));
            <span class="comment">// address is not copied to the client view.</span>
            <span class="comment">// as this class includes other information with</span>
            <span class="comment">// respect to the order handing that should not be</span>
            <span class="comment">// available to the client. Only the relevant info</span>
            <span class="comment">// is copied.</span>
            <span class="type">int</span> lineitemStatus = litem.getStatus();
            <span class="keyword">if</span> (lineitemStatus == BACKORDER) {
                clitem.setShipDate(
                    litem.getDates().getExpectedShipDate());
            } <span class="keyword">else</span> <span class="keyword">if</span> (lineitemStatus == SHIPPED) {
                clitem.setShipDate(
                    litem.getDates().getShippedDate());
            }
            <span class="comment">//add the new line item</span>
            clientlineitems.add(clitem);
        }
        <span class="comment">// return the value objects to the client</span>
        <span class="keyword">return</span> clientlineitems;
    }
    <span class="comment">// other methods internal to the entity bean class</span>
    ...
    <span class="comment">// other jakarta.ejb.EntityBean methods</span>
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a1013"><a class="anchor" href="#a1013"></a>4.3.13. The Bean Provider’s View of the Deployment Descriptor</h4>
<div class="paragraph">
<p>The persistent fields (cmp-fields) and relationships (cmr-fields) of an entity bean must be declared in the deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The deployment descriptor provides the following information about the abstract persistence schemas of entity beans and their container-managed relationships:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <code>ejb-name</code> element for each entity bean.
The <code>ejb-name</code> must be a valid Java identifier and must be unique within the <code>ejb-name</code> elements of the ejb-jar file.</p>
</li>
<li>
<p>An <code>abstract-schema-name</code> element for each
entity bean.
The <code>abstract-schema-name</code> must be a valid Java identifier
and must be unique within the <code>abstract-schema-name</code> elements of the
ejb-jar file.
The <code>abstract-schema-name</code> element is used in the specification of Enterprise Beans QL queries.</p>
</li>
<li>
<p>A set of <code>ejb-relation</code> elements, each of which contains a pair of <code>ejb-relationship-role</code> elements to describe the two roles in the relationship.
<sup class="footnote" id="_footnote_a3369">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></p>
</li>
<li>
<p>Each <code>ejb-relationship-role</code> element describes a relationship role: its name, its multiplicity within a relation, and its navigability.
It specifies the name of the <code>cmr-field</code> that is used from the perspective of the relationship participant.
The <code>cmr-field-type</code> element must be specified if the type of the cmr-field
is <code>java.util.Collection</code> or <code>java.util.Set</code>.
Each relationship role refers to an entity bean by means of an ejb-name element contained in the <code>relationship-role-source</code> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows a deployment descriptor segment that defines the abstract persistence schema for a set of related entity beans.
The deployment descriptor elements for container-managed persistence and relationships are described further in <a href="#a3273">Deployment Descriptor</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ejb-jar&gt;</span>
    ...
    <span class="tag">&lt;enterprise-beans&gt;</span>
    ...
    <span class="tag">&lt;/enterprise-beans&gt;</span>
    <span class="tag">&lt;relationships&gt;</span>
        <span class="comment">&lt;!--
        ONE-TO-MANY: Order LineItem
        --&gt;</span>
        <span class="tag">&lt;ejb-relation&gt;</span>
            <span class="tag">&lt;ejb-relation-name&gt;</span>Order-LineItem<span class="tag">&lt;/ejb-relation-name&gt;</span>
            <span class="tag">&lt;ejb-relationship-role&gt;</span>
                <span class="tag">&lt;ejb-relationship-role-name&gt;</span>
                    order-has-lineitems
                <span class="tag">&lt;/ejb-relationship-role-name&gt;</span>
                <span class="tag">&lt;multiplicity&gt;</span>One<span class="tag">&lt;/multiplicity&gt;</span>
                <span class="tag">&lt;relationship-role-source&gt;</span>
                    <span class="tag">&lt;ejb-name&gt;</span>OrderEJB<span class="tag">&lt;/ejb-name&gt;</span>
                <span class="tag">&lt;/relationship-role-source&gt;</span>
                <span class="tag">&lt;cmr-field&gt;</span>
                    <span class="tag">&lt;cmr-field-name&gt;</span>lineItems<span class="tag">&lt;/cmr-field-name&gt;</span>
                    <span class="tag">&lt;cmr-field-type&gt;</span>java.util.Collection
                    <span class="tag">&lt;/cmr-field-type&gt;</span>
                <span class="tag">&lt;/cmr-field&gt;</span>
            <span class="tag">&lt;/ejb-relationship-role&gt;</span>
            <span class="tag">&lt;ejb-relationship-role&gt;</span>
                <span class="tag">&lt;ejb-relationship-role-name&gt;</span>
                    lineitem-belongsto-order
                <span class="tag">&lt;/ejb-relationship-role-name&gt;</span>
                <span class="tag">&lt;multiplicity&gt;</span>Many<span class="tag">&lt;/multiplicity&gt;</span>
                <span class="tag">&lt;cascade-delete</span><span class="tag">/&gt;</span>
                <span class="tag">&lt;relationship-role-source&gt;</span>
                    <span class="tag">&lt;ejb-name&gt;</span>LineItemEJB<span class="tag">&lt;/ejb-name&gt;</span>
                <span class="tag">&lt;/relationship-role-source&gt;</span>
                <span class="tag">&lt;cmr-field&gt;</span>
                    <span class="tag">&lt;cmr-field-name&gt;</span>order<span class="tag">&lt;/cmr-field-name&gt;</span>
                <span class="tag">&lt;/cmr-field&gt;</span>
            <span class="tag">&lt;/ejb-relationship-role&gt;</span>
        <span class="tag">&lt;/ejb-relation&gt;</span>
        <span class="comment">&lt;!--
        ONE-TO-MANY unidirectional relationship:
        Product is not aware of its relationship with LineItem
        --&gt;</span>
        <span class="tag">&lt;ejb-relation&gt;</span>
            <span class="tag">&lt;ejb-relation-name&gt;</span>Product-LineItem<span class="tag">&lt;/ejb-relation-name&gt;</span>
            <span class="tag">&lt;ejb-relationship-role&gt;</span>
                <span class="tag">&lt;ejb-relationship-role-name&gt;</span>
                    product-has-lineitems
                <span class="tag">&lt;/ejb-relationship-role-name&gt;</span>
                <span class="tag">&lt;multiplicity&gt;</span>One<span class="tag">&lt;/multiplicity&gt;</span>
                <span class="tag">&lt;relationship-role-source&gt;</span>
                    <span class="tag">&lt;ejb-name&gt;</span>ProductEJB<span class="tag">&lt;/ejb-name&gt;</span>
                <span class="tag">&lt;/relationship-role-source&gt;</span>
                <span class="comment">&lt;!-- since Product does not know about LineItem
                there is no cmr field in Product for accessing
                Lineitem
                --&gt;</span>
            <span class="tag">&lt;/ejb-relationship-role&gt;</span>
            <span class="tag">&lt;ejb-relationship-role&gt;</span>
                <span class="tag">&lt;ejb-relationship-role-name&gt;</span>
                    lineitem-for-product
                <span class="tag">&lt;/ejb-relationship-role-name&gt;</span>
                <span class="tag">&lt;multiplicity&gt;</span>Many<span class="tag">&lt;/multiplicity&gt;</span>
                <span class="tag">&lt;relationship-role-source&gt;</span>
                    <span class="tag">&lt;ejb-name&gt;</span>LineItemEJB<span class="tag">&lt;/ejb-name&gt;</span>
                <span class="tag">&lt;/relationship-role-source&gt;</span>
                <span class="tag">&lt;cmr-field&gt;</span>
                    <span class="tag">&lt;cmr-field-name&gt;</span>product<span class="tag">&lt;/cmr-field-name&gt;</span>
                <span class="tag">&lt;/cmr-field&gt;</span>
            <span class="tag">&lt;/ejb-relationship-role&gt;</span>
        <span class="tag">&lt;/ejb-relation&gt;</span>
        <span class="comment">&lt;!--
        ONE-TO-MANY: Order Customer:
        --&gt;</span>
        <span class="tag">&lt;ejb-relation&gt;</span>
            <span class="tag">&lt;ejb-relation-name&gt;</span>Order-Customer<span class="tag">&lt;/ejb-relation-name&gt;</span>
            <span class="tag">&lt;ejb-relationship-role&gt;</span>
                <span class="tag">&lt;ejb-relationship-role-name&gt;</span>
                    customer-has-orders
                <span class="tag">&lt;/ejb-relationship-role-name&gt;</span>
                <span class="tag">&lt;multiplicity&gt;</span>One<span class="tag">&lt;/multiplicity&gt;</span>
                <span class="tag">&lt;relationship-role-source&gt;</span>
                    <span class="tag">&lt;ejb-name&gt;</span>CustomerEJB<span class="tag">&lt;/ejb-name&gt;</span>
                <span class="tag">&lt;/relationship-role-source&gt;</span>
                <span class="tag">&lt;cmr-field&gt;</span>
                    <span class="tag">&lt;cmr-field-name&gt;</span>orders<span class="tag">&lt;/cmr-field-name&gt;</span>
                    <span class="tag">&lt;cmr-field-type&gt;</span>java.util.Collection
                    <span class="tag">&lt;/cmr-field-type&gt;</span>
                <span class="tag">&lt;/cmr-field&gt;</span>
            <span class="tag">&lt;/ejb-relationship-role&gt;</span>
            <span class="tag">&lt;ejb-relationship-role&gt;</span>
                <span class="tag">&lt;ejb-relationship-role-name&gt;</span>
                    order-belongsto-customer
                <span class="tag">&lt;/ejb-relationship-role-name&gt;</span>
                <span class="tag">&lt;multiplicity&gt;</span>Many<span class="tag">&lt;/multiplicity&gt;</span>
                <span class="tag">&lt;relationship-role-source&gt;</span>
                    <span class="tag">&lt;ejb-name&gt;</span>OrderEJB<span class="tag">&lt;/ejb-name&gt;</span>
                <span class="tag">&lt;/relationship-role-source&gt;</span>
                <span class="tag">&lt;cmr-field&gt;</span>
                    <span class="tag">&lt;cmr-field-name&gt;</span>customer<span class="tag">&lt;/cmr-field-name&gt;</span>
                <span class="tag">&lt;/cmr-field&gt;</span>
            <span class="tag">&lt;/ejb-relationship-role&gt;</span>
        <span class="tag">&lt;/ejb-relation&gt;</span>
    <span class="tag">&lt;/relationships&gt;</span>
    ...
<span class="tag">&lt;/ejb-jar&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-entity-bean-component-contract"><a class="anchor" href="#the-entity-bean-component-contract"></a>4.4. The Entity Bean Component Contract</h3>
<div class="paragraph">
<p>This section specifies the container-managed persistence contract between an entity bean and its container.</p>
</div>
<div class="sect3">
<h4 id="runtime-execution-model-of-entity-beans"><a class="anchor" href="#runtime-execution-model-of-entity-beans"></a>4.4.1. Runtime Execution Model of Entity Beans</h4>
<div class="paragraph">
<p>This subsection describes the runtime model and the classes used in the description of the contract between an entity bean and its container.
<a href="#a1155">Overview of the Entity Bean Runtime Execution Model</a> shows an overview of the runtime model.
The client of an entity bean may be a local client or it may be a remote client.</p>
</div>
<div id="a1155" class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NDIiIGhlaWdodD0iNTUwIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjIuNSAyMjZoNTBjNi4yNSAwIDEyLjUgOC43NSAxMi41IDE3LjVTNzguNzUgMjYxIDcyLjUgMjYxaC01MGMtNi4yNSAwLTEyLjUtOC43NS0xMi41LTE3LjVTMTYuMjUgMjI2IDIyLjUgMjI2Ii8+CiAgPHRleHQgeD0iMTgiIHk9IjI0OSI+CiAgICA8dHNwYW4geD0iMjkuNTQ3IiB5PSIyNDkiPmNsaWVudDwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIzNjIiIGhlaWdodD0iNDY2IiB4PSIzNjkiIHk9IjEwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjQ1LjI1IiByeT0iNDUuMjUiLz4KICA8dGV4dCB4PSI0MjciIHk9IjM4Ij4KICAgIDx0c3BhbiB4PSI0MzguNjk1IiB5PSIzOCI+Y29udGFpbmVyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjMxNSIgaGVpZ2h0PSIxODgiIHg9IjM5MSIgeT0iNTEiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjMuNSIgcnk9IjIzLjUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM4MS44MzMgNjdoODMuMzM0QzQ3NS41ODMgNjcgNDg2IDc1Ljc1IDQ4NiA4NC41UzQ3NS41ODMgMTAyIDQ2NS4xNjcgMTAyaC04My4zMzRDMzcxLjQxNyAxMDIgMzYxIDkzLjI1IDM2MSA4NC41UzM3MS40MTcgNjcgMzgxLjgzMyA2NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzcxLjgzMyA3N2g4My4zMzRDNDY1LjU4MyA3NyA0NzYgODUuNzUgNDc2IDk0LjVTNDY1LjU4MyAxMTIgNDU1LjE2NyAxMTJoLTgzLjMzNEMzNjEuNDE3IDExMiAzNTEgMTAzLjI1IDM1MSA5NC41UzM2MS40MTcgNzcgMzcxLjgzMyA3NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzYxLjgzMyA4N2g4My4zMzRDNDU1LjU4MyA4NyA0NjYgOTUuNzUgNDY2IDEwNC41UzQ1NS41ODMgMTIyIDQ0NS4xNjcgMTIyaC04My4zMzRDMzUxLjQxNyAxMjIgMzQxIDExMy4yNSAzNDEgMTA0LjVTMzUxLjQxNyA4NyAzNjEuODMzIDg3Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03OC41MzYgMjIzLjg5NUwzMjguOTI5IDEwNy43MWw0LjUzNS0yLjEwNE0zMjYgMTAzbDcuNDY0IDIuNjA1TDMzMSAxMTMiLz4KICA8dGV4dCB4PSIzNDkiIHk9IjExMCI+CiAgICA8dHNwYW4geD0iMzY1LjYzMyIgeT0iMTEwIj5FSkJPYmplY3RzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NzAuNjQ0IDEwNi4zNTJsNzAuMDY3IDI3Ljk0NCA0LjY0NSAxLjg1Mk01NDIgMTI5bDMuMzU2IDcuMTQ4TDUzOCAxMzkiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU5MC44MzMgODNoODMuMzM0QzY4NC41ODMgODMgNjk1IDEwMC41IDY5NSAxMThzLTEwLjQxNyAzNS0yMC44MzMgMzVoLTgzLjMzNEM1ODAuNDE3IDE1MyA1NzAgMTM1LjUgNTcwIDExOHMxMC40MTctMzUgMjAuODMzLTM1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01ODAuODMzIDkzaDgzLjMzNEM2NzQuNTgzIDkzIDY4NSAxMTAuNSA2ODUgMTI4cy0xMC40MTcgMzUtMjAuODMzIDM1aC04My4zMzRDNTcwLjQxNyAxNjMgNTYwIDE0NS41IDU2MCAxMjhzMTAuNDE3LTM1IDIwLjgzMy0zNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNTcwLjgzMyAxMDNoODMuMzM0QzY2NC41ODMgMTAzIDY3NSAxMjAuNSA2NzUgMTM4cy0xMC40MTcgMzUtMjAuODMzIDM1aC04My4zMzRDNTYwLjQxNyAxNzMgNTUwIDE1NS41IDU1MCAxMzhzMTAuNDE3LTM1IDIwLjgzMy0zNSIvPgogIDx0ZXh0IHg9IjU1OCIgeT0iMTM1Ij4KICAgIDx0c3BhbiB4PSI1NjMuNDUzIiB5PSIxMzUiPmVudGVycHJpc2UgYmVhbjwvdHNwYW4+IDx0c3BhbiB4PSI1ODMuMDg2IiB5PSIxNTIuNjA5Ij5pbnN0YW5jZXM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTg5Ljc5NiAyNDEuNTg4bDIzOC42MTEtNzAuMjYzIDQuNzk3LTEuNDEzTTMyNiAxNjZsNy4yMDQgMy45MTJMMzI5IDE3NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzU4LjgzMyAxNTFoODMuMzM0YzEwLjQxNiAwIDIwLjgzMyA4Ljc1IDIwLjgzMyAxNy41UzQ1Mi41ODMgMTg2IDQ0Mi4xNjcgMTg2aC04My4zMzRDMzQ4LjQxNyAxODYgMzM4IDE3Ny4yNSAzMzggMTY4LjVzMTAuNDE3LTE3LjUgMjAuODMzLTE3LjUiLz4KICA8dGV4dCB4PSIzNDYiIHk9IjE3NCI+CiAgICA8dHNwYW4geD0iMzY3LjU2MyIgeT0iMTc0Ij5FSkJIb21lPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjcuODIxIDE2Ny4xNzVsNzEuMDM3LTE5LjUyNSA0LjgyLTEuMzI1TTUzNyAxNDJsNi42NzkgNC4zMjVMNTQwIDE1MyIvPgogIDx0ZXh0IHg9IjU2MyIgeT0iMjE5Ij4KICAgIDx0c3BhbiB4PSI1NjUuMzU5IiB5PSIyMTkiPmVudGVycHJpc2UgYmVhbiAxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjMxNCIgaGVpZ2h0PSIxODgiIHg9IjM5MiIgeT0iMjYxIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjIzLjUiIHJ5PSIyMy41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zODEuODMzIDI4MWg4My4zMzRjMTAuNDE2IDAgMjAuODMzIDguNzUgMjAuODMzIDE3LjVTNDc1LjU4MyAzMTYgNDY1LjE2NyAzMTZoLTgzLjMzNEMzNzEuNDE3IDMxNiAzNjEgMzA3LjI1IDM2MSAyOTguNXMxMC40MTctMTcuNSAyMC44MzMtMTcuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzcxLjgzMyAyOTFoODMuMzM0YzEwLjQxNiAwIDIwLjgzMyA4Ljc1IDIwLjgzMyAxNy41UzQ2NS41ODMgMzI2IDQ1NS4xNjcgMzI2aC04My4zMzRDMzYxLjQxNyAzMjYgMzUxIDMxNy4yNSAzNTEgMzA4LjVzMTAuNDE3LTE3LjUgMjAuODMzLTE3LjUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM2MS44MzMgMzAxaDgzLjMzNGMxMC40MTYgMCAyMC44MzMgOC43NSAyMC44MzMgMTcuNVM0NTUuNTgzIDMzNiA0NDUuMTY3IDMzNmgtODMuMzM0QzM1MS40MTcgMzM2IDM0MSAzMjcuMjUgMzQxIDMxOC41czEwLjQxNy0xNy41IDIwLjgzMy0xNy41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04OS43OTYgMjQ0LjQxMmwyMzguNjExIDcwLjI2MyA0Ljc5NyAxLjQxM00zMjkgMzA5bDQuMjA0IDcuMDg4TDMyNiAzMjAiLz4KICA8dGV4dCB4PSIzNDkiIHk9IjMyNCI+CiAgICA8dHNwYW4geD0iMzQ3LjQyMiIgeT0iMzI0Ij5FSkJMb2NhbE9iamVjdHM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ3Mi41MDUgMzE4LjE3bDY3LjQ4NSAzMi40OTIgNC41MDUgMi4xNjlNNTQyIDM0NWwyLjQ5NSA3LjgzTDUzNyAzNTUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU5MC44MzMgMzEzaDgzLjMzNEM2ODQuNTgzIDMxMyA2OTUgMzMwLjUgNjk1IDM0OHMtMTAuNDE3IDM1LTIwLjgzMyAzNWgtODMuMzM0QzU4MC40MTcgMzgzIDU3MCAzNjUuNSA1NzAgMzQ4czEwLjQxNy0zNSAyMC44MzMtMzUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU4MC44MzMgMzIzaDgzLjMzNEM2NzQuNTgzIDMyMyA2ODUgMzQwLjUgNjg1IDM1OHMtMTAuNDE3IDM1LTIwLjgzMyAzNWgtODMuMzM0QzU3MC40MTcgMzkzIDU2MCAzNzUuNSA1NjAgMzU4czEwLjQxNy0zNSAyMC44MzMtMzUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU3MC44MzMgMzMzaDgzLjMzNEM2NjQuNTgzIDMzMyA2NzUgMzUwLjUgNjc1IDM2OHMtMTAuNDE3IDM1LTIwLjgzMyAzNWgtODMuMzM0QzU2MC40MTcgNDAzIDU1MCAzODUuNSA1NTAgMzY4czEwLjQxNy0zNSAyMC44MzMtMzUiLz4KICA8dGV4dCB4PSI1NTgiIHk9IjM2NSI+CiAgICA8dHNwYW4geD0iNTYzLjQ1MyIgeT0iMzY1Ij5lbnRlcnByaXNlIGJlYW48L3RzcGFuPiA8dHNwYW4geD0iNTgzLjA4NiIgeT0iMzgyLjYwOSI+aW5zdGFuY2VzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03OC41NDIgMjYzLjA5bDI1MC4zNzQgMTE1LjIzIDQuNTQyIDIuMDlNMzMxIDM3M2wyLjQ1OCA3LjQxTDMyNiAzODMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM1OC44MzMgMzY1aDgzLjMzNGMxMC40MTYgMCAyMC44MzMgOC43NSAyMC44MzMgMTcuNVM0NTIuNTgzIDQwMCA0NDIuMTY3IDQwMGgtODMuMzM0QzM0OC40MTcgNDAwIDMzOCAzOTEuMjUgMzM4IDM4Mi41czEwLjQxNy0xNy41IDIwLjgzMy0xNy41Ii8+CiAgPHRleHQgeD0iMzQ2IiB5PSIzODgiPgogICAgPHRzcGFuIHg9IjM0OS4zNTIiIHk9IjM4OCI+RUpCTG9jYWxIb21lPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjcuOTM2IDM4MS4yMDZsNzIuMTkxLTExLjYxNyA0LjkzNy0uNzk1TTUzOSAzNjRsNi4wNjQgNC43OTRMNTQwIDM3NSIvPgogIDx0ZXh0IHg9IjU3MyIgeT0iNDMyIj4KICAgIDx0c3BhbiB4PSI1NzUuMzU5IiB5PSI0MzIiPmVudGVycHJpc2UgYmVhbiAyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMzczIiB5PSI1MDEiPgogICAgPHRzcGFuIHg9IjM3MyIgeT0iNTAxIj5jb250YWluZXIgcHJvdmlkZWQ8L3RzcGFuPiA8dHNwYW4geD0iMzczIiB5PSI1MTguNjA5Ij5jbGFzc2VzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTUyOCAzNHY1MDIiLz4KICA8dGV4dCB4PSI1NzYiIHk9IjQ5OCI+CiAgICA8dHNwYW4geD0iNTc2IiB5PSI0OTgiPmNsYXNzZXMgcHJvdmlkZWQgYnk8L3RzcGFuPiA8dHNwYW4geD0iNTc2IiB5PSI1MTUuNjA5Ij5CZWFuIFByb3ZpZGVyIGFuZDwvdHNwYW4+IDx0c3BhbiB4PSI1NzYiIHk9IjUzMy4yMTkiPmNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 33">
</div>
<div class="title">Figure 5. Overview of the Entity Bean Runtime Execution Model</div>
</div>
<div class="paragraph">
<p>An enterprise bean is an object whose class is provided by the Bean Provider.
The class of an entity bean with container-managed persistence is abstract.
The concrete bean class is generated by the Container Provider’s tools at deployment time.
The container is also responsible for providing the implementation of the <code>java.util.Collection</code> classes that are used in maintaining the container-managed relationships of the entity bean.</p>
</div>
<div class="paragraph">
<p>An entity <strong>EJBObject</strong> or <strong>EJBLocalObject</strong> is an object whose class was generated at deployment time by the Container Provider’s tools.
A client never references an entity bean instance directly—a client always references an entity EJBObject or EJBLocalObject whose class is generated by the Container Provider’s tools.
The entity EJBObject class implements an entity bean’s remote interface.
The entity EJBLocalObject class implements an entity bean’s local interface.
A related entity bean never references another entity bean instance directly—a related entity bean, like any other local client of an entity bean, always references an entity EJBLocalObject whose class is generated by the Container Provider’s tools.</p>
</div>
<div class="paragraph">
<p>An entity <strong>EJBHome</strong> or <strong>EJBLocalHome</strong> object provides life cycle operations (create, find, remove) for its entity objects as well as home business methods, which are business methods that are not specific to an entity bean instance.
The class for the entity EJBHome or EJBLocalHome object is generated by the Container Provider’s tools at deployment time.
The entity EJBHome or EJBLocalHome object implements the entity bean’s remote or local home interface that was defined by the Bean Provider.</p>
</div>
</div>
<div class="sect3">
<h4 id="container-responsibilities"><a class="anchor" href="#container-responsibilities"></a>4.4.2. Container Responsibilities</h4>
<div class="paragraph">
<p>The following are the container responsibilities for the management of persistent state.</p>
</div>
<div class="sect4">
<h5 id="container-managed-fields"><a class="anchor" href="#container-managed-fields"></a>4.4.2.1. Container-Managed Fields</h5>
<div class="paragraph">
<p>An entity bean with container-managed persistence relies on the container to perform persistent data access on behalf of the entity bean instances.
The container transfers data between an entity bean instance and the underlying resource manager.
The container also implements the creation, removal, and lookup of the entity object in the underlying database.</p>
</div>
<div class="paragraph">
<p>The container transfers data between the entity bean and the underlying data source as a result of the execution of the entity bean’s methods.
Because of the requirement that all data access occur through the accessor methods, the container can implement both eager and lazy loading and storing schemes.</p>
</div>
<div class="paragraph">
<p>The container is responsible for implementing the entity bean class by providing the implementation of the get and set accessor methods for its abstract persistence schema.
The container is allowed to use Java serialization to store the container-managed persistent fields (cmp-fields).</p>
</div>
<div class="paragraph">
<p>The container must also manage the mapping between primary keys and EJBLocalObjects or EJBObjects.
If both a remote and a local interface are specified for the entity bean, the container must manage the mapping between EJBObjects and EJBLocalObjects.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Because the container is free to optimize the delivery of persistent data to the bean instance (for example, by the use of lazy loading strategies), the contents of the entity bean instance and the contents of container-managed collections may not be fully materialized.</em></p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="container-managed-relationships"><a class="anchor" href="#container-managed-relationships"></a>4.4.2.2. Container-Managed Relationships</h5>
<div class="paragraph">
<p>The container maintains the relationships among entity beans.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is the responsibility of the container to maintain the referential integrity of the container-managed relationships, as described in <a href="#a496">Semantics of Assignment for Relationships</a>, in accordance with the semantics of the relationship type as specified in the deployment descriptor.
For example, if an entity bean is added to a collection corresponding to the container-managed relationship field of another entity bean, the container-managed relationship field of the first entity bean must also be updated by the container in the same transaction context.</p>
</li>
<li>
<p>It is the responsibility of the container to throw the <code>java.lang.IllegalArgumentException</code> when the argument to a set method in a relationship is an instance of the wrong relationship type or a collection containing instances of the wrong type, or when an argument to a method of the <code>java.util.Collection</code> API used to manipulate a collection-valued container-managed relationship field is an instance of the wrong type or a collection that contains instances of the wrong type (see <a href="#a496">Semantics of Assignment for Relationships</a>).</p>
</li>
<li>
<p>It is the responsibility of the container to throw the <code>java.lang.IllegalStateException</code> when a method of the <code>java.util.Collection</code> API is used to access a collection-valued cmr-field within a transaction context other than the transaction context in which the cmr-field was initially materialized.
For example, if the container-managed collection is returned as the result of a local interface method with transaction attribute <code>RequiresNew</code>, and the client attempts to access the collection, the container must throw the <code>IllegalStateException</code>.</p>
</li>
<li>
<p>It is the responsibility of the container to throw the <code>java.lang.IllegalStateException</code> when a <code>java.util.Iterator</code> is used to access a collection-valued cmr-field within a transaction context other than the transaction context in which the iterator was initially obtained.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="instance-life-cycle-contract-between-the-bean-and-the-container"><a class="anchor" href="#instance-life-cycle-contract-between-the-bean-and-the-container"></a>4.5. Instance Life Cycle Contract Between the Bean and the Container</h3>
<div class="paragraph">
<p>This section describes the part of the component contract between the entity bean and the container that relates to the management of the entity bean instance’s life cycle.</p>
</div>
<div class="sect3">
<h4 id="instance-life-cycle"><a class="anchor" href="#instance-life-cycle"></a>4.5.1. Instance Life Cycle</h4>
<div id="a1191" class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NzkiIGhlaWdodD0iNDg0IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzA5LjgzMyAyMGg4My4zMzRDNDAzLjU4MyAyMCA0MTQgMzAgNDE0IDQwcy0xMC40MTcgMjAtMjAuODMzIDIwaC04My4zMzRDMjk5LjQxNyA2MCAyODkgNTAgMjg5IDQwczEwLjQxNy0yMCAyMC44MzMtMjAiLz4KICA8dGV4dCB4PSIyOTciIHk9IjM3Ij4KICAgIDx0c3BhbiB4PSIzMjIuNjA5IiB5PSIzNyI+ZG9lcyBub3QgPC90c3Bhbj4gPHRzcGFuIHg9IjMzNi4yMTEiIHk9IjU0LjYwOSI+ZXhpc3Q8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM0MCA2NXYxMTltNi02bC02IDYtNi02Ii8+CiAgPHRleHQgeD0iMTcwIiB5PSIxMTEiPgogICAgPHRzcGFuIHg9IjE3MCIgeT0iMTExIj4xLiBuZXdJbnN0YW5jZSgpPC90c3Bhbj4gPHRzcGFuIHg9IjE3MCIgeT0iMTI4LjYwOSI+Mi4gc2V0RW50aXR5Q29udGV4dChlYyk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMwOS44MzMgMTg5aDgzLjMzNEM0MDMuNTgzIDE4OSA0MTQgMTk5IDQxNCAyMDlzLTEwLjQxNyAyMC0yMC44MzMgMjBoLTgzLjMzNEMyOTkuNDE3IDIyOSAyODkgMjE5IDI4OSAyMDlzMTAuNDE3LTIwIDIwLjgzMy0yMCIvPgogIDx0ZXh0IHg9IjI5OCIgeT0iMjE1Ij4KICAgIDx0c3BhbiB4PSIzMjkuOTE0IiB5PSIyMTUiPnBvb2xlZDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzAyLjY1NCAxODcuMDNDMjIwLjI1IDE1MiAxOTQuMjUgMjA5IDI4NCAyMDltLTUuNzUtNmw1Ljc1IDYtNS43NSA2Ii8+CiAgPHRleHQgeD0iNDQiIHk9IjIxNSI+CiAgICA8dHNwYW4geD0iNDQiIHk9IjIxNSI+ZWpiSG9tZSZsdDtNRVRIT0QmZ3Q7KGFyZ3MpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMDIuMjE2IDIzMC44NmMtNTUuNzE2IDIxLjg5LTU0LjcxNiAxMDAuODkuMDc4IDEyNS4wOTZtLTIuNzk0LTcuMjA2bDIuNzk0IDcuMjA2LTcuNzk0IDIuNzk0Ii8+CiAgPHRleHQgeD0iNDgiIHk9IjI4MCI+CiAgICA8dHNwYW4geD0iNjYuOTIyIiB5PSIyODAiPmVqYkNyZWF0ZSZsdDtNRVRIT0QmZ3Q7KGFyZ3MpPC90c3Bhbj4gPHRzcGFuIHg9IjM5LjM0NCIgeT0iMjk3LjYwOSI+ZWpiUG9zdENyZWF0ZSZsdDtNRVRIT0QmZ3Q7KGFyZ3MpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMDkuODMzIDM1OGg4My4zMzRDNDAzLjU4MyAzNTggNDE0IDM2OCA0MTQgMzc4cy0xMC40MTcgMjAtMjAuODMzIDIwaC04My4zMzRDMjk5LjQxNyAzOTggMjg5IDM4OCAyODkgMzc4czEwLjQxNy0yMCAyMC44MzMtMjAiLz4KICA8dGV4dCB4PSIyOTgiIHk9IjM4NCI+CiAgICA8dHNwYW4geD0iMzMzLjkyMiIgeT0iMzg0Ij5yZWFkeTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzQwIDIzNHYxMTltNi02bC02IDYtNi02Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2OSAzMDNoODV2MjBoLTg1eiIvPgogIDx0ZXh0IHg9IjI2OSIgeT0iMzE5Ij4KICAgIDx0c3BhbiB4PSIyNjkiIHk9IjMxOSI+ZWpiQWN0aXZhdGUoKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzAyLjI2MyAzNTYuMDI2QzIxOS40IDMyMC4yIDE5NC40IDM3OC4yIDI4NCAzNzhtLTUuNi01LjhsNS42IDUuOC01LjYgNS4yIi8+CiAgPHRleHQgeD0iMTU0IiB5PSIzNjQiPgogICAgPHRzcGFuIHg9IjE1NCIgeT0iMzY0Ij5lamJMb2FkKCk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI4NCAzNzguMDM0Yy04OS42LjE2Ni02My42IDU5LjE2NiAxOC4yOTQgMjIuMDFNMjk0LjQgMzk3LjJsNy44OTQgMi44NDQtMi44OTQgNy4xNTYiLz4KICA8dGV4dCB4PSIxNDUiIHk9IjQzNCI+CiAgICA8dHNwYW4geD0iMTQ1IiB5PSI0MzQiPmJ1c2luZXNzIG1ldGhvZHM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMwNi43NSAzOTcuNzVjLTgxIDM5IDQzIDkwIDQ1IDBtLTYgNmw2LTYgNiA2Ii8+CiAgPHRleHQgeD0iMjU1IiB5PSI0NjkiPgogICAgPHRzcGFuIHg9IjI1NSIgeT0iNDY5Ij5lamJUaW1lb3V0KGFyZyk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM1MS40IDQwMy4yYzAgOTAgMTMxIDM0IDQ5LjMwNi0zLjE1Nm0yLjY5NCA3LjE1NmwtMi42OTQtNy4xNTYgNy42OTQtMi44NDQiLz4KICA8dGV4dCB4PSI0MzUiIHk9IjQzOSI+CiAgICA8dHNwYW4geD0iNDM1IiB5PSI0MzkiPmVqYlNlbGVjdCZsdDtNRVRIT0QmZ3Q7KGFyZ3MpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00MDAuNzMxIDM1Ni4wMTRDNDgzLjQgMzIwLjIgNTA5LjQgMzc2LjIgNDE5LjQgMzc4LjA5Nm02IDUuMTA0bC02LjAwMS01LjEwNCA2LjAwMS01Ljg5NiIvPgogIDx0ZXh0IHg9IjQ2MCIgeT0iMzk0Ij4KICAgIDx0c3BhbiB4PSI0NjAiIHk9IjM5NCI+ZWpiU3RvcmUoKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDAzLjUgMjM3Ljc1bC0yLjcxNi02Ljg5IDcuNzE2LTMuMTFtLTcuNzE2IDMuMTFjNTUuNzE2IDIxLjg5IDU0LjcxNiAxMDAuODktLjA3OCAxMjUuMDk2Ii8+CiAgPHRleHQgeD0iNDUwIiB5PSIyOTkiPgogICAgPHRzcGFuIHg9IjQ1MCIgeT0iMjk5Ij5lamJSZW1vdmUoKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzUzIDI0MGw2LTYgNiA2bS02LTZ2MTE5Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTM0NCAyNjNoOTB2MjBoLTkweiIvPgogIDx0ZXh0IHg9IjM0NCIgeT0iMjc5Ij4KICAgIDx0c3BhbiB4PSIzNDQiIHk9IjI3OSI+ZWpiUGFzc2l2YXRlKCk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQwMC43MTkgMTg2Ljk4NUM0ODMuNCAxNTEgNTA5LjQgMjA5IDQxOSAyMDltNS40IDZsLTUuNC02IDUuNC02Ii8+CiAgPHRleHQgeD0iNDgyIiB5PSIxNzUiPgogICAgPHRzcGFuIHg9IjQ4MiIgeT0iMTc1Ij5lamJGaW5kJmx0O01FVEhPRCZndDsoYXJncyk8L3RzcGFuPiA8dHNwYW4geD0iNDgyIiB5PSIxOTIuNjA5Ij5lamJTZWxlY3QmbHQ7TUVUSE9EJmd0OyhhcmdzKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzUzIDcxbDYtNiA2IDZtLTYtNnYxMTkiLz4KICA8dGV4dCB4PSIzNzciIHk9IjExMCI+CiAgICA8dHNwYW4geD0iMzc3IiB5PSIxMTAiPjEuIHVuc2V0RW50aXR5Q29udGV4dCgpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01MzIgNDBINDE5bTUuNzUgNS43NUw0MTkgNDBsNS43NS01LjI1Ii8+CiAgPHRleHQgeD0iNTQ2IiB5PSIyOCI+CiAgICA8dHNwYW4geD0iNTQ2IiB5PSIyOCI+aW5zdGFuY2UgdGhyb3dzPC90c3Bhbj4gPHRzcGFuIHg9IjU0NiIgeT0iNDUuNjA5Ij5zeXN0ZW0gZXhjZXB0aW9uPC90c3Bhbj4gPHRzcGFuIHg9IjU0NiIgeT0iNjMuMjE5Ij5mcm9tIGFueSBtZXRob2Q8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 34">
</div>
<div class="title">Figure 6. Life Cycle of an Entity Bean Instance.</div>
</div>
<div class="paragraph">
<p>An entity bean instance is in one of the following three states:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It does not exist.</p>
</li>
<li>
<p>Pooled state.
An instance in the pooled state is not associated with any particular entity object identity.</p>
</li>
<li>
<p>Ready state.
An instance in the ready state is assigned an entity object identity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following steps describe the life cycle of an entity bean instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An entity bean instance’s life starts when the container creates the instance using newInstance.
The container then invokes the setEntityContext method to pass the instance a reference to the <code>EntityContext</code> interface.
The <code>EntityContext</code> interface allows the instance to invoke services provided by the container and to obtain the information about the caller of a client-invoked method.</p>
</li>
<li>
<p>The instance enters the pool of available instances.
Each entity bean has its own pool.
While the instance is in the available pool, the instance is not associated with any particular entity object identity.
All instances in the pool are considered equivalent, and therefore any instance can be assigned by the container to any entity object identity at the transition to the ready state.
While the instance is in the pooled state, the container may use the instance to execute any of the entity bean’s finder methods (shown as <code>ejbFind&lt;METHOD&gt;</code> in the diagram) or any of the entity bean’s home methods (shown <code>ejbHome&lt;METHOD&gt;</code> in the diagram).
The instance does <em>not</em> move to the ready state during the execution of a finder or a home method.
An <code>ejbSelect&lt;METHOD&gt;</code> method may be called by an entity bean’s home method while the instance is in the pooled state.</p>
</li>
<li>
<p>An instance transitions from the pooled state to the ready state when the container selects that instance to service a client call to an entity object or an <code>ejbTimeout</code>
method.
There are two possible transitions from the pooled to the ready state: through the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods, or through the <code>ejbActivate</code> method.
The container invokes the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods when the instance is assigned to an entity object during entity object creation (i.e., when the client invokes a create method on the entity bean’s home object).
The container invokes the <code>ejbActivate</code> method on an instance when an instance needs to be activated to service an invocation on an existing entity object—this occurs because there is no suitable instance in the ready state to service the client’s call or the <code>ejbTimeout</code> method.</p>
</li>
<li>
<p>When an entity bean instance is in the ready state, the instance is associated with a specific entity object identity.
While the instance is in the ready state, the container can synchronize the state of the instance with the state of the entity in the underlying data source whenever it determines the need to, in the process invoking the <code>ejbLoad</code> and <code>ejbStore</code> methods zero or more times.
A business method can be invoked on the instance zero or more times.
The <code>ejbTimeout</code> method can be invoked on the instance zero or more times.
Invocations of the <code>ejbLoad</code> and <code>ejbStore</code> methods can be arbitrarily mixed with invocations of business methods and <code>ejbTimeout</code> method invocations.
An <code>ejbSelect&lt;METHOD&gt;</code> method can be called by a business method (or <code>ejbLoad</code> or <code>ejbStore</code> method or <code>ejbTimeout</code>
method) while the instance is in the ready state.</p>
</li>
<li>
<p>The container can choose to passivate an entity bean instance within a
transaction.
To passivate an instance, the container first invokes the <code>ejbStore</code> method to allow the instance to prepare itself for the synchronization of the database state with the instance’s state, and then the container invokes the <code>ejbPassivate</code> method to return the instance to the pooled state.</p>
</li>
<li>
<p>Eventually, the container will transition the instance to the pooled state.
There are three possible transitions from the ready to the pooled state: through the <code>ejbPassivate</code> method, through the <code>ejbRemove</code> method, and because of a transaction rollback for <code>ejbCreate</code>, <code>ejbPostCreate</code>, or
<code>ejbRemove</code> (not shown in <a href="#a1191">Life Cycle of an Entity Bean Instance.</a>).
The container invokes the <code>ejbPassivate</code> method when the container wants to disassociate the instance from the entity object identity without removing the entity object.
The container invokes the <code>ejbRemove</code> method when the container is removing the entity object (i.e., when the client invoked the <code>remove</code> method on the entity object’s component interface or a <code>remove</code> method on the entity bean’s home interface).
If <code>ejbCreate</code>, <code>ejbPostCreate</code>, or <code>ejbRemove</code> is called and the transaction rolls back, the container will transition the bean instance to the pooled state.</p>
</li>
<li>
<p>When the instance is put back into the pool, it is no longer associated with an entity object identity.
The container can assign the instance to any entity object within the same entity bean home.</p>
</li>
<li>
<p>The container can remove an instance in the pool by calling the <code>unsetEntityContext</code> method on the instance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>EntityContext</code> interface passed by the container to the instance in the <code>setEntityContext</code> method is an interface, not a class that contains static information.
For example, the result of the <code>EntityContext.getPrimaryKey</code> method might be different each time an instance moves from the pooled state to the ready state, and the result of the <code>getCallerPrincipal</code> and <code>isCallerInRole</code> methods may be different in each business method.</p>
</li>
<li>
<p>A <code>RuntimeException</code> thrown from any method of an entity bean class (including the business methods and the callbacks invoked by the container) results in the transition to the &#8220;does not exist&#8221; state.
The container must not invoke any method on the instance after a <code>RuntimeException</code> has been caught.
From the caller’s perspective, the corresponding entity object continues to exist.
The client can continue accessing the entity object through its component interface because the container can use a different entity bean instance to delegate the client’s requests.
Exception handling is described further in <a href="#a3210">Exception Handling</a>.</p>
</li>
<li>
<p>The container is not required to maintain a pool of instances in the pooled state.
The pooling approach is an example of a possible implementation, but it is not the required implementation.
Whether the container uses a pool orcnot has no bearing on the entity bean coding style.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="bean-providers-entity-bean-instances-view"><a class="anchor" href="#bean-providers-entity-bean-instances-view"></a>4.5.2. Bean Provider’s Entity Bean Instance’s View</h4>
<div class="paragraph">
<p>The following describes the entity bean instance’s view of the contract as seen by the Bean Provider:</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider is responsible for implementing the following methods in the abstract entity bean class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A public constructor that takes no arguments.</p>
</li>
<li>
<p><code>public void setEntityContext(EntityContext ic);</code></p>
<div class="paragraph">
<p>A container uses this method to pass a reference to the <code>EntityContext</code> interface to the entity bean instance.
If the entity bean instance needs to use the <code>EntityContext</code> interface during its lifetime, it must remember the <code>EntityContext</code> interface in an instance variable.</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context (Refer to Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;Handling
of Methods that Run with an unspecified transaction context&#8221; for how the
container executes methods with an unspecified transaction context).
An identity of an entity object is not available during this method.
The entity bean must not attempt to access its persistent state and relationships using the accessor methods during this method.</p>
</div>
<div class="paragraph">
<p>The instance can take advantage of the <code>setEntityContext()</code> method to allocate any resources that are to be held by the instance for its lifetime.
Such resources cannot be specific to an entity object identity because the instance might be reused during its lifetime to serve multiple entity object identities.</p>
</div>
</li>
<li>
<p><code>public void unsetEntityContext();</code></p>
<div class="paragraph">
<p>A container invokes this method before terminating the life of the instance.</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context.
An identity of an entity object is not available during this method.
The entity bean must not attempt to access its persistent state and relationships using the accessor methods during this method.</p>
</div>
<div class="paragraph">
<p>The instance can take advantage of the <code>unsetEntityContext</code> method to free any resources that are held by the instance.
(These resources typically had been allocated by the <code>setEntityContext</code> method.)</p>
</div>
</li>
<li>
<p><code>public PrimaryKeyClass ejbCreate&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>There are zero
<sup class="footnote" id="_footnote_a3370">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>
or more <code>ejbCreate&lt;METHOD&gt;</code> methods, whose signatures match the signatures of the create&lt;METHOD&gt; methods of the entity bean’s home interface. The container invokes an <code>ejbCreate&lt;METHOD&gt;</code> method on an entity bean instance when a client invokes a matching create&lt;METHOD&gt; method on the entity bean’s home interface.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider’s responsibility is to initialize the instance in the <code>ejbCreate&lt;METHOD&gt;</code> methods from the input arguments, using the get and set accessor methods, such that when the <code>ejbCreate&lt;METHOD&gt;</code> method returns, the persistent representation of the instance can be created.
The entity Bean Provider is guaranteed that the values that will be initially returned by the instance’s get methods for container-managed fields will be the Java language defaults (e.g. 0 for integer, <code>null</code> for pointers), except for collection-valued cmr-fields, which will have the empty collection (or set) as their value.
The entity Bean Provider must not attempt to modify the values of cmr-fields in an <code>ejbCreate&lt;METHOD&gt;</code> method.
This should be done in the <code>ejbPostCreate&lt;METHOD&gt;</code> method instead.</p>
</div>
<div class="paragraph">
<p>The entity object created by the <code>ejbCreate&lt;METHOD&gt;</code> method must have a unique primary key.
This means that the primary key must be different from the primary keys of all the existing entity objects within the same home.
However, it is legal to reuse the primary key of a previously removed entity object.
The implementation of the Bean Provider’s <code>ejbCreate&lt;METHOD&gt;</code> methods should be coded to return a null.
<sup class="footnote" id="_footnote_a3371">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup></p>
</div>
<div class="paragraph">
<p>An <code>ejbCreate&lt;METHOD&gt;</code> method executes in the transaction context determined by the transaction attribute of the matching <code>create&lt;METHOD&gt;</code> method.
The database insert operations are performed by the container within the same transaction context after the Bean Provider’s <code>ejbCreate&lt;METHOD&gt;</code> method completes.</p>
</div>
</li>
<li>
<p><code>public void ejbPostCreate&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>For each <code>ejbCreate&lt;METHOD&gt;</code> method, there is a matching <code>ejbPostCreate&lt;METHOD&gt;</code> method that has the same input parameters but whose return type is <code>void</code>.
The container invokes the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method on an instance after it invokes the <code>ejbCreate&lt;METHOD&gt;</code> method with the same arguments.
The instance can discover the primary key by calling <code>getPrimaryKey</code> on its entity context object.</p>
</div>
<div class="paragraph">
<p>The entity object identity is available during the <code>ejbPostCreate&lt;METHOD&gt;</code> method.
The instance may, for example, obtain the component interface of the associated entity object and pass it to another enterprise bean as a method argument.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider may use the <code>ejbPostCreate&lt;METHOD&gt;</code> to set the values of cmr-fields to complete the initialization of the entity bean instance.</p>
</div>
<div class="paragraph">
<p>An <code>ejbPostCreate&lt;METHOD&gt;</code> method executes in the same transaction context as the previous <code>ejbCreate&lt;METHOD&gt;</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbActivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on the instance when the container picks the instance from the pool and assigns it to a specific entity object
identity.
The <code>ejbActivate</code> method gives the entity bean instance the chance to acquire additional resources that it needs while it is in the ready state.</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context.
The entity bean must not attempt to access its persistent state or relationships using the accessor methods during this method.</p>
</div>
<div class="paragraph">
<p>The instance can obtain the identity of the entity object via the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on the entity context.
The instance can rely on the fact that the primary key and entity object identity will remain associated with the instance until the completion of <code>ejbPassivate</code> or <code>ejbRemove</code>.</p>
</div>
</li>
<li>
<p><code>public void ejbPassivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on an instance when the container decides to disassociate the instance from an entity object identity, and to put the instance back into the pool of available instances.
The <code>ejbPassivate</code> method gives the instance the chance to release any resources that should not be held while the instance is in the pool.
(These resources typically had been allocated during the <code>ejbActivate</code> method.)</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context.
The entity bean must not attempt to access its persistent state or relationships using the accessor methods during this method.</p>
</div>
<div class="paragraph">
<p>The instance can still obtain the identity of the entity object via the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method of the EntityContext interface.</p>
</div>
</li>
<li>
<p><code>public void ejbRemove();</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbRemove</code> method on an entity bean instance in response to a client-invoked <code>remove</code> operation on the entity bean’s home or component interface or as the result of a cascade-delete operation.
The instance is in the ready state when <code>ejbRemove</code> is invoked and it will be entered into the pool when the method completes.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider can use the <code>ejbRemove</code> method to implement any actions that must be done before the entity object’s persistent representation is removed.</p>
</div>
<div class="paragraph">
<p>The container synchronizes the instance’s state before it invokes the <code>ejbRemove</code> method.
This means that the state of the instance at the beginning of the <code>ejbRemove</code> method is the same as it would be at the beginning of a business method.</p>
</div>
<div class="paragraph">
<p>This method and the database delete operation(s) execute in the transaction context determined by the transaction attribute of the remove method that triggered the <code>ejbRemove</code> method.
The instance can still obtain the identity of the entity object via the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method of the <code>EntityContext</code> interface.</p>
</div>
<div class="paragraph">
<p>After the entity Bean Provider’s <code>ejbRemove</code> returns, and in the same transaction context, the container removes the entity bean from all relationships in which it participates before removing the entity object’s persistent representation.</p>
</div>
<div class="paragraph">
<p>Since the instance will be entered into the pool, the state of the instance at the end of this method must be equivalent to the state of a passivated instance.
This means that the instance must release any resource that it would normally release in the <code>ejbPassivate</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbLoad();</code></p>
<div class="paragraph">
<p>When the container needs to synchronize the state of an enterprise bean instance with the entity object’s persistent state, the container calls the <code>ejbLoad</code> method.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider can assume that the instance’s persistent state has been loaded just before the <code>ejbLoad</code> method is invoked.
It is the responsibility of the Bean Provider to use the <code>ejbLoad</code> method to recompute or initialize the values of any instance variables that depend on the entity bean’s persistent state.
In general, any transient state that depends on the persistent state of an entity bean should be recalculated using the <code>ejbLoad</code> method.
The entity bean can use the <code>ejbLoad</code> method, for instance, to perform some computation on the values returned by the accessor methods (for example, uncompressing text fields).</p>
</div>
<div class="paragraph">
<p>This method executes in the transaction context determined by the transaction attribute of the business method or <code>ejbTimeout</code> method that triggered the <code>ejbLoad</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbStore();</code></p>
<div class="paragraph">
<p>When the container needs to synchronize the state of the entity object’s persistent state with the state of the enterprise bean instance, the container first calls the <code>ejbStore</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider should use the <code>ejbStore</code> method to update the instance using the accessor methods before its persistent state is synchronized.
For example, the <code>ejbStore</code> method may perform compression of text before the text is stored in the database.</p>
</div>
<div class="paragraph">
<p>The Bean Provider can assume that after the <code>ejbStore</code> method returns, the persistent state of the instance is synchronized.</p>
</div>
<div class="paragraph">
<p>This method executes in the same transaction context as the previous <code>ejbLoad</code> or <code>ejbCreate</code> method invoked on the instance.
All business methods or the <code>ejbTimeout</code> method invoked between the previous <code>ejbLoad</code> or <code>ejbCreate&lt;METHOD&gt;</code> method and this <code>ejbStore</code> method are also invoked in the same transaction context.</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;primary key type or collection&gt;</em> <code>ejbFind&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The Bean Provider of an entity bean with container-managed persistence does not write the finder (<code>ejbFind&lt;METHOD&gt;</code>) methods.</p>
</div>
<div class="paragraph">
<p>The finder methods are generated at the entity bean deployment time using the Container Provider’s tools.
The syntax for the Bean Provider’s specification of finder methods is described in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a>.</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;type&gt;</em> <code>ejbHome&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes this method on the instance when the container selects the instance to execute a matching client-invoked &lt;METHOD&gt; home method.
The instance is in the pooled state (i.e., it is not assigned to any particular entity object identity) when the container selects the instance to execute the <code>ejbHome&lt;METHOD&gt;</code> method on it, and it is returned to the pooled state when the execution of the <code>ejbHome&lt;METHOD&gt;</code> method completes.</p>
</div>
<div class="paragraph">
<p>The <code>ejbHome&lt;METHOD&gt;</code> method executes in the transaction context determined by the transaction attribute of the matching <code>&lt;METHOD&gt;</code> home method, as described in Enterprise Beans Core Contracts and
Requirements document <a href="#a3339">[2]</a> Subsection &#8220;Container-Managed Transaction Demarcation for Business Methods&#8221;.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider provides the implementation of the <code>ejbHome&lt;METHOD&gt;</code> method.
The entity bean must not attempt to access its persistent state or relationships using the accessor methods during this method because a home method is not specific to a particular bean instance.</p>
</div>
</li>
<li>
<p><code>public abstract</code> <em>&lt;type&gt;</em> <code>ejbSelect&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The Bean Provider may provide zero or more select methods.
A select method is a query method that is not directly exposed to the client in the home or component interface.
The Bean Provider typically calls a select method within a business method.</p>
</div>
<div class="paragraph">
<p>The Bean Provider defines the select methods as <code>abstract</code> methods.</p>
</div>
<div class="paragraph">
<p>The select methods are generated at the entity bean deployment time using the Container Provider’s tools.</p>
</div>
<div class="paragraph">
<p>The syntax for the specification of select methods is described in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a>.</p>
</div>
<div class="paragraph">
<p>The <code>ejbSelect&lt;METHOD&gt;</code> method executes in the transaction context determined by the transaction attribute of the invoking business method.</p>
</div>
</li>
<li>
<p><code>public void ejbTimeout(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbTimeout</code> method on an instance when a timer for the instance has expired.
The <code>ejbTimeout</code> method notifies the instance of the time-based event and
allows the instance to execute the business logic to handle it.</p>
</div>
<div class="paragraph">
<p>The <code>ejbTimeout</code> method executes in the transaction context determined by its transaction attribute.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="a1279"><a class="anchor" href="#a1279"></a>4.5.3. Container’s View</h4>
<div class="paragraph">
<p>This subsection describes the container’s view of the state management contract.
The container must call the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>public void setEntityContext(ec);</code></p>
<div class="paragraph">
<p>The container invokes this method to pass a reference to the <code>EntityContext</code> interface to the entity bean instance.
The container must invoke this method after it creates the instance, and before it puts the instance into the pool of available instances.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.
At this point, the <code>EntityContext</code> is not associated with any entity object identity.</p>
</div>
</li>
<li>
<p><code>public void unsetEntityContext();</code></p>
<div class="paragraph">
<p>The container invokes this method when the container wants to reduce the number of instances in the pool.
After this method completes, the container must not reuse this instance.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.</p>
</div>
</li>
<li>
<p><code>public <em>PrimaryKeyClass</em> ejbCreate&lt;METHOD&gt;(&#8230;&#8203;);</code><br>
<code>public void ejbPostCreate&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes these two methods during the creation of an entity object as a result of a client invoking a <code>create&lt;METHOD&gt;</code> method on the entity bean’s home interface.</p>
</div>
<div class="paragraph">
<p>The container invokes the <code>ejbCreate&lt;METHOD&gt;</code> method whose signature matches the <code>create&lt;METHOD&gt;</code> method invoked by the client.</p>
</div>
<div class="paragraph">
<p>Prior to invoking the <code>ejbCreate&lt;METHOD&gt;</code> method provided by the Bean Provider, the container must ensure that the values that will be initially returned by the instance’s get methods for container-managed fields will be the Java language defaults (e.g. 0 for integer, <code>null</code> for pointers), except for collection-valued cmr-fields, which must have the empty collection (or set) as their value.</p>
</div>
<div class="paragraph">
<p>The container is responsible for calling the <code>ejbCreate&lt;METHOD&gt;</code> method, for obtaining the primary key fields of the newly created entity object persistent representation, and for creating an entity EJBObject reference and/or EJBLocalObject reference for the newly created entity object. The container must establish the primary key before it invokes the <code>ejbPostCreate&lt;METHOD&gt;</code> method.</p>
</div>
<div class="paragraph">
<p>The entity object created by the <code>ejbCreate&lt;METHOD&gt;</code> method must have a unique primary key.
This means that the primary key must be different from the primary keys of all the existing entity objects within the same home.
However, it is legal to reuse the primary key of a previously removed entity object.
The container may, but is not required to, throw the <code>DuplicateKeyException</code> on the Bean Provider’s attempt to create an entity object with a duplicate primary key.
<sup class="footnote" id="_footnote_a3372">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup></p>
</div>
<div class="paragraph">
<p>The container may create the representation of the entity in the database immediately, or it can defer it to a later time (for example to the time after the matching <code>ejbPostCreate&lt;METHOD&gt;</code> has been called, or to the end of the transaction), depending on the caching strategy that it uses.</p>
</div>
<div class="paragraph">
<p>The container then invokes the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method with the same arguments on the instance to allow the instance to fully initialize itself.
The instance can discover the primary key by calling the getPrimaryKey method on its entity context object.</p>
</div>
<div class="paragraph">
<p>Finally, the container returns the entity object’s remote interface (i.e., a reference to the entity EJBObject) to the client if the client is a remote client or the entity object’s local interface (i.e., a reference to the entity EJBLocalObject) if the client is a local client.</p>
</div>
<div class="paragraph">
<p>The container must invoke the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods and create the representation of the persistent instance in the database in the transaction context determined by the transaction attribute of the matching <code>create&lt;METHOD&gt;</code> method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>
Subsection &#8220;Container-Managed Transaction Demarcation for Business
Methods&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbActivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on an entity bean instance at activation time (i.e., when the instance is taken from the pool and assigned to an entity object identity).
The container must ensure that the primary key of the associated entity object is available to the instance if the instance invokes the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on its <code>EntityContext</code> interface.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.</p>
</div>
<div class="paragraph">
<p>Note that instance is not yet ready for the delivery of a business method.
The container must still invoke the ejbLoad method prior to a business method.</p>
</div>
</li>
<li>
<p><code>public void ejbPassivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on an entity bean instance at passivation time (i.e., when the instance is being disassociated from an entity object identity and moved into the pool).
The container must ensure that the identity of the associated entity object is still available to the instance if the instance invokes the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on its entity context.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.</p>
</div>
<div class="paragraph">
<p>Note that if the instance state has been updated by a transaction, the container must first invoke the <code>ejbStore</code> method on the instance before it invokes <code>ejbPassivate</code> on it.</p>
</div>
</li>
<li>
<p><code>public void ejbRemove();</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbRemove</code> method in response to a client-invoked remove operation on the entity bean’s home or component interface or as the result of a cascade-delete operation.
The instance is in the ready state when <code>ejbRemove</code> is invoked and it will be entered into the pool when the method completes.</p>
</div>
<div class="paragraph">
<p>The container synchronizes the instance’s state before it invokes the <code>ejbRemove</code> method.
This means that the persistent state of the instance at the beginning of the <code>ejbRemove</code> method is the same as it would be at the beginning of a business method (i.e., if the instance is not already synchronized from the state in the database, the container must invoke <code>ejbLoad</code> before it invokes <code>ejbRemove</code>).</p>
</div>
<div class="paragraph">
<p>The container must ensure that the identity of the associated entity object is still available to the instance in the <code>ejbRemove</code> method (i.e., the instance can invoke the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on its <code>EntityContext</code> in the <code>ejbRemove</code> method).</p>
</div>
<div class="paragraph">
<p>After the entity Bean Provider’s <code>ejbRemove</code> method returns, and in the same transaction context, the container removes the entity bean instance from all relationships in which it participates and then removes the entity object’s persistent representation.</p>
</div>
<div class="paragraph">
<p>The container may delete the representation of the entity in the database immediately, or it can defer it to a later time (for example to the end of the transaction), depending on the caching strategy that it uses.</p>
</div>
<div class="paragraph">
<p>The container must ensure that the <code>ejbRemove</code> method and database delete operations are performed in the transaction context determined by the transaction attribute of the invoked remove method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;Container-Managed Transaction Demarcation for Business Methods&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbLoad();</code></p>
<div class="paragraph">
<p>When the container needs to synchronize the state of an enterprise bean instance with the entity object’s state in the database, the container calls the <code>ejbLoad</code> method.
Depending on its caching strategy, the container may first read the entity object’s state from the database, before invoking the <code>ejbLoad</code> method, or it may use a lazy loading strategy in making this state visible to the instance.</p>
</div>
<div class="paragraph">
<p>The exact times that the container invokes <code>ejbLoad</code> depend on the configuration of the component and the container, and are not defined by the Enterprise Beans architecture.
Typically, the container will call <code>ejbLoad</code> before the first business method within a transaction or before invoking the <code>ejbTimeout</code> method on an instance.</p>
</div>
<div class="paragraph">
<p>The container must invoke this method in the transaction context determined by the transaction attribute of the business method or <code>ejbTimeout</code> method that triggered the <code>ejbLoad</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbStore();</code></p>
<div class="paragraph">
<p>When the container needs to synchronize the state of the entity object in the database with the state of the enterprise bean instance, the container calls the <code>ejbStore</code> method on the instance.
This synchronization always happens at the end of a transaction, unless the bean is specified as read-only (see <a href="#a1342">Read-only Entity Beans</a>).
However, the container may also invoke this method when it passivates the instance in the middle of a transaction, or when it needs to transfer the most recent state of the entity object to another instance for the same entity object in the same transaction.</p>
</div>
<div class="paragraph">
<p>The container must invoke this method in the same transaction context as the previous <code>ejbLoad</code>, <code>ejbCreate&lt;METHOD&gt;</code>, or <code>ejbTimeout</code> method invoked on the instance.
All business methods or the <code>ejbTimeout</code> method invoked between the previous <code>ejbLoad</code> or <code>ejbCreate&lt;METHOD&gt;</code> method and this <code>ejbStore</code> method are also invoked in the same transaction context.</p>
</div>
<div class="paragraph">
<p>After the <code>ejbStore</code> method returns, the container may store the persistent state of the instance to the database, depending on its caching strategy.
If the container uses a lazy storing caching strategy, it is the container’s responsibility to write the representation of the persistent object to the database in the same transaction context as that of the <code>ejbStore</code> method.</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;primary key type or collection&gt;</em> <code>ejbFind&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The implementation of the <code>ejbFind&lt;METHOD&gt;</code> method is supplied by the container.</p>
</div>
<div class="paragraph">
<p>The container invokes the <code>ejbFind&lt;METHOD&gt;</code> method on an instance when a client invokes a matching <code>find&lt;METHOD&gt;</code> method on the entity bean’s home interface.
The container must pick an instance that is in the pooled state (i.e., the instance is not associated with any entity object identity) for the execution of the <code>ejbFind&lt;METHOD&gt;</code> method.
If there is no instance in the pooled state, the container creates one and calls the <code>setEntityContext</code> method on the instance before dispatching the finder method.</p>
</div>
<div class="paragraph">
<p>The container must invoke the <code>ejbFind&lt;METHOD&gt;</code> method in the transaction context determined by the transaction attribute of the matching find method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;Container-Managed Transaction Demarcation for Business Methods&#8221;.</p>
</div>
<div class="paragraph">
<p>The container is responsible for ensuring that updates to the states of all entity beans in the same transaction context as the <code>ejbFind&lt;METHOD&gt;</code> method and whose abstract schema types are accessed in the method’s Enterprise Beans QL query are visible in the results of the <code>ejbFind&lt;METHOD&gt;</code> method.
Before invoking the <code>ejbFind&lt;METHOD&gt;</code> method, the container must first synchronize the state of those entity bean instances by invoking the <code>ejbStore</code> method on them.
This requirement does not apply to the <code>ejbFindByPrimaryKey</code> method.
The results of the <code>ejbFindByPrimaryKey</code> method, however, must reflect the entities that have been created or removed within the same transaction context.</p>
</div>
<div class="paragraph">
<p>After the <code>ejbFind&lt;METHOD&gt;</code> method completes, the instance remains in the pooled state.
The container may, but is not required to, immediately activate the objects that were located by the finder using the transition through the <code>ejbActivate</code> method.</p>
</div>
<div class="paragraph">
<p>If the <code>ejbFind&lt;METHOD&gt;</code> method is declared to return a single primary key, the container creates an entity EJBObject (EJBLocalObject) reference for the primary key and returns it to the client (local client).
If the <code>ejbFind&lt;METHOD&gt;</code> method is declared to return a collection of primary keys, the container creates a collection of entity EJBObject (EJBLocalObject) references for the primary keys returned from the <code>ejbFind&lt;METHOD&gt;</code> method, and returns the collection to the client (local client).</p>
</div>
<div class="paragraph">
<p>The implementations of the finder methods are generated at the entity bean deployment time using the Container Provider’s tools.</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;type&gt;</em> <code>ejbSelect&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>A select method is a query method that is not directly exposed to the client in the home or component interface.
The Bean Provider typically calls a select method within a business method or home method.</p>
</div>
<div class="paragraph">
<p>A select method executes in the transaction context determined by the transaction attribute of the invoking business method.</p>
</div>
<div class="paragraph">
<p>The container is responsible for ensuring that all updates to the states of all entity beans in the same transaction context as the <code>ejbSelect&lt;METHOD&gt;</code> method and whose abstract schema types are accessed in the Enterprise Beans QL query for the <code>ejbSelect&lt;METHOD&gt;</code> method are visible in the results of the <code>ejbSelect&lt;METHOD&gt;</code> method by invoking the <code>ejbStore</code> method on those entity bean instances.</p>
</div>
<div class="paragraph">
<p>The implementations of the select methods are generated at the entity bean deployment time using the Container Provider’s tools.</p>
</div>
</li>
<li>
<p><code>public &lt;type&gt; ejbHome&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbHome&lt;METHOD&gt;</code> method on an instance when a client invokes a matching &lt;METHOD&gt; home method on the entity bean’s home interface.
The container must pick an instance that is in the pooled state (i.e., the instance is not associated with any entity object identity) for the execution of the <code>ejbHome&lt;METHOD&gt;</code> method.
If there is no instance in the pooled state, the container creates one and calls the <code>setEntityContext</code> method on the instance before dispatching the home method.</p>
</div>
<div class="paragraph">
<p>After the <code>ejbHome&lt;METHOD&gt;</code> method completes, the instance remains in the pooled state.</p>
</div>
<div class="paragraph">
<p>The container must invoke the <code>ejbHome&lt;METHOD&gt;</code> method in the transaction context determined by the transaction attribute of the matching &lt;METHOD&gt; home method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;Container-Managed Transaction Demarcation for Business Methods&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbTimeout(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbTimeout</code> method on the instance when a timer with which the entity has been registered expires.
If there is no suitable instance in the ready state, the container must activate an instance, invoking the <code>ejbActivate</code> method and transitioning it to the ready state.</p>
</div>
<div class="paragraph">
<p>The container invokes the <code>ejbTimeout</code> method in the context of a transaction determined by its transaction attribute.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="a1342"><a class="anchor" href="#a1342"></a>4.5.4. Read-only Entity Beans</h4>
<div class="paragraph">
<p>Compliant implementations of this specification may optionally support read-only entity beans.
A read-only entity bean is an entity bean whose instances are not intended to be updated and/or created by the application.
Read-only beans are best suited for situations where the underlying data never changes or changes infrequently.</p>
</div>
<div class="paragraph">
<p>Containers that support read-only beans do not call the <code>ejbStore</code> method on them.
The <code>ejbLoad</code> method should typically be called by the container when the state of the bean instance is initially loaded from the database, or at designated refresh intervals.
<sup class="footnote" id="_footnote_a3373">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup></p>
</div>
<div class="paragraph">
<p>If a read-only bean is used, the state of such a bean should not be updated by the application, and the behavior is unspecified if this occurs.
<sup class="footnote" id="_footnote_a3374">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup></p>
</div>
<div class="paragraph">
<p>Read-only beans are designated by vendor-specific means that are outside the scope of this specification, and their use is therefore not portable.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-entitycontext-interface"><a class="anchor" href="#the-entitycontext-interface"></a>4.5.5. The EntityContext Interface</h4>
<div class="paragraph">
<p>A container provides the entity bean instances with an <code>EntityContext</code>, which gives the entity bean instance access to the instance’s context maintained by the container.
The <code>EntityContext</code> interface has the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>getEJBObject</code> method returns the entity bean’s remote interface.</p>
</li>
<li>
<p>The <code>getEJBHome</code> method returns the entity bean’s remote home interface.</p>
</li>
<li>
<p>The <code>getEJBLocalObject</code> method returns the entity bean’s local interface.</p>
</li>
<li>
<p>The <code>getEJBLocalHome</code> method returns the entity bean’s local home interface.</p>
</li>
<li>
<p>The <code>getCallerPrincipal</code> method returns the <code>java.security.Principal</code> that identifies the invoker.</p>
</li>
<li>
<p>The <code>isCallerInRole</code> method tests if the entity bean instance’s caller has a particular role.</p>
</li>
<li>
<p>The <code>setRollbackOnly</code> method allows the instance to mark the current transaction such that the only outcome of the transaction is a rollback.</p>
</li>
<li>
<p>The <code>getRollbackOnly</code> method allows the instance to test if the current transaction has been marked for rollback.</p>
</li>
<li>
<p>The <code>getPrimaryKey</code> method returns the entity bean’s primary key.</p>
</li>
<li>
<p>The <code>getTimerService</code> method returns the <code>jakarta.ejb.TimerService</code> interface.</p>
</li>
<li>
<p>The <code>getUserTransaction</code> method returns the <code>jakarta.transaction.UserTransaction</code> interface.
Entity bean instances must not call this method.</p>
</li>
<li>
<p>The <code>lookup</code> method enables the entity bean to look up its environment entries in the JNDI naming context.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="operations-allowed-in-the-methods-of-the-entity-bean-class"><a class="anchor" href="#operations-allowed-in-the-methods-of-the-entity-bean-class"></a>4.5.6. Operations Allowed in the Methods of the Entity Bean Class</h4>
<div class="paragraph">
<p><a href="#a1367">Operations Allowed in the Methods of an Entity Bean</a> defines the methods of an entity bean class in which the enterprise bean instances can access the methods of the <code>jakarta.ejb.EntityContext</code> interface, the <code>java:comp/env</code> environment naming context, resource managers, <code>TimerService</code> and <code>Timer</code> methods, the <code>EntityManager</code> and <code>EntityManagerFactory</code> methods, and other enterprise beans.</p>
</div>
<div class="paragraph">
<p>If an entity bean instance attempts to invoke a method of the <code>EntityContext</code> interface, and the access is not allowed in <a href="#a1367">Operations Allowed in the Methods of an Entity Bean</a>, the container must throw the <code>java.lang.IllegalStateException</code>.</p>
</div>
<div class="paragraph">
<p>If a entity bean instance attempts to invoke a method of the <code>TimerService</code> or <code>Timer</code> interface and the access is not allowed in <a href="#a1367">Operations Allowed in the Methods of an Entity Bean</a>, the container must throw the <code>java.lang.IllegalStateException</code>.</p>
</div>
<div class="paragraph">
<p>If an entity bean instance attempts to access a resource manager, an enterprise bean, an entity manager or entity manager factory, and the access is not allowed in <a href="#a1367">Operations Allowed in the Methods of an Entity Bean</a>, the behavior is undefined by the Enterprise Beans architecture.</p>
</div>
<table id="a1367" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Operations Allowed in the Methods of an Entity Bean</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-bottom">Bean method</th>
<th class="tableblock halign-left valign-top">Bean method can perform the following operations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">constructor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">setEntityContext<br>
unsetEntityContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>lookup</code><br>
JNDI access to java:comp/env</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbCreate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getCallerPrincipal</code>, <code>getRollbackOnly</code>, <code>isCallerInRole</code>,<code>setRollbackOnly</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbPostCreate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getCallerPrincipal</code>, <code>getRollbackOnly</code>, <code>isCallerInRole</code>, <code>setRollbackOnly</code>, <code>getEJBObject</code>, <code>getEJBLocalObject</code>, <code>getPrimaryKey</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbRemove</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getCallerPrincipal</code>, <code>getRollbackOnly</code>, <code>isCallerInRole</code>, <code>setRollbackOnly</code>, <code>getEJBObject</code>, <code>getEJBLocalObject</code>, <code>getPrimaryKey</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbHome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getCallerPrincipal</code>, <code>getRollbackOnly</code>, <code>isCallerInRole</code>, <code>setRollbackOnly</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbActivate<br>
ejbPassivate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getEJBObject</code>, <code>getEJBLocalObject</code>, <code>getPrimaryKey</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbLoad<br>
ejbStore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getCallerPrincipal</code>, <code>getRollbackOnly</code>, <code>isCallerInRole</code>, <code>setRollbackOnly</code>, <code>getEJBObject</code>, <code>getEJBLocalObject</code>, <code>getPrimaryKey</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">business method from component interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getCallerPrincipal</code>, <code>getRollbackOnly</code>, <code>isCallerInRole</code>, <code>setRollbackOnly</code>, <code>getEJBObject</code>, <code>getEJBLocalObject</code>, <code>getPrimaryKey</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock">ejbTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getRollbackOnly</code>, <code>setRollbackOnly</code>, <code>getCallerPrincipal</code>, <code>isCallerInRole</code>, <code>getEJBObject</code>, <code>getEJBLocalObject</code>, <code>getPrimaryKey</code>, <code>getTimerService</code>, <code>lookup</code><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional restrictions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>getRollbackOnly</code> and <code>setRollbackOnly</code> methods of the <code>EntityContext</code> interface should be used only in the enterprise bean methods that execute in the context of a transaction.
The container must throw the <code>java.lang.IllegalStateException</code> if the methods are invoked while the instance is not associated with a transaction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Reasons for disallowing operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Invoking the <code>getEJBObject</code>, <code>getEJBLocalObject</code>, and <code>getPrimaryKey</code> methods is disallowed in the entity bean methods in which there is no entity object identity associated with the instance.</p>
</li>
<li>
<p>Invoking the <code>getEJBObject</code> and <code>getEJBHome</code> methods is disallowed if the entity bean does not define a remote client view.</p>
</li>
<li>
<p>Invoking the <code>getEJBLocalObject</code> and <code>getEJBLocalHome</code> methods is disallowed if the entity bean does not define a local client view.</p>
</li>
<li>
<p>Invoking the <code>getRollbackOnly</code> and <code>setRollbackOnly</code> methods is disallowed in the entity bean methods for which the container does not have a meaningful transaction context.</p>
</li>
<li>
<p>Accessing resource managers and enterprise beans, including accessing the persistent state of an entity bean instance, is disallowed in the entity bean methods for which the container does not have a meaningful transaction context or client security context.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="a1446"><a class="anchor" href="#a1446"></a>4.5.7. Finder Methods</h4>
<div class="paragraph">
<p>An entity bean’s home interface defines one or more finder
methods
<sup class="footnote" id="_footnote_a3375">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup>
, one for each way to find an entity object or collection of entity objects within the home.
The name of each finder method starts with the prefix &#8220;<code>find</code>&#8221;, such as <code>findLargeAccounts</code>.
The arguments of a finder method are used in the implementation of the query for the finder method to locate the requested entity objects.</p>
</div>
<div class="paragraph">
<p>Every finder method except <code>findByPrimaryKey(key)</code> must be associated with a <code>query</code> element in the deployment descriptor.
The entity Bean Provider declaratively specifies the Enterprise Beans QL finder query and associates it with the finder method in the deployment descriptor.
A finder method is normally characterized by an Enterprise Beans QL query string specified in the <code>query</code> element.
Enterprise Beans QL is described in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a>.
A compliant implementation of this specification is required to support Enterprise Beans QL as defined in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a> for use with finder methods.</p>
</div>
<div class="paragraph">
<p>In the case that both the remote home interface and local home interface define a finder method with the same name and argument types, the Enterprise Beans QL query string specified by the <code>query</code> element defines the semantics of both methods.</p>
</div>
<div class="sect4">
<h5 id="single-object-finder-methods"><a class="anchor" href="#single-object-finder-methods"></a>4.5.7.1. Single-Object Finder Methods</h5>
<div class="paragraph">
<p>Some finder methods (such as <code>findByPrimaryKey</code>) are designed to return at most one entity object.
For single-object finders, the result type of a <code>find&lt;METHOD&gt;</code> method defined in the entity bean’s remote home interface is the entity bean’s remote interface, and the result type of the <code>find&lt;METHOD&gt;</code> method defined in the entity bean’s local home interface is the entity bean’s local interface.</p>
</div>
<div class="paragraph">
<p>The following code illustrates the definition of a single-object finder defined on the remote home interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Entity’s home interface</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">AccountHome</span> <span class="directive">extends</span> jakarta.ejb.EJBHome {
    ...
    Account findByPrimaryKey(AccountPrimaryKey primkey)
         <span class="directive">throws</span> FinderException, <span class="exception">RemoteException</span>;
    ...
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that a finder method defined on the local home interface must not throw the <code>RemoteException</code>.</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In general, when defining a single-object finder method other than <code>findByPrimaryKey</code>, the entity Bean Provider should be sure that the finder method will always return only a single entity object.
This may occur, for example, if the Enterprise Beans QL query string that is used to specify the finder query includes an equality test on the entity bean’s primary key fields.
If the entity Bean Provider uses an unknown primary key class (see <a href="#a1833">Special Case: Unknown Primary Key Class</a>), the Bean Provider will typically define the finder method as a multi-object finder.</p>
</div>
<div class="paragraph">
<p>Note that a single-object finder method may return a null value.
If the result set of the query consists of a single null value, the container must return the null value as the result of the method.
If the result set of a query for a single-object finder method contains more than one value (whether non-null, null, or a combination), the container must throw the <code>FinderException</code> from the finder method.
If the result set of the query contains no values, the container must throw the <code>ObjectNotFoundException</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="multi-object-finder-methods"><a class="anchor" href="#multi-object-finder-methods"></a>4.5.7.2. Multi-Object Finder Methods</h5>
<div class="paragraph">
<p>Some finder methods are designed to return multiple entity objects.
For multi-object finders defined on the entity bean’s local home interface, the result type of the <code>find&lt;METHOD&gt;</code> method is a collection of objects implementing the entity bean’s local interface.
For multi-object finders defined on the entity bean’s remote home interface, the result type of the <code>find&lt;METHOD&gt;</code> method is a collection of objects implementing the entity bean’s remote interface.</p>
</div>
<div class="paragraph">
<p>The Bean Provider uses the <code>java.util.Collection</code> interface to define a collection type for the result type of a finder method for an entity bean with container-managed persistence.</p>
</div>
<div class="paragraph">
<p>The collection of values returned by the container may contain duplicates if DISTINCT is not specified in the SELECT clause of the query for the finder method.</p>
</div>
<div class="paragraph">
<p>The collection of values returned by the container may contain null values if the finder method returns the values of a cmr-field and null values are not eliminated by the query.</p>
</div>
<div class="paragraph">
<p>A portable client program must use the <code>PortableRemoteObject.narrow</code> method to convert the objects contained in the collections returned by a finder method on the entity bean’s remote home interface to the entity bean’s remote interface type.</p>
</div>
<div class="paragraph">
<p>The following is an example of a multi-object finder method defined on the remote home interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Entity’s home interface</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">AccountHome</span> <span class="directive">extends</span> jakarta.ejb.EJBHome {
    ...
    java.util.Collection findLargeAccounts(<span class="type">double</span> limit)
        <span class="directive">throws</span> FinderException, <span class="exception">RemoteException</span>;
    ...
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that if this finder method were defined
on the local home interface, it would not throw the <code>RemoteException</code>.</em></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a1479"><a class="anchor" href="#a1479"></a>4.5.8. Select Methods</h4>
<div class="paragraph">
<p>Select methods are query methods for use by the Bean Provider within an entity bean instance.
Unlike finder methods, select methods are not specified in the entity bean’s home interface.
A select method is an abstract method defined by the Bean Provider on an entity bean class.
A select method must not be exposed in the home or component interface of an entity bean.</p>
</div>
<div class="paragraph">
<p>The semantics of a select method, like those of a finder method, are defined by an Enterprise Beans QL query string.
A select method is similar to a finder method, but unlike a finder method, but it can return values that correspond to any cmp- or cmr-field type.</p>
</div>
<div class="paragraph">
<p>Every select method must be associated with a <code>query</code> element in the deployment descriptor.
The entity Bean Provider declaratively specifies the Enterprise Beans QL query and associates it with the select method in the deployment descriptor.
A select method is normally characterized by an Enterprise Beans QL query string specified in the <code>query</code> element.
Enterprise Beans QL is described in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a>.
A compliant implementation of this specification is required to support Enterprise Beans QL as defined in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a> for use with select methods.</p>
</div>
<div class="paragraph">
<p>Typically an <code>ejbSelect&lt;METHOD&gt;</code> method that returns entity objects returns these as EJBLocalObjects.
If the <code>ejbSelect&lt;METHOD&gt;</code> method returns an EJBObject or collection of EJBObjects, the Bean Provider must specify the value of the <code>result-type-mapping</code> element in the <code>query</code> deployment descriptor element for the select method as <code>Remote</code>.</p>
</div>
<div class="paragraph">
<p>An <code>ejbSelect&lt;METHOD&gt;</code> is not based on the identity of the entity bean instance on which it is invoked.
However, the Bean Provider can use the primary key of an entity bean as an argument to an <code>ejbSelect&lt;METHOD&gt;</code> to define a query that is logically scoped to a particular entity bean instance.</p>
</div>
<div class="paragraph">
<p>The following table illustrates the semantics of finder and select methods.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Comparison of Finder and Select Methods</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-middle"></th>
<th class="tableblock halign-left valign-top">Finder methods</th>
<th class="tableblock halign-left valign-top">Select methods</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-middle"><p class="tableblock">method</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>find&lt;METHOD&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejbSelect&lt;METHOD&gt;</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-middle"><p class="tableblock">visibility</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">exposed to client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">internal to entity bean class</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-middle"><p class="tableblock">instance</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">arbitrary bean instance in pooled state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">instance: current instance (could be bean instance in pooled state or ready state)</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-middle"><p class="tableblock">return value</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">EJBObjects or EJBLocalObjects of the same type as the entity bean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EJBObjects, EJBLocalObjects, or cmp-field types</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="single-object-select-methods"><a class="anchor" href="#single-object-select-methods"></a>4.5.8.1. Single-Object Select Methods</h5>
<div class="paragraph">
<p>Some select methods are designed to return at most one value.
In general, when defining a single-object select method, the entity Bean Provider must be sure that the select method will always return only a single object or value.
If the query specified by the select method returns multiple values of the designated type, the container must throw the <code>FinderException</code>.</p>
</div>
<div class="paragraph">
<p>Note that a single-object select method may return a null value.
If the result set of the query consists of a single null value, the container must return the null value as the result of the method.
If the result set of a query for a single-object select method contains more than one value (whether non-null, null, or a combination), the container must throw the <code>FinderException</code> from the select method.
If the result set of the query contains no values, the contain must throw the <code>ObjectNotFoundException</code>.</p>
</div>
<div class="paragraph">
<p>The Bean Provider will typically define a select method as a multi-object select method.</p>
</div>
</div>
<div class="sect4">
<h5 id="multi-object-select-methods"><a class="anchor" href="#multi-object-select-methods"></a>4.5.8.2. Multi-Object Select Methods</h5>
<div class="paragraph">
<p>Some select methods are designed to return multiple values.
For these multi-object select methods, the result type of the <code>ejbSelect&lt;METHOD&gt;</code> method is a collection of objects.</p>
</div>
<div class="paragraph">
<p>The Bean Provider uses the <code>java.util.Collection</code> interface or <code>java.util.Set</code> interface to define a collection type for the result type of a select method.
The type of the elements of the collection is determined by the type of the SELECT clause of the corresponding Enterprise Beans QL query.
If the Bean Provider uses the <code>java.util.Collection</code> interface, the collection of values returned by the container may contain duplicates if DISTINCT is not specified in the SELECT clause of the query.
If a query for a select method whose result type is <code>java.util.Set</code> does not specify DISTINCT in its SELECT clause, the container must interpret the query as if SELECT DISTINCT had been specified.</p>
</div>
<div class="paragraph">
<p>The collection of values returned by the container may contain null values if the select method returns the values of a cmr-field or cmp-field and null values are not eliminated by the query.</p>
</div>
<div class="paragraph">
<p>The following is an example of a multi-object select method definition in the <code>OrderBean</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// OrderBean implementation class</span>
<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">OrderBean</span> <span class="directive">implements</span> jakarta.ejb.EntityBean {
    ...
    public <span class="directive">abstract</span> java.util.Collection
                ejbSelectAllOrderedProducts(Customer customer)
        <span class="directive">throws</span> FinderException;
    <span class="comment">// internal finder method to find all products ordered</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="timer-notifications"><a class="anchor" href="#timer-notifications"></a>4.5.9. Timer Notifications</h4>
<div class="paragraph">
<p>An entity bean can be registered with the Enterprise Beans timer service for time-based event notifications if it implements the <code>jakarta.ejb.TimedObject</code> interface.
The container invokes the bean instance’s <code>ejbTimeout</code> method when a timer for the bean has expired.
See <a href="#a3258">Timer Service</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="a1524"><a class="anchor" href="#a1524"></a>4.5.10. Standard Application Exceptions for Entities</h4>
<div class="paragraph">
<p>The Enterprise Beans specification defines the following standard application exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jakarta.ejb.CreateException</p>
</li>
<li>
<p>jakarta.ejb.DuplicateKeyException</p>
</li>
<li>
<p>jakarta.ejb.FinderException</p>
</li>
<li>
<p>jakarta.ejb.ObjectNotFoundException</p>
</li>
<li>
<p>jakarta.ejb.RemoveException</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section describes the use of these exceptions by entity beans with container-managed persistence.</p>
</div>
<div class="sect4">
<h5 id="createexception"><a class="anchor" href="#createexception"></a>4.5.10.1. CreateException</h5>
<div class="paragraph">
<p>From the client’s perspective, a <code>CreateException</code> (or a subclass of <code>CreateException</code>) indicates that an application level error occurred during a <code>create&lt;METHOD&gt;</code> operation.
If a client receives this exception, the client does not know, in general, whether the entity object was created but not fully initialized, or not created at all.
Also, the client does not know whether or not the transaction has been marked for rollback.
(However, the client may determine the transaction status using the <code>UserTransaction</code> interface or the <code>setRollbackOnly</code> method of the <code>EJBContext</code> interface.)</p>
</div>
<div class="paragraph">
<p>Both the container and the Bean Provider may throw the <code>CreateException</code> (or subclass of <code>CreateException</code>) from the <code>create&lt;METHOD&gt;</code>, <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods to indicate an application-level error from the create or initialization operation.
Optionally, the container or Bean Provider may mark the transaction for rollback before throwing this exception.</p>
</div>
<div class="paragraph">
<p><em>The container or Bean Provider is encouraged to mark the transaction for rollback only if data integrity would be lost if the transaction were committed by the client.</em>
<em>Typically, when a <code>CreateException</code> is thrown, it leaves the database in a consistent state, allowing the client to recover.</em>
<em>For example, the <code>ejbCreate&lt;METHOD&gt;</code> method may throw the <code>CreateException</code> to indicate that the some of the arguments to the <code>create&lt;METHOD&gt;</code> method are invalid.</em></p>
</div>
<div class="paragraph">
<p>The container treats the <code>CreateException</code> as any other application exception.
See <a href="#a3227">Container Provider Responsibilities</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="duplicatekeyexception"><a class="anchor" href="#duplicatekeyexception"></a>4.5.10.2. DuplicateKeyException</h5>
<div class="paragraph">
<p>The <code>DuplicateKeyException</code> is a subclass of <code>CreateException</code>.
It may be thrown by the container to indicate to the client or local client that the entity object cannot be created because an entity object with the same key already exists.
The unique key causing the violation may be the primary key, or another key defined in the underlying database.</p>
</div>
<div class="paragraph">
<p>Normally, the container should not mark the transaction for rollback before throwing the exception.</p>
</div>
<div class="paragraph">
<p>When the client or local client receives a <code>DuplicateKeyException</code>, the client knows that the entity was not created, and that the transaction has not typically been marked for rollback.</p>
</div>
</div>
<div class="sect4">
<h5 id="finderexception"><a class="anchor" href="#finderexception"></a>4.5.10.3. FinderException</h5>
<div class="paragraph">
<p>From the client’s perspective, a <code>FinderException</code> (or a subclass of <code>FinderException</code>) indicates that an application level error occurred during the find operation.
Typically, the transaction has not been marked for rollback because of the <code>FinderException</code>.</p>
</div>
<div class="paragraph">
<p>The container throws the <code>FinderException</code> (or subclass of <code>FinderException</code>) from the implementation of a finder or select method to indicate an application-level error in the finder or select method.
The container should not, typically, mark the transaction for rollback before throwing the <code>FinderException</code>.</p>
</div>
<div class="paragraph">
<p>The container treats the <code>FinderException</code> as any other application exception.
See <a href="#a3227">Container Provider Responsibilities</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="objectnotfoundexception"><a class="anchor" href="#objectnotfoundexception"></a>4.5.10.4. ObjectNotFoundException</h5>
<div class="paragraph">
<p>The <code>ObjectNotFoundException</code> is a subclass of <code>FinderException</code>.
The container throws the <code>ObjectNotFoundException</code> from the implementation of a finder or select method to indicate that the requested object does not exist.</p>
</div>
<div class="paragraph">
<p>Only single-object finder or select methods (see <a href="#a1446">Finder Methods</a> and <a href="#a1479">Select Methods</a>) should throw this exception.
Multi-object finder or select methods must not throw this exception.
Multi-object finder or select methods should return an empty collection as an indication that no matching objects were found.</p>
</div>
</div>
<div class="sect4">
<h5 id="removeexception"><a class="anchor" href="#removeexception"></a>4.5.10.5. RemoveException</h5>
<div class="paragraph">
<p>From the client’s perspective, a <code>RemoveException</code> (or a subclass of <code>RemoveException</code>) indicates that an application level error occurred during a remove operation.
If a client receives this exception, the client does not know, in general, whether the entity object was removed or not.
The client also does not know if the transaction has been marked for
rollback.
(However, the client may determine the transaction status using the <code>UserTransaction</code> interface.)</p>
</div>
<div class="paragraph">
<p>The container or Bean Provider throws the <code>RemoveException</code> (or subclass of <code>RemoveException</code>) from a remove method to indicate an application-level error from the entity object removal operation.
Optionally, the container or Bean Provider may mark the transaction for rollback before throwing this exception.</p>
</div>
<div class="paragraph">
<p><em>The container or Bean Provider is encouraged to mark the transaction for rollback only if data integrity would be lost if the transaction were committed by the client.</em>
<em>Typically, when a <code>RemoveException</code> is thrown, it leaves the database in a consistent state, allowing the client to recover.</em></p>
</div>
<div class="paragraph">
<p>The container treats the <code>RemoveException</code> as any other application exception.
See <a href="#a3227">Container Provider Responsibilities</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a1554"><a class="anchor" href="#a1554"></a>4.5.11. Commit Options</h4>
<div class="paragraph">
<p>The Entity Bean protocol is designed to give the container the flexibility to select the disposition of the instance state at transaction commit time.
This flexibility allows the container to optimally manage the association of an entity object identity with the enterprise bean instances.</p>
</div>
<div class="paragraph">
<p>The container can select from the following commit-time options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Option A:</strong>
The container caches a &#8220;ready&#8221; instance between transactions.
The container knows that the bean instance has exclusive access to the state of the object in the persistent storage.
Therefore, the container does not have to synchronize the instance’s state from the persistent storage at the beginning of the next transaction or have to verify that the instance’s state is in sync with the persistent storage at the beginning of the next transaction.</p>
</li>
<li>
<p><strong>Option B:</strong>
The container caches a &#8220;ready&#8221; instance between transactions.
In contrast to Option A, in this option the instance may not have exclusive access to the state of the object in the persistent storage.
Therefore, the container must synchronize the instance’s state from the persistent storage at the beginning of the next transaction if the instance’s state in the persistent storage has changed.
Containers using optimistic concurrency control strategies may instead choose to rollback the transaction if this invariant has not been met:
The container must ensure that in order for a transaction to be successfully committed, the transaction must only operate on instance data that is in sync with the persistent storage at the beginning of the transaction.</p>
</li>
<li>
<p><strong>Option C:</strong>
The container does not cache a &#8220;ready&#8221; instance between transactions.
The container returns the instance to the pool of available instances after a transaction has completed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Variants of these strategies that capture the same semantics from the Bean Provider’s viewpoint may be employed, e.g., to optimize data access.</p>
</div>
<div class="paragraph">
<p>The following illustrative lazy loading strategies are consistent with the intent of these requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>ejbLoad</code> is called at the beginning of the transaction without the instance’s persistent state having been loaded from the persistent storage, the persistent state must be faulted in when <code>ejbLoad</code> causes the bean’s getter accessor methods to be invoked.
If the <code>ejbLoad</code> method is empty, data may be faulted in as needed in the course of executing the businesss methods of the bean.</p>
</li>
<li>
<p>If the instance’s persistent state is cached between transactions, <code>ejbLoad</code> need not be called and persistent data need not be faulted in from the persistent storage (unless it has not previously been accessed).
In this case, because <code>ejbLoad</code> has been previously called when the instance was entered into the ready state for the first time, and because the bean instance’s state is consistent with its persistent state, there is no need to call <code>ejbLoad</code> unless the instance’s state in the persistent storage has changed.
In this case, the container must ensure that in order for the transaction to be successfully committed, the instance’s persistent state was in sync with the persistent storage at the beginning of the transaction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table provides a summary of the commit-time options.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Summary of Commit-Time Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Write instance state to database</th>
<th class="tableblock halign-left valign-top">Instance stays ready</th>
<th class="tableblock halign-left valign-top">Instance state remains valid</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that the container synchronizes the instance’s state with the persistent storage at transaction commit for all three options.</p>
</div>
<div class="paragraph">
<p>The selection of the commit option is transparent to the entity bean implementation—the entity bean will work correctly regardless of the commit-time option chosen by the container.
The Bean Provider writes the entity bean in the same way.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note: The Bean Provider relies on the <code>ejbLoad</code> method to be invoked in order to resynchronize the bean’s transient state with its persistent state.
It is the responsibility of the container to call the <code>ejbLoad</code> method at the beginning of a new transaction if the bean instance’s persistent data has changed.
<sup class="footnote" id="_footnote_a3376">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup></em></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="concurrent-access-from-multiple-transactions"><a class="anchor" href="#concurrent-access-from-multiple-transactions"></a>4.5.12. Concurrent Access from Multiple Transactions</h4>
<div class="paragraph">
<p>When writing the entity bean business methods, the Bean Provider does not have to worry about concurrent access from multiple transactions.
The Bean Provider may assume that the container will ensure appropriate synchronization for entity objects that are accessed concurrently from multiple transactions.</p>
</div>
<div class="paragraph">
<p>The container typically uses one of the following implementation strategies to achieve proper synchronization.
(These strategies are illustrative, not prescriptive.)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container activates multiple instances of the entity bean, one for each transaction in which the entity object is being accessed.
The transaction synchronization is performed by the underlying database during the accessor method calls performed by the business methods, the <code>ejbTimeout</code> method, and by the <code>ejbLoad</code>, <code>ejbCreate&lt;METHOD&gt;</code>, <code>ejbStore</code>, and <code>ejbRemove</code> methods.
The commit-time options B and C in <a href="#a1554">Commit Options</a> apply to this type of container.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NTQiIGhlaWdodD0iMjMzIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoNjU0djIzM0gweiIvPgogIDx0ZXh0IHg9IjMzMiIgeT0iMTgiPgogICAgPHRzcGFuPkNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIyMzciIGhlaWdodD0iMTkzIiB4PSIyNDYiIHk9IjI5IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjI0LjEyNSIgcnk9IjI0LjEyNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTQgNDRoMTkwdjIwSDI1NHoiLz4KICA8dGV4dCB4PSIyNjIiIHk9IjYwIj4KICAgIDx0c3BhbiB4PSIyNjguOTQ1IiB5PSI2MCI+ZW50ZXJwcmlzZSBiZWFuIGluc3RhbmNlczwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjYuNjY3IDQ0aDY2LjY2NkMxMDEuNjY3IDQ0IDExMCA1NCAxMTAgNjRzLTguMzMzIDIwLTE2LjY2NyAyMEgyNi42NjdDMTguMzMzIDg0IDEwIDc0IDEwIDY0czguMzMzLTIwIDE2LjY2Ny0yMCIvPgogIDx0ZXh0IHg9IjE4IiB5PSI3MCI+CiAgICA8dHNwYW4geD0iMzQuNDQ1IiB5PSI3MCI+Q2xpZW50IDE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExNC40MzQgNjYuMzExbDgwLjY5OCA0Mi4wNjcgNC40MzQgMi4zMU0xOTcgMTAzbDIuNTY2IDcuNjg5TDE5MiAxMTMiLz4KICA8dGV4dCB4PSIxNjYiIHk9IjgwIj4KICAgIDx0c3Bhbj5UWCAxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNi42NjcgMTgyaDY2LjY2NmM4LjMzNCAwIDE2LjY2NyAxMCAxNi42NjcgMjBzLTguMzMzIDIwLTE2LjY2NyAyMEgyNi42NjdDMTguMzMzIDIyMiAxMCAyMTIgMTAgMjAyczguMzMzLTIwIDE2LjY2Ny0yMCIvPgogIDx0ZXh0IHg9IjE4IiB5PSIyMDgiPgogICAgPHRzcGFuIHg9IjM0LjQ0NSIgeT0iMjA4Ij5DbGllbnQgMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE0LjQzNCAxOTkuNjg5bDgwLjY5OC00Mi4wNjcgNC40MzQtMi4zMU0xOTIgMTUzbDcuNTY2IDIuMzExTDE5NyAxNjMiLz4KICA8dGV4dCB4PSIxNjYiIHk9IjE5NSI+CiAgICA8dHNwYW4+VFggMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjA3IDExM2g4MGMxMCAwIDIwIDEwIDIwIDIwcy0xMCAyMC0yMCAyMGgtODBjLTEwIDAtMjAtMTAtMjAtMjBzMTAtMjAgMjAtMjAiLz4KICA8dGV4dCB4PSIxOTYiIHk9IjEzMCI+CiAgICA8dHNwYW4geD0iMjA2LjcxOSIgeT0iMTMwIj5FbnRpdHkgb2JqZWN0PC90c3Bhbj4gPHRzcGFuIHg9IjIwNi40OTIiIHk9IjE0Ny42MDkiPkFjY291bnQgMTAwPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMTAuNzQzIDEyOS42ODVsMjMuNzcxLTIxLjA1NSAzLjc0My0zLjMxNU0zMzAgMTA1bDguMjU3LjMxNUwzMzggMTEzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNjIgODJoODBjMTAgMCAyMCAxMCAyMCAyMHMtMTAgMjAtMjAgMjBoLTgwYy0xMCAwLTIwLTEwLTIwLTIwczEwLTIwIDIwLTIwIi8+CiAgPHRleHQgeD0iMzUxIiB5PSI5OSI+CiAgICA8dHNwYW4geD0iMzYxLjQ5MiIgeT0iOTkiPkFjY291bnQgMTAwPC90c3Bhbj4gPHRzcGFuIHg9IjM3OC4yNTgiIHk9IjExNi42MDkiPmluIFRYIDE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ2Ni44MTcgMTAzLjM0MWw2NC41NSAxNy45NzYgNC44MTYgMS4zNDJNNTMyIDExNmw0LjE4MyA2LjY1OUw1MjkgMTI3Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMTAuNjM4IDEzNi40M2wyNC4wODYgMjIuNzEgMy42MzggMy40M00zMzggMTU1bC4zNjIgNy41N0wzMzAgMTYzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNjIgMTQ2aDgwYzEwIDAgMjAgMTAgMjAgMjBzLTEwIDIwLTIwIDIwaC04MGMtMTAgMC0yMC0xMC0yMC0yMHMxMC0yMCAyMC0yMCIvPgogIDx0ZXh0IHg9IjM1MSIgeT0iMTYzIj4KICAgIDx0c3BhbiB4PSIzNjEuNDkyIiB5PSIxNjMiPkFjY291bnQgMTAwPC90c3Bhbj4gPHRzcGFuIHg9IjM3OC4yNTgiIHk9IjE4MC42MDkiPmluIFRYIDI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ2Ni43OTYgMTY0LjU4Nmw2My42MTItMTguNzU4IDQuNzk2LTEuNDE0TTUyOCAxNDFsNy4yMDQgMy40MTRMNTMxIDE1MSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NDMgOTEuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3VjkxLjY2N0M2NDMgODMuMzMzIDYxOCA3NSA1OTMgNzVzLTUwIDguMzMzLTUwIDE2LjY2N3oiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU0MyA5MS42Njd2NjYuNjY2YzAgOC4zMzQgMjUgMTYuNjY3IDUwIDE2LjY2N3M1MC04LjMzMyA1MC0xNi42NjdWOTEuNjY3YzAgOC4zMzMtMjUgMTYuNjY2LTUwIDE2LjY2NlM1NDMgMTAwIDU0MyA5MS42NjdDNTQzIDgzLjMzMyA1NjggNzUgNTkzIDc1czUwIDguMzMzIDUwIDE2LjY2NyIvPgogIDx0ZXh0IHg9IjU1MiIgeT0iMTQ3Ij4KICAgIDx0c3BhbiB4PSI1NTIuNDkyIiB5PSIxNDciPkFjY291bnQgMTAwPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 35">
</div>
<div class="title">Figure 7. Multiple Clients Can Access the Same Entity Object Using Multiple Instances</div>
</div>
<div class="paragraph">
<p><em>With this strategy, the type of lock acquired by <code>ejbLoad</code> or get accessor method (if a lazy loading cache management strategy is used) leads to a trade-off.
If <code>ejbLoad</code> or the accessor method acquires an exclusive lock on the instance&#8217;s state in the database, the throughput of read-only transactions could be impacted.
If <code>ejbLoad</code> or the accessor method acquires a shared lock and the instance is updated, then either <code>ejbStore</code> or a set accessor method will need to promote the lock to an exclusive lock (which may cause a deadlock if it happens concurrently under multiple transactions), or, if the container uses an optimistic cache concurrency control strategy, the container will need to validate the state of the cache against the database at transaction commit (which may result in a rollback of the transaction).</em></p>
</div>
<div class="paragraph">
<p>It is expected that containers will provide deployment-time configuration options that will allow control to be exercised over the logical transaction isolation levels that their caching strategies provide.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container acquires exclusive access to the entity object’s state in the database.
The container activates a single instance and serializes the access from multiple transactions to
this instance.
The commit-time option A in <a href="#a1554">Commit Options</a> applies to this type of container.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NTQiIGhlaWdodD0iMjMzIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjMzMiIgeT0iMTgiPgogICAgPHRzcGFuPkNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIyMzciIGhlaWdodD0iMTkzIiB4PSIyNDYiIHk9IjI5IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjI0LjEyNSIgcnk9IjI0LjEyNSIvPgogIDx0ZXh0IHg9IjI2MiIgeT0iNjAiPgogICAgPHRzcGFuIHg9IjI2OC45NDUiIHk9IjYwIj5lbnRlcnByaXNlIGJlYW4gaW5zdGFuY2VzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNi42NjcgNDRoNjYuNjY2QzEwMS42NjcgNDQgMTEwIDU0IDExMCA2NHMtOC4zMzMgMjAtMTYuNjY3IDIwSDI2LjY2N0MxOC4zMzMgODQgMTAgNzQgMTAgNjRzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMTgiIHk9IjcwIj4KICAgIDx0c3BhbiB4PSIzNC40NDUiIHk9IjcwIj5DbGllbnQgMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE0LjQzNCA2Ni4zMTFsODAuNjk4IDQyLjA2NyA0LjQzNCAyLjMxTTE5NyAxMDNsMi41NjYgNy42ODlMMTkyIDExMyIvPgogIDx0ZXh0IHg9IjE2NiIgeT0iODAiPgogICAgPHRzcGFuPlRYIDE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI2LjY2NyAxODJoNjYuNjY2YzguMzM0IDAgMTYuNjY3IDEwIDE2LjY2NyAyMHMtOC4zMzMgMjAtMTYuNjY3IDIwSDI2LjY2N0MxOC4zMzMgMjIyIDEwIDIxMiAxMCAyMDJzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMTgiIHk9IjIwOCI+CiAgICA8dHNwYW4geD0iMzQuNDQ1IiB5PSIyMDgiPkNsaWVudCAyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTQuNDM0IDE5OS42ODlsODAuNjk4LTQyLjA2NyA0LjQzNC0yLjMxTTE5MiAxNTNsNy41NjYgMi4zMTFMMTk3IDE2MyIvPgogIDx0ZXh0IHg9IjE2NiIgeT0iMTk1Ij4KICAgIDx0c3Bhbj5UWCAyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMDcgMTEzaDgwYzEwIDAgMjAgMTAgMjAgMjBzLTEwIDIwLTIwIDIwaC04MGMtMTAgMC0yMC0xMC0yMC0yMHMxMC0yMCAyMC0yMCIvPgogIDx0ZXh0IHg9IjE5NiIgeT0iMTMwIj4KICAgIDx0c3BhbiB4PSIyMDYuNzE5IiB5PSIxMzAiPkVudGl0eSBvYmplY3Q8L3RzcGFuPiA8dHNwYW4geD0iMjA2LjQ5MiIgeT0iMTQ3LjYwOSI+QWNjb3VudCAxMDA8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMxMC43NDMgMTI5LjY4NWwyMy43NzEtMjEuMDU1IDMuNzQzLTMuMzE1TTMzMCAxMDVsOC4yNTcuMzE1TDMzOCAxMTMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM2MiA4Mmg4MGMxMCAwIDIwIDEwIDIwIDIwcy0xMCAyMC0yMCAyMGgtODBjLTEwIDAtMjAtMTAtMjAtMjBzMTAtMjAgMjAtMjAiLz4KICA8dGV4dCB4PSIzNTEiIHk9Ijk5Ij4KICAgIDx0c3BhbiB4PSIzNjEuNDkyIiB5PSI5OSI+QWNjb3VudCAxMDA8L3RzcGFuPiA8dHNwYW4geD0iMzc4LjI1OCIgeT0iMTE2LjYwOSI+aW4gVFggMTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjI2OSIgeT0iMTg3Ij4KICAgIDx0c3BhbiB4PSIyNjkiIHk9IjE4NyI+Y29udGFpbmVyIGJsb2NrcyBDbGllbnQgMjwvdHNwYW4+IDx0c3BhbiB4PSIyNjkiIHk9IjIwNC42MDkiPnVudGlsIENsaWVudCAxIGZpbmlzaGVzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjYuODE3IDEwMy4zNDFsNjQuNTUgMTcuOTc2IDQuODE2IDEuMzQyTTUzMiAxMTZsNC4xODMgNi42NTlMNTI5IDEyNyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NDMgOTEuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3VjkxLjY2N0M2NDMgODMuMzMzIDYxOCA3NSA1OTMgNzVzLTUwIDguMzMzLTUwIDE2LjY2N3oiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU0MyA5MS42Njd2NjYuNjY2YzAgOC4zMzQgMjUgMTYuNjY3IDUwIDE2LjY2N3M1MC04LjMzMyA1MC0xNi42NjdWOTEuNjY3YzAgOC4zMzMtMjUgMTYuNjY2LTUwIDE2LjY2NlM1NDMgMTAwIDU0MyA5MS42NjdDNTQzIDgzLjMzMyA1NjggNzUgNTkzIDc1czUwIDguMzMzIDUwIDE2LjY2NyIvPgogIDx0ZXh0IHg9IjU1MiIgeT0iMTQ3Ij4KICAgIDx0c3BhbiB4PSI1NTIuNDkyIiB5PSIxNDciPkFjY291bnQgMTAwPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 36">
</div>
<div class="title">Figure 8. Multiple Clients Can Access the Same Entity Object Using Single Instance</div>
</div>
</div>
<div class="sect3">
<h4 id="a1596"><a class="anchor" href="#a1596"></a>4.5.13. Non-reentrant and Re-entrant Instances</h4>
<div class="paragraph">
<p>An entity Bean Provider can specify that an entity bean is non-reentrant.
If an instance of a non-reentrant entity bean executes a client request in a given transaction context, and another request with the same transaction context arrives for the same entity object, the container will throw an exception to the second request.
This rule allows the Bean Provider to program the entity bean as single-threaded, non-reentrant code.</p>
</div>
<div class="paragraph">
<p>The functionality of entity beans with container-managed persistence may require loopbacks in the same transaction context.
An example of a loopback is when the client calls entity object A, A calls entity object B, and B calls back A in the same transaction context.
The entity bean’s method invoked by the loopback shares the current execution context (which includes the transaction and security contexts) with the Bean’s method invoked by the client.</p>
</div>
<div class="paragraph">
<p>If the entity bean is specified as non-reentrant in the deployment descriptor, the container must reject an attempt to re-enter the instance via the entity bean’s component interface while the instance is executing a business method.
(This can happen, for example, if the instance has invoked another enterprise bean, and the other enterprise bean tries to make a loopback call.)
If the attempt is made to reenter the instance through the remote interface, the container must throw the <code>java.rmi.RemoteException</code> to the caller.
If the attempt is made to reenter the instance through the local interface, the container must throw the <code>jakarta.ejb.EJBException</code> to the caller.
The container must allow the call if the Bean’s deployment descriptor specifies that the entity bean is re-entrant.</p>
</div>
<div class="paragraph">
<p>Re-entrant entity beans must be programmed and used with caution.
First, the Bean Provider must code the entity bean with the anticipation of a loopback call.
Second, since the container cannot, in general, tell a loopback from a concurrent call from a different client, the client programmer must be careful to avoid code that could lead to a concurrent call in the same transaction context.</p>
</div>
<div class="paragraph">
<p>Concurrent calls in the same transaction context targeted at the same entity object are illegal and may lead to
unpredictable results.
Since the container cannot, in general, distinguish between an illegal concurrent call and a legal loopback, application programmers are encouraged to avoid using loopbacks.
Entity beans that do not need callbacks should be marked as non-reentrant in the deployment descriptor, allowing the container to detect and prevent illegal concurrent calls from clients.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="responsibilities-of-the-enterprise-bean-provider"><a class="anchor" href="#responsibilities-of-the-enterprise-bean-provider"></a>4.6. Responsibilities of the Enterprise Bean Provider</h3>
<div class="paragraph">
<p>This section describes the responsibilities of an entity Bean Provider to ensure that an entity bean with container-managed persistence can be deployed in any Enterprise Beans container.</p>
</div>
<div class="sect3">
<h4 id="classes-and-interfaces"><a class="anchor" href="#classes-and-interfaces"></a>4.6.1. Classes and Interfaces</h4>
<div class="paragraph">
<p>The entity Bean Provider is responsible for providing the following class files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Entity bean class and any dependent classes</p>
</li>
<li>
<p>Primary key class</p>
</li>
<li>
<p>Entity bean’s remote interface and entity bean’s remote home interface, if the entity bean provides a remote client view</p>
</li>
<li>
<p>Entity bean’s local interface and local home interface, if the entity bean provides a local client view</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Bean Provider must provide a remote interface and a remote home interface or a local interface and a local home interface for the bean.
The Bean Provider may provide a remote interface, remote home interface, local interface, and local home interface for the bean.
Other combinations are not allowed.</p>
</div>
</div>
<div class="sect3">
<h4 id="enterprise-bean-class"><a class="anchor" href="#enterprise-bean-class"></a>4.6.2. Enterprise Bean Class</h4>
<div class="paragraph">
<p>The following are the requirements for an entity bean class:</p>
</div>
<div class="paragraph">
<p>The class must implement, directly or indirectly, the <code>jakarta.ejb.EntityBean</code> interface.</p>
</div>
<div class="paragraph">
<p>The class may implement, directly or indirectly, the <code>jakarta.ejb.TimedObject</code> interface.</p>
</div>
<div class="paragraph">
<p>The class must be defined as public and must be abstract.
The class must be a top level class.</p>
</div>
<div class="paragraph">
<p>The class must define a public constructor that takes no arguments.</p>
</div>
<div class="paragraph">
<p>The class must not define the finalize() method.</p>
</div>
<div class="paragraph">
<p>The class may, but is not required to, implement the entity bean’s component interface.
<sup class="footnote" id="_footnote_a3377">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup>
If the class implements the entity bean’s component interface, the class must provide no-op implementations of the methods defined by that interface.
The container will never invoke these methods on the bean instances at runtime.</p>
</div>
<div class="paragraph">
<p>The entity bean class must implement the business methods, and the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods as described later in this section.</p>
</div>
<div class="paragraph">
<p>The entity bean class must implement the <code>ejbHome&lt;METHOD&gt;</code> methods that correspond to the home business methods specified in the bean’s home interface.
These methods are executed on an instance in the pooled state; hence they must not access state that is particular to a specific bean instance (e.g., the accessor methods for the bean’s abstract persistence schema must not be used by these methods).</p>
</div>
<div class="paragraph">
<p>The entity bean class must implement the get and set accessor methods of the bean’s abstract persistence schema as <code>abstract</code> methods.</p>
</div>
<div class="paragraph">
<p>The entity bean class may have superclasses and/or superinterfaces.
If the entity bean has superclasses, the business methods, the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods, and the methods of the <code>EntityBean</code> interface and/or the <code>TimedObject</code> interface may be implemented in the enterprise bean class or in any of its superclasses.</p>
</div>
<div class="paragraph">
<p>The entity bean class is allowed to implement other methods (for example helper methods invoked internally by the business methods) in addition to the methods required by the Enterprise Beans specification.</p>
</div>
<div class="paragraph">
<p>The entity bean class does not implement the finder methods.
The implementations of the finder methods are provided by the container.</p>
</div>
<div class="paragraph">
<p>The entity bean class must implement any <code>ejbSelect&lt;METHOD&gt;</code> methods as abstract methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="dependent-value-classes-2"><a class="anchor" href="#dependent-value-classes-2"></a>4.6.3. Dependent Value Classes</h4>
<div class="paragraph">
<p>The following are the requirements for a dependent value class:</p>
</div>
<div class="paragraph">
<p>The class must be defined as <code>public</code> and must not be <code>abstract</code>.</p>
</div>
<div class="paragraph">
<p>The class must be serializable.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbcreatemethod-methods"><a class="anchor" href="#ejbcreatemethod-methods"></a>4.6.4. ejbCreate&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>The entity bean class must implement the <code>ejbCreate&lt;METHOD&gt;</code> methods that correspond to the <code>create&lt;METHOD&gt;</code> methods specified in the entity bean’s home interface or local home interface.</p>
</div>
<div class="paragraph">
<p>The entity bean class may define zero or more <code>ejbCreate&lt;METHOD&gt;</code> methods whose signatures must follow these rules:</p>
</div>
<div class="paragraph">
<p>The method name must have <code>ejbCreate</code> as its prefix.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The return type must be the entity bean’s primary key type.</p>
</div>
<div class="paragraph">
<p>If the <code>ejbCreate&lt;METHOD&gt;</code> method corresponds to a <code>create&lt;METHOD&gt;</code> on the entity bean’s remote home interface, the method arguments and return value types must be legal types for RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause must define the <code>jakarta.ejb.CreateException</code>.
The <code>throws</code> clause may define arbitrary application specific exceptions.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the <code>ejbCreate</code> method to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
The <code>ejbCreate</code> method of an entity bean with cmp-version 2.x must not throw the <code>java.rmi.RemoteException</code>.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="ejbpostcreatemethod-methods"><a class="anchor" href="#ejbpostcreatemethod-methods"></a>4.6.5. ejbPostCreate&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>For each <code>ejbCreate&lt;METHOD&gt;</code> method, the entity bean class must define a matching <code>ejbPostCreate&lt;METHOD&gt;</code> method, using the following rules:</p>
</div>
<div class="paragraph">
<p>The method name must have <code>ejbPostCreate</code> as its prefix.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The return type must be <code>void</code>.</p>
</div>
<div class="paragraph">
<p>The method arguments must be the same as the arguments of the matching <code>ejbCreate&lt;METHOD&gt;</code> method.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions, including the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the <code>ejbPostCreate</code> method to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
The <code>ejbPostCreate</code> method of an entity bean with cmp-version 2.x must not throw the <code>java.rmi.RemoteException</code>.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="ejbhomemethod-methods"><a class="anchor" href="#ejbhomemethod-methods"></a>4.6.6. ejbHome&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>The entity bean class may define zero or more home methods whose signatures must follow the following rules:</p>
</div>
<div class="paragraph">
<p>An <code>ejbHome&lt;METHOD&gt;</code> method must exist for every home <code>&lt;METHOD&gt;</code> method on the entity bean’s remote home or local home interface.
The method name must have <code>ejbHome</code> as its prefix followed by the name of the <code>&lt;METHOD&gt;</code> method in which the first character has been uppercased.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>static</code>.</p>
</div>
<div class="paragraph">
<p>If the <code>ejbHome&lt;METHOD&gt;</code> method corresponds to a home <code>&lt;METHOD&gt;</code> on the entity bean’s remote home interface, the method argument and return value types must be legal types for RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions.
The <code>throws</code> clause must not throw the <code>java.rmi.RemoteException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbselectmethod-methods"><a class="anchor" href="#ejbselectmethod-methods"></a>4.6.7. ejbSelect&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>The entity bean class may define one or more select methods whose signatures must follow the following rules:</p>
</div>
<div class="paragraph">
<p>The method name must have <code>ejbSelect</code> as its prefix.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>abstract</code>.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause must define the <code>jakarta.ejb.FinderException</code>.
The <code>throws</code> clause may define arbitrary application specific exceptions.</p>
</div>
</div>
<div class="sect3">
<h4 id="business-methods"><a class="anchor" href="#business-methods"></a>4.6.8. Business Methods</h4>
<div class="paragraph">
<p>The entity bean class may define zero or more business methods whose signatures must follow these rules:</p>
</div>
<div class="paragraph">
<p>The method names can be arbitrary, but they must not start with &#8216;ejb&#8217; to avoid conflicts with the callback methods used by the Enterprise Beans architecture.</p>
</div>
<div class="paragraph">
<p>The business method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>If the business method corresponds to a method of the entity bean’s remote interface, the method argument and return value types must be legal types for RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the business methods to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
The business methods of an entity bean with cmp-version 2.x must not throw the java.rmi.RemoteException.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-remote-interface-2"><a class="anchor" href="#entity-beans-remote-interface-2"></a>4.6.9. Entity Bean’s Remote Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s remote interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBObject</code> interface.</p>
</div>
<div class="paragraph">
<p>The methods defined in the remote interface must follow the rules for RMI-IIOP.
This means that their argument and return value types must be valid types for RMI-IIOP, and their <code>throws</code> clauses must include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The remote interface is allowed to have superinterfaces.
Use of interface inheritance is subject to the RMI-IIOP rules for the definition of remote interfaces.</p>
</div>
<div class="paragraph">
<p>For each method defined in the remote interface, there must be a matching method in the entity bean’s class.
The matching method must have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same name.</p>
</li>
<li>
<p>The same number and types of its arguments, and the same return type.</p>
</li>
<li>
<p>All the exceptions defined in the <code>throws</code> clause of the matching method of the enterprise Bean class must be defined in the <code>throws</code> clause of the method of the remote interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The remote interface methods must not expose local interface types, local home interface types, timer handles, or the managed collection classes that are used for entity beans with container-managed persistence as arguments or results.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-remote-home-interface-2"><a class="anchor" href="#entity-beans-remote-home-interface-2"></a>4.6.10. Entity Bean’s Remote Home Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s home interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBHome</code> interface.</p>
</div>
<div class="paragraph">
<p>The methods defined in this interface must follow the rules for RMI-IIOP.
This means that their argument and return types must be of valid types for RMI-IIOP, and their <code>throws</code> clauses must include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The remote home interface is allowed to have superinterfaces.
Use of interface inheritance is subject to the RMI-IIOP rules for the definition of remote interfaces.</p>
</div>
<div class="paragraph">
<p>Each method defined in the remote home interface must be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A create method.</p>
</li>
<li>
<p>A finder method.</p>
</li>
<li>
<p>A home method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each create method must be named &#8220;<code>create&lt;METHOD&gt;</code>&#8221;, e.g. <code>createLargeAccounts</code>.
Each create method name must match one of the <code>ejbCreate&lt;METHOD&gt;</code> methods defined in the enterprise bean class.
The matching <code>ejbCreate&lt;METHOD&gt;</code> method must have the same number and types of its arguments.
(Note that the return type is different.)</p>
</div>
<div class="paragraph">
<p>The return type for a <code>create&lt;METHOD&gt;</code> method must be the entity bean’s remote interface type.</p>
</div>
<div class="paragraph">
<p>All the exceptions defined in the <code>throws</code> clause of the matching <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods of the enterprise bean class must be included in the <code>throws</code> clause of the matching create method of the home interface (i.e., the set of exceptions defined for the create method must be a superset of the union of exceptions defined for the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a <code>create&lt;METHOD&gt;</code> method must include the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p>Each finder method must be named &#8220;<code>find&lt;METHOD&gt;</code>&#8221; (e.g. <code>findLargeAccounts</code>).</p>
</div>
<div class="paragraph">
<p>The return type for a <code>find&lt;METHOD&gt;</code> method must be the entity bean’s remote interface type (for a single-object finder), or a collection thereof (for a multi-object finder).</p>
</div>
<div class="paragraph">
<p>The remote home interface must always include the <code>findByPrimaryKey</code> method, which is always a single-object finder.
The method must declare the primary key class as the method argument.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a finder method must include the <code>jakarta.ejb.FinderException</code>.</p>
</div>
<div class="paragraph">
<p>Home methods can have arbitrary names, but they must not start with &#8220;<code>create</code>&#8221;, &#8220;<code>find</code>&#8221;, or &#8220;<code>remove</code>&#8221;.
Their argument and return types must be of valid types for RMI-IIOP, and their <code>throws</code> clauses must include the <code>java.rmi.RemoteException</code>.
The matching <code>ejbHome</code> method specified in the entity bean class must have the same number and types of arguments and must return the same type as the home method as specified in the remote home interface of the bean.</p>
</div>
<div class="paragraph">
<p>The remote home interface methods must not expose local interface types, local home interface types, timers or timer handles, or the managed collection classes that are used for entity beans with container-managed persistence as arguments or results.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-local-interface-2"><a class="anchor" href="#entity-beans-local-interface-2"></a>4.6.11. Entity Bean’s Local Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s local interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBLocalObject</code> interface.</p>
</div>
<div class="paragraph">
<p>For each method defined in the local interface, there must be a matching method in the entity bean’s class.
The matching method must have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same name.</p>
</li>
<li>
<p>The same number and types of its arguments, and the same return type.</p>
</li>
<li>
<p>All the exceptions defined in the <code>throws</code> clause of the matching method of the enterprise Bean class must be defined in the <code>throws</code> clause of the method of the local interface.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-local-home-interface"><a class="anchor" href="#entity-beans-local-home-interface"></a>4.6.12. Entity Bean’s Local Home Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s local home interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBLocalHome</code> interface.</p>
</div>
<div class="paragraph">
<p>Each method defined in the home interface must be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A create method.</p>
</li>
<li>
<p>A finder method.</p>
</li>
<li>
<p>A home method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each <code>create</code> method must be named &#8220;<code>create&lt;METHOD&gt;</code>&#8221;, e.g. <code>createLargeAccounts</code>.
Each create method name must match one of the <code>ejbCreate&lt;METHOD&gt;</code> methods defined in the enterprise bean class.
The matching <code>ejbCreate&lt;METHOD&gt;</code> method must have the same number and types of its arguments.
(Note that the return type is different.)</p>
</div>
<div class="paragraph">
<p>The return type for a <code>create&lt;METHOD&gt;</code> method on the local home interface must be the entity bean’s local interface type.</p>
</div>
<div class="paragraph">
<p>All the exceptions defined in the <code>throws</code> clause of the matching <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods of the enterprise bean class must be included in the <code>throws</code> clause of the matching create method of the local home interface (i.e., the set of exceptions defined for the <code>create</code> method must be a superset of the union of exceptions defined for the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a <code>create&lt;METHOD&gt;</code> method must include the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p>Each finder method must be named &#8220;<code>find&lt;METHOD&gt;</code>&#8221; (e.g. <code>findLargeAccounts</code>).</p>
</div>
<div class="paragraph">
<p>The return type for a <code>find&lt;METHOD&gt;</code> method defined on the local home interface must be the entity bean’s local interface type (for a single-object finder), or a collection thereof (for a multi-object finder).</p>
</div>
<div class="paragraph">
<p>The local home interface must always include the <code>findByPrimaryKey</code> method, which is always a single-object finder.
The method must declare the primary key class as the method argument.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a finder method must include the <code>jakarta.ejb.FinderException</code>.</p>
</div>
<div class="paragraph">
<p>Home methods can have arbitrary names, but they must not start with &#8220;<code>create</code>&#8221;, &#8220;<code>find</code>&#8221;, or &#8220;<code>remove</code>&#8221;.
The matching <code>ejbHome</code> method specified in the entity bean class must have the same number and types of arguments and must return the same type as the home method as specified in the home interface of the bean.
The <code>throws</code> clause of a home method defined on the local home interface must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="a1725"><a class="anchor" href="#a1725"></a>4.6.13. Entity Bean’s Primary Key Class</h4>
<div class="paragraph">
<p>The Bean Provider must specify a primary key class in the deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The primary key type must be a legal Value Type in RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The class must provide suitable implementation of the <code>hashCode()</code> and <code>equals(Object other)</code> methods to simplify the management of the primary keys by the container.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-deployment-descriptor"><a class="anchor" href="#entity-beans-deployment-descriptor"></a>4.6.14. Entity Bean’s Deployment Descriptor</h4>
<div class="paragraph">
<p>The Bean Provider must specify the relationships in which the entity beans participate in the <code>relationships</code> element.</p>
</div>
<div class="paragraph">
<p>The Bean Provider must provide unique names to designate entity beans as follows, and as described in <a href="#a1013">The Bean Provider’s View of the Deployment Descriptor</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Bean Provider must specify unique names for entity beans which are defined in the ejb-jar file by using the <code>ejb-name</code> element.</p>
</li>
<li>
<p>The Bean Provider must specify a unique abstract schema name for an entity bean using the <code>abstract-schema-name</code> deployment descriptor element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Bean Provider must define a query for each finder or select method except <code>findByPrimaryKey(key)</code>.
Typically this will be provided as the content of the ejb-ql element contained in the query element for the entity bean.
The syntax of Enterprise Beans QL is defined in <a href="#a1840">Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</a>.</p>
</div>
<div class="paragraph">
<p>Since Enterprise Beans QL query strings are embedded in the deployment descriptor, which is an XML document, it may be necessary to encode the following characters in the query string: &#8220;<code>&gt;</code>&#8221;, &#8220;<code>&lt;</code>&#8221;.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-responsibilities-of-the-container-provider"><a class="anchor" href="#the-responsibilities-of-the-container-provider"></a>4.7. The Responsibilities of the Container Provider</h3>
<div class="paragraph">
<p>This section describes the responsibilities of the Container Provider to support entity beans.
The Container Provider is responsible for providing the deployment tools, and for managing the entity beans at runtime, including their persistent state and relationships.</p>
</div>
<div class="paragraph">
<p><em>Because the Enterprise Beans specification does not define the API between deployment tools and the container, we assume that the deployment tools described in this section are provided by the Container Provider.
Alternatively, the deployment tools may be provided by a different vendor who uses the container vendor’s specific API.</em></p>
</div>
<div class="sect3">
<h4 id="generation-of-implementation-classes"><a class="anchor" href="#generation-of-implementation-classes"></a>4.7.1. Generation of Implementation Classes</h4>
<div class="paragraph">
<p>The deployment tools provided by the Container Provider are responsible for the generation of additional classes when the entity bean is deployed.
The tools obtain the information that they need for generation of the additional classes by introspecting the classes and interfaces provided by the Bean Provider and by examining the entity bean’s deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The deployment tools must generate the following classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A class that implements the entity bean’s remote home interface (i.e., the entity <code>EJBHome</code> class).</p>
</li>
<li>
<p>A class that implements the entity bean’s remote interface (i.e., the entity <code>EJBObject</code> class).</p>
</li>
<li>
<p>A class that implements the entity bean’s local home interface (i.e., the entity <code>EJBLocalHome</code> class).</p>
</li>
<li>
<p>A class that implements the entity bean’s local interface (i.e., the <code>EJBLocalObject</code> class).</p>
</li>
<li>
<p>A class that implements the entity bean class (i.e., a concrete class corresponding to the abstract entity bean class that was provided by the Bean Provider).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The deployment tools may also generate a class that mixes some container-specific code with the entity bean class.
The code may, for example, help the container to manage the entity bean instances at runtime.
Tools can use subclassing, delegation, and code generation.</p>
</div>
<div class="paragraph">
<p>The deployment tools may also allow generation of additional code that wraps the business methods and that is used to customize the business logic for an existing operational environment.
For example, a wrapper for a <code>debit</code> function on the <code>Account</code> bean may check that the debited amount does not exceed a certain limit, or perform security checking that is specific to the operational environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="enterprise-bean-class-2"><a class="anchor" href="#enterprise-bean-class-2"></a>4.7.2. Enterprise Bean Class</h4>
<div class="paragraph">
<p>The following are the requirements for a concrete entity bean class:</p>
</div>
<div class="paragraph">
<p>The class must extend the abstract entity bean class provided by the Bean Provider.</p>
</div>
<div class="paragraph">
<p>The class must be defined as <code>public</code> and must not be <code>abstract</code>.</p>
</div>
<div class="paragraph">
<p>The class must define a public constructor that takes no arguments.</p>
</div>
<div class="paragraph">
<p>The class must implement the get and set accessor methods of the bean’s abstract persistence schema.</p>
</div>
<div class="paragraph">
<p>The class must not define the <code>finalize</code> method.</p>
</div>
<div class="paragraph">
<p>The entity bean class must implement the <code>ejbFind&lt;METHOD&gt;</code> methods.</p>
</div>
<div class="paragraph">
<p>The entity bean class must implement the <code>ejbSelect&lt;METHOD&gt;</code> methods.</p>
</div>
<div class="paragraph">
<p>The entity bean class is allowed to implement other methods in addition to the methods required by the Enterprise Beans specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbfindmethod-methods"><a class="anchor" href="#ejbfindmethod-methods"></a>4.7.3. ejbFind&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>For each <code>find&lt;METHOD&gt;</code> method in the remote home interface or local home interface of the entity bean, there must be a corresponding <code>ejbFind&lt;METHOD&gt;</code> method with the same argument types in the concrete entity bean class.</p>
</div>
<div class="paragraph">
<p>The method name must have <code>ejbFind</code> as its prefix.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>If the <code>ejbFind&lt;METHOD&gt;</code> method corresponds to a <code>find&lt;METHOD&gt;</code> on the entity bean’s remote home interface, the method argument and return value types must be legal types for RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The return type of an <code>ejbFind&lt;METHOD&gt;</code> method must be the entity bean’s primary key type, or a collection of primary keys.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause must define the <code>jakarta.ejb.FinderException</code>.
The <code>throws</code> clause may define arbitrary application specific exceptions.</p>
</div>
<div class="paragraph">
<p>Every finder method except <code>ejbFindByPrimaryKey(key)</code> is specified in the <code>query</code> deployment descriptor element for the entity.
The container must use the Enterprise Beans QL query string that is the content of the <code>ejb-ql</code> element or the descriptive query specification contained in the <code>description</code> element as the definition of the query of the corresponding <code>ejbFind&lt;METHOD&gt;</code> method.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbselectmethod-methods-2"><a class="anchor" href="#ejbselectmethod-methods-2"></a>4.7.4. ejbSelect&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>For each <code>ejbSelect&lt;METHOD&gt;</code> method in the abstract entity bean class, there must be a method with the same argument and result types in the concrete entity bean class.</p>
</div>
<div class="paragraph">
<p>Every select method is specified in a <code>query</code> deployment descriptor element for the entity.
The container must use the Enterprise Beans QL query string that is the content of the <code>ejb-ql</code> element or the descriptive query specification that is contained in the <code>description</code> element as the definition of the query of the corresponding <code>ejbSelect&lt;METHOD&gt;</code> method.</p>
</div>
<div class="paragraph">
<p>The container must use the contents of the <code>query</code> element, the corresponding Enterprise Beans QL string and the type of the values selected as specified by the SELECT clause to determine the type of the values returned by a select method.</p>
</div>
<div class="paragraph">
<p>The container must ensure that there are no duplicates returned by a select method if the return type is <code>java.util.Set</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejbhome-class"><a class="anchor" href="#entity-ejbhome-class"></a>4.7.5. Entity EJBHome Class</h4>
<div class="paragraph">
<p>The entity <code>EJBHome</code> class, which is generated by deployment tools, implements the entity bean’s remote home interface.
This class implements the methods of the <code>jakarta.ejb.EJBHome</code> interface, and the type-specific create and finder methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>create&lt;METHOD&gt;</code> method invokes a matching <code>ejbCreate&lt;METHOD&gt;</code> method, followed by the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method, passing the <code>create&lt;METHOD&gt;</code> parameters to these matching methods.</p>
</div>
<div class="paragraph">
<p>The implementation of the remove methods defined in the <code>jakarta.ejb.EJBHome</code> interface must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>find&lt;METHOD&gt;</code> method invokes a matching <code>ejbFind&lt;METHOD&gt;</code> method.
The implementation of the <code>find&lt;METHOD&gt;</code> method must create an entity object reference for the primary key returned from the <code>ejbFind&lt;METHOD&gt;</code> and return the entity object reference to the client.
If the <code>ejbFind&lt;METHOD&gt;</code> method returns a collection of primary keys, the implementation of the <code>find&lt;METHOD&gt;</code> method must create a collection of entity object references for the primary keys and return the collection to the client.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>&lt;METHOD&gt;</code> method invokes a matching <code>ejbHome&lt;METHOD&gt;</code> method (in which the first character of <code>&lt;METHOD&gt;</code> is uppercased in the name of the <code>ejbHome&lt;METHOD&gt;</code> method), passing the parameters of the <code>&lt;METHOD&gt;</code> method to the matching <code>ejbHome&lt;METHOD&gt;</code> method.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejbobject-class"><a class="anchor" href="#entity-ejbobject-class"></a>4.7.6. Entity EJBObject Class</h4>
<div class="paragraph">
<p>The entity <code>EJBObject</code> class, which is generated by deployment tools, implements the entity bean’s remote interface.
It implements the methods of the <code>jakarta.ejb.EJBObject</code> interface and the remote business methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> method (defined in the <code>jakarta.ejb.EJBObject</code> interface) must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each remote business method must activate an instance (if an instance is not already in the ready state) and invoke the matching business method on the instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejblocalhome-class"><a class="anchor" href="#entity-ejblocalhome-class"></a>4.7.7. Entity EJBLocalHome Class</h4>
<div class="paragraph">
<p>The entity <code>EJBLocalHome</code> class, which is generated by deployment tools, implements the entity bean’s local home interface.
This class implements the methods of the <code>jakarta.ejb.EJBLocalHome</code> interface, and the type-specific create and finder methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>create&lt;METHOD&gt;</code> method invokes a matching <code>ejbCreate&lt;METHOD&gt;</code> method, followed by the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method, passing the <code>create&lt;METHOD&gt;</code> parameters to these matching methods.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> method defined in the <code>jakarta.ejb.EJBLocalHome</code> interface must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>find&lt;METHOD&gt;</code> method invokes a matching <code>ejbFind&lt;METHOD&gt;</code> method.
The implementation of the <code>find&lt;METHOD&gt;</code> method must create a local entity object reference for the primary key returned from the <code>ejbFind&lt;METHOD&gt;</code> and return the local entity object reference to the local client.
If the <code>ejbFind&lt;METHOD</code>&gt; method returns a collection of primary keys, the implementation of the <code>find&lt;METHOD&gt;</code> method must create a collection of local entity object references for the primary keys and return the collection to the local client.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>&lt;METHOD&gt;</code> home method invokes a matching <code>ejbHome&lt;METHOD&gt;</code> method (in which the first character of <code>&lt;METHOD&gt;</code> is uppercased in the name of the <code>ejbHome&lt;METHOD&gt;</code> method), passing the parameters of the <code>&lt;METHOD&gt;</code> method to the matching <code>ejbHome&lt;METHOD&gt;</code> method.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejblocalobject-class"><a class="anchor" href="#entity-ejblocalobject-class"></a>4.7.8. Entity EJBLocalObject Class</h4>
<div class="paragraph">
<p>The entity <code>EJBLocalObject</code> class, which is generated by deployment tools, implements the entity bean’s local interface.
It implements the methods of the <code>jakarta.ejb.EJBLocalObject</code> interface and the local business methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> method (defined in the <code>jakarta.ejb.EJBLocalObject</code> interface) must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each local business method must activate an instance (if an instance is not already in the ready state) and invoke the matching business method on the instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="handle-class"><a class="anchor" href="#handle-class"></a>4.7.9. Handle Class</h4>
<div class="paragraph">
<p>The deployment tools are responsible for implementing the handle class for the entity bean.
The handle class must be serializable by the Java Serialization protocol.</p>
</div>
<div class="paragraph">
<p>As the handle class is not entity bean specific, the container may, but is not required to, use a single class for all deployed entity beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="home-handle-class"><a class="anchor" href="#home-handle-class"></a>4.7.10. Home Handle Class</h4>
<div class="paragraph">
<p>The deployment tools responsible for implementing the home handle class for the entity bean.
The handle class must be serializable by the Java Serialization protocol.</p>
</div>
<div class="paragraph">
<p>Because the home handle class is not entity bean specific, the container may, but is not required to, use a single class for the home handles of all deployed entity beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="metadata-class"><a class="anchor" href="#metadata-class"></a>4.7.11. Metadata Class</h4>
<div class="paragraph">
<p>The deployment tools are responsible for implementing the class that provides metadata information to the remote client view contract.
The class must be a valid RMI-IIOP Value Type, and must implement the <code>jakarta.ejb.EJBMetaData</code> interface.</p>
</div>
<div class="paragraph">
<p>Because the metadata class is not entity bean specific, the container may, but is not required to, use a single class for all deployed enterprise beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="instances-re-entrance"><a class="anchor" href="#instances-re-entrance"></a>4.7.12. Instance’s Re-entrance</h4>
<div class="paragraph">
<p>The container runtime must enforce the rules defined in <a href="#a1596">Non-reentrant and Re-entrant Instances</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="transaction-scoping-security-exceptions"><a class="anchor" href="#transaction-scoping-security-exceptions"></a>4.7.13. Transaction Scoping, Security, Exceptions</h4>
<div class="paragraph">
<p>The container runtime must follow the rules on transaction scoping and exception handling described in <a href="#a3185">Support for Transactions</a> and <a href="#a3210">Exception Handling</a>.
The container runtime must follow the rules on security checking described in the EJB Core Contracts and Requirements document <a href="#a3339">[2]</a> Chapter &#8220;Security Management&#8221;.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-of-object-references"><a class="anchor" href="#implementation-of-object-references"></a>4.7.14. Implementation of Object References</h4>
<div class="paragraph">
<p>The container should implement the distribution protocol between the remote client and the container such that the object references of the remote home and remote interfaces used by entity bean clients are usable for a long period of time.
Ideally, a remote client should be able to use an object reference across a server crash and restart.
An object reference should become invalid only when the entity object has been removed, or after a reconfiguration of the server environment (for example, when the entity bean is moved to a different Enterprise Beans server or container).</p>
</div>
<div class="paragraph">
<p><em>The motivation for this is to simplify the programming model for the entity bean client.
While the client code needs to have a recovery handler for the system exceptions thrown from the individual method invocations on the remote home and remote interface, the client should not be forced to re-obtain the object references.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="entitycontext"><a class="anchor" href="#entitycontext"></a>4.7.15. EntityContext</h4>
<div class="paragraph">
<p>The container must implement the <code>EntityContext.getEJBObject</code> method such that the bean instance can use the Java language cast to convert the returned value to the entity bean’s remote interface type.
Specifically, the bean instance does not have to use the <code>PortableRemoteObject.narrow</code> method for the type conversion.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a1820"><a class="anchor" href="#a1820"></a>4.8. Primary Keys</h3>
<div class="paragraph">
<p>The container must be able to manipulate the primary key type of an entity bean.
Therefore, the primary key type for an entity bean with container-managed persistence must follow the rules in this subsection, in addition to those specified in <a href="#a1725">Entity Bean’s Primary Key Class</a>.</p>
</div>
<div class="paragraph">
<p>There are two ways to specify a primary key class for an entity bean with container-managed persistence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Primary key that maps to a single field in the entity bean class.</p>
</li>
<li>
<p>Primary key that maps to multiple fields in the entity bean class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>The second method is necessary for implementing compound keys, and the first method is convenient for single-field keys. Without the first method, simple types such as String
would have to be wrapped in a user-defined class.</em></p>
</div>
<div class="sect3">
<h4 id="primary-key-that-maps-to-a-single-field-in-the-entity-bean-class"><a class="anchor" href="#primary-key-that-maps-to-a-single-field-in-the-entity-bean-class"></a>4.8.1. Primary Key That Maps to a Single Field in the Entity Bean Class</h4>
<div class="paragraph">
<p>The Bean Provider uses the <code>primkey-field</code> element of the deployment descriptor to specify the container-managed field of the entity bean class that contains the primary key.
The field’s type must be the primary key type.</p>
</div>
</div>
<div class="sect3">
<h4 id="primary-key-that-maps-to-multiple-fields-in-the-entity-bean-class"><a class="anchor" href="#primary-key-that-maps-to-multiple-fields-in-the-entity-bean-class"></a>4.8.2. Primary Key That Maps to Multiple Fields in the Entity Bean Class</h4>
<div class="paragraph">
<p>The primary key class must be <code>public</code>, and must have a <code>public</code> constructor with no parameters.</p>
</div>
<div class="paragraph">
<p>All fields in the primary key class must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The names of the fields in the primary key class must be a subset of the names of the container-managed fields.
(This allows the container to extract the primary key fields from an instance’s container-managed fields, and vice versa.)</p>
</div>
</div>
<div class="sect3">
<h4 id="a1833"><a class="anchor" href="#a1833"></a>4.8.3. Special Case: Unknown Primary Key Class</h4>
<div class="paragraph">
<p>In special situations, the entity Bean Provider may choose not to specify the primary key class or the primary key fields for an entity bean with container-managed persistence.
This case usually happens when the entity bean does not have a natural primary key, and/or the Bean Provider wants to allow the Deployer using the Container Provider’s tools to select the primary key fields at deployment time.
The entity bean’s primary key type will usually be derived from the primary key type used by the underlying database system that stores the entity objects.
The primary key used by the database system may not be known to the Bean Provider.</p>
</div>
<div class="paragraph">
<p>In this special case, the type of the argument of the <code>findByPrimaryKey</code> method must be declared as <code>java.lang.Object</code>.
The Bean Provider must specify the primary key class in the deployment descriptor as of the type <code>java.lang.Object</code>.</p>
</div>
<div class="paragraph">
<p>When defining the primary key for the enterprise bean, the Deployer using the Container Provider’s tools will typically add additional container-managed fields to the concrete subclass of the entity bean class (this typically happens for entity beans that do not have a natural primary key, and the primary keys are system-generated by the underlying database system that stores the
entity objects).
In this case, the container must generate the primary key value when the entity bean instance is created (and before
<code>ejbPostCreate</code> is invoked on the instance.)</p>
</div>
<div class="paragraph">
<p><em>The primary key class is specified at deployment time in the situations when the Bean Provider develops an entity bean that is intended to be used with multiple back-ends that provide persistence, and when these multiple back-ends require different primary key structures.</em></p>
</div>
<div class="paragraph">
<p><em>Use of entity beans with a deferred primary key type specification limits the client application programming model, because the clients written prior to deployment of the entity bean may not use, in general, the methods that rely on the knowledge of the primary key type.</em></p>
</div>
<div class="paragraph">
<p><em>The implementation of the enterprise bean class methods must be done carefully.
For example, the methods should not depend on the type of the object returned from <code>EntityContext.getPrimaryKey</code>, because the return type is determined by the Deployer after the enterprise bean class has been written.</em></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a1840"><a class="anchor" href="#a1840"></a>5. Enterprise Beans QL: EJB 2.1 Query Language for Container-Managed Persistence Query Methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Enterprise Beans query language, Enterprise Beans QL, is used to define queries for entity beans with container-managed persistence.
Enterprise Beans QL enables the Bean Provider to specify the semantics of query methods in a portable way.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>This chapter provides the complete definition of Enterprise Beans QL that is required to be supported for use with Enterprise Beans 2.1 entity beans with container managed persistence.
Implementations of this specification are permitted, but not required, to provide the extensions to Enterprise Beans QL defined by the Jakarta Persistence query language <a href="#a3325">[5]</a> for use with finder and select methods.
Applications that make use of such extensions in finder and select methods will not be portable.</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="overview-4"><a class="anchor" href="#overview-4"></a>5.1. Overview</h3>
<div class="paragraph">
<p>Enterprise Beans QL is a query specification language for the finder and select methods of entity beans with container-managed persistence.
Enterprise Beans QL can be compiled to a target language, such as SQL, of a database or other persistent store.
This allows the execution of queries to be shifted to the native language facilities provided by the persistent store, instead of requiring queries to be executed on the runtime representation of the entity beans’ state.
As a result, query methods can be optimizable as well as portable.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans query language uses the abstract persistence schemas of entity beans, including their relationships, for its data model.
It defines operators and expressions based on this data model.</p>
</div>
<div class="paragraph">
<p>The Bean Provider uses Enterprise Beans QL to write queries based on the abstract persistence schemas and the relationships defined in the deployment descriptor.
Enterprise Beans QL depends on navigation and selection based on the cmp-fields and cmr-fields of the related entity beans.
The Bean Provider can navigate from an entity bean to other entity beans by using the names of cmr-fields in Enterprise Beans QL queries.</p>
</div>
<div class="paragraph">
<p>Enterprise Beans QL allows the Bean Provider to use the abstract schema types of entity beans in a query if the abstract persistence schemas of the beans are defined in the same deployment descriptor as the query.</p>
</div>
<div class="paragraph">
<p>It is possible to parse and validate Enterprise Beans QL queries before entity beans are deployed because Enterprise Beans QL is based on the abstract schema types of entity beans.</p>
</div>
<div class="paragraph">
<p>Enterprise Beans QL queries can be used in two different
ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>as queries for selecting entity objects through finder methods defined in the home interface.
Finder methods allow the results of an Enterprise Beans QL query to be used by the clients of the entity bean.</p>
</li>
<li>
<p>as queries for selecting entity objects or other values derived from an entity bean’s abstract schema type through select methods defined on the entity bean class.
Select methods allow the Bean Provider to use Enterprise Beans QL to find objects or values related to the state of an entity bean without directly exposing the results to the client.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="enterprise-beans-ql-definition"><a class="anchor" href="#enterprise-beans-ql-definition"></a>5.2. Enterprise Beans QL Definition</h3>
<div class="paragraph">
<p>Enterprise Beans QL uses a SQL-like syntax to select objects or values based on the abstract schema types and relationships
of entity beans.
The path expressions of Enterprise Beans QL allow the Bean Provider to navigate over relationships defined by the cmr-fields of the abstract schema types of entity beans.</p>
</div>
<div class="paragraph">
<p>This chapter provides the full definition of the language.</p>
</div>
<div class="paragraph">
<p>An Enterprise Beans QL query is a string which consists of the following clauses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a SELECT clause, which determines the type of the objects or values to be selected.</p>
</li>
<li>
<p>a FROM clause, which provides declarations that designate the domain to which the expressions specified in the SELECT clause and WHERE clause of the query apply.</p>
</li>
<li>
<p>an optional WHERE clause, which may be used to restrict the results that are returned by the query.</p>
</li>
<li>
<p>an optional ORDER BY clause, which may be used to order the results that are returned by the query.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In BNF syntax, an Enterprise Beans QL query is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>Enterprise Beans QL ::= select_clause from_clause [where_clause] [orderby_clause]</code></pre>
</div>
</div>
<div class="paragraph">
<p>An Enterprise Beans QL query must always have a SELECT and a FROM clause.
The square brackets [] indicate that the WHERE and ORDER BY clauses are optional.</p>
</div>
<div class="paragraph">
<p>An Enterprise Beans QL query may have parameters that correspond to the parameters of the finder or select method for which it is defined.</p>
</div>
<div class="paragraph">
<p>An Enterprise Beans QL query is statically defined in the <code>ejb-ql</code> deployment descriptor element.</p>
</div>
<div class="sect3">
<h4 id="abstract-schema-types-and-query-domains"><a class="anchor" href="#abstract-schema-types-and-query-domains"></a>5.2.1. Abstract Schema Types and Query Domains</h4>
<div class="paragraph">
<p>Enterprise Beans QL is a typed language whose design is based on the type model of Enterprise Beans 2.0 container-managed persistence.
Every expression in Enterprise Beans QL has a type.
The type of the expression is derived from the structure of the expression; the abstract schema types of the identification variable declarations; the types to which the cmp-fields and cmr-fields evaluate; and the types of literals.
The allowable types in Enterprise Beans QL are the abstract schema types of entity beans and cmp-fields.</p>
</div>
<div class="paragraph">
<p>The abstract schema type of an entity bean is derived from its entity bean class and the information provided in the deployment descriptor.
There is a one-to-one mapping between entity bean abstract schema types and entity bean homes. Abstract schema names, as specified by the <code>abstract-schema-name</code> elements in the deployment descriptor, are used to denote entity bean abstract schema types in Enterpise Beans QL.</p>
</div>
<div class="paragraph">
<p>Informally, the abstract schema type of an entity bean can be characterized as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>For every get accessor method of the entity bean class that corresponds to a <code>cmp-field</code> element in the deployment descriptor, there is a field (&#8220;cmp-field&#8221;) whose abstract schema type corresponds to the result type of the accessor method.</em></p>
</li>
<li>
<p><em>For every get accessor method of the entity bean that corresponds to a  <code>cmr-field</code> element in the deployment descriptor, there is a field (&#8220;cmr-field&#8221;) whose type is the abstract schema type of the entity bean denoted by the <code>ejb-name</code> element contained in the corresponding <code>ejb-relationship-role</code> element (or, if the role has a multiplicity of <code>Many</code>, a collection of such).</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Abstract schema types are specific to the Enterprise Beans QL data model.
The container is not required to implement or otherwise materialize an abstract schema type.</p>
</div>
<div class="paragraph">
<p>The domain of an Enterprise Beans QL query consists of the abstract schema types of all entity beans with container-managed persistence that are defined in the same deployment descriptor.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>The Bean Provider creates an ejb-jar file which contains a deployment descriptor describing several entity beans and their relationships.
Enterprise Beans QL assumes that a single deployment descriptor in an ejb-jar file constitutes a nondecomposable unit for the container responsible for implementing the abstract persistence schemas of the entity beans and the relationships defined in the deployment descriptor and the ejb-jar file.
Queries can be written by utilizing navigation over the cmr-fields of related beans supplied in the same ejb-jar by the Bean Provider because they are implemented and managed by the same container.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The domain of a query may be restricted by the <em>navigability</em> of the relationships of the entity bean on which it is based.
The cmr-fields of an entity bean’s abstract schema type determine navigability.
Using the cmr-fields and their values, a query can select related entity beans and use their abstract schema types in the query.</p>
</div>
</div>
<div class="sect3">
<h4 id="query-methods"><a class="anchor" href="#query-methods"></a>5.2.2. Query Methods</h4>
<div class="paragraph">
<p>Enterprise Beans QL is used for two types of query methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Finder methods&#8212;&#8203;Finder methods are defined in the home interface(s) of an entity bean and return entity objects or local entity objects.
A finder method that is defined on the remote home interface must return either an EJBObject or a collection of EJBObjects; a finder method that is defined on the local home interface must return either an EJBLocalObject or a collection of EJBLocalObjects.
The result type of a finder method defined on the remote home interface of an entity bean is the entity bean’s remote interface (or a collection of objects implementing the entity bean’s remote interface).
The result type of a finder method defined on the local home interface of an entity bean is the entity bean’s local interface (or a collection of objects implementing the entity bean’s local interface).</p>
</li>
<li>
<p>Select methods&#8212;&#8203;Select methods are a special type of query method not directly exposed through the client view.
The Bean Provider typically uses select methods to select the persistent state of an entity object or to select entities that are related to the entity bean for which the query is defined.
The result type of a select method can be an EJBLocalObject (or a collection of EJBLocalObjects), an EJBObject (or a collection of EJBObjects), a cmp-field value (or a collection of such), or the result of an aggregate function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="naming"><a class="anchor" href="#naming"></a>5.2.3. Naming</h4>
<div class="paragraph">
<p>Entity beans are designated in Enterprise Beans QL query strings by their abstract schema names.
The Bean Provider assigns unique abstract schema names to entity beans as part of the development process so that they can be used within queries.
These unique names are scoped within the deployment descriptor file.</p>
</div>
</div>
<div class="sect3">
<h4 id="a1882"><a class="anchor" href="#a1882"></a>5.2.4. Examples</h4>
<div class="paragraph">
<p>The following convention refers to the names used for entity beans in subsequent examples: An entity bean as a whole is designated by <code>&lt;name&gt;EJB</code>, and its entity bean class and abstract schema type are designated by <code>&lt;name&gt;</code>, following the convention used to name the local interface of an entity bean.</p>
</div>
<div class="paragraph">
<p>The first example assumes that the Bean Provider provides several entity beans, <code>OrderEJB</code>, <code>ProductEJB</code>, <code>LineItemEJB</code>, <code>ShippingAddressEJB</code>, and <code>BillingAddressEJB</code>.
The abstract schema types for these entity beans are <code>Order</code>, <code>Product</code>,
<code>LineItem</code>, <code>ShippingAddress</code>, and <code>BillingAddress</code> respectively.
These beans are logically in the same ejb-jar file, as shown in <a href="#a1886">Several Entity Beans with Abstract Persistence Schemas Defined in the Same Ejb-jar File.</a>.
Only two of the entity beans, <code>OrderEJB</code> and <code>ProductEJB</code>, have remote interfaces and remote home interfaces.</p>
</div>
<div id="a1886" class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NTYiIGhlaWdodD0iMjA5IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxlbGxpcHNlIGN4PSIxNzciIGN5PSIzNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSI3NSIgcnk9IjI1Ii8+CiAgPHRleHQgeD0iMTEwIiB5PSI0MSI+CiAgICA8dHNwYW4geD0iMTU3LjgwNSIgeT0iNDEiPk9yZGVyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMjMuOTY3IDUyLjY3OGwtMzUuMTgzIDg2LjA2Nkw4NSAxNDgiLz4KICA8dGV4dCB4PSI5OSIgeT0iNjUiPgogICAgPHRzcGFuPm08L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSI3NCIgeT0iMTM3Ij4KICAgIDx0c3Bhbj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPGVsbGlwc2UgY3g9Ijg1IiBjeT0iMTczIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9Ijc1IiByeT0iMjUiLz4KICA8dGV4dCB4PSIxOCIgeT0iMTc5Ij4KICAgIDx0c3BhbiB4PSIyOS43OTciIHk9IjE3OSI+U2hpcHBpbmdBZGRyZXNzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xNzcgNjBsNzEuMzY3IDgwLjUxN0wyNTUgMTQ4Ii8+CiAgPHRleHQgeD0iMTY2IiB5PSI3MyI+CiAgICA8dHNwYW4+bTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjIyMyIgeT0iMTM5Ij4KICAgIDx0c3Bhbj4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPGVsbGlwc2UgY3g9IjI1NSIgY3k9IjE3MyIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIHJ4PSI3NSIgcnk9IjI1Ii8+CiAgPHRleHQgeD0iMTg4IiB5PSIxNzkiPgogICAgPHRzcGFuIHg9IjIwNi40NjEiIHk9IjE3OSI+QmlsbGluZ0FkZHJlc3M8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTIzMC4wMzMgNTIuNjc4bDQ0LjU5NSAxNy4wNyA5LjMzOSAzLjU3NCIvPgogIDx0ZXh0IHg9IjI1MSIgeT0iNTMiPgogICAgPHRzcGFuPjE8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSIyODAiIHk9IjY1Ij4KICAgIDx0c3Bhbj5tPC90c3Bhbj4KICA8L3RleHQ+CiAgPGVsbGlwc2UgY3g9IjMzNyIgY3k9IjkxIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9Ijc1IiByeT0iMjUiLz4KICA8dGV4dCB4PSIyNzAiIHk9Ijk3Ij4KICAgIDx0c3BhbiB4PSIzMDcuNSIgeT0iOTciPkxpbmVJdGVtPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zOTAuMDMzIDEwOC42NzhsNzAuMzA1IDE4Ljc0Nkw0NzAgMTMwIi8+CiAgPHRleHQgeD0iNDExIiB5PSIxMDgiPgogICAgPHRzcGFuPm08L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCB4PSI0NjQiIHk9IjEyMiI+CiAgICA8dHNwYW4+MTwvdHNwYW4+CiAgPC90ZXh0PgogIDxlbGxpcHNlIGN4PSI0NzAiIGN5PSIxNTUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iNzUiIHJ5PSIyNSIvPgogIDx0ZXh0IHg9IjQwMyIgeT0iMTYxIj4KICAgIDx0c3BhbiB4PSI0NDQuOTMiIHk9IjE2MSI+UHJvZHVjdDwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="EBOpt 37">
</div>
<div class="title">Figure 9. Several Entity Beans with Abstract Persistence Schemas Defined in the Same Ejb-jar File.</div>
</div>
<div class="paragraph">
<p>The entity beans <code>ShippingAddress</code> and <code>BillingAddress</code> each have one-to-many relationships with <code>Order</code>.
There is also a one-to-many relationship between <code>Order</code> and <code>Lineitem</code>.
The entity bean <code>LineItem</code> is related to <code>Product</code> in a many-to-one relationship.</p>
</div>
<div class="paragraph">
<p>Enterprise Beans QL allows the Bean Provider to specify finder queries for OrderEJB by navigating over the cmr-fields and cmp-fields defined by <code>Order</code> and <code>LineItem</code>.
A finder method query to find all orders with pending line items might be written as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">    <span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
    <span class="keyword">FROM</span> <span class="keyword">Order</span> <span class="keyword">AS</span> o, <span class="keyword">IN</span>(o.lineItems) <span class="keyword">AS</span> l
    <span class="keyword">WHERE</span> l.shipped = <span class="predefined-constant">FALSE</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This query navigates over the cmr-field <code>lineItems</code> of the abstract schema type <code>Order</code> to find line items, and uses the cmp-field <code>shipped</code> of <code>LineItem</code> to select those orders that have at least one line item that has not yet shipped.
(Note that this query does not select orders that have no line items.)</p>
</div>
<div class="paragraph">
<p>Although predefined reserved identifiers, such as DISTINCT, OBJECT, FROM, AS, IN, WHERE, and FALSE appear in upper case in this example, predefined reserved identifiers are case insensitive.</p>
</div>
<div class="paragraph">
<p>The SELECT clause of this example designates the return type of this query to be of type <code>Order</code>.
If this query is defined for a finder method on the entity bean’s remote home interface, the finder method will return objects of the entity bean’s remote interface type corresponding to the abstract schema type instances selected by the query.
If this same query is defined for a finder method on the entity bean’s local home interface, the finder method will return objects of the entity bean’s local interface type corresponding to these same abstract schema type instances.
Finder methods must always return EJBObjects or EJBLocalObjects of the bean type for which the query method is defined.</p>
</div>
<div class="paragraph">
<p>Because the same deployment descriptor defines the abstract persistence schemas of the related entity beans, the Bean Provider can also specify a query for <code>OrderEJB</code> that utilizes the abstract schema type of <code>ProductEJB</code>, and hence the cmp-fields and cmr-fields of both the abstract schema types <code>Order</code> and <code>Product</code>.
For example, if the abstract schema type <code>Product</code> has a cmp-field named
<code>product_type</code>, a finder query for <code>OrderEJB</code> can be specified using this cmp-field.
Such a finder query might be: &#8220;Find all orders for products with product type office supplies&#8221;.
An Enterprise Beans QL query string for this might be as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">    <span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
    <span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
    <span class="keyword">WHERE</span> l.product.product_type = <span class="string"><span class="delimiter">'</span><span class="content">office_supplies</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because <code>Order</code> is related to <code>Product</code> by means of the relationships between <code>Order</code> and <code>LineItem</code> and between <code>LineItem</code> and <code>Product</code>, navigation using the cmr-fields <code>lineItems</code> and <code>product</code> is needed to express the query.
This query is specified by using the <code>abstract-schema-name</code> for <code>OrderEJB</code>, namely <code>Order</code>, which designates the abstract schema type over which the query ranges.
The basis for the navigation is provided by the cmr-fields <code>lineItems</code> and <code>product</code> of the abstract schema types <code>Order</code> and <code>LineItem</code> respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-from-clause-and-navigational-declarations"><a class="anchor" href="#the-from-clause-and-navigational-declarations"></a>5.2.5. The FROM Clause and Navigational Declarations</h4>
<div class="paragraph">
<p>The FROM clause of an Enterprise Beans QL query defines the domain of the query by declaring identification variables.
The domain of the query may be constrained by path expressions.</p>
</div>
<div class="paragraph">
<p>Identification variables designate instances of a particular entity bean abstract schema type.
The FROM clause can contain multiple identification variable declarations separated by a comma (,).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>from_clause ::= <strong>FROM</strong> identification_variable_declaration
                        [, identification_variable_declaration]*
identification_variable_declaration ::= collection_member_declaration |
                                    range_variable_declaration
collection_member_declaration ::= <strong>IN</strong> (collection_valued_path_expression) [<strong>AS</strong>] identifier
range_variable_declaration :: abstract_schema_name [<strong>AS</strong>] identifier</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following subsections discuss the constructs used in the FROM clause.</p>
</div>
<div class="sect4">
<h5 id="identifiers"><a class="anchor" href="#identifiers"></a>5.2.5.1. Identifiers</h5>
<div class="paragraph">
<p>An identifier is a character sequence of unlimited length.
The character sequence must begin with a Java identifier start character, and all other characters must be Java identifier part characters.
An identifier start character is any character for which the method <code>Character.isJavaIdentifierStart</code> returns true.
This includes the underscore (_) character and the dollar sign ($) character.
An identifier part character is any character for which the method <code>Character.isJavaIdentifierPart</code> returns true.
The question mark (?) character is reserved for use by Enterprise Beans QL.</p>
</div>
<div class="paragraph">
<p>The following are the reserved identifiers in Enterprise Beans QL: <em>SELECT, FROM, WHERE, DISTINCT, OBJECT, NULL, TRUE, FALSE, NOT, AND, OR, BETWEEN, LIKE, IN, AS, UNKNOWN</em>
<sup class="footnote" id="_footnote_a3378">[<a id="_footnoteref_14" class="footnote" href="#_footnotedef_14" title="View footnote.">14</a>]</sup>,
<em>EMPTY, MEMBER, OF, IS, AVG, MAX, MIN, SUM, COUNT, ORDER, BY, ASC, DESC, MOD</em>.</p>
</div>
<div class="paragraph">
<p>Reserved identifiers are case insensitive.
Reserved identifiers must not be used as identification variables.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>It is recommended that the Bean Provider not use other SQL reserved words as identification variables in Enterprise Beans QL queries because they may be used as Enterprise Beans QL reserved identifiers in future versions of the Enterprise Beans specification.</em></p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="a1914"><a class="anchor" href="#a1914"></a>5.2.5.2. Identification Variables</h5>
<div class="paragraph">
<p>An identification variable is a valid identifier declared in the FROM clause of an Enterprise Beans QL query.
An identification variable may be declared using the special operators IN and, optionally, AS.</p>
</div>
<div class="paragraph">
<p>All identification variables must be declared in the FROM clause.
Identification variables cannot be declared in other clauses.</p>
</div>
<div class="paragraph">
<p>An identification variable must not be a reserved identifier or have the same name as any of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>abstract-schema-name</p>
</li>
<li>
<p>ejb-name
<sup class="footnote" id="_footnote_a3379">[<a id="_footnoteref_15" class="footnote" href="#_footnotedef_15" title="View footnote.">15</a>]</sup></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Identification variables are case insensitive.</p>
</div>
<div class="paragraph">
<p>An identification variable evaluates to a value of the type of the expression used in declaring the variable.
For example, consider the previous finder query for <code>OrderEJB</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> l.product.product_type = <span class="string"><span class="delimiter">'</span><span class="content">office_supplies</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the FROM clause declaration <code>IN(o.lineItems) l</code>, the identification variable <code>l</code> evaluates to any LineItem value directly reachable from Order.
The cmr-field <code>lineItems</code> is a collection of instances of the abstract schema type <code>LineItem</code> and the identification variable <code>l</code> refers to an element of this collection.
The type of <code>l</code> is the abstract schema type of <code>LineItem</code>.</p>
</div>
<div class="paragraph">
<p>An identification variable ranges over the abstract schema type of an entity bean.
An identification variable designates an instance of an entity bean abstract schema type or an element of a collection of entity bean abstract schema types instances.
Identification variables are existentially quantified in an Enterprise Beans QL query.</p>
</div>
<div class="paragraph">
<p>An identification variable always designates a reference to a single value.It is declared in one of two ways; as a range variable or as a collection member identification variable:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A range variable is declared using the abstract schema name of an entity bean.</p>
</li>
<li>
<p>A collection member identification variable is declared using a collection-valued path expression.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The identification variable declarations are evaluated from left to right in the FROM clause.
A collection member identification variable declaration can use the result of a preceding identification variable declaration of the query string.</p>
</div>
</div>
<div class="sect4">
<h5 id="range-variable-declarations"><a class="anchor" href="#range-variable-declarations"></a>5.2.5.3. Range Variable Declarations</h5>
<div class="paragraph">
<p>The Enterprise Beans QL syntax for declaring an identification variable as a range variable is similar to that of SQL; optionally, it uses the AS keyword.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>range_variable_declaration ::= abstract_schema_name [<strong>AS</strong>] identifier</code></pre>
</div>
</div>
<div class="paragraph">
<p>Objects or values that are related to an entity bean are typically obtained by navigation using path expressions.
However, navigation does not reach all objects.
Range variable declarations allow the Bean Provider to designate a &#8220;root&#8221; for objects which may not be reachable by navigation.</p>
</div>
<div class="paragraph">
<p>If the Bean Provider wants to select values by comparing more than one instance of an entity bean abstract schema type, more than one identification variable ranging over the abstract schema type is needed in the FROM clause.</p>
</div>
<div class="paragraph">
<p>The following finder method query returns orders whose quantity is greater than the order quantity for John Smith.
This example illustrates the use of two different identification variables in the FROM clause, both of the abstract schema type Order.
The SELECT clause of this query determines that it is the orders with quantities larger than John Smith’s that are returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o1)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o1, <span class="keyword">Order</span> o2
<span class="keyword">WHERE</span> o1.quantity &gt; o2.quantity <span class="keyword">AND</span>
        o2.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span>
        o2.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="collection-member-declarations"><a class="anchor" href="#collection-member-declarations"></a>5.2.5.4. Collection Member Declarations</h5>
<div class="paragraph">
<p>An identification variable declared by a <code>collection_member_declaration</code> ranges over values of a collection obtained by navigation using a path expression.
Such a path expression represents a navigation involving the cmr-fields of an entity bean abstract schema type.
Because a path expression can be based on another path expression, the navigation can use the cmr-fields of related entity beans.
Path expressions are discussed in <a href="#a1956">Path Expressions</a>.</p>
</div>
<div class="paragraph">
<p>An identification variable of a collection member declaration is declared using a special operator, the reserved identifier IN.
The argument to the IN operator is a collection-valued path expression.
The path expression evaluates to a collection type specified as a result of navigation to a collection-valued cmr-field of an entity bean abstract schema type.</p>
</div>
<div class="paragraph">
<p>The syntax for declaring a collection member identification variable is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>collection_member_declaration ::= <strong>IN</strong> (collection_valued_path_expression) [<strong>AS</strong>] identifier</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, the FROM clause for a query defined for <code>OrderEJB</code> might contain the following collection member declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>IN(o.lineItems) l</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, <code>lineItems</code> is the name of a cmr-field whose value is a collection of instances of the abstract schema type <code>LineItem</code> of the <code>LineItemEJB</code> entity bean.
The identification variable <code>l</code> designates a member of this collection, a <em>single</em> <code>LineItem</code> abstract schema type instance.
In this example, <code>o</code> is an identification variable of the abstract schema type <code>Order</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="example-2"><a class="anchor" href="#example-2"></a>5.2.5.5. Example</h5>
<div class="paragraph">
<p>The following FROM clause contains two identification variable declaration clauses.
The identification variable declared in the first clause is used in the second clause.
The clauses declare the variables <code>o</code> and <code>l</code> respectively.
The range variable declaration <code>Order</code> AS o designates the identification variable <code>o</code> as a range variable whose type is the abstract schema type, <code>Order</code>.
The identification variable <code>l</code> has the abstract schema type <code>LineItem</code>.
Because the clauses are evaluated from left to right, the identification variable <code>l</code> can utilize the results of the navigation on <code>o</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>    FROM Order AS o, IN(o.lineItems) l</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="a1956"><a class="anchor" href="#a1956"></a>5.2.5.6. Path Expressions</h5>
<div class="paragraph">
<p>An identification variable followed by the navigation operator (.) and a cmp-field or cmr-field is a path expression.
The type of the path expression is the type computed as the result of navigation; that is, the type of the cmp-field or cmr-field to which the expression navigates.</p>
</div>
<div class="paragraph">
<p>Depending on navigability, a path expression that leads to a cmr-field may be further composed.
Path expressions can be composed from other path expressions if the original path expression evaluates to a single-valued type (not a collection) corresponding to a cmr-field.
A path expression that ends in a cmp-field is terminal and cannot be further composed.</p>
</div>
<div class="paragraph">
<p>Path expression navigability is composed using &#8220;inner join&#8221; semantics.
That is, if the value of a non-terminal cmr-field in the path expression is null, the path is considered to have no value, and does not participate in the determination of the result.</p>
</div>
<div class="paragraph">
<p>The syntax for single-valued path expressions and collection valued path expressions is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>cmp_path_expression ::=
        {identification_variable | single_valued_cmr_path_expression}.cmp_field
single_valued_cmr_path_expression ::=
        identification_variable.[single_valued_cmr_field.]*single_valued_cmr_field
single_valued_path_expression ::=
        cmp_path_expression | single_valued_cmr_path_expression
collection_valued_path_expression ::=
        identification_variable.[single_valued_cmr_field.]*collection_valued_cmr_field</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>single_valued_cmr_field</code> is designated by the name of a cmr-field in a one-to-one or many-to-one relationship.
The type of a <code>single_valued_cmr_path_expression</code> is the abstract schema type of the related entity bean.</p>
</div>
<div class="paragraph">
<p>A <code>collection_valued_cmr_field</code> is designated by the name of a cmr-field in
a one-to-many or a many-to-many relationship.
The type of a <code>collection_valued_cmr_field</code> is a collection of values of the abstract schema type of the related entity bean.</p>
</div>
<div class="paragraph">
<p>Navigation to a related entity bean results in a value of the related entity bean’s abstract schema type.</p>
</div>
<div class="paragraph">
<p>The evaluation of a path expression terminating in a cmp-field results in the abstract schema type corresponding to the Java type designated by the cmp-field.</p>
</div>
<div class="paragraph">
<p>It is syntactically illegal to compose a path expression from a path expression that evaluates to a collection.
For example, if <code>o</code> designates <code>Order</code>, the path expression <code>o.lineItems.product</code> is illegal since navigation to <code>lineItems</code> results in a collection.
This case should produce an error when the Enterprise Beans QL query string is verified.
To handle such a navigation, an identification variable must be declared in the FROM clause to range over the elements of the <code>lineItems</code> collection.
Another path expression must be used to navigate over each such element in the WHERE clause of the query, as in the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> <span class="keyword">AS</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> l.product.name = <span class="string"><span class="delimiter">'</span><span class="content">widget</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="where-clause-and-conditional-expressions"><a class="anchor" href="#where-clause-and-conditional-expressions"></a>5.2.6. WHERE Clause and Conditional Expressions</h4>
<div class="paragraph">
<p>The WHERE clause of a query consists of a conditional expression used to select objects or values that satisfy the expression.
The WHERE clause thus restricts the result of a query.</p>
</div>
<div class="paragraph">
<p>A WHERE clause is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>where_clause ::= <strong>WHERE</strong> conditional_expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sections describe the languageconstructs that can be used in a conditional expression of the WHERE clause.</p>
</div>
<div class="sect4">
<h5 id="literals"><a class="anchor" href="#literals"></a>5.2.6.1. Literals</h5>
<div class="paragraph">
<p>A string literal is enclosed in single quotes—for example: 'literal'.
A string literal that includes a single quote is represented by two single quotes—for example: 'literal''s'.
Enterprise Beans QL string literals, like Java <code>String</code> literals, use unicode character encoding.</p>
</div>
<div class="paragraph">
<p>An exact numeric literal is a numeric value without a decimal point, such as 57, -957, +62.
Exact numeric literals support numbers in the range of Java <code>long</code>.
Exact numeric literals use the Java integer literal syntax.</p>
</div>
<div class="paragraph">
<p>An approximate numeric literal is a numeric value in scientific notation, such as 7E3, -57.9E2, or a numeric value with a decimal, such as 7., -95.7, +6.2.
Approximate numeric literals support numbers in the range of Java <code>double</code>.
Approximate literals use the Java floating point literal syntax.</p>
</div>
<div class="paragraph">
<p>The Bean Provider may utilize appropriate suffixes to indicate the specific type of the literal in accordance with the Java Language Specification.</p>
</div>
<div class="paragraph">
<p>The boolean literals are <code>TRUE</code> and <code>FALSE</code>.</p>
</div>
<div class="paragraph">
<p>Although predefined reserved literals appear in upper case, they are case insensitive.</p>
</div>
</div>
<div class="sect4">
<h5 id="identification-variables"><a class="anchor" href="#identification-variables"></a>5.2.6.2. Identification Variables</h5>
<div class="paragraph">
<p>All identification variables used in the WHERE clause of an Enterprise Beans QL query must be declared in the FROM clause, as described in <a href="#a1914">Identification Variables</a>.</p>
</div>
<div class="paragraph">
<p>Identification variables are existentially quantified in the WHERE clause.
This means that an identification variable represents a member of a collection or
an instance of an entity bean’s abstract schema type.
An identification variable never designates a collection in its entirety.</p>
</div>
</div>
<div class="sect4">
<h5 id="path-expressions"><a class="anchor" href="#path-expressions"></a>5.2.6.3. Path Expressions</h5>
<div class="paragraph">
<p>It is illegal to use a <code>collection_valued_path_expression</code> within a WHERE clause as part of a conditional expression except in an <code>empty_collection_comparison_expression</code> or <code>collection_member_expression</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="input-parameters"><a class="anchor" href="#input-parameters"></a>5.2.6.4. Input Parameters</h5>
<div class="paragraph">
<p>The following rules apply to input parameters. Input parameters can only be used in the WHERE clause of a query.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Input parameters are designated by the question mark (?) prefix followed by an integer.
For example: <code>?1</code>.</p>
</li>
<li>
<p>Input parameters are numbered starting from 1.</p>
</li>
<li>
<p>The number of distinct input parameters in an Enterprise Beans QL query must not exceed the number of input parameters for the finder or select method.
It is not required that the Enterprise Beans QL query use all of the input parameters for the finder or select method.</p>
</li>
<li>
<p>An input parameter evaluates to the abstract schema type of the corresponding parameter defined in the signature of the finder or select method with which the query is associated.
It is the responsibility of the container to map the input parameter to the appropriate abstract schema type value.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that if an input parameter value is null, comparison operations or arithmetic operations involving the input parameter will return an unknown value. See <a href="#a2207">Null Values</a>.</em></p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="conditional-expression-composition"><a class="anchor" href="#conditional-expression-composition"></a>5.2.6.5. Conditional Expression Composition</h5>
<div class="paragraph">
<p>Conditional expressions are composed of other conditional expressions, comparison operations, logical operations, path expressions that evaluate to boolean values, and boolean literals.</p>
</div>
<div class="paragraph">
<p>Arithmetic expressions can be used in comparison expressions.
Arithmetic expressions are composed of other arithmetic expressions, arithmetic operations, path expressions that evaluate to numeric values, and numeric literals.</p>
</div>
<div class="paragraph">
<p>Arithmetic operations use numeric promotion.</p>
</div>
<div class="paragraph">
<p>Standard bracketing <code>()</code> for ordering expression evaluation is supported.</p>
</div>
<div class="paragraph">
<p>Conditional expressions are defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>conditional_expression ::= conditional_term | conditional_expression <strong>OR</strong> conditional_term
conditional_term ::= conditional_factor | conditional_term <strong>AND</strong> conditional_factor
conditional_factor ::= [<strong>NOT</strong>] conditional_primary
conditional_primary ::= simple_cond_expression | (conditional_expression)
simple_cond_expression ::= comparison_expression | between_expression | like_expression |
                    in_expression | null_comparison_expression |
                    empty_collection_comparison_expression |
                    collection_member_expression</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="operators-and-operator-precedence"><a class="anchor" href="#operators-and-operator-precedence"></a>5.2.6.6. Operators and Operator Precedence</h5>
<div class="paragraph">
<p>The operators are listed below in order of decreasing precedence.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigation operator (.)</p>
</li>
<li>
<p>Arithmetic operators:<br>
+, - unary<br>
*, / multiplication and division<br>
+, - addition and subtraction</p>
</li>
<li>
<p>Comparison operators: <code>=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&#8656;</code>, <code>&lt;&gt;</code> (not equal)</p>
</li>
<li>
<p>Logical operators: <code>NOT</code>, <code>AND</code>, <code>OR</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following sections describe other operators used in specific expressions.</p>
</div>
</div>
<div class="sect4">
<h5 id="between-expressions"><a class="anchor" href="#between-expressions"></a>5.2.6.7. Between Expressions</h5>
<div class="paragraph">
<p>The syntax for the use of the comparison operator [NOT] BETWEEN in an conditional expression is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>arithmetic_expression [<strong>NOT</strong>] <strong>BETWEEN</strong> arithmetic-expression <strong>AND</strong> arithmetic-expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The BETWEEN expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>x BETWEEN y AND z</code></pre>
</div>
</div>
<div class="paragraph">
<p>is semantically equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>y &lt;= x AND x &lt;= z</code></pre>
</div>
</div>
<div class="paragraph">
<p>The rules for unknown and NULL values in comparison operations apply.
See <a href="#a2207">Null Values</a>.</p>
</div>
<div class="paragraph">
<p>Examples are:</p>
</div>
<div class="paragraph">
<p><code>p.age BETWEEN 15 and 19</code> is equivalent to <code>p.age &gt;= 15 AND p.age &#8656; 19</code></p>
</div>
<div class="paragraph">
<p><code>p.age NOT BETWEEN 15 and 19</code> is equivalent to <code>p.age &lt; 15 OR p.age &gt; 19</code></p>
</div>
</div>
<div class="sect4">
<h5 id="in-expressions"><a class="anchor" href="#in-expressions"></a>5.2.6.8. In Expressions</h5>
<div class="paragraph">
<p>The syntax for the use of the comparison operator [NOT] IN in a conditional expression is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>cmp_path_expression [<strong>NOT</strong>] <strong>IN</strong> ( {literal | input_parameter} [, {literal | input_parameter}]* )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>cmp_path_expression</code> must have a string or numeric value.
The literal and/or input_parameter values must be <em>like</em> the same abstract schema type of the cmp_path_expression in type.
(See <a href="#a2265">Equality and Comparison Semantics</a>).</p>
</div>
<div class="paragraph">
<p>Examples are:</p>
</div>
<div class="paragraph">
<p><code>o.country IN ('UK', 'US', 'France')</code> is true for <code>UK</code> and false for <code>Peru</code>, and is equivalent to the expression <code>(o.country = 'UK') OR (o.country = 'US') OR (o.country = 'France')</code>.</p>
</div>
<div class="paragraph">
<p><code>o.country NOT IN ('UK', 'US', 'France')</code> is false for <code>UK</code> and true for <code>Peru</code>, and is equivalent to the expression <code>NOT o.country = 'UK') OR (o.country = 'US') OR (o.country = 'France'</code>.</p>
</div>
<div class="paragraph">
<p>There must be at least one element in the comma separated list that defines the set of values for the <code>IN</code> expression.</p>
</div>
<div class="paragraph">
<p>If the value of a <code>cmp_path_expression</code> in an IN or NOT IN expression is <code>NULL</code> or unknown, the value of the expression is unknown.</p>
</div>
</div>
<div class="sect4">
<h5 id="like-expressions"><a class="anchor" href="#like-expressions"></a>5.2.6.9. Like Expressions</h5>
<div class="paragraph">
<p>The syntax for the use of the comparison operator [NOT] LIKE in a conditional expression is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>cmp_path_expression [<strong>NOT</strong>] <strong>LIKE</strong> pattern_value [<strong>ESCAPE</strong> escape_character]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>cmp_path_expression</code> must have a string value.
The <code>pattern_value</code> is a string literal or a string-valued input parameter in which an underscore (_) stands for any single character, a percent (%) character stands for any sequence of characters (including the empty sequence), and all other characters stand for themselves.
The optional <code>escape_character</code> is a single-character string literal or a character-valued input parameter (i.e., <code>char</code> or <code>Character</code>) and is used to escape the special meaning of the underscore and percent characters in <code>pattern_value</code>.
<sup class="footnote" id="_footnote_a3380">[<a id="_footnoteref_16" class="footnote" href="#_footnotedef_16" title="View footnote.">16</a>]</sup></p>
</div>
<div class="paragraph">
<p>Examples are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>address.phone LIKE '12%3'</code> is true for '123' '12993' and false for '1234'</p>
</li>
<li>
<p><code>asentence.word LIKE 'l_se'</code> is true for 'lose' and false for 'loose'</p>
</li>
<li>
<p><code>aword.underscored LIKE '\_%' ESCAPE '\'</code> is true for '_foo' and false for 'bar'</p>
</li>
<li>
<p><code>address.phone NOT LIKE '12%3'</code> is false for '123' and '12993' and true for '1234'</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the value of the <code>cmp_path_expression</code> or <code>pattern_value</code> is <code>NULL</code> or unknown, the value of the LIKE expression is unknown.
If the <code>escape_character</code> is specified and is <code>NULL</code>, the value of the LIKE expression is unknown.</p>
</div>
</div>
<div class="sect4">
<h5 id="null-comparison-expressions"><a class="anchor" href="#null-comparison-expressions"></a>5.2.6.10. Null Comparison Expressions</h5>
<div class="paragraph">
<p>The syntax for the use of the comparison operator IS NULL in a conditional expression is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>{single_valued_path_expression | input_parameter} <strong>IS</strong> [<strong>NOT</strong>] <strong>NULL</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>A null comparison expression tests whether or not the single-valued path expression or input parameter is a <code>NULL</code> value.</p>
</div>
</div>
<div class="sect4">
<h5 id="empty-collection-comparison-expressions"><a class="anchor" href="#empty-collection-comparison-expressions"></a>5.2.6.11. Empty Collection Comparison Expressions</h5>
<div class="paragraph">
<p>The syntax for the use of the comparison operator IS EMPTY in an <code>empty_collection_comparison_expression</code> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>collection_valued_path_expression <strong>IS</strong> [<strong>NOT</strong>] <strong>EMPTY</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>This expression tests whether or not the collection designated by the collection-valued path expression is empty (i.e, has no elements).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Note that a collection-valued path expression can only be used in the WHERE clause in an empty collection comparison expression or in a collection member expression.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The collection designated by the collection-valued path expression used in an empty collection comparison expression must not be used in the FROM clause for the declaration of an identification variable.
An identification variable declared as a member of a collection implicitly designates the existence of a non-empty relationship; testing whether the same collection is empty is contradictory.
Therefore, the following query is invalid.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.lineItems <span class="keyword">IS</span> EMPTY</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the value of the collection-valued path expression in an empty collection comparison expression is unknown, the value of the empty comparison expression is unknown.</p>
</div>
</div>
<div class="sect4">
<h5 id="collection-member-expressions"><a class="anchor" href="#collection-member-expressions"></a>5.2.6.12. Collection Member Expressions</h5>
<div class="paragraph">
<p>The syntax for the use of the comparison operator MEMBER OF
<sup class="footnote" id="_footnote_a3381">[<a id="_footnoteref_17" class="footnote" href="#_footnotedef_17" title="View footnote.">17</a>]</sup>
in an <code>collection_member_expression</code> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>{single_valued_cmr_path_expression | identification_variable | input_parameter}
        [<strong>NOT</strong>] <strong>MEMBER</strong> [<strong>OF</strong>] collection_valued_path_expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>This expression tests whether the designated value is a member of the collection specified by the collection-valued path expression.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Note that a collection-valued path expression can only be used in the WHERE clause in an empty collection comparison expression or in a collection member expression.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If the collection valued path expression designates an empty collection, the value of the MEMBER OF expression is FALSE and the value of the NOT MEMBER OF expression is TRUE.
Otherwise, if the value of the collection-valued path expression or single-valued cmr path expression in the collection member expression is unknown, the value of the collection member expression is unknown.</p>
</div>
</div>
<div class="sect4">
<h5 id="functional-expressions"><a class="anchor" href="#functional-expressions"></a>5.2.6.13. Functional Expressions</h5>
<div class="paragraph">
<p>Enterprise Beans QL includes the following built-in functions
<sup class="footnote" id="_footnote_a3382">[<a id="_footnoteref_18" class="footnote" href="#_footnotedef_18" title="View footnote.">18</a>]</sup>,
which may be used in the WHERE clause of a query.</p>
</div>
<div class="paragraph">
<p>String Functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CONCAT(String, String)</code> returns a <code>String</code></p>
</li>
<li>
<p><code>SUBSTRING(String, start, length)</code> returns a <code>String</code></p>
</li>
<li>
<p><code>LOCATE(String, String [, start])</code>
<sup class="footnote" id="_footnote_a3383">[<a id="_footnoteref_19" class="footnote" href="#_footnotedef_19" title="View footnote.">19</a>]</sup>
returns an <code>int</code></p>
</li>
<li>
<p><code>LENGTH(String)</code> returns an <code>int</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that <code>start</code> and <code>length</code> are integer values.
The first position in a string is designated as <code>1</code> by these functions.</p>
</div>
<div class="paragraph">
<p>Arithmetic Functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ABS(number)</code> returns a number (<code>int</code>, <code>float</code>, or <code>double</code>) of the same type as the argument to the function</p>
</li>
<li>
<p><code>SQRT(double)</code> returns a <code>double</code></p>
</li>
<li>
<p><code>MOD(int, int)</code> returns an <code>int</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Numeric arguments to these functions may correspond to the numeric Java object types as well as the primitive numeric types.</p>
</div>
<div class="paragraph">
<p>If the value of any argument to a functional expression is null or unknown, the value of the functional expression is unknown.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="select-clause"><a class="anchor" href="#select-clause"></a>5.2.7. SELECT Clause</h4>
<div class="paragraph">
<p>The SELECT clause denotes the query result.
The SELECT clause contains either a single range variable that ranges over an entity bean abstract schema type, a single-valued path expression, or an aggregate select expression.
In the case of a finder method, the SELECT clause is restricted to contain either a single range variable or a single-valued path expression that evaluates to the abstract schema type of the entity bean for which the finder method is defined.</p>
</div>
<div class="paragraph">
<p>The SELECT clause has the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>select_clause ::= <strong>SELECT</strong> [<strong>DISTINCT</strong>] {select_expression | <strong>OBJECT</strong> (identification_variable)}

select_expression ::= single_valued_path_expression | aggregate_select_expression
aggregate_select_expression ::=
        { <strong>AVG</strong> | <strong>MAX</strong> | <strong>MIN</strong> | <strong>SUM</strong> | <strong>COUNT</strong> } ([<strong>DISTINCT</strong>] cmp_path_expression) |
        <strong>COUNT</strong> ([<strong>DISTINCT</strong>] identification_variable | single_valued_cmr_path_expression)</code></pre>
</div>
</div>
<div class="paragraph">
<p>All standalone identification variables in the SELECT clause must be qualified by the
OBJECT operator.
The SELECT clause must not use the OBJECT operator to qualify path expressions.</p>
</div>
<div class="paragraph">
<p>Note that the SELECT clause must be specified to return a single-valued expression. The query below is therefore not valid:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> o.lineItems <span class="keyword">FROM</span> <span class="keyword">Order</span> <span class="keyword">AS</span> o</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DISTINCT keyword is used to specify that duplicate values must be eliminated from
the query result.
If DISTINCT is not specified, duplicate values are not eliminated unless the query is specified for a method whose result type is <code>java.util.Set</code>.
If a query is specified for a method whose result type is <code>java.util.Set</code>, but does not specify DISTINCT, the container must interpret the query as if SELECT DISTINCT had been specified.
In general, however, the Bean Provider should specify the DISTINCT keyword when writing queries for methods that return <code>java.util.Set</code>.</p>
</div>
<div class="paragraph">
<p>The SELECT clause determines the type of the values returned by a query. For example, the following query returns a collection of products:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> l.product <span class="keyword">FROM</span> <span class="keyword">Order</span> <span class="keyword">AS</span> o, <span class="keyword">IN</span>(o.lineItems) l</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is the responsibility of the container to map the abstract schema types returned by the query to the Java types that are returned by the finder or select method with which the query is associated and to materialize those return types, as described in <a href="#a2190">Return Value Types</a>.</p>
</div>
<div class="sect4">
<h5 id="null-values-in-the-query-result"><a class="anchor" href="#null-values-in-the-query-result"></a>5.2.7.1. Null Values in the Query Result</h5>
<div class="paragraph">
<p>If the result of an Enterprise Beans QL query corresponds to a cmr-field or cmp-field whose value is null, the container must include that null value in the result that is returned by the finder or
select method.
The Bean Provider can use the IS NOT NULL construct to eliminate such null values from the result set of the query.</p>
</div>
<div class="paragraph">
<p>If the finder or select method is a single-object finder or select method, and the result set of the query consists of a single null value, the container must return the null value as the result of the method.
If the result set of a query for a single-object finder or select method contains more than one value (whether non-null, null, or a combination), the container must throw the <code>FinderException</code>.</p>
</div>
<div class="paragraph">
<p>Note, however, that cmp-field types defined in terms of Java numeric primitive types cannot produce NULL values in the query result.
An Enterprise Beans QL query that returns such a cmp-field type as a result type must not return a null value.
(If the Bean Provider wishes to allow null values for cmp-fields, he or she should specify those cmp-fields to have the equivalent Java object types instead of primitive types, e.g., <code>Integer</code> rather than <code>int</code>.)</p>
</div>
</div>
<div class="sect4">
<h5 id="aggregate-functions-in-the-select-clause"><a class="anchor" href="#aggregate-functions-in-the-select-clause"></a>5.2.7.2. Aggregate Functions in the SELECT Clause</h5>
<div class="paragraph">
<p>The result of an Enterprise Beans QL query may be the result of an aggregate function applied to a path expression.</p>
</div>
<div class="paragraph">
<p>The following aggregate functions can be used in the SELECT clause of an Enterprise Beans QL query: AVG, COUNT, MAX, MIN, SUM.</p>
</div>
<div class="paragraph">
<p>For all aggregate functions except COUNT, the path expression that is the argument to the aggregate function must terminate in a cmp-field.
The path expression argument to COUNT may terminate in either a cmp-field or a cmr-field, or the argument to COUNT may be an identification variable.</p>
</div>
<div class="paragraph">
<p>Arguments to the functions SUM and AVG must be numeric.
Arguments to the functions MAX and MIN must correspond to orderable cmp-field types (i.e., numeric types, string types, character types, or date types).</p>
</div>
<div class="paragraph">
<p>The argument to an aggregate function may be preceded by the keyword DISTINCT to specify that duplicate values are to be eliminated before the aggregate function is applied.
<sup class="footnote" id="_footnote_a3384">[<a id="_footnoteref_20" class="footnote" href="#_footnotedef_20" title="View footnote.">20</a>]</sup></p>
</div>
<div class="paragraph">
<p>Null values are eliminated before the aggregate function is applied, regardless of whether the keyword DISTINCT is specified.</p>
</div>
</div>
<div class="sect4">
<h5 id="examples"><a class="anchor" href="#examples"></a>5.2.7.3. Examples</h5>
<div class="paragraph">
<p>The following example returns all line items related to some order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(l)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns all line items regardless of whether a line item is related to any order or product:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(l)
<span class="keyword">FROM</span> LineItems <span class="keyword">AS</span> l</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns the average order quantity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">AVG</span>(o.quantity)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns the total cost of the items that John Smith has ordered.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">SUM</span>(l.price)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> o.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns the number of items in John Smith’s entire order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(l)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> o.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query returns the total number of orders.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query counts the number of items in John Smith’s order for which prices have been specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(l.price)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> o.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="predefined">COUNT</span>(l)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> o.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> l.price <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="order-by-clause"><a class="anchor" href="#order-by-clause"></a>5.2.8. ORDER BY Clause</h4>
<div class="paragraph">
<p>The ORDER BY clause allows the objects or values that are returned by the query to be ordered.</p>
</div>
<div class="paragraph">
<p>The syntax of the ORDER BY clause is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>orderby_clause ::= <strong>ORDER BY</strong> orderby_item [, orderby_item]*
orderby_item ::= cmp_path_expression [<strong>ASC</strong> | <strong>DESC</strong>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the ORDER BY clause is used in an Enterprise Beans QL query, the SELECT clause of the query must be one of the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>an identification variable x, denoted as OBJECT(x)</p>
</li>
<li>
<p>a <code>single_valued_cmr_path_expression</code></p>
</li>
<li>
<p>a <code>cmp_path_expression</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the first two cases, each <code>orderby_item</code> must be an orderable cmp-field of the entity bean abstract schema type value returned by the SELECT clause.
In the third case, the <code>orderby_item</code> must evaluate to the same cmp-field of the same entity bean abstract schema type as the <code>cmp_path_expression</code> in the SELECT clause.</p>
</div>
<div class="paragraph">
<p>For example, the first two queries below are legal, but the third and fourth are not.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> Customer c, <span class="keyword">IN</span>(c.orders) o
<span class="keyword">WHERE</span> c.address.state = <span class="string"><span class="delimiter">'</span><span class="content">CA</span><span class="delimiter">'</span></span>
<span class="keyword">ORDER</span> <span class="keyword">BY</span> o.quantity, o.totalcost

<span class="class">SELECT</span> o.quantity
<span class="keyword">FROM</span> Customer c, <span class="keyword">IN</span>(c.orders) o
<span class="keyword">WHERE</span> c.address.state = <span class="string"><span class="delimiter">'</span><span class="content">CA</span><span class="delimiter">'</span></span>
<span class="keyword">ORDER</span> <span class="keyword">BY</span> o.quantity

<span class="class">SELECT</span> l.product.product_name
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> o.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span>
<span class="keyword">ORDER</span> <span class="keyword">BY</span> l.product.price

<span class="class">SELECT</span> l.product.product_name
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.customer.lastname = <span class="string"><span class="delimiter">'</span><span class="content">Smith</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> o.customer.firstname = <span class="string"><span class="delimiter">'</span><span class="content">John</span><span class="delimiter">'</span></span>
<span class="keyword">ORDER</span> <span class="keyword">BY</span> o.quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p>If more than one <code>orderby_item</code> is specified, the left-to-right sequence of the <code>orderby_item</code> elements determines the precedence, whereby the leftmost <code>orderby_item</code> has highest precedence.</p>
</div>
<div class="paragraph">
<p>The keyword ASC specifies that ascending ordering be used; the keyword DESC specifies that descending ordering beused.
Ascending ordering is the default.</p>
</div>
<div class="paragraph">
<p>SQL rules for the ordering of null values apply: that is, all null values must appear before all non-null values in the ordering or all null values must appear after all non-null values in the ordering, but it is not specified which.</p>
</div>
<div class="paragraph">
<p>It is the container’s responsibility to ensure that the ordering of the query result is preserved in the result of the finder or select method if the ORDER BY clause is used.</p>
</div>
</div>
<div class="sect3">
<h4 id="a2190"><a class="anchor" href="#a2190"></a>5.2.9. Return Value Types</h4>
<div class="paragraph">
<p>The value of a query result, specified by the SELECT clause, is an entity bean abstract
schema type, a cmp-field type, or the result of an aggregate function.
The finder or select method with which the query is associated in the deployment descriptor determines how this result is mapped to the Java type that is visible as the result of the query method.</p>
</div>
<div class="paragraph">
<p>How the result type of a query is mapped depends on whether the query is defined for a finder method on the remote home interface, for a finder method on the local home interface, or for a select method.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The result type of a query for a finder method must be the entity bean abstract schema type that corresponds to the entity bean type of the entity bean on whose home interface the finder method is defined.
If the query is used for a finder method defined on the remote home interface of the bean, the result of the finder method is the entity bean’s remote interface (or a collection of objects implementing the entity bean’s remote interface).
If the finder method is defined on the local home interface, the result is the entity bean’s local interface (or a collection of objects implementing the entity bean’s local interface).</p>
</li>
<li>
<p>If the result type of a query for a select method is an entity bean abstract schema type, the return values for the query method are instances of the entity bean’s local interface or instances of the entity bean’s remote interface, depending on whether the value of the <code>result-type-mapping</code> deployment descriptor element contained in the <code>query</code> element for the select method is <code>Local</code> or <code>Remote</code>.
The default value for <code>result-type-mapping</code> is <code>Local</code>.</p>
</li>
<li>
<p>If the result type of a query used for a select method is an abstract schema type corresponding to a cmp-field type (excluding queries whose SELECT clause uses one of the aggregate functions AVG, COUNT, MAX, MIN, SUM), the result type of the select method is as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the Java type of the cmp-field is an object type and the select method is a single-object select method, the result of the select method is an instance of that object type.
If the select method is a multi-object select method, the result is a collection of instances of that type.</p>
</li>
<li>
<p>If the Java type of the cmp-field is a primitive Java type (e.g., int), and the select method is a
single-object select method, the result of the select method is that primitive type.</p>
</li>
<li>
<p>If the Java type of the cmp-field is a primitive Java type (e.g., int), and the select method is a multi-object select method, the result of the select method is a collection of values of the corresponding wrappered type (e.g., Integer).</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the select method query is an aggregate query, the select method must be a single-object select method.</p>
<div class="ulist">
<ul>
<li>
<p>The result type of the select method must be a primitive type, a wrappered type, or an object type that is compatible with the standard JDBC conversion mappings for the type of the cmp-field <a href="#a3335">[6]</a>.</p>
</li>
<li>
<p>If the aggregate query uses the SUM, AVG, MAX, or MIN operator, and the result type of the select method is an object type and there are no values to which the aggregate function can be applied, the select method returns null.</p>
</li>
<li>
<p>If the aggregate query uses the SUM, AVG, MAX, or MIN operator, and the result type of the select method is a primitive type and there are no values to which the aggregate function can be applied, the container must throw the <code>ObjectNotFoundException</code>.</p>
</li>
<li>
<p>If the aggregate query uses the COUNT operator, the result of the select method should be an exact numeric
type.
If there are no values to which the COUNT method can be applied, the result of the select method is 0.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The result of a finder or select method may contain a null value if a cmp-field or cmr-field in the query result is null.</p>
</div>
</div>
<div class="sect3">
<h4 id="a2207"><a class="anchor" href="#a2207"></a>5.2.10. Null Values</h4>
<div class="paragraph">
<p>When the target of a reference does not exist in the persistent store, its value is regarded as <code>NULL</code>.
SQL 92 <code>NULL</code> semantics <a href="#a3331">[7]</a> defines the evaluation of conditional expressions containing <code>NULL</code> values.</p>
</div>
<div class="paragraph">
<p>The following is a brief description of these semantics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Comparison or arithmetic operations with a NULL value always yield an unknown value.</p>
</li>
<li>
<p>Two NULL values are not considered to be equal, the comparison yields an unknown value.</p>
</li>
<li>
<p>Comparison or arithmetic operations with an unknown value always yield an unknown value.</p>
</li>
<li>
<p>The IS NULL and IS NOT NULL operators convert a <code>NULL</code> cmp-field or single-valued cmr-field value into the respective TRUE or FALSE value.</p>
</li>
<li>
<p>Boolean operators use three valued logic, defined by <a href="#a2216">Definition of the AND Operator</a>, <a href="#a2235">Definition of the OR Operator</a>, and <a href="#a2254">Definition of the NOT Operator</a>.</p>
</li>
</ul>
</div>
<table id="a2216" class="tableblock frame-all grid-all" style="width: 30%;">
<caption class="title">Table 4. Definition of the AND Operator</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">AND</th>
<th class="tableblock halign-left valign-top">T</th>
<th class="tableblock halign-left valign-top">F</th>
<th class="tableblock halign-left valign-top">U</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
</tbody>
</table>
<table id="a2235" class="tableblock frame-all grid-all" style="width: 30%;">
<caption class="title">Table 5. Definition of the OR Operator</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OR</th>
<th class="tableblock halign-left valign-top">T</th>
<th class="tableblock halign-left valign-top">F</th>
<th class="tableblock halign-left valign-top">U</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
</tbody>
</table>
<table id="a2254" class="tableblock frame-all grid-all" style="width: 20%;">
<caption class="title">Table 6. Definition of the NOT Operator</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">NOT</th>
<th class="tableblock halign-center valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">F</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">T</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">U</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>Note: Enterprise Beans QL defines the empty string, '', as a string with 0 length, which is not equal to a NULL value.
However, NULL values and empty strings may not always be distinguished when queries are mapped to some
persistent stores.
The Bean Provider should therefore not rely on the semantics of Enterprise Beans QL comparisons involving the empty string and NULL value.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="a2265"><a class="anchor" href="#a2265"></a>5.2.11. Equality and Comparison Semantics</h4>
<div class="paragraph">
<p>Enterprise Beans QL only permits the values of <em>like</em> types to be compared.
A type is <em>like</em> another type if they correspond to the same Java language type, or if one is a primitive Java language type and the other is the wrappered Java class type equivalent (e.g., <code>int</code> and <code>Integer</code> are like types in this sense).
There is one exception to this rule: it is valid to compare numeric values for which the rules of numeric promotion apply.
Conditional expressions attempting to compare non-like type values are disallowed except for this numeric case.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Note that Enterprise Beans QL permits the arithmetic operators and comparison operators to be applied to cmp-fields and input parameters of the wrappered Java class equivalents to the primitive numeric Java types.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Two entity objects of the same abstract schema type are equal if and only if they have the same primary key value.</p>
</div>
</div>
<div class="sect3">
<h4 id="restrictions"><a class="anchor" href="#restrictions"></a>5.2.12. Restrictions</h4>
<div class="paragraph">
<p>Date and time values should use the standard Java <code>long</code> millisecond value.
The standard way to produce millisecond values is to use <code>java.util.Calendar</code>.</p>
</div>
<div class="paragraph">
<p>Although SQL requires support for fixed decimal comparison in arithmetic expressions, Enterprise Beans QL does not.
For this reason Enterprise Beans QL restricts exact numeric literals to those without a decimal point (and numerics with a decimal point as an alternate representation for approximate numeric values).</p>
</div>
<div class="paragraph">
<p>Support for the BigDecimal and BigInteger types is optional for containers in Enterprise Beans 2.1. Applications that depend on such types in Enterprise Beans QL queries may not be portable.</p>
</div>
<div class="paragraph">
<p><code>Boolean</code> comparison is restricted to <code>=</code> and <code>&lt;&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Enterprise Beans QL does not support the use of comments.</p>
</div>
<div class="paragraph">
<p>The data model for container-managed persistence does not currently support inheritance.
Therefore, entity objects of different types cannot be compared.
Enterprise Beans QL queries that contain such comparisons are invalid.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examples-2"><a class="anchor" href="#examples-2"></a>5.3. Examples</h3>
<div class="paragraph">
<p>The following examples illustrate the syntax and semantics of Enterprise Beans QL.
These examples are based on the example presented in <a href="#a1882">Examples</a>.</p>
</div>
<div class="sect3">
<h4 id="simple-queries"><a class="anchor" href="#simple-queries"></a>5.3.1. Simple Queries</h4>
<div class="paragraph">
<p>Find all orders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find all orders that need to be shipped to California:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o
<span class="keyword">WHERE</span> o.shipping_address.state = <span class="error">‘</span>CA<span class="error">’</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Find all states for which there are orders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> o.shipping_address.state
<span class="keyword">FROM</span> <span class="keyword">Order</span> o</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="queries-with-relationships"><a class="anchor" href="#queries-with-relationships"></a>5.3.2. Queries with Relationships</h4>
<div class="paragraph">
<p>Find all orders that have line items:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the result of this query does not include orders with no associated line items.
This query can also be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o
<span class="keyword">WHERE</span> o.lineItems <span class="keyword">IS</span> <span class="keyword">NOT</span> EMPTY</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find all orders that have no line items:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o
<span class="keyword">WHERE</span> o.lineItems <span class="keyword">IS</span> EMPTY</code></pre>
</div>
</div>
<div class="paragraph">
<p>Find all pending orders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> l.shipped = <span class="predefined-constant">FALSE</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Find all orders in which the shipping address differs from the billing address.
This example assumes that the Bean Provider uses two distinct entity beans to designate shipping and billing addresses, as in <a href="#a1886">Several Entity Beans with Abstract Persistence Schemas Defined in the Same Ejb-jar File.</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o
<span class="keyword">WHERE</span>
<span class="keyword">NOT</span> (o.shipping_address.state = o.billing_address.state <span class="keyword">AND</span>
    o.shipping_address.city = o.billing_address.city <span class="keyword">AND</span>
    o.shipping_address.street = o.billing_address.street)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the Bean Provider uses a single entity bean in two different relationships for both the shipping address and the billing address, the above expression can be simplified based on the equality rules defined in <a href="#a2265">Equality and Comparison Semantics</a>.
The query can then be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o
<span class="keyword">WHERE</span> o.shipping_address &lt;&gt; o.billing_address</code></pre>
</div>
</div>
<div class="paragraph">
<p>The query checks whether the same entity bean abstract schema type instance (identified by its primary key) is related to an order through two distinct relationships.</p>
</div>
<div class="paragraph">
<p>Find all orders for a book titled 'Applying Enterprise Beans: Component-Based Development for the J2EE Platform':</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> l.product.type = <span class="string"><span class="delimiter">'</span><span class="content">book</span><span class="delimiter">'</span></span> <span class="keyword">AND</span>
    l.product.name = <span class="string"><span class="delimiter">'</span><span class="content">Applying Enterprise Beans:
    Component-Based Development for the J2EE Platform</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="queries-using-input-parameters"><a class="anchor" href="#queries-using-input-parameters"></a>5.3.3. Queries Using Input Parameters</h4>
<div class="paragraph">
<p>The following query finds the orders for a product whose name is designated by an input parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> l.product.name = <span class="error">?</span><span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For this query, the input parameter must be of the type of the cmp-field name, i.e., a string.</p>
</div>
</div>
<div class="sect3">
<h4 id="queries-for-select-methods"><a class="anchor" href="#queries-for-select-methods"></a>5.3.4. Queries for Select Methods</h4>
<div class="paragraph">
<p>The following select queries illustrate the selection of values other than entity beans.</p>
</div>
<div class="paragraph">
<p>The following Enterprise Beans QL query selects the names of all products that have been ordered.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> l.product.name
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following query finds the names of all products in the order specified by a particular order number.
The order number is specified by a parameter that corresponds to the primary key of Order.
Note that because this query does not specify DISTINCT in its SELECT clause, if it is specified for a query method whose return type is <code>java.util.Collection</code>, the collection that is returned may contain duplicates.
In this example, such duplicates correspond to products that have been ordered multiple times in the given order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> l.product.name
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> o.ordernumber = <span class="error">?</span><span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is the responsibility of the container to interpret the query such that no duplicates are produced if the result type of the query method is <code>java.util.Set</code>.</p>
</div>
<div class="paragraph">
<p>Consider the following query for a select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> o.shipping_address.city
<span class="keyword">FROM</span> <span class="keyword">Order</span> o</code></pre>
</div>
</div>
<div class="paragraph">
<p>This query returns the names of all the cities of the shipping addresses of all orders.
The result type of the select method, which is either <code>java.util.Collection</code> or <code>java.util.Set</code>, determines whether the query may return duplicate city names.</p>
</div>
</div>
<div class="sect3">
<h4 id="enterprise-beans-ql-and-sql"><a class="anchor" href="#enterprise-beans-ql-and-sql"></a>5.3.5. Enterprise Beans QL and SQL</h4>
<div class="paragraph">
<p>Enterprise Beans QL, like SQL, treats the FROM clause as a cartesian product.
The FROM clause is similar to that of SQL in that the declared identification variables affect the results of the query even if they are not used in the WHERE clause.
The Bean Provider should use caution in defining identification variables because the domain of the query can depend on whether there are any values of the declared type.</p>
</div>
<div class="paragraph">
<p>For example, the FROM clause below defines a query over all orders that have line items and existing products.
If there are no Product instances in the persistent store, the domain of the query is empty and no order is selected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> <span class="keyword">AS</span> o, <span class="keyword">IN</span>(o.lineItems) l, Product p</code></pre>
</div>
</div>
<div class="paragraph">
<p>The container can represent the abstract schemas of a set of entity beans in an application using a relational database.
There are multiple ways to define a mapping to a set of tables in a relational database.
Although this area is beyond the scope of this specification, a sample mapping and translation of Enterprise Beans QL to SQL is described to clarify the semantics of Enterprise Beans QL.</p>
</div>
<div class="paragraph">
<p>A mapping strategy from a set of entity beans to a relational database might be to map each entity bean to a separate table.
One-to-many relationships may be represented by foreign keys in the related table from the many side and many-to-many relationships may be represented by using an auxiliary table that contains the primary keys of the related objects.</p>
</div>
<div class="paragraph">
<p>Because the FROM clause represents a cartesian product, the SQL result may contain duplicates.
If the query is for a method whose return type is <code>java.util.Set</code>, the container would therefore typically utilize a SELECT DISTINCT clause in translating the query to SQL.
The query method result may contain duplicates if the return type of the query method is <code>java.util.Collection</code> and DISTINCT is not specified in the SELECT clause of the Enterprise Beans QL query.</p>
</div>
<div class="paragraph">
<p>The following translation example illustrates the mapping of entity beans to relational database tables.
The entity bean OrderEJB is represented by the table ORDER and the entity bean LineItemEJB is represented by the table LINEITEM.
The column OKEY represents the primary key for OrderEJB entity bean, FKEY represents the foreign key column of LINEITEM that holds the values of the ORDER primary keys.
FKEY is defined in the LINEITEM table to model the one-to-many relationship.</p>
</div>
<div class="paragraph">
<p>Using this mapping, the following Enterprise Beans QL finder query</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> OBJECT(o)
<span class="keyword">FROM</span> <span class="keyword">Order</span> o, <span class="keyword">IN</span>(o.lineItems) l
<span class="keyword">WHERE</span> l.quantity &gt; <span class="integer">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>might be represented in SQL as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> o.OKEY
<span class="keyword">FROM</span> ORDERBEAN o, LINEITEM l
<span class="keyword">WHERE</span> o.OKEY = l.FKEY <span class="keyword">AND</span> l.QUANTITY &gt; <span class="integer">5</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enterprise-beans-ql-bnf"><a class="anchor" href="#enterprise-beans-ql-bnf"></a>5.4. Enterprise Beans QL BNF</h3>
<div class="paragraph">
<p>Enterprise Beans QL BNF notation summary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>{ &#8230;&#8203; } grouping</p>
</li>
<li>
<p>[ &#8230;&#8203; ] optional constructs</p>
</li>
<li>
<p><strong>boldface</strong> keywords</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is the complete BNF notation for Enterprise Beans QL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>Enterprise Beans QL ::= select_clause from_clause [where_clause] [orderby_clause]

from_clause ::= <strong>FROM</strong> identification_variable_declaration
        [, identification_variable_declaration]*
identification_variable_declaration ::=
        collection_member_declaration | range_variable_declaration
collection_member_declaration ::= <strong>IN</strong> (collection_valued_path_expression) [<strong>AS</strong>] identifier
range_variable_declaration ::= abstract_schema_name [<strong>AS</strong>] identifier
cmp_path_expression ::=
        {identification_variable | single_valued_cmr_path_expression}.cmp_field
single_valued_cmr_path_expression ::=
        identification_variable.[single_valued_cmr_field.]* single_valued_cmr_field
single_valued_path_expression ::=
        cmp_path_expression | single_valued_cmr_path_expression
collection_valued_path_expression ::=
        identification_variable.[single_valued_cmr_field.]* collection_valued_cmr_field
select_clause ::= <strong>SELECT</strong> [<strong>DISTINCT</strong>]
        {select_expression | <strong>OBJECT</strong>(identification_variable)}
select_expression ::=
        single_valued_path_expression | aggregate_select_expression
aggregate_select_expression ::=
        {<strong>AVG</strong> | <strong>MAX</strong> | <strong>MIN</strong> | <strong>SUM</strong> | <strong>COUNT</strong>} ([<strong>DISTINCT</strong>] cmp_path_expression) |
        <strong>COUNT</strong> ([<strong>DISTINCT</strong>] identification_variable | single_valued_cmr_path_expression)
where_clause ::= <strong>WHERE</strong> conditional_expression
conditional_expression ::= conditional_term | conditional_expression <strong>OR</strong> conditional_term
conditional_term ::= conditional_factor | conditional_term <strong>AND</strong> conditional_factor
conditional_factor ::= [<strong>NOT</strong>] conditional_primary
conditional_primary ::= simple_cond_expression | (conditional_expression)
simple_cond_expression ::= comparison_expression | between_expression | like_expression |
        in_expression | null_comparison_expression |
        empty_collection_comparison_expression |
        collection_member_expression
between_expression ::= arithmetic_expression [<strong>NOT</strong>] <strong>BETWEEN</strong>
        arithmetic_expression <strong>AND</strong> arithmetic_expression
in_expression ::=
        cmp_path_expression [<strong>NOT</strong>] <strong>IN</strong>
        ( {literal | input_parameter} [, {literal | input_parameter}]* )
like_expression ::=_
        cmp_path_expression [<strong>NOT</strong>] <strong>LIKE</strong> pattern_value [<strong>ESCAPE</strong> escape_character]
null_comparison_expression ::=
        {single_valued_path_expression | input_parameter} <strong>IS</strong> [<strong>NOT</strong>] <strong>NULL</strong>
empty_collection_comparison_expression ::=
        collection_valued_path_expression <strong>IS</strong> [<strong>NOT</strong>] <strong>EMPTY</strong>
collection_member_expression ::=
        {single_valued_cmr_path_expression | identification_variable | input_parameter}
            [<strong>NOT</strong>] <strong>MEMBER</strong> [<strong>OF</strong>] collection_valued_path_expression
comparison_expression ::=
        string_value comparison_operator string_expression |
        boolean_value { <strong>=</strong> | <strong>&lt;&gt;</strong> } boolean_expression} |
        datetime_value comparison_operator datetime_expression |
        entity_bean_value { <strong>=</strong> | <strong>&lt;&gt;</strong> } entity_bean_expression |
        arithmetic_value comparison_operator arithmetic_expression
arithmetic_value ::= cmp_path_expression | functions_returning_numerics
comparison_operator ::= <strong>=</strong> | <strong>&gt;</strong> | <strong>&gt;=</strong> | <strong>&lt;</strong> | <strong>&lt;=</strong> | <strong>&lt;&gt;</strong>
arithmetic_expression ::= arithmetic_term | arithmetic_expression { <strong>+</strong> | <strong>-</strong> } arithmetic_term
arithmetic_term ::= arithmetic_factor | arithmetic_term { <strong>*</strong> | <strong>/</strong> } arithmetic_factor
arithmetic_factor ::= [{ <strong>+</strong> | <strong>-</strong> }] arithmetic_primary
arithmetic_primary ::= cmp_path_expression | literal | (arithmetic_expression) |
        input_parameter | functions_returning_numerics
string_value ::= cmp_path_expression | functions_returning_strings
string_expression ::= string_primary | input_parameter
string_primary ::= cmp_path_expression | literal | (string_expression) |
        functions_returning_strings
datetime_value ::= cmp_path_expression
datetime_expression ::= datetime_value | input_parameter
boolean_value ::= cmp_path_expression
boolean_expression ::= cmp_path_expression | literal | input_parameter
entity_bean_value ::= single_valued_cmr_path_expression | identification_variable
entity_bean_expression ::= entity_bean_value | input_parameter
functions_returning_strings ::= <strong>CONCAT</strong>(string_expression, string_expression) |
        <strong>SUBSTRING</strong>(string_expression, arithmetic_expression, arithmetic_expression)
functions_returning_numerics::= <strong>LENGTH</strong>(string_expression) |
        <strong>LOCATE</strong>(string_expression, string_expression[, arithmetic_expression]) |
        <strong>ABS</strong>(arithmetic_expression) |
        <strong>SQRT</strong>(arithmetic_expression) |
        <strong>MOD</strong>(arithmetic_expression, arithmetic_expression)
orderby_clause ::= <strong>ORDER BY</strong> orderby_item [, orderby_item]*
orderby_item ::= cmp_path_expression [<strong>ASC</strong> | <strong>DESC</strong>]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a2456"><a class="anchor" href="#a2456"></a>6. Enterprise Beans 2.1 Entity Bean Component Contract for Bean-Managed Persistence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The entity bean component contract for bean-managed persistence is the contract between an entity bean and its container.
It defines the life cycle of the entity bean instances and the model for method delegation of the client-invoked business methods.
The main goal of this contract is to ensure that a component using bean-managed persistence is portable across all compliant Enterprise Beans containers.</p>
</div>
<div class="paragraph">
<p>This chapter defines the Enterprise Bean Provider’s view of this contract and the Container Provider’s responsibility for managing the life cycle of the enterprise bean instances.
It also describes the Bean Provider’s responsibilities when persistence is provided by the Bean Provider.</p>
</div>
<div class="paragraph">
<p><em>Note that use of dependency injection, interceptors, and Java language metadata annotations is not supported for Enterprise Beans 2.1 entity beans.</em></p>
</div>
<div class="sect2">
<h3 id="overview-of-bean-managed-entity-persistence"><a class="anchor" href="#overview-of-bean-managed-entity-persistence"></a>6.1. Overview of Bean-Managed Entity Persistence</h3>
<div class="paragraph">
<p>An entity bean implements an object view of an entity stored in an underlying database, or an entity implemented by an existing enterprise application (for example, by a mainframe program or by an ERP application).
The data access protocol for transferring the state of the entity between the entity bean instances and the underlying database is referred to as object persistence.</p>
</div>
<div class="paragraph">
<p>The entity bean component protocol for bean-managed persistence allows the entity Bean Provider to implement the entity bean’s persistence directly in the entity bean class or in one or more helper classes provided with the entity bean class.
This chapter describes the contracts for bean-managed persistence.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MTMiIGhlaWdodD0iNTQ0IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjEwNiIgeT0iMzMiIGZvbnQtc3R5bGU9Iml0YWxpYyI+CiAgICA8dHNwYW4geD0iMTA2IiB5PSIzMyI+KGEpIEVudGl0eSBiZWFuIGlzIGFuIG9iamVjdCB2aWV3IG9mIGEgcmVjb3JkIGluIHRoZSBkYXRhYmFzZTwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIxNzYiIGhlaWdodD0iMTYyIiB4PSIxOTMiIHk9Ijc1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjIwLjI1IiByeT0iMjAuMjUiLz4KICA8dGV4dCB4PSIyNTQiIHk9IjEwMCI+CiAgICA8dHNwYW4geD0iMjUwLjY5NSIgeT0iMTAwIj5jb250YWluZXI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI2LjY2NyAxMzdoNjYuNjY2YzguMzM0IDAgMTYuNjY3IDEwIDE2LjY2NyAyMHMtOC4zMzMgMjAtMTYuNjY3IDIwSDI2LjY2N0MxOC4zMzMgMTc3IDEwIDE2NyAxMCAxNTdzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMTgiIHk9IjE2MyI+CiAgICA8dHNwYW4geD0iNDIuMDQ3IiB5PSIxNjMiPmNsaWVudDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE1IDE1N2gxMTFtLTYtNmw2IDYtNiA2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNDcuNjY3IDEzN2g2Ni42NjZjOC4zMzQgMCAxNi42NjcgMTAgMTYuNjY3IDIwcy04LjMzMyAyMC0xNi42NjcgMjBoLTY2LjY2NkMyMzkuMzMzIDE3NyAyMzEgMTY3IDIzMSAxNTdzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMjM5IiB5PSIxNTQiPgogICAgPHRzcGFuIHg9IjI1MS40OTIiIHk9IjE1NCI+QWNjb3VudDwvdHNwYW4+IDx0c3BhbiB4PSIyNDUuMjczIiB5PSIxNzEuNjA5Ij5lbnRpdHkgYmVhbjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzM2IDE1N2gxMjRtLTYtNmw2IDYtNiA2Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQ2NSAxMjMuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3di02Ni42NjZjMC04LjMzNC0yNS0xNi42NjctNTAtMTYuNjY3cy01MCA4LjMzMy01MCAxNi42Njd6Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjUgMTIzLjY2N3Y2Ni42NjZjMCA4LjMzNCAyNSAxNi42NjcgNTAgMTYuNjY3czUwLTguMzMzIDUwLTE2LjY2N3YtNjYuNjY2YzAgOC4zMzMtMjUgMTYuNjY2LTUwIDE2LjY2NnMtNTAtOC4zMzMtNTAtMTYuNjY2YzAtOC4zMzQgMjUtMTYuNjY3IDUwLTE2LjY2N3M1MCA4LjMzMyA1MCAxNi42NjciLz4KICA8dGV4dCB4PSI0NzQiIHk9IjE3OSI+CiAgICA8dHNwYW4geD0iNDc0LjQ5MiIgeT0iMTc5Ij5BY2NvdW50IDEwMDwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjExMCIgeT0iMjk5IiBmb250LXN0eWxlPSJpdGFsaWMiPgogICAgPHRzcGFuIHg9IjExMCIgeT0iMjk5Ij4oYikgRW50aXR5IGJlYW4gaXMgYW4gb2JqZWN0IHZpZXcgb2YgYW4gZXhpc3RpbmcgYXBwbGljYXRpb248L3RzcGFuPgogIDwvdGV4dD4KICA8cmVjdCB3aWR0aD0iMTc2IiBoZWlnaHQ9IjE2MiIgeD0iMTM0IiB5PSIzMjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjAuMjUiIHJ5PSIyMC4yNSIvPgogIDx0ZXh0IHg9IjE5NSIgeT0iMzQ3Ij4KICAgIDx0c3BhbiB4PSIxOTEuNjk1IiB5PSIzNDciPmNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjYuNjY3IDM4NGg2Ni42NjZjOC4zMzQgMCAxNi42NjcgMTAgMTYuNjY3IDIwcy04LjMzMyAyMC0xNi42NjcgMjBIMjYuNjY3QzE4LjMzMyA0MjQgMTAgNDE0IDEwIDQwNHM4LjMzMy0yMCAxNi42NjctMjAiLz4KICA8dGV4dCB4PSIxOCIgeT0iNDEwIj4KICAgIDx0c3BhbiB4PSI0Mi4wNDciIHk9IjQxMCI+Y2xpZW50PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTUgNDA0aDUybS02LTZsNiA2LTYgNiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTg4LjY2NyAzODRoNjYuNjY2YzguMzM0IDAgMTYuNjY3IDEwIDE2LjY2NyAyMHMtOC4zMzMgMjAtMTYuNjY3IDIwaC02Ni42NjZDMTgwLjMzMyA0MjQgMTcyIDQxNCAxNzIgNDA0czguMzMzLTIwIDE2LjY2Ny0yMCIvPgogIDx0ZXh0IHg9IjE4MCIgeT0iNDAxIj4KICAgIDx0c3BhbiB4PSIxOTIuNDkyIiB5PSI0MDEiPkFjY291bnQgPC90c3Bhbj4gPHRzcGFuIHg9IjE4Ni4yNzMiIHk9IjQxOC42MDkiPmVudGl0eSBiZWFuPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNzcgNDAzLjk2bDQ5LS4zODIgNS0uMDM5TTMyNSAzOThsNiA1LjU0LTYgNS40NiIvPgogIDxlbGxpcHNlIGN4PSIzOTguNSIgY3k9IjQwMy41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjYyLjUiIHJ5PSIzNy41Ii8+CiAgPHRleHQgeD0iMzQ0IiB5PSI0MDAiPgogICAgPHRzcGFuIHg9IjM3MC45NDUiIHk9IjQwMCI+ZXhpc2l0aW5nPC90c3Bhbj4gPHRzcGFuIHg9IjM2Mi41NTUiIHk9IjQxNy42MDkiPmFwcGxpY2F0aW9uPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjYgNDAzLjU2MWwyNiAuMzE3IDUgLjA2MU00OTEgMzk4bDYgNS45MzktNiA2LjA2MSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01MDIgMzcwLjY2N3Y2Ni42NjZjMCA4LjMzNCAyNSAxNi42NjcgNTAgMTYuNjY3czUwLTguMzMzIDUwLTE2LjY2N3YtNjYuNjY2YzAtOC4zMzQtMjUtMTYuNjY3LTUwLTE2LjY2N3MtNTAgOC4zMzMtNTAgMTYuNjY3eiIvPgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNTAyIDM3MC42Njd2NjYuNjY2YzAgOC4zMzQgMjUgMTYuNjY3IDUwIDE2LjY2N3M1MC04LjMzMyA1MC0xNi42Njd2LTY2LjY2NmMwIDguMzMzLTI1IDE2LjY2Ni01MCAxNi42NjZzLTUwLTguMzMzLTUwLTE2LjY2NmMwLTguMzM0IDI1LTE2LjY2NyA1MC0xNi42NjdzNTAgOC4zMzMgNTAgMTYuNjY3Ii8+CiAgPHRleHQgeD0iNTExIiB5PSI0MjYiPgogICAgPHRzcGFuIHg9IjUxMS40OTIiIHk9IjQyNiI+QWNjb3VudCAxMDA8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 38">
</div>
<div class="title">Figure 10. Client View of Underlying Data Sources Accessed Through Entity Bean</div>
</div>
<div class="sect3">
<h4 id="entity-bean-providers-view-of-persistence"><a class="anchor" href="#entity-bean-providers-view-of-persistence"></a>6.1.1. Entity Bean Provider’s View of Persistence</h4>
<div class="paragraph">
<p>Using bean-managed persistence, the entity Bean Provider writes database access calls (e.g. using JDBC&#8482; or SQLJ) directly in the entity bean component.
The data access calls are performed in the <code>ejbCreate&lt;METHOD&gt;</code>, <code>ejbRemove</code>, <code>ejbFind&lt;METHOD&gt;</code>, <code>ejbLoad</code>, and <code>ejbStore</code> methods, and/or in the business methods.</p>
</div>
<div class="paragraph">
<p>The data access calls can be coded directly into the entity bean class, or they can be encapsulated in a
data access component that is part of the entity bean.
Directly coding data access calls in the entity bean class may make it more difficult to adapt the entity bean to work with a database that has a different schema, or with a different type of database.</p>
</div>
<div class="paragraph">
<p><em>We expect that most enterprise beans with bean-managed persistence will be created by application development tools which will encapsulate data access in components.
These data access components will probably not be the same for all tools.
Further, if the data access calls are encapsulated in data access components, the data access components may require deployment interfaces to allow adapting data access to different schemas or even to a different database type.
This Enterprise Beans specification does not define the architecture for data access objects, strategies for tailoring and deploying data
access components or ensuring portability of these components for bean-managed persistence.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="runtime-execution-model"><a class="anchor" href="#runtime-execution-model"></a>6.1.2. Runtime Execution Model</h4>
<div class="paragraph">
<p>This section describes the runtime model and the classes used in the description of the contract between an entity bean with bean-managed persistence and its container.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NDIiIGhlaWdodD0iNTUwIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjIuNSAyMjZoNTBjNi4yNSAwIDEyLjUgOC43NSAxMi41IDE3LjVTNzguNzUgMjYxIDcyLjUgMjYxaC01MGMtNi4yNSAwLTEyLjUtOC43NS0xMi41LTE3LjVTMTYuMjUgMjI2IDIyLjUgMjI2Ii8+CiAgPHRleHQgeD0iMTgiIHk9IjI0OSI+CiAgICA8dHNwYW4geD0iMjkuNTQ3IiB5PSIyNDkiPmNsaWVudDwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIzNjIiIGhlaWdodD0iNDY2IiB4PSIzNjkiIHk9IjEwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjQ1LjI1IiByeT0iNDUuMjUiLz4KICA8dGV4dCB4PSI0MjciIHk9IjM4Ij4KICAgIDx0c3BhbiB4PSI0MzguNjk1IiB5PSIzOCI+Y29udGFpbmVyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjMxNSIgaGVpZ2h0PSIxODgiIHg9IjM5MSIgeT0iNTEiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiByeD0iMjMuNSIgcnk9IjIzLjUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM4MS44MzMgNjdoODMuMzM0QzQ3NS41ODMgNjcgNDg2IDc1Ljc1IDQ4NiA4NC41UzQ3NS41ODMgMTAyIDQ2NS4xNjcgMTAyaC04My4zMzRDMzcxLjQxNyAxMDIgMzYxIDkzLjI1IDM2MSA4NC41UzM3MS40MTcgNjcgMzgxLjgzMyA2NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzcxLjgzMyA3N2g4My4zMzRDNDY1LjU4MyA3NyA0NzYgODUuNzUgNDc2IDk0LjVTNDY1LjU4MyAxMTIgNDU1LjE2NyAxMTJoLTgzLjMzNEMzNjEuNDE3IDExMiAzNTEgMTAzLjI1IDM1MSA5NC41UzM2MS40MTcgNzcgMzcxLjgzMyA3NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzYxLjgzMyA4N2g4My4zMzRDNDU1LjU4MyA4NyA0NjYgOTUuNzUgNDY2IDEwNC41UzQ1NS41ODMgMTIyIDQ0NS4xNjcgMTIyaC04My4zMzRDMzUxLjQxNyAxMjIgMzQxIDExMy4yNSAzNDEgMTA0LjVTMzUxLjQxNyA4NyAzNjEuODMzIDg3Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03OC41MzYgMjIzLjg5NUwzMjguOTI5IDEwNy43MWw0LjUzNS0yLjEwNE0zMjYgMTAzbDcuNDY0IDIuNjA1TDMzMSAxMTMiLz4KICA8dGV4dCB4PSIzNDkiIHk9IjExMCI+CiAgICA8dHNwYW4geD0iMzY1LjYzMyIgeT0iMTEwIj5FSkJPYmplY3RzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NzAuNjQ0IDEwNi4zNTJsNzAuMDY3IDI3Ljk0NCA0LjY0NSAxLjg1Mk01NDIgMTI5bDMuMzU2IDcuMTQ4TDUzOCAxMzkiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU5MC44MzMgODNoODMuMzM0QzY4NC41ODMgODMgNjk1IDEwMC41IDY5NSAxMThzLTEwLjQxNyAzNS0yMC44MzMgMzVoLTgzLjMzNEM1ODAuNDE3IDE1MyA1NzAgMTM1LjUgNTcwIDExOHMxMC40MTctMzUgMjAuODMzLTM1Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01ODAuODMzIDkzaDgzLjMzNEM2NzQuNTgzIDkzIDY4NSAxMTAuNSA2ODUgMTI4cy0xMC40MTcgMzUtMjAuODMzIDM1aC04My4zMzRDNTcwLjQxNyAxNjMgNTYwIDE0NS41IDU2MCAxMjhzMTAuNDE3LTM1IDIwLjgzMy0zNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNTcwLjgzMyAxMDNoODMuMzM0QzY2NC41ODMgMTAzIDY3NSAxMjAuNSA2NzUgMTM4cy0xMC40MTcgMzUtMjAuODMzIDM1aC04My4zMzRDNTYwLjQxNyAxNzMgNTUwIDE1NS41IDU1MCAxMzhzMTAuNDE3LTM1IDIwLjgzMy0zNSIvPgogIDx0ZXh0IHg9IjU1OCIgeT0iMTM1Ij4KICAgIDx0c3BhbiB4PSI1NjMuNDUzIiB5PSIxMzUiPmVudGVycHJpc2UgYmVhbjwvdHNwYW4+IDx0c3BhbiB4PSI1ODMuMDg2IiB5PSIxNTIuNjA5Ij5pbnN0YW5jZXM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTg5Ljc5NiAyNDEuNTg4bDIzOC42MTEtNzAuMjYzIDQuNzk3LTEuNDEzTTMyNiAxNjZsNy4yMDQgMy45MTJMMzI5IDE3NyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzU4LjgzMyAxNTFoODMuMzM0YzEwLjQxNiAwIDIwLjgzMyA4Ljc1IDIwLjgzMyAxNy41UzQ1Mi41ODMgMTg2IDQ0Mi4xNjcgMTg2aC04My4zMzRDMzQ4LjQxNyAxODYgMzM4IDE3Ny4yNSAzMzggMTY4LjVzMTAuNDE3LTE3LjUgMjAuODMzLTE3LjUiLz4KICA8dGV4dCB4PSIzNDYiIHk9IjE3NCI+CiAgICA8dHNwYW4geD0iMzY3LjU2MyIgeT0iMTc0Ij5FSkJIb21lPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjcuODIxIDE2Ny4xNzVsNzEuMDM3LTE5LjUyNSA0LjgyLTEuMzI1TTUzNyAxNDJsNi42NzkgNC4zMjVMNTQwIDE1MyIvPgogIDx0ZXh0IHg9IjU2MyIgeT0iMjE5Ij4KICAgIDx0c3BhbiB4PSI1NjUuMzU5IiB5PSIyMTkiPmVudGVycHJpc2UgYmVhbiAxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHJlY3Qgd2lkdGg9IjMxNCIgaGVpZ2h0PSIxODgiIHg9IjM5MiIgeT0iMjYxIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjIzLjUiIHJ5PSIyMy41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zODEuODMzIDI4MWg4My4zMzRjMTAuNDE2IDAgMjAuODMzIDguNzUgMjAuODMzIDE3LjVTNDc1LjU4MyAzMTYgNDY1LjE2NyAzMTZoLTgzLjMzNEMzNzEuNDE3IDMxNiAzNjEgMzA3LjI1IDM2MSAyOTguNXMxMC40MTctMTcuNSAyMC44MzMtMTcuNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzcxLjgzMyAyOTFoODMuMzM0YzEwLjQxNiAwIDIwLjgzMyA4Ljc1IDIwLjgzMyAxNy41UzQ2NS41ODMgMzI2IDQ1NS4xNjcgMzI2aC04My4zMzRDMzYxLjQxNyAzMjYgMzUxIDMxNy4yNSAzNTEgMzA4LjVzMTAuNDE3LTE3LjUgMjAuODMzLTE3LjUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM2MS44MzMgMzAxaDgzLjMzNGMxMC40MTYgMCAyMC44MzMgOC43NSAyMC44MzMgMTcuNVM0NTUuNTgzIDMzNiA0NDUuMTY3IDMzNmgtODMuMzM0QzM1MS40MTcgMzM2IDM0MSAzMjcuMjUgMzQxIDMxOC41czEwLjQxNy0xNy41IDIwLjgzMy0xNy41Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik04OS43OTYgMjQ0LjQxMmwyMzguNjExIDcwLjI2MyA0Ljc5NyAxLjQxM00zMjkgMzA5bDQuMjA0IDcuMDg4TDMyNiAzMjAiLz4KICA8dGV4dCB4PSIzNDkiIHk9IjMyNCI+CiAgICA8dHNwYW4geD0iMzQ3LjQyMiIgeT0iMzI0Ij5FSkJMb2NhbE9iamVjdHM8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ3Mi41MDUgMzE4LjE3bDY3LjQ4NSAzMi40OTIgNC41MDUgMi4xNjlNNTQyIDM0NWwyLjQ5NSA3LjgzTDUzNyAzNTUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU5MC44MzMgMzEzaDgzLjMzNEM2ODQuNTgzIDMxMyA2OTUgMzMwLjUgNjk1IDM0OHMtMTAuNDE3IDM1LTIwLjgzMyAzNWgtODMuMzM0QzU4MC40MTcgMzgzIDU3MCAzNjUuNSA1NzAgMzQ4czEwLjQxNy0zNSAyMC44MzMtMzUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU4MC44MzMgMzIzaDgzLjMzNEM2NzQuNTgzIDMyMyA2ODUgMzQwLjUgNjg1IDM1OHMtMTAuNDE3IDM1LTIwLjgzMyAzNWgtODMuMzM0QzU3MC40MTcgMzkzIDU2MCAzNzUuNSA1NjAgMzU4czEwLjQxNy0zNSAyMC44MzMtMzUiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU3MC44MzMgMzMzaDgzLjMzNEM2NjQuNTgzIDMzMyA2NzUgMzUwLjUgNjc1IDM2OHMtMTAuNDE3IDM1LTIwLjgzMyAzNWgtODMuMzM0QzU2MC40MTcgNDAzIDU1MCAzODUuNSA1NTAgMzY4czEwLjQxNy0zNSAyMC44MzMtMzUiLz4KICA8dGV4dCB4PSI1NTgiIHk9IjM2NSI+CiAgICA8dHNwYW4geD0iNTYzLjQ1MyIgeT0iMzY1Ij5lbnRlcnByaXNlIGJlYW48L3RzcGFuPiA8dHNwYW4geD0iNTgzLjA4NiIgeT0iMzgyLjYwOSI+aW5zdGFuY2VzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik03OC41NDIgMjYzLjA5bDI1MC4zNzQgMTE1LjIzIDQuNTQyIDIuMDlNMzMxIDM3M2wyLjQ1OCA3LjQxTDMyNiAzODMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM1OC44MzMgMzY1aDgzLjMzNGMxMC40MTYgMCAyMC44MzMgOC43NSAyMC44MzMgMTcuNVM0NTIuNTgzIDQwMCA0NDIuMTY3IDQwMGgtODMuMzM0QzM0OC40MTcgNDAwIDMzOCAzOTEuMjUgMzM4IDM4Mi41czEwLjQxNy0xNy41IDIwLjgzMy0xNy41Ii8+CiAgPHRleHQgeD0iMzQ2IiB5PSIzODgiPgogICAgPHRzcGFuIHg9IjM0OS4zNTIiIHk9IjM4OCI+RUpCTG9jYWxIb21lPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjcuOTM2IDM4MS4yMDZsNzIuMTkxLTExLjYxNyA0LjkzNy0uNzk1TTUzOSAzNjRsNi4wNjQgNC43OTRMNTQwIDM3NSIvPgogIDx0ZXh0IHg9IjU3MyIgeT0iNDMyIj4KICAgIDx0c3BhbiB4PSI1NzUuMzU5IiB5PSI0MzIiPmVudGVycHJpc2UgYmVhbiAyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgeD0iMzMzIiB5PSI1MDEiPgogICAgPHRzcGFuIHg9IjMzMyIgeT0iNTAxIj5DbGFzc2VzIGdlbmVyYXRlZCBieTwvdHNwYW4+IDx0c3BhbiB4PSIzMzMiIHk9IjUxOC42MDkiPkNvbnRhaW5lciBQcm92aWRlciB0b29sczwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWRhc2hhcnJheT0iNSw1IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01MjggMzR2NTAyIi8+CiAgPHRleHQgeD0iNTQ2IiB5PSI0OTgiPgogICAgPHRzcGFuIHg9IjU0NiIgeT0iNDk4Ij5DbGFzc2VzIGFyZSBwcm92aWRlZCBieTwvdHNwYW4+IDx0c3BhbiB4PSI1NDYiIHk9IjUxNS42MDkiPkJlYW4gUHJvdmlkZXI8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 39">
</div>
<div class="title">Figure 11. Overview of the Entity Bean Runtime Execution Model</div>
</div>
<div class="paragraph">
<p>An enterprise bean instance is an object whose class is provided by the Bean Provider.</p>
</div>
<div class="paragraph">
<p>An entity <strong>EJBObject</strong> or <strong>EJBLocalObject</strong> is an object whose class is generated at deployment time by the Container
Provider’s tools.
The entity EJBObject class implements the entity bean’s remote interface.
The entity EJBLocalObject class implements the entity bean’s local interface.
A client never references an entity bean instance directly—a client always references an entity EJBObject or entity EJBLocalObject whose class is generated by the Container Provider’s tools.</p>
</div>
<div class="paragraph">
<p>An entity <strong>EJBHome</strong> or <strong>EJBLocalHome</strong> object provides the life cycle operations (create, remove, find) for its entity objects as well as home business methods, which are not specific to an entity bean instance.
The class for the entity EJBHome or EJBLocalHome object is generated by the Container Provider’s tools at deployment time.
The entity EJBHome or EJBLocalHome object implements the entity bean’s home interface that was defined by the Bean Provider.</p>
</div>
</div>
<div class="sect3">
<h4 id="instance-life-cycle-2"><a class="anchor" href="#instance-life-cycle-2"></a>6.1.3. Instance Life Cycle</h4>
<div id="a2480" class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NzkiIGhlaWdodD0iNDg0IiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzA5LjgzMyAyMGg4My4zMzRDNDAzLjU4MyAyMCA0MTQgMzAgNDE0IDQwcy0xMC40MTcgMjAtMjAuODMzIDIwaC04My4zMzRDMjk5LjQxNyA2MCAyODkgNTAgMjg5IDQwczEwLjQxNy0yMCAyMC44MzMtMjAiLz4KICA8dGV4dCB4PSIyOTciIHk9IjM3Ij4KICAgIDx0c3BhbiB4PSIzMjIuNjA5IiB5PSIzNyI+ZG9lcyBub3QgPC90c3Bhbj4gPHRzcGFuIHg9IjMzNi4yMTEiIHk9IjU0LjYwOSI+ZXhpc3Q8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM0MCA2NXYxMTltNi02bC02IDYtNi02Ii8+CiAgPHRleHQgeD0iMTcwIiB5PSIxMTEiPgogICAgPHRzcGFuIHg9IjE3MCIgeT0iMTExIj4xLiBuZXdJbnN0YW5jZSgpPC90c3Bhbj4gPHRzcGFuIHg9IjE3MCIgeT0iMTI4LjYwOSI+Mi4gc2V0RW50aXR5Q29udGV4dChlYyk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMwOS44MzMgMTg5aDgzLjMzNEM0MDMuNTgzIDE4OSA0MTQgMTk5IDQxNCAyMDlzLTEwLjQxNyAyMC0yMC44MzMgMjBoLTgzLjMzNEMyOTkuNDE3IDIyOSAyODkgMjE5IDI4OSAyMDlzMTAuNDE3LTIwIDIwLjgzMy0yMCIvPgogIDx0ZXh0IHg9IjI5OCIgeT0iMjE1Ij4KICAgIDx0c3BhbiB4PSIzMjkuOTE0IiB5PSIyMTUiPnBvb2xlZDwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzAyLjY1NCAxODcuMDNDMjIwLjI1IDE1MiAxOTQuMjUgMjA5IDI4NCAyMDltLTUuNzUtNmw1Ljc1IDYtNS43NSA2Ii8+CiAgPHRleHQgeD0iNDQiIHk9IjIxNSI+CiAgICA8dHNwYW4geD0iNDQiIHk9IjIxNSI+ZWpiSG9tZSZsdDtNRVRIT0QmZ3Q7KC4uLik8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMwMi4yMTYgMjMwLjg2Yy01NS43MTYgMjEuODktNTQuNzE2IDEwMC44OS4wNzggMTI1LjA5Nm0tMi43OTQtNy4yMDZsMi43OTQgNy4yMDYtNy43OTQgMi43OTQiLz4KICA8dGV4dCB4PSI0OCIgeT0iMjgwIj4KICAgIDx0c3BhbiB4PSI2Ni45MjIiIHk9IjI4MCI+ZWpiQ3JlYXRlJmx0O01FVEhPRCZndDsoYXJncyk8L3RzcGFuPiA8dHNwYW4geD0iMzkuMzQ0IiB5PSIyOTcuNjA5Ij5lamJQb3N0Q3JlYXRlJmx0O01FVEhPRCZndDsoYXJncyk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMwOS44MzMgMzU4aDgzLjMzNEM0MDMuNTgzIDM1OCA0MTQgMzY4IDQxNCAzNzhzLTEwLjQxNyAyMC0yMC44MzMgMjBoLTgzLjMzNEMyOTkuNDE3IDM5OCAyODkgMzg4IDI4OSAzNzhzMTAuNDE3LTIwIDIwLjgzMy0yMCIvPgogIDx0ZXh0IHg9IjI5OCIgeT0iMzg0Ij4KICAgIDx0c3BhbiB4PSIzMzMuOTIyIiB5PSIzODQiPnJlYWR5PC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNDAgMjM0djExOW02LTZsLTYgNi02LTYiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjY5IDMwM2g4NXYyMGgtODV6Ii8+CiAgPHRleHQgeD0iMjY5IiB5PSIzMTkiPgogICAgPHRzcGFuIHg9IjI2OSIgeT0iMzE5Ij5lamJBY3RpdmF0ZSgpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMDIuMjYzIDM1Ni4wMjZDMjE5LjQgMzIwLjIgMTk0LjQgMzc4LjIgMjg0IDM3OG0tNS42LTUuOGw1LjYgNS44LTUuNiA1LjIiLz4KICA8dGV4dCB4PSIxNTQiIHk9IjM2NCI+CiAgICA8dHNwYW4geD0iMTU0IiB5PSIzNjQiPmVqYkxvYWQoKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjg0IDM3OC4wMzRjLTg5LjYuMTY2LTYzLjYgNTkuMTY2IDE4LjI5NCAyMi4wMU0yOTQuNCAzOTcuMmw3Ljg5NCAyLjg0NC0yLjg5NCA3LjE1NiIvPgogIDx0ZXh0IHg9IjE0NSIgeT0iNDM0Ij4KICAgIDx0c3BhbiB4PSIxNDUiIHk9IjQzNCI+YnVzaW5lc3MgbWV0aG9kczwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzUxLjQgNDAzLjJjMCA5MCAxMzEgMzQgNDkuMzA2LTMuMTU2bTIuNjk0IDcuMTU2bC0yLjY5NC03LjE1NiA3LjY5NC0yLjg0NCIvPgogIDx0ZXh0IHg9IjQyNSIgeT0iNDUwIj4KICAgIDx0c3BhbiB4PSI0MjUiIHk9IjQ1MCI+ZWpiVGltZW91dChhcmcpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00MDAuNzMxIDM1Ni4wMTRDNDgzLjQgMzIwLjIgNTA5LjQgMzc2LjIgNDE5LjQgMzc4LjA5Nm02IDUuMTA0bC02LjAwMS01LjEwNCA2LjAwMS01Ljg5NiIvPgogIDx0ZXh0IHg9IjQ2MCIgeT0iMzk0Ij4KICAgIDx0c3BhbiB4PSI0NjAiIHk9IjM5NCI+ZWpiU3RvcmUoKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNDAzLjUgMjM3Ljc1bC0yLjcxNi02Ljg5IDcuNzE2LTMuMTFtLTcuNzE2IDMuMTFjNTUuNzE2IDIxLjg5IDU0LjcxNiAxMDAuODktLjA3OCAxMjUuMDk2Ii8+CiAgPHRleHQgeD0iNDUwIiB5PSIyOTkiPgogICAgPHRzcGFuIHg9IjQ1MCIgeT0iMjk5Ij5lamJSZW1vdmUoKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzUzIDI0MGw2LTYgNiA2bS02LTZ2MTE5Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTM0NCAyNjNoOTB2MjBoLTkweiIvPgogIDx0ZXh0IHg9IjM0NCIgeT0iMjc5Ij4KICAgIDx0c3BhbiB4PSIzNDQiIHk9IjI3OSI+ZWpiUGFzc2l2YXRlKCk8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQwMC43MTkgMTg2Ljk4NUM0ODMuNCAxNTEgNTA5LjQgMjA5IDQxOSAyMDltNS40IDZsLTUuNC02IDUuNC02Ii8+CiAgPHRleHQgeD0iNDgyIiB5PSIxNzUiPgogICAgPHRzcGFuIHg9IjQ4MiIgeT0iMTc1Ij5lamJGaW5kJmx0O01FVEhPRCZndDsoLi4uKTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMzUzIDcxbDYtNiA2IDZtLTYtNnYxMTkiLz4KICA8dGV4dCB4PSIzNzciIHk9IjExMCI+CiAgICA8dHNwYW4geD0iMzc3IiB5PSIxMTAiPjEuIHVuc2V0RW50aXR5Q29udGV4dCgpPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik01MzIgNDBINDE5bTUuNzUgNS43NUw0MTkgNDBsNS43NS01LjI1Ii8+CiAgPHRleHQgeD0iNTQ2IiB5PSIyOCI+CiAgICA8dHNwYW4geD0iNTQ2IiB5PSIyOCI+aW5zdGFuY2UgdGhyb3dzPC90c3Bhbj4gPHRzcGFuIHg9IjU0NiIgeT0iNDUuNjA5Ij5zeXN0ZW0gZXhjZXB0aW9uPC90c3Bhbj4gPHRzcGFuIHg9IjU0NiIgeT0iNjMuMjE5Ij5mcm9tIGFueSBtZXRob2Q8L3RzcGFuPgogIDwvdGV4dD4KPC9zdmc+Cg==" alt="EBOpt 40">
</div>
<div class="title">Figure 12. Life Cycle of an Entity Bean Instance.</div>
</div>
<div class="paragraph">
<p>An entity bean instance is in one of the following three states:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It does not exist.</p>
</li>
<li>
<p>Pooled state.
An instance in the pooled state is not associated with any particular entity object identity.</p>
</li>
<li>
<p>Ready state.
An instance in the ready state is assigned an entity object identity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following steps describe the life cycle of an entity bean instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An entity bean instance’s life starts when
the container creates the instance using newInstance.
The container then invokes the <code>setEntityContext</code> method to pass the instance a reference to the <code>EntityContext</code> interface.
The <code>EntityContext</code> interface allows the instance to invoke services provided by the container and to obtain the information about the caller of a client-invoked method.</p>
</li>
<li>
<p>The instance enters the pool of available instances.
Each entity bean has its own pool.
While the instance is in the available pool, the instance is not associated with any particular entity object identity.
All instances in the pool are considered equivalent, and therefore any instance can be assigned by the container to any entity object identity at the transition to the ready state.
While the instance is in the pooled state, the container may use the instance to execute any of the entity bean’s finder methods (shown as <code>ejbFind&lt;METHOD&gt;</code> in the diagram) or home methods (shown as <code>ejbHome&lt;METHOD&gt;</code> in the diagram).
The instance does not move to the ready state during the execution of a finder or a home method.</p>
</li>
<li>
<p>An instance transitions from the pooled state to the ready state when the container selects that instance to service a client call to an entity object or an <code>ejbTimeout</code> method.
There are two possible transitions from the pooled to the ready state: through the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods, or through the <code>ejbActivate</code> method.
The container invokes the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods when the instance is assigned to an entity object during entity object creation (i.e., when the client invokes a <code>create&lt;METHOD&gt;</code> method on the entity bean’s home object).
The container invokes the <code>ejbActivate</code> method on an instance when an instance needs to be activated to service an invocation on an existing entity object—this occurs because there is no suitable instance in the ready state to service the client’s call or the <code>ejbTimeout</code> method.</p>
</li>
<li>
<p>When an entity bean instance is in the ready state, the instance is associated with a specific entity object identity.
While the instance is in the ready state, the container can invoke the <code>ejbLoad</code> and <code>ejbStore</code> methods zero or more times.
A business method can be invoked on the instance zero or more times.
The <code>ejbTimeout</code> method can be invoked on the instance zero or more times.
Invocations of the <code>ejbLoad</code> and <code>ejbStore</code> methods can be arbitrarily mixed with invocations of business methods or the <code>ejbTimeout</code> method.
The purpose of the <code>ejbLoad</code> and <code>ejbStore</code> methods is to synchronize the state of the instance with the state of the entity in the underlying data source—the container can invoke these methods whenever it determines a need to synchronize the instance’s state.</p>
</li>
<li>
<p>The container can choose to passivate an entity bean instance within a transaction.
To passivate an instance, the container first invokes the <code>ejbStore</code> method to allow the instance to synchronize the database state with the instance’s state, and then the container invokes the <code>ejbPassivate</code> method to return the instance to the pooled state.</p>
</li>
<li>
<p>Eventually, the container will transition the instance to the pooled state.
There are three possible transitions from the ready to the pooled state: through the <code>ejbPassivate</code> method, through the <code>ejbRemove</code> method, and because of a transaction rollback for <code>ejbCreate</code>, <code>ejbPostCreate</code>, or <code>ejbRemove</code> (not shown in <a href="#a2480">Life Cycle of an Entity Bean Instance.</a>).
The container invokes the <code>ejbPassivate</code> method when the container wants to disassociate the instance from the entity object identity without removing the entity object.
The container invokes the <code>ejbRemove</code> method when the container is removing the entity object (i.e., when the client invoked the <code>remove</code> method on the entity object’s component interface, or a <code>remove</code> method on the entity bean’s home interface).
If <code>ejbCreate</code>, <code>ejbPostCreate</code>, or <code>ejbRemove</code> is called and the transaction rolls back, the container will transition the bean instance to the pooled state.</p>
</li>
<li>
<p>When the instance is put back into the pool, it is no longer associated with an entity object identity.
The container can assign the instance to any entity object within the same entity bean home.</p>
</li>
<li>
<p>An instance in the pool can be removed by calling the <code>unsetEntityContext</code> method on the instance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>EntityContext</code> interface passed by the container to the instance in the <code>setEntityContext</code> method is an
interface, not a class that contains static information.
For example, the result of the <code>EntityContext.getPrimaryKey</code> method might be different each time an instance moves from the pooled state to the ready state, and the result of the <code>getCallerPrincipal</code> and <code>isCallerInRole</code> methods may
be different in each business method.</p>
</li>
<li>
<p>A <code>RuntimeException</code> thrown from any method of the entity bean class (including the business methods and the callbacks invoked by the container) results in the transition to the &#8220;does not exist&#8221; state.
The container must not invoke any method on the instance after a <code>RuntimeException</code> has been caught.
From the client perspective, the corresponding entity object continues to exist.
The client can continue accessing the entity object through its component interface because the container can use a different entity bean instance to delegate the client’s requests.
Exception handling is described further in <a href="#a3210">Exception Handling</a>.</p>
</li>
<li>
<p>The container is not required to maintain a pool of instances in the pooled state.
The pooling approach is an example of a possible implementation, but it is not the required implementation.
Whether the container uses a pool or not has no bearing on the entity bean coding style.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="the-entity-bean-component-contract-2"><a class="anchor" href="#the-entity-bean-component-contract-2"></a>6.1.4. The Entity Bean Component Contract</h4>
<div class="paragraph">
<p>This section specifies the contract between an entity bean with bean-managed persistence and its container.</p>
</div>
<div class="sect4">
<h5 id="entity-bean-instances-view"><a class="anchor" href="#entity-bean-instances-view"></a>6.1.4.1. Entity Bean Instance’s View</h5>
<div class="paragraph">
<p>The following describes the entity bean instance’s view of the contract:</p>
</div>
<div class="paragraph">
<p>The Bean Provider is responsible for implementing the following methods in the entity bean class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A public constructor that takes no arguments.
The container uses this constructor to create instances of the entity bean class.</p>
</li>
<li>
<p><code>public void setEntityContext(EntityContext ic);</code></p>
<div class="paragraph">
<p>A container uses this method to pass a reference to the <code>EntityContext</code> interface to the entity bean instance.
If the entity bean instance needs to use the <code>EntityContext</code> interface during its lifetime, it must remember the <code>EntityContext</code> interface in an instance variable.</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context (Refer to Enterprise Beans Core Contracts and Requirements
document <a href="#a3339">[2]</a> for how the container executes methods with an unspecified transaction context).
An identity of an entity object is not available during this method.</p>
</div>
<div class="paragraph">
<p>The instance can take advantage of the <code>setEntityContext</code> method to allocate any resources that are to be held by the instance for its lifetime.
Such resources cannot be specific to an entity object identity because the instance might be reused during its lifetime to serve multiple entity object identities.</p>
</div>
</li>
<li>
<p><code>public void unsetEntityContext();</code></p>
<div class="paragraph">
<p>A container invokes this method before terminating the life of the instance.</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context.
An identity of an entity object is not available during this method.</p>
</div>
<div class="paragraph">
<p>The instance can take advantage of the <code>unsetEntityContext</code> method to free any resources that are held by the instance.
(These resources typically had been allocated by the <code>setEntityContext</code> method.)</p>
</div>
</li>
<li>
<p><code>public</code> <em>PrimaryKeyClass</em> <code>ejbCreate&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>There are zero
<sup class="footnote" id="_footnote_a3385">[<a id="_footnoteref_21" class="footnote" href="#_footnotedef_21" title="View footnote.">21</a>]</sup>
or more <code>ejbCreate&lt;METHOD&gt;</code> methods, whose signatures match the signatures of the <code>create&lt;METHOD&gt;</code> methods of the entity bean home interface.
The container invokes an <code>ejbCreate&lt;METHOD&gt;</code> method on an entity bean instance when a client invokes a matching <code>create&lt;METHOD&gt;</code> method to create an entity object.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>ejbCreate&lt;METHOD&gt;</code> method typically validates the client-supplied arguments, and inserts a record representing the entity object into the database.
The method also initializes the instance’s variables.
The <code>ejbCreate&lt;METHOD&gt;</code> method must return the primary key for the created entity object.</p>
</div>
<div class="paragraph">
<p>An <code>ejbCreate&lt;METHOD&gt;</code> method executes in the transaction context determined by the transaction attribute of the matching <code>create&lt;METHOD&gt;</code> method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>
Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbPostCreate&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>For each <code>ejbCreate&lt;METHOD&gt;</code> method, there is a matching <code>ejbPostCreate&lt;METHOD&gt;</code> method that has the same input parameters but whose return value is void.
The container invokes the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method on an instance after it invokes the ejbCreate&lt;METHOD&gt; method with the same arguments.
The entity object identity is available during the <code>ejbPostCreate&lt;METHOD&gt;</code> method.
The instance may, for example, obtain the component interface of the associated entity object and pass it to another enterprise bean as a method argument.</p>
</div>
<div class="paragraph">
<p>An <code>ejbPostCreate&lt;METHOD&gt;</code> method executes in the same transaction context as the previous <code>ejbCreate&lt;METHOD&gt;</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbActivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on the instance when the container picks the instance from the pool and assigns it to a specific entity object identity.
The <code>ejbActivate</code> method gives the entity bean instance the chance to acquire additional resources that it needs while it is in the
ready state.</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context.
The instance can obtain the identity of the entity object via the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on the entity context.
The instance can rely on the fact that the primary key and entity object identity will remain associated with the instance until the completion of <code>ejbPassivate</code> or <code>ejbRemove</code>.</p>
</div>
<div class="paragraph">
<p>Note that the instance should not use the <code>ejbActivate</code> method to read the state of the entity from the database; the instance should load its state only in the <code>ejbLoad</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbPassivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on an instance when the container decides to disassociate the instance from an entity object identity, and to put the instance back into the pool of available instances.
The <code>ejbPassivate</code> method gives the instance the chance to release any resources that should not be held while the instance is in the pool.
(These resources typically had been allocated during the <code>ejbActivate</code> method.)</p>
</div>
<div class="paragraph">
<p>This method executes with an unspecified transaction context.
The instance can still obtain the identity of the entity object via the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method of the <code>EntityContext</code> interface.</p>
</div>
<div class="paragraph">
<p>Note that an instance should not use the <code>ejbPassivate</code> method to write its state to the database; an instance should store its state only in the <code>ejbStore</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbRemove();</code></p>
<div class="paragraph">
<p>The container invokes this method on an instance as a result of a client’s invoking a <code>remove</code> method.
The instance is in the ready state when <code>ejbRemove</code> is invoked and it will be entered into the pool when the method completes.</p>
</div>
<div class="paragraph">
<p>This method executes in the transaction context determined by the transaction attribute of the <code>remove</code> method that triggered the <code>ejbRemove</code> method.
The instance can still obtain the identity of the entity object via the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method of the <code>EntityContext</code> interface.</p>
</div>
<div class="paragraph">
<p>The container synchronizes the instance’s state before it invokes the <code>ejbRemove</code> method.
This means that the state of the instance variables at the beginning of the <code>ejbRemove</code> method is the same as it would be at the beginning of a business method.</p>
</div>
<div class="paragraph">
<p>An entity bean instance should use this method to remove the entity object’s representation from the database.</p>
</div>
<div class="paragraph">
<p>Since the instance will be entered into the pool, the state of the instance at the end of this method must be equivalent to the state of a passivated instance.
This means that the instance must release any resource that it would normally release in the <code>ejbPassivate</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbLoad();</code></p>
<div class="paragraph">
<p>The container invokes this method on an instance in the ready state to inform the instance that it should synchronize the entity state cached in its instance variables from the entity state in the database.
The instance should be prepared for the container to invoke this method at any time that the instance is in the ready state.</p>
</div>
<div class="paragraph">
<p>If the instance is caching the entity state (or parts of the entity state), the instance should not use the previously cached state in the subsequent business method.
The instance may take advantage of the <code>ejbLoad</code> method, for example, to refresh the cached state by reading it from the database.</p>
</div>
<div class="paragraph">
<p>This method executes in the transaction context determined by the transaction attribute of the business method or <code>ejbTimeout</code> method that triggered the <code>ejbLoad</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbStore();</code></p>
<div class="paragraph">
<p>The container invokes this method on an instance to inform the instance that the instance should synchronize the entity state in the database with the entity state cached in its instance variables.
The instance should be prepared for the container to invoke this method at any time that the instance is in the ready state.</p>
</div>
<div class="paragraph">
<p>An instance should write any updates cached in the instance variables to the database in the <code>ejbStore</code> method.</p>
</div>
<div class="paragraph">
<p>This method executes in the same transaction context as the previous <code>ejbLoad</code> or <code>ejbCreate&lt;METHOD&gt;</code> method invoked on the instance.
All business methods or the <code>ejbTimeout</code> method invoked between the previous <code>ejbLoad</code> or <code>ejbCreate&lt;METHOD&gt;</code> method and this <code>ejbStore</code> method are also invoked in the same transaction context.</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;primary key type or collection&gt;</em> <code>ejbFind&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes this method on the instance when the container selects the instance to execute a matching client-invoked <code>find&lt;METHOD&gt;</code> method.
The instance is in the pooled state (i.e., it is not assigned to any particular entity object identity) when the container selects the instance to execute the <code>ejbFind&lt;METHOD&gt;</code> method on it, and it is returned to the pooled state when the execution of the <code>ejbFind&lt;METHOD&gt;</code> method completes.</p>
</div>
<div class="paragraph">
<p>The <code>ejbFind&lt;METHOD&gt;</code> method executes in the transaction context determined by the transaction attribute of the matching find method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
<div class="paragraph">
<p>The implementation of an <code>ejbFind&lt;METHOD&gt;</code> method typically uses the method’s arguments to locate the requested entity object or a collection of entity objects in the database.
The method must return a primary key or a collection of primary keys to the container (see <a href="#a2729">Finder Method Return Type</a>).</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;type&gt;</em> <code>ejbHome&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes this method on any instance when the container selects the instance to execute a matching client-invoked <code>&lt;METHOD&gt;</code> home method.
The instance is in the pooled state (i.e., it is not assigned to any particular entity object identity) when the container selects the instance to execute the <code>ejbHome&lt;METHOD&gt;</code> method on it, and it is returned to the pooled state when the execution of the <code>ejbHome&lt;METHOD&gt;</code> method completes.</p>
</div>
<div class="paragraph">
<p>The <code>ejbHome&lt;METHOD&gt;</code> method executes in the transaction context determined by the transaction attribute of the matching <code>&lt;METHOD&gt;</code> home method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbTimeout(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbTimeout</code> method on an instance when a timer for the instance has expired.
The <code>ejbTimeout</code> method notifies the instance of the time-based event and allows the instance to execute the business logic to handle it.</p>
</div>
<div class="paragraph">
<p>The <code>ejbTimeout</code> method executes in the transaction context determined by its transaction attribute.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="a2553"><a class="anchor" href="#a2553"></a>6.1.4.2. Container’s View</h5>
<div class="paragraph">
<p>This subsection describes the container’s view of the state management contract.
The container must call the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>public void setEntityContext(ec);</code></p>
<div class="paragraph">
<p>The container invokes this method to pass a reference to the <code>EntityContext</code> interface to the entity bean instance.
The container must invoke this method after it creates the instance, and before it puts the instance into the pool of available instances.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.
At this point, the <code>EntityContext</code> is not associated with any entity object identity.</p>
</div>
</li>
<li>
<p><code>public void unsetEntityContext();</code></p>
<div class="paragraph">
<p>The container invokes this method when the container wants to reduce the number of instances in the pool.
After this method completes, the container must not reuse this instance.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.</p>
</div>
</li>
<li>
<p><code>public</code> <em>PrimaryKeyClass</em> <code>ejbCreate&lt;METHOD&gt;(&#8230;&#8203;);</code><br>
<code>public void ejbPostCreate&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes these two methods during the creation of an entity object as a result of a client invoking a <code>create&lt;METHOD&gt;</code> method on the entity bean’s home interface.</p>
</div>
<div class="paragraph">
<p>The container first invokes the <code>ejbCreate&lt;METHOD&gt;</code> method whose signature matches the <code>create&lt;METHOD&gt;</code> method invoked by the client.
The <code>ejbCreate&lt;METHOD&gt;</code> method returns a primary key for the created entity object.
The container creates an entity EJBObject reference and/or EJBLocalObject reference for the primary key.
The container then invokes a matching <code>ejbPostCreate&lt;METHOD&gt;</code> method to allow the instance to fully initialize itself.
Finally, the container returns the entity object’s remote interface (i.e., a reference to the entity EJBObject) to the client if the client is a remote client, or the entity object’s local interface (i.e., a reference to the entity EJBLocalObject) to the client if the client is a local client.</p>
</div>
<div class="paragraph">
<p>The container must invoke the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods in the transaction context determined by the transaction attribute of the matching <code>create&lt;METHOD&gt;</code> method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbActivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on an entity bean instance at activation time (i.e., when the instance is taken from the pool and assigned to an entity object identity).
The container must ensure that the primary key of the associated entity object is available to the instance if the instance invokes the
<code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on its <code>EntityContext</code> interface.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.</p>
</div>
<div class="paragraph">
<p>Note that instance is not yet ready for the delivery of a business method.
The container must still invoke the <code>ejbLoad</code> method prior to a business method or <code>ejbTimeout</code> method invocation.</p>
</div>
</li>
<li>
<p><code>public void ejbPassivate();</code></p>
<div class="paragraph">
<p>The container invokes this method on an entity bean instance at passivation time (i.e., when the instance is being disassociated from an entity object identity and moved into the pool).
The container must ensure that the identity of the associated entity object is still available to the instance if the instance invokes
the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on its entity context.</p>
</div>
<div class="paragraph">
<p>The container invokes this method with an unspecified transaction context.</p>
</div>
<div class="paragraph">
<p>Note that if the instance state has been updated by a transaction, the container must first invoke the <code>ejbStore</code> method on the instance before it invokes <code>ejbPassivate</code> on it.</p>
</div>
</li>
<li>
<p>public void ejbRemove();</p>
<div class="paragraph">
<p>The container invokes this method before it ends the life of an entity object as a result of a client invoking a <code>remove</code> operation.</p>
</div>
<div class="paragraph">
<p>The container invokes this method in the transaction context determined by the transaction attribute of the invoked <code>remove</code> method.
The container must ensure that the identity of the associated entity object is still available to the instance in the <code>ejbRemove</code> method (i.e., the instance can invoke the <code>getPrimaryKey</code>, <code>getEJBLocalObject</code>, or <code>getEJBObject</code> method on its <code>EntityContext</code> in the <code>ejbRemove</code> method).</p>
</div>
<div class="paragraph">
<p>The container must ensure that the instance’s state is synchronized from the state in the database before invoking the
<code>ejbRemove</code> method (i.e., if the instance is not already synchronized from the state in the database, the container must invoke <code>ejbLoad</code> before it invokes <code>ejbRemove</code>).</p>
</div>
</li>
<li>
<p><code>public void ejbLoad();</code></p>
<div class="paragraph">
<p>The container must invoke this method on the instance whenever it becomes necessary for the instance to synchronize its instance state from its state in the database.
The exact times that the container invokes <code>ejbLoad</code> depend on the configuration of the component and the container, and are not defined by the Enterprise Beans architecture.
Typically, the container will call <code>ejbLoad</code> before the first business method within a transaction or before invoking the <code>ejbTimeout</code> method to ensure that the instance can refresh its cached state of the entity object from the database.
After the first <code>ejbLoad</code> within a transaction, the container is not required to recognize that the state of the entity object in the database has been changed by another transaction, and it is not required to notify the instance of this change via another <code>ejbLoad</code> call.</p>
</div>
<div class="paragraph">
<p>The container must invoke this method in the transaction context determined by the transaction attribute of the business method or <code>ejbTimeout</code> method that triggered the <code>ejbLoad</code> method.</p>
</div>
</li>
<li>
<p><code>public void ejbStore();</code></p>
<div class="paragraph">
<p>The container must invoke this method on the instance whenever it becomes necessary for the instance to synchronize its state in the database with the state of the instance’s fields.
This synchronization always happens at the end of a transaction, unless the bean is specified as read-only (see <a href="#a2598">Read-only Entity Beans</a>).
However, the container may also invoke this method when it passivates the instance in the middle of a transaction, or when it needs to transfer the most recent state of the entity object to another instance for the same entity object in the same transaction (see Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Access from Multiple Clients in the Same Transaction Context</em>&#8221;).</p>
</div>
<div class="paragraph">
<p>The container must invoke this method in the same transaction context as the previously invoked <code>ejbLoad</code>, <code>ejbCreate&lt;METHOD&gt;</code>, or <code>ejbTimeout</code> method.</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;primary key type or collection&gt;</em> <code>ejbFind&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbFind&lt;METHOD&gt;</code> method on an instance when a client invokes a matching <code>find&lt;METHOD&gt;</code> method on the entity bean’s home interface.
The container must pick an instance that is in the pooled state (i.e., the instance is not associated with any entity object identity) for the execution of the <code>ejbFind&lt;METHOD&gt;</code> method.
If there is no instance in the pooled state, the container creates one and calls the <code>setEntityContext</code> method on the instance before dispatching the finder method.</p>
</div>
<div class="paragraph">
<p>Before invoking the <code>ejbFind&lt;METHOD&gt;</code> method, the container must first synchronize the state of any non-read-only entity bean instances that are participating in the same transaction context as is used to execute the <code>ejbFind&lt;METHOD&gt;</code> by invoking the <code>ejbStore</code> method on those entity bean instances.
<sup class="footnote" id="_footnote_a3386">[<a id="_footnoteref_22" class="footnote" href="#_footnotedef_22" title="View footnote.">22</a>]</sup></p>
</div>
<div class="paragraph">
<p>After the <code>ejbFind&lt;METHOD&gt;</code> method completes, the instance remains in the pooled state.
The container may, but is not required to, immediately activate the objects that were located by the finder using the transition through the <code>ejbActivate</code> method.</p>
</div>
<div class="paragraph">
<p>The container must invoke the <code>ejbFind&lt;METHOD&gt;</code> method in the transaction context determined by the transaction attribute of the matching find method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed
Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
<div class="paragraph">
<p>If the <code>ejbFind&lt;METHOD&gt;</code> method is declared to return a single primary key, the container creates an entity EJBObject reference for the primary key and returns it to the client if the client is a remote client.
If the client is a local client, the container creates and returns an entity EJBLocalObject reference for the primary key.
If the <code>ejbFind&lt;METHOD&gt;</code> method is declared to return a collection of primary keys, the container creates a collection of entity EJBObject or EJBLocalObject references for the primary keys returned from <code>ejbFind&lt;METHOD&gt;</code>, and returns the collection to the client.
(See <a href="#a2729">Finder Method Return Type</a> for information on collections.)</p>
</div>
</li>
<li>
<p><code>public</code> <em>&lt;type&gt;</em> <code>ejbHome&lt;METHOD&gt;(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbHome&lt;METHOD&gt;</code> method on an instance when a client invokes a matching <code>&lt;METHOD&gt;</code> home method on the entity bean’s home interface.
The container must pick an instance that is in the pooled state (i.e., the instance is not associated with any entity object identity) for the execution of the <code>ejbHome&lt;METHOD&gt;</code> method.
If there is no instance in the pooled state, the container creates one and calls the <code>setEntityContext</code> method on the instance before dispatching the home method.</p>
</div>
<div class="paragraph">
<p>After the <code>ejbHome&lt;METHOD&gt;</code> method completes, the instance remains in the pooled state.</p>
</div>
<div class="paragraph">
<p>The container must invoke the <code>ejbHome&lt;METHOD&gt;</code> method in the transaction context determined by the transaction attribute of the matching <code>&lt;METHOD&gt;</code> home method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
</li>
<li>
<p><code>public void ejbTimeout(&#8230;&#8203;);</code></p>
<div class="paragraph">
<p>The container invokes the <code>ejbTimeout</code> method on the instance when a timer with which the entity has been registered expires.
If there is no suitable instance in the ready state, the container must activate an instance, invoking the <code>ejbActivate</code> method and transitioning it to the ready state.</p>
</div>
<div class="paragraph">
<p>The container invokes the <code>ejbTimeout</code> method in the context of a transaction determined by its transaction attribute.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a2598"><a class="anchor" href="#a2598"></a>6.1.5. Read-only Entity Beans</h4>
<div class="paragraph">
<p>Compliant implementations of this specification may optionally support read-only entity beans.
A read-only entity bean is an entity bean whose instances are not intended to be updated and/or created by the application.
Read-only beans are best suited for situations where the underlying data never changes or changes infrequently.</p>
</div>
<div class="paragraph">
<p>Containers that support read-only beans do not call the <code>ejbStore</code> method on them.
The <code>ejbLoad</code> method should typically be called by the container when the state of the bean instance is initially loaded from the database, or at designated refresh intervals.
<sup class="footnote" id="_footnote_a3387">[<a id="_footnoteref_23" class="footnote" href="#_footnotedef_23" title="View footnote.">23</a>]</sup></p>
</div>
<div class="paragraph">
<p>If a read-only bean is used, the state of such a bean should not be updated by the application, and the behavior is unspecified if this occurs.
<sup class="footnote" id="_footnote_a3388">[<a id="_footnoteref_24" class="footnote" href="#_footnotedef_24" title="View footnote.">24</a>]</sup></p>
</div>
<div class="paragraph">
<p>Read-only beans are designated by vendor-specific means that are outside the scope of this specification, and their use is therefore not portable.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-entitycontext-interface-2"><a class="anchor" href="#the-entitycontext-interface-2"></a>6.1.6. The EntityContext Interface</h4>
<div class="paragraph">
<p>A container provides the entity bean instances with an <code>EntityContext</code>, which gives the entity bean instance access to the instance’s context maintained by the container.
The <code>EntityContext</code> interface has the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>getEJBObject</code> method returns the entity bean’s remote interface.</p>
</li>
<li>
<p>The <code>getEJBHome</code> method returns the entity bean’s remote home interface.</p>
</li>
<li>
<p>The <code>getEJBLocalObject</code> method returns the entity bean’s local interface.</p>
</li>
<li>
<p>The <code>getEJBLocalHome</code> method returns the entity bean’s local home interface.</p>
</li>
<li>
<p>The <code>getCallerPrincipal</code> method returns the <code>java.security.Principal</code> that identifies the invoker.</p>
</li>
<li>
<p>The <code>isCallerInRole</code> method tests if the entity bean instance’s caller has a particular role.</p>
</li>
<li>
<p>The <code>setRollbackOnly</code> method allows the instance to mark the current transaction such that the only outcome of the transaction is a rollback.</p>
</li>
<li>
<p>The <code>getRollbackOnly</code> method allows the instance to test if the current transaction has been marked for rollback.</p>
</li>
<li>
<p>The <code>getPrimaryKey</code> method returns the entity bean’s primary key.</p>
</li>
<li>
<p>The <code>getTimerService</code> method returns the <code>jakarta.ejb.TimerService</code> interface.</p>
</li>
<li>
<p>The <code>getUserTransaction</code> method returns the <code>jakarta.transaction.UserTransaction</code> interface.
Entity bean instances must not call this method.</p>
</li>
<li>
<p>The <code>lookup</code> method enables the entity bean to look up its environment entries in the JNDI naming context.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="operations-allowed-in-the-methods-of-the-entity-bean-class-2"><a class="anchor" href="#operations-allowed-in-the-methods-of-the-entity-bean-class-2"></a>6.1.7. Operations Allowed in the Methods of the Entity Bean Class</h4>
<div class="paragraph">
<p><a href="#a2625">Operations Allowed in the Methods of an Entity Bean</a> defines the methods of an entity bean class in which the enterprise bean instances can access the methods of the <code>jakarta.ejb.EntityContext</code> interface, the <code>java:comp/env</code> environment naming context, resource managers, <code>TimerService</code> and <code>Timer</code> methods, the <code>EntityManagerFactory</code> and <code>EntityManager</code> methods, and other enterprise beans.</p>
</div>
<div class="paragraph">
<p>If an entity bean instance attempts to invoke a method of the <code>EntityContext</code> interface, and the access is not allowed in <a href="#a2625">Operations Allowed in the Methods of an Entity Bean</a>, the container must throw the <code>java.lang.IllegalStateException</code>.</p>
</div>
<div class="paragraph">
<p>If an entity bean instance attempts to invoke a method of the <code>TimerService</code> or <code>Timer</code> interface and the access is not allowed in <a href="#a2625">Operations Allowed in the Methods of an Entity Bean</a>, the container must throw the <code>java.lang.IllegalStateException</code>.</p>
</div>
<div class="paragraph">
<p>If an entity bean instance attempts to access a resource manager, an enterprise bean, or an entity manager or entity manager factory, and the access is not allowed in <a href="#a2625">Operations Allowed in the Methods of an Entity Bean</a>, the behavior is undefined by the Enterprise Beans architecture.</p>
</div>
<table id="a2625" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Operations Allowed in the Methods of an Entity Bean</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 67%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bean method</th>
<th class="tableblock halign-left valign-top">Bean method can perform the following operations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">constructor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">setEntityContext<br>
unsetEntityContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, lookup</em><br>
JNDI access to java:comp/env<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbCreate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbPostCreate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, getEJBObject, getEJBLocalObject, getPrimaryKey, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbRemove</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, getEJBObject, getEJBLocalObject, getPrimaryKey, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbFind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbHome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbActivate<br>
ejbPassivate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getEJBObject, getEJBLocalObject, getPrimaryKey, getTimerService, lookup</em><br>
JNDI access to java:comp/env</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbLoad<br>
ejbStore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, getEJBObject, getEJBLocalObject, getPrimaryKey, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">business method from component interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, getRollbackOnly, isCallerInRole, setRollbackOnly, getEJBObject, getEJBLocalObject, getPrimaryKey, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ejbTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityContext methods: <em>getEJBHome, getEJBLocalHome, getCallerPrincipal, isCallerInRole, getRollbackOnly, setRollbackOnly, getEJBObject, getEJBLocalObject, getPrimaryKey, getTimerService, lookup</em><br>
JNDI access to java:comp/env<br>
Resource manager access<br>
Enterprise bean access<br>
Timer service or Timer methods<br>
EntityManagerFactory access<br>
EntityManager access</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional restrictions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>getRollbackOnly</code> and <code>setRollbackOnly</code> methods of the <code>EntityContext</code> interface should be used only in the enterprise bean methods that execute in the context of a transaction.
The container must throw the <code>java.lang.IllegalStateException</code> if the methods are invoked while the instance is not associated with a transaction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Reasons for disallowing operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Invoking the <code>getEJBObject</code>, <code>getEJBLocalObject</code>, and <code>getPrimaryKey</code> methods is disallowed in the entity bean methods in which there is no entity object identity associated with the instance.</p>
</li>
<li>
<p>Invoking the <code>getEJBObject</code> and <code>getEJBHome</code> methods is disallowed if the entity bean does not define a remote client view.</p>
</li>
<li>
<p>Invoking the <code>getEJBLocalObject</code> and <code>getEJBLocalHome</code> methods is disallowed if the entity bean does not define a local client view.</p>
</li>
<li>
<p>Invoking the <code>getRollbackOnly</code> and <code>setRollbackOnly</code> methods is disallowed in the entity bean methods for which the container does not have a meaningful transaction context.
These are the methods that have the <code>NotSupported</code>, <code>Never</code>, or <code>Supports</code> transaction attribute.</p>
</li>
<li>
<p>Accessing resource managers and enterprise beans is disallowed in the entity bean methods for which the container does not have a meaningful transaction context or client security context.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="caching-of-entity-state-and-the-ejbload-and-ejbstore-methods"><a class="anchor" href="#caching-of-entity-state-and-the-ejbload-and-ejbstore-methods"></a>6.1.8. Caching of Entity State and the ejbLoad and ejbStore Methods</h4>
<div class="paragraph">
<p>An instance of an entity bean with bean-managed persistence can cache the entity object’s state between business method invocations. An instance may choose to cache the entire entity object’s state, part of the state, or no state at all.</p>
</div>
<div class="paragraph">
<p>The container-invoked <code>ejbLoad</code> and <code>ejbStore</code> methods assist the instance with the management of the cached entity object’s state. The instance should handle the <code>ejbLoad</code> and <code>ejbStore</code> methods as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the container invokes the <code>ejbStore</code> method on the instance, the instance should push all cached updates of the entity object’s state to the underlying database.
The container invokes the ejbStore method at the end of a transaction
<sup class="footnote" id="_footnote_a3389">[<a id="_footnoteref_25" class="footnote" href="#_footnotedef_25" title="View footnote.">25</a>]</sup>,
and may also invoke it at other times when the instance is in the ready state.
(For example the container may invoke <code>ejbStore</code> when passivating an instance in the middle of a transaction, or when transferring the instance’s state to another instance to support distributed transactions in a multi-process server.)</p>
</li>
<li>
<p>When the container invokes the <code>ejbLoad</code> method on the instance, the instance should discard any cached entity object’s
state.
The instance may, but is not required to, refresh the cached state by reloading it from the underlying database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following examples, which are illustrative but not prescriptive, show how an instance may cache the entity object’s state:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An instance loads the entire entity object’s state in the ejbLoad method and caches it until the container invokes the <code>ejbStore</code> method.
The business methods read and write the cached entity state.
The <code>ejbStore</code> method writes the updated parts of the entity object’s state to the database.</p>
</li>
<li>
<p>An instance loads the most frequently used part of the entity object’s state in the <code>ejbLoad</code> method and caches it until the container invokes the <code>ejbStore</code> method.
Additional parts of the entity object’s state are loaded as needed by the business methods.
The <code>ejbStore</code> method writes the updated parts of the entity object’s state to the database.</p>
</li>
<li>
<p>An instance does not cache any entity object’s state between business methods.
The business methods access and modify the entity object’s state directly in the database.
The <code>ejbLoad</code> and <code>ejbStore</code> methods have an empty implementation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We expect that most entity developers will not manually code the cache management and data access calls in the entity bean class.
We expect that they will rely on application development tools to provide various data access components that encapsulate data access and provide state caching.</p>
</div>
<div class="sect4">
<h5 id="ejbload-and-ejbstore-with-the-notsupported-transaction-attribute"><a class="anchor" href="#ejbload-and-ejbstore-with-the-notsupported-transaction-attribute"></a>6.1.8.1. ejbLoad and ejbStore with the NotSupported Transaction Attribute</h5>
<div class="paragraph">
<p>The use of the <code>ejbLoad</code> and <code>ejbStore</code> methods for caching an entity object’s state in the instance works well only if the container can use transaction boundaries to drive the <code>ejbLoad</code> and <code>ejbStore</code> methods.
When the <code>NotSupported</code>
<sup class="footnote" id="_footnote_a3390">[<a id="_footnoteref_26" class="footnote" href="#_footnotedef_26" title="View footnote.">26</a>]</sup>
transaction attribute is assigned to a component interface method, the corresponding enterprise bean class method executes with an unspecified transaction context (See Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Handling of Methods that Run with an unspecified transaction context</em>&#8221;).
This means that the container does not have any well-defined transaction boundaries to drive the <code>ejbLoad</code> and <code>ejbStore</code> methods on the instance.</p>
</div>
<div class="paragraph">
<p>Therefore, the <code>ejbLoad</code> and <code>ejbStore</code> methods are &#8220;unreliable&#8221; for the instances that the container uses to dispatch the methods with an unspecified transaction context.
The following are the only guarantees that the container provides for the instances that execute the methods with an unspecified transaction context:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container invokes at least one <code>ejbLoad</code> between ejbActivate and the first business method in the instance.</p>
</li>
<li>
<p>The container invokes at least one <code>ejbStore</code> between the last business method on the instance and the <code>ejbPassivate</code> method
<sup class="footnote" id="_footnote_a3391">[<a id="_footnoteref_27" class="footnote" href="#_footnotedef_27" title="View footnote.">27</a>]</sup>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the entity object’s state accessed between the <code>ejbLoad</code> and <code>ejbStore</code> method pair is not protected by a transaction boundary for the methods that execute with an unspecified transaction context, the Bean Provider should not attempt to use the <code>ejbLoad</code> and <code>ejbStore</code> methods to control caching of the entity object’s state in the instance.
Typically, the implementation of the <code>ejbLoad</code> and <code>ejbStore</code> methods should be a no-op (i.e., an empty method), and each business method should access the entity object’s state directly in the database.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a2729"><a class="anchor" href="#a2729"></a>6.1.9. Finder Method Return Type</h4>
<div class="sect4">
<h5 id="single-object-finder"><a class="anchor" href="#single-object-finder"></a>6.1.9.1. Single-Object Finder</h5>
<div class="paragraph">
<p>Some finder methods (such as <code>ejbFindByPrimaryKey</code>) are designed to return at most one entity object.
For single-object finders, the result type of a <code>find&lt;METHOD&gt;</code> method defined in the entity bean’s remote home interface is the entity bean’s remote interface, and the result type of the <code>find&lt;METHOD&gt;</code> method defined in the entity bean’s local home interface is the entity bean’s local interface.
The result type of the corresponding <code>ejbFind&lt;METHOD&gt;</code> method defined in the entity’s implementation class is the entity bean’s primary key type.</p>
</div>
<div class="paragraph">
<p>The following code illustrates the definition of a single-object finder on the remote home interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Entity’s home interface</span>
<span class="directive">public</span> AccountHome <span class="directive">extends</span> jakarta.ejb.EJBHome {
    ...
    Account findByPrimaryKey(AccountPrimaryKey primkey)
        <span class="directive">throws</span> FinderException, <span class="exception">RemoteException</span>;
    ...
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Note that a finder method defined on the local home interface, however, must not throw the <code>RemoteException</code>.</em></p>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Entity’s implementation class</span>
<span class="directive">public</span> AccountBean <span class="directive">implements</span> jakarta.ejb.EntityBean {
    ...
    public AccountPrimaryKey ejbFindByPrimaryKey(
            AccountPrimaryKey primkey)
        <span class="directive">throws</span> FinderException
    {
        ...
    }
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="multi-object-finders"><a class="anchor" href="#multi-object-finders"></a>6.1.9.2. Multi-Object Finders</h5>
<div class="paragraph">
<p>Some finder methods are designed to return multiple entity objects.
For multi-object finders defined in the entity bean’s remote home interface, the result type of the <code>find&lt;METHOD&gt;</code> method is a collection of objects implementing the entity bean’s remote interface.
For multi-object finders defined in the entity bean’s local home interface, the result type is a collection of objects implementing the entity bean’s local interface.
In either case, the result type of the corresponding <code>ejbFind&lt;METHOD&gt;</code> implementation method defined in the entity bean’s implementation class is a collection of objects of the entity bean’s primary key type.</p>
</div>
<div class="paragraph">
<p>The Bean Provider can choose two types to define a collection type for a finder:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Java&#8482; 2 <code>java.util.Collection</code> interface</p>
</li>
<li>
<p>the JDK&#8482; 1.1 <code>java.util.Enumeration</code> interface</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Bean Provider targeting containers and clients based on Java 2 should use the <code>java.util.Collection</code> interface for the finder’s result type.</p>
</div>
<div class="paragraph">
<p>A Bean Provider who wants to ensure that the entity bean is compatible with containers and clients based on JDK 1.1 must use the <code>java.util.Enumeration</code> interface for the finder’s result type
<sup class="footnote" id="_footnote_a3392">[<a id="_footnoteref_28" class="footnote" href="#_footnotedef_28" title="View footnote.">28</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>The Bean Provider must ensure that the objects in the <code>java.util.Enumeration</code> or <code>java.util.Collection</code> returned from the <code>ejbFind&lt;METHOD&gt;</code> method are instances of the entity bean’s primary key class.</p>
</div>
<div class="paragraph">
<p>A client program must use the <code>PortableRemoteObject.narrow</code> method to convert the objects contained in the collections returned by a finder method on the entity bean’s remote home interface to the entity bean’s remote interface type.</p>
</div>
<div class="paragraph">
<p>The following is an example of a multi-object finder method definition that is compatible with containers and clients based on Java 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Entity’s remote home interface</span>
<span class="directive">public</span> AccountHome <span class="directive">extends</span> jakarta.ejb.EJBHome {
    ...
    java.util.Collection findLargeAccounts(<span class="type">double</span> limit)
        <span class="directive">throws</span> FinderException, <span class="exception">RemoteException</span>;
    ...
}

<span class="comment">// Entity’s implementation class</span>
<span class="directive">public</span> AccountBean <span class="directive">implements</span> jakarta.ejb.EntityBean {
    ...
    public java.util.Collection ejbFindLargeAccounts(
            <span class="type">double</span> limit) <span class="directive">throws</span> FinderException
    {
        ...
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of a multi-object finder method definition compatible with containers and clients that are based on both JDK 1.1 and Java 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Entity’s remote home interface</span>
<span class="directive">public</span> AccountHome <span class="directive">extends</span> jakarta.ejb.EJBHome {
    ...
    java.util.Enumeration findLargeAccounts(<span class="type">double</span> limit)
        <span class="directive">throws</span> FinderException, <span class="exception">RemoteException</span>;
    ...
}

<span class="comment">// Entity’s implementation class</span>
<span class="directive">public</span> AccountBean <span class="directive">implements</span> jakarta.ejb.EntityBean {
    ...
    public java.util.Enumeration ejbFindLargeAccounts(
            <span class="type">double</span> limit) <span class="directive">throws</span> FinderException
    {
        ...
    }
    ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="timer-notifications-2"><a class="anchor" href="#timer-notifications-2"></a>6.1.10. Timer Notifications</h4>
<div class="paragraph">
<p>An entity bean can be registered with the Enterprise Beans Timer Service for time-based event notifications if it implements the <code>jakarta.ejb.TimedObject</code> interface.
The container invokes the bean instance’s <code>ejbTimeout</code> method when a timer for the bean has expired.
See <a href="#a3258">Timer Service</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="a2806"><a class="anchor" href="#a2806"></a>6.1.11. Standard Application Exceptions for Entities</h4>
<div class="paragraph">
<p>The Enterprise Beans specification defines the following standard application exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.ejb.CreateException</code></p>
</li>
<li>
<p><code>jakarta.ejb.DuplicateKeyException</code></p>
</li>
<li>
<p><code>jakarta.ejb.FinderException</code></p>
</li>
<li>
<p><code>jakarta.ejb.ObjectNotFoundException</code></p>
</li>
<li>
<p><code>jakarta.ejb.RemoveException</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="createexception-2"><a class="anchor" href="#createexception-2"></a>6.1.11.1. CreateException</h5>
<div class="paragraph">
<p>From the client’s perspective, a <code>CreateException</code> (or a subclass of <code>CreateException</code>) indicates that an application level error occurred during the <code>create&lt;METHOD&gt;</code> operation.
If a client receives this exception, the client does not know, in general, whether the entity object was created but not fully initialized, or not created at all.
Also, the client does not know whether or not the transaction has been marked for rollback.
(However, the client may determine the transaction status using the <code>UserTransaction</code> interface or the <code>setRollbackOnly</code> method of the <code>EJBContext</code> interface.)</p>
</div>
<div class="paragraph">
<p>The Bean Provider throws the <code>CreateException</code> (or subclass of <code>CreateException</code>) from the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods to indicate an application-level error from the create or initialization operation.
Optionally, the Bean Provider may mark the transaction for rollback before throwing this exception.</p>
</div>
<div class="paragraph">
<p><em>The Bean Provider is encouraged to mark the transaction for rollback only if data integrity would be lost if the transaction were committed by the client.
Typically, when a <code>CreateException</code> is thrown, it leaves the database in a consistent state, allowing the client to recover. For example, <code>ejbCreate</code> may throw the <code>CreateException</code> to indicate that the some of the arguments to the <code>create&lt;METHOD&gt;</code> method are invalid.</em></p>
</div>
<div class="paragraph">
<p>The container treats the <code>CreateException</code> as any other application exception.
See <a href="#a3227">Container Provider Responsibilities</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="duplicatekeyexception-2"><a class="anchor" href="#duplicatekeyexception-2"></a>6.1.11.2. DuplicateKeyException</h5>
<div class="paragraph">
<p>The <code>DuplicateKeyException</code> is a subclass of <code>CreateException</code>.
It is thrown by the <code>ejbCreate&lt;METHOD&gt;</code> method to indicate to the client that the entity object cannot be created because an entity object with the same key already exists.
The unique key causing the violation may be the primary key, or another key defined in the underlying database.</p>
</div>
<div class="paragraph">
<p>Normally, the Bean Provider should not mark the transaction for rollback before throwing the exception.</p>
</div>
<div class="paragraph">
<p>When the client receives the <code>DuplicateKeyException</code>, the client knows that the entity was not created, and that the client’s transaction has not typically been marked for rollback.</p>
</div>
</div>
<div class="sect4">
<h5 id="finderexception-2"><a class="anchor" href="#finderexception-2"></a>6.1.11.3. FinderException</h5>
<div class="paragraph">
<p>From the client’s perspective, a <code>FinderException</code> (or a subclass of <code>FinderException</code>) indicates that an application level error occurred during the find operation.
Typically, the client’s transaction has not been marked for rollback because of the <code>FinderException</code>.</p>
</div>
<div class="paragraph">
<p>The Bean Provider throws the <code>FinderException</code> (or subclass of <code>FinderException</code>) from the <code>ejbFind&lt;METHOD&gt;</code> method to indicate an application-level error in the finder method.
The Bean Provider should not, typically, mark the transaction for rollback before throwing the <code>FinderException</code>.</p>
</div>
<div class="paragraph">
<p>The container treats the FinderException as any other application exception.
See <a href="#a3227">Container Provider Responsibilities</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="objectnotfoundexception-2"><a class="anchor" href="#objectnotfoundexception-2"></a>6.1.11.4. ObjectNotFoundException</h5>
<div class="paragraph">
<p>The <code>ObjectNotFoundException</code> is a subclass of <code>FinderException</code>.
It is thrown by the <code>ejbFind&lt;METHOD&gt;</code> method to indicate that the requested entity object does not exist.</p>
</div>
<div class="paragraph">
<p>Only single-object finders (see <a href="#a2729">Finder Method Return Type</a>) should throw this exception.
Multi-object finders must not throw this exception.
Multi-object finders should return an empty collection as an indication that no matching objects were found.</p>
</div>
</div>
<div class="sect4">
<h5 id="removeexception-2"><a class="anchor" href="#removeexception-2"></a>6.1.11.5. RemoveException</h5>
<div class="paragraph">
<p>From the client’s perspective, a <code>RemoveException</code> (or a subclass of <code>RemoveException</code>) indicates that an application level error occurred during a remove operation.
If a client receives this exception, the client does not know, in general, whether the entity object was removed or not.
The client also does not know if the transaction has been marked for rollback.
(However, the client may determine the transaction status using the <code>UserTransaction</code> interface.)</p>
</div>
<div class="paragraph">
<p>The Bean Provider throws the <code>RemoveException</code> (or subclass of <code>RemoveException</code>) from the <code>ejbRemove</code> method to indicate an application-level error from the entity object removal operation.
Optionally, the Bean Provider may mark the transaction for rollback before throwing this exception.</p>
</div>
<div class="paragraph">
<p><em>The Bean Provider is encouraged to mark the transaction for rollback only if data integrity would be lost if the
transaction were committed by the client.
Typically, when a <code>RemoveException</code> is thrown, it leaves the database in a consistent state, allowing the client to recover.</em></p>
</div>
<div class="paragraph">
<p>The container treats the <code>RemoveException</code> as any other application exception.
See <a href="#a3227">Container Provider Responsibilities</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="commit-options"><a class="anchor" href="#commit-options"></a>6.1.12. Commit Options</h4>
<div class="paragraph">
<p>The Entity Bean protocol is designed to give the container the flexibility to select the disposition of the instance state at transaction commit time.
This flexibility allows the container to optimally manage the caching of entity object’s state and the association of an entity object identity with the enterprise bean instances.</p>
</div>
<div class="paragraph">
<p>The container can select from the following commit-time options:</p>
</div>
<div class="paragraph">
<p><strong>Option A:</strong>
The container caches a &#8220;ready&#8221; instance between transactions.
The container ensures that the instance has exclusive access to the state of the object in the persistent storage.
Therefore, the container does not have to synchronize the instance’s state from the persistent storage at the beginning of the
next transaction.</p>
</div>
<div class="paragraph">
<p><strong>Option B:</strong>
The container caches a &#8220;ready&#8221; instance between transactions.
In contrast to Option A, in this option the container does not ensure that the instance has exclusive access to the state of the object in the persistent storage.
Therefore, the container must synchronize the instance’s state from the persistent storage at the beginning of the next transaction.</p>
</div>
<div class="paragraph">
<p><strong>Option C:</strong>
The container does not cache a &#8220;ready&#8221; instance between transactions.
The container returns the instance to the pool of available instances after a transaction has completed.</p>
</div>
<div class="paragraph">
<p>The following table provides a summary of the commit-time options.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Summary of Commit-Time Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Write instance state to database</th>
<th class="tableblock halign-left valign-top">Instance stays ready</th>
<th class="tableblock halign-left valign-top">Instance state remains valid</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Option C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that the container synchronizes the instance’s state with the persistent storage at transaction commit for all three options.</p>
</div>
<div class="paragraph">
<p>The selection of the commit option is transparent to the entity bean implementation—the entity bean will work correctly regardless of the commit-time option chosen by the container.
The Bean Provider writes the entity bean in the same way.</p>
</div>
</div>
<div class="sect3">
<h4 id="concurrent-access-from-multiple-transactions-2"><a class="anchor" href="#concurrent-access-from-multiple-transactions-2"></a>6.1.13. Concurrent Access from Multiple Transactions</h4>
<div class="paragraph">
<p>When writing the entity bean business methods, the Bean Provider does not have to worry about
concurrent access from multiple transactions.
The Bean Provider may assume that the container will ensure appropriate synchronization for entity objects that are accessed
concurrently from multiple transactions.</p>
</div>
<div class="paragraph">
<p>The container typically uses one of the following implementation strategies to achieve proper synchronization.
(These strategies are illustrative, not prescriptive.)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container activates multiple instances of the entity bean, one for each transaction in which the entity object is
being accessed.
The transaction synchronization is performed automatically by the underlying database during the database access calls performed by the business methods and the <code>ejbTimeout</code> method; and by the <code>ejbLoad</code>, <code>ejbCreate&lt;METHOD&gt;</code>, <code>ejbStore</code>, and <code>ejbRemove</code> methods.
The database system provides all the necessary transaction synchronization; the container does not have to perform any synchronization logic.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NTQiIGhlaWdodD0iMjMzIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoNjU0djIzM0gweiIvPgogIDx0ZXh0IHg9IjMzMiIgeT0iMTgiPgogICAgPHRzcGFuPkNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIyMzciIGhlaWdodD0iMTkzIiB4PSIyNDYiIHk9IjI5IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjI0LjEyNSIgcnk9IjI0LjEyNSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yNTQgNDRoMTkwdjIwSDI1NHoiLz4KICA8dGV4dCB4PSIyNjIiIHk9IjYwIj4KICAgIDx0c3BhbiB4PSIyNjguOTQ1IiB5PSI2MCI+ZW50ZXJwcmlzZSBiZWFuIGluc3RhbmNlczwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjYuNjY3IDQ0aDY2LjY2NkMxMDEuNjY3IDQ0IDExMCA1NCAxMTAgNjRzLTguMzMzIDIwLTE2LjY2NyAyMEgyNi42NjdDMTguMzMzIDg0IDEwIDc0IDEwIDY0czguMzMzLTIwIDE2LjY2Ny0yMCIvPgogIDx0ZXh0IHg9IjE4IiB5PSI3MCI+CiAgICA8dHNwYW4geD0iMzQuNDQ1IiB5PSI3MCI+Q2xpZW50IDE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTExNC40MzQgNjYuMzExbDgwLjY5OCA0Mi4wNjcgNC40MzQgMi4zMU0xOTcgMTAzbDIuNTY2IDcuNjg5TDE5MiAxMTMiLz4KICA8dGV4dCB4PSIxNjYiIHk9IjgwIj4KICAgIDx0c3Bhbj5UWCAxPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNi42NjcgMTgyaDY2LjY2NmM4LjMzNCAwIDE2LjY2NyAxMCAxNi42NjcgMjBzLTguMzMzIDIwLTE2LjY2NyAyMEgyNi42NjdDMTguMzMzIDIyMiAxMCAyMTIgMTAgMjAyczguMzMzLTIwIDE2LjY2Ny0yMCIvPgogIDx0ZXh0IHg9IjE4IiB5PSIyMDgiPgogICAgPHRzcGFuIHg9IjM0LjQ0NSIgeT0iMjA4Ij5DbGllbnQgMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE0LjQzNCAxOTkuNjg5bDgwLjY5OC00Mi4wNjcgNC40MzQtMi4zMU0xOTIgMTUzbDcuNTY2IDIuMzExTDE5NyAxNjMiLz4KICA8dGV4dCB4PSIxNjYiIHk9IjE5NSI+CiAgICA8dHNwYW4+VFggMjwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjA3IDExM2g4MGMxMCAwIDIwIDEwIDIwIDIwcy0xMCAyMC0yMCAyMGgtODBjLTEwIDAtMjAtMTAtMjAtMjBzMTAtMjAgMjAtMjAiLz4KICA8dGV4dCB4PSIxOTYiIHk9IjEzMCI+CiAgICA8dHNwYW4geD0iMjA2LjcxOSIgeT0iMTMwIj5FbnRpdHkgb2JqZWN0PC90c3Bhbj4gPHRzcGFuIHg9IjIwNi40OTIiIHk9IjE0Ny42MDkiPkFjY291bnQgMTAwPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMTAuNzQzIDEyOS42ODVsMjMuNzcxLTIxLjA1NSAzLjc0My0zLjMxNU0zMzAgMTA1bDguMjU3LjMxNUwzMzggMTEzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNjIgODJoODBjMTAgMCAyMCAxMCAyMCAyMHMtMTAgMjAtMjAgMjBoLTgwYy0xMCAwLTIwLTEwLTIwLTIwczEwLTIwIDIwLTIwIi8+CiAgPHRleHQgeD0iMzUxIiB5PSI5OSI+CiAgICA8dHNwYW4geD0iMzYxLjQ5MiIgeT0iOTkiPkFjY291bnQgMTAwPC90c3Bhbj4gPHRzcGFuIHg9IjM3OC4yNTgiIHk9IjExNi42MDkiPmluIFRYIDE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ2Ni44MTcgMTAzLjM0MWw2NC41NSAxNy45NzYgNC44MTYgMS4zNDJNNTMyIDExNmw0LjE4MyA2LjY1OUw1MjkgMTI3Ii8+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zMTAuNjM4IDEzNi40M2wyNC4wODYgMjIuNzEgMy42MzggMy40M00zMzggMTU1bC4zNjIgNy41N0wzMzAgMTYzIi8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0zNjIgMTQ2aDgwYzEwIDAgMjAgMTAgMjAgMjBzLTEwIDIwLTIwIDIwaC04MGMtMTAgMC0yMC0xMC0yMC0yMHMxMC0yMCAyMC0yMCIvPgogIDx0ZXh0IHg9IjM1MSIgeT0iMTYzIj4KICAgIDx0c3BhbiB4PSIzNjEuNDkyIiB5PSIxNjMiPkFjY291bnQgMTAwPC90c3Bhbj4gPHRzcGFuIHg9IjM3OC4yNTgiIHk9IjE4MC42MDkiPmluIFRYIDI8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ2Ni43OTYgMTY0LjU4Nmw2My42MTItMTguNzU4IDQuNzk2LTEuNDE0TTUyOCAxNDFsNy4yMDQgMy40MTRMNTMxIDE1MSIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NDMgOTEuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3VjkxLjY2N0M2NDMgODMuMzMzIDYxOCA3NSA1OTMgNzVzLTUwIDguMzMzLTUwIDE2LjY2N3oiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU0MyA5MS42Njd2NjYuNjY2YzAgOC4zMzQgMjUgMTYuNjY3IDUwIDE2LjY2N3M1MC04LjMzMyA1MC0xNi42NjdWOTEuNjY3YzAgOC4zMzMtMjUgMTYuNjY2LTUwIDE2LjY2NlM1NDMgMTAwIDU0MyA5MS42NjdDNTQzIDgzLjMzMyA1NjggNzUgNTkzIDc1czUwIDguMzMzIDUwIDE2LjY2NyIvPgogIDx0ZXh0IHg9IjU1MiIgeT0iMTQ3Ij4KICAgIDx0c3BhbiB4PSI1NTIuNDkyIiB5PSIxNDciPkFjY291bnQgMTAwPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 41">
</div>
<div class="title">Figure 13. Multiple Clients Can Access the Same Entity Object Using Multiple Instances</div>
</div>
<div class="paragraph">
<p><em>With this strategy, the type of lock acquired by <code>ejbLoad</code> leads to a trade-off.
If <code>ejbLoad</code> acquires an exclusive lock on the instance&#8217;s state in the database, then throughput of read-only transactions could be impacted.
If <code>ejbLoad</code> acquires a shared lock and the instance is updated, then <code>ejbStore</code> will need to promote the lock to an exclusive lock.
This may cause a deadlock if it happens concurrently under multiple transactions.</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container acquires exclusive access to the entity object’s state in the database.
The container activates a single instance and serializes the access from multiple transactions to this instance.
The commit-time option A applies to this type of container.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NTQiIGhlaWdodD0iMjMzIiBmb250LWZhbWlseT0ic2VyaWYiIGZvbnQtc2l6ZT0iMTYiPgogIDx0ZXh0IHg9IjMzMiIgeT0iMTgiPgogICAgPHRzcGFuPkNvbnRhaW5lcjwvdHNwYW4+CiAgPC90ZXh0PgogIDxyZWN0IHdpZHRoPSIyMzciIGhlaWdodD0iMTkzIiB4PSIyNDYiIHk9IjI5IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgcng9IjI0LjEyNSIgcnk9IjI0LjEyNSIvPgogIDx0ZXh0IHg9IjI2MiIgeT0iNjAiPgogICAgPHRzcGFuIHg9IjI2OC45NDUiIHk9IjYwIj5lbnRlcnByaXNlIGJlYW4gaW5zdGFuY2VzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yNi42NjcgNDRoNjYuNjY2QzEwMS42NjcgNDQgMTEwIDU0IDExMCA2NHMtOC4zMzMgMjAtMTYuNjY3IDIwSDI2LjY2N0MxOC4zMzMgODQgMTAgNzQgMTAgNjRzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMTgiIHk9IjcwIj4KICAgIDx0c3BhbiB4PSIzNC40NDUiIHk9IjcwIj5DbGllbnQgMTwvdHNwYW4+CiAgPC90ZXh0PgogIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTE0LjQzNCA2Ni4zMTFsODAuNjk4IDQyLjA2NyA0LjQzNCAyLjMxTTE5NyAxMDNsMi41NjYgNy42ODlMMTkyIDExMyIvPgogIDx0ZXh0IHg9IjE2NiIgeT0iODAiPgogICAgPHRzcGFuPlRYIDE8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTI2LjY2NyAxODJoNjYuNjY2YzguMzM0IDAgMTYuNjY3IDEwIDE2LjY2NyAyMHMtOC4zMzMgMjAtMTYuNjY3IDIwSDI2LjY2N0MxOC4zMzMgMjIyIDEwIDIxMiAxMCAyMDJzOC4zMzMtMjAgMTYuNjY3LTIwIi8+CiAgPHRleHQgeD0iMTgiIHk9IjIwOCI+CiAgICA8dHNwYW4geD0iMzQuNDQ1IiB5PSIyMDgiPkNsaWVudCAyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMTQuNDM0IDE5OS42ODlsODAuNjk4LTQyLjA2NyA0LjQzNC0yLjMxTTE5MiAxNTNsNy41NjYgMi4zMTFMMTk3IDE2MyIvPgogIDx0ZXh0IHg9IjE2NiIgeT0iMTk1Ij4KICAgIDx0c3Bhbj5UWCAyPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMDcgMTEzaDgwYzEwIDAgMjAgMTAgMjAgMjBzLTEwIDIwLTIwIDIwaC04MGMtMTAgMC0yMC0xMC0yMC0yMHMxMC0yMCAyMC0yMCIvPgogIDx0ZXh0IHg9IjE5NiIgeT0iMTMwIj4KICAgIDx0c3BhbiB4PSIyMDYuNzE5IiB5PSIxMzAiPkVudGl0eSBvYmplY3Q8L3RzcGFuPiA8dHNwYW4geD0iMjA2LjQ5MiIgeT0iMTQ3LjYwOSI+QWNjb3VudCAxMDA8L3RzcGFuPgogIDwvdGV4dD4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTMxMC43NDMgMTI5LjY4NWwyMy43NzEtMjEuMDU1IDMuNzQzLTMuMzE1TTMzMCAxMDVsOC4yNTcuMzE1TDMzOCAxMTMiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTM2MiA4Mmg4MGMxMCAwIDIwIDEwIDIwIDIwcy0xMCAyMC0yMCAyMGgtODBjLTEwIDAtMjAtMTAtMjAtMjBzMTAtMjAgMjAtMjAiLz4KICA8dGV4dCB4PSIzNTEiIHk9Ijk5Ij4KICAgIDx0c3BhbiB4PSIzNjEuNDkyIiB5PSI5OSI+QWNjb3VudCAxMDA8L3RzcGFuPiA8dHNwYW4geD0iMzc4LjI1OCIgeT0iMTE2LjYwOSI+aW4gVFggMTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IHg9IjI2OSIgeT0iMTg3Ij4KICAgIDx0c3BhbiB4PSIyNjkiIHk9IjE4NyI+Y29udGFpbmVyIGJsb2NrcyBDbGllbnQgMjwvdHNwYW4+IDx0c3BhbiB4PSIyNjkiIHk9IjIwNC42MDkiPnVudGlsIENsaWVudCAxIGZpbmlzaGVzPC90c3Bhbj4KICA8L3RleHQ+CiAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00NjYuODE3IDEwMy4zNDFsNjQuNTUgMTcuOTc2IDQuODE2IDEuMzQyTTUzMiAxMTZsNC4xODMgNi42NTlMNTI5IDEyNyIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik01NDMgOTEuNjY3djY2LjY2NmMwIDguMzM0IDI1IDE2LjY2NyA1MCAxNi42NjdzNTAtOC4zMzMgNTAtMTYuNjY3VjkxLjY2N0M2NDMgODMuMzMzIDYxOCA3NSA1OTMgNzVzLTUwIDguMzMzLTUwIDE2LjY2N3oiLz4KICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTU0MyA5MS42Njd2NjYuNjY2YzAgOC4zMzQgMjUgMTYuNjY3IDUwIDE2LjY2N3M1MC04LjMzMyA1MC0xNi42NjdWOTEuNjY3YzAgOC4zMzMtMjUgMTYuNjY2LTUwIDE2LjY2NlM1NDMgMTAwIDU0MyA5MS42NjdDNTQzIDgzLjMzMyA1NjggNzUgNTkzIDc1czUwIDguMzMzIDUwIDE2LjY2NyIvPgogIDx0ZXh0IHg9IjU1MiIgeT0iMTQ3Ij4KICAgIDx0c3BhbiB4PSI1NTIuNDkyIiB5PSIxNDciPkFjY291bnQgMTAwPC90c3Bhbj4KICA8L3RleHQ+Cjwvc3ZnPgo=" alt="EBOpt 42">
</div>
<div class="title">Figure 14. Multiple Clients Can Access the Same Entity Object Using Single Instance</div>
</div>
</div>
<div class="sect3">
<h4 id="a2872"><a class="anchor" href="#a2872"></a>6.1.14. Non-reentrant and Re-entrant Instances</h4>
<div class="paragraph">
<p>An entity Bean Provider can specify that an entity bean is non-reentrant.
If an instance of a non-reentrant entity bean executes a client request in a given transaction context, and another request with the same transaction context arrives for the same entity object, the container will throw an exception to the second request.
This rule allows the Bean Provider to program the entity bean as single-threaded, non-reentrant code.</p>
</div>
<div class="paragraph">
<p>The functionality of some entity beans may require loopbacks in the same transaction context.
An example of a loopback is when the client calls entity object A, A calls entity object B, and B calls back A in the same transaction context.
The entity bean’s method invoked by the loopback shares the current execution context (which includes the transaction and security contexts) with the bean’s method invoked by the client.</p>
</div>
<div class="paragraph">
<p>If the entity bean is specified as non-reentrant in the deployment descriptor, the container must reject an attempt to re-enter the instance via the entity bean’s component interface while the instance is executing a business method.
(This can happen, for example, if the instance has invoked another enterprise bean, and the other enterprise bean tries to make a loopback call.)
If the attempt is made to reenter the instance through the remote interface, the container must throw the <code>java.rmi.RemoteException</code> to the caller.
If the attempt is made to reenter the instance through the local interface, the container must throw the <code>jakarta.ejb.EJBException</code> to the caller.
The container must allow the call if the bean’s deployment descriptor specifies that the entity bean is re-entrant.</p>
</div>
<div class="paragraph">
<p>Re-entrant entity beans must be programmed and used with caution.
First, the Bean Provider must code the entity bean with the anticipation of a loopback call.
Second, since the container cannot, in general, tell a loopback from a concurrent call from a different client, the client programmer must be careful to avoid code that could lead to a concurrent call in the same transaction context.</p>
</div>
<div class="paragraph">
<p>Concurrent calls in the same transaction context targeted at the same entity object are illegal and may lead to unpredictable results.
Since the container cannot, in general, distinguish between an illegal concurrent call and a legal loopback, application programmers are encouraged to avoid using loopbacks.
Entity beans that do not need callbacks should be marked as non-reentrant in the deployment descriptor, allowing the container to detect and prevent illegal concurrent calls from clients.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="responsibilities-of-the-enterprise-bean-provider-2"><a class="anchor" href="#responsibilities-of-the-enterprise-bean-provider-2"></a>6.2. Responsibilities of the Enterprise Bean Provider</h3>
<div class="paragraph">
<p>This section describes the responsibilities of a bean-managed persistence entity Bean Provider to ensure that the entity bean can be deployed in any Enterprise Beans container.</p>
</div>
<div class="sect3">
<h4 id="classes-and-interfaces-2"><a class="anchor" href="#classes-and-interfaces-2"></a>6.2.1. Classes and Interfaces</h4>
<div class="paragraph">
<p>The Bean Provider is responsible for providing the following class files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Entity bean class and any dependent classes</p>
</li>
<li>
<p>Primary key class</p>
</li>
<li>
<p>Entity bean’s remote interface and remote home interface, if the entity bean provides a remote client view</p>
</li>
<li>
<p>Entity bean’s local interface and local home interface, if the entity bean provides a local client view</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Bean Provider must provide a remote interface and a remote home interface or a local interface an local home interface for the bean.
The Bean Provider may provide a remote interface, remote home interface, local interface, and local home interface for the bean.
Other combinations are not allowed.</p>
</div>
</div>
<div class="sect3">
<h4 id="enterprise-bean-class-3"><a class="anchor" href="#enterprise-bean-class-3"></a>6.2.2. Enterprise Bean Class</h4>
<div class="paragraph">
<p>The following are the requirements for an entity bean class:</p>
</div>
<div class="paragraph">
<p>The class must implement, directly or indirectly, the <code>jakarta.ejb.EntityBean</code> interface.</p>
</div>
<div class="paragraph">
<p>The class may implement, directly or indirectly, the <code>jakarta.ejb.TimedObject</code> interface.</p>
</div>
<div class="paragraph">
<p>The class must be defined as <code>public</code> and must not be <code>abstract</code>.
The class must be a top level class.</p>
</div>
<div class="paragraph">
<p>The class must not be defined as <code>final</code>.</p>
</div>
<div class="paragraph">
<p>The class must define a public constructor that takes no arguments.</p>
</div>
<div class="paragraph">
<p>The class must not define the <code>finalize</code> method.</p>
</div>
<div class="paragraph">
<p>The class may, but is not required to, implement the entity bean’s component interface.
<sup class="footnote" id="_footnote_a3393">[<a id="_footnoteref_29" class="footnote" href="#_footnotedef_29" title="View footnote.">29</a>]</sup>
If the class implements the entity bean’s component interface, the class must provide no-op implementations of the methods defined in the <code>jakarta.ejb.EJBObject</code> or <code>jakarta.ejb.EJBLocalObject</code> interface.
The container will never invoke these methods on the bean instances at runtime.</p>
</div>
<div class="paragraph">
<p><em>A no-op implementation of these methods is required to avoid defining the entity bean class as abstract.</em></p>
</div>
<div class="paragraph">
<p>The entity bean class must implement the business methods, and the <code>ejbCreate&lt;METHOD&gt;</code>, <code>ejbPostCreate&lt;METHOD&gt;</code>, <code>ejbFind&lt;METHOD&gt;</code>, and <code>ejbHome&lt;METHOD&gt;</code> methods as described later in this section.</p>
</div>
<div class="paragraph">
<p>The entity bean class may have superclasses and/or superinterfaces.
If the entity bean has superclasses, the business methods, the <code>ejbCreate</code> and <code>ejbPostCreate</code> methods, the finder methods, and the methods of the <code>EntityBean</code> interface or the <code>TimedObject</code> interface may be implemented in the enterprise bean class or in any of its superclasses.</p>
</div>
<div class="paragraph">
<p>The entity bean class is allowed to implement other methods (for example helper methods invoked internally by the business methods) in addition to the methods required by the Enterprise Beans specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbcreatemethod-methods-2"><a class="anchor" href="#ejbcreatemethod-methods-2"></a>6.2.3. ejbCreate&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>The entity bean class must implement the <code>ejbCreate&lt;METHOD&gt;</code> methods that correspond to the create&lt;METHOD&gt; methods specified in the entity bean’s home interface.</p>
</div>
<div class="paragraph">
<p>The entity bean class may define zero or more <code>ejbCreate&lt;METHOD&gt;</code> methods whose signatures must follow these rules:</p>
</div>
<div class="paragraph">
<p>The method name must have <code>ejbCreate</code> as its prefix.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The return type must be the entity bean’s primary key type.</p>
</div>
<div class="paragraph">
<p>The method argument and return value types must be legal types for RMI-IIOP if the <code>ejbCreate&lt;METHOD&gt;</code> corresponds to a <code>create&lt;METHOD&gt;</code> on the entity bean’s remote home interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions, including the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the <code>ejbCreate</code> method to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
An Enterprise Beans 2.0 or later enterprise bean should not throw the <code>java.rmi.RemoteException</code> from the <code>ejbCreate</code> method.</em></p>
</div>
<div class="paragraph">
<p>The entity object created by the <code>ejbCreate&lt;METHOD&gt;</code> method must have a unique primary key.
This means that the primary key must be different from the primary keys of all the existing entity objects within the same home.
The <code>ejbCreate&lt;METHOD&gt;</code> method should throw the <code>DuplicateKeyException</code> on an attempt to create an entity object with a duplicate primary key.
However, it is legal to reuse the primary key of a previously removed entity object.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbpostcreatemethod-methods-2"><a class="anchor" href="#ejbpostcreatemethod-methods-2"></a>6.2.4. ejbPostCreate&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>For each <code>ejbCreate&lt;METHOD&gt;</code> method, the entity bean class must define a matching <code>ejbPostCreate&lt;METHOD&gt;</code> method, using the following rules:</p>
</div>
<div class="paragraph">
<p>The method name must have <code>ejbPostCreate</code> as its prefix.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The return type must be <code>void</code>.</p>
</div>
<div class="paragraph">
<p>The method arguments must be the same as the arguments of the matching <code>ejbCreate&lt;METHOD&gt;</code> method.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions, including the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the <code>ejbPostCreate</code> method to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
An Enterprise Beans 2.0 or later enterprise bean should not throw the <code>java.rmi.RemoteException</code> from the <code>ejbPostCreate</code> method.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="ejbfind-methods"><a class="anchor" href="#ejbfind-methods"></a>6.2.5. ejbFind Methods</h4>
<div class="paragraph">
<p>The entity bean class may also define additional <code>ejbFind&lt;METHOD&gt;</code> finder methods.</p>
</div>
<div class="paragraph">
<p>The signatures of the finder methods must follow the following rules:</p>
</div>
<div class="paragraph">
<p>A finder method name must start with the prefix &#8220;<code>ejbFind</code>&#8221; (e.g. <code>ejbFindByPrimaryKey</code>, <code>ejbFindLargeAccounts</code>, <code>ejbFindLateShipments</code>).</p>
</div>
<div class="paragraph">
<p>A finder method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The method argument types must be legal types for RMI-IIOP if the <code>ejbFind&lt;METHOD&gt;</code> method corresponds to a <code>find&lt;METHOD&gt;</code> method on the entity bean’s remote home interface.</p>
</div>
<div class="paragraph">
<p>The return type of a finder method must be the entity bean’s primary key type, or a collection of primary keys (see <a href="#a2729">Finder Method Return Type</a>).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions, including the <code>jakarta.ejb.FinderException</code>.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the finder methods to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
An Enterprise Beans 2.0 or later enterprise bean should not throw the <code>java.rmi.RemoteException</code> from the <code>ejbFind</code> method.</em></p>
</div>
<div class="paragraph">
<p>Every entity bean must define the <code>ejbFindByPrimaryKey</code> method.
The result type for this method must be the primary key type (i.e., the <code>ejbFindByPrimaryKey</code> method must be a single-object finder).</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbhomemethod-methods-2"><a class="anchor" href="#ejbhomemethod-methods-2"></a>6.2.6. ejbHome&lt;METHOD&gt; Methods</h4>
<div class="paragraph">
<p>The entity bean class may define zero or more home methods whose signatures must follow the following rules:</p>
</div>
<div class="paragraph">
<p>An <code>ejbHome&lt;METHOD&gt;</code> method must exist for every home <code>&lt;METHOD&gt;</code> method on the entity bean’s remote home or local home interface.
The method name must have ejbHome as its prefix followed by the name of the <code>&lt;METHOD&gt;</code> method in which the first character has been uppercased.</p>
</div>
<div class="paragraph">
<p>The method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The method argument and return value types must be legal types for RMI-IIOP if the <code>ejbHome</code> method corresponds to a method on the entity bean’s remote home interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions.
The <code>throws</code> clause must not throw the <code>java.rmi.RemoteException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="business-methods-2"><a class="anchor" href="#business-methods-2"></a>6.2.7. Business Methods</h4>
<div class="paragraph">
<p>The entity bean class may define zero or more business methods whose signatures must follow these rules:</p>
</div>
<div class="paragraph">
<p>The method names can be arbitrary, but they must not start with &#8220;<code>ejb</code>&#8221; to avoid conflicts with the callback methods used by the Enterprise Beans architecture.</p>
</div>
<div class="paragraph">
<p>The business method must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The method must not be declared as <code>final</code> or <code>static</code>.</p>
</div>
<div class="paragraph">
<p>The method argument and return value types must be legal types for RMI-IIOP if the method corresponds to a business method on the entity bean’s remote interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause may define arbitrary application specific exceptions.</p>
</div>
<div class="paragraph">
<p><em>Compatibility Note: Enterprise Beans 1.0 allowed the business methods to throw the <code>java.rmi.RemoteException</code> to indicate a non-application exception.
This practice was deprecated in Enterprise Beans 1.1—an Enterprise Beans 1.1 or Enterprise Beans 2.0 or later compliant enterprise bean should throw the <code>jakarta.ejb.EJBException</code> or another <code>java.lang.RuntimeException</code> to indicate non-application exceptions to the container (see <a href="#a3221">System Exceptions</a>).
An Enterprise Beans 2.0 or later enterprise bean should not throw the <code>java.rmi.RemoteException</code> from a business method.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-remote-interface-3"><a class="anchor" href="#entity-beans-remote-interface-3"></a>6.2.8. Entity Bean’s Remote Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s remote interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBObject</code> interface.</p>
</div>
<div class="paragraph">
<p>The methods defined in the remote interface must follow the rules for RMI-IIOP.
This means that their argument and return value types must be valid types for RMI-IIOP, and their <code>throws</code> clauses must include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The remote interface is allowed to have superinterfaces.
Use of interface inheritance is subject to the RMI-IIOP rules for the definition of remote interfaces.</p>
</div>
<div class="paragraph">
<p>For each method defined in the remote interface, there must be a matching method in the entity bean’s class.
The matching method must have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same name.</p>
</li>
<li>
<p>The same number and types of its arguments, and the same return type.</p>
</li>
<li>
<p>All the exceptions defined in the <code>throws</code> clause of the matching method of the enterprise bean class must be defined in the <code>throws</code> clause of the method of the remote interface.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The remote interface methods must not expose local interface types, local home interface types, timers or timer handles, or the managed collection classes that are used for entity beans with container-managed persistence as arguments or results.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-remote-home-interface-3"><a class="anchor" href="#entity-beans-remote-home-interface-3"></a>6.2.9. Entity Bean’s Remote Home Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s remote home interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBHome</code> interface.</p>
</div>
<div class="paragraph">
<p>The methods defined in this interface must follow the rules for RMI-IIOP.
This means that their argument and return types must be of valid types for RMI-IIOP, and that their <code>throws</code> clauses must include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The remote home interface is allowed to have superinterfaces.
Use of interface inheritance is subject to the RMI-IIOP rules for the definition of remote interfaces.</p>
</div>
<div class="paragraph">
<p>Each method defined in the remote home interface must be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A create method.</p>
</li>
<li>
<p>A finder method.</p>
</li>
<li>
<p>A home method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each create method must be the named &#8220;<code>create&lt;METHOD&gt;</code>&#8221;, and it must match one of the <code>ejbCreate&lt;METHOD&gt;</code> methods defined in the enterprise bean class.
The matching <code>ejbCreate&lt;METHOD&gt;</code> method must have the same number and types of its arguments.
(Note that the return type is different.)</p>
</div>
<div class="paragraph">
<p>The return type for a <code>create&lt;METHOD&gt;</code> method must be the entity bean’s remote interface type.</p>
</div>
<div class="paragraph">
<p>All the exceptions defined in the <code>throws</code> clause of the matching <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods of the enterprise bean class must be included in the <code>throws</code> clause of the matching <code>create&lt;METHOD&gt;</code> method of the remote home interface (i.e., the set of exceptions defined for the <code>create&lt;METHOD&gt;</code> method must be a superset of the union of exceptions defined for the
<code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a <code>create&lt;METHOD&gt;</code> method must include the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p>Each finder method must be named &#8220;<code>find&lt;METHOD&gt;</code>&#8221; (e.g. <code>findLargeAccounts</code>), and it must match one of the <code>ejbFind&lt;METHOD&gt;</code> methods defined in the entity bean class (e.g. <code>ejbFindLargeAccounts</code>).
The matching ejbFind&lt;METHOD&gt; method must have the same number and types of arguments.
(Note that the return type may be different.)</p>
</div>
<div class="paragraph">
<p>The return type for a <code>find&lt;METHOD&gt;</code> method must be the entity bean’s remote interface type (for a single-object finder), or a collection thereof (for a multi-object finder).</p>
</div>
<div class="paragraph">
<p>The remote home interface must always include the <code>findByPrimaryKey</code> method, which is always a single-object finder.
The method must declare the primary key class as the method argument.</p>
</div>
<div class="paragraph">
<p>All the exceptions defined in the <code>throws</code> clause of an ejbFind method of the entity bean class must be included in the <code>throws</code> clause of the matching find method of the remote home interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a finder method must include the <code>jakarta.ejb.FinderException</code>.</p>
</div>
<div class="paragraph">
<p>Home methods can have arbitrary names, provided that they do not clash with create, find, and remove method names.
The matching ejbHome method specified in the entity bean class must have the same number and types of arguments and must return the same type as the home method as specified in the remote home interface of the bean.</p>
</div>
<div class="paragraph">
<p>The remote home interface methods must not expose local interface types, local home interface types, timer handles, or the managed collection classes that are used for entity beans with container-managed persistence as arguments or results.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-local-interface-3"><a class="anchor" href="#entity-beans-local-interface-3"></a>6.2.10. Entity Bean’s Local Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s local interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBLocalObject</code> interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a method defined on the local interface must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The local interface is allowed to have superinterfaces.</p>
</div>
<div class="paragraph">
<p>For each method defined in the local interface, there must be a matching method in the entity bean’s class.
The matching method must have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same name.</p>
</li>
<li>
<p>The same number and types of its arguments, and the same return type.</p>
</li>
<li>
<p>All the exceptions defined in the <code>throws</code> clause of the matching method of the enterprise Bean class must be defined in the <code>throws</code> clause of the method of the local interface.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="entity-beans-local-home-interface-2"><a class="anchor" href="#entity-beans-local-home-interface-2"></a>6.2.11. Entity Bean’s Local Home Interface</h4>
<div class="paragraph">
<p>The following are the requirements for the entity bean’s local home interface:</p>
</div>
<div class="paragraph">
<p>The interface must extend the <code>jakarta.ejb.EJBLocalHome</code> interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a method on the local home interface must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
<div class="paragraph">
<p>The local home interface is allowed to have superinterfaces.</p>
</div>
<div class="paragraph">
<p>Each method defined in the local home interface must be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A create method.</p>
</li>
<li>
<p>A finder method.</p>
</li>
<li>
<p>A home method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each create method must be the named &#8220;<code>create&lt;METHOD&gt;</code>&#8221;, and it must match one of the <code>ejbCreate&lt;METHOD&gt;</code> methods defined in the enterprise bean class.
The matching <code>ejbCreate&lt;METHOD&gt;</code> method must have the same number and types of its arguments.
(Note that the return type is different.)</p>
</div>
<div class="paragraph">
<p>The return type for a <code>create&lt;METHOD&gt;</code> method must be the entity bean’s local interface type.</p>
</div>
<div class="paragraph">
<p>All the exceptions defined in the <code>throws</code> clause of the matching <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods of the enterprise bean class must be included in the <code>throws</code> clause of the matching <code>create&lt;METHOD&gt;</code> method of the local home interface (i.e., the set of exceptions defined for the <code>create&lt;METHOD&gt;</code> method must be a superset of the union of exceptions defined for the <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods).</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a <code>create&lt;METHOD&gt;</code> method must include the <code>jakarta.ejb.CreateException</code>.</p>
</div>
<div class="paragraph">
<p>Each finder method must be named &#8220;<code>find&lt;METHOD&gt;</code>&#8221; (e.g. <code>findLargeAccounts</code>), and it must match one of the <code>ejbFind&lt;METHOD&gt;</code> methods defined in the entity bean class (e.g. <code>ejbFindLargeAccounts</code>).
The matching <code>ejbFind&lt;METHOD&gt;</code> method must have the same number and types of arguments.
(Note that the return type may be different.)</p>
</div>
<div class="paragraph">
<p>The return type for a <code>find&lt;METHOD&gt;</code> method must be the entity bean’s local interface type (for a single-object finder), or a collection thereof (for a multi-object finder).</p>
</div>
<div class="paragraph">
<p>The local home interface must always include the <code>findByPrimaryKey</code> method, which is always a single-object finder.
The method must declare the primary key class as the method argument.</p>
</div>
<div class="paragraph">
<p>All the exceptions defined in the <code>throws</code> clause of an <code>ejbFind</code> method of the entity bean class must be included in the <code>throws</code> clause of the matching find method of the local home interface.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of a finder method must include the <code>jakarta.ejb.FinderException</code>.</p>
</div>
<div class="paragraph">
<p>Home methods can have arbitrary names, provided that they do not clash with create, find, and remove method names.
The matching <code>ejbHome</code> method specified in the entity bean class must have the same number and types of arguments and must return the same type as the home method as specified in the local home interface of the bean.</p>
</div>
<div class="paragraph">
<p>The <code>throws</code> clause of any method on the entity bean’s local home interface must not include the <code>java.rmi.RemoteException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="a3011"><a class="anchor" href="#a3011"></a>6.2.12. Entity Bean’s Primary Key Class</h4>
<div class="paragraph">
<p>The Bean Provider must specify a primary key class in the deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The primary key type must be a legal Value Type in RMI-IIOP.</p>
</div>
<div class="paragraph">
<p>The class must provide suitable implementation of the <code>hashCode()</code> and <code>equals(Object other)</code> methods to simplify the management of the primary keys by client code.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-responsibilities-of-the-container-provider-2"><a class="anchor" href="#the-responsibilities-of-the-container-provider-2"></a>6.3. The Responsibilities of the Container Provider</h3>
<div class="paragraph">
<p>This section describes the responsibilities of the Container Provider to support bean-managed persistence entity beans.
The Container Provider is responsible for providing the deployment tools, and for managing entity bean instances at runtime.</p>
</div>
<div class="paragraph">
<p><em>Because the Enterprise Beans specification does not define the API between deployment tools and the container, we assume that the
deployment tools are provided by the Container Provider.
Alternatively, the deployment tools may be provided by a different vendor who uses the container vendor’s specific API.</em></p>
</div>
<div class="sect3">
<h4 id="generation-of-implementation-classes-2"><a class="anchor" href="#generation-of-implementation-classes-2"></a>6.3.1. Generation of Implementation Classes</h4>
<div class="paragraph">
<p>The deployment tools provided by the Container Provider are responsible for the generation of additional classes when the entity bean is deployed.
The tools obtain the information that they need for generation of the additional classes by introspecting the classes and interfaces provided by the entity Bean Provider and by examining the entity bean’s deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The deployment tools must generate the following classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A class that implements the entity bean’s remote home interface (i.e., the entity EJBHome class).</p>
</li>
<li>
<p>A class that implements the entity bean’s remote interface (i.e., the entity EJBObject class).</p>
</li>
<li>
<p>A class that implements the entity bean’s local home interface (i.e., the entity EJBLocalHome class).</p>
</li>
<li>
<p>A class that implements the entity bean’s local interface (i.e., the entity EJBLocalObject class).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The deployment tools may also generate a class that mixes some container-specific code with the entity bean class.
The code may, for example, help the container to manage the entity bean instances at runtime.
Tools can use subclassing, delegation, and code generation.</p>
</div>
<div class="paragraph">
<p>The deployment tools may also allow generation of additional code that wraps the business methods and that is used to customize the business logic for an existing operational environment.
For example, a wrapper for a <code>debit</code> function on the <code>Account</code> bean may check that the debited amount does not exceed a certain limit, or perform security checking that is specific to the operational environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejbhome-class-2"><a class="anchor" href="#entity-ejbhome-class-2"></a>6.3.2. Entity EJBHome Class</h4>
<div class="paragraph">
<p>The entity EJBHome class, which is generated by deployment tools, implements the entity bean’s remote home interface.
This class implements the methods of the <code>jakarta.ejb.EJBHome</code> interface, and the type-specific create, finder, and home methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>create&lt;METHOD&gt;</code> method invokes a matching <code>ejbCreate&lt;METHOD&gt;</code> method, followed by the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method, passing the <code>create&lt;METHOD&gt;</code> parameters to these matching methods.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> methods defined in the <code>jakarta.ejb.EJBHome</code> interface must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>find&lt;METHOD&gt;</code> method invokes a matching <code>ejbFind&lt;METHOD&gt;</code> method.
The implementation of the <code>find&lt;METHOD&gt;</code> method must create an entity object reference for the primary key returned from the <code>ejbFind&lt;METHOD&gt;</code> and return the entity object reference (i.e., EJBObject) to the client.
If the <code>ejbFind&lt;METHOD&gt;</code> method returns a collection of primary keys, the implementation of the <code>find&lt;METHOD&gt;</code> method must create a collection of entity object references for the primary keys and return the collection to the client.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>&lt;METHOD&gt;</code> home method invokes a matching <code>ejbHome&lt;METHOD&gt;</code> method (in which the first character of <code>&lt;METHOD&gt;</code> is uppercased in the name of the <code>ejbHome&lt;METHOD&gt;</code> method), passing the <code>&lt;METHOD&gt;</code> parameters to the matching method.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejbobject-class-2"><a class="anchor" href="#entity-ejbobject-class-2"></a>6.3.3. Entity EJBObject Class</h4>
<div class="paragraph">
<p>The entity EJBObject class, which is generated by deployment tools, implements the entity bean’s remote interface.
It implements the methods of the <code>jakarta.ejb.EJBObject</code> interface and the business methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> method (defined in the <code>jakarta.ejb.EJBObject</code> interface) must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each business method must activate an instance (if an instance is not already in the ready state) and invoke the matching business method on the instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejblocalhome-class-2"><a class="anchor" href="#entity-ejblocalhome-class-2"></a>6.3.4. Entity EJBLocalHome Class</h4>
<div class="paragraph">
<p>The entity EJBLocalHome class, which is generated by deployment tools, implements the entity bean’s local home interface.
This class implements the methods of the <code>jakarta.ejb.EJBLocalHome</code> interface, and the type-specific create, finder, and home methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>create&lt;METHOD&gt;</code> method invokes a matching <code>ejbCreate&lt;METHOD&gt;</code> method, followed by the matching <code>ejbPostCreate&lt;METHOD&gt;</code> method, passing the <code>create&lt;METHOD&gt;</code> parameters to these matching methods.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> method defined in the <code>jakarta.ejb.EJBLocalHome</code> interface must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>find&lt;METHOD&gt;</code> method invokes a matching <code>ejbFind&lt;METHOD&gt;</code> method.
The implementation of the <code>find&lt;METHOD&gt;</code> method must create an entity object reference for the primary key returned from the <code>ejbFind&lt;METHOD&gt;</code> and return the entity object reference (i.e., EJBLocalObject) to the client.
If the <code>ejbFind&lt;METHOD&gt;</code> method returns a collection of primary keys, the implementation of the <code>find&lt;METHOD&gt;</code> method must create a collection of entity object references for the primary keys and return the collection to the client.</p>
</div>
<div class="paragraph">
<p>The implementation of each <code>&lt;METHOD&gt;</code> home method invokes a matching <code>ejbHome&lt;METHOD&gt;</code> method (in which the first character of <code>&lt;METHOD&gt;</code> is uppercased in the name of the <code>ejbHome&lt;METHOD&gt;</code> method), passing the <code>&lt;METHOD&gt;</code> parameters to the matching method.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-ejblocalobject-class-2"><a class="anchor" href="#entity-ejblocalobject-class-2"></a>6.3.5. Entity EJBLocalObject Class</h4>
<div class="paragraph">
<p>The entity EJBLocalObject class, which is generated by deployment tools, implements the entity bean’s local interface.
It implements the methods of the <code>jakarta.ejb.EJBLocalObject</code> interface and the business methods specific to the entity bean.</p>
</div>
<div class="paragraph">
<p>The implementation of the <code>remove</code> method (defined in the <code>jakarta.ejb.EJBLocalObject</code> interface) must activate an instance (if an instance is not already in the ready state) and invoke the <code>ejbRemove</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The implementation of each business method must activate an instance (if an instance is not already in the ready state) and invoke the matching business method on the instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="handle-class-2"><a class="anchor" href="#handle-class-2"></a>6.3.6. Handle Class</h4>
<div class="paragraph">
<p>The deployment tools are responsible for implementing the handle class for the entity bean.
The handle class must be serializable by the Java Serialization protocol.</p>
</div>
<div class="paragraph">
<p>As the handle class is not entity-bean specific, the container may, but is not required to, use a single class for all deployed entity beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="home-handle-class-2"><a class="anchor" href="#home-handle-class-2"></a>6.3.7. Home Handle Class</h4>
<div class="paragraph">
<p>The deployment tools responsible for implementing the home handle class for the entity bean.
The handle class must be serializable by the Java Serialization protocol.</p>
</div>
<div class="paragraph">
<p>Because the home handle class is not entity-bean specific, the container may, but is not required to, use a single class for the home handles of all deployed entity beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="metadata-class-2"><a class="anchor" href="#metadata-class-2"></a>6.3.8. Metadata Class</h4>
<div class="paragraph">
<p>The deployment tools are responsible for implementing the class that provides metadata information to the remote client view contract. The class must be a valid RMI-IIOP Value Type, and must implement the <code>jakarta.ejb.EJBMetaData</code> interface.</p>
</div>
<div class="paragraph">
<p>Because the metadata class is not entity-bean specific, the container may, but is not required to, use a single class for all deployed enterprise beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="instances-re-entrance-2"><a class="anchor" href="#instances-re-entrance-2"></a>6.3.9. Instance’s Re-entrance</h4>
<div class="paragraph">
<p>The container runtime must enforce the rules defined in <a href="#a2872">Non-reentrant and Re-entrant Instances</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="transaction-scoping-security-exceptions-2"><a class="anchor" href="#transaction-scoping-security-exceptions-2"></a>6.3.10. Transaction Scoping, Security, Exceptions</h4>
<div class="paragraph">
<p>The container runtime must follow the rules on transaction scoping and exception handling described in <a href="#a3185">Support for Transactions</a> and <a href="#a3210">Exception Handling</a>.
The container runtime must follow the rules on security checking described in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Chapter &#8220;<em>Security Management</em>&#8221;.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-of-object-references-2"><a class="anchor" href="#implementation-of-object-references-2"></a>6.3.11. Implementation of Object References</h4>
<div class="paragraph">
<p>The container should implement the distribution protocol between the client and the container such that the object references of the remote home and remote interfaces used by entity bean clients are usable for a long period of time.
Ideally, a client should be able to use an object reference across a server crash and restart.
An object reference should become invalid only when the entity object has been removed, or after a reconfiguration of the server environment (for example, when the entity bean is moved to a different Enterprise Beans server or container).</p>
</div>
<div class="paragraph">
<p><em>The motivation for this is to simplify the programming model for the entity bean client.
While the client code needs to have a recovery handler for the system exceptions thrown from the individual method invocations on the home and remote interface, the client should not be forced to re-obtain the object references.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="entitycontext-2"><a class="anchor" href="#entitycontext-2"></a>6.3.12. EntityContext</h4>
<div class="paragraph">
<p>The container must implement the <code>EntityContext.getEJBObject</code> method such that the bean instance can use the Java language cast to convert the returned value to the entity bean’s remote interface type.
Specifically, the bean instance does not have to use the <code>PortableRemoteObject.narrow</code> method for the type conversion.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a3071"><a class="anchor" href="#a3071"></a>7. Enterprise Beans 1.1 Entity Bean Component Contract for Container-Managed Persistence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter specifies the Enterprise Beans 1.1 entity bean component contract for container-managed persistence.</p>
</div>
<div class="sect2">
<h3 id="enterprise-beans-1-1-entity-beans-with-container-managed-persistence"><a class="anchor" href="#enterprise-beans-1-1-entity-beans-with-container-managed-persistence"></a>7.1. Enterprise Beans 1.1 Entity Beans with Container-Managed Persistence</h3>
<div class="paragraph">
<p><a href="#a2456">Enterprise Beans 2.1 Entity Bean Component Contract for Bean-Managed Persistence</a> describes the component contract for entity beans with bean-managed persistence.
The contract for an Enterprise Beans 1.1 entity bean with container-managed persistence is the same as the contract for an entity bean with bean-managed persistence as described in <a href="#a2456">Enterprise Beans 2.1 Entity Bean Component Contract for Bean-Managed Persistence</a>, except for the differences described in this chapter.</p>
</div>
<div class="paragraph">
<p><em>An Enterprise Beans 1.1 entity bean with container-managed persistence cannot have a local interface or local home interface.
Use of the local interfaces of other enterprise beans is not supported for an Enterprise Beans 1.1 entity bean with container-managed persistence.</em></p>
</div>
<div class="paragraph">
<p><em>Use of the Enterprise Beans Timer Service is not supported for an Enterprise Beans 1.1 entity bean with container-managed persistence.
An Enterprise Beans 1.1 entity bean with container-managed persistence should not implement the <code>jakarta.ejb.TimedObject</code> interface.
Use of dependency injection, interceptors, and any Java language metadata annotations is not supported for Enterprise Beans 1.1 entity beans.</em></p>
</div>
<div class="sect3">
<h4 id="container-managed-fields-2"><a class="anchor" href="#container-managed-fields-2"></a>7.1.1. Container-Managed Fields</h4>
<div class="paragraph">
<p>An Enterprise Beans 1.1 entity bean with container-managed persistence relies on the Container Provider’s tools to generate methods that perform data access on behalf of the entity bean instances.
The generated methods transfer data between the entity bean instance’s variables and the underlying resource manager at the times defined by the Enterprise Beans specification.
The generated methods also implement the creation, removal, and lookup of the entity object in the underlying database.</p>
</div>
<div class="paragraph">
<p>An entity bean with container-manager persistence must not code explicit data access—all data access must be deferred to the container.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans 1.1 entity Bean Provider is responsible for using the <code>cmp-field</code> elements of the deployment descriptor to declare the instance’s fields that the container must load and store at the defined times.
The fields must be defined in the entity bean class as <code>public</code>, and must not be defined as <code>transient</code>.</p>
</div>
<div class="paragraph">
<p>The container is responsible for transferring data between the entity bean’s instance variables and the underlying data source before or after the execution of the <code>ejbCreate</code>, <code>ejbRemove</code>, <code>ejbLoad</code>, and <code>ejbStore</code> methods, as described in the following subsections.
The container is also responsible for the implementation of the finder methods.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans 2.0 or later deployment descriptor for an Enterprise Beans 1.1 entity bean with container-managed persistence indicates that the entity bean uses container-managed persistence and that the value of its <code>cmp-version</code> element is <code>1.x</code>.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans 1.1 component contract does not architect support for relationships for entity beans with container-managed persistence.
The Enterprise Beans 2.0 and later specifications do not support the use of the <code>cmr-field</code>, <code>ejb-relation</code>, or <code>query</code> deployment descriptor elements or their subelements for Enterprise Beans 1.1 entity beans.</p>
</div>
<div class="paragraph">
<p>The following requirements ensure that an Enterprise Beans 1.1 entity bean with container-managed persistence can be deployed in any compliant container.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Bean Provider must ensure that the Java types assigned to the container-managed fields are restricted to the following: Java primitive types, Java serializable types, and references of enterprise beans’ remote or remote home interfaces.</p>
</li>
<li>
<p>The Container Provider may, but is not required to, use Java Serialization to store the container-managed fields in the database.
If the container chooses a different approach, the effect should be equivalent to that of Java Serialization.
The container must also be capable of persisting references to enterprise beans’ remote and remote home interfaces (for example, by storing their handle or primary key).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Although the above requirements allow the Bean Provider to specify almost any arbitrary type for the container-managed fields, we expect that in practice the Bean Provider of Enterprise Beans 1.1 entity beans with container-managed persistence will use relatively simple Java types, and that most containers will be able to map these simple Java types to columns in a database schema to externalize the entity state in the database, rather than use Java serialization.</em></p>
</div>
<div class="paragraph">
<p><em>If the Bean Provider expects that the container-managed fields will be mapped to database fields, he or she should provide mapping instructions to the Deployer.
The mapping between the instance’s container-managed fields and the schema of the underlying database manager will be then realized by the data access classes generated by the Container Provider’s tools.
Because entity beans are typically coarse-grained objects, the content of the container-managed fields may be stored in multiple rows, possibly spread across multiple database tables.
These mapping techniques are beyond the scope of the Enterprise Beans specification, and do not have to be supported by an Enterprise Beans compliant container.
(The container may simply use the Java serialization protocol in all cases).</em></p>
</div>
</div>
<div class="sect3">
<h4 id="ejbcreate-ejbpostcreate"><a class="anchor" href="#ejbcreate-ejbpostcreate"></a>7.1.2. ejbCreate, ejbPostCreate</h4>
<div class="paragraph">
<p>With bean-managed persistence, the entity Bean Provider is responsible for writing the code that inserts a record into the database in the <code>ejbCreate</code> methods.
However, with container-managed persistence, the container performs the database insert after the <code>ejbCreate</code> method completes.</p>
</div>
<div class="paragraph">
<p>The container must ensure that the values of the container-managed fields are set to the Java language defaults (e.g. 0 for integer, <code>null</code> for pointers) prior to invoking an <code>ejbCreate</code> method on an instance.</p>
</div>
<div class="paragraph">
<p>The Enterprise Beans 1.1 entity Bean Provider’s responsibility is to initialize the container-managed fields in the <code>ejbCreate</code> methods from the input arguments such that when an <code>ejbCreate</code> method returns, the container can extract the container-managed fields from the instance and insert them into the database.</p>
</div>
<div class="paragraph">
<p>The <code>ejbCreate</code> methods must be defined to return the primary key class type.
The implementation of the <code>ejbCreate</code> methods should be coded to return a <code>null</code>.
The returned value is ignored by the container.</p>
</div>
<div class="paragraph">
<p><em>Note: The above requirement is to allow the creation of an entity bean with bean-managed persistence by subclassing an Enterprise Beans 1.1 entity bean with container-managed persistence.
The Java language rules for overriding methods in subclasses requires the signatures of the <code>ejbCreate</code> methods in the subclass and the superclass be the same.</em></p>
</div>
<div class="paragraph">
<p>The container is responsible for creating the entity object’s representation in the underlying database, extracting the primary key fields of the newly created entity object representation in the database, and for creating an entity EJBObject reference for the newly created entity object.
The container must establish the primary key before it invokes the <code>ejbPostCreate</code> method.
The container may create the representation of the entity in the database immediately after <code>ejbCreate</code> returns, or it can defer it to a later time (for example to the time after the matching <code>ejbPostCreate</code> has been called, or to the end of the transaction).</p>
</div>
<div class="paragraph">
<p>The container then invokes the matching <code>ejbPostCreate</code> method on the instance.
The instance can discover the primary key by calling the <code>getPrimaryKey</code> method on its entity context object.</p>
</div>
<div class="paragraph">
<p>The container must invoke <code>ejbCreate</code>, perform the database insert operation, and invoke <code>ejbPostCreate</code> in the transaction context determined by the transaction attribute of the matching <code>create</code> method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
<div class="paragraph">
<p>The container throws the <code>DuplicateKeyException</code> if the newly created entity object would have the same primary key as one of the existing entity objects within the same home.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbremove"><a class="anchor" href="#ejbremove"></a>7.1.3. ejbRemove</h4>
<div class="paragraph">
<p>The container invokes the <code>ejbRemove</code> method on an entity bean instance with container-managed persistence in response to a client-invoked remove operation on the entity bean’s remote home or remote interface.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider can use the <code>ejbRemove</code> method to implement any actions that must be done before the entity object’s representation is removed from the database.</p>
</div>
<div class="paragraph">
<p>The container synchronizes the instance’s state before it invokes the <code>ejbRemove</code> method.
This means that the state of the instance variables at the beginning of the <code>ejbRemove</code> method is the same as it would be at the beginning of a business method.</p>
</div>
<div class="paragraph">
<p>After <code>ejbRemove</code> returns, the container removes the entity object’s representation from the database.</p>
</div>
<div class="paragraph">
<p>The container must perform <code>ejbRemove</code> and the database delete operation in the transaction context determined by the transaction attribute of the invoked <code>remove</code> method, as described in Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Subsection &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221;.</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbload"><a class="anchor" href="#ejbload"></a>7.1.4. ejbLoad</h4>
<div class="paragraph">
<p>When the container needs to synchronize the state of an enterprise bean instance with the entity object’s state in the database, the container reads the entity object’s state from the database into the container-managed fields and then it invokes the <code>ejbLoad</code> method on the instance.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider can rely on the container’s having loaded the container-managed fields from the database just before the container invokes the <code>ejbLoad</code> method.
The entity bean can use the <code>ejbLoad</code> method, for instance, to perform some computation on the values of the fields that were read by the container (for example, uncompressing text fields).</p>
</div>
</div>
<div class="sect3">
<h4 id="ejbstore"><a class="anchor" href="#ejbstore"></a>7.1.5. ejbStore</h4>
<div class="paragraph">
<p>When the container needs to synchronize the state of the entity object in the database with the state of the enterprise bean instance, the container first calls the <code>ejbStore</code> method on the instance, and then it extracts the container-managed fields and writes them to the database.</p>
</div>
<div class="paragraph">
<p>The entity Bean Provider should use the <code>ejbStore</code> method to set up the values of the container-managed fields just before the container writes them to the database.
For example, the <code>ejbStore</code> method may perform compression of text before the text is stored in the database.</p>
</div>
</div>
<div class="sect3">
<h4 id="finder-hethods"><a class="anchor" href="#finder-hethods"></a>7.1.6. Finder Hethods</h4>
<div class="paragraph">
<p>The entity Bean Provider does not write the finder (<code>ejbFind&lt;METHOD&gt;</code>) methods.</p>
</div>
<div class="paragraph">
<p>The finder methods are generated at the entity bean deployment time using the Container Provider’s tools.
The tools can, for example, create a subclass of the entity bean class that implements the <code>ejbFind&lt;METHOD&gt;</code> methods, or the tools can generate the implementation of the finder methods directly in the class that implements the entity bean’s remote home interface.</p>
</div>
<div class="paragraph">
<p>Note that the <code>ejbFind&lt;METHOD&gt;</code> names and parameter signatures of Enterprise Beans 1.1 entity beans do not provide the container tools with sufficient information for automatically generating the implementation of the finder methods for methods other than <code>ejbFindByPrimaryKey</code>.
Therefore, the Bean Provider is responsible for providing a description of each finder method.
The entity bean Deployer uses container tools to generate the implementation of the finder methods based in the description supplied by the Bean Provider.
The Enterprise Beans 1.1 component contract for container-managed persistence does not specify the format of the finder method description.</p>
</div>
</div>
<div class="sect3">
<h4 id="home-methods-3"><a class="anchor" href="#home-methods-3"></a>7.1.7. Home Methods</h4>
<div class="paragraph">
<p>The Enterprise Beans 1.1 entity bean contract does not support <code>ejbHome</code> methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="create-methods-3"><a class="anchor" href="#create-methods-3"></a>7.1.8. Create Methods</h4>
<div class="paragraph">
<p>The Enterprise Beans 1.1 entity bean contract does not support <code>create&lt;METHOD&gt;</code> methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="primary-key-type"><a class="anchor" href="#primary-key-type"></a>7.1.9. Primary Key Type</h4>
<div class="paragraph">
<p>The container must be able to manipulate the primary key type.
Therefore, the primary key type for an entity bean with container-managed persistence must follow the rules in this subsection, in addition to those specified in <a href="#a3011">Entity Bean’s Primary Key Class</a>.</p>
</div>
<div class="paragraph">
<p>There are two ways to specify a primary key class for an entity bean with container-managed persistence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Primary key that maps to a single field in the entity bean class.</p>
</li>
<li>
<p>Primary key that maps to multiple fields in the entity bean class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>The second method is necessary for implementing compound keys, and the first method is convenient for single-field keys.
Without the first method, simple types such as <code>String</code> would have to be wrapped in a user-defined class.</em></p>
</div>
<div class="sect4">
<h5 id="primary-key-that-maps-to-a-single-field-in-the-entity-bean-class-2"><a class="anchor" href="#primary-key-that-maps-to-a-single-field-in-the-entity-bean-class-2"></a>7.1.9.1. Primary Key that Maps to a Single Field in the Entity Bean Class</h5>
<div class="paragraph">
<p>The Bean Provider uses the <code>primkey-field</code> element of the deployment descriptor to specify the container-managed field of the entity bean class that contains the primary key.
The field’s type must be the primary key type.</p>
</div>
</div>
<div class="sect4">
<h5 id="primary-key-that-maps-to-multiple-fields-in-the-entity-bean-class-2"><a class="anchor" href="#primary-key-that-maps-to-multiple-fields-in-the-entity-bean-class-2"></a>7.1.9.2. Primary Key that Maps to Multiple Fields in the Entity Bean Class</h5>
<div class="paragraph">
<p>The primary key class must be <code>public</code>, and must have a <code>public</code> constructor with no parameters.</p>
</div>
<div class="paragraph">
<p>All fields in the primary key class must be declared as <code>public</code>.</p>
</div>
<div class="paragraph">
<p>The names of the fields in the primary key class must be a subset of the names of the container-managed fields.
(This allows the container to extract the primary key fields from an instance’s container-managed fields, and vice versa.)</p>
</div>
</div>
<div class="sect4">
<h5 id="special-case-unknown-primary-key-class"><a class="anchor" href="#special-case-unknown-primary-key-class"></a>7.1.9.3. Special Case: Unknown Primary Key Class</h5>
<div class="paragraph">
<p>In special situations, the entity Bean Provider may choose not to specify the primary key class for an entity bean with container-managed persistence.
This case usually happens when the entity bean does not have a natural primary key, and the Bean Provider wants to allow the Deployer to select the primary key fields at deployment time.
The entity bean’s primary key type will usually be derived from the primary key type used by the underlying database system that stores the entity objects.
The primary key used by the database system may not be known to the Bean Provider.</p>
</div>
<div class="paragraph">
<p>When defining the primary key for the enterprise bean, the Deployer may sometimes need to subclass the entity bean class to add additional container-managed fields (this typically happens for entity beans that do not have a natural primary key, and the primary keys are system-generated by the underlying database system that stores the entity objects).</p>
</div>
<div class="paragraph">
<p>In this special case, the type of the argument of the <code>findByPrimaryKey</code> method must be declared as <code>java.lang.Object</code>, and the return value of <code>ejbCreate</code> must be declared as <code>java.lang.Object</code>.
The Bean Provider must specify the primary key class in the deployment descriptor as of the type <code>java.lang.Object</code>.</p>
</div>
<div class="paragraph">
<p><em>The primary key class is specified at deployment time in the situations when the Bean Provider develops an entity bean that is intended to be used with multiple back-ends that provide persistence, and when these multiple back-ends require different primary key structures.</em></p>
</div>
<div class="paragraph">
<p><em>Use of entity beans with a deferred primary key type specification limits the client application programming model, because the clients written prior to deployment of the entity bean may not use, in general, the methods that rely on the knowledge of the primary key type.</em></p>
</div>
<div class="paragraph">
<p><em>The implementation of the enterprise bean class methods must be done carefully.
For example, the methods should not depend on the type of the object returned from <code>EntityContext.getPrimaryKey</code>, because the return type is determined by the Deployer after the Enterprise Beans class has been written.</em></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a3185"><a class="anchor" href="#a3185"></a>8. Support for Transactions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-5"><a class="anchor" href="#overview-5"></a>8.1. Overview</h3>
<div class="paragraph">
<p>This chapter defines requirements for transaction support of entity beans in addition to the contracts specified in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> &#8220;<em>Chapter Support for Transactions</em>&#8221;.</p>
</div>
</div>
<div class="sect2">
<h3 id="bean-providers-responsibilities"><a class="anchor" href="#bean-providers-responsibilities"></a>8.2. Bean Provider’s Responsibilities</h3>
<div class="paragraph">
<p>This section defines the responsibilities of the Bean Provider for transaction demarcation in entity beans.
See the corresponding section in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> for the complete description of the Bean Provider responsibilities.</p>
</div>
<div class="sect3">
<h4 id="bean-managed-versus-container-managed-transaction-demarcation"><a class="anchor" href="#bean-managed-versus-container-managed-transaction-demarcation"></a>8.2.1. Bean-Managed Versus Container-Managed Transaction Demarcation</h4>
<div class="paragraph">
<p>An entity bean must always use container-managed transaction demarcation.
An entity bean must not be designated with bean-managed transaction demarcation.</p>
</div>
</div>
<div class="sect3">
<h4 id="isolation-levels"><a class="anchor" href="#isolation-levels"></a>8.2.2. Isolation Levels</h4>
<div class="paragraph">
<p>The isolation level describes the degree to which the access to a resource manager by a transaction is isolated from the access to the resource manager by other concurrently executing transactions.</p>
</div>
<div class="paragraph">
<p>The following are guidelines for managing isolation levels in entity beans:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Container Provider should insure that suitable isolation levels are provided to guarantee data consistency for entity beans.
Typically this means that an equivalent of a repeatable read or serializable isolation level should be available for applications that require a high degree of isolation.</p>
</li>
<li>
<p>For entity beans with container-managed persistence, transaction isolation is managed by the data access classes that are generated by the Container Provider’s tools.
The tools must ensure that the management of the isolation levels performed by the data access classes will not result in conflicting isolation level requests for a resource manager within a transaction.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="specification-of-the-transaction-attributes-for-a-beans-methods"><a class="anchor" href="#specification-of-the-transaction-attributes-for-a-beans-methods"></a>8.2.3. Specification of the Transaction Attributes for a Bean’s Methods</h4>
<div class="paragraph">
<p>The Bean Provider of an enterprise bean with container-managed transaction demarcation may specify the transaction attributes for the enterprise bean’s methods.</p>
</div>
<div class="paragraph">
<p>A transaction attribute is a value associated with a method of an entity bean’s home or component interface.</p>
</div>
<div class="paragraph">
<p>The transaction attributes are specified for the methods defined in the bean’s component interface and all the direct and indirect superinterfaces of the component interface, excluding the <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getHandle</code>, <code>getPrimaryKey</code>, and <code>isIdentical</code> methods; for the methods defined in the bean’s home interface and all the direct and indirect superinterfaces of the home interface, excluding the <code>getEJBMetaData</code> and <code>getHomeHandle</code> methods specific to the remote home interface; and for the timeout callback methods, if any.
<sup class="footnote" id="_footnote_a3394">[<a id="_footnoteref_30" class="footnote" href="#_footnotedef_30" title="View footnote.">30</a>]</sup></p>
</div>
<div class="paragraph">
<p>For entity beans that use container-managed persistence, only the <code>Required</code>, <code>RequiresNew</code>, or <code>Mandatory</code> deployment descriptor transaction attribute values should be used for the methods defined in the bean’s component interface and all the direct and indirect superinterfaces of the component interface, excluding the <code>getEJBHome</code>, <code>getEJBLocalHome</code>, <code>getHandle</code>, <code>getPrimaryKey</code>, and <code>isIdentical</code> methods; and for the methods defined in the bean’s home interface and all the direct and indirect superinterfaces of the home interface, excluding the <code>getEJBMetaData</code> and <code>getHomeHandle</code> methods specific to the remote home interface.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>The Bean Provider and Application Assembler must exercise caution when using the <code>RequiresNew</code> transaction attributes with the navigation of container-managed relationships.
If higher levels of isolation are used, navigating a container-managed relationship in a new transaction context may result in deadlock.</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Containers may <em>optionally</em> support the use of the <code>NotSupported</code>, <code>Supports</code>, and <code>Never</code> transaction attributes for the methods of entity beans with container-managed persistence.
However, entity beans with container-managed persistence that use these transaction attributes will not be portable.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>Containers may optionally support the use of the <code>NotSupported</code>, <code>Supports</code>, and <code>Never</code> transaction attributes for the methods of entity beans with container-managed persistence because the use of these transaction modes may be needed to make use of container-managed persistence with non-transactional data stores.
In general, however, the Bean Provider and Application Assembler should avoid use of the <code>NotSupported</code>, <code>Supports</code>, and <code>Never</code> transaction attribute values for the methods of entity beans with container-managed persistence because it may lead to inconsistent results or to the inconsistent and/or to the partial updating of persistent state and relationships in the event of concurrent use.</em></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="container-provider-responsibilities"><a class="anchor" href="#container-provider-responsibilities"></a>8.3. Container Provider Responsibilities</h3>
<div class="paragraph">
<p>This section defines the responsibilities of the Container Provider for transaction demarcation in entity beans. See the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> for the complete description of the Container Provider responsibilities.</p>
</div>
<div class="sect3">
<h4 id="container-managed-transaction-demarcation-for-entity-beans"><a class="anchor" href="#container-managed-transaction-demarcation-for-entity-beans"></a>8.3.1. Container-Managed Transaction Demarcation for Entity Beans</h4>
<div class="paragraph">
<p>The container is responsible for providing the transaction demarcation for the entity beans with bean-managed persistence and container-managed persistence.</p>
</div>
<div class="paragraph">
<p>The container must demarcate transactions as specified by the transaction attribute values specified in the deployment descriptor. See subsections of &#8220;<em>Container-Managed Transaction Demarcation for Business Methods</em>&#8221; of the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> for the available options and detailed description of the responsibilities of the Container Provider.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a3210"><a class="anchor" href="#a3210"></a>9. Exception Handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter defines requirements for exception handling of entity beans in addition to the contracts specified in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> Chapter &#8220;<em>Exception Handling</em>&#8221;.</p>
</div>
<div class="sect2">
<h3 id="application-exceptions"><a class="anchor" href="#application-exceptions"></a>9.1. Application Exceptions</h3>
<div class="paragraph">
<p>The <code>jakarta.ejb.CreateException</code>, <code>jakarta.ejb.RemoveException</code>, <code>jakarta.ejb.FinderException</code>, and subclasses thereof are application exceptions used to report errors to the client from the <code>create</code>, <code>remove</code>, and <code>finder</code> methods of the EJBHome and/or EJBLocalHome interfaces of entity bean components (see <a href="#a1524">Standard Application Exceptions for Entities</a> and <a href="#a2806">Standard Application Exceptions for Entities</a>).
See rules for the application exceptions defined in the corresponding section of the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="bean-providers-responsibilities-2"><a class="anchor" href="#bean-providers-responsibilities-2"></a>9.2. Bean Provider’s Responsibilities</h3>
<div class="paragraph">
<p>This section defines the responsibilities of the Bean Provider for exception handling of entity beans in addition to the Bean Provider’s responsibilities specified in the corresponding section in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>.</p>
</div>
<div class="sect3">
<h4 id="application-exceptions-2"><a class="anchor" href="#application-exceptions-2"></a>9.2.1. Application Exceptions</h4>
<div class="paragraph">
<p>The Bean Provider is responsible for using the standard Enterprise Beans application exceptions (<code>jakarta.ejb.CreateException</code>, <code>jakarta.ejb.RemoveException</code>, <code>jakarta.ejb.FinderException</code>, and subclasses thereof) for entity beans as described in <a href="#a1524">Standard Application Exceptions for Entities</a> and <a href="#a2806">Standard Application Exceptions for Entities</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="a3221"><a class="anchor" href="#a3221"></a>9.2.2. System Exceptions</h4>
<div class="paragraph">
<p>The Bean Provider should handle various system-level exceptions and errors that an entity bean instance may encounter during the execution of a business method (e.g. <code>ejbLoad</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="jakarta-ejb-nosuchentityexception"><a class="anchor" href="#jakarta-ejb-nosuchentityexception"></a>9.2.3. jakarta.ejb.NoSuchEntityException</h4>
<div class="paragraph">
<p>The <code>NoSuchEntityException</code> is a subclass of <code>EJBException</code>.
It should be thrown by the entity bean class methods to indicate that the underlying entity has been removed from the database.</p>
</div>
<div class="paragraph">
<p>A bean-managed persistence entity bean class typically throws this exception from the <code>ejbLoad</code> and <code>ejbStore</code> methods, and from the methods that implement the business methods defined in the component interface.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a3227"><a class="anchor" href="#a3227"></a>9.3. Container Provider Responsibilities</h3>
<div class="paragraph">
<p>This section defines the responsibilities of the Container Provider for exception handling of entity beans in addition to the Container Provider’s responsibilities specified in the corresponding section in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>.</p>
</div>
<div class="sect3">
<h4 id="a3229"><a class="anchor" href="#a3229"></a>9.3.1. Exceptions from Method Invoked via Entity Bean’s Client View</h4>
<div class="paragraph">
<p>The following entity bean methods: <code>ejbCreate&lt;METHOD&gt;</code>, <code>ejbPostCreate&lt;METHOD&gt;</code>, <code>ejbRemove</code>, <code>ejbHome&lt;METHOD&gt;</code>, and <code>ejbFind&lt;METHOD&gt;</code> are considered to be business methods in this context.</p>
</div>
<div class="paragraph">
<p>Rules for exception handling of these methods are specified in the Table &#8220;<em>Handling of Exceptions Thrown by Methods of Web Service Client View or Enterprise Beans 2.1 Client View of a Bean with Container-Managed Transaction Demarcation</em>&#8221; of the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="a3232"><a class="anchor" href="#a3232"></a>9.3.2. Exceptions from Other Container-invoked Callbacks</h4>
<div class="paragraph">
<p>This subsection applies to the <code>ejbActivate</code>, <code>ejbLoad</code>, <code>ejbPassivate</code>, <code>ejbStore</code>, <code>setEntityContext</code>, and <code>unsetEntityContext</code> container-invoked callbacks methods of the EntityBean interface.</p>
</div>
<div class="paragraph">
<p>The container must handle all exceptions or errors from these methods as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Log the exception or error to bring the problem to the attention of the System Administrator.</p>
</li>
<li>
<p>If the instance is in a transaction, mark the transaction for rollback.</p>
</li>
<li>
<p>Discard the instance (i.e., the container must not invoke any business methods or container callbacks on the instance).</p>
</li>
<li>
<p>If the exception or error happened during the processing of a client invoked method, throw the <code>jakarta.ejb.EJBException</code>.
<sup class="footnote" id="_footnote_a3395">[<a id="_footnoteref_31" class="footnote" href="#_footnotedef_31" title="View footnote.">31</a>]</sup>
If the Enterprise Beans 2.1 client view or web service client view is used, throw the <code>java.rmi.RemoteException</code> to the client if the client is a remote client or throw the <code>jakarta.ejb.EJBException</code> to the client if the client is a local client.
If the instance executed in the client’s transaction, the container should throw the <code>jakarta.ejb.EJBTransactionRolledbackException</code>.
<sup class="footnote" id="_footnote_a3396">[<a id="_footnoteref_32" class="footnote" href="#_footnotedef_32" title="View footnote.">32</a>]</sup>
If the Enterprise Beans 2.1 client view or web service client view is used, the container should throw the <code>jakarta.transaction.TransactionRolledbackException</code> to a remote client or the <code>jakarta.ejb.TransactionRolledbackLocalException</code> to a local client, because it provides more information to the client.
(The client knows that it is fruitless to continue the transaction.)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="jakarta-ejb-nosuchentityexception-2"><a class="anchor" href="#jakarta-ejb-nosuchentityexception-2"></a>9.3.3. jakarta.ejb.NoSuchEntityException</h4>
<div class="paragraph">
<p>The <code>NoSuchEntityException</code> is a subclass of <code>EJBException</code>.
If it is thrown by a method of an entity bean class, the container must handle the exception using the rules in <a href="#a3229">Exceptions from Method Invoked via Entity Bean’s Client View</a> and <a href="#a3232">Exceptions from Other Container-invoked Callbacks</a>.</p>
</div>
<div class="paragraph">
<p>To give the client a better indication of the cause of the error, the container should throw the <code>java.rmi.NoSuchObjectException</code> (which is a subclass of <code>java.rmi.RemoteException</code>) to a remote client, or the <code>jakarta.ejb.NoSuchObjectLocalException</code> to a local client.</p>
</div>
</div>
<div class="sect3">
<h4 id="non-existing-entity-object"><a class="anchor" href="#non-existing-entity-object"></a>9.3.4. Non-existing Entity Object</h4>
<div class="paragraph">
<p>If a client makes a call to an entity object that has been removed, the container should throw the <code>jakarta.ejb.NoSuchEJBException</code>.
<sup class="footnote" id="_footnote_a3397">[<a id="_footnoteref_33" class="footnote" href="#_footnotedef_33" title="View footnote.">33</a>]</sup>
If the Enterprise Beans 2.1 client view is used, the container should throw the <code>java.rmi.NoSuchObjectException</code> (which is a subclass of <code>java.rmi.RemoteException</code>) to a remote client, or the <code>jakarta.ejb.NoSuchObjectLocalException</code> to a local client.</p>
</div>
</div>
<div class="sect3">
<h4 id="support-for-deprecated-use-of-java-rmi-remoteexception"><a class="anchor" href="#support-for-deprecated-use-of-java-rmi-remoteexception"></a>9.3.5. Support for Deprecated Use of java.rmi.RemoteException</h4>
<div class="paragraph">
<p>The Enterprise Beans 1.0 specification allowed the business methods, <code>ejbCreate</code>, <code>ejbPostCreate</code>, <code>ejbFind&lt;METHOD&gt;</code>, <code>ejbRemove</code>, and the container-invoked callbacks (i.e., the methods defined in the <code>EntityBean</code> interface) implemented in the enterprise bean class to use the <code>java.rmi.RemoteException</code> to report non-application exceptions to the container.</p>
</div>
<div class="paragraph">
<p>See the corresponding section in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> for the rules on support of the deprecated use of <code>java.rmi.RemoteException</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clients-view-of-exceptions"><a class="anchor" href="#clients-view-of-exceptions"></a>9.4. Client’s View of Exceptions</h3>
<div class="paragraph">
<p>See the corresponding section in the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> for the client’s view of exceptions received from from enterprise beans and web service endpoints.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a3258"><a class="anchor" href="#a3258"></a>10. Timer Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter defines limitations of the Enterprise Beans container-managed timer service when used with Enterprise Beans 2.1 entity beans.</p>
</div>
<div class="sect2">
<h3 id="bean-providers-view-of-the-timer-service"><a class="anchor" href="#bean-providers-view-of-the-timer-service"></a>10.1. Bean Provider’s View of the Timer Service</h3>
<div class="paragraph">
<p>Timers can be created for Enterprise Beans 2.1 entity beans.
A timer that is created for the Enterprise Beans 2.1 entity bean is associated with the entity bean’s identity.</p>
</div>
<div class="paragraph">
<p>Use of the Enterprise Beans Timer Service is not supported for an Enterprise Beans 1.1 entity bean with container-managed persistence.</p>
</div>
<div class="sect3">
<h4 id="calendar-based-time-expressions"><a class="anchor" href="#calendar-based-time-expressions"></a>10.1.1. Calendar-Based Time Expressions</h4>
<div class="paragraph">
<p>Calendar based timers are not supported for entity beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="non-persistent-timers"><a class="anchor" href="#non-persistent-timers"></a>10.1.2. Non-persistent Timers</h4>
<div class="paragraph">
<p>Non-persistent timers are not supported for entity beans.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-timerservice-interface"><a class="anchor" href="#the-timerservice-interface"></a>10.1.3. The TimerService Interface</h4>
<div class="paragraph">
<p>For an Enterprise Beans 2.1 entity bean, the result of <code>getTimers</code> is a collection of those timers that are associated with the bean’s identity.</p>
</div>
</div>
<div class="sect3">
<h4 id="timer-expiration-and-timeout-callback-method"><a class="anchor" href="#timer-expiration-and-timeout-callback-method"></a>10.1.4. Timer Expiration and Timeout Callback Method</h4>
<div class="paragraph">
<p>If a timer for an Enterprise Beans 2.1 entity bean expires, and the bean has been passivated, the container must call the <code>ejbActivate</code> and <code>ejbLoad</code> methods on the entity bean class before calling the timeout callback method, as described in <a href="#a1279">Container’s View</a> and <a href="#a2553">Container’s View</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-bean-removal"><a class="anchor" href="#entity-bean-removal"></a>10.1.5. Entity Bean Removal</h4>
<div class="paragraph">
<p>If an entity bean is removed, the container must remove the timers for that bean.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a3273"><a class="anchor" href="#a3273"></a>11. Deployment Descriptor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter defines the Enterprise Beans deployment descriptor elements and the Bean Provider and the Application Assembler responsibilities corresponding to entity beans.
The rules defined in this chapter are in addition to the rules defined in the Chapter &#8220;<em>Deployment Descriptor</em>&#8221; of the Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>.</p>
</div>
<div class="paragraph">
<p>See Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a> for the complete XML Schema for the Enterprise Beans deployment descriptor.</p>
</div>
<div class="sect2">
<h3 id="bean-providers-responsibilities-3"><a class="anchor" href="#bean-providers-responsibilities-3"></a>11.1. Bean Provider’s Responsibilities</h3>
<div class="paragraph">
<p>The Bean Provider is responsible for providing the following structural information for each entity bean in the deployment descriptor.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Re-entrancy indication.</strong> The Bean Provider must specify whether an entity bean is re-entrant.</p>
</li>
<li>
<p><strong>Entity bean’s persistence management.</strong> If the enterprise bean is an entity bean, the Bean Provider must use the persistence-type element to declare whether persistence management is performed by the enterprise bean or by the container.</p>
</li>
<li>
<p><strong>Entity bean’s primary key class.</strong> If the enterprise bean is an entity bean, the Bean Provider specifies the fully-qualified name of the entity bean’s primary key class in the <code>prim-key-class</code> element. The Bean Provider must specify the primary key class for an entity with bean-managed persistence.</p>
</li>
<li>
<p><strong>Entity bean’s abstract schema name.</strong> If the enterprise bean is an entity bean with container-managed persistence and <code>cmp-version 2.x</code>, the Bean Provider must specify the abstract schema name of the entity bean using the <code>abstract-schema-name</code> element.</p>
</li>
<li>
<p><strong>Container-managed fields.</strong> If the enterprise bean is an entity bean with container-managed persistence, the Bean Provider must specify the container-managed fields using the cmp-field elements.</p>
</li>
<li>
<p><strong>Container-managed relationships.</strong> If the enterprise bean is an entity bean with container-managed persistence and <code>cmp-version 2.x</code>, the Bean Provider must specify the container-managed relationships of the entity bean using the relationships element.</p>
</li>
<li>
<p><strong>Finder and select queries.</strong> If the enterprise bean is an entity bean with container-managed persistence and <code>cmp-version 2.x</code>, the Bean Provider must use the <code>query</code> element to specify any Enterprise Beans QL finder or select query for the entity bean other than a query for the <code>findByPrimaryKey</code> method.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="application-assemblers-responsibility"><a class="anchor" href="#application-assemblers-responsibility"></a>11.2. Application Assembler’s Responsibility</h3>
<div class="paragraph">
<p>The Application Assembler may modify the following information that was specified by the Bean Provider:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Relationship names for Enterprise Beans 2.x entity beans.</strong> If multiple ejb-jar files use the same names for relationships and are merged into a single ejb-jar file, it is the responsibility of the Application Assembler to modify the relationship names defined in the <code>ejb-relation-name</code> elements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, the Application Assembler should never modify any of the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Enterprise bean’s abstract schema name.</strong> The Application Assembler should not change the enterprise bean’s name defined in the <code>abstract-schema-name</code> element since Enterprise Beans QL queries may depend on the content of this element.</p>
</li>
<li>
<p><strong>Relationship role source element.</strong> The Application Assembler should not change the value of an <code>ejb-name</code> element in the <code>relationship-role-source</code> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any of these elements must be modified by the Application Assembler in order to resolve name clashes during the merging of ejb-jar files, the Application Assembler must also modify all <code>ejb-ql</code> query strings that depend on the value of the modified element(s).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="packaging-restrictions"><a class="anchor" href="#packaging-restrictions"></a>12. Packaging Restrictions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="restrictions-2"><a class="anchor" href="#restrictions-2"></a>12.1. Restrictions</h3>
<div class="ulist">
<ul>
<li>
<p>Entity Beans are not supported within <code>.war</code> files.
These component types must only be packaged in a stand-alone ejb-jar file or an ejb-jar file packaged within an <code>.ear</code> file.</p>
</li>
<li>
<p>Entity Beans are not supported with the Enterprise Beans 3.2 Lite API (see Enterprise Beans Core Contracts and Requirements document <a href="#a3339">[2]</a>, Subsection &#8220;<em>Enterprise Beans 3.2 Lite</em>&#8221;).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a3321"><a class="anchor" href="#a3321"></a>Related Documents</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="a3323"></a>[1] Enterprise JavaBeans&#8482;, version 3.1.
<a href="https://jcp.org/en/jsr/detail?id=318" class="bare">https://jcp.org/en/jsr/detail?id=318</a>.</p>
</li>
<li>
<p><a id="a3339"></a>[2] Jakarta Enterprise Beans, Core Features 4.0
<a href="https://jakarta.ee/specifications/enterprise-beans/4.0/" class="bare">https://jakarta.ee/specifications/enterprise-beans/4.0/</a>.</p>
</li>
<li>
<p><a id="a3327"></a>[3] Java Remote Method Invocation (RMI).
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/" class="bare">https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/</a>.</p>
</li>
<li>
<p><a id="a3334"></a>[4] The Java Virtual Machine Specification.
<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/index.html" class="bare">https://docs.oracle.com/javase/specs/jvms/se8/html/index.html</a>.</p>
</li>
<li>
<p><a id="a3325"></a>[5] Jakarta Persistence 3.0.
<a href="https://jakarta.ee/specifications/persistence/3.0/" class="bare">https://jakarta.ee/specifications/persistence/3.0/</a>.</p>
</li>
<li>
<p><a id="a3335"></a>[6] JDBC&#8482; 4.3 API (JDBC specification).
<a href="https://jcp.org/en/jsr/detail?id=221" class="bare">https://jcp.org/en/jsr/detail?id=221</a>.</p>
</li>
<li>
<p><a id="a3331"></a>[7] Database Language SQL.
ANSI X3.135-1992 or ISO/IEC 9075:1992.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="revision-history"><a class="anchor" href="#revision-history"></a>13. Revision History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix lists the significant changes
that have been made to this document during the development of this
Specification.</p>
</div>
<div class="sect2">
<h3 id="early-draft"><a class="anchor" href="#early-draft"></a>13.1. Early Draft</h3>
<div class="paragraph">
<p>Created document from the EJB 3.2 Draft.</p>
</div>
</div>
<div class="sect2">
<h3 id="early-draft-2"><a class="anchor" href="#early-draft-2"></a>13.2. Early Draft 2</h3>
<div class="paragraph">
<p>Updated the expert group list.</p>
</div>
</div>
<div class="sect2">
<h3 id="public-draft"><a class="anchor" href="#public-draft"></a>13.3. Public Draft</h3>
<div class="paragraph">
<p>Removed Interceptors specification from the
list of the EJB 3.2 set of documents</p>
</div>
<div class="paragraph">
<p>Minor editorial changes</p>
</div>
<div class="paragraph">
<p>Updated related documents to their latest
versions where applicable</p>
</div>
<div class="paragraph">
<p>Replaced section number with the section
title when referencing EJB Core Contracts and Requirements document.</p>
</div>
<div class="paragraph">
<p>Removed text from
<a href="Ejb.html#a3185">See Support for Transactions</a> that is
exactly the same as in the EJB Core Contracts and Requirements document.
Added references to the corresponding sections with the complete rules.</p>
</div>
<div class="paragraph">
<p>Removed text from
<a href="Ejb.html#a3210">See Exception Handling</a> that is exactly the
same as in the EJB Core Contracts and Requirements document. Added
references to the corresponding sections with the complete rules.</p>
</div>
<div class="paragraph">
<p>Removed most of the text from
<a href="Ejb.html#a3253">See Support for Distributed
Interoperability</a> as it was an unnecessary duplication of the
corresponding chapter in the EJB Core Contracts and Requirements
document. Left only section “Mapping Objects Returned by Entity Bean
Finder Methods to IDL”</p>
</div>
<div class="paragraph">
<p>Removed chapters “Enterprise Bean
Environment” and “Security Management” as it was an unnecessary
duplication of the corresponding chapters in the EJB Core Contracts and
Requirements document.</p>
</div>
</div>
<div class="sect2">
<h3 id="proposed-final-draft"><a class="anchor" href="#proposed-final-draft"></a>13.4. Proposed Final Draft</h3>
<div class="paragraph">
<p>Minor editorial changes</p>
</div>
<div class="paragraph">
<p>Updated to the final versions of the related
documents</p>
</div>
<div class="paragraph">
<p>Changed the rule for optional feature support
for CMP/BMP beans and EJBQL to be that if any of the features is
supported, all these features must be supported</p>
</div>
</div>
<div class="sect2">
<h3 id="final-release-candidate"><a class="anchor" href="#final-release-candidate"></a>13.5. Final Release Candidate</h3>
<div class="paragraph">
<p>Editorial changes</p>
</div>
<div class="paragraph">
<p>Rearranged sections in the
<a href="Ejb.html#a3139">See Support for JAX-RPC Web Service
Endpoints</a></p>
</div>
</div>
<div class="sect2">
<h3 id="final-release"><a class="anchor" href="#final-release"></a>13.6. Final Release</h3>
<div class="paragraph">
<p>Minor editorial changes</p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. More literally, references are passed by value in the JVM: an argument variable of primitive type holds a value of that primitive type; an argument variable of a reference type hold a reference to the object. See <a href="#a3334">[4]</a>.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. The <code>findByPrimaryKey</code> method is mandatory for the remote home interface of all entity beans.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. The <code>findByPrimaryKey</code> method is mandatory for the local home interface of all Entity Beans.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. At this point it must appear to the application that the entity has been removed from the persistent store. If the container employs an optimistic caching strategy and defers the removal of the entity from the database (e.g., to the end of transaction), this must be invisible to the application.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. The relation names and the relationship role names are not used in the code provided by the Bean Provider.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. An entity bean has no <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods if it does not define any create methods in its home interface. Such an entity bean does not allow its clients to create new Enterprise Beans objects. The entity bean restricts the clients to accessing entities that were created through direct database inserts.
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. The above requirement is to allow the creation of an entity bean with bean-managed persistence by subclassing an entity bean with container-managed persistence.
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. Containers using optimistic caching strategies, for example, may rollback the transaction at a later point.
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. The ability to refresh the state of a read-only bean and the intervals at which such refresh occurs are vendor-specific.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. For example, an implementation might choose to ignore such updates or to disallow them.
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. The <code>findByPrimaryKey</code> method is mandatory for all entity beans.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. It is consistent with this specification to provide options for this refresh to be deferred or avoided in the case of read-only beans.
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. If the entity bean class does implement the component interface, care must be taken to avoid passing of this as a method argument or result. This potential error can be avoided by choosing not to implement the component interface in the entity bean class.
</div>
<div class="footnote" id="_footnotedef_14">
<a href="#_footnoteref_14">14</a>. Not currently used in Enterprise Beans QL; reserved for future use.
</div>
<div class="footnote" id="_footnotedef_15">
<a href="#_footnoteref_15">15</a>. Use of ejb-names in EJB QL is reserved for future use.
</div>
<div class="footnote" id="_footnotedef_16">
<a href="#_footnoteref_16">16</a>. Refer to <a href="#a3331">[7]</a> for a more precise characterization of these rules.
</div>
<div class="footnote" id="_footnotedef_17">
<a href="#_footnoteref_17">17</a>. The use of the reserved word OF is optional in this expression.
</div>
<div class="footnote" id="_footnotedef_18">
<a href="#_footnoteref_18">18</a>. These functions are a subset of the functions defined for JDBC 2.0 and later drivers, as described in Appendix D of the JDBC specification <a href="#a3335">[6]</a>.
</div>
<div class="footnote" id="_footnotedef_19">
<a href="#_footnoteref_19">19</a>. Containers and databases may not support the use of the optional, third argument of the LOCATE function. Portable applications should therefore avoid use of this argument.
</div>
<div class="footnote" id="_footnotedef_20">
<a href="#_footnoteref_20">20</a>. It is legal to specify DISTINCT with MAX or MIN, but it does not affect the result.
</div>
<div class="footnote" id="_footnotedef_21">
<a href="#_footnoteref_21">21</a>. An entity Bean has no <code>ejbCreate&lt;METHOD&gt;</code> and <code>ejbPostCreate&lt;METHOD&gt;</code> methods if it does not define any create methods in its home interface. Such an entity bean does not allow the clients to create new entity objects. The entity bean restricts the clients to accessing entities that were created through direct database inserts.
</div>
<div class="footnote" id="_footnotedef_22">
<a href="#_footnoteref_22">22</a>. The Enterprise Beans specification does not require the distributed flushing of state. The container in which the <code>ejbFind&lt;METHOD&gt;</code> method executes is not required to propagate the flush to a different container.
</div>
<div class="footnote" id="_footnotedef_23">
<a href="#_footnoteref_23">23</a>. The ability to refresh the state of a read-only bean and the intervals at which such refresh occurs are vendor-specific.
</div>
<div class="footnote" id="_footnotedef_24">
<a href="#_footnoteref_24">24</a>. For example, an implementation might choose to ignore such updates or to disallow them.
</div>
<div class="footnote" id="_footnotedef_25">
<a href="#_footnoteref_25">25</a>. This call may be omitted if the bean has been specified as read-only.
</div>
<div class="footnote" id="_footnotedef_26">
<a href="#_footnoteref_26">26</a>. This applies also to the Never and Supports attribute.
</div>
<div class="footnote" id="_footnotedef_27">
<a href="#_footnoteref_27">27</a>. This <code>ejbStore</code> call may be omitted if the bean has been specified as read-only.
</div>
<div class="footnote" id="_footnotedef_28">
<a href="#_footnoteref_28">28</a>. The finder will be also compatible with Java 2-based containers and clients.
</div>
<div class="footnote" id="_footnotedef_29">
<a href="#_footnoteref_29">29</a>. If the entity bean class does implement the component interface, care must be taken to avoid passing of this as a method argument or result. This potential error can be avoided by choosing not to implement the component interface in the entity bean class.
</div>
<div class="footnote" id="_footnotedef_30">
<a href="#_footnoteref_30">30</a>. Note that the deployment descriptor must be used to specify transaction attributes for entity bean methods if the transaction attribute is not <code>Required</code> (the default value)
</div>
<div class="footnote" id="_footnotedef_31">
<a href="#_footnoteref_31">31</a>. If the business interface is a remote business interface that extends <code>java.rmi.Remote</code>, the <code>java.rmi.RemoteException</code> is thrown to the client instead.
</div>
<div class="footnote" id="_footnotedef_32">
<a href="#_footnoteref_32">32</a>. If the business interface is a remote business interface that extends <code>java.rmi.Remote</code>, the <code>jakarta.transaction.TransactionRolledbackException</code> is thrown to the client instead.
</div>
<div class="footnote" id="_footnotedef_33">
<a href="#_footnoteref_33">33</a>. If the business interface is a remote business interface that extends <code>java.rmi.Remote</code>, the <code>java.rmi.NoSuchObjectException</code> is thrown to the client instead.
</div>
</div>
<div id="footer">
<div id="footer-text">
 4.0<br>
Last updated 2020-09-08 10:44:19 +0200
</div>
</div>
</body>
</html>