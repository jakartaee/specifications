<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Thu Mar 06 05:12:12 GMT 2025 -->
<title>OnMessage (Jakarta EE Web Profile API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-03-06">
<meta name="description" content="declaration: package: jakarta.websocket, annotation type: OnMessage">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><br>Jakarta EE Web Profile API v11.0.0</div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/OnMessage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a>&nbsp;|&nbsp;</li>
<li>Required</li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jakarta.websocket</a></div>
<h1 title="Annotation Interface OnMessage" class="title">Annotation Interface OnMessage</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#METHOD" title="class or interface in java.lang.annotation" class="external-link">METHOD</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">OnMessage</span></div>
<div class="block">This method level annotation can be used to make a Java method receive incoming web socket messages. Each websocket
 endpoint may only have one message handling method for each of the native websocket message formats: text, binary and
 pong. Methods using this annotation are allowed to have parameters of types described below, otherwise the container
 will generate an error at deployment time.
 <p>
 The allowed parameters are:
 <ol>
 <li>Exactly one of any of the following choices
 <ul>
 <li>if the method is handling text messages:
 <ul>
 <li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a> to receive the whole message</li>
 <li>Java primitive or class equivalent to receive the whole message converted to that type</li>
 <li>String and boolean pair to receive the message in parts</li>
 <li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Reader.html" title="class or interface in java.io" class="external-link"><code>Reader</code></a> to receive the whole message as a blocking stream</li>
 <li>any object parameter for which the endpoint has a text decoder (<a href="Decoder.Text.html" title="interface in jakarta.websocket"><code>Decoder.Text</code></a> or
 <a href="Decoder.TextStream.html" title="interface in jakarta.websocket"><code>Decoder.TextStream</code></a>).</li>
 </ul>
 </li>
 <li>if the method is handling binary messages:
 <ul>
 <li>byte[] or <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link"><code>ByteBuffer</code></a> to receive the whole message</li>
 <li>byte[] and boolean pair, or <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link"><code>ByteBuffer</code></a> and boolean pair to receive the message in parts</li>
 <li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html" title="class or interface in java.io" class="external-link"><code>InputStream</code></a> to receive the whole message as a blocking stream</li>
 <li>any object parameter for which the endpoint has a binary decoder (<a href="Decoder.Binary.html" title="interface in jakarta.websocket"><code>Decoder.Binary</code></a> or
 <a href="Decoder.BinaryStream.html" title="interface in jakarta.websocket"><code>Decoder.BinaryStream</code></a>).</li>
 </ul>
 </li>
 <li>if the method is handling pong messages:
 <ul>
 <li><a href="PongMessage.html" title="interface in jakarta.websocket"><code>PongMessage</code></a> for handling pong messages</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>and Zero to n String or Java primitive parameters annotated with the <code>jakarta.websocket.server.PathParam</code>
 annotation for server endpoints.</li>
 <li>and an optional <a href="Session.html" title="interface in jakarta.websocket"><code>Session</code></a> parameter</li>
 </ol>
 <p>
 The parameters may be listed in any order.

 <p>
 The method may have a non-void return type, in which case the web socket runtime must interpret this as a web socket
 message to return to the peer. The allowed data types for this return type, other than void, are String, ByteBuffer,
 byte[], any Java primitive or class equivalent, and anything for which there is an encoder. If the method uses a Java
 primitive as a return value, the implementation must construct the text message to send using the standard Java
 string representation of the Java primitive unless there developer provided encoder for the type configured for this
 endpoint, in which case that encoder must be used. If the method uses a class equivalent of a Java primitive as a
 return value, the implementation must construct the text message from the Java primitive equivalent as described
 above.

 <p>
 Developers should note that if developer closes the session during the invocation of a method with a return type, the
 method will complete but the return value will not be delivered to the remote endpoint. The send failure will be
 passed back into the endpoint's error handling method.

 <p>
 For example:

 <pre>
 <code>
 &#64;OnMessage
 public void processGreeting(String message, Session session) {
     System.out.println("Greeting received:" + message);
 }
 </code>
 </pre>

 For example:

 <pre>
 <code>
 &#64;OnMessage
 public void processUpload(byte[] b, boolean last, Session session) {
     // process partial data here, which check on last to see if these is more on the way
 }
 </code>
 </pre>

 Developers should not continue to reference message objects of type <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Reader.html" title="class or interface in java.io" class="external-link"><code>Reader</code></a>,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link"><code>ByteBuffer</code></a> or <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html" title="class or interface in java.io" class="external-link"><code>InputStream</code></a> after the annotated method has completed, since they may
 be recycled by the implementation.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>dannycoward</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>long</code></div>
<div class="col-second even-row-color"><code><a href="#maxMessageSize()" class="member-name-link">maxMessageSize</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies the maximum size of message in bytes that the method this annotates will be able to process, or -1 to
 indicate that no maximum has been configured.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="maxMessageSize()">
<h3>maxMessageSize</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">maxMessageSize</span></div>
<div class="block">Specifies the maximum size of message in bytes that the method this annotates will be able to process, or -1 to
 indicate that no maximum has been configured. The default is -1. This attribute only applies when the annotation
 is used to process whole messages, not to those methods that process messages in parts or use a stream or reader
 parameter to handle the incoming message. If the incoming whole message exceeds this limit, then the
 implementation generates an error and closes the connection using the reason that the message was too big.
 <p>
 Setting this attribute to a value larger than <code>Integer#MAX_VALUE</code> will trigger a
 <code>DeploymentException</code> unless the JVM supports Strings (for text messages) or ByteBuffers (for binary
 messages) larger than <code>Integer#MAX_VALUE</code>. Note that, as of Java 22, there are no plans for such support.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the maximum size in bytes.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>-1L</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><p align="left">Copyright &#169; 2018, 2024 Eclipse Foundation.<br>Use is subject to <a href="../../doc-files/speclicense.html" target="_top">license terms</a>.</small></p>
</footer>
</div>
</div>
</body>
</html>
