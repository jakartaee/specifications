<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Jakarta Standard Tag Library Team, https://projects.eclipse.org/projects/ee4j.jstl">
<title>Jakarta Standard Tag Library</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta Standard Tag Library</h1>
<div class="details">
<span id="author" class="author">Jakarta Standard Tag Library Team, https://projects.eclipse.org/projects/ee4j.jstl</span><br>
<span id="email" class="email"><a href="https://dev.eclipse.org/mailman/listinfo/jstl-dev" class="bare">https://dev.eclipse.org/mailman/listinfo/jstl-dev</a></span><br>
<span id="revnumber"> 2.0,</span>
<span id="revdate">October 19, 2020</span>
<br><span id="revremark">Final</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#copyright">Copyright</a>
<ul class="sectlevel2">
<li><a href="#eclipse-foundation-specification-license">Eclipse Foundation Specification License</a>
<ul class="sectlevel3">
<li><a href="#disclaimers">Disclaimers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#preface">Preface</a></li>
<li><a href="#related-documentation">Related Documentation</a></li>
<li><a href="#typographical-conventions">Typographical Conventions</a></li>
<li><a href="#acknowledgments">Acknowledgments</a></li>
<li><a href="#comments">Comments</a></li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#goals">1.1. Goals</a></li>
<li><a href="#multiple-tag-libraries">1.2. Multiple Tag Libraries</a></li>
<li><a href="#container-requirement">1.3. Container Requirement</a></li>
</ul>
</li>
<li><a href="#conventions">2. Conventions</a>
<ul class="sectlevel2">
<li><a href="#how-actions-are-documented">2.1. How Actions are Documented</a>
<ul class="sectlevel3">
<li><a href="#attributes">2.1.1. Attributes</a></li>
<li><a href="#syntax-notation">2.1.2. Syntax Notation</a></li>
</ul>
</li>
<li><a href="#scoped-variables">2.2. Scoped Variables</a>
<ul class="sectlevel3">
<li><a href="#var-and-scope">2.2.1. var and scope</a></li>
<li><a href="#visibility">2.2.2. Visibility</a></li>
</ul>
</li>
<li><a href="#static-vs-dynamic-attribute-values">2.3. Static vs Dynamic Attribute Values</a></li>
<li><a href="#white-spaces">2.4. White Spaces</a></li>
<li><a href="#body-content">2.5. Body Content</a></li>
<li><a href="#naming">2.6. Naming</a></li>
<li><a href="#errors-and-exceptions">2.7. Errors and Exceptions</a></li>
<li><a href="#configuration-data">2.8. Configuration Data</a></li>
<li><a href="#default-values">2.9. Default Values</a></li>
</ul>
</li>
<li><a href="#expression-language-overview">3. Expression Language Overview</a>
<ul class="sectlevel2">
<li><a href="#expressions-and-attribute-values">3.1. Expressions and Attribute Values</a></li>
<li><a href="#accessing-application-data">3.2. Accessing Application Data</a></li>
<li><a href="#nested-properties-and-accessing-collections">3.3. Nested Properties and Accessing Collections</a></li>
<li><a href="#operators">3.4. Operators</a></li>
<li><a href="#automatic-type-conversion">3.5. Automatic Type Conversion</a></li>
<li><a href="#default-values-2">3.6. Default Values</a></li>
</ul>
</li>
<li><a href="#general-purpose-actions-core-tag-library">4. General-Purpose Actions: core tag library</a>
<ul class="sectlevel2">
<li><a href="#overview">4.1. Overview</a></li>
<li><a href="#c:out">4.2. &lt;c:out&gt;</a></li>
<li><a href="#c:set">4.3. &lt;c:set&gt;</a></li>
<li><a href="#cremove">4.4. &lt;c:remove&gt;</a></li>
<li><a href="#ccatch">4.5. &lt;c:catch&gt;</a></li>
</ul>
</li>
<li><a href="#conditional-actions-core-tag-library">5. Conditional Actions: core tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-2">5.1. Overview</a></li>
<li><a href="#custom-logic-actions">5.2. Custom Logic Actions</a></li>
<li><a href="#cif">5.3. &lt;c:if&gt;</a></li>
<li><a href="#cchoose">5.4. &lt;c:choose&gt;</a></li>
<li><a href="#cwhen">5.5. &lt;c:when&gt;</a></li>
<li><a href="#cotherwise">5.6. &lt;c:otherwise&gt;</a></li>
</ul>
</li>
<li><a href="#iterator-actions-core-tag-library">6. Iterator Actions: core tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-3">6.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#collections-of-objects-to-iterate-over">6.1.1. Collections of Objects to Iterate Over</a></li>
<li><a href="#map">6.1.2. Map</a></li>
<li><a href="#iteration-status">6.1.3. Iteration Status</a></li>
<li><a href="#range-attributes">6.1.4. Range Attributes</a></li>
<li><a href="#tag-collaboration">6.1.5. Tag Collaboration</a></li>
<li><a href="#deferred-values">6.1.6. Deferred Values</a></li>
</ul>
</li>
<li><a href="#c:forEach">6.2. &lt;c:forEach&gt;</a></li>
<li><a href="#c:forTokens">6.3. &lt;c:forTokens&gt;</a></li>
</ul>
</li>
<li><a href="#url-related-actions-core-tag-library">7. URL Related Actions: core tag library</a>
<ul class="sectlevel2">
<li><a href="#hypertext-links">7.1. Hypertext Links</a></li>
<li><a href="#importing-resources">7.2. Importing Resources</a>
<ul class="sectlevel3">
<li><a href="#url">7.2.1. URL</a></li>
<li><a href="#exporting-an-object-string-or-reader">7.2.2. Exporting an object: String or Reader</a></li>
<li><a href="#url-encoding">7.2.3. URL Encoding</a></li>
<li><a href="#networking-properties">7.2.4. Networking Properties</a></li>
</ul>
</li>
<li><a href="#http-redirect">7.3. HTTP Redirect</a></li>
<li><a href="#cimport">7.4. &lt;c:import&gt;</a></li>
<li><a href="#c:url">7.5. &lt;c:url&gt;</a></li>
<li><a href="#credirect">7.6. &lt;c:redirect&gt;</a></li>
<li><a href="#cparam">7.7. &lt;c:param&gt;</a></li>
</ul>
</li>
<li><a href="#internationalization-i18n-actions-i18n-capable-formatting-tag-library">8. Internationalization (i18n) Actions: I18n-capable formatting tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-4">8.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#fmtmessage">8.1.1. &lt;fmt:message&gt;</a></li>
</ul>
</li>
<li><a href="#i18n-localization-context">8.2. I18n Localization Context</a>
<ul class="sectlevel3">
<li><a href="#preferred-locales">8.2.1. Preferred Locales</a></li>
</ul>
</li>
<li><a href="#determinining-the-resource-bundle-for-an-i18n-localization-context">8.3. Determinining the Resource Bundle for an i18n Localization Context</a>
<ul class="sectlevel3">
<li><a href="#resource-bundle-lookup">8.3.1. Resource Bundle Lookup</a></li>
<li><a href="#resource-bundle-determination-algorithm">8.3.2. Resource Bundle Determination Algorithm</a></li>
<li><a href="#examples">8.3.3. Examples</a></li>
</ul>
</li>
<li><a href="#response-encoding">8.4. Response Encoding</a></li>
<li><a href="#fmt:setLocale">8.5. &lt;fmt:setLocale&gt;</a></li>
<li><a href="#fmt:bundle">8.6. &lt;fmt:bundle&gt;</a></li>
<li><a href="#fmt:setBundle">8.7. &lt;fmt:setBundle&gt;</a></li>
<li><a href="#fmt:message">8.8. &lt;fmt:message&gt;</a></li>
<li><a href="#fmtparam">8.9. &lt;fmt:param&gt;</a></li>
<li><a href="#fmt:requestEncoding">8.10. &lt;fmt:requestEncoding&gt;</a></li>
<li><a href="#configuration-settings">8.11. Configuration Settings</a>
<ul class="sectlevel3">
<li><a href="#locale">8.11.1. Locale</a></li>
<li><a href="#fallback-locale">8.11.2. Fallback Locale</a></li>
<li><a href="#Internationalization_Actions_I18n_Localization_Context">8.11.3. I18n Localization Context</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#formatting-actions-i18n-capable-formatting-tag-library">9. Formatting Actions: I18n-capable formatting tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-5">9.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#formatting-numbers-currencies-and-percentages">9.1.1. Formatting Numbers, Currencies, and Percentages</a></li>
<li><a href="#formatting-dates-and-times">9.1.2. Formatting Dates and Times</a></li>
</ul>
</li>
<li><a href="#formatting-locale">9.2. Formatting Locale</a></li>
<li><a href="#establishing-a-formatting-locale">9.3. Establishing a Formatting Locale</a>
<ul class="sectlevel3">
<li><a href="#locales-available-for-formatting-actions">9.3.1. Locales Available for Formatting Actions</a></li>
<li><a href="#locale-lookup">9.3.2. Locale Lookup</a></li>
<li><a href="#formatting-locale-lookup-algorithm">9.3.3. Formatting Locale Lookup Algorithm</a></li>
</ul>
</li>
<li><a href="#time-zone">9.4. Time Zone</a></li>
<li><a href="#fmt:timeZone">9.5. &lt;fmt:timeZone&gt;</a></li>
<li><a href="#fmtsettimezone">9.6. &lt;fmt:setTimeZone&gt;</a></li>
<li><a href="#fmtformatnumber">9.7. &lt;fmt:formatNumber&gt;</a></li>
<li><a href="#fmtparsenumber">9.8. &lt;fmt:parseNumber&gt;</a></li>
<li><a href="#fmtformatdate">9.9. &lt;fmt:formatDate&gt;</a></li>
<li><a href="#fmtparsedate">9.10. &lt;fmt:parseDate&gt;</a></li>
<li><a href="#configuration-settings-2">9.11. Configuration Settings</a>
<ul class="sectlevel3">
<li><a href="#timezone">9.11.1. TimeZone</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sql-actions-sql-tag-library">10. SQL Actions: sql tag library</a>
<ul class="sectlevel2">
<li><a href="#SQL_Action_Overview">10.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#data-source">10.1.1. Data Source</a></li>
<li><a href="#querying-a-database">10.1.2. Querying a Database</a></li>
<li><a href="#updating-a-database">10.1.3. Updating a Database</a></li>
<li><a href="#sql-statement-parameters">10.1.4. SQL Statement Parameters</a></li>
</ul>
</li>
<li><a href="#database-access">10.2. Database Access</a></li>
<li><a href="#sql:query">10.3. &lt;sql:query&gt;</a></li>
<li><a href="#sqlupdate">10.4. &lt;sql:update&gt;</a></li>
<li><a href="#sqltransaction">10.5. &lt;sql:transaction&gt;</a></li>
<li><a href="#sql:setDataSource">10.6. &lt;sql:setDataSource&gt;</a></li>
<li><a href="#sql:param">10.7. &lt;sql:param&gt;</a></li>
<li><a href="#sqldateparam">10.8. &lt;sql:dateParam&gt;</a></li>
<li><a href="#SQL_Actions_Configuration_Settings">10.9. Configuration Settings</a>
<ul class="sectlevel3">
<li><a href="#datasource">10.9.1. DataSource</a></li>
<li><a href="#maxrows">10.9.2. MaxRows</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#xml-core-actions-xml-tag-library">11. XML Core Actions: xml tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-6">11.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#xpath-context">11.1.1. XPath Context</a></li>
<li><a href="#xpath-variable-bindings">11.1.2. XPath Variable Bindings</a></li>
<li><a href="#java-to-xpath-type-mappings">11.1.3. Java to XPath Type Mappings</a></li>
<li><a href="#xpath-to-java-type-mappings">11.1.4. XPath to Java Type Mappings</a></li>
<li><a href="#the-select-attribute">11.1.5. The <em>select</em> Attribute</a></li>
<li><a href="#default-context-node">11.1.6. Default Context Node</a></li>
<li><a href="#resources-access">11.1.7. Resources Access</a></li>
<li><a href="#core-actions">11.1.8. Core Actions</a></li>
</ul>
</li>
<li><a href="#xparse">11.2. &lt;x:parse&gt;</a></li>
<li><a href="#xout">11.3. &lt;x:out&gt;</a></li>
<li><a href="#xset">11.4. &lt;x:set&gt;</a></li>
</ul>
</li>
<li><a href="#xml-flow-control-actions-xml-tag-library">12. XML Flow Control Actions: xml tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-7">12.1. Overview</a></li>
<li><a href="#xif">12.2. &lt;x:if&gt;</a></li>
<li><a href="#xchoose">12.3. &lt;x:choose&gt;</a></li>
<li><a href="#xwhen">12.4. &lt;x:when&gt;</a></li>
<li><a href="#xotherwise">12.5. &lt;x:otherwise&gt;</a></li>
<li><a href="#x:forEach">12.6. &lt;x:forEach&gt;</a></li>
</ul>
</li>
<li><a href="#xml-transform-actions-xml-tag-library">13. XML Transform Actions: xml tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-8">13.1. Overview</a></li>
<li><a href="#xtransform">13.2. &lt;x:transform&gt;</a></li>
<li><a href="#xparam">13.3. &lt;x:param&gt;</a></li>
</ul>
</li>
<li><a href="#tag-library-validators">14. Tag Library Validators</a>
<ul class="sectlevel2">
<li><a href="#overview-9">14.1. Overview</a></li>
</ul>
</li>
<li><a href="#functions-function-tag-library">15. Functions: function tag library</a>
<ul class="sectlevel2">
<li><a href="#overview-10">15.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#the-length-function">15.1.1. The <em>length</em> Function</a></li>
<li><a href="#string-manipulation-functions">15.1.2. String Manipulation Functions</a></li>
</ul>
</li>
<li><a href="#fncontains">15.2. fn:contains</a></li>
<li><a href="#fncontainsignorecase">15.3. fn:containsIgnoreCase</a></li>
<li><a href="#fnendswith">15.4. fn:endsWith</a></li>
<li><a href="#fnescapexml">15.5. fn:escapeXml</a></li>
<li><a href="#fnindexof">15.6. fn:indexOf</a></li>
<li><a href="#fnjoin">15.7. fn:join</a></li>
<li><a href="#fnlength">15.8. fn:length</a></li>
<li><a href="#fnreplace">15.9. fn:replace</a></li>
<li><a href="#fnsplit">15.10. fn:split</a></li>
<li><a href="#fnstartswith">15.11. fn:startsWith</a></li>
<li><a href="#fnsubstring">15.12. fn:substring</a></li>
<li><a href="#fnsubstringafter">15.13. fn:substringAfter</a></li>
<li><a href="#fnsubstringbefore">15.14. fn:substringBefore</a></li>
<li><a href="#fntolowercase">15.15. fn:toLowerCase</a></li>
<li><a href="#fntouppercase">15.16. fn:toUpperCase</a></li>
<li><a href="#fntrim">15.17. fn:trim</a></li>
</ul>
</li>
<li><a href="#compatibility-migration">Appendix A: Compatibility &amp; Migration</a>
<ul class="sectlevel2">
<li><a href="#java-ee-backwards-compatibility">A.1. Java EE Backwards Compatibility</a></li>
</ul>
</li>
<li><a href="#changes">Appendix B: Changes</a>
<ul class="sectlevel2">
<li><a href="#changed-between-jakarta-standard-tag-library-2-0-and-jsr-52">B.1. Changed between Jakarta Standard Tag Library 2.0 and JSR-52</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta Standard Tag Library

Version: 2.0

Status: Final

Release: October 19, 2020</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright"><a class="anchor" href="#copyright"></a>Copyright</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Copyright (c) 2018, 2020 Eclipse Foundation.</pre>
</div>
</div>
<div class="sect2">
<h3 id="eclipse-foundation-specification-license"><a class="anchor" href="#eclipse-foundation-specification-license"></a>Eclipse Foundation Specification License</h3>
<div class="paragraph">
<p>By using and/or copying this document, or the Eclipse Foundation
document from which this statement is linked, you (the licensee) agree
that you have read, understood, and will comply with the following
terms and conditions:</p>
</div>
<div class="paragraph">
<p>Permission to copy, and distribute the contents of this document, or
the Eclipse Foundation document from which this statement is linked, in
any medium for any purpose and without fee or royalty is hereby
granted, provided that you include the following on ALL copies of the
document, or portions thereof, that you use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link or URL to the original Eclipse Foundation document.</p>
</li>
<li>
<p>All existing copyright notices, or if one does not exist, a notice
(hypertext is preferred, but a textual representation is permitted)
of the form: "Copyright (c) [$date-of-document]
Eclipse Foundation, Inc. &lt;&lt;url to this license&gt;&gt;"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inclusion of the full text of this NOTICE must be provided. We
request that authorship attribution be provided in any software,
documents, or other items or products that you create pursuant to the
implementation of the contents of this document, or any portion
thereof.</p>
</div>
<div class="paragraph">
<p>No right to create modifications or derivatives of Eclipse Foundation
documents is granted pursuant to this license, except anyone may
prepare and distribute derivative works and portions of this document
in software that implements the specification, in supporting materials
accompanying such software, and in documentation of such software,
PROVIDED that all such works include the notice below. HOWEVER, the
publication of derivative works of this document for use as a technical
specification is expressly prohibited.</p>
</div>
<div class="paragraph">
<p>The notice is:</p>
</div>
<div class="paragraph">
<p>"Copyright (c) 2018 Eclipse Foundation. This software or
document includes material copied from or derived from [title and URI
of the Eclipse Foundation specification document]."</p>
</div>
<div class="sect3">
<h4 id="disclaimers"><a class="anchor" href="#disclaimers"></a>Disclaimers</h4>
<div class="paragraph">
<p>THIS DOCUMENT IS PROVIDED &quot;AS IS,&quot; AND THE COPYRIGHT
HOLDERS AND THE ECLIPSE FOUNDATION MAKE NO REPRESENTATIONS OR
WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE DOCUMENT ARE
SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS
WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR
OTHER RIGHTS.</p>
</div>
<div class="paragraph">
<p>THE COPYRIGHT HOLDERS AND THE ECLIPSE FOUNDATION WILL NOT BE LIABLE
FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT
OF ANY USE OF THE DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE
CONTENTS THEREOF.</p>
</div>
<div class="paragraph">
<p>The name and trademarks of the copyright holders or the Eclipse
Foundation may NOT be used in advertising or publicity pertaining to
this document or its contents without specific, written prior
permission. Title to copyright in this document will at all times
remain with copyright holders.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preface"><a class="anchor" href="#preface"></a>Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the Jakarta Standard Tag
Library 2.0 specification, developed by the Jakarta Standard Tag Library Team, <a href="https://projects.eclipse.org/projects/ee4j.jstl" class="bare">https://projects.eclipse.org/projects/ee4j.jstl</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-documentation"><a class="anchor" href="#related-documentation"></a>Related Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implementors of Jakarta Standard Tag Lbrary and authors of Jakarta Server Pages
may find the following documents worth consulting for additional
information:.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Server Pages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://projects.eclipse.org/projects/ee4j.jsp">Jakarta Server Pages Project</a><br>
<a href="https://jakarta.ee/specifications/pages/">Jakarta Server Pages Specification</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://projects.eclipse.org/projects/ee4j.servlet">Jakarta Servlet Project</a><br>
<a href="https://jakarta.ee/specifications/servlet/">Jakarta Servlet Specification</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java™, Standard Edition, Version 8.0 API Specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api" class="bare">https://docs.oracle.com/javase/8/docs/api</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta EE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://jakarta.ee" class="bare">https://jakarta.ee</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JavaBeans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/beans" class="bare">https://docs.oracle.com/javase/8/docs/technotes/guides/beans</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jdbc" class="bare">https://docs.oracle.com/javase/8/docs/technotes/guides/jdbc</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Technology and XML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/xml" class="bare">https://docs.oracle.com/javase/8/docs/technotes/guides/xml</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPath specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.w3.org/TR/xpath" class="bare">http://www.w3.org/TR/xpath</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML home page at W3C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.w3.org/XML" class="bare">http://www.w3.org/XML</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTML home page at W3C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.w3.org/MarkUp" class="bare">http://www.w3.org/MarkUp</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML.org home page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.xml.org" class="bare">http://www.xml.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="typographical-conventions"><a class="anchor" href="#typographical-conventions"></a>Typographical Conventions</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Font Style</th>
<th class="tableblock halign-left valign-top">Uses</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Italic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emphasis,
definition of term.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Monospace</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Syntax,
code examples, attribute names, Java language types, API, enumerated
attribute values.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="acknowledgments"><a class="anchor" href="#acknowledgments"></a>Acknowledgments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta Standard Tag Library
specification is the result of collaborative work involving many
individuals, all driven by a common goal of designing the best libraries
possible for the Jakarta Server Pages author community.</p>
</div>
<div class="paragraph">
<p>The current members of the Jakarta Standard Tag Library project in the
Eclipse Foundation can be found at the following location:
<a href="https://projects.eclipse.org/projects/ee4j.jstl/who" class="bare">https://projects.eclipse.org/projects/ee4j.jstl/who</a>.</p>
</div>
<div class="paragraph">
<p>We would like to thank all members of the JSR-52
expert group under the Java Community Process: Nathan Abramson, Shawn Bayern, Hans Bergsten, Paul
Bonfanti, Vince Bonfanti, David Brown, Larry Cable, Tim Dawson, Morgan
Delagrange, Bob Foster, David Geary, Scott Hasse, Hal Hildebrand, Jason
Hunter, Serge Knystautas, Mark Kolb, Wellington Lacerda, Jan Luehe, Geir
Magnusson Jr., Dan Malks, Craig McClanahan, Richard Morgan, Glenn
Nielsen, Rickard Oberg, Joseph B. Ottinger, Eduardo Pelegri-Llopart, Sam
Pullara, Tom Reilly, Brian Robinson, Russ Ryan, Pasi Salminen, Steven
Sargent, Allan Scott, Virgil Sealy, Magnus Stenman, Gael Stevens, James
Strachan, Christine Tomlinson, Norbert von Truchsess, Keyton Weissinger,
Clement Wong, Alex Yiu.</p>
</div>
<div class="paragraph">
<p>This specification was first initiated by
Eduardo Pelegri-Llopart. Eduardo&#8217;s leadership in making the Java
platform the best technology available for the web layer has been key in
shaping the vision behind the standard tag library.</p>
</div>
<div class="paragraph">
<p>Shawn Bayern and Hans Bergsten deserve special
credit for being actively involved in all design issues of this
specification. Their vast expertise and commitment to excellence has had
a profound impact in every single aspect of this specification. Mille
mercis Shawn et Hans! Don&#8217;t know how we would have done it without you
two.</p>
</div>
<div class="paragraph">
<p>Many thanks to Jan Luehe for taking ownership of
the internationalization and formatting chapters of this specification
on short notice, and doing an incredible job.</p>
</div>
<div class="paragraph">
<p>Special mention to Nathan Abramson for being a
driving force behind the expression language introduced in JSTL, to
James Strachan for leading the group in our understanding of XML for
page authors, and to Craig McClanahan for his help on servlet and J2EE
platform related issues.</p>
</div>
<div class="paragraph">
<p>This specification has drawn a lot of its design
ideas from pioneers in the field of tag libraries. We are grateful to
the Jakarta project at Apache, as well as other efforts in the industry,
where projects led by Craig McClanahan (Struts), James Strachan (XTags),
Morgan Delagrange (DBTags), Tim Dawson (I18N), Glenn Nielsen (many
utility taglibs), Scott Hasse (JPath), Dmitri Plotnikov (JXPath), Pasi
Salminen (O&amp;D Struts), have greatly influenced the design of the JSTL
libraries.</p>
</div>
<div class="paragraph">
<p>The RI team composed of Shawn Bayern (lead),
Nathan Abramson, Justyna Horwat, and Jan Luehe has done a wonderful job
at turning code faster than the specification could be written.</p>
</div>
<div class="paragraph">
<p>Quality has been in the capable hands of Ryan
Lubke, lead of the TCK team under the Java Community Process that also includes Lance Andersen. David
Geary&#8217;s help in doing thorough reviews of the specification was also
greatly appreciated.</p>
</div>
<div class="paragraph">
<p>We are also grateful to the product team at Sun
Microsystems who helped us sail efficiently through this specification:
Jim Driscoll, Karen Schaffer, George Grigoryev, Stephanie Bodoff,
Vanitha Venkatraman, Prasad Subramanian, and Xiaotan He.</p>
</div>
<div class="paragraph">
<p>Finally, we&#8217;d like to thank the community at
large for their ever increasing interest in this technology. We sure
hope you&#8217;ll enjoy the Jakarta Standard Tag Library.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="comments"><a class="anchor" href="#comments"></a>Comments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are interested in improving this
specification and welcome your comments and suggestions. You can email
your comments to us at:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>jstl-dev@eclipse.org</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta Standard Tag Library provides a specification document, API and
TCK that extends the Jakarta Server Pages specification by adding a tag
library of Jakarta Server Pages tags for common tasks, such as XML data
processing, conditional execution, database access, loops and
internationalization.</p>
</div>
<div class="sect2">
<h3 id="goals"><a class="anchor" href="#goals"></a>1.1. Goals</h3>
<div class="paragraph">
<p>The ultimate goal of the Jakarta Standard Tag Library is to help simplify Jakarta Server Pages authors' lives.</p>
</div>
<div class="paragraph">
<p>A page author is someone who is responsible
for the design of a web application&#8217;s presentation layer using Jakarta Server Pages. Many page authors are not fluent in any programming language.</p>
</div>
<div class="paragraph">
<p>One of the main difficulties a page author is
faced with is the need to use a scripting language (the default being
the Java programming language) to manipulate the dynamic data within a
Jakarta Server Pages page. Unfortunately, page authors often see scripting languages as
complex and not very well adapted to their needs.</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library offers the following capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>General-purpose actions<br>
These actions complement the expression
language by allowing a page author to easily display expressions in the
expression language, set and remove the value of Jakarta Server Pages scoped attributes,
as well as catch exceptions.</p>
</li>
<li>
<p>Control flow actions<br>
Tag-based control flow structures
(conditionals, iterators), which are more natural to page authors.</p>
</li>
<li>
<p>Tag library validators (TLVs)<br>
TLVs allow projects to only allow specific
tag libraries, as well as enforce Jakarta Server Pages coding styles that are free of
scripting elements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The other key aspect of the Jakarta Standard Tag Library is that it
provides standard actions and standard Expression Language functions
for functionality most often needed by page authors. These cover the
following topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Accessing URL-based resources</p>
</li>
<li>
<p>Internationalization (i18n) and text
formatting</p>
</li>
<li>
<p>Relational database access (SQL)</p>
</li>
<li>
<p>XML processing</p>
</li>
<li>
<p>String manipulation</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="multiple-tag-libraries"><a class="anchor" href="#multiple-tag-libraries"></a>1.2. Multiple Tag Libraries</h3>
<div class="paragraph">
<p>A tag library is a collection of actions that
encapsulates functionality to be used from within a Jakarta Server Pages page. The Jakarta Standard Tag Library
includes a wide variety of actions that naturally fit into discrete
functional areas. This is why the Jakarta Standard Tag Library, although referred to as the standard
tag library (singular), is exposed via multiple tag libraries to clearly
identify the functional areas it covers, as well as to give each area
its own namespace. The tables below lists these functional areas along
with the URIs used to reference the libraries. The tables also show the
prefixes used in this specification (although page authors are free to
use any prefix they want).</p>
</div>
<div class="paragraph">
<p>Jakarta Standard Tag Library Tag Libraries</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Functional Area</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Prefix</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">core</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://java.sun.com/jsp/jstl/core" class="bare">http://java.sun.com/jsp/jstl/core</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>c</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML processing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://java.sun.com/jsp/jstl/xml" class="bare">http://java.sun.com/jsp/jstl/xml</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>x</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">I18N capable formatting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://java.sun.com/jsp/jstl/fmt" class="bare">http://java.sun.com/jsp/jstl/fmt</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>fmt</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">relational db access (SQL)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://java.sun.com/jsp/jstl/sql" class="bare">http://java.sun.com/jsp/jstl/sql</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sql</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://java.sun.com/jsp/jstl/functions" class="bare">http://java.sun.com/jsp/jstl/functions</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fn</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="container-requirement"><a class="anchor" href="#container-requirement"></a>1.3. Container Requirement</h3>
<div class="paragraph">
<p>Jakarta Standard Tag Library requires a Jakarta Server Pages 3.0 web container.
Please note that the expression language is an individual specification: Jakarta Expression Language 4.0.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conventions"><a class="anchor" href="#conventions"></a>2. Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the conventions used in
this specification.</p>
</div>
<div class="sect2">
<h3 id="how-actions-are-documented"><a class="anchor" href="#how-actions-are-documented"></a>2.1. How Actions are Documented</h3>
<div class="paragraph">
<p>The Jakarta Standard Tag Library actions are grouped according to their
functionality. These functional groups of actions are documented in
their own chapter using the following structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Motivation<br>
Describes the motivation for standardizing
the actions.</p>
</li>
<li>
<p>Overview<br>
Provides an overview of the capabilities
provided by the actions. Sample code featuring these actions in their
most common use cases is also provided.</p>
</li>
<li>
<p>One section per action, with the following
structure:</p>
<div class="ulist">
<ul>
<li>
<p>Name<br>
Tag library prefixes are used in this
specification for all references to Jakarta Standard Tag Library actions (e.g.: &lt;c:if&gt; instead
of &lt;if&gt;).</p>
</li>
<li>
<p>Short Description</p>
</li>
<li>
<p>Syntax<br>
The syntax notation is described in
<a href="#syntax-notation">Syntax Notation</a>.</p>
</li>
<li>
<p>Body Content<br>
This section specifies which type of body
content is supported by the action. As defined by the Jakarta Server Pages specification,
the body content type can be one of <em>empty</em>, <em>JSP</em>, or <em>tagdependent</em>.
The section also specifies if the body content is processed by the
action or is simply ignored by the action and just written to the
current <em>JspWriter</em>. If the body content is processed, information is
given on whether or not the body content is trimmed before the action
begins processing it.</p>
</li>
<li>
<p>Attributes<br>
Details in <a href="#attributes">Attributes</a> below.</p>
</li>
<li>
<p>Constraints<br>
List of additional constraints enforced by
the action.</p>
</li>
<li>
<p>Null &amp; Error Handling<br>
Details on how null and empty values are
processed, as well as on exceptions thrown by the action.</p>
</li>
<li>
<p>Description<br>
This section provides more details on the
action.</p>
</li>
<li>
<p>Other sections<br>
Other sections related to the group of
actions described in the chapter may exist. These include sections on
interfaces and classes exposed by these actions.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="attributes"><a class="anchor" href="#attributes"></a>2.1.1. Attributes</h4>
<div class="paragraph">
<p>For each attribute, the following information
is given: name, dynamic behavior, type, and description.</p>
</div>
<div class="paragraph">
<p>The <em>rtexprvalue</em> element defined in a TLD is
covered in this specification with the column titled "Dynamic" that
captures the dynamic behavior of an attribute. The value can be either
true or false. A false value in the dynamic column means that only a
static string value can be specified for the attribute. A true value
means that a <em>request-time attribute value</em> can be specified. As defined
in the Jakarta Server Pages specification, a "request-time attribute value" can be either
a Java expression, an Expression Language expression, or a value set by a
<code>&lt;jsp:attribute&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="syntax-notation"><a class="anchor" href="#syntax-notation"></a>2.1.2. Syntax Notation</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>[&#8230;&#8203;]</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What is
inside the square brackets is optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>{option1|option2|option3|&#8230;&#8203;}</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only one of the given options can be
selected</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><span class="underline">value</span></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
default value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, in the syntax below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set var="varName" [scope="{<span class="underline">page</span>|request|session|application}"] value="value"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>the attribute <em>scope</em> is optional. If it is
specified, its value must be one of <em>page</em>, <em>request</em>, <em>session</em>, or
<em>application</em>. The default value is <em>page</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scoped-variables"><a class="anchor" href="#scoped-variables"></a>2.2. Scoped Variables</h3>
<div class="paragraph">
<p>Actions usually collaborate with their
environment in implicit or explicit ways, or both.</p>
</div>
<div class="paragraph">
<p>Implicit collaboration is often done via a
well defined interface that allows nested tags to work seamlessly with
the ancestor tag exposing that interface. The Jakarta Standard Tag Library iterator tags support
this mode of collaboration.</p>
</div>
<div class="paragraph">
<p>Explicit collaboration happens when a tag
explicitly exposes information to its environment. Traditionally, this
has been done by exposing a scripting variable with a value assigned
from a Jakarta Server Pages scoped attribute (which was saved by the tag handler).
Because of the expression language, the need for scripting variables is
significantly reduced. This is why all the Jakarta Standard Tag Library tags expose information
only as Jakarta Server Pages scoped attributes (no scripting variable exposed). These
exported Jakarta Server Pages scoped attributes are referred to as scoped variables in
this specification; this helps in preventing too much overloading of the
term "attribute".</p>
</div>
<div class="sect3">
<h4 id="var-and-scope"><a class="anchor" href="#var-and-scope"></a>2.2.1. var and scope</h4>
<div class="paragraph">
<p>The convention is to use the name <em>var</em> for
attributes that export information. For example, the <code>&lt;c:forEach&gt;</code> action
exposes the current item of the customer collection it is iterating over
in the following way:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="customer" items="${customers}"&gt;
    Current customer is &lt;c:out value="${customer}"/&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is important to note that a name different
than <em>id</em> was selected to stress the fact that only a scoped variable
(Jakarta Server Pages scoped attribute) is exposed, without any scripting variable.</p>
</div>
<div class="paragraph">
<p>If the scoped variable has at-end visibility
(see <a href="#visibility">Visibility</a>), the convention also
establishes the attribute <em>scope</em> to set the scope of the scoped
variable.</p>
</div>
<div class="paragraph">
<p>The <em>scope</em> attribute has the semantics
defined in the Jakarta Server Pages specification, and takes the same values as the ones
allowed in the <code>&lt;jsp:useBean&gt;</code> action; i.e. <em>page</em>, <em>request</em>, <em>session</em>, <em>application</em>. If no value is specified for <em>scope</em>, <em>page</em> scope is
the default unless otherwise specified.</p>
</div>
<div class="paragraph">
<p>It is also important to note, as per the Jakarta Server Pages
specification, that specifying "session" scope is only allowed if the
page has sessions enabled.</p>
</div>
<div class="paragraph">
<p>If an action exposes more than one scoped
variable, the main one uses attribute names <em>var</em> and <em>scope</em>, while
secondary ones have a suffix added for unique identification. For
example, in the <code>&lt;c:forEach&gt;</code> action, the <em>var</em> attribute exposes the
current item of the iteration (main variable exposed by the action),
while the <em>varStatus</em> attribute exposes the current status of the
iteration (secondary variable).</p>
</div>
</div>
<div class="sect3">
<h4 id="visibility"><a class="anchor" href="#visibility"></a>2.2.2. Visibility</h4>
<div class="paragraph">
<p>Scoped variables exported by Jakarta Standard Tag Library actions are
categorized as either nested or at-end.</p>
</div>
<div class="paragraph">
<p><em>Nested</em> scoped variables are only
visible within the body of the action and are stored in "page"
scope<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>. The action must create the variable
according to the semantics of <em>PageContext.setAttribute(varName,PAGE_SCOPE)</em>, and it must remove it at the end of the action according
to the semantics of <em>PageContext.removeAttribute(varName, PAGE_SCOPE)</em>
.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</div>
<div class="paragraph">
<p>At-end scoped variables are only visible at
the end of the action. Their lifecycle is the one associated with their
associated scope.</p>
</div>
<div class="paragraph">
<p>In this specification, scoped variables
exposed by actions are considered at-end by default. If a scoped
variable is nested, it will be explicitly stated.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="static-vs-dynamic-attribute-values"><a class="anchor" href="#static-vs-dynamic-attribute-values"></a>2.3. Static vs Dynamic Attribute Values</h3>
<div class="paragraph">
<p>Except for the two exceptions described
below, attribute values of Jakarta Standard Tag Library actions can always be specified
dynamically (see <a href="#attributes">Attributes</a>).</p>
</div>
<div class="paragraph">
<p>The first exception to this convention is for
the <em>select</em> attribute of XML actions. This attribute is reserved in
the Jakarta Standard Tag Library to specify a <em>String</em> literal that represents an expression in the
XPath language.</p>
</div>
<div class="paragraph">
<p>The second exception is for attributes that
define the name and scope of scoped variables (as introduced in
<a href="#attributes">Attributes</a>) exported by Jakarta Standard Tag Library actions.</p>
</div>
<div class="paragraph">
<p>Restricting these attributes to static values
should benefit development tools, without any impediment to page
authors.</p>
</div>
</div>
<div class="sect2">
<h3 id="white-spaces"><a class="anchor" href="#white-spaces"></a>2.4. White Spaces</h3>
<div class="paragraph">
<p>Following the Jakarta Server Pages specification (as well as
the XML and XSLT specifications), whitespace characters are <em>#x20</em>, <em>#x9</em>, <em>#xD</em>, or <em>#xA</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="body-content"><a class="anchor" href="#body-content"></a>2.5. Body Content</h3>
<div class="paragraph">
<p>If an action accepts a body content, an empty
body is always valid, unless explicitly stated otherwise.</p>
</div>
<div class="paragraph">
<p>If the body content is used to set the value
of an attribute, then an empty body content sets the attribute value to
an empty string.</p>
</div>
<div class="paragraph">
<p>If a body content is trimmed prior to being
processed by the action, it is trimmed as defined in method <em>trim()</em> of
the class <em>java.lang.String</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="naming"><a class="anchor" href="#naming"></a>2.6. Naming</h3>
<div class="paragraph">
<p>The Jakarta Standard Tag Library adopts capitalization conventions of
Java variables for compound words in action and attribute names.
Recommended tag prefixes are kept lowercase. Thus, we have
<code>&lt;sql:transaction&gt;</code> and <code>&lt;c:forEach&gt;</code>, as well as attributes such as
<em>docSystemId</em> and <em>varDom</em>.</p>
</div>
<div class="paragraph">
<p>In some cases, attribute names for Jakarta Standard Tag Library
actions carry conventional meanings. For instance,
<a href="#var-and-scope">var and scope</a> discussed the <em>var</em> and
<em>scope</em> attibutes. <a href="#the-select-attribute">The <em>select</em> Attribute</a> discusses the <em>select</em> attribute used in Jakarta Standard Tag Library&#8217;s
XML-processing tag library.</p>
</div>
</div>
<div class="sect2">
<h3 id="errors-and-exceptions"><a class="anchor" href="#errors-and-exceptions"></a>2.7. Errors and Exceptions</h3>
<div class="paragraph">
<p>All syntax errors (as defined in the syntax
section of each action, as well as the syntax of EL expressions as
defined in <a href="EL-152.html#UNKNOWN">See</a> ) must be reported at translation
time.</p>
</div>
<div class="paragraph">
<p>Constraints, as defined in the constraints
section of each action, must also be reported at translation time unless
they operate on a dynamic attribute value, in which case errors are
reported at runtime.</p>
</div>
<div class="paragraph">
<p>The conversion from a <em>String</em> value to the
expected type of an attribute is handled according to the rules defined
in the Jakarta Server Pages specification.</p>
</div>
<div class="paragraph">
<p>Since it is hard for a page author to deal
with exceptions, the Jakarta Standard Tag Library tries to avoid as many exception cases as
possible, without causing other problems.</p>
</div>
<div class="paragraph">
<p>For instance, if <code>&lt;c:forEach&gt;</code> were to throw an
exception when given a null value for the attribute <em>items</em>, it would
be impossible to easily loop over a possibly missing string array that
represents check-box selection in an HTML form (retrieved with an EL
expression like <em>${paramValues.selections}</em>). A better choice is to do
nothing in this case.</p>
</div>
<div class="paragraph">
<p>The conventions used in the Jakarta Standard Tag Library with respect to
errors and exceptions are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>scope</p>
<div class="ulist">
<ul>
<li>
<p>Invalid value – translation time validation error</p>
</li>
</ul>
</div>
</li>
<li>
<p>var</p>
<div class="ulist">
<ul>
<li>
<p>Empty – translation time validation error</p>
</li>
</ul>
</div>
</li>
<li>
<p>Dynamic attributes with a fixed set of valid
String values:</p>
<div class="ulist">
<ul>
<li>
<p>null – use the default value<br>
A null value can therefore be used to
dynamically (e.g. by request parameter), turn on or off special features
without too much work.</p>
</li>
<li>
<p>Invalid value – throw an exception<br>
If a value is provided but is not valid, it&#8217;s
likely a typo or another mistake.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Dynamic attributes without a fixed set of
valid values:<br>
The rules below assume that if the type of
the value does not match the expected type, the EL will have applied
coercion rules to try to accomodate the input value. Moreover, if the
expected type is one of the types handled by the EL coercion rules, the
EL will in most cases coerce null to an approriate value. For instance,
if the expected type is a <em>Number</em>, the EL will coerce a null value to
0, if it&#8217;s <em>Boolean</em> it will be coerced to false.</p>
<div class="ulist">
<ul>
<li>
<p>null – behavior specific to the action<br>
If this rule is applied, it&#8217;s because the EL
could not coerce the null into an appropriate default value. It is
therefore up to the action to deal with the null value and is documented
in the "Null &amp; Error Handling" section of the action.</p>
</li>
<li>
<p>Invalid type – throw an exception</p>
</li>
<li>
<p>Invalid value – throw an exception</p>
</li>
</ul>
</div>
</li>
<li>
<p>Exceptions caused by the body content:<br>
Always propagate, possibly after handling
them (e.g. <code>&lt;sql:transaction&gt;</code>).</p>
</li>
<li>
<p>Exceptions caused by the action itself:<br>
Always propagate, possibly after handling
them.</p>
</li>
<li>
<p>Exceptions caused by the EL:<br>
Always propagate.</p>
</li>
<li>
<p>Exceptions caused by XPath:<br>
Always propagate.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Page authors may catch an exception using
<code>&lt;c:catch&gt;</code>, which exposes the exception through its <em>var</em> attribute.
<em>var</em> is removed if no exception has occurred.</p>
</div>
<div class="paragraph">
<p>When this specification requires an action to
throw an exception, this exception must be an instance of
<em>jakarta.servlet.jsp.JspException</em> or a subclass. If an action catches any
exceptions that occur in its body, its tag handler must provide the
caught exception as the root cause of the <em>JspException</em> it re-throws.</p>
</div>
<div class="paragraph">
<p>Also, by default, Jakarta Standard Tag Library actions do not catch
or otherwise handle exceptions that occur during evaluation of their
body content. If they do, it is documented in their "Null &amp; Error
Handling" or "Description" section.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-data"><a class="anchor" href="#configuration-data"></a>2.8. Configuration Data</h3>
<div class="paragraph">
<p>Context initialization parameters (see
Servlet specification) are useful to configure the behavior of actions.
For example, it is possible in the Jakarta Standard Tag Library to define the resource bundle used
by I18N actions via the deployment descriptor (web.xml) as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;web-app&gt;
...
    &lt;context-param&gt;
        &lt;param-name&gt;jakarta.servlet.jsp.jstl.fmt.localizationContext&lt;/param-name&gt;
        &lt;param-value&gt;com.acme.MyResources&lt;/param-value&gt;
    &lt;/context-param&gt;
...
&lt;/web-app&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In many cases, it is also useful to allow
configuration data to be overridden dynamically for a particular Jakarta Server Pages
scope (page, request, session, application) via a scoped variable. The Jakarta Standard Tag Library
refers to scoped variables used for that purpose as configuration
variables.</p>
</div>
<div class="paragraph">
<p>According to the Jakarta Server Pages specification
(Jakarta Server Pages.2.8.2), a scoped variable name should refer to a unique object at
all points in the execution. This means that all the different scopes
(page, request, session, and application) that exist within a
<em>PageContext</em> really should behave as a single name space; setting a
scoped variable in any one scope overrides it in any of the other
scopes.</p>
</div>
<div class="paragraph">
<p>Given this constraint imposed by the Jakarta Server Pages
specification, and in order to allow a configuration variable to be set
for a particular scope without affecting its settings in any of the
other scopes, the Jakarta Standard Tag Library provides the <em>jakarta.servlet.jsp.jstl.core.Config</em> class. The <em>Config</em> class
transparently manipulates the name of configuration variables so they
behave as if scopes had their own private name space. Details on the
name manipulations involved are voluntarily left unspecified and are
handled transparently by the <em>Config</em> class. This ensures flexibility
should the "scope name space" issue be addressed in the future by the
Jakarta Server Pages specification.</p>
</div>
<div class="paragraph">
<p>When setting configuration data via the
deployment descriptor, the name associated with the context
initialization parameter (e.g.
jakarta.servlet.jsp.jstl.fmt.localizationContext) must be used and only
<em>String</em> values may be specified. Configuration data that can be set
both through a context initialization parameter and configuration
variables is referred to as a configuration setting in this
specification.</p>
</div>
<div class="paragraph">
<p>As mentioned above, application developers
may access configuration data through class <em>jakarta.servlet.jsp.jstl.core.Config</em>. As a convenience,
constant <em>String</em> values have been defined in the <em>Config</em> class for
each configuration setting supported by the Jakarta Standard Tag Library. The values of these
constants are the names of the context intialization parameters.</p>
</div>
<div class="paragraph">
<p>Each configuration variable clearly specifies
the Java data type(s) it supports. If the type of the object used as the
value of a configuration variable does not match one of those supported
by the configuration variable, conversion is performed according to the
conversion rules defined in the expression language. Setting a
configuration variable is therefore exactly the same as setting an
attribute value of an action using the EL. A failure of these conversion
rules to determine an appropriate type coersion leads to a
<em>JspException</em> at runtime.</p>
</div>
</div>
<div class="sect2">
<h3 id="default-values"><a class="anchor" href="#default-values"></a>2.9. Default Values</h3>
<div class="paragraph">
<p>It is often desirable to display a default
value if the output of an action yields a null value. This can be done
in a generic way in the Jakarta Standard Tag Library by exporting the output of an action via
attribute <em>var</em>, and then displaying the value of that scoped variable
with action <code>&lt;c:out&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatDate var="formattedDate" value="${reservationDate}"/&gt;
Date: &lt;c:out value="${formattedDate}" default="not specified"/&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expression-language-overview"><a class="anchor" href="#expression-language-overview"></a>3. Expression Language Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jakarta Standard Tag Library makes use of the Jakarta Expression Language.</p>
</div>
<div class="paragraph">
<p>This chapter provides a simple overview of
the key features of the expression language, it is therefore
non-normative. Please refer to the Jakarta Expression Language specification for the formal
definition of the Expression Language.</p>
</div>
<div class="sect2">
<h3 id="expressions-and-attribute-values"><a class="anchor" href="#expressions-and-attribute-values"></a>3.1. Expressions and Attribute Values</h3>
<div class="paragraph">
<p>The Expression Language is invoked exclusively via the
construct <em>${expr}</em>. In the sample code below, an EL expression is
used to set the value of attribute <em>test</em>, while a second one is used
to display the title of a book.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:if test="${book.price &lt;= user.preferences.spendingLimit}"&gt;
    The book ${book.title} fits your budget!
&lt;/c:if&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible for an attribute to
contain more than one Expression Language expression, mixed with static text. For
example, the following would display "Price of productName is
productPrice" for a list of products.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="product" items="${products}"&gt;
    &lt;c:out value="Price of ${product.name} is ${product.price}"/&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="accessing-application-data"><a class="anchor" href="#accessing-application-data"></a>3.2. Accessing Application Data</h3>
<div class="paragraph">
<p>An identifier in the Expression Language refers to the Jakarta Server Pages
scoped variable returned by a call to
<em>PageContext.findAttribute(identifier)</em>. This variable can therefore
reside in any of the four Jakarta Server Pages scopes: page, request, session, or
application. A null value is returned if the variable does not exist in
any of the scopes.</p>
</div>
<div class="paragraph">
<p>The Expression Language also defines implicit objects to
support easy access to application data that is of interest to a page
author. Implicit objects <em>pageScope</em>, <em>requestScope</em>, <em>session</em> Scope,
and <em>applicationScope</em> provide access to the scoped variables in each
one of these Jakarta Server Pages scopes. It is also possible to access HTTP request
parameters via the implicit objects <em>param</em> and <em>paramValues</em>. The implicit object <em>param</em>
is a <em>Map</em> object where <em>param["foo"]</em> returns the first string value
associated with request parameter <em>foo</em>, while <em>paramValues["foo"]</em>
returns an array of all string values associated with that request
parameter.</p>
</div>
<div class="paragraph">
<p>The code below displays all request
parameters along with all their associated values.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="aParam"items="${paramValues}"&gt;
    param: ${aParam.key}
    values:
    &lt;c:forEach var="aValue" items="${aParam.value}"&gt;
        ${aValue}
    &lt;/c:forEach&gt;
    &lt;br&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Request headers are also accessible in a
similar fashion via implicit objects <em>header</em> and <em>headerValues</em>.
<em>initParam</em> gives access to context initialization parameters, while
<em>cookie</em> exposes cookies received in the request.</p>
</div>
<div class="paragraph">
<p>Implicit object <em>pageContext</em> is also
provided for advanced usage, giving access to all properties associated
with the <em>PageContext</em> of a Jakarta Server Pages page such as the <em>HttpServletRequest</em>,
<em>ServletContext</em>, and <em>HttpSession</em> objects and their properties.</p>
</div>
</div>
<div class="sect2">
<h3 id="nested-properties-and-accessing-collections"><a class="anchor" href="#nested-properties-and-accessing-collections"></a>3.3. Nested Properties and Accessing Collections</h3>
<div class="paragraph">
<p>The application data that a page author
manipulates in a Jakarta Server Pages page usually consists of objects that comply with
the JavaBeans specification, or that represent collections such as
lists, maps, or arrays.</p>
</div>
<div class="paragraph">
<p>The Expression Language recognizes the importance of these
data structures and provides two operators, "." and "[]", to make it
easy to access the data encapsulated in these objects.</p>
</div>
<div class="paragraph">
<p>The "." operator can be used as a convenient
shorthand for property access when the property name follows the
conventions of Java identifiers. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Dear ${user.firstName}
from ${user.address.city},
thanks for visiting our website!</pre>
</div>
</div>
<div class="paragraph">
<p>The "[]" operator allows for more generalized
access, as shown below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%-- "productDir" is a Map object containing the description of
products, "preferences" is a Map object containing the preferences of a user --%&gt;
product:
${productDir[product.custId]}
shipping preference:
${user.preferences["shipping"]}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="operators"><a class="anchor" href="#operators"></a>3.4. Operators</h3>
<div class="paragraph">
<p>The operators supported in the Expression Language handle the
most common data manipulations. The standard relational, arithmetic, and
logical operators are provided in the Expression Language. A very useful "empty" operator
is also provided.</p>
</div>
<div class="paragraph">
<p>The six standard relational operators are
supported: <em>==</em> (or <em>eq</em>), <em>!=</em> (or <em>ne</em>), <em>&lt;</em> (or <em>lt</em>), <em>&gt;</em> (or
<em>gt</em>), <em>&#8656;</em> (or <em>le</em>), <em>&gt;=</em> (or <em>ge</em>). The second versions of the
last 4 operators are made available to avoid having to use entity
references in XML syntax.</p>
</div>
<div class="paragraph">
<p>Arithmetic operators consist of addition (<em>+</em>), subtraction (<em>-</em>), multiplication (<em>*</em>), division (<em>/</em> or
<em>div</em>), and remainder/modulo (<em>%</em> or <em>mod</em>).</p>
</div>
<div class="paragraph">
<p>Logical operators consist of <em>&amp;&amp;</em> (or <em>and</em>), <em>||</em> (or <em>or</em>), and <em>!</em> (or <em>not</em>).</p>
</div>
<div class="paragraph">
<p>The <em>empty</em> operator is a prefix operator
that can used to determine if a value is null or empty. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:if test="${empty param.name}"&gt;
    Please specify your name.
&lt;/c:if&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="automatic-type-conversion"><a class="anchor" href="#automatic-type-conversion"></a>3.5. Automatic Type Conversion</h3>
<div class="paragraph">
<p>The application data a page author has access
to may not always exactly match the type expected by the attribute of an
action or the type expected for an Expression Language operator. The Expression Language supports an
exhaustive set of rules to coerce the type of the resulting value to the
expected type.</p>
</div>
<div class="paragraph">
<p>For example, if request attributes
<em>beginValue</em> and <em>endValue</em> are <em>Integer</em> objects, they will
automatically be coerced to <em>ints</em> when used with the <code>&lt;c:forEach&gt;</code>
action.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach begin="${requestScope.beginValue}"
           end="${requestScope.endValue}"&gt;
    ...
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the example below, the parameter String
value <em>param.start</em> is coerced to a number and is then added to 10 to
yield an int value for attribute <em>begin</em>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach items="${products}" begin="${param.start + 10}"&gt;
    ...
&lt;/c:forEach&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="default-values-2"><a class="anchor" href="#default-values-2"></a>3.6. Default Values</h3>
<div class="paragraph">
<p>Jakarta Server Pages are mostly used in presentation.
Experience suggests that it is important to be able to provide as good a
presentation as possible, even when simple errors occur in the page. To
satisfy this requirement, the Expression Language provides default values rather than
errors when failure to evaluate an expression is deemed "recoverable".
Default values are type-correct values that allow a page to easily
recover from these error conditions.</p>
</div>
<div class="paragraph">
<p>In the following example, the expression
"${user.address.city}" evaluates to <em>null</em> rather than throwing a
<em>NullPointerException</em> if there is no address associated with the <em>user</em>
object. This way, a sensible default value can be displayed without
having to worry about exceptions being thrown by the Jakarta Server Pages page.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>City: &lt;c:out value="${user.address.city}" default="N/A"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the following example, the addition
operator considers the value of <em>param.start</em> to be 0 if it is not
defined, therefore evaluating the expression to 10.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach items="${products}" begin="${param.start + 10}"&gt;
    ...
&lt;/c:forEach&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-purpose-actions-core-tag-library"><a class="anchor" href="#general-purpose-actions-core-tag-library"></a>4. General-Purpose Actions: core tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter introduces general purpose
actions to support the manipulation of scoped variables as well as to
handle error conditions.</p>
</div>
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The <code>&lt;c:out&gt;</code> action provides a capability
similar to Jakarta Server Pages expressions such as &lt;%= scripting-language-expression %&gt;
or ${el-expression}. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>You have &lt;c:out value="${sessionScope.user.itemCount}"/&gt; items.</pre>
</div>
</div>
<div class="paragraph">
<p>By default, <code>&lt;c:out&gt;</code> converts the characters
&lt;, &gt;, ', ", &amp; to their corresponding character entity codes (e.g. &lt; is
converted to &lt;). If these characters are not converted, the page may
not be rendered properly by the browser, and it could also open the door
for cross-site scripting attacks (e.g. someone could post JavaScript
code for closing the window to an online discussion forum). The
conversion may be bypassed by specifying false to the <em>escapeXml</em>
attribute.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;c:out&gt;</code> action also supports the notion
of default values for cases where the value of an Expression Language expression is null.
In the example below, the value "unknown" will be displayed if the
property <em>city</em> is not accessible.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:out value="${customer.address.city}" default="unknown"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The action <code>&lt;c:set&gt;</code> is used to set the value
of a Jakarta Server Pages scoped attribute as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set var="foo" value="value"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to set the value of a
scoped variable (Jakarta Server Pages scoped attribute) from the body of the <code>&lt;c:set&gt;</code>
action. This solves the problem associated with not being able to set an
attribute value from another action. In the past, a tag developer would
often implement extra "attributes as tags" so the value of these
attributes could be set from other actions.</p>
</div>
<div class="paragraph">
<p>For example, the action <code>&lt;acme:att1&gt;</code> was
created only to support setting the value of <em>att1</em> of the parent tag
<code>&lt;acme:atag&gt;</code> from other actions .</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;acme:atag&gt;

 &lt;acme:att1&gt;

 &lt;acme:foo&gt;mumbojumbo&lt;/acme:foo&gt;

 &lt;/acme:att1&gt;

&lt;/acme:atag&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>With the <code>&lt;c:set&gt;</code> tag, this can be handled
without requiring the extra <code>&lt;acme:att1&gt;</code> tag.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set var="att1"&gt;

 &lt;acme:foo&gt;mumbojumbo&lt;/acme:foo&gt;

&lt;/c:set&gt;

&lt;acme:atag att1="${att1}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>&lt;c:set&gt;</code> action
sets the value of the <em>att1</em> scoped variable to the output of the
<code>&lt;acme:foo&gt;</code> action. <code>&lt;c:set&gt;</code> – like all Jakarta Standard Tag Library actions that create scoped
attributes – creates scoped attributes in "page" scope by default.</p>
</div>
<div class="paragraph">
<p><code>&lt;c:set&gt;</code> may also be used to set the property
of a JavaBeans object, or add or set a specific element in a
<em>java.util.Map</em> object. For example:.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;!-- set property in JavaBeans object --&gt;
&lt;c:set target="${cust.address}" property="city" value="${city}"/&gt;

&lt;!-- set/add element in Map object --&gt;
&lt;c:set target="${preferences}" property="color" value="${param.color}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Finally, <code>&lt;c:set&gt;</code> may also be used to set a
deferred-value that can later be evaluated by a tag handler. In this
case, no scope can be specified. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;!-- set deferred value --&gt;
&lt;c:set var="d" value="#{handler.everythingDisabled}"/&gt;
...

&lt;h:inputText id="i1" disabled="#\{d}"/&gt;
&lt;h:inputText id="i2" disabled="#\{d}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Action <code>&lt;c:remove&gt;</code> is the natural companion to
<code>&lt;c:set&gt;</code>, allowing the explicit removal of scoped variables. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:remove var="cachedResult" scope="application"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the <code>&lt;c:catch&gt;</code> action provides a
complement to the Jakarta Server Pages error page mechanism. It is meant to allow page
authors to recover gracefully from error conditions that they can
control. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:catch var="exception"&gt;
&lt;!-- Execution we can recover from if exception occurs --&gt;
...
&lt;/c:catch&gt;
&lt;c:if test="${exception != null}"&gt;
Sorry. Processing could not be performed because...
&lt;/c:if&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="c:out"><a class="anchor" href="#c:out"></a>4.2. &lt;c:out&gt;</h3>
<div class="paragraph">
<p>Evaluates an expression and outputs the result
of the evaluation to the current <em>JspWriter</em> object.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Without a body</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:out value="value" [escapeXml="{<span class="underline">true</span>|false}"]
    [default="defaultValue"] /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>With a body</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:out value="value" [escapeXml="{<span class="underline">true</span>|false}"]&gt;
    default value
&lt;/c:out&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Object</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression to be evaluated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>escapeXml</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines whether characters &lt;,&gt;,&amp;,'," in
the resulting string should be converted to their corresponding
character entity codes. Default value is true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>default</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Object</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default value if the resulting value is
null.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<p>If <em>value</em> is null, the default value takes
over. If no default value is specified, it itself defaults to an empty
string.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The expression to be evaluated is specified
via the <em>value</em> attribute.</p>
</div>
<div class="paragraph">
<p>If the result of the evaluation is not a
<em>java.io.Reader</em> object, then it is coerced to a <em>String</em> and is
subsequently emitted into the current <em>JspWriter</em> object.</p>
</div>
<div class="paragraph">
<p>If the result of the evaluation is a
<em>java.io.Reader</em> object, data is first read from the <em>Reader</em> object and
then written into the current <em>JspWriter</em> object. This special
processing associated with <em>Reader</em> objects should help improve
performance when large amount of data must be read and then displayed to
the page.</p>
</div>
<div class="paragraph">
<p>If <em>escapeXml</em> is true, the following
character conversions are applied:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Character</th>
<th class="tableblock halign-left valign-top">Character Entity Code</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&amp;lt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&amp;gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&amp;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&amp;amp;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;#039;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;#034;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The default value can be specified either via
the <em>default</em> attribute (using the syntax without a body), or within the
body of the tag (using the syntax with a body). It defaults to an empty
string.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="c:set"><a class="anchor" href="#c:set"></a>4.3. &lt;c:set&gt;</h3>
<div class="paragraph">
<p>Sets the value of a scoped variable or a
property of a target object.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Set the value of a scoped
variable using attribute value</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set value="value"
    var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: Set the value of a scoped
variable using body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    body content
&lt;/c:set&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 3: Set a property of a target object
using attribute value</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set value="value"
    target="target" property="propertyName"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 4: Set a property of a target object
using body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set target="target" property="propertyName"&gt;
    body content
&lt;/c:set&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 5: Set a deferred value</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:set var="varName" value="deferred-value"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Object</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expression to be evaluated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable to hold the value specified in the
action. The type of the scoped variable is whatever type the value
expression evaluates to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">target</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target
object whose property will be set. Must evaluate to a JavaBeans object
with setter property <em>property</em>, or to a <em>java.util.Map</em> object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of
the property to be set in the target object.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>Syntax 3 and 4: Throw an exception under any
of the following conditions:</p>
<div class="ulist">
<ul>
<li>
<p><em>target</em> evaluates to null</p>
</li>
<li>
<p><em>target</em> is not a <em>java.util.Map</em> object and
is not a JavaBeans object that supports setting property <em>property</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <em>value</em> is null</p>
<div class="ulist">
<ul>
<li>
<p>Syntax 1: the scoped variable defined by
<em>var</em> and <em>scope</em> is removed.</p>
<div class="ulist">
<ul>
<li>
<p>If attribute <em>scope</em> is specified, the scoped
variable is removed according to the semantics of
<em>PageContext.removeAttribute(varName, scope)</em>.</p>
</li>
<li>
<p>Otherwise, there is no way to differentiate
between syntax 1 and syntax 5. The scoped variable is removed according
to the semantics of <em>PageContext.removeAttribute(varName)</em>, and the
variable is removed from the VariableMapper as well.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Syntax 3:</p>
<div class="ulist">
<ul>
<li>
<p>if <em>target</em> is a <em>Map</em>, remove the entry
with the key identified by <em>property</em>.</p>
</li>
<li>
<p>if <em>target</em> is a JavaBean component, set the
property to null.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Syntax 5:</p>
<div class="ulist">
<ul>
<li>
<p>There is no way to differentiate between
syntax 1 (where scope is not specified) and syntax 5. The scoped
variable is removed according to the semantics of
<em>PageContext.removeAttribute(varName)</em>, and the variable is removed
from the VariableMapper as well.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Syntax 1 and 2 set the value of a the scoped
variable identified by <em>var</em> and <em>scope</em>.</p>
</div>
<div class="paragraph">
<p>Syntax 3 and 4:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the target expression evaluates to a
<em>java.util.Map</em> object, set the value of the element associated with the
key identified by <em>property</em>. If the element does not exist, add it to
the <em>Map</em> object.</p>
</li>
<li>
<p>Otherwise, set the value of the property
<em>property</em> of the JavaBeans object <em>target</em>. If the type of the value
to be set does not match the type of the bean property, conversion is
performed according to the conversion rules defined in the expression
language (see <a href="EL-152.html#UNKNOWN">See Type Conversion</a>). With the
exception of a null value, setting a bean property with &lt;c:set&gt; is
therefore exactly the same as setting an attribute value of an action
using the Expression Language. A failure of these conversion rules to determine an
appropriate type coersion leads to a <em>JspException</em> at runtime.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Syntax 5:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Map the deferred-value specified to the "var"
attribute into the Expression Language VariableMapper.</p>
</li>
<li>
<p>Some implementation notes illustrating how
the &lt;c:set&gt; tag handler may process a deferred-value specified for the
"value" attribute.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doStartTag()<br>
&#8230;&#8203;<br>
 // 'value' is a deferred-value<br>
 // Get the current Expression Language VariableMapper<br>
VariableMapper vm = jspContext.getELContext().getVariableMapper();<br>
 // Assign the expression to the variable specified<br>
 // in the 'var' attribute, so any reference to that<br>
 // variable will be replaced by the expression is<br>
 // subsequent Expression Language evaluations.<br>
vm.setVariable(getVar(), (ValueExpression)getValue());<br>
&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cremove"><a class="anchor" href="#cremove"></a>4.4. &lt;c:remove&gt;</h3>
<div class="paragraph">
<p>Removes a scoped variable.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;c:remove var="varName"
          [scope="{page|request|session|application}"]/&gt;</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the scoped variable to be removed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;c:remove&gt;</code> action removes a scoped
variable.</p>
</div>
<div class="paragraph">
<p>If attribute <em>scope</em> is not specified, the
scoped variable is removed according to the semantics of
<em>PageContext.removeAttribute(varName)</em>. If attribute <em>scope</em> is
specified, the scoped variable is removed according to the semantics of
<em>PageContext.removeAttribute(varName, scope)</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="ccatch"><a class="anchor" href="#ccatch"></a>4.5. &lt;c:catch&gt;</h3>
<div class="paragraph">
<p>Catches a <em>java.lang.Throwable</em> thrown by any
of its nested actions.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;c:catch [var="varName"]&gt;
    nested actions
&lt;/c:catch&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The body content is processed by the Jakarta Server Pages
container and the result is written to the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the exception thrown from a nested
action. The type of the scoped variable is the type of the exception
thrown.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;c:catch&gt;</code> action allows page authors to
handle errors from any action in a uniform fashion, and allows for error
handling for multiple actions at once.</p>
</div>
<div class="paragraph">
<p><code>&lt;c:catch&gt;</code> provides page authors with granular
error handling: Actions that are of central importance to a page should
not be encapsulated in a <code>&lt;c:catch&gt;</code>, so their exceptions will propagate
to an error page, whereas actions with secondary importance to the page
should be wrapped in a <code>&lt;c:catch&gt;</code>, so they never cause the error page
mechanism to be invoked.</p>
</div>
<div class="paragraph">
<p>The exception thrown is stored in the scoped
variable identified by <em>var</em>, which always has page scope. If no
exception occurred, the scoped variable identified by <em>var</em> is removed
if it existed.</p>
</div>
<div class="paragraph">
<p>If <em>var</em> is missing, the exception is simply
caught and not saved.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conditional-actions-core-tag-library"><a class="anchor" href="#conditional-actions-core-tag-library"></a>5. Conditional Actions: core tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The output of a Jakarta Server Pages page is often conditional
on the value of dynamic application data. A simple scriptlet with an
<em>if</em> statement can be used in such situations, but this forces a page
author to use a scripting language whose syntax may be troublesome (e.g.
one may forget the curly braces).</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library conditional actions make it easy to
do conditional processing in a Jakarta Server Pages page.</p>
</div>
<div class="sect2">
<h3 id="overview-2"><a class="anchor" href="#overview-2"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The Jakarta Standard Tag Library conditional actions are designed to
support the two most common usage patterns associated with conditional
processing: <em>simple</em> conditional execution and <em>mutually exclusive</em>
conditional execution.</p>
</div>
<div class="paragraph">
<p>A <em>simple</em> conditional execution action
evaluates its body content only if the test condition associated with it
is true. In the following example, a special greeting is displayed only
if this is a user&#8217;s first visit to the site:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:if test="${user.visitCount == 1}"&gt;
    This is your first visit. Welcome to the site!
&lt;/c:if&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>With <em>mutually exclusive</em> conditional
execution, only one among a number of possible alternative actions gets
its body content evaluated.</p>
</div>
<div class="paragraph">
<p>For example, the following sample code shows
how the text rendered depends on a user&#8217;s membership category.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:choose&gt;
    &lt;c:when test="${user.category == 'trial'}"&gt;
        ...
    &lt;/c:when&gt;
    &lt;c:when test="${user.category == 'member'}"&gt;
        ...
    &lt;/c:when&gt;
    &lt;c:when test="${user.category == 'vip'}"&gt;
        ...
    &lt;/c:when&gt;
    &lt;c:otherwise&gt;
        ...
    &lt;/c:otherwise&gt;
&lt;/c:choose&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>An <em>if/then/else</em> statement can be easily
achieved as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:choose&gt;
    &lt;c:when test="${count == 0}"&gt;
        No records matched your selection.
    &lt;/c:when&gt;
    &lt;c:otherwise&gt;
        ${count} records matched your selection.
    &lt;/c:otherwise&gt;
&lt;/c:choose&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="custom-logic-actions"><a class="anchor" href="#custom-logic-actions"></a>5.2. Custom Logic Actions</h3>
<div class="paragraph">
<p>It is important to note that the <code>&lt;c:if&gt;</code> and
<code>&lt;c:when&gt;</code> actions have different semantics. A <code>&lt;c:if&gt;</code> action will always
process its body content if its test condition evaluates to true. A
<code>&lt;c:when&gt;</code> action will process its body content if it is the first one in
a series of <code>&lt;c:when&gt;</code> actions whose test condition evaluates to true.</p>
</div>
<div class="paragraph">
<p>These semantic differences are enforced by
the fact that only <code>&lt;c:when&gt;</code> actions can be used within the context of a
mutually exclusive conditional execution (<code>&lt;c:choose&gt;</code> action). This clean
separation of behavior also impacts the way custom logic actions (i.e.
actions who render their bodies depending on the result of a test
condition) should be designed. Ideally, the result associated with the
evaluation of a custom logic action should be usable both in the context
of a simple conditional execution, as well as in a mutually exclusive
conditional execution.</p>
</div>
<div class="paragraph">
<p>The proper way to enable this is by simply
having the custom logic action export the result of the test condition
as a scoped variable. This boolean result can then be used as the test
condition of a <code>&lt;c:when&gt;</code> action.</p>
</div>
<div class="paragraph">
<p>In the example below, the fictitious custom
action <code>&lt;acme:fullMoon&gt;</code> tells whether or not a page is accessed during a
full moon. The behavior of an <em>if/then/else</em> statement is made possible
by having the result of the <code>&lt;acme:fullMoon&gt;</code> action exposed as a boolean
scoped variable that is then used as the test condition in the <code>&lt;c:when&gt;</code>
action.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;acme:fullMoon var="isFullMoon"/&gt;
&lt;c:choose&gt;
    &lt;c:when test="${isFullMoon}"&gt;
        ...
    &lt;/c:when&gt;
    &lt;c:otherwise&gt;
        ...
    &lt;/c:otherwise&gt;
&lt;/c:choose&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To facilitate the implementation of
conditional actions where the boolean result is exposed as a Jakarta Server Pages scoped
variable, class <em>jakarta.servlet.jsp.jstl.core.ConditionalTagSupport</em> has been defined in this
specification.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cif"><a class="anchor" href="#cif"></a>5.3. &lt;c:if&gt;</h3>
<div class="paragraph">
<p>Evaluates its body content if the expression
specified with the <em>test</em> attribute is true.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:if test="testCondition"
    var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:if test="testCondition"
        [var="varName"] [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    body content
&lt;/c:if&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. If the test condition evaluates to true,
the Jakarta Server Pages container processes the body content and then writes it to the
current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>test</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
test condition that determines whether or not the body content should be
processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the resulting value of the test
condition. The type of the scoped variable is <em>Boolean</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>If the test condition evaluates to true, the
body content is evaluated by the Jakarta Server Pages container and the result is output
to the current <em>JspWriter</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cchoose"><a class="anchor" href="#cchoose"></a>5.4. &lt;c:choose&gt;</h3>
<div class="paragraph">
<p>Provides the context for mutually exclusive
conditional execution.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;c:choose&gt;
    body content (&lt;when&gt; and &lt;otherwise&gt; subtags)
&lt;/c:choose&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The body content is processed by the Jakarta Server Pages
container (at most one of the nested actions will be processed) and
written to the current <em>JspWriter</em>.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Attributes</strong></div>
<p>None.</p>
</div>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>The body of the <code>&lt;c:choose&gt;</code> action can only
contain:</p>
<div class="ulist">
<ul>
<li>
<p>White spaces<br>
May appear anywhere around the <code>&lt;c:when&gt;</code> and <code>&lt;c:otherwise&gt;</code> subtags.</p>
</li>
<li>
<p>1 or more <code>&lt;c:when&gt;</code> actions<br>
Must all appear before <code>&lt;c:otherwise&gt;</code></p>
</li>
<li>
<p>0 or 1 <code>&lt;c:otherwise&gt;</code> action<br>
Must be the last action nested within <code>&lt;c:choose&gt;</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;c:choose&gt;</code> action processes the body of
the first <code>&lt;c:when&gt;</code> action whose test condition evaluates to true. If
none of the test conditions of nested <code>&lt;c:when&gt;</code> actions evaluates to
true, then the body of an <code>&lt;c:otherwise&gt;</code> action is processed, if present.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cwhen"><a class="anchor" href="#cwhen"></a>5.5. &lt;c:when&gt;</h3>
<div class="paragraph">
<p>Represents an alternative within a <code>&lt;c:choose&gt;</code>
action.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;c:when test="testCondition"&gt;
    body content
&lt;/c:when&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. If this is the first &lt;c:when&gt; action to
evaluate to true within &lt;c:choose&gt;, the Jakarta Server Pages container processes the body
content and then writes it to the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>test</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
test condition that determines whether or not the body content should be
processed.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must have <em>&lt;c:choose&gt;</em> as an immediate
parent.</p>
</li>
<li>
<p>Must appear before an &lt;c:otherwise&gt; action
that has the same parent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Within a <code>&lt;c:choose&gt;</code> action, the body content
of the first <code>&lt;c:when&gt;</code> action whose test condition evaluates to true is
evaluated by the Jakarta Server Pages container, and the result is output to the current
<em>JspWriter</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cotherwise"><a class="anchor" href="#cotherwise"></a>5.6. &lt;c:otherwise&gt;</h3>
<div class="paragraph">
<p>Represents the last alternative within a
<code>&lt;c:choose&gt;</code> action.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;c:otherwise&gt;
    conditional block
&lt;/c:otherwise&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. If no <code>&lt;c:when&gt;</code> action nested within
<code>&lt;c:choose&gt;</code> evaluates to true, the Jakarta Server Pages container processes the body
content and then writes it to the current <em>JspWriter</em>.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Attributes</strong></div>
<p>None.</p>
</div>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must have <code>&lt;c:choose&gt;</code> as an immediate parent.</p>
</li>
<li>
<p>Must be the last nested action within
<code>&lt;c:choose&gt;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Within a <code>&lt;c:choose&gt;</code> action, if none of the
nested <code>&lt;c:when&gt;</code> test conditions evaluates to true, then the body content
of the <code>&lt;c:otherwise&gt;</code> action is evaluated by the Jakarta Server Pages container, and the
result is output to the current <em>JspWriter</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iterator-actions-core-tag-library"><a class="anchor" href="#iterator-actions-core-tag-library"></a>6. Iterator Actions: core tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Iterating over a collection of objects is a
common occurrence in a Jakarta Server Pages page. Just as with conditional processing, a
simple scriptlet can be used in such situations. However, this once
again forces a page author to be knowledgeable in many aspects of the
Java programming language (how to iterate on various collection types,
having to cast the returned object into the proper type, proper use of
the curly braces, etc.).</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library iterator actions simplify iterating
over a wide variety of collections of objects.</p>
</div>
<div class="sect2">
<h3 id="overview-3"><a class="anchor" href="#overview-3"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The <code>&lt;c:forEach&gt;</code> action repeats its nested
body content over the collection of objects specified by the <em>items</em>
attribute. For example, the Jakarta Server Pages code below creates an HTML table with
one column that shows the default display value of each item in the
collection.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;table&gt;
    &lt;c:forEach var="customer" items="${customers}"&gt;
        &lt;tr&gt;&lt;td&gt;${customer}&lt;/td&gt;&lt;/tr&gt;
    &lt;/c:forEach&gt;
&lt;/table&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;c:forEach&gt;</code> action has the following
features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Supports all standard Java SE™ platform collection types.<br>
A page author therefore does not have to
worry about the specific type of the collection of objects to iterate
over (<a href="#collections-of-objects-to-iterate-over">Collections of Objects to Iterate Over</a>).</p>
</li>
<li>
<p>Exports an object that holds the current item of the iteration.<br>
Normally, each object exposed by <code>&lt;c:forEach&gt;</code>
is an item of the underlying collection being iterated over. There are
two exceptions to this to facilitate access to the information contained
in arrays of primitive types, as well as in <em>Map</em> objects (see
<a href="#map">Map</a>).</p>
</li>
<li>
<p>Exports an object that holds information
about the status of the iteration (see <a href="#iteration-status">Iteration Status</a>).</p>
</li>
<li>
<p>Supports range attributes to iterate over a
subset of the original collection (see <a href="#range-attributes">Range Attributes</a>).</p>
</li>
<li>
<p>Exposes an interface as well as a base implementation class.<br>
Developers can easily implement collaborating
subtags as well as their own iteration tags (see
<a href="#tag-collaboration">Tag Collaboration</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>&lt;c:forEach&gt;</code> is the base iteration action in
the Jakarta Standard Tag Library. It handles the most common iteration cases conveniently. Other
iteration actions are also provided in the tag library to support
specific, specialized functionality not handled by <code>&lt;c:forEach&gt;</code> (e.g.
<code>&lt;c:forTokens&gt;</code> (<a href="#c:forTokens">&lt;c:forTokens&gt;</a>) and
<code>&lt;x:forEach&gt;</code> (<a href="#x:forEach">&lt;x:forEach&gt;</a>). Developers
can also easily extend the behavior of this base iteration action to
customize it according to an application&#8217;s specific needs.</p>
</div>
<div class="sect3">
<h4 id="collections-of-objects-to-iterate-over"><a class="anchor" href="#collections-of-objects-to-iterate-over"></a>6.1.1. Collections of Objects to Iterate Over</h4>
<div class="paragraph">
<p>A large number of collection types are
supported by <code>&lt;c:forEach&gt;</code>, including all implementations of
<em>java.util.Collection</em> (includes <em>List</em>, <em>LinkedList</em>, <em>ArrayList</em>,
<em>Vector</em>, <em>Stack</em>, <em>Set</em>), and <em>java.util.Map</em> (includes <em>HashMap</em>,
<em>Hashtable</em>, <em>Properties</em>, <em>Provider</em>, <em>Attributes</em>).</p>
</div>
<div class="paragraph">
<p>Arrays of objects as well as arrays of
primitive types (e.g. <em>int</em>) are also supported. For arrays of
primitive types, the current item for the iteration is automatically
wrapped with its standard wrapper class (e.g. <em>Integer</em> for <em>int</em>,
<em>Float</em> for <em>float</em>, etc.).</p>
</div>
<div class="paragraph">
<p>Implementations of <em>java.util.Iterator</em> and
<em>java.util.Enumeration</em> are supported as well but these must be used
with caution. <em>Iterator</em> and <em>Enumeration</em> objects are not resettable so
they should not be used within more than one iteration tag.</p>
</div>
<div class="paragraph">
<p><strong>Deprecated</strong>: Finally,
<em>java.lang.String</em> objects can be iterated over if the string represents
a list of comma separated values (e.g.
"Monday,Tuesday,Wednesday,Thursday,Friday").<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
<div class="paragraph">
<p>Absent from the list of supported types is
<em>java.sql.ResultSet</em> (which includes <em>javax.sql.RowSet</em>). The reason
for this is that the SQL actions described in
<a href="#SQL_Action_Overview">Overview</a> use the
<em>jakarta.servlet.jsp.jstl.sql.Result</em> interface to access the data
returned from an SQL query. Class
<em>jakarta.servlet.jsp.jstl.sql.ResultSupport</em> allows business logic
developers to easily convert a <em>ResultSet</em> object into a
<em>jakarta.servlet.jsp.jstl.sql.Result</em> object, making life much easier for
a page author that needs to manipulate the data returned from a SQL
query.</p>
</div>
</div>
<div class="sect3">
<h4 id="map"><a class="anchor" href="#map"></a>6.1.2. Map</h4>
<div class="paragraph">
<p>If the <em>items</em> attribute is of type
<em>java.util.Map</em>, then the current item will be of type
<em>java.util.Map.Entry</em>, which has the following two properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>key</em> - the key under which this item is
stored in the underlying <em>Map</em></p>
</li>
<li>
<p><em>value</em> - the value that corresponds to this
key</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example uses <code>&lt;c:forEach&gt;</code> to
iterate over the values of a <em>Hashtable</em>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="entry" items="${myHashtable}"&gt;
    Next element is ${entry.value}/&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="iteration-status"><a class="anchor" href="#iteration-status"></a>6.1.3. Iteration Status</h4>
<div class="paragraph">
<p><code>&lt;c:forEach&gt;</code> also exposes information relative
to the iteration taking place. The example below creates an HTML table
with the first column containing the position of the item in the
collection, and the second containing the name of the product.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;table&gt;
    &lt;c:forEach var="product" items="${products}"
            varStatus="status"&gt;
        &lt;tr&gt;
            &lt;td&gt;${status.count}&lt;/td&gt;
            &lt;td&gt;${product.name}&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/c:forEach&gt;
&lt;/table&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>See the Javadoc for details on the <em>jakarta.servlet.jsp.jstl.core.LoopTagStatus</em> interface exposed by the
<em>varStatus</em> attribute.</p>
</div>
</div>
<div class="sect3">
<h4 id="range-attributes"><a class="anchor" href="#range-attributes"></a>6.1.4. Range Attributes</h4>
<div class="paragraph">
<p>A set of range attributes is available to
iterate over a subset of the collection of items. The <em>begin</em> and <em>end</em>
indices can be specified, along with a <em>step</em>. If the <em>items</em> attribute
is not specified, then the value of the current item is set to the
integer value of the current index. In this example, <em>i</em> would take
values from 100 to 110 (inclusive).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="i" begin="100" end="110"&gt;
    ${i}
&lt;/c:forEach&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tag-collaboration"><a class="anchor" href="#tag-collaboration"></a>6.1.5. Tag Collaboration</h4>
<div class="paragraph">
<p>Custom actions give developers the power to
provide added functionality to a Jakarta Server Pages application without requiring the
page author to use Java code. In this example, an item of the iteration
is processed differently depending upon whether it is an odd or even
element.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="product" items="${products}" varStatus="status"&gt;
    &lt;c:choose&gt;
        &lt;c:when test="${status.count % 2 == 0}"&gt;
            even item
        &lt;/c:when&gt;
        &lt;c:otherwise&gt;
            odd item
        &lt;/c:otherwise&gt;
    &lt;/c:choose&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If this type of processing is common, it
could be worth providing custom actions that yield simpler code, as
shown below.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="product" items="${products}"&gt;
    &lt;acme:even&gt;
        even item
    &lt;/acme:even&gt;
    &lt;acme:odd&gt;
        odd item
    &lt;/acme:odd&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In order to make this possible, custom
actions like <code>&lt;acme:odd&gt;</code> and <code>&lt;acme:even&gt;</code> leverage the fact that
<code>&lt;c:forEach&gt;</code> supports implicit collaboration via the interface <em>jakarta.servlet.jsp.jstl.core.LoopTag</em>.</p>
</div>
<div class="paragraph">
<p>The fact that <code>&lt;c:forEach&gt;</code> exposes an
interface also means that other actions with iterative behavior can be
developed using the same interface and will collaborate in the same
manner with nested tags. Class <em>jakarta.servlet.jsp.jstl.core.LoopTagSupport</em> provides a solid base for
doing this.</p>
</div>
</div>
<div class="sect3">
<h4 id="deferred-values"><a class="anchor" href="#deferred-values"></a>6.1.6. Deferred Values</h4>
<div class="paragraph">
<p>The unified Expression
Language supports the concept of deferred expressions (using the #{}
syntax), i.e. expressions whose evaluation is deferred to application
code (as opposed to immediate evaluation (using the ${} syntax) where
the expression is evaluated immediately by the container). Deferred
expressions are used mostly with Jakarta Server Faces, a component-based UI
framework for the webtier.</p>
</div>
<div class="paragraph">
<p>In order for Jakarta Standard Tag Library iteration tags to support
nested actions that access the iteration variable as a deferred-value,
the <em>items</em> attribute must be specified as a deferred-value as well.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach var="child" items="#{customer.children}"&gt;
    &lt;h:inputText value="#{child.name}"/&gt;
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Because a deferred-value is specified for
items, the iteration tag has access to the original expression and can
make the iteration variable available as a deferred-value with the
proper index into the <em>items</em> collection. This deferred value can then
be evaluated properly by the code associated with the <code>&lt;h:inputText&gt;</code>
component.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="c:forEach"><a class="anchor" href="#c:forEach"></a>6.2. &lt;c:forEach&gt;</h3>
<div class="paragraph">
<p>Repeats its nested body content over a
collection of objects, or repeats it a fixed number of times.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Iterate over a collection of objects</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach  [var="varName"] items="collection"
            [varStatus="varStatusName"]
            [begin="begin"] [end="end"] [step="step"]&gt;
    body content
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: Iterate a fixed number of times</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:forEach  [var="varName"]
            [varStatus="varStatusName"]
            begin="begin" end="end" [step="step"]&gt;
    body content
&lt;/c:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. As long as there are items to iterate
over, the body content is processed by the Jakarta Server Pages container and written to
the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the current item of the iteration.
This scoped variable has nested visibility. Its type depends on the
object of the underlying collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>items</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any of the supported types described in
Section "Description" below.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collection
of items to iterate over.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>varStatus</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the exported scoped variable for the
status of the iteration. Object exported is of type
<em>jakarta.servlet.jsp.jstl.core.LoopTagStatus</em>. This scoped variable has
nested visibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>begin</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <em>items</em> specified:</p>
</div>
<div class="paragraph">
<p>Iteration begins at the item located at the
specified index. First item of the collection has index 0.</p>
</div>
<div class="paragraph">
<p>If <em>items</em> not specified:</p>
</div>
<div class="paragraph">
<p>Iteration begins with index set at the value
specified.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>end</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <em>items</em> specified:</p>
</div>
<div class="paragraph">
<p>Iteration ends at the item located at the
specified index (inclusive).</p>
</div>
<div class="paragraph">
<p>If <em>items</em> not specified:</p>
</div>
<div class="paragraph">
<p>Iteration ends when index reaches the value
specified.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>step</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
will only process every <em>step</em> items of the collection, starting with
the first one.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If specified, <em>begin</em> must be &gt;= 0.</p>
</li>
<li>
<p>If <em>end</em> is specified and it is less than
<em>begin</em>, the loop is simply not executed.</p>
</li>
<li>
<p>If specified, <em>step</em> must be &gt;= 1</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>items</em> is null, it is treated as an empty
collection, i.e., no iteration is performed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>If <em>begin</em> is greater than or equal to the
size of <em>items</em>, no iteration is performed.</p>
</div>
<div class="paragraph">
<p><strong><em>Collections Supported &amp; Current Item</em></strong></p>
</div>
<div class="paragraph">
<p>The data types listed below must be supported
for <em>items</em>. With syntax 1, each object exposed via the <em>var</em> attribute
is of the type of the object in the underlying collection, except for
arrays of primitive types and maps (see below). With syntax 2, the
object exported is of type <em>Integer</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Arrays<br>
This includes arrays of objects as well as
arrays of primitive types. For arrays of primitive types, the current
item for the iteration is automatically wrapped with its standard
wrapper class (e.g. <em>Integer</em> for <em>int</em>, <em>Float</em> for <em>float</em>, etc.)<br>
Elements are processed in their indexing
order.</p>
</li>
<li>
<p>Implementation of <em>java.util.Collection</em>.<br>
An <em>Iterator</em> object is obtained from the
collection via the <em>iterator()</em> method, and the items of the collection
are processed in the order returned by that <em>Iterator</em> object.</p>
</li>
<li>
<p>Implementation of <em>java.util.Iterator</em>.<br>
Items of the collection are processed in the
order returned by the <em>Iterator</em> object.</p>
</li>
<li>
<p>Implementation of <em>java.util.Enumeration</em>.<br>
Items of the collection are processed in the
order returned by the <em>Enumeration</em> object.</p>
</li>
<li>
<p>Implementation of <em>java.util.Map</em>.<br>
The object exposed via the <em>var</em> attribute is
of type <em>Map.Entry</em>.<br>
A <em>Set</em> view of the mappings is obtained from
the <em>Map</em> via the <em>entrySet()</em> method, from which an <em>Iterator</em> object
is obtained via the <em>iterator()</em> method. The items of the collection are
processed in the order returned by that <em>Iterator</em> object.</p>
</li>
<li>
<p><em>String</em><br>
The string represents a list of comma
separated values, where the comma character is the token delimiter.
Tokens are processed in their sequential order in the string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><em>Deferred Values</em></strong></p>
</div>
<div class="paragraph">
<p>When a deferred-value is specified for the
<em>items</em> attribute, the tag handler now adds at each iteration a mapping
for the <em>var</em> attribute into the Expression Language <em>VariableMapper</em>.</p>
</div>
<div class="paragraph">
<p>Below are some implementation notes
illustrating how an iteration tag handler may process a deferred-value
specified for the <em>items</em> attribute.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>doStartTag() +
    ...
    // 'items' is a deferred-value +
    // Get the current Expression Language VariableMapper
    VariableMapper vm =
        jspContext.getELContext().getVariableMapper();
    // Create an expression to be assigned to the variable
    // specified in the 'var' attribute.
    // 'index' is an iteration counter kept by the tag handler.
    myimpl.IndexedExpression expr =
        new myimpl.IndexExpression(getItems(), index);
    // Assign the expression to the variable specified in
    // the 'var' attribute, so any reference to that variable
    // will be replaced by the expression in subsequent
    // Expression Language evaluations.
    oldMapping = vm.setVariable(getVar(), expr);
    ...

doEndTag()
    ...
    // restore the original state of the VariableMapper
    jspContext.getELContext().getVariableMapper().setVariable(
        getVar(), oldMapping);
    ...</pre>
</div>
</div>
<div class="paragraph">
<p>The number of items referred to by the
<em>items</em> attribute must be the same when Jakarta Server Faces creates the component tree
and when Jakarta Server Pages executes the iteration tag. Undefined behavior will result
if this is not the case.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="c:forTokens"><a class="anchor" href="#c:forTokens"></a>6.3. &lt;c:forTokens&gt;</h3>
<div class="paragraph">
<p>Iterates over tokens, separated by the
supplied delimiters.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;c:forTokens items="stringOfTokens" delims="delimiters"
        [var="varName"]
        [varStatus="varStatusName"]
        [begin="begin"] [end="end"] [step="step"]&gt;
    body content
&lt;/c:forTokens&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. As long as there are items to iterate
over, the body content is processed by the Jakarta Server Pages container and written to
the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the current item of the iteration.
This scoped variable has nested visibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>items</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String
of tokens to iterate over.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>delims</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The set of delimiters (the characters that
separate the tokens in the string).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>varStatus</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the exported scoped variable for the
status of the iteration. Object exported is of type
<em>jakarta.servlet.jsp.jstl.core.LoopTagStatus</em>. This scoped variable has
nested visibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>begin</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
begins at the token located at the specified index. First token has
index 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>end</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
ends at the token located at the specified index (inclusive).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>step</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
will only process every <em>step</em> tokens of the string, starting with the
first one.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If specified, <em>begin</em> must be &gt;= 0.</p>
</li>
<li>
<p>If <em>end</em> is specified and it is less than
<em>begin</em>, the loop is simply not executed.</p>
</li>
<li>
<p>If specified, <em>step</em> must be &gt;= 1</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>items</em> is null, it is treated as an empty
collection, i.e., no iteration is performed.</p>
</li>
<li>
<p>If <em>delims</em> is null, <em>items</em> is treated as a
single monolithic token. Thus, when <em>delims</em> is null, <code>&lt;c:forTokens&gt;</code>
iterates exactly zero (if <em>items</em> is also null) or one time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The tokens of the string are retrieved using
an instance of <em>java.util.StringTokenizer</em> with arguments <em>items</em> (the
string to be tokenized) and <em>delims</em> (the delimiters).</p>
</div>
<div class="paragraph">
<p>Delimiter characters separate tokens. A token
is a maximal sequence of consecutive characters that are not delimiters.</p>
</div>
<div class="paragraph">
<p><strong><em>Deferred Values</em></strong></p>
</div>
<div class="paragraph">
<p>See Section "Deferred Values" for
<code>&lt;c:forEach&gt;</code>. Same comments apply here.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="url-related-actions-core-tag-library"><a class="anchor" href="#url-related-actions-core-tag-library"></a>7. URL Related Actions: core tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Linking, importing, and redirecting to URL
resources are features often needed in Jakarta Server Pages. Since dealing with
URLs can often be tricky, the Jakarta Standard Tag Library offers a comprehensive suite of
URL-related actions to simplify these tasks.</p>
</div>
<div class="sect2">
<h3 id="hypertext-links"><a class="anchor" href="#hypertext-links"></a>7.1. Hypertext Links</h3>
<div class="paragraph">
<p>By using the HTML &lt;A&gt; element, a page author
can set a hypertext link as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;a href="/register.jsp"&gt;Register&lt;/a&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If the link refers to a local resource and
session tracking is enabled, it is necessary to rewrite the URL so
session tracking can be used as a fallback, should cookies be disabled
at the client.</p>
</div>
<div class="paragraph">
<p>Morevoer, if query string parameters are
added to the URL, it is important that they be properly URL encoded. URL
encoding refers to the process of encoding special characters in a
string, according to the rules defined in RFC 2396. For example, a space
must be encoded in a URL string as a '+':</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://acme.com/app/choose?country=Dominican+Republic</pre>
</div>
</div>
<div class="paragraph">
<p>As shown in the following example, the
combination of the <code>&lt;c:url&gt;</code> and <code>&lt;c:param&gt;</code> actions takes care of all
issues related to URL rewriting and encoding: <code>&lt;c:url&gt;</code> rewrites a URL if
necessary, and <code>&lt;c:param&gt;</code> transparently encodes query string parameters
(both name and value).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:url value="http://acme.com/exec/register" var="myUrl"&gt;
    &lt;c:param name="name" value="${param.name}"/&gt;
    &lt;c:param name="country" value="${param.country}"/&gt;
&lt;/c:url&gt;
&lt;a href='&lt;c:out value="${myUrl}"/&gt;'&gt;Register&lt;/a&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Another important feature of <code>&lt;c:url&gt;</code> is that
it transparently prepends the context path to context-relative URLs.
Assuming a context path of "/foo", the following example</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:url value="/ads/logo.html"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>yields the URL <em>/foo/ads/logo.html</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="importing-resources"><a class="anchor" href="#importing-resources"></a>7.2. Importing Resources</h3>
<div class="paragraph">
<p>There is a wide variety of resources that a
page author might be interested in including and/or processing within a
Jakarta Server Pages page. For instance, the example below shows how the content of the
README file at the FTP site of acme.com could be included within the
page.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="ftp://ftp.acme.com/README"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the Jakarta Server Pages specification, a <code>&lt;jsp:include&gt;</code>
action provides for the inclusion of static and dynamic resources
located in the same context as the current page. This is a very
convenient feature that is widely used by page authors.</p>
</div>
<div class="paragraph">
<p>However, <code>&lt;jsp:include&gt;</code> falls short in
flexibility when page authors need to get access to resources that
reside outside of the web application. In many situations, page authors
have the need to import the content of Internet resources specified via
an absolute URL. Moreover, as sites grow in size, they may have to be
implemented as a set of web applications where importing resources
across web applications is a requirement.</p>
</div>
<div class="paragraph">
<p><code>&lt;jsp:include&gt;</code> also falls short in efficiency
when the content of the imported resource is used as the source for a
companion process/transformation action, because unnecessary buffering
occurs. In the example below, the <code>&lt;acme:transform&gt;</code> action uses the
content of the included resource as the input of its transformation.
<code>&lt;jsp:include&gt;</code> reads the content of the response, writes it to the body
content of the enclosing <code>&lt;acme:transform&gt;</code>, which then re-reads the exact
same content. It would be more efficient if <code>&lt;acme:transform&gt;</code> could
access the input source directly and avoid the buffering involved in the
body content of <code>&lt;acme:transform&gt;</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;acme:transform&gt;
    &lt;jsp:include page="/exec/employeesList"/&gt;
&lt;/acme:transform&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The main motivation behind <code>&lt;c:import&gt;</code> is to
address these shortcomings by providing a simple, straightforward
mechanism to access resources that can be specified via a URL. If
accessing a resource requires specifying more arguments, then a protocol
specific action (e.g. an &lt;http&gt; action) should be used for that purpose.
The Jakarta Standard Tag Library does not currently address these protocol-specific elements but may
do so in future releases.</p>
</div>
<div class="sect3">
<h4 id="url"><a class="anchor" href="#url"></a>7.2.1. URL</h4>
<div class="paragraph">
<p>The <em>url</em> attribute is used to specify the
URL of the resource to import. It can either be an absolute URL (i.e.
one that starts with a protocol followed by a colon), a relative URL
used to access a resource within the same context, or a relative URL
used to access a resource within a foreign context. The three different
types of URL are shown in the sample code below.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%-- import a resource with an absolute URL --%&gt;
&lt;c:import url="http://acme.com/exec/customers?country=Japan"/&gt;

&lt;%-- import a resource with a relative URL - same context --%&gt;
&lt;c:import url="/copyright.html"/&gt;

&lt;%-- import a resource with a relative URL - foreign context --%&gt;
&lt;c:import url="/logo.html" context="/master"/&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exporting-an-object-string-or-reader"><a class="anchor" href="#exporting-an-object-string-or-reader"></a>7.2.2. Exporting an object: String or Reader</h4>
<div class="paragraph">
<p>By default, the content of an imported
resource is included inline into the Jakarta Server Pages page.</p>
</div>
<div class="paragraph">
<p>It is also possible to make the content of
the resource available in two different ways: as a <em>String</em> object
(attribute <em>var</em>), or as a <em>Reader</em> object (attribute <em>varReader</em>).
Process or Transform tags can then access the resource&#8217;s content through
that exported object as shown in the following example.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%-- Export the content of the URL resource as a String --%&gt;
&lt;c:import url="http://acme.com/exec/customers?country=USA"
          var="customers"/&gt;
&lt;acme:notify in="${customers}"/&gt;

&lt;%-- Export the content of the URL resource as a Reader --%&gt;

&lt;c:import url="http://acme.com/exec/customers?country=USA"
          varReader="customers"&gt;
    &lt;acme:notify in="${customers}"/&gt;
&lt;/c:import&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Exporting the resource as a <em>String</em> object
caches its content and makes it reusable.</p>
</div>
<div class="paragraph">
<p>If the imported content is large, some
performance benefits may be achieved by exporting it as a <em>Reader</em>
object since the content can be accessed directly without any buffering.
However, the performance benefits are not guaranteed since the reader&#8217;s
support is implementation dependent. It is also important to note that
the <em>varReader</em> scoped variable has nested visibility; it can only be
accessed within the body content of <code>&lt;c:import&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="url-encoding"><a class="anchor" href="#url-encoding"></a>7.2.3. URL Encoding</h4>
<div class="paragraph">
<p>Just as with <code>&lt;c:url&gt;</code>, <code>&lt;c:param&gt;</code> can be nested
within <code>&lt;c:import&gt;</code> to encode query string parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="networking-properties"><a class="anchor" href="#networking-properties"></a>7.2.4. Networking Properties</h4>
<div class="paragraph">
<p>If the web container executes behind a
firewall, some absolute URL resources may be inaccessible when using
<code>&lt;c:import&gt;</code>. To provide access to these resources, the JVM of the
container should be started with the proper networking properties (e.g.
<em>proxyHost</em>, <em>proxyPort</em>). More details can be found in the Java 2
SDK, Standard Edition Documentation (Networking Features — Networking
Properties).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="http-redirect"><a class="anchor" href="#http-redirect"></a>7.3. HTTP Redirect</h3>
<div class="paragraph">
<p><code>&lt;c:redirect&gt;</code> completes the arsenal of URL
related actions to support an HTTP redirect to a specific URL. For
example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:redirect url="http://acme.com/register"/&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cimport"><a class="anchor" href="#cimport"></a>7.4. &lt;c:import&gt;</h3>
<div class="paragraph">
<p>Imports the content of a URL-based resource.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Resource content inlined or
exported as a String object</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="url" [context="context"]
        [var="varName"] [scope="{<span class="underline">page</span>|request|session|application}"]
        [charEncoding="charEncoding"]&gt;
    optional body content for &lt;c:param&gt; subtags
&lt;/c:import&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: Resource content exported as a
Reader object</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="url" [context="context"]
        varReader="varReaderName"
        [charEncoding="charEncoding"]&gt;
    body content where varReader is consumed by another action
&lt;/c:import&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The body content is processed by the Jakarta Server Pages
container and the result is written to the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>url</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
URL of the resource to import.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>context</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the context when accessing a
relative URL resource that belongs to a foreign context.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the resource&#8217;s content. The type of
the scoped variable is <em>String</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>charEncoding</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character encoding of the content at the
input resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>varReader</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the exported scoped variable for the
resource&#8217;s content. The type of the scoped variable is <em>Reader</em>.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>url</em> is null, empty, or invalid, a <em>JspException</em> is thrown.</p>
</li>
<li>
<p>If <em>charEncoding</em> is null or empty, it is considered missing.</p>
</li>
<li>
<p>For internal resources:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If a <em>RequestDispatcher</em> cannot be found for the resource, throw a <em>JspException</em> with the resource path included in the message.</p>
</li>
<li>
<p>Otherwise, if the <em>RequestDispatcher.include()</em> method throws an <em>IOException</em> or <em>RuntimeException</em>, throw a <em>JspException</em> with the caught exception as the root cause.</p>
</li>
<li>
<p>Otherwise, if the <em>RequestDispatcher.include()</em> method throws a <em>ServletException</em>, look for a root cause.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If there&#8217;s a root cause, throw a
<em>JspException</em> with the root cause message included in the message and
the original root cause as the <em>JspException</em> root cause.</p>
</li>
<li>
<p>Otherwise, same as 2).</p>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise, if the resource invoked through
<em>RequestDispatcher.include()</em> method sets a response status code other
than 2xx (i.e. 200-299, the range of success codes in the HTTP response
codes), throw a <em>JspException</em> with the path and status code in the
message.</p>
</li>
</ol>
</div>
</li>
<li>
<p>For external resources</p>
<div class="ulist">
<ul>
<li>
<p>If the <em>URLConnection</em> class throws an
<em>IOException</em> or a <em>RuntimeException</em>, throw a <em>JspException</em> with the
message from the original exception included in the message and the
original exception as the root cause.</p>
</li>
<li>
<p>For an <em>HttpURLConnection</em>, if the response
status code is other than 2xx (i.e. 200-299, the range of success codes
in the HTTP response codes), throw a <em>JspException</em> with the path and
status code in the message.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Using syntax 1, the content of the resource
is by default written to the current <em>JspWriter</em>. If <em>var</em> is
specified, the content of the resource is instead exposed as a <em>String</em>
object.</p>
</div>
<div class="paragraph">
<p>Using syntax 2, the content of the resource
is exported as a <em>Reader</em> object. The use of the <em>varReader</em> attribute
comes with some restrictions.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the <code>&lt;c:import&gt;</code>
tag handler to ensure that if it exports a <em>Reader</em>, this <em>Reader</em> is
properly closed by the time the end of the page is
reached<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>. Because of this requirement, the Jakarta Standard Tag Library defines
the exported <em>Reader</em> as having nested visibility: it may not currently
be accessed after the end-tag for the <code>&lt;c:import&gt;</code>
action<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup>. Implementations that use the
tag-extension API will likely need to implement <em>TryCatchFinally</em> with
their <code>&lt;c:import&gt;</code> tag handlers and close the exported Reader in
<em>doFinally()</em>.</p>
</div>
<div class="paragraph">
<p>It is also illegal to use nested <code>&lt;c:param&gt;</code>
tags with syntax 2. Since the exposed <em>Reader</em> must be immediately
available to the action&#8217;s body, the connection to the resource must be
established within the start element of the action. It is therefore
impossible for nested <code>&lt;c:param&gt;</code> actions to modify the URL of the
resource to be accessed, thus their illegality with syntax 2. In such a
situation, <code>&lt;c:url&gt;</code> may be used to build a URL with query string
parameters<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>. <code>&lt;c:import&gt;</code> will remove any session id
information if necessary (see <a href="#c:url">&lt;c:url&gt;</a>).</p>
</div>
<div class="paragraph">
<div class="title"><strong>Character Encoding</strong></div>
<p><code>&lt;c:import&gt;</code> exposes a <em>String</em> or <em>Reader</em>
object, both of which are sequences of text characters. It is possible
to specify the character encoding of the input resource via the
<em>charEncoding</em> attribute. The values supported for <em>charEncoding</em> are
the same as the ones supported by the constructor of the Java class
<em>InputStreamReader</em>.</p>
</div>
<div class="paragraph">
<p>If the character encoding is not specified,
the following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <em>URLConnection.getContentType()</em> has a
non-null result, the character set is retrieved from
<em>URLConnection.getContentType()</em> by parsing this method&#8217;s result
according to RFC 2045 (section 5.1).</p>
</li>
<li>
<p>If this method&#8217;s result does not include a
character set, or if the character set causes
<em>InputStreamReader(InputStream in, String charsetName)</em> to throw an
<em>UnsupportedEncodingException</em>, then use ISO-8859-1 (which is the
default value of <em>charset</em> for the <em>contentType</em> attribute of the Jakarta Server Pages
<em>page</em> directive).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the <em>charEncoding</em> attribute should
normally only be required when accessing absolute URL resources where
the protocol is not HTTP, and where the encoding is not ISO-8859-1.</p>
</div>
<div class="paragraph">
<p>Also, when dealing with relative URLs and the
HTTP protocol, if the target resource declares a content encoding but
proceeds to write a character invalid in that encoding, the treatment of
that character is undefined.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Relative and Absolute URLs</strong></div>
<p>The exact semantics of the <code>&lt;c:import&gt;</code> tag
depends on what type of URL is being accessed.</p>
</div>
<div class="paragraph">
<p><strong><em>Relative URL – same context</em></strong></p>
</div>
<div class="paragraph">
<p>This is processed in the exact same way as
the include action of the Jakarta Server Pages specification (<code>&lt;jsp:include&gt;</code>). The
resource belongs to the same web application as the including page and
it is specified as a relative URL.</p>
</div>
<div class="paragraph">
<p>As specified in the Jakarta Server Pages specification, a
relative URL may either be a context-relative path, or a page-relative
path. A context-relative path is a path that starts with a "/". It is to
be interpreted as relative to the application to which the Jakarta Server Pages page
belongs. A page-relative path is a path that does not start with a "/".
It is to be interpreted as relative to the current Jakarta Server Pages page, as defined
by the rules of inclusion of the <code>&lt;jsp:include&gt;</code> action in the Jakarta Server Pages
specification.</p>
</div>
<div class="paragraph">
<p>The semantics of importing a resource
specified with a relative URL in the same context are the same as an
include performed by a <em>RequestDispatcher</em> as defined in the Servlet
specification. This means that the whole environment of the importing
page is available to the target resource (including request and session
attributes, as well as request parameters of the importing page).</p>
</div>
<div class="paragraph">
<p><strong><em>Relative URL – foreign context</em></strong></p>
</div>
<div class="paragraph">
<p>The resource belongs to a foreign context
(web application) hosted under the same container as the importing page.
The context name for the resource is specified via attribute <em>context</em>.</p>
</div>
<div class="paragraph">
<p>The relative URL must be context-relative
(i.e. must start with a "/") since the including page does not belong to
the same context. Similarly, the context name must also start with a
"/".</p>
</div>
<div class="paragraph">
<p>The semantics of importing a resource
specified with a relative URL in a foreign context are the same as an
include performed by a <em>RequestDispatcher</em> on a foreign context as
defined in the Servlet specification. This means that only the request
environment of the importing page is available to the target resource.</p>
</div>
<div class="paragraph">
<p>It is important to note that importing
resources in foreign contexts may not work in all containers. A security
conscious environment may not allow access to foreign contexts. As a
workaround, a foreign context resource can also be accessed using an
absolute URL. However, it is more efficient to use a relative URL
because the resource is then accessed using <em>RequestDispatcher</em> defined
by the Servlet API.</p>
</div>
<div class="paragraph">
<p><strong><em>Relative URL – query parameter aggregation rules</em></strong></p>
</div>
<div class="paragraph">
<p>The query parameter aggregation rules work
the same way they do with <code>&lt;jsp:include&gt;</code>; the original parameters are
augmented with the new parameters, with new values taking precedence
over existing values when applicable. The scope of the new parameters is
the import call; the new parameters (and values) will not apply after
the import. The behavior is therefore the same as the one defined for
the <em>include()</em> method of <em>RequestDispatcher</em> in the Servlet
specification.</p>
</div>
<div class="paragraph">
<p><strong><em>Absolute URL</em></strong></p>
</div>
<div class="paragraph">
<p>Absolute URLs are retrieved as defined by the
<em>java.net.URL</em> and <em>java.net.URLConnection</em> classes. The <code>&lt;c:import&gt;</code>
action therefore supports at a minimum the protocols offered in the Java SE
1.2 platform for absolute URLs. More protocols can be available to a web
application, but this will depend on the the class libraries made
available to the web application by the platform the container runs on.</p>
</div>
<div class="paragraph">
<p>When using an absolute URL to import a
resource, none of the current execution environment (e.g. request and
session attributes) is made available to the target resource, even if
that absolute URL resolves to the same host and context path. Therefore,
the request parameters of the importing page are not propagated to the
target absolute URL.</p>
</div>
<div class="paragraph">
<p>When importing an external resource using the
HTTP protocol, <code>&lt;c:import&gt;</code> behaves according to the semantics of a GET
request sent via the <em>java.net.HttpURLConnection</em> class, with
<em>setFollowRedirects</em> set to true.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="c:url"><a class="anchor" href="#c:url"></a>7.5. &lt;c:url&gt;</h3>
<div class="paragraph">
<p>Builds a URL with the proper rewriting rules
applied.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:url value="value" [context="context"]
        [var="varName"] [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With body content to specify
query string parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:url value="value" [context="context"]
        [var="varName"] [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    &lt;c:param&gt; subtags
&lt;/c:url&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to
be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>context</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the context when specifying a
relative URL resource that belongs to a foreign context.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the processed url. The type of the
scoped variable is <em>String</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p><code>&lt;c:url&gt;</code> processes a URL and rewrites it if
necessary. Only relative URLs are rewritten. Absolute URLs are not
rewritten to prevent situations where an external URL could be rewritten
and expose the session ID. A consequence is that if a page author wants
session tracking, only relative URLs must be used with <code>&lt;c:url&gt;</code> to link
to local resources.</p>
</div>
<div class="paragraph">
<p>The rewriting must be performed by calling
method <em>encodeURL()</em> of the Servlet API.</p>
</div>
<div class="paragraph">
<p>If the URL contains characters that should be
encoded (e.g. space), it is the user&#8217;s responsibility to encode them.</p>
</div>
<div class="paragraph">
<p>The URL must be either an absolute URL
starting with a scheme (e.g. "http://server/context/page.jsp") or a
relative URL as defined by Jakarta Server Pages in JSP.2.2.1 "Relative URL
Specification". As a consequence, an implementation must prepend the
context path to a URL that starts with a slash (e.g. "/page2.jsp") so
that such URLs can be properly interpreted by a client browser.</p>
</div>
<div class="paragraph">
<p>Specifying a URL in a foreign context is
possible through the <em>context</em> attribute. The URL specified must must
start with a / (since this is a context-relative URL). The context name
must also start with a / (since this is a standard way to identify a
context).</p>
</div>
<div class="paragraph">
<p>Because the URL built by this action may
include session information as a path parameter, it may fail if used
with <em>RequestDispatcher</em> of the Servlet API. The consumer of the
rewritten URL should therefore remove the session ID information prior
to calling <em>RequestDispatcher</em>. This situation is properly handled in
<code>&lt;c:import&gt;</code>.</p>
</div>
<div class="paragraph">
<p>By default, the result of the URL processing
is written to the current <em>JspWriter</em>. It is also possible to export
the result as a Jakarta Server Pages scoped variable defined via the <em>var</em> and <em>scope</em>
attributes.</p>
</div>
<div class="paragraph">
<p><code>&lt;c:param&gt;</code> subtags can also be specified
within the body of <code>&lt;c:url&gt;</code> for adding to the URL query string
parameters, which will be properly encoded if necessary.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="credirect"><a class="anchor" href="#credirect"></a>7.6. &lt;c:redirect&gt;</h3>
<div class="paragraph">
<p>Sends an HTTP redirect to the client.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:redirect url="value" [context="context"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With body content to specify
query string parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:redirect url="value" [context="context"]&gt;
    &lt;c:param&gt; subtags
&lt;/c:redirect&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>url</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
URL of the resource to redirect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>context</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the context when redirecting to a
relative URL resource that belongs to a foreign context.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>This action sends an HTTP redirect response
to the client and aborts the processing of the page by returning
<em>SKIP_PAGE</em> from <em>doEndTag()</em>.</p>
</div>
<div class="paragraph">
<p>The URL must be either an absolute URL
starting with a scheme (e.g. "http://server/context/page.jsp") or a
relative URL as defined by Jakarta Server Pages in JSP.2.2.1 "Relative URL
Specification". As a consequence, an implementation must prepend the
context path to a URL that starts with a slash (e.g. "/page2.jsp") if
the behavior is implemented using the
<em>HttpServletResponse.sendRedirect()</em> method.</p>
</div>
<div class="paragraph">
<p>Redirecting to a resource in a foreign
context is possible through the <em>context</em> attribute. The URL specified
must must start with a "/" (since this is a context-relative URL). The
context name must also start with a "/" (since this is a standard way to
identify a context).</p>
</div>
<div class="paragraph">
<p><code>&lt;c:redirect&gt;</code> follows the same rewriting rules
as defined for <code>&lt;c:url&gt;</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="cparam"><a class="anchor" href="#cparam"></a>7.7. &lt;c:param&gt;</h3>
<div class="paragraph">
<p>Adds request parameters to a URL. Nested
action of <code>&lt;c:import&gt;</code>, <code>&lt;c:url&gt;</code>, <code>&lt;c:redirect&gt;</code>.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Parameter value specified in
attribute "value"</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:param name="name" value="value"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: Parameter value specified in the
body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:param name="name"&gt;
    parameter value
&lt;/c:param&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the query string parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value
of the parameter.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>name</em> is null or empty, no action is
performed. It is not an error.</p>
</li>
<li>
<p>If <em>value</em> is null, it is processed as an
empty value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Nested action of <code>&lt;c:import&gt;</code>, <code>&lt;c:url&gt;</code>,
<code>&lt;c:redirect&gt;</code> to add request parameters to a URL. <code>&lt;c:param&gt;</code> also URL
encodes both <em>name</em> and <em>value</em>.</p>
</div>
<div class="paragraph">
<p>One might argue that this is redundant given
that a URL can be constructed to directly specify the query string
parameters. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="/exec/doIt"&gt;
    &lt;c:param name="action" value="register"/&gt;
&lt;/c:import&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>is the same as:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="/exec/doIt?action=register"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is indeed redundant, but is consistent
with <code>&lt;jsp:include&gt;</code>, which supports nested <code>&lt;jsp:param&gt;</code> sub-elements.
Moreover, it has been designed such that the attributes <em>name</em> and
<em>value</em> are automatically URL encoded.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="internationalization-i18n-actions-i18n-capable-formatting-tag-library"><a class="anchor" href="#internationalization-i18n-actions-i18n-capable-formatting-tag-library"></a>8. Internationalization (i18n) Actions: I18n-capable formatting tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the explosion of application development
based on web technologies, and the deployment of such applications on
the Internet, applications must be able to adapt to the languages and
formatting conventions of their clients. This means that page authors
must be able to tailor page content according to the client&#8217;s language
and cultural formatting conventions. For example, the number 345987.246
should be formatted as 345 987,246 for France, 345.987,246 for Germany,
and 345,987.246 for the U.S.</p>
</div>
<div class="paragraph">
<p>The process of designing an application (or
page content) so that it can be adapted to various languages and regions
without requiring any engineering changes is known as
internationalization, or i18n for short. Once a web application has been
internationalized, it can be adapted for a number of regions or
languages by adding locale-specific components and text. This process is
known as localization.</p>
</div>
<div class="paragraph">
<p>There are two approaches to
internationalizing a web application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide a version of the Jakarta Server Pages in each of
the target locales and have a controller servlet dispatch the request to
the appropriate page (depending on the requested locale). This approach
is useful if large amounts of data on a page or an entire web
application need to be internationalized.</p>
</li>
<li>
<p>Isolate any locale-sensitive data on a page
(such as error messages, string literals, or button labels) into
resource bundles, and access the data via i18n actions, so that the
corresponding translated message is fetched automatically and inserted
into the page.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library i18n-capable formatting actions
support either approach: They assist page authors with creating
internationalized page content that can be localized into any locale
available in the Jakarta Server Pages container (this addresses the second approach), and
allow various data elements such as numbers, currencies, dates and times
to be formatted and parsed in a locale-sensitive or customized manner
(this may be used in either approach).</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library&#8217;s i18n actions are covered in this
chapter. The formatting actions are covered in
<a href="#formatting-actions-i18n-capable-formatting-tag-library">Formatting Actions: I18n-capable formatting tag library</a>.</p>
</div>
<div class="sect2">
<h3 id="overview-4"><a class="anchor" href="#overview-4"></a>8.1. Overview</h3>
<div class="paragraph">
<p>There are three key concepts associated with
internationalization: locale, resource bundle, and basename.</p>
</div>
<div class="paragraph">
<p>A locale represents a specific geographical,
political, or cultural region. A locale is identified by a language
code, along with an optional country code<sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Language code<br>
The language code is the lower-case
two-letter code as defined by ISO-639 (e.g. "ca" for Catalan, "zh" for
Chinese). The full list of these codes can be found at a number of
sites, such as:<br>
<a href="http://www.ics.uci.edu/pub/ietf/http/related/iso639.txt" class="bare">http://www.ics.uci.edu/pub/ietf/http/related/iso639.txt</a></p>
</li>
<li>
<p>Country code<br>
The country code is the upper-case two-letter
code as defined by ISO-3166 (e.g. "IT" for Italy, "CR" for Costa Rica).
The full list of these codes can be found at a number of sites, such
as:<br>
<a href="http://www.chemie.fu-berlin.de/diverse/doc/ISO_3166.html" class="bare">http://www.chemie.fu-berlin.de/diverse/doc/ISO_3166.html</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the semantics of locales in the Jakarta Standard Tag Library
are the same as the ones defined by the class <em>java.util.Locale</em>. A
consequence of this is that, as of Java SE 1.4, new language codes defined
in ISO 639 (e.g. <em>he</em>, <em>yi</em>, <em>id</em>) will be returned as the old codes
(e.g. <em>iw</em>, <em>ji</em>, <em>in</em>). See the documentation of the
<em>java.util.Locale</em> class for more details.</p>
</div>
<div class="paragraph">
<p>A resource bundle contains locale-specific
objects. Each message in a resource bundle is associated with a key.
Since the set of messages contained in a resource bundle can be
localized for many locales, the resource bundles that translate the same
set of messages are identified by the same basename. A specific resource
bundle is therefore uniquely identified by combining its basename with a
locale.</p>
</div>
<div class="paragraph">
<p>For instance, a web application could define
the registration resource bundles with basename <em>Registration</em> to
contain the messages associated with the registration portion of the
application. Assuming that French and English are the only languages
supported by the application, there will be two resource bundles:
<em>Registration_fr</em> (French language) and <em>Registration_en</em> (English
language). Depending on the locale associated with the client request,
the key "greeting" could be mapped to the message "Bonjour" (French) or
"Hello" (English).</p>
</div>
<div class="sect3">
<h4 id="fmtmessage"><a class="anchor" href="#fmtmessage"></a>8.1.1. &lt;fmt:message&gt;</h4>
<div class="paragraph">
<p>It is possible to internationalize the Jakarta Server Pages of a web application simply by using the <code>&lt;fmt:message&gt;</code> action as
shown below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:message key="greeting"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In this case, <code>&lt;fmt:message&gt;</code> leverages the
default i18n localization context, making it extremely simple for a page
author to internationalize Jakarta Server Pages.</p>
</div>
<div class="paragraph">
<p><code>&lt;fmt:message&gt;</code> also supports compound
messages, i.e. messages that contain one or more variables. Parameter
values for these variables may be supplied via one or more <code>&lt;fmt:param&gt;</code>
subtags (one for each parameter value). This procedure is referred to as
parametric replacement.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:message key="athletesRegistered"&gt;
    &lt;fmt:param&gt;
        &lt;fmt:formatNumber value="${athletesCount}"/&gt;
    &lt;/fmt:param&gt;
&lt;/fmt:message&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the locale, this example could
print the following messages:</p>
</div>
<div class="literalblock">
<div class="content">
<pre> french: Il y a 10 582 athletes enregistres.
english: There are 10,582 athletes registered.</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="i18n-localization-context"><a class="anchor" href="#i18n-localization-context"></a>8.2. I18n Localization Context</h3>
<div class="paragraph">
<p>I18n actions use an i18n localization context
to localize their data. An i18n localization context contains two pieces
of information: a resource bundle and the locale for which the resource
bundle was found.</p>
</div>
<div class="paragraph">
<p>An i18n action determine its i18n
localization context in one of several ways, which are described in
order of precedence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;fmt:message&gt;</code> <em>bundle</em> attribute<br>
If attribute <em>bundle</em> is specified in <code>&lt;fmt:message&gt;</code>, the i18n localization context associated with it is used for localization.</p>
</li>
<li>
<p><code>&lt;fmt:bundle&gt;</code> action<br>
If <code>&lt;fmt:message&gt;</code> actions are nested inside a
<code>&lt;fmt:bundle&gt;</code> action, the i18n localization context of the enclosing
<code>&lt;fmt:bundle&gt;</code> action is used for localization. The <code>&lt;fmt:bundle&gt;</code> action
determines the resource bundle of its i18n localization context
according to the resource bundle determination algorithm in
<a href="#determinining-the-resource-bundle-for-an-i18n-localization-context">Determinining the Resource Bundle for an i18n Localization Context</a>, using the basename attribute as the
resource bundle basename.</p>
</li>
<li>
<p>I18n default localization context<br>
The i18n localization context whose resource
bundle is to be used for localization is specified via the
<em>jakarta.servlet.jsp.jstl.fmt.localizationContext</em> configuration setting
(see <a href="#Internationalization_Actions_I18n_Localization_Context">I18n Localization Context</a>). If
the configuration setting is of type <em>jakarta.servlet.jsp.jstl.fmt.LocalizationContext</em> its resource bundle
component is used for localization. Otherwise, the configuration setting
is of type <em>String</em>, and the action establishes its own i18n
localization context whose resource bundle component is determined
according to the resource bundle determination algorithm in
<a href="#determinining-the-resource-bundle-for-an-i18n-localization-context">Determinining the Resource Bundle for an i18n Localization Context</a>, using the configuration setting as the
resource bundle basename.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The example below shows how the various
localization contexts can be established to define the resource bundle
used for localization.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%-- Use configuration setting --%&gt;
&lt;fmt:message key="Welcome" /&gt;

&lt;fmt:setBundle basename="Errors" var="errorBundle" /&gt;
&lt;fmt:bundle basename="Greetings"&gt;
    &lt;%-- Localization context established by
         parent &lt;fmt:bundle&gt; tag --%&gt;
    &lt;fmt:message key="Welcome" /&gt;
    &lt;%-- Localization context established by attribute bundle --%&gt;
    &lt;fmt:message key="WrongPassword" bundle="${errorBundle}" /&gt;
&lt;/fmt:bundle&gt;</pre>
</div>
</div>
<div class="sect3">
<h4 id="preferred-locales"><a class="anchor" href="#preferred-locales"></a>8.2.1. Preferred Locales</h4>
<div class="paragraph">
<p>If the resource bundle of an i18n
localization context needs to be determined, it is retrieved from the
web application&#8217;s resources according to the algorithm described in
section Section 8.3. This algorithm requires two pieces of information:
the basename of the resource bundle (as described in the previous
section) and the preferred locales.</p>
</div>
<div class="paragraph">
<p>The method for setting the preferred locales
is characterized as either application-based or browser-based.</p>
</div>
<div class="paragraph">
<p>Application-based locale setting has priority
over browser-based locale setting. In this mode, the locale is set via
the <em>jakarta.servlet.jsp.jstl.fmt.locale</em> configuration setting (see
<a href="#locale">Locale</a>). Setting the locale this way
is useful in situations where an application lets its users pick their
preferred locale and then sets the scoped variable accordingly. This may
also be useful in the case where a client&#8217;s preferred locale is
retrieved from a database and installed for the page using the
<code>&lt;fmt:setLocale&gt;</code> action.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;fmt:setLocale&gt;</code> action may be used to set
the <em>jakarta.servlet.jsp.jstl.fmt.locale</em> configuration variable as
follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:setLocale value="en_US" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In the browser-based locale setting, the
client determines via its browser settings which locale(s) should be
used by the web application. The action retrieves the client&#8217;s locale
preferences by calling <em>ServletRequest.getLocales()</em> on the incoming
request. This returns a list of the locales (in order of preference)
that the client wants to use.</p>
</div>
<div class="paragraph">
<p>Whether application- or browser-based locale
setting is used, an ordered list of preferred locales is fed into the
algorithm described in section <a href="#determinining-the-resource-bundle-for-an-i18n-localization-context">Determinining the Resource Bundle for an i18n Localization Context</a> to
determine the resource bundle for an i18n localization context.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="determinining-the-resource-bundle-for-an-i18n-localization-context"><a class="anchor" href="#determinining-the-resource-bundle-for-an-i18n-localization-context"></a>8.3. Determinining the Resource Bundle for an i18n Localization Context</h3>
<div class="paragraph">
<p>Given a basename and an ordered set of
preferred locales, the resource bundle for an i18n localization context
is determined according to the algorithm described in this section.</p>
</div>
<div class="paragraph">
<p>Tthis algorithm is also exposed as a general
convenience method in the <em>jakarta.servlet.jsp.jstl.fmt.LocaleSupport</em> class so that it may be used by
any tag handler implementation that needs to produce localized messages.
For example, this is useful for exception messages that are intended
directly for user consumption on an error page.</p>
</div>
<div class="sect3">
<h4 id="resource-bundle-lookup"><a class="anchor" href="#resource-bundle-lookup"></a>8.3.1. Resource Bundle Lookup</h4>
<div class="paragraph">
<p>Localization in the Jakarta Standard Tag Library is based on the same
mechanisms offered in the Java SE platform. Resource bundles contain
locale-specific objects, and when an i18n action requires a
locale-specific resource, it simply loads it from the appropriate
resource bundle.</p>
</div>
<div class="paragraph">
<p>The algorithm of
<a href="#resource-bundle-determination-algorithm">Resource Bundle Determination Algorithm</a> describes how the proper resource bundle is determined. This
algorithm calls for a resource bundle lookup, where an attempt is made
at fetching a resource bundle associated with a specific basename and
locale.</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library leverages the semantics of the
java.util.ResourceBundle method</p>
</div>
<div class="literalblock">
<div class="content">
<pre>getBundle(String basename, java.util.Locale locale)</pre>
</div>
</div>
<div class="paragraph">
<p>for resource bundle lookup, with one important modification.</p>
</div>
<div class="paragraph">
<p>As stated in the documentation for
<em>ResourceBundle</em>, a resource bundle lookup searches for classes and
properties files with various suffixes on the basis of:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The specified locale</p>
</li>
<li>
<p>The current default locale as returned by
<em>Locale.getDefault()</em></p>
</li>
<li>
<p>The root resource bundle (basename)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the Jakarta Standard Tag Library, the search is limited to the first
level; i.e. the specified locale. Steps 2 and 3 are removed so that
other locales may be considered before applying the Jakarta Standard Tag Library fallback
mechanism described in <a href="#resource-bundle-determination-algorithm">Resource Bundle Determination Algorithm</a>. Only if no fallback mechanism exists, or the
fallback mechanism fails to determine a resource bundle, is the root
resource bundle considered.</p>
</div>
<div class="paragraph">
<p>Resource bundles are therefore searched in
the following order:</p>
</div>
<div class="paragraph">
<p>basename + "<em>" + language + "</em>" + country + "<em>" + variant<br>
basename + "</em>" + language + "<em>" + country<br>
basename + "</em>" + language</p>
</div>
</div>
<div class="sect3">
<h4 id="resource-bundle-determination-algorithm"><a class="anchor" href="#resource-bundle-determination-algorithm"></a>8.3.2. Resource Bundle Determination Algorithm</h4>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When there are multiple preferred locales,
they are processed in the order they were returned by
<em>ServletRequest.getLocales()</em>.</p>
</li>
<li>
<p>The algorithm stops as soon as a resource
bundle has been selected for the localization context.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Step 1: Find a match within the ordered set
of preferred locales</p>
</div>
<div class="paragraph">
<p>A resource bundle lookup (see <a href="#resource-bundle-lookup">Resource Bundle Lookup</a>) is performed
for each one of the preferred locales until a match is found. If a match
is found, the locale that led to the match and the matched resource
bundle are stored in the i18n localization context.</p>
</div>
<div class="paragraph">
<p>Step 2: Find a match with the fallback locale</p>
</div>
<div class="paragraph">
<p>A resource bundle lookup (see
<a href="#resource-bundle-lookup">Resource Bundle Lookup</a>) is performed
for the fallback locale specified in the
<em>jakarta.servlet.jsp.jstl.fmt.fallbackLocale</em> configuration setting. If a
match is found, the fallback locale and the matched resource bundle are
stored in the i18n localization context.</p>
</div>
<div class="paragraph">
<p>If no match is found following the above two
steps, an attempt is made to load the root resource bundle with the
given basename. If such a resource bundle exists, it is used as the
resource bundle of an i18n localization context that does not have any
locale. Otherwise, the established i18n localization context contains
neither a resource bundle nor a locale. It is then up to the i18n action
relying on this i18n localization context for the localization of its
data to take a proper corrective action.</p>
</div>
<div class="paragraph">
<p>It is important to note that this algorithm
gives higher priority to a language match over an exact match that would
have occurred further down the list of preferred locales. For example,
if the browser-based locale settings are "en" and "fr_CA", with resource
bundles "Messages_en" and "Messages_fr_CA", the Messages_en bundle will
be selected as the resource bundle for the localization context.</p>
</div>
<div class="paragraph">
<p>The definition of a fallback locale along
with its associated resource bundles is the only portable way a web
application can ensure the proper localization of all its
internationalized pages. The algorithm of this section never considers
the default locale associated with the Java runtime of the container
because this would result in a non-portable behavior.</p>
</div>
<div class="paragraph">
<p>The behavior is implementation-specific if
the set of available resource bundles changes during execution of the
page. Implementations may thus cache whatever information they deem
necessary to improve the performance of the algorithm presented in this
section.</p>
</div>
</div>
<div class="sect3">
<h4 id="examples"><a class="anchor" href="#examples"></a>8.3.3. Examples</h4>
<div class="paragraph">
<p>The following examples demonstrate how the
resource bundle is determined for an i18n localization context.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Example 1</strong></div>
<p><span class="underline">Settings</span><br>
Basename: <em>Resources</em><br>
Ordered preferred locales: <em>en_GB, fr_CA</em><br>
Fallback locale: <em>fr_CA</em><br>
Resource bundles: <em>Resources_en, Resources_fr_CA</em></p>
</div>
<div class="paragraph">
<p><span class="underline">Algorithm Trace</span><br>
Step 1: Find a match within the ordered set of preferred locales<br>
&#160;&#160;&#160;&#160; <em>en_GB</em> match with <em>Resources_en</em></p>
</div>
<div class="paragraph">
<p><span class="underline">Result</span><br>
Resource bundle selected: <em>Resources_en</em><br>
Locale: <em>en_GB</em></p>
</div>
<div class="paragraph">
<div class="title"><strong>Example 2</strong></div>
<p><span class="underline">Settings</span><br>
Basename: <em>Resources</em><br>
Ordered preferred locales: <em>de, fr</em><br>
Fallback locale: <em>en</em><br>
Resource bundles: <em>Resources_en</em><br></p>
</div>
<div class="paragraph">
<p><span class="underline">Algorithm Trace</span><br>
Step 1: Find a match within the ordered set of preferred locales<br>
&#160;&#160;&#160;&#160; <em>de</em> no match<br>
&#160;&#160;&#160;&#160; <em>fr</em> no match</p>
</div>
<div class="paragraph">
<p>Step 2: Find a match with the fallback locale<br>
&#160;&#160;&#160;&#160; <em>en</em> exact match with <em>Resources_en</em></p>
</div>
<div class="paragraph">
<p><span class="underline">Result</span><br>
Resource bundle selected: <em>Resources_en</em><br>
Locale: <em>en</em></p>
</div>
<div class="paragraph">
<div class="title"><strong>Example 3</strong></div>
<p><span class="underline">Settings</span><br>
Basename: <em>Resources</em><br>
Ordered preferred locales: <em>ja, en_GB, en_US, en_CA, fr</em><br>
Fallback locale: <em>en</em><br>
Resource bundles: <em>Resources_en, Resources_fr, Resources_en_US</em></p>
</div>
<div class="paragraph">
<p><span class="underline">Algorithm Trace</span><br>
Step 1: Find a match within the ordered set of preferred locales<br>
&#160;&#160;&#160;&#160; <em>ja</em> no match<br>
&#160;&#160;&#160;&#160; <em>en_GB</em> match with <em>Resources_en</em></p>
</div>
<div class="paragraph">
<p><span class="underline">Result</span></p>
</div>
<div class="paragraph">
<p>Resource bundle selected: <em>Resources_en</em><br>
Locale: <em>en_GB</em></p>
</div>
<div class="paragraph">
<div class="title"><strong>Example 4</strong></div>
<p><span class="underline">Settings</span>
Basename: <em>Resources</em><br>
Ordered preferred locales: <em>fr, sv</em><br>
Fallback locale: <em>en</em><br>
Resource bundles: <em>Resources_fr_CA, Resources_sv, Resources_en</em><br></p>
</div>
<div class="paragraph">
<p><span class="underline">Algorithm Trace</span></p>
</div>
<div class="paragraph">
<p>Step 1: Find a match within the ordered set of preferred locales<br>
&#160;&#160;&#160;&#160; <em>fr</em> no match<br>
&#160;&#160;&#160;&#160; <em>sv</em> match with <em>Resources_sv</em></p>
</div>
<div class="paragraph">
<p><span class="underline">Result</span><br>
Resource bundle selected: <em>Resources_sv</em><br>
Locale: <em>sv</em></p>
</div>
<div class="paragraph">
<p>This example shows that whenever possible, a
resource bundle for a specific language and country ( <em>Resources_fr_CA</em>
) should be backed by a resource bundle covering just the language (
<em>Resources_fr</em>). If the country-specific differences of a language are
too significant for there to be a language-only resource bundle, it is
expected that clients will specify both a language and a country as
their preferred language, in which case an exact resource bundle match
will be found.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-encoding"><a class="anchor" href="#response-encoding"></a>8.4. Response Encoding</h3>
<div class="paragraph">
<p>Any i18n action that establishes a
localization context is responsible for setting the response&#8217;s locale of
its page, unless the localization context that was established does not
have any locale. This is done by calling method
<em>ServletResponse.setLocale()</em> with the locale of the localization
context. Unless a response character encoding has been explicitly
defined by other Jakarta Server Pages elements (or by direct calls to the Servlet API),
calling <em>setLocale()</em> also sets the character encoding for the response
(see the Jakarta Server Pages and Servlet specifications for details).</p>
</div>
<div class="paragraph">
<p>This assumes that the response is buffered
with a big enough buffer size, since <em>ServletResponse.setLocale()</em> must
be called before <em>ServletResponse.getWriter()</em> in order for the
specified locale to affect the construction of the writer.</p>
</div>
<div class="paragraph">
<p>More specifically, the response&#8217;s
<em>setLocale()</em> method is always called by the <code>&lt;fmt:setLocale&gt;</code> action (see <a href="#fmt:setLocale">&lt;fmt:setLocale&gt;</a>). In addition, it is
called by the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any <code>&lt;fmt:bundle&gt;</code> (see <a href="#fmt:bundle">&lt;fmt:bundle&gt;</a>) and <code>&lt;fmt:setBundle&gt;</code> (see
<a href="#fmt:setBundle">&lt;fmt:setBundle&gt;</a>) action.</p>
</li>
<li>
<p>Any <code>&lt;fmt:message&gt;</code> action that establishes an
i18n localization context</p>
</li>
<li>
<p>Any formatting action that establishes a
formatting locale on its own (see <a href="#establishing-a-formatting-locale">Establishing a Formatting Locale</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After an action has called
<em>ServletResponse.setLocale()</em>, if a session exists and has not been
invalidated, it must determine the character encoding associated with
the response locale (by calling <em>ServletResponse.getCharacterEncoding()</em>
) and store it in the scoped variable
<em>jakarta.servlet.jsp.jstl.fmt.request.charset</em> in session scope. This
attribute may be used by the <code>&lt;fmt:requestEncoding&gt;</code> action (see
<a href="#fmt:requestEncoding">&lt;fmt:requestEncoding&gt;</a>) in a page
invoked by a form included in the response to set the request charset to
the same as the response charset. This makes it possible for the
container to decode the form parameter values properly, since browsers
typically encode form field values using the response&#8217;s charset.</p>
</div>
<div class="paragraph">
<p>The rules related to the setting of an HTTP
response character encoding, Content-Language header, and Content-Type
header are clearly defined in the Servlet specification. To avoid any
ambiguity, the Jakarta Standard Tag Library and Jakarta Server Pages specifications define behavior related to a
response&#8217;s locale and character encoding exclusively in terms of Servlet
API calls.</p>
</div>
<div class="paragraph">
<p>It is therefore important to note that, as
defined in the Servlet spec, a call to <em>ServletResponse.setLocale()</em>
modifies the character encoding of the response only if it has not
already been set explicitely by calls to
<em>ServletResponse.setContentType()</em> (with CHARSET specified) or
<em>ServletResponse.setCharacterEncoding()</em>.</p>
</div>
<div class="paragraph">
<p>Page authors should consult the Jakarta Server Pages
specification to understand how page directives related to locale and
character encoding setting translate into Servlet API calls, and how
they impact the final response settings.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmt:setLocale"><a class="anchor" href="#fmt:setLocale"></a>8.5. &lt;fmt:setLocale&gt;</h3>
<div class="paragraph">
<p>Stores the specified locale in the
<em>jakarta.servlet.jsp.jstl.fmt.locale</em> configuration variable.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:setLocale value="locale"
            [variant="variant"]
            [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>String or</em></p>
</div>
<div class="paragraph">
<p>java.util.Locale</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <em>String</em> value is interpreted as the
printable representation of a locale, which must contain a two-letter
(lower-case) language code (as defined by ISO-639), and may contain a
two-letter (upper-case) country code (as defined by ISO-3166). Language
and country codes must be separated by hyphen ('-') or underscore ('_').</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>variant</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vendor- or browser-specific variant.</p>
<p class="tableblock">See the <em>java.util.Locale</em> Javadocs for more information on variants.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of the locale configuration variable.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null or empty, use the runtime
default locale.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:setLocale&gt;</code> action stores the locale
specified by the <em>value</em> attribute in the
<em>jakarta.servlet.jsp.jstl.fmt.locale</em> configuration variable in the scope
given by the <em>scope</em> attribute. If <em>value</em> is of type <em>java.util.Locale</em>
, <em>variant</em> is ignored.</p>
</div>
<div class="paragraph">
<p>As a result of using this action,
browser-based locale setting capabilities are disabled. This means that
if this action is used, it should be declared at the beginning of a
page, before any other i18n-capable formatting actions.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmt:bundle"><a class="anchor" href="#fmt:bundle"></a>8.6. &lt;fmt:bundle&gt;</h3>
<div class="paragraph">
<p>Creates an i18n localization context to be
used by its body content.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:bundle basename="basename"
            [prefix="prefix"]&gt;
    body content
&lt;/fmt:bundle&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content and then writes it to the current <em>JspWriter</em>. The action
ignores the body content.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>basename</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource bundle base name. This is the
bundle&#8217;s fully-qualified resource name, which has the same form as a
fully-qualified class name, that is, it uses "." as the package
component separator and does not have any file type (such as ".class" or
".properties") suffix.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">prefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix to
be prepended to the value of the message key of any nested <code>&lt;fmt:message&gt;</code>
action.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>basename</em> is null or empty, or a resource
bundle cannot be found, the <em>null</em> resource bundle is stored in the i18n
localization context.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:bundle&gt;</code> action creates an i18n
localization context and loads its resource bundle into that context.
The name of the resource bundle is specified with the <em>basename</em>
attribute.</p>
</div>
<div class="paragraph">
<p>The specific resource bundle that is loaded
is determined according to the algorithm presented in
<a href="#resource-bundle-determination-algorithm">Resource Bundle Determination Algorithm</a>.</p>
</div>
<div class="paragraph">
<p>The scope of the i18n localization context is
limited to the action&#8217;s body content.</p>
</div>
<div class="paragraph">
<p>The <em>prefix</em> attribute is provided as a
convenience for very long message key names. Its value is prepended to
the value of the message <em>key</em> of any nested <code>&lt;fmt:message&gt;</code> actions.</p>
</div>
<div class="paragraph">
<p>For example, using the <em>prefix</em> attribute,
the key names in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:bundle basename="Labels"&gt;
    &lt;fmt:message key="com.acme.labels.firstName"/&gt;
    &lt;fmt:message key="com.acme.labels.lastName"/&gt;
&lt;/fmt:bundle&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>may be abbreviated to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:bundle basename="Labels" prefix="com.acme.labels."&gt;
    &lt;fmt:message key="firstName"/&gt;
    &lt;fmt:message key="lastName"/&gt;
&lt;/fmt:bundle&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmt:setBundle"><a class="anchor" href="#fmt:setBundle"></a>8.7. &lt;fmt:setBundle&gt;</h3>
<div class="paragraph">
<p>Creates an i18n localization context and
stores it in the scoped variable or the
<em>jakarta.servlet.jsp.jstl.fmt.localizationContext</em> configuration variable.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:setBundle basename="basename"
               [var="varName"]
               [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>basename</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource bundle base name. This is the
bundle&#8217;s fully-qualified resource name, which has the same form as a
fully-qualified class name, that is, it uses "." as the package
component separator and does not have any file type (such as ".class" or
".properties") suffix.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable which stores the i18n localization
context of type <em>jakarta.servlet.jsp.jstl.fmt.LocalizationContext</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of <em>var</em> or the localization context
configuration variable.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>basename</em> is null or empty, or a resource
bundle cannot be found, the <em>null</em> resource bundle is stored in the i18n
localization context.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:setBundle&gt;</code> action creates an i18n
localization context and loads its resource bundle into that context.
The name of the resource bundle is specified with the <em>basename</em>
attribute.</p>
</div>
<div class="paragraph">
<p>The specific resource bundle that is loaded
is determined according to the algorithm presented in
<a href="#resource-bundle-determination-algorithm">Resource Bundle Determination Algorithm</a>.</p>
</div>
<div class="paragraph">
<p>The i18n localization context is stored in
the scoped variable whose name is given by <em>var</em>. If <em>var</em> is not
specified, it is stored in the
<em>jakarta.servlet.jsp.jstl.fmt.localizationContext</em> configuration variable,
thereby making it the new default i18n localization context in the given
scope.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmt:message"><a class="anchor" href="#fmt:message"></a>8.8. &lt;fmt:message&gt;</h3>
<div class="paragraph">
<p>Looks up a localized message in a resource
bundle.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:message key="messageKey"
             [bundle="resourceBundle"]
             [var="varName"]
             [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: with a body to specify message
parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:message key="messageKey"
             [bundle="resourceBundle"]
             [var="varName"]
             [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    &lt;fmt:param&gt; subtags
&lt;/fmt:message&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 3: with a body to specify key and
optional message parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:message [bundle="resourceBundle"]
             [var="varName"]
             [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    key
    optional &lt;fmt:param&gt; subtags
&lt;/fmt:message&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>key</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message key to be looked up.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bundle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LocalizationContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Localization context in whose resource
bundle the message key is looked up.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable which stores the localized message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>key</em> is null or empty, the message is
processed as if undefined; that is, an error message of the form
"??????" is produced.</p>
</li>
<li>
<p>If the i18n localization context that this
action determines does not have any resource bundle, an error message of
the form "???&lt;key&gt;???" is produced</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:message&gt;</code> action looks up the
localized message corresponding to the given message key.</p>
</div>
<div class="paragraph">
<p>The message key may be specified via the
<em>key</em> attribute or from the tag&#8217;s body content. If this action is nested
inside a <code>&lt;fmt:bundle&gt;</code> action, and the parent <code>&lt;fmt:bundle&gt;</code> action
contains a <em>prefix</em> attribute, the specified prefix is prepended to the
message key.</p>
</div>
<div class="paragraph">
<p><code>&lt;fmt:message&gt;</code> uses the resource bundle of the
i18n localization context determined according to
<a href="#i18n-localization-context">I18n Localization Context</a>.</p>
</div>
<div class="paragraph">
<p>If the given key is not found in the resource
bundle, or the i18n localization context does not contain any resource
bundle, the result of the lookup is an error message of the form
"???&lt;key&gt;???" (where &lt;key&gt; is the name of the undefined message key).</p>
</div>
<div class="paragraph">
<p>If the message corresponding to the given key
is compound, that is, contains one or more variables, it may be supplied
with parameter values for these variables via one or more <code>&lt;fmt:param&gt;</code>
subtags (one for each parameter value). This procedure is referred to as
parametric replacement. Parametric replacement takes place in the order
of the <code>&lt;fmt:param&gt;</code> subtags.</p>
</div>
<div class="paragraph">
<p>In the presence of one or more <code>&lt;fmt:param&gt;</code>
subtags, the message is supplied to the <em>java.text.MessageFormat</em> method
<em>applyPattern()</em>, and the values of the <code>&lt;fmt:param&gt;</code> tags are collected
in an <em>Object[]</em> and supplied to the <em>java.text.MessageFormat</em> method
<em>format()</em>. The locale of the <em>java.text.MessageFormat</em> is set to the
appropriate localization context locale before <em>applyPattern()</em> is
called. If the localization context does not have any locale, the locale
of the <em>java.text.MessageFormat</em> is set to the locale returned by the
formatting locale lookup algorithm of
<a href="#establishing-a-formatting-locale">Establishing a Formatting Locale</a>, except that the available formatting
locales are given as the intersection of the number- and date-
formatting locales. If this algorithm does not yield any locale, the
locale of the <em>java.text.MessageFormat</em> is set to the runtime&#8217;s default
locale.</p>
</div>
<div class="paragraph">
<p>If the message is compound and no <code>&lt;fmt:param&gt;</code>
subtags are specified, it is left unmodified (that is,
<em>java.text.MessageFormat</em> is not used).</p>
</div>
<div class="paragraph">
<p>The <code>&lt;fmt:message&gt;</code> action outputs its result
to the current <em>JspWriter</em> object, unless the <em>var</em> attribute is
specified, in which case the result is stored in the named Jakarta Server Pages
attribute.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmtparam"><a class="anchor" href="#fmtparam"></a>8.9. &lt;fmt:param&gt;</h3>
<div class="paragraph">
<p>Supplies a single parameter for parametric
replacement to a containing <code>&lt;fmt:message&gt;</code> (see
<a href="#fmt:message">&lt;fmt:message&gt;</a>) action.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: value specified via attribute "value"</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:param value="messageParameter"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: value specified via body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:param&gt;
    body content
&lt;/fmt:param&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Object</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Argument used for parametric replacement.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must be nested inside a <code>&lt;fmt:message&gt;</code> action.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:param&gt;</code> action supplies a single
parameter for parametric replacement to the compound message given by
its parent <code>&lt;fmt:message&gt;</code> action.</p>
</div>
<div class="paragraph">
<p>Parametric replacement takes place in the
order of the <code>&lt;fmt:param&gt;</code> tags. The semantics of the replacement are
defined as in the class <em>java.text.MessageFormat</em>:</p>
</div>
<div class="paragraph">
<p>the compound message given by the parent
<code>&lt;fmt:message&gt;</code> action is used as the argument to the <em>applyPattern()</em>
method of a <em>java.text.MessageFormat</em> instance, and the values of the
<code>&lt;fmt:param&gt;</code> tags are collected in an <em>Object[]</em> and supplied to that
instance&#8217;s <em>format()</em> method.</p>
</div>
<div class="paragraph">
<p>The argument value may be specified via the
<em>value</em> attribute or inline via the tag&#8217;s body content.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmt:requestEncoding"><a class="anchor" href="#fmt:requestEncoding"></a>8.10. &lt;fmt:requestEncoding&gt;</h3>
<div class="paragraph">
<p>Sets the request&#8217;s character encoding.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:requestEncoding [value="charsetName"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of character encoding to be applied when decoding request parameters.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:requestEncoding&gt;</code> action may be used
to set the request&#8217;s character encoding, in order to be able to
correctly decode request parameter values whose encoding is different
from ISO-8859-1.</p>
</div>
<div class="paragraph">
<p>This action is needed because most browsers
do not follow the HTTP specification and fail to include a
<em>Content-Type</em> header in their requests.</p>
</div>
<div class="paragraph">
<p>More specifically, the purpose of the
<code>&lt;fmt:requestEncoding&gt;</code> action is to set the request encoding to be the
same as the encoding used for the response containing the form that
invokes this page.</p>
</div>
<div class="paragraph">
<p>This action calls the
<em>setCharacterEncoding()</em> method on the servlet request with the
character encoding name specified in the <em>value</em> attribute. It must be
used before any parameters are retrieved, either explicitly or through
the use of an Expression Language expression.</p>
</div>
<div class="paragraph">
<p>If the character encoding of the request
parameters is not known in advance (since the locale and thus character
encoding of the page that generated the form collecting the parameter
values was determined dynamically), the <em>value</em> attribute must not be
specified. In this case, the <code>&lt;fmt:requestEncoding&gt;</code> action first checks
if there is a charset defined in the request <em>Content-Type</em> header. If
not, it uses the character encoding from the
<em>jakarta.servlet.jsp.jstl.fmt.request.charset</em> scoped variable which is
searched in session scope. If this scoped variable is not found, the
default character encoding (ISO-8859-1) is used.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-settings"><a class="anchor" href="#configuration-settings"></a>8.11. Configuration Settings</h3>
<div class="paragraph">
<p>This section describes the i18n-related
configuration settings. Refer to <a href="#configuration-data">Configuration Data</a> for more information on how the Jakarta Standard Tag Library processes
configuration data.</p>
</div>
<div class="sect3">
<h4 id="locale"><a class="anchor" href="#locale"></a>8.11.1. Locale</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Variable name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>jakarta.servlet.jsp.jstl.fmt.locale</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Constant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Config.FMT_LOCALE</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or
java.util.Locale</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;fmt:setLocale&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;fmt:bundle&gt;</code>, <code>&lt;fmt:setBundle&gt;</code>,
<code>&lt;fmt:message&gt;</code>, <code>&lt;fmt:formatNumber&gt;</code>, <code>&lt;fmt:parseNumber&gt;</code>, <code>&lt;fmt:formatDate&gt;</code>,
<code>&lt;fmt:parseDate&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Specifies the locale to be used by the
i18n-capable formatting actions, thereby disabling browser-based
locales. A <em>String</em> value is interpreted as defined in action
&lt;fmt:setLocale&gt; (see <a href="#fmt:setLocale">&lt;fmt:setLocale&gt;</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="fallback-locale"><a class="anchor" href="#fallback-locale"></a>8.11.2. Fallback Locale</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Variable name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>jakarta.servlet.jsp.jstl.fmt.fallbackLocale</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Constant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Config.FMT_FALLBACK_LOCALE</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or
java.util.Locale</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set by</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;fmt:bundle&gt;</code>, <code>&lt;fmt:setBundle&gt;</code>,
<code>&lt;fmt:message&gt;</code>, <code>&lt;fmt:formatNumber&gt;</code>, <code>&lt;fmt:parseNumber&gt;</code>, <code>&lt;fmt:formatDate&gt;</code>,
<code>&lt;fmt:parseDate&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Specifies the fallback locale to be used by
the i18n-capable formatting actions if none of the preferred match any
of the available locales. A <em>String</em> value is interpreted as defined in
action <code>&lt;fmt:setLocale&gt;</code> (see <a href="#fmt:setLocale">&lt;fmt:setLocale&gt;</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="Internationalization_Actions_I18n_Localization_Context"><a class="anchor" href="#Internationalization_Actions_I18n_Localization_Context"></a>8.11.3. I18n Localization Context</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Variable name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>jakarta.servlet.jsp.jstl.fmt.localizationContext</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Constant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Config.FMT_LOCALIZATION_CONTEXT</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or
jakarta.servlet.jsp.jstl.fmt.LocalizationContext</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;fmt:setBundle&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;fmt:message&gt;</code>, <code>&lt;fmt:formatNumber&gt;</code>,
<code>&lt;fmt:parseNumber&gt;</code>, <code>&lt;fmt:formatDate&gt;</code>, <code>&lt;fmt:parseDate&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Specifies the default i18n localization
context to be used by the i18n-capable formatting actions. A <em>String</em>
value is interpreted as a resource bundle basename.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="formatting-actions-i18n-capable-formatting-tag-library"><a class="anchor" href="#formatting-actions-i18n-capable-formatting-tag-library"></a>9. Formatting Actions: I18n-capable formatting tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta Standard Tag Library formatting actions allow various
data elements in a Jakarta Server Pages page, such as numbers, dates and times, to be
formatted and parsed in a locale-sensitive or customized manner.</p>
</div>
<div class="sect2">
<h3 id="overview-5"><a class="anchor" href="#overview-5"></a>9.1. Overview</h3>
<div class="sect3">
<h4 id="formatting-numbers-currencies-and-percentages"><a class="anchor" href="#formatting-numbers-currencies-and-percentages"></a>9.1.1. Formatting Numbers, Currencies, and Percentages</h4>
<div class="paragraph">
<p>The &lt;fmt:formatNumber&gt; action allows page
authors to format numbers, currencies, and percentages according to the
client&#8217;s cultural formatting conventions.</p>
</div>
<div class="paragraph">
<p>For example, the output of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatNumber value="9876543.21" type="currency"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>varies with the page&#8217;s locale (given in
parentheses), as follows:</p>
</div>
<div class="paragraph">
<p>&#160;&#160;&#160;&#160; <em>SFr. 9'876'543.21 (fr_CH)</em><br>
&#160;&#160;&#160;&#160; <em>$9,876,543.21 (en_US)</em></p>
</div>
<div class="paragraph">
<p>While the previous example uses the default
formatting pattern (for currencies) of the page&#8217;s locale, it is also
possible to specify a customized formatting pattern. For example, a
pattern of ".000" will cause any numeric value formatted with it to be
represented with 3 fraction digits, adding trailing zeros if necessary,
so that:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatNumber value="12.3" pattern=".000"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>will output "12.300".</p>
</div>
<div class="paragraph">
<p>Likewise, a pattern of <mark>'"#,#00.0#"'</mark> specifies
that any numeric value formatted with it will be represented with a
minimum of 2 integer digits, 1 fraction digit, and a maximum of 2
fraction digits, with every 3 integer digits grouped. Applied to
"123456.7891", as in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatNumber value="123456.7891" pattern="#,#00.0#"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>the formatted output will be "123,456.79"
(note that rounding is handled automatically).</p>
</div>
<div class="paragraph">
<p>The following example formats a numeric value
as a currency, stores it in a scoped variable, parses it back in, and
outputs the parsed result (which is the same as the original numeric
value):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatNumber value="123456789" type="currency" var="cur"/&gt;
&lt;fmt:parseNumber value="${cur}" type="currency"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>A similar sequence of actions could have been
used to retrieve a currency-formatted value from a database, parse its
numeric value, perform an arithmetic operation on it, reformat it as a
currency, and store it back to the database.</p>
</div>
</div>
<div class="sect3">
<h4 id="formatting-dates-and-times"><a class="anchor" href="#formatting-dates-and-times"></a>9.1.2. Formatting Dates and Times</h4>
<div class="paragraph">
<p>The <code>&lt;fmt:formatDate&gt;</code> action allows page
authors to format dates and times according to the client&#8217;s cultural
formatting conventions.</p>
</div>
<div class="paragraph">
<p>For example, assuming a current date of <em>Oct 22, 2001</em> and a current time of <em>4:05:53PM</em>, the following action:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;jsp:useBean id="now" class="java.util.Date"/&gt;
&lt;fmt:formatDate value="${now}" timeStyle="long" dateStyle="long"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>will output</p>
</div>
<div class="paragraph">
<p><em>October 22, 2001 4:05:53 PM PDT</em></p>
</div>
<div class="paragraph">
<p>for the U.S. and</p>
</div>
<div class="paragraph">
<p><em>22 octobre 2001 16:05:53 GMT-07:0</em></p>
</div>
<div class="paragraph">
<p>for the French locale.</p>
</div>
<div class="paragraph">
<p>Page authors may also specify a customized
formatting style for their dates and times. Assuming the same current
date and time as in the above example, this action:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatDate value="${now}" pattern="dd.MM.yy"/&gt;_</pre>
</div>
</div>
<div class="paragraph">
<p>will output</p>
</div>
<div class="paragraph">
<p><em>22.10.01</em></p>
</div>
<div class="paragraph">
<p>for the U.S. locale.</p>
</div>
<div class="paragraph">
<p>Time information on a page may be tailored to
the preferred time zone of a client. This is useful if the server
hosting the page and its clients reside in different time zones. If time
information is to be formatted or parsed in a time zone different from
that of the Jakart Server Pages container, the <code>&lt;fmt:formatDate&gt;</code> and <code>&lt;fmt:parseDate&gt;</code>
action may be nested inside a <code>&lt;fmt:timeZone&gt;</code> action or supplied with a
<em>timeZone</em> attribute.</p>
</div>
<div class="paragraph">
<p>In the following example, the current date
and time are formatted in the "GMT+1:00" time zone:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:timeZone value="GMT+1:00"&gt;
    &lt;fmt:formatDate value="${now}" type="both" dateStyle="full"
        timeStyle="full"/&gt;
&lt;/fmt:timeZone&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="formatting-locale"><a class="anchor" href="#formatting-locale"></a>9.2. Formatting Locale</h3>
<div class="paragraph">
<p>A formatting action<sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup> may
leverage an i18n localization context to determine its formatting locale
or establish a formatting locale on its own, by following these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;fmt:bundle&gt; action<br>
If a formatting action is nested inside a
&lt;fmt:bundle&gt; action (see <a href="#fmt:bundle">&lt;fmt:bundle&gt;</a>), the locale of the i18n localization context of the
enclosing &lt;fmt:bundle&gt; action is used as the formatting locale. The
&lt;fmt:bundle&gt; action determines the resource bundle of its i18n
localization context according to the resource bundle determination
algorithm in
<a href="#determinining-the-resource-bundle-for-an-i18n-localization-context">Determinining the Resource Bundle for an i18n Localization Context</a>, using the basename attribute
as the resource bundle basename. If the i18n localization context of the
enclosing &lt;fmt:bundle&gt; action does not contain any locale, go to the
next step.</p>
</li>
<li>
<p>I18n default localization context<br>
The default i18n localization context may be
specified via the jakarta.servlet.jsp.jstl.fmt.localizationContext
configuration setting. If such a configuration setting exists, and its
value is of type <em>LocalizationContext</em>, its locale is used as the
formatting locale. Otherwise, if the configuration setting is of type
<em>String</em>, the formatting action establishes its own i18n localization
context and uses its locale as the formatting locale (in this case, the
resource bundle component of the i18n localization context is determined
according to the resource bundle determination algorithm in
<a href="#determinining-the-resource-bundle-for-an-i18n-localization-context">Determinining the Resource Bundle for an i18n Localization Context</a>, using the configuration setting as the
resource bundle basename). If the i18n localization context determined
in this step does not contain any locale, go to the next step.</p>
</li>
<li>
<p>Formatting locale lookup<br>
The formatting action establishes a locale
according to the algorithm described in
<a href="#establishing-a-formatting-locale">Establishing a Formatting Locale</a>. This algorithm requires the preferred
locales. The way the preferred locales are set is exactly the same as
with i18n actions and is described in <a href="#preferred-locales">Preferred Locales</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how the various
localization contexts can be established to define the formatting
locale.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;jsp:useBean id="now" class="java.util.Date"/&gt;

&lt;%-- Formatting locale lookup --%&gt;
&lt;fmt:formatDate value="${now}" /&gt;

&lt;fmt:bundle basename="Greetings"&gt;
    &lt;%-- I18n localization context from parent &lt;fmt:bundle&gt; tag --%&gt;
    &lt;fmt:message key="Welcome" /&gt;
    &lt;fmt:formatDate value="${now}" /&gt;
&lt;/fmt:bundle&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="establishing-a-formatting-locale"><a class="anchor" href="#establishing-a-formatting-locale"></a>9.3. Establishing a Formatting Locale</h3>
<div class="paragraph">
<p>If a formatting action fails to leverage an
i18n localization context for its formatting locale – either because the
formatting action has no way of referring to an i18n localization
context, or the i18n localization context does not have any locale – it
must establish the formatting locale on its own, given an ordered set of
preferred locales, according to the formatting locale lookup algorithm
described in this section.</p>
</div>
<div class="sect3">
<h4 id="locales-available-for-formatting-actions"><a class="anchor" href="#locales-available-for-formatting-actions"></a>9.3.1. Locales Available for Formatting Actions</h4>
<div class="paragraph">
<p>The algorithm described in
<a href="#formatting-locale-lookup-algorithm">Formatting Locale Lookup Algorithm</a>
compares preferred locales against the set of locales that are available
for a specific formatting action.</p>
</div>
<div class="paragraph">
<p>The locales available for actions
<code>&lt;fmt:formatNumber&gt;</code> and <code>&lt;fmt:parseNumber&gt;</code> are determined by a call to
<em>java.text.NumberFormat.getAvailableLocales()</em>.</p>
</div>
<div class="paragraph">
<p>The locales available for <code>&lt;fmt:formatDate&gt;</code>
and <code>&lt;fmt:parseDate&gt;</code> are determined by a call to
<em>java.text.DateFormat.getAvailableLocales()</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="locale-lookup"><a class="anchor" href="#locale-lookup"></a>9.3.2. Locale Lookup</h4>
<div class="paragraph">
<p>The algorithm of <a href="#formatting-locale-lookup-algorithm">Formatting Locale Lookup Algorithm</a>
describes how the proper locale is determined. This algorithm calls for
a locale lookup: it attempts to find among the available locales, a
locale that matches the specified one.</p>
</div>
<div class="paragraph">
<p>The locale lookup is similar to the resource
bundle lookup described in <a href="#resource-bundle-lookup">Resource Bundle Lookup</a>, except that instead of trying to match a resource
bundle, the locale lookup tries to find a match in a list of available
locales. A match of the specified locale against an available locale is
therefore attempted in the following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Language, country, and variant are the same</p>
</li>
<li>
<p>Language and country are the same</p>
</li>
<li>
<p>Language is the same and the available locale does not have a country</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="formatting-locale-lookup-algorithm"><a class="anchor" href="#formatting-locale-lookup-algorithm"></a>9.3.3. Formatting Locale Lookup Algorithm</h4>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When there are multiple preferred locales,
they are processed in the order they were returned by a call to
<em>ServletRequest.getLocales()</em>.</p>
</li>
<li>
<p>The algorithm stops as soon as a locale has
been selected for the localization context.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Step 1: Find a match within the ordered set
of preferred locales</p>
</div>
<div class="paragraph">
<p>A locale lookup (see <a href="#locale-lookup">Locale Lookup</a>) is performed for each
one of the preferred locales until a match is found. The first match is
used as the formatting locale.</p>
</div>
<div class="paragraph">
<p>Step 2: Find a match with the fallback locale</p>
</div>
<div class="paragraph">
<p>A locale lookup (see
<a href="#locale-lookup">Locale Lookup</a>) is performed for the
fallback locale specified in the
<em>jakarta.servlet.jsp.jstl.fmt.fallbackLocale</em> configuration setting. If a
match exists, it is used as the formatting locale.</p>
</div>
<div class="paragraph">
<p>If no match is found after the above two
steps, it is up to the formatting action to take a corrective action.</p>
</div>
<div class="paragraph">
<p>The result of the formatting locale lookup
algorithm may be cached, so that subsequent formatting actions that need
to establish the formatting locale on their own may leverage it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="time-zone"><a class="anchor" href="#time-zone"></a>9.4. Time Zone</h3>
<div class="paragraph">
<p>Time information on a page may be tailored to
the preferred time zone of a client. This is useful if the server
hosting the page and its clients reside in different time zones (page
authors could be advised to always use the "long" time format which
includes the time zone, but that would still require clients to convert
the formatted time into their own time zone).</p>
</div>
<div class="paragraph">
<p>When formatting time information using the
<code>&lt;fmt:formatDate&gt;</code> action (see Section 9.8), or parsing time information
that does not specify a time zone using the <code>&lt;fmt:parseDate&gt;</code> action (see Section 9.9), the time zone to use is determined as follows and in this order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the time zone from the action&#8217;s <em>timeZone</em> attribute.</p>
</li>
<li>
<p>If attribute <em>timeZone</em> is not specified and
the action is nested inside an <code>&lt;fmt:timeZone&gt;</code> action, use the time zone
from the enclosing <code>&lt;fmt:timeZone&gt;</code> action.</p>
</li>
<li>
<p>Use the time zone given by the
<em>jakarta.servlet.jsp.jstl.fmt.timeZone</em> configuration setting.</p>
</li>
<li>
<p>Use the Jakarta Server Pages container&#8217;s time zone.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmt:timeZone"><a class="anchor" href="#fmt:timeZone"></a>9.5. &lt;fmt:timeZone&gt;</h3>
<div class="paragraph">
<p>Specifies the time zone in which time
information is to be formatted or parsed in its body content.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:timeZone value="timeZone"&gt;
    body content
&lt;/fmt:timeZone&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content and then writes it to the current <em>JspWriter</em>. The action
ignores the body content.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>String</em> or</p>
</div>
<div class="paragraph">
<p>java.util.TimeZone</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time zone. A <em>String</em> value is
interpreted as a time zone ID. This may be one of the time zone IDs
supported by the Java platform (such as "America/Los_Angeles") or a
custom time zone ID (such as "GMT-8"). See <em>java.util.TimeZone</em> for more
information on supported time zone formats.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null or empty, the GMT timezone
is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:timeZone&gt;</code> action specifies the time
zone in which to format or parse the time information of any nested time
formatting (see Section 9.8) or parsing (see Section 9.9) actions.</p>
</div>
<div class="paragraph">
<p>If the time zone is given as a string, it is
parsed using <em>java.util.TimeZone.getTimeZone()</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="fmtsettimezone"><a class="anchor" href="#fmtsettimezone"></a>9.6. &lt;fmt:setTimeZone&gt;</h3>
<div class="paragraph">
<p>Stores the specified time zone in a scoped
variable or the time zone configuration variable.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:setTimeZone value="timeZone"
                 [var="varName"]
                 [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>String</em> or</p>
</div>
<div class="paragraph">
<p>java.util.TimeZone</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time zone. A <em>String</em> value is
interpreted as a time zone ID. This may be one of the time zone IDs
supported by the Java platform (such as "America/Los_Angeles") or a
custom time zone ID (such as "GMT-8"). See java.util.TimeZone for more
information on supported time zone formats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable which stores the time zone of type
<em>java.util.TimeZone</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of <em>var</em> or the time zone
configuration variable.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null or empty, the GMT timezone
is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;fmt:setTimeZone&gt;</code> action stores the given
time zone in the scoped variable whose name is given by <em>var</em>. If <em>var</em>
is not specified, the time zone is stored in the
<em>jakarta.servlet.jsp.jstl.fmt.timeZone</em> configuration variable, thereby
making it the new default time zone in the given scope.</p>
</div>
<div class="paragraph">
<p>If the time zone is given as a string, it is
parsed using <em>java.util.TimeZone.getTimeZone()</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmtformatnumber"><a class="anchor" href="#fmtformatnumber"></a>9.7. &lt;fmt:formatNumber&gt;</h3>
<div class="paragraph">
<p>Formats a numeric value in a locale-sensitive
or customized manner as a number, currency, or percentage.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: without a body</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatNumber value="numericValue"
                  [type="{<span class="underline">number</span>|currency|percent}"]
                  [pattern="customPattern"]
                  [currencyCode="currencyCode"]
                  [currencySymbol="currencySymbol"]
                  [groupingUsed="{<span class="underline">true</span>|false}"]
                  [maxIntegerDigits="maxIntegerDigits"]
                  [minIntegerDigits="minIntegerDigits"]
                  [maxFractionDigits="maxFractionDigits"]
                  [minFractionDigits="minFractionDigits"]
                  [var="varName"]
                  [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: with a body to specify the
numeric value to be formatted</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:formatNumber [type="{<span class="underline">number</span>|currency|percent}"]
                  [pattern="customPattern"]
                  [currencyCode="currencyCode"]
                  [currencySymbol="currencySymbol"]
                  [groupingUsed="{<span class="underline">true</span>|false}"]
                  [maxIntegerDigits="maxIntegerDigits"]
                  [minIntegerDigits="minIntegerDigits"]
                  [maxFractionDigits="maxFractionDigits"]
                  [minFractionDigits="minFractionDigits"]
                  [var="varName"]
                  [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    numeric value to be formatted
&lt;/fmt:formatNumber&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String or Number</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric value to be formatted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies
whether the value is to be formatted as number, currency, or percentage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom
formatting pattern.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currencyCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 4217 currency code. Applied only when
formatting currencies (i.e. if <em>type</em> is equal to "currency"); ignored
otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currencySymbol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Currency symbol. Applied only when
formatting currencies (i.e. if <em>type</em> is equal to "currency"); ignored
otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">groupingUsed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether the formatted output will
contain any grouping separators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxIntegerDigits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of digits in the integer
portion of the formatted output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minIntegerDigits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of digits in the integer
portion of the formatted output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxFractionDigits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of digits in the fractional
portion of the formatted output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minFractionDigits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of digits in the fractional
portion of the formatted output.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable which stores the formatted result as a
String.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
<li>
<p>The value of the <em>currencyCode</em> attribute
must be a valid ISO 4217 currency code.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null or empty, nothing is
written to the current JspWriter object and the scoped variable is
removed if it is specified (see attributes <em>var</em> and <em>scope</em>).</p>
</li>
<li>
<p>If this action fails to determine a
formatting locale, it uses <em>Number.toString()</em> as the output format.</p>
</li>
<li>
<p>If the attribute <em>pattern</em> is null or empty,
it is ignored.</p>
</li>
<li>
<p>If an exception occurs during the parsing of
a string value, it must be caught and rethrown as a <em>JspException</em>. The
message of the rethrown <em>JspException</em> must include the string value,
and the caught exception must be provided as the root cause.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The numeric value to be formatted may be
specified via the <em>value</em> attribute; if missing, it is read from the
tag&#8217;s body content.</p>
</div>
<div class="paragraph">
<p>The formatting pattern may be specified via
the <em>pattern</em> attribute, or is looked up in a locale-dependent fashion.</p>
</div>
<div class="paragraph">
<p>A pattern string specified via the <em>pattern</em>
attribute must follow the pattern syntax specified by the class
<em>java.text.DecimalFormat</em>.</p>
</div>
<div class="paragraph">
<p>If looked up in a locale-dependent fashion,
the formatting pattern is determined via a combination of the formatting
locale, which is determined according to
<a href="#formatting-locale">Formatting Locale</a>, and the <em>type</em>
attribute. Depending on the value of the <em>type</em> attribute, the given
numeric value is formatted as a number, currency, or percentage. The
locale&#8217;s default formatting pattern for numbers, currencies, or
percentages is determined by calling the <em>java.text.NumberFormat</em> method
<em>getNumberInstance</em>, <em>getCurrencyInstance</em>, or <em>getPercentInstance</em>,
respectively, with the formatting locale.</p>
</div>
<div class="paragraph">
<p>The <em>pattern</em> attribute takes precedence over
<em>type</em>. In either case, the formatting symbols (such as decimal
separator and grouping separator) are given by the formatting locale.</p>
</div>
<div class="paragraph">
<p>The (specified or locale-dependent)
formatting pattern may be further fine-tuned using the formatting
options described below.</p>
</div>
<div class="paragraph">
<p>If the numeric value is given as a string
literal, it is first parsed into a <em>java.lang.Number</em>. If the string
does not contain any decimal point, it is parsed using
<em>java.lang.Long.valueOf()</em>, or <em>java.lang.Double.valueOf()</em> otherwise.</p>
</div>
<div class="paragraph">
<p>The formatted result is output to the current
<em>JspWriter</em> object, unless the <em>var</em> attribute is given, in which case
it is stored in the named scoped variable.</p>
</div>
<div class="paragraph">
<p><strong>Formatting Options</strong></p>
</div>
<div class="paragraph">
<p>The <em>groupingUsed</em> attribute specifies
whether the formatted ouput will contain any grouping separators. See
the <em>java.text.NumberFormat</em> method <em>setGroupingUsed()</em> for more
information.</p>
</div>
<div class="paragraph">
<p>The minimum and maximum number of digits in
the integer and fractional portions of the formatted output may be given
via the <em>minIntegerDigits</em>, <em>maxIntegerDigits</em>, <em>minFractionDigits</em>,
and <em>maxFractionDigits</em> attributes, respectively. See the
<em>java.text.NumberFormat</em> methods <em>setMinimumIntegerDigits()</em>,
<em>setMaximumIntegerDigits()</em>, <em>setMinimumFractionDigits()</em>, and
<em>setMaximumFractionDigits()</em> for more information.</p>
</div>
<div class="paragraph">
<p><strong>Formatting Currencies</strong></p>
</div>
<div class="paragraph">
<p>When formatting currencies using the
specified or locale-dependent formatting pattern for currencies, the
currency symbol of the formatting locale is used by default. It can be
overridden by using the <em>currencySymbol</em> or <em>currencyCode</em> attributes,
which specify the currency symbol or currency code, respectively, of the
currency to use.</p>
</div>
<div class="paragraph">
<p>If both <em>currencyCode</em> and <em>currencySymbol</em>
are present, <em>currencyCode</em> takes precedence over <em>currencySymbol</em> if
the <em>java.util.Currency</em> class is defined in the container&#8217;s runtime
(that is, if the container&#8217;s runtime is Java SE 1.4 or greater), and
<em>currencySymbol</em> takes precendence otherwise. If only <em>currencyCode</em> is
given, it is used as a currency symbol if <em>java.util.Currency</em> is not
defined.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmtparsenumber"><a class="anchor" href="#fmtparsenumber"></a>9.8. &lt;fmt:parseNumber&gt;</h3>
<div class="paragraph">
<p>Parses the string representation of numbers,
currencies, and percentages that were formatted in a locale-sensitive or
customized manner.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: without a body</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:parseNumber value="numericValue"
                [type="{<span class="underline">number</span>|currency|percent}"]
                [pattern="customPattern"]
                [parseLocale="parseLocale"]
                [integerOnly="{true|<span class="underline">false</span>}"]
                [var="varName"]
                [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: with a body to specify the
numeric value to be parsed</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:parseNumber [type="{<span class="underline">number</span>|currency|percent}"]
                [pattern="customPattern"]
                [parseLocale="parseLocale"]
                [integerOnly="{true|<span class="underline">false</span>}"]
                [var="varName"]
                [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    numeric value to be parsed
&lt;/fmt:parseNumber&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String
to be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies
whether the string in the <em>value</em> attribute should be parsed as a
number, currency, or percentage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom
formatting pattern that determines how the string in the <em>value</em>
attribute is to be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parseLocale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String or</p>
</div>
<div class="paragraph">
<p>java.util.Locale</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Locale whose default formatting pattern (for
numbers, currencies, or percentages, respectively) is to be used during
the parse operation, or to which the pattern specified via the <em>pattern</em>
attribute (if present) is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integerOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether just the integer portion
of the given value should be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable which stores the parsed result (of type
<em>java.lang.Number</em>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If the numeric string to be parsed is null or
empty, the scoped variable defined by attributes <em>var</em> and <em>scope</em> is
removed. This allows "empty" input to be distinguished from "invalid"
input, which causes an exception.</p>
</li>
<li>
<p>If <em>parseLocale</em> is null or empty, it is
treated as if it was missing.</p>
</li>
<li>
<p>If an exception occurs during the parsing of
the value, it must be caught and rethrown as a <em>JspException</em>. The
message of the rethrown <em>JspException</em> must include the value that was
to be parsed, and the caught exception must be provided as the root
cause.</p>
</li>
<li>
<p>If this action fails to determine a
formatting locale, it must throw a <em>JspException</em> whose message must
include the value that was to be parsed.</p>
</li>
<li>
<p>If the attribute <em>pattern</em> is null or empty,
it is ignored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The numeric value to be parsed may be
specified via the <em>value</em> attribute; if missing, it is read from the
action&#8217;s body content.</p>
</div>
<div class="paragraph">
<p>The parse pattern may be specified via the
<em>pattern</em> attribute, or is looked up in a locale-dependent fashion.</p>
</div>
<div class="paragraph">
<p>A pattern string specified via the <em>pattern</em>
attribute must follow the pattern syntax specified by
<em>java.text.DecimalFormat</em>.</p>
</div>
<div class="paragraph">
<p>If looked up in a locale-dependent fashion,
the parse pattern is determined via a combination of the <em>type</em> and
<em>parseLocale</em> attributes. Depending on the value of the <em>type</em>
attribute, the given numeric value is parsed as a number, currency, or
percentage. The parse pattern for numbers, currencies, or percentages is
determined by calling the <em>java.text.NumberFormat</em> method
<em>getNumberInstance</em>, <em>getCurrencyInstance</em>, or <em>getPercentInstance</em>,
respectively, with the locale specified via <em>parseLocale</em>. If
<em>parseLocale</em> is missing, the formatting locale, which is obtained
according to <a href="#formatting-locale">Formatting Locale</a>, is
used as the parse locale.</p>
</div>
<div class="paragraph">
<p>The <em>pattern</em> attribute takes precedence over
<em>type</em>. In either case, the formatting symbols in the pattern (such as
decimal separator and grouping separator) are given by the parse locale.</p>
</div>
<div class="paragraph">
<p>The <em>integerOnly</em> attribute specifies whether
just the integer portion of the given value should be parsed. See the
<em>java.text.NumberFormat</em> method <em>setParseIntegerOnly()</em> for more
information.</p>
</div>
<div class="paragraph">
<p>If the <em>var</em> attribute is given, the parse
result (of type <em>java.lang.Number</em>) is stored in the named scoped
variable. Otherwise, it is output to the current <em>JspWriter</em> object
using <em>java.lang.Number.toString()</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmtformatdate"><a class="anchor" href="#fmtformatdate"></a>9.9. &lt;fmt:formatDate&gt;</h3>
<div class="paragraph">
<p>Allows the formatting of dates and times in a
locale-sensitive or customized manner.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;fmt:formatDate value="date"
                [type="{time|<span class="underline">date</span>|both}"]
                [dateStyle="{<span class="underline">default</span>|short|medium|long|full}"]
                [timeStyle="{<span class="underline">default</span>|short|medium|long|full}"]
                [pattern="customPattern"]
                [timeZone="timeZone"]
                [var="varName"]
                [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>java.util.</em></p>
</div>
<div class="paragraph">
<p><em>Date</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date and/or time to be formatted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies
whether the time, the date, or both the time and date components of the
given date are to be formatted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateStyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predefined formatting style for dates.
Follows the semantics defined in class <em>java.text.DateFormat</em>. Applied
only when formatting a date or both a date and time (i.e. if <em>type</em> is
missing or is equal to "date" or "both"); ignored otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeStyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predefined formatting style for times.
Follows the semantics defined in class <em>java.text.DateFormat</em>. Applied
only when formatting a time or both a date and time (i.e. if <em>type</em> is
equal to "time" or "both"); ignored otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom
formatting style for dates and times.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeZone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String or java.util.</p>
</div>
<div class="paragraph">
<p>TimeZone</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time zone in which to represent the
formatted time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable which stores the formatted result as a
<em>String</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null or empty, nothing is
written to the current JspWriter object and the scoped variable is
removed if it is specified (see attributes <em>var</em> and <em>scope</em>).</p>
</li>
<li>
<p>If <em>timeZone</em> is null or empty, it is handled
as if it was missing.</p>
</li>
<li>
<p>If this action fails to determine a
formatting locale, it uses <em>java.util.Date.toString()</em> as the output
format.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Depending on the value of the <em>type</em>
attribute, only the time, the date, or both the time and date components
of the date specified via the <em>value</em> attribute or the body content are
formatted, using one of the predefined formatting styles for dates
(specified via the <em>dateStyle</em> attribute) and times (specified via the
<em>timeStyle</em> attribute) of the formatting locale, which is determined
according to <a href="#formatting-locale">Formatting Locale</a>.</p>
</div>
<div class="paragraph">
<p><em>dateStyle</em> and <em>timeStyle</em> support the
semantics defined in <em>java.text.DateFormat</em>.</p>
</div>
<div class="paragraph">
<p>Page authors may also apply a customized
formatting style to their times and dates by specifying the <em>pattern</em>
attribute, in which case the <em>type</em>, <em>dateStyle</em>, and <em>timeStyle</em>
attributes are ignored. The specified formatting pattern must use the
pattern syntax specified by <em>java.text.SimpleDateFormat.</em></p>
</div>
<div class="paragraph">
<p>In order to format the current date and time,
a <code>&lt;jsp:useBean&gt;</code> action may be used as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;jsp:useBean id="now" class="java.util.Date"/&gt;
&lt;fmt:formatDate value="${now}" /&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If the string representation of a date or
time needs to be formatted, the string must first be parsed into a
<em>java.util.Date</em> using the <code>&lt;fmt:parseDate&gt;</code> action, whose parsing result
may then be supplied to the <code>&lt;fmt:formatDate&gt;</code> action:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:parseDate value="4/13/02" pattern="M/d/yy" var="parsed"/&gt; +
&lt;fmt:formatDate value="${parsed}" dateStyle="full"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The action&#8217;s result is output to the current
<em>JspWriter</em> object, unless the <em>var</em> attribute is specified, in which
case it is stored in the named scoped variable.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fmtparsedate"><a class="anchor" href="#fmtparsedate"></a>9.10. &lt;fmt:parseDate&gt;</h3>
<div class="paragraph">
<p>Parses the string representation of dates and
times that were formatted in a locale-sensitive or customized manner.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: without a body</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:parseDate value="dateString"
            [type="{time|<span class="underline">date</span>|both}"]
            [dateStyle="{<span class="underline">default</span>|short|medium|long|full}"]
            [timeStyle="{<span class="underline">default</span>|short|medium|long|full}"]
            [pattern="customPattern"]
            [timeZone="timeZone"]
            [parseLocale="parseLocale"]
            [var="varName"]
            [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: with a body to specify the date
value to be parsed</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;fmt:parseDate [type="{time|<span class="underline">date</span>|both}"]
            [dateStyle="{<span class="underline">default</span>|short|medium|long|full}"]
            [timeStyle="{<span class="underline">default</span>|short|medium|long|full}"]
            [pattern="customPattern"]
            [timeZone="timeZone"]
            [parseLocale="parseLocale"]
            [var="varName"]
            [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    date value to be parsed
&lt;/fmt:parseDate&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date
string to be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies
whether the date string in the <em>value</em> attribute is supposed to contain
a time, a date, or both.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateStyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predefined formatting style for days which
determines how the date component of the date string is to be parsed.
Applied only when formatting a date or both a date and time (i.e. if
<em>type</em> is missing or is equal to "date" or "both"); ignored otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeStyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predefined formatting styles for times which
determines how the time component in the date string is to be parsed.
Applied only when formatting a time or both a date and time (i.e. if
<em>type</em> is equal to "time" or "both"); ignored otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom
formatting pattern which determines how the date string is to be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeZone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or java.util.TimeZone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time zone in which to interpret any time
information in the date string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parseLocale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String or</p>
</div>
<div class="paragraph">
<p>java.util.Locale</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Locale whose predefined formatting styles
for dates and times are to be used during the parse operation, or to
which the pattern specified via the <em>pattern</em> attribute (if present) is
applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable in which the parsing result (of type
<em>java.util.Date</em>) is stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If the date string to be parsed is null or
empty, the scoped variable defined by <em>var</em> and <em>scope</em> is removed. This
allows "empty" input to be distinguished from "invalid" input, which
causes an exception.</p>
</li>
<li>
<p>If <em>timeZone</em> is null or empty, it is treated
as if it was missing.</p>
</li>
<li>
<p>If <em>parseLocale</em> is null or empty, it is
treated as if it was missing.</p>
</li>
<li>
<p>If an exception occurs during the parsing of
the value, it must be caught and rethrown as a <em>JspException</em>. The
message of the rethrown <em>JspException</em> must include the value that was
to be parsed, and the caught exception must be provided as the root
cause.</p>
</li>
<li>
<p>If this action fails to determine a
formatting locale, it must throw a <em>JspException</em> whose message must
include the value that was to be parsed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The date string to be parsed may be specified
via the <em>value</em> attribute or via the tag&#8217;s body content.</p>
</div>
<div class="paragraph">
<p>Depending on the value of the <em>type</em>
attribute, the given date string is supposed to contain only a time,
only a date, or both. It is parsed according to one of the predefined
formatting styles for dates (specified via the <em>dateStyle</em> attribute)
and times (specified via the <em>timeStyle</em> attribute) of the locale
specified by the <em>parseLocale</em> attribute. If the <em>parseLocale</em> attribute
is missing, the formatting locale, which is determined according to
<a href="#formatting-locale">Formatting Locale</a>, is used as the
parse locale.</p>
</div>
<div class="paragraph">
<p>If the given date string uses a different
format, the pattern required to parse it must be specified via the
<em>pattern</em> attribute, which must use the pattern syntax specified by
<em>java.text.SimpleDateFormat</em>. In this case, the <em>type</em>, <em>dateStyle</em>,
and <em>timeStyle</em> attributes are ignored. Parsing is non-lenient, i.e. the
given date string must strictly adhere to the parsing format.</p>
</div>
<div class="paragraph">
<p>If the given time information does not
specify a time zone, it is interpreted in the time zone determined
according to Section 9.4.</p>
</div>
<div class="paragraph">
<p>If the <em>var</em> attribute is given, the parsing
result (of type <em>java.util.Date</em> ) is stored in the named scoped
variable. Otherwise, it is output to the current <em>JspWriter</em> using the
<em>java.util.Date</em> method <em>toString()</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-settings-2"><a class="anchor" href="#configuration-settings-2"></a>9.11. Configuration Settings</h3>
<div class="paragraph">
<p>This section describes the formatting-related
configuration settings. Refer to <a href="#configuration-data">Configuration Data</a> for more information on how the Jakarta Standard Tag Library processes
configuration data.</p>
</div>
<div class="sect3">
<h4 id="timezone"><a class="anchor" href="#timezone"></a>9.11.1. TimeZone</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Variable name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>jakarta.servlet.jsp.jstl.fmt.timeZone</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Constant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Config.FMT_TIMEZONE</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or
java.util.TimeZone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;fmt:setTimeZone&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;fmt:formatDate&gt;</code>, <code>&lt;fmt:parseDate&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Specifies the application&#8217;s default time
zone. A <em>String</em> value is interpreted as defined in action
<code>&lt;fmt:timeZone&gt;</code> (see <a href="#fmt:timeZone">&lt;fmt:timeZone&gt;</a>).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sql-actions-sql-tag-library"><a class="anchor" href="#sql-actions-sql-tag-library"></a>10. SQL Actions: sql tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many web applications need to access
relational databases as the source of dynamic data for their
presentation layer. While it is generally preferred to have database
operations handled within the business logic of a web application
designed with an MVC architecture, there are situations where page
authors require this capability within their Jakarta Server Pages (e.g.
prototyping/testing, small scale/simple applications, lack of developer
resources).</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library SQL actions provide the basic
capabilities to easily interact with relational databases.</p>
</div>
<div class="sect2">
<h3 id="SQL_Action_Overview"><a class="anchor" href="#SQL_Action_Overview"></a>10.1. Overview</h3>
<div class="paragraph">
<p>The Jakarta Standard Tag Library SQL actions allow page authors to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Perform database queries (<em>select</em>)</p>
</li>
<li>
<p>Easily access query results</p>
</li>
<li>
<p>Perform database updates (<em>insert</em>,
<em>update</em>, <em>delete</em>)</p>
</li>
<li>
<p>Group several database operations into a
transaction</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="data-source"><a class="anchor" href="#data-source"></a>10.1.1. Data Source</h4>
<div class="paragraph">
<p>SQL actions operate on a data source, as
defined by the Java class <em>javax.sql.DataSource</em>. A <em>DataSource</em> object
provides connections to the physical data source it represents. Within
the context of a <em>Connection</em> retrieved from the <em>DataSource</em>, SQL
statements are executed and results are returned.</p>
</div>
<div class="paragraph">
<p>A data source can be specified explicitly via
the <em>dataSource</em> attribute in SQL actions, or it can be totally
transparent to a page author by taking advantage of the data source
configuration setting (<em>jakarta.servlet.jsp.jstl.sql.dataSource</em>).</p>
</div>
<div class="paragraph">
<p>There are two ways a data source can be
specified as a string.</p>
</div>
<div class="paragraph">
<p>The first way is through a JNDI relative
path, assuming a container supporting JNDI. For example, with the
absolute JNDI resource path <em>java:comp/env/jdbc/myDatabase</em>, the JNDI
relative path to the data source resource would simply be
<em>jdbc/myDatabase</em>, given that <em>java:comp/env</em> is the standard JNDI root
for a J2EE application.</p>
</div>
<div class="paragraph">
<p>The second way is by specifying the
parameters needed by the JDBC <em>DriverManager</em> class, using the following
syntax (see <a href="#sql:setDataSource">&lt;sql:setDataSource&gt;</a> for
details on the JDBC parameters)</p>
</div>
<div class="paragraph">
<p>&#160;&#160;&#160;&#160; <em>url[,[driver][,[user][,password]]]</em></p>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="paragraph">
<p>&#160;&#160;&#160;&#160; <em>jdbc:mysql://localhost/,org.gjt.mm.mysql.Driver</em></p>
</div>
<div class="paragraph">
<p>where the database has been setup for access
without any username or password. If the ',' character occurs in any of
the JDBC parameters, it can be escaped by '\'. The character '\' itself
can be escaped in the same way.</p>
</div>
<div class="paragraph">
<p>While the JDBC <em>DriverManager</em> class provides
a low cost way to use SQL actions, it is not recommended to use it other
than for prototyping purposes because it does not provide connection
management features one can expect from a properly designed <em>DataSource</em>
object.</p>
</div>
</div>
<div class="sect3">
<h4 id="querying-a-database"><a class="anchor" href="#querying-a-database"></a>10.1.2. Querying a Database</h4>
<div class="paragraph">
<p>The most common use of the database actions
is to query a database and display the results of the query.</p>
</div>
<div class="paragraph">
<p>The following sample code selects all
customers from China from the customers table in the database, orders
them by last name, and finally displays their last name, first name, and
address in an HTML table.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:query var="customers" dataSource="${dataSource}"&gt;
    SELECT * FROM customers
    WHERE country = 'China'
    ORDER BY lastname
&lt;/sql:query&gt;

&lt;table&gt;
    &lt;c:forEach var="row" items="${customers.rows}"&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;c:out value="${row.lastName}"/&gt;&lt;/td&gt;
            &lt;td&gt;&lt;c:out value="${row.firstName}"/&gt;&lt;/td&gt;
            &lt;td&gt;&lt;c:out value="${row.address}"/&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/c:forEach&gt;
&lt;/table&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This next example shows a generic way to
display the results of a query with column names as headers:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;table&gt;
    &lt;!-- column headers --&gt;
    &lt;tr&gt;
        &lt;c:forEach var="columnName" items="${result.columnNames}"&gt;
            &lt;th&gt;&lt;c:out value="${columnName}"/&gt;&lt;/th&gt;
        &lt;/c:forEach&gt;
    &lt;/tr&gt;
    &lt;!-- column data --&gt;
    &lt;c:forEach var="row" items="${result.rowsByIndex}"&gt;
        &lt;tr&gt;
            &lt;c:forEach var="column" items="${row}"&gt;
                &lt;td&gt;&lt;c:out value="${column}"/&gt;&lt;/td&gt;
            &lt;/c:forEach&gt;
        &lt;/tr&gt;
    &lt;/c:forEach&gt;
&lt;/table&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="updating-a-database"><a class="anchor" href="#updating-a-database"></a>10.1.3. Updating a Database</h4>
<div class="paragraph">
<p>The <code>&lt;sql:update&gt;</code> action updates a database.
To ensure database integrity, several updates to a database may be
grouped into a transaction by nesting the <code>&lt;sql:update&gt;</code> actions inside a
<code>&lt;sql:transaction&gt;</code> action.</p>
</div>
<div class="paragraph">
<p>For example, the following code transfers
money between two accounts in one transaction:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:transaction dataSource="${dataSource}"&gt;
    &lt;sql:update&gt;
        UPDATE account
        SET Balance = Balance - ?
        WHERE accountNo = ?
        &lt;sql:param value="${transferAmount}"/&gt;
        &lt;sql:param value="${accountFrom}"/&gt;
    &lt;/sql:update&gt;
    &lt;sql:update&gt;
        UPDATE account
        SET Balance = Balance + ?
        WHERE accountNo = ?
        &lt;sql:param value="${transferAmount}"/&gt;
        &lt;sql:param value="${accountTo}"/&gt;
    &lt;/sql:update&gt;
&lt;/sql:transaction&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sql-statement-parameters"><a class="anchor" href="#sql-statement-parameters"></a>10.1.4. SQL Statement Parameters</h4>
<div class="paragraph">
<p>The Jakarta Standard Tag Library database actions support
substituting parameter values for parameter markers ("?") in SQL
statements (as shown in the previous example). This form of parametric
replacement is exposed by the <em>jakarta.servlet.jsp.jstl.sql.SQLExecutionTag</em> interface.</p>
</div>
<div class="paragraph">
<p>The <em>SQLExecutionTag</em> interface is
implemented by the tag handlers for <code>&lt;sql:query&gt;</code> and <code>&lt;sql:update&gt;</code>. It is
exposed in order to support custom parameter actions. These custom
actions may retrieve their parameters from any source and process them
before substituting them for a parameter marker in the SQL statement of
the enclosing <em>SQLExecutionTag</em> action.</p>
</div>
<div class="paragraph">
<p>For example, a GUI front end may have a user
enter a date as three separate fields (year, month, and day), and use
this information in a database query. If the database table being
accessed provides only a single column for the complete date, action
<code>&lt;acme:dateParam&gt;</code> could assemble the three separate input parameters into
one and pass it to the <em>addSQLParameter()</em> method of its enclosing
<em>SQLExecutionTag</em> action:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:update&gt;
    UPDATE PersonalInfo
    SET BirthDate = ?
    WHERE clientId = ?
    &lt;acme:dateParam year="${year}" month="${month}" day="${day}"/&gt;
    &lt;sql:param value="${clientId}"/&gt;
&lt;/sql:update&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library formatting tags may be used to parse
the string representation of dates and numbers into instances of
<em>java.util.Date</em> and <em>java.lang.Number</em>, respectively, before supplying
them to an enclosing <em>SQLExecutionTag</em> for parametric replacement:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:update sql="${sqlUpdateStmt}" dataSource="${dataSource}"&gt;
    &lt;fmt:parseDate var="myDate" value="${someDate}"/&gt;
    &lt;sql:param value="${myDate}"/&gt;
&lt;/sql:update&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="database-access"><a class="anchor" href="#database-access"></a>10.2. Database Access</h3>
<div class="paragraph">
<p>This section describes the algorithm used by
the SQL actions (<code>&lt;sql:query&gt;</code>, <code>&lt;sql:update&gt;</code>, <code>&lt;sql:transaction&gt;</code>) to access
a database.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Try to get a reference to a data source as
follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the attribute <em>dataSource</em> is specified,
use the value specified for that attribute as the data source.</p>
</li>
<li>
<p>Otherwise, get the configuration setting
associated with <em>jakarta.servlet.jsp.jstl.sql.dataSource</em> using
<em>Config.find()</em> (see <a href="#configuration-data">Configuration Data</a>). Use the value found as the data source if it is not null.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If a data source is obtained from the
previous step:</p>
<div class="ulist">
<ul>
<li>
<p>If it is a <em>DataSource</em> object, this is the
data source used by the action to access the database.</p>
</li>
<li>
<p>Otherwise, if it is a <em>String</em>:</p>
<div class="ulist">
<ul>
<li>
<p>Assume this is a JNDI relative path and
retrieve the data source from the container&#8217;s JNDI naming context by
concatenating the specified relative path to the J2EE defined root (<em>java:comp/env/</em>).</p>
</li>
<li>
<p>If the previous step fails (data source not
found), assume the string specifies JDBC parameters using the syntax
described in <a href="#data-source">Data Source</a> and do as
follows:</p>
</li>
<li>
<p>If driver is specified, ensure it is loaded</p>
</li>
<li>
<p>Access the named URL through the
<em>DriverManager</em> class, using an empty string for <em>user</em> or <em>password</em> if
they are not specified.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the previous step fails, throw an
exception.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, throw an exception.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An implementation need not create new objects
each time a SQL action is called and the algorithm above does not yield
a <em>DataSource</em> object directly; i.e when a JNDI path or parameters for
the JDBC <em>DriverManager</em> class are used. It may reuse objects that it
previously created for identical arguments.</p>
</div>
<div class="paragraph">
<p>It is important to note that actions that
open a connection to a database must close the connection as well as
release any other associated resources (for example, <em>Statement</em>,
<em>PreparedStatement</em> and <em>ResultSet</em> objects) by the time the action
completes. This ensures that no connections are left open and that leaks
are avoided when these actions are used with pooling mechanisms.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="sql:query"><a class="anchor" href="#sql:query"></a>10.3. &lt;sql:query&gt;</h3>
<div class="paragraph">
<p>Queries a database.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:query sql="sqlQuery"
        var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]
        [dataSource="dataSource"]
        [maxRows="maxRows"]
        [startRow="startRow"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With a body to specify query
arguments</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:query sql="sqlQuery"
        var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]
        [dataSource="dataSource"]
        [maxRows="maxRows"]
        [startRow="startRow"]&gt;
    &lt;sql:param&gt; actions
&lt;/sql:query&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 3: With a body to specify query and
optional query parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:query var="varName"
        [scope="{<span class="underline">page</span>|request|session|application}"]
        [dataSource="dataSource"]
        [maxRows="maxRows"]
        [startRow="startRow"]&gt;
    query
    optional &lt;sql:param&gt; actions
&lt;/sql:query&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sql</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL query
statement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>dataSource</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javax.sql.DataSource or String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data source associated with the database to
query. A <em>String</em> value represents a relative path to a JNDI resource or
the parameters for the <em>DriverManager</em> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>maxRows</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum
number of rows to be included in the query result. If not specified, or
set to -1, no limit on the maximum number of rows is enforced.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startRow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The returned
<em>Result</em> object includes the rows starting at the specified index. The
first row of the original query result set is at index 0. If not
specified, rows are included starting from the first row at index 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">var</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the exported scoped variable for the
query result. The type of the scoped variable is</p>
</div>
<div class="paragraph">
<p><em>jakarta.servlet.jsp.jstl.sql.Result</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of
<em>var</em>.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>dataSource</em> is specified, this
action must not be nested inside a
&lt;sql:transaction&gt;.<sup class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup></p>
</li>
<li>
<p><em>maxRows</em> must be &gt;= -1</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>dataSource</em> is null, a <em>JspException</em> is
thrown.</p>
</li>
<li>
<p>If an exception occurs during the execution
of this action, it must be caught and rethrown as a <em>JspException</em>. The
message of the rethrown <em>JspException</em> must include the SQL statement,
and the caught exception must be provided as the root cause.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;sql:query&gt;</code> action queries a database and
returns a single result set containing rows of data that it stores in
the scoped variable identified by the <em>var</em> and <em>scope</em> attributes.</p>
</div>
<div class="paragraph">
<p>If the query produces no results, an empty
<em>Result</em> object (of size zero) is returned.</p>
</div>
<div class="paragraph">
<p>The SQL query statement may be specified by
the <em>sql</em> attribute or from the action&#8217;s body content.</p>
</div>
<div class="paragraph">
<p>The query statement may contain parameter
markers ("?") identifying JDBC <em>PreparedStatement</em> parameters, whose
values must be supplied by nested parameter actions (such as
<a href="#sql:param">&lt;sql:param&gt;</a>). The
<code>&lt;sql:query&gt;</code> action implements the <em>jakarta.servlet.jsp.jstl.sql.SQLExecutionTag</em> interface, allowing parameter values
to be supplied by custom parameter actions.</p>
</div>
<div class="paragraph">
<p><strong>maxRows and startRow</strong></p>
</div>
<div class="paragraph">
<p>The maximum number of rows to be included in
the query result may be specified by the <em>maxRows</em> attribute (for a
specific <code>&lt;sql:query&gt;</code> action) or by the configuration setting
<em>jakarta.servlet.jsp.jstl.sql.maxRows</em> (see
<a href="#configuration-data">Configuration Data</a> and
<a href="#SQL_Actions_Configuration_Settings">Configuration Settings</a>). Attribute
<em>maxRows</em> has priority over the configuration setting. A value of -1
means that no limit is enforced on the maximum number of rows.</p>
</div>
<div class="paragraph">
<p>The <em>startRow</em> attribute may be used to
specify the index of the first row to be included in the returned
<em>Result</em> object. For example, if given a value of 10, the returned
Result object will start with the row located at index 10 (i.e. rows 0
through 9 of the original query result set are skipped). All remaining
rows of the original query result set are included.</p>
</div>
<div class="paragraph">
<p>If both <em>startRow</em> and <em>maxRows</em> are
specified, a maximum of <em>startRow + maxRows</em> rows are retrieved from the
database. All rows up to <em>startRow</em> are then discarded, and the
remaining rows (from <em>startRow</em> through <em>startRow + maxRows</em>) are
included in the result.</p>
</div>
<div class="paragraph">
<p>When using <em>startRow</em>, it is important to
note that the order in which rows are returned is not guaranteed between
RDBMS implementations unless an "order by" clause is specified in the
query.</p>
</div>
<div class="paragraph">
<p><em>maxRows</em> and <em>startRow</em> protect against
so-called "runaway queries", allow efficient access to the top rows of
large result sets, and also provide a "poor-man&#8217;s way" of paging through
a large query result by increasing <em>startRow</em> by <em>maxRows</em> over a
previous page.</p>
</div>
<div class="paragraph">
<p><strong>Obtaining and Releasing a Connection</strong></p>
</div>
<div class="paragraph">
<p>If <code>&lt;sql:query&gt;</code> is nested inside an
<code>&lt;sql:transaction&gt;</code> action, the <em>Connection</em> object is obtained from that
parent <code>&lt;sql:transaction&gt;</code> which is reponsible for managing access to the
database.</p>
</div>
<div class="paragraph">
<p>Otherwise, access to the database is
performed according to the algorithm described in
<a href="#database-access">Database Access</a>. A <em>Connection</em> object
is obtained and released before the action completes.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="sqlupdate"><a class="anchor" href="#sqlupdate"></a>10.4. &lt;sql:update&gt;</h3>
<div class="paragraph">
<p>Executes an SQL <em>INSERT</em>, <em>UPDATE</em>, or
<em>DELETE</em> statement. In addition, SQL statements that return nothing,
such as SQL DDL statements, can be executed.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:update sql="sqlUpdate"
        [dataSource="dataSource"]
        [var="varName"]
        [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With a body to specify update
parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:update sql="sqlUpdate"
        [dataSource="dataSource"]
        [var="varName"]
        [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    &lt;sql:param&gt; actions
&lt;/sql:update&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 3: With a body to specify update
statement and optional update parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:update [dataSource="dataSource"]
        [var="varName"] [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    update statement
    optional &lt;sql:param&gt; actions
&lt;/sql:update&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>sql</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL
update statement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataSource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>javax.sql.</p>
</div>
<div class="paragraph">
<p>DataSource or String</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data source associated with the database to
update. A String value represents a relative path to a JNDI resource or
the parameters for the JDBC <em>DriverManager</em> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of
the exported scoped variable for the result of the database update. The
type of the scoped variable is <em>java.lang.Integer</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope of
<em>var</em>.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
<li>
<p>If <em>dataSource</em> is specified, this action
must not be nested inside a <code>&lt;sql:transaction&gt;</code>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>dataSource</em> is null, a <em>JspException</em> is
thrown.</p>
</li>
<li>
<p>If an exception occurs during the execution
of this action, it must be caught and rethrown as a <em>JspException</em>. The
message of the rethrown <em>JspException</em> must include the SQL statement,
and the caught exception must be provided as the root cause.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The SQL update statement may be specified by
the <em>sql</em> attribute or from the action&#8217;s body content.</p>
</div>
<div class="paragraph">
<p>The update statement may contain parameter
markers ("?") identifying JDBC <em>PreparedStatement</em> parameters, whose
values must be supplied by nested parameter actions (such as
<a href="#sql:param">&lt;sql:param&gt;</a>). The
<code>&lt;sql:update&gt;</code> action implements the <em>jakarta.servlet.jsp.jstl.sql.SQLExecutionTag</em> interface, allowing the parameter
values to be supplied by custom parameter tags.</p>
</div>
<div class="paragraph">
<p>The connection to the database is obtained in
the same manner as described for <a href="#sql:query">&lt;sql:query&gt;</a>.</p>
</div>
<div class="paragraph">
<p>The result of an <code>&lt;sql:update&gt;</code> action is
stored in a scoped variable named by the <em>var</em> attribute, if that
attribute was specified. That result represents the number of rows that
were affected by the update. Zero is returned if no rows were affected
by <em>INSERT</em>, <em>DELETE</em>, or <em>UPDATE</em>, and for any SQL statement that
returns nothing (such as SQL DDL statements). This is consistent with
method <em>executeUpdate()</em> of the JDBC class <em>Statement</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="sqltransaction"><a class="anchor" href="#sqltransaction"></a>10.5. &lt;sql:transaction&gt;</h3>
<div class="paragraph">
<p>Establishes a transaction context for
<code>&lt;sql:query&gt;</code> and <code>&lt;sql:update&gt;</code> subtags.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;sql:transaction [dataSource="dataSource"]
        [isolation=isolationLevel]&gt;
    &lt;sql:query&gt; and &lt;sql:update&gt; statements
&lt;/sql:transaction&gt;

isolationLevel ::= "read_committed"
                | "read_uncommitted"
                | "repeatable_read"
                | "serializable"</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakart Server Pages container processes the body
content and then writes the result to the current <em>JspWriter</em>. The
action ignores the body content.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>dataSource</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>javax.sql.</p>
</div>
<div class="paragraph">
<p>DataSource</p>
</div>
<div class="paragraph">
<p>or String</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataSource associated with the database to
access. A String value represents a relative path to a JNDI resource or
the parameters for the JDBC DriverManager facility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isolation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction isolation level. If not
specified, it is the isolation level the DataSource has been configured
with.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Any nested <code>&lt;sql:query&gt;</code> and <code>&lt;sql:update&gt;</code>
actions must not specify a <em>dataSource</em> attribute.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>dataSource</em> is null, a <em>JspException</em> is
thrown.</p>
</li>
<li>
<p>Any exception occurring during the execution
of this action must be caught and rethrown after the transaction has
been rolled back (see description below for details).</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;sql:transaction&gt;</code> action groups nested
<code>&lt;sql:query&gt;</code> and <code>&lt;sql:update&gt;</code> actions into a transaction.</p>
</div>
<div class="paragraph">
<p>The transaction isolation levels are defined
by <em>java.sql.Connection</em>.</p>
</div>
<div class="paragraph">
<p>The tag handler of the <code>&lt;sql:transaction&gt;</code>
action must perform the following steps in its lifecycle methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>doStartTag()</em>:</p>
<div class="ulist">
<ul>
<li>
<p>Determines the transaction isolation level
the DBMS is set to (using the <em>Connection</em> method
<em>getTransactionIsolation()</em>).<br>
If transactions are not supported (that is,
the transaction isolation level is equal to <em>TRANSACTION_NONE</em>), an
exception is raised, causing the transaction to fail.<br>
For any other transaction isolation level,
the auto-commit mode is is saved (so it can later be restored), and then
disabled by calling <em>setAutoCommit(false)</em> on the <em>Connection</em>.</p>
</li>
<li>
<p>If the <em>isolation</em> attribute is specified and
differs from the connection&#8217;s current isolation level, the current
transaction isolation level is saved (so it can later be restored) and
set to the specified level (using the <em>Connection</em> method
<em>setTransactionIsolation()</em>).</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>doEndTag()</em>: Calls the <em>Connection</em> method
<em>commit()</em>.</p>
</li>
<li>
<p><em>doCatch()</em>: Calls the <em>Connection</em> method
<em>rollback()</em>.</p>
</li>
<li>
<p><em>doFinally()</em>:</p>
<div class="ulist">
<ul>
<li>
<p>If a transaction isolation level has been
saved, it is restored using the <em>Connection</em> method
<em>setTransactionIsolation()</em>.</p>
</li>
<li>
<p>Restore auto-commit mode to its saved value
by calling <em>setAutoCommit()</em> on the <em>Connection</em>.</p>
</li>
<li>
<p>Closes the connection.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>Connection</em> object is obtained and
managed in the same manner as described for <code>&lt;sql:query&gt;</code> (see <a href="#sql:query">&lt;sql:query&gt;</a>), except that it is never
obtained from a parent tag (<code>&lt;sql:transaction&gt;</code> tags can not be nested as
a means to propagate a <em>Connection</em>).</p>
</div>
<div class="paragraph">
<p>Note that the <code>&lt;sql:transaction&gt;</code> tag handler
commits or rollbacks the transaction (if it catches an exception) by
calling the JDBC <em>Connection commit()</em> and <em>rollback()</em> methods
respectively. Executing the corresponding SQL statements using
<code>&lt;sql:update&gt;</code>, e.g. <code>&lt;sql:update sql="rollback" /&gt;</code>, within the
<code>&lt;sql:transaction&gt;</code> element body is not supported and the result of doing
so is unpredictable.</p>
</div>
<div class="paragraph">
<p>Finally, the behavior of the
<code>&lt;sql:transaction&gt;</code> action is undefined if it executes in the context of a
larger JTA user transaction.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="sql:setDataSource"><a class="anchor" href="#sql:setDataSource"></a>10.6. &lt;sql:setDataSource&gt;</h3>
<div class="paragraph">
<p>Exports a data source either as a scoped
variable or as the data source configuration variable (<em>jakarta.servlet.jsp.jstl.sql.dataSource</em>).</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;sql:setDataSource
        {dataSource="dataSource" |
            url="jdbcUrl"
            [driver="driverClassName"]
            [user="userName"]
            [password="password"]}
        [var="varName"]
        [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>dataSource</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or
javax.sql.DataSource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data source. If
specified as a string, it can either be a relative path to a JNDI
resource, or a JDBC parameters string as defined in
<a href="#data-source">Data Source</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>driver</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC
parameter: driver class name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC
parameter: URL associated with the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC
parameter: database user on whose behalf the connection to the database
is being made.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC
parameter: user password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">var</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of
the exported scoped variable for the data source specified. Type can be
<em>String</em> or <em>DataSource</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <em>var</em>
is specified, scope of the exported variable. Otherwise, scope of the
data source configuration variable.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>dataSource</em> is null, a <em>JspException</em> is
thrown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>If the <em>var</em> attribute is specified, the
<code>&lt;sql:setDataSource&gt;</code> action exports the data source specified (either as
a <em>DataSource</em> object or as a String) as a scoped variable. Otherwise,
the data source is exported in the
<em>jakarta.servlet.jsp.jstl.sql.dataSource</em> configuration variable.</p>
</div>
<div class="paragraph">
<p>The data source may be specified either via
the <em>dataSource</em> attribute (as a <em>DataSource</em> object, JNDI relative
path, or JDBC parameters string), or via the four JDBC parameters
attributes. These four attributes are provided as a simpler alternative
to the JDBC parameters string syntax defined in
<a href="#data-source">Data Source</a> that would have to be used
with the <em>dataSource</em> attribute.</p>
</div>
<div class="paragraph">
<p>As mentioned in
<a href="#data-source">Data Source</a>, using JDBC&#8217;s
<em>DriverManager</em> class to access a database is intended for prototyping
purposes only because it does not provide connection management features
one can expect from a properly designed <em>DataSource</em> object.</p>
</div>
</div>
<div class="sect2">
<h3 id="sql:param"><a class="anchor" href="#sql:param"></a>10.7. &lt;sql:param&gt;</h3>
<div class="paragraph">
<p>Sets the values of parameter markers ("?") in
a SQL statement. Subtag of <em>SQLExecutionTag</em> actions such as <code>&lt;sql:query&gt;</code>
and <code>&lt;sql:update&gt;</code>.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Parameter value specified in
attribute "value"</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:param value="value"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: Parameter value specified in the
body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;sql:param&gt;
    parameter value
&lt;/sql:param&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter
value.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must be nested inside an action whose tag
handler is an instance of <em>jakarta.servlet.jsp.jstl.sql.SQLExecutionTag</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null, the parameter is set to
the SQL value NULL.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;sql:param&gt;</code> action substitutes the given
parameter value for a parameter marker("?") in the SQL statement of its
enclosing <em>SQLExecutionTag</em> action.</p>
</div>
<div class="paragraph">
<p>Parameters are substituted in the order
in which they are specified.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;sql:param&gt;</code> action locates its nearest
ancestor that is an instance of <em>SQLExecutionTag</em> and calls its
<em>addSQLParameter()</em> method, supplying it with the given parameter value.</p>
</div>
<div class="paragraph">
<p>It is important to note that the semantics of
<em>SQLExecutionTag.addSQLParameter()</em> are such that supplying a parameter
with a <em>String</em> value (e.g. when using syntax 2) only works for columns
of text type (<em>CHAR</em>, <em>VARCHAR</em> or <em>LONGVARCHAR</em>).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="sqldateparam"><a class="anchor" href="#sqldateparam"></a>10.8. &lt;sql:dateParam&gt;</h3>
<div class="paragraph">
<p>Sets the values of parameter markers ("?") in
a SQL statement for values of type <em>java.util.Date</em>. Subtag of
<em>SQLExecutionTag</em> actions, such as <code>&lt;sql:query&gt;</code> and <code>&lt;sql:update&gt;</code>.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;sql:dateParam value="value" [type="{<span class="underline">timestamp</span>|time|date}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter value for DATE, TIME, or TIMESTAMP
column in a database table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of
"date", "time" or "timestamp".</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must be nested inside an action whose tag
handler is an instance of <em>jakarta.servlet.jsp.jstl.sql.SQLExecutionTag</em>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>value</em> is null, the parameter is set to
the SQL value NULL.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>This action converts the provided
<em>java.util.Date</em> instance to one of <em>java.sql.Date</em>, <em>java.sql.Time</em> or
<em>java.sql.Timestamp</em> as defined by the <em>type</em> attribute as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <em>java.util.Date</em> object provided by
the <em>value</em> attribute is an instance of <em>java.sql.Time</em>,
<em>java.sql.Date</em>, or <em>java.sql.Timestamp</em>, and the <em>type</em> attribute
matches this object&#8217;s type, then it is passed as is to the database.</p>
</li>
<li>
<p>Otherwise, the object is converted to the
appropriate type by calling that type&#8217;s constructor with a parameter of
<em>date.getTime()</em>, where <em>date</em> is the value of the <em>value</em> attribute.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>&lt;sql:dateParam&gt;</code> action substitutes the
given parameter value for a parameter marker("?") in the SQL statement
of its enclosing <em>SQLExecutionTag</em> action.</p>
</div>
<div class="paragraph">
<p>Parameters are substituted in the order
in which they are specified.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;sql:dateParam&gt;</code> action locates its
nearest ancestor that is an instance of <em>SQLExecutionTag</em> and calls its
<em>addSQLParameter()</em> method, supplying it with the given parameter value.</p>
</div>
</div>
<div class="sect2">
<h3 id="SQL_Actions_Configuration_Settings"><a class="anchor" href="#SQL_Actions_Configuration_Settings"></a>10.9. Configuration Settings</h3>
<div class="paragraph">
<p>This section describes the configuration
settings used by the SQL actions. Refer to
<a href="#configuration-data">Configuration Data</a> for more
information on how the Jakarta Standard Tag Library processes configuration data.</p>
</div>
<div class="sect3">
<h4 id="datasource"><a class="anchor" href="#datasource"></a>10.9.1. DataSource</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Variable name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>jakarta.servlet.jsp.jstl.sql.dataSource</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Constant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Config.SQL_DATA_SOURCE</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String or
javax.sql.DataSource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sql:setDataSource&gt;</code>, Deployment Descriptor,
Config class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sql:query&gt;</code>, <code>&lt;sql:update&gt;</code>, <code>&lt;sql:transaction&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The data source to be accessed by the SQL
actions. It can be specified as a string representing either a JNDI
relative path or a JDBC parameters string (as defined in
<a href="#data-source">Data Source</a>), or as a
<em>javax.sql.DataSource</em> object.</p>
</div>
</div>
<div class="sect3">
<h4 id="maxrows"><a class="anchor" href="#maxrows"></a>10.9.2. MaxRows</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Variable name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>jakarta.servlet.jsp.jstl.sql.maxRows</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Constant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Config.SQL_MAX_ROWS</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment Descriptor, Config class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;sql:query&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The maximum number of rows to be included in
a query result. If the maximum number of rows is not specified, or is
-1, it means that no limit is enforced on the maximum number of rows.
Value must be &gt;= -1.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xml-core-actions-xml-tag-library"><a class="anchor" href="#xml-core-actions-xml-tag-library"></a>11. XML Core Actions: xml tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enterprise data used in the web tier is
increasingly XML these days — when companies cooperate over the web, XML
is the data format of choice for exchanging information.</p>
</div>
<div class="paragraph">
<p>XML is therefore becoming more and more
important in a page author&#8217;s life. The set of XML actions specified in
the Jakarta Standard Tag Library is meant to address the basic XML needs a page author is likely to
encounter.</p>
</div>
<div class="paragraph">
<p>The XML actions are divided in three
categories: XML core actions (this chapter), XML flow control actions
(<a href="#xml-flow-control-actions-xml-tag-library">XML Flow Control Actions: xml tag library</a>), and XML transform actions
(<a href="#xml-transform-actions-xml-tag-library">XML Transform Actions: xml tag library</a>).</p>
</div>
<div class="sect2">
<h3 id="overview-6"><a class="anchor" href="#overview-6"></a>11.1. Overview</h3>
<div class="paragraph">
<p>A key aspect of dealing with XML documents is
to be able to easily access their content. XPath, a W3C recommendation
since 1999, provides a concise notation for specifying and selecting
parts of an XML document. The XML set of actions in the Jakarta Standard Tag Library is therefore
based on XPath.</p>
</div>
<div class="paragraph">
<p>The introduction of XPath for the XML tagset
expands the notion of expression language. XPath is an expression
language that is used locally for the XML actions. Below are the rules
of integration that XPath follows as a local expression language. These
rules ensure that XPath integrates nicely within the Jakarta Standard Tag Library environment.</p>
</div>
<div class="sect3">
<h4 id="xpath-context"><a class="anchor" href="#xpath-context"></a>11.1.1. XPath Context</h4>
<div class="paragraph">
<p>In XPath, the context for evaluating an
expression consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A node or nodeset</p>
</li>
<li>
<p>Variable bindings (see below)</p>
</li>
<li>
<p>Function library<br>
The default function library comes with the
XPath engine. Some engines provide extension functions or allow
customization to add new functions. The XPath function library in the Jakarta Standard Tag Library
is limited to the core function library of the XPath specification.</p>
</li>
<li>
<p>Namespace prefix definitions which allow
namespace prefixes to be used within an XPath expression.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="xpath-variable-bindings"><a class="anchor" href="#xpath-variable-bindings"></a>11.1.2. XPath Variable Bindings</h4>
<div class="paragraph">
<p>The XPath engine supports the following
scopes to easily access web application data within an XPath expression.
These scopes are defined in exactly the same way as their implicit
object counterparts in the Jakarta Standard Tag Library expression language (see
<a href="EL-152.html#UNKNOWN">See Implicit Objects</a>).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Expression</th>
<th class="tableblock halign-left valign-top">Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$foo</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>pageContext.findAttribute("foo")</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$param:foo</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>request.getParameter("foo")</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$header:foo</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>request.getHeader("foo")</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$cookie:foo</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>maps to the cookie&#8217;s value for name foo</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$initParam:foo</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>application.getInitParameter("foo")</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$pageScope:foo</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>pageContext.getAttribute(</em><br>
&#160;&#160;&#160;&#160; <em>"foo", PageContext.PAGE_SCOPE)</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$requestScope:foo</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>pageContext.getAttribute(</em><br>
&#160;&#160;&#160;&#160; <em>"foo", PageContext.REQUEST_SCOPE)</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$sessionScope:foo</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>pageContext.getAttribute(</em><br>
&#160;&#160;&#160;&#160; <em>"foo", PageContext.SESSION_SCOPE)</em></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>$applicationScope:foo</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>pageContext.getAttribute(</em><br>
&#160;&#160;&#160;&#160; <em>"foo", PageContext.APPLICATION_SCOPE)</em></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Through these mappings, Jakarta Server Pages scoped variables,
request parameters, headers, and cookies, as well as context init
parameters can all be used inside XPath expressions easily. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/foo/bar[@x=$param:name]</pre>
</div>
</div>
<div class="paragraph">
<p>would find the "bar" element with an
attribute "x" equal to the value of the http request parameter "name".</p>
</div>
</div>
<div class="sect3">
<h4 id="java-to-xpath-type-mappings"><a class="anchor" href="#java-to-xpath-type-mappings"></a>11.1.3. Java to XPath Type Mappings</h4>
<div class="paragraph">
<p>An XPath variable must reference a
<em>java.lang.Object</em> instance in one of the supported scopes, identified
by namespace prefix. The following mappings must be supported:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java Type</th>
<th class="tableblock halign-left valign-top">XPath
Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>java.lang.Boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>java.lang.Number</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>number</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>java.lang.String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object exported by <code>&lt;x:parse&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>node-set</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A compliant implementation must allow an
XPath variable to address objects exposed by that implementation&#8217;s
handlers for <code>&lt;x:set&gt;</code> and <code>&lt;x:forEach&gt;</code>. For example, while an
implementation of <code>&lt;x:set&gt;</code> may expose, for a node-set S, an object of any
valid Java type, subsequent XPath evaluations must interpret this object
as the node-set S.</p>
</div>
<div class="paragraph">
<p>An XPath expression must also treat variables
that resolve to implementations of standard DOM interfaces as
representing nodes of the type bound to that interface by the DOM
specification.</p>
</div>
<div class="paragraph">
<p>XPath variable references that address
objects of other types result in implementation-defined behavior. (An
implementation may throw an exception if it encounters an unrecognized
type.) Following the XPath specification (section 3.1), a variable name
that is not bound to any value results in an exception.</p>
</div>
</div>
<div class="sect3">
<h4 id="xpath-to-java-type-mappings"><a class="anchor" href="#xpath-to-java-type-mappings"></a>11.1.4. XPath to Java Type Mappings</h4>
<div class="paragraph">
<p>Evaluation of XPath expressions evaluate to
XPath types. Their mapping to Java objects is defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">XPath Type</th>
<th class="tableblock halign-left valign-top">Java
Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>_boolean_</pre>
</div>
</div>
<div class="paragraph">
<p>true or false</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>java.lang.Boolean</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>_number_</pre>
</div>
</div>
<div class="paragraph">
<p>a floating-point number</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>java.lang.Number</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>_string_</pre>
</div>
</div>
<div class="paragraph">
<p>a sequence of UCS characters</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>java.lang.String</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="literalblock">
<div class="content">
<pre>_node-set_</pre>
</div>
</div>
<div class="paragraph">
<p>an unordered collection of nodes without
duplicates</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type usable by Jakarta Standard Tag Library XML-manipulation tags in
the same Jakarta Standard Tag Library implementation. The specific Java type representing
node-sets may thus vary by implementation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="the-select-attribute"><a class="anchor" href="#the-select-attribute"></a>11.1.5. The <em>select</em> Attribute</h4>
<div class="paragraph">
<p>In all the XML actions of the Jakarta Standard Tag Library, XPath
expressions are always specified using the <em>select</em> attribute. <em>select</em>
is therefore always specified as a string literal that is evaluated by
the XPath engine.</p>
</div>
<div class="paragraph">
<p>This clear separation, where only the
<em>select</em> attribute of XML actions evaluates XPath expressions, helps
avoid confusion between XPath (expression language that is local to the
XML actions) and the Jakarta Standard Tag Library expression language (global to all actions
with dynamic attributes in the Expression Language version of the tag library).</p>
</div>
</div>
<div class="sect3">
<h4 id="default-context-node"><a class="anchor" href="#default-context-node"></a>11.1.6. Default Context Node</h4>
<div class="paragraph">
<p>The context node for every XPath expression
evaluation in the Jakarta Standard Tag Library that does not appear in the body of an <code>&lt;x:forEach&gt;</code>
tag is the root of an empty document. Page authors wishing to work with
documents must therefore suply their own node(s) using an XPath variable
(see <a href="#xpath-variable-bindings">XPath Variable Bindings</a>).</p>
</div>
<div class="paragraph">
<p>Action <code>&lt;x:forEach&gt;</code> establishes for its nested
actions a specific context for XPath expressions evaluation. See
<a href="#x:forEach">&lt;x:forEach&gt;</a> for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="resources-access"><a class="anchor" href="#resources-access"></a>11.1.7. Resources Access</h4>
<div class="paragraph">
<p>XML actions such as <code>&lt;x:parse&gt;</code> and
<code>&lt;x:transform&gt;</code> allow the specification of XML and/or XSLT documents as
<em>String</em> or <em>Reader</em> objects. Accessing a resource through a URL is
therefore handled through the <code>&lt;c:import&gt;</code> action that works seamlessly
with the XML tags as shown below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="http://acme.com/productInfo" var="doc"&gt;
    &lt;c:param name="productName" value="${product.name}"/&gt;
&lt;/c:import&gt;
&lt;x:parse doc="${doc}" var="parsedDoc"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To resolve references to external entities,
the <em>systemId</em> (<code>&lt;x:parse&gt;</code>) and <em>docSystemId</em> / <em>xsltSystemId</em>
(<code>&lt;x:transform&gt;</code>) attributes can be used. For these attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Absolute URLs are passed to the parser
directly</p>
</li>
<li>
<p>Relative URLs are treated as references to
resources (e.g., loaded via <em>ServletContext.getResource()</em>) and loaded
using an <em>EntityResolver</em> and <em>URIResolver</em> as necessary</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="core-actions"><a class="anchor" href="#core-actions"></a>11.1.8. Core Actions</h4>
<div class="paragraph">
<p>The XML core actions provide "expression
language support" for XPath. These actions are therefore similar to the
Expression Language support actions <code>&lt;c:out&gt;</code> and <code>&lt;c:set&gt;</code> covered in
<a href="#general-purpose-actions-core-tag-library">General-Purpose Actions: core tag library</a>, except that they apply to XPath
expressions.</p>
</div>
<div class="paragraph">
<p>The core XML actions feature one additional
action, <code>&lt;x:parse&gt;</code>, to parse an XML document into a data structure that
can then be processed by the XPath engine. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;!-- parse an XML document --&gt;
&lt;c:import url="http://acme.com/customer?id=76567" var="doc"/&gt;
&lt;x:parse doc="${doc}" var="parsedDoc"/&gt;

&lt;!-- access XML data via XPath expressions --&gt;
&lt;x:out select="$parsedDoc/name"/&gt;
&lt;x:out select="$parsedDoc/address"/&gt;

&lt;!-- set a scoped variable --&gt;
&lt;x:set var="custName" scope="request" select="$parsedDoc/name"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The context for the evaluation of an XPath
Expression can be set either directly within the XPath expression (as
shown in the example above), or via an ancestor tag that sets a context
that can be used by nested tags. An example of this is with action
<code>&lt;x:forEach&gt;</code> (see <a href="#x:forEach">&lt;x:forEach&gt;</a>).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;!-- context set by ancestor tag &lt;x:forEach&gt; --&gt;
&lt;x:forEach select="$parsedDoc//customer"&gt;
    &lt;x:out select="name"/&gt;
&lt;/x:forEach&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="xparse"><a class="anchor" href="#xparse"></a>11.2. &lt;x:parse&gt;</h3>
<div class="paragraph">
<p>Parses an XML document.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: XML document specified via a
String or Reader object</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:parse {doc="XMLDocument"|xml<sup class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup>="XMLDocument"}
    {var="var" [scope="scope"]|varDom="var" [scopeDom="scope"]}
    [systemId="systemId"]
    [filter="filter"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: XML document specified via the
body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:parse
    {var="var" [scope="scope"]|varDom="var" [scopeDom="scope"]}
    [systemId="systemId"]
    [filter="filter"]&gt;
        XML Document to parse
&lt;/x:parse&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>where scope is
{<span class="underline">page</span>|request|session|application}</p>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>doc</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String, Reader</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source XML document to be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>xml</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String, Reader</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Deprecated</em> <sup class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup>. Use
attribute <em>doc</em> instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">systemId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
system identifier (URI) for parsing the XML document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>filter</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>org.xml.sax.XMLFilter</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter to be applied to the source document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the parsed XML document. The type of
the scoped variable is implementation dependent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>varDom</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the exported scoped variable for the
parsed XML document. The type of the scoped variable is
<em>org.w3c.dom.Document</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scopeDom</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for <em>varDom.</em></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If the source XML document is null or empty,
a <em>JspException</em> is thrown.</p>
</li>
<li>
<p>If <em>filter</em> is null, filtering is not
performed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;x:parse&gt;</code> action parses an XML document
and saves the resulting object in the scoped variable specified by
attribute <em>var</em> or <em>varDom</em>. It does not perform any validation against
DTDs or Schemas.</p>
</div>
<div class="paragraph">
<p>The XML document can be specified either with
the <em>doc</em> attribute, or inline via the action&#8217;s body content.</p>
</div>
<div class="paragraph">
<p><strong><em>var</em> and <em>varDom</em></strong></p>
</div>
<div class="paragraph">
<p>If <em>var</em> is used, the type of the resulting
object is not defined by this specification. This allows implementations
to use whatever they deem best for an efficient implementation of the
XML tagset. <em>varDom</em> exposes a DOM document, allowing collaboration with
custom actions. Objects exposed by <em>var</em> and <em>varDom</em> can both be used
to set the context of an XPath expression.</p>
</div>
<div class="paragraph">
<p><strong>Filtering for Performance Benefits</strong></p>
</div>
<div class="paragraph">
<p>If an implementation of the XML tagset is
based on DOM-like structures, there will be a significant performance
impact when dealing with large XML documents. To help with this,
attribute <em>filter</em> can be used to allow filtering of the input data
prior to having it parsed by the implementation into a DOM-like
structure.</p>
</div>
<div class="paragraph">
<p>For example, if one is interested in
processing only the "European" customers which represent only 10% of the
original XML document received as input, it will greatly reduce the size
and complexity of the resulting DOM structure if all non-European
customers are pruned from the XML document prior to parsing.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="http://acme.com/customers" var="doc"/&gt;
    &lt;x:parse doc="${doc}" filter="${filterEuropeanCust}"
            var="parsedDoc"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <em>filter</em> attribute accepts an object of
type <em>org.xml.sax.XMLFilter</em>.</p>
</div>
<div class="paragraph">
<p>If configuration of the filter is desirable,
it is suggested that the developer of the filter provides a custom tag
for easy configuration by a page author.</p>
</div>
</div>
<div class="sect2">
<h3 id="xout"><a class="anchor" href="#xout"></a>11.3. &lt;x:out&gt;</h3>
<div class="paragraph">
<p>Evaluates an XPath expression and outputs the
result of the evaluation to the current <em>JspWriter</em> object.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;x:out select="XPathExpression" [escapeXml="{<span class="underline">true</span>|false}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>select</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPath expression to be evaluated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>escapeXml</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines whether characters &lt;,&gt;,&amp;,'," in
the resulting string should be converted to their corresponding
character entity codes. Default value is true.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The expression to be evaluated is specified
via attribute <em>select</em> and must be in XPath syntax. The result of the
evaluation is converted to a <em>String</em> as if the XPath <em>string()</em>
function were applied, and is subsequently written to the current
<em>JspWriter</em> object.</p>
</div>
<div class="paragraph">
<p>This action is the equivalent of <em>&lt;%=&#8230;&#8203;%&gt;</em>
(display the result of an expression in the Jakarta Server Pages syntax) and <em>&lt;c:out&gt;</em>
(display the result of an expression in the expression language syntax).</p>
</div>
<div class="paragraph">
<p>If <em>escapeXml</em> is true, the following
character conversions are applied:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Character</th>
<th class="tableblock halign-left valign-top">Character Entity Code</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;lt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&amp;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;amp;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;#039;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;#034;</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xset"><a class="anchor" href="#xset"></a>11.4. &lt;x:set&gt;</h3>
<div class="paragraph">
<p>Evaluates an XPath expression and stores the
result into a scoped variable.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;x:set select="XPathExpression"
    var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Empty.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>select</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPath expression to be evaluated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable to hold the value specified in the
action. The type of the scoped variable is whatever type the <em>select</em>
expression evaluates to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Evaluates an XPath expression (specified via
attribute <em>select</em>) and stores the result into a scoped variable
(specified via attributes <em>var</em> and <em>scope</em>).</p>
</div>
<div class="paragraph">
<p>The mapping of XPath types to Java types is
described in <a href="#xpath-to-java-type-mappings">XPath to Java Type Mappings</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xml-flow-control-actions-xml-tag-library"><a class="anchor" href="#xml-flow-control-actions-xml-tag-library"></a>12. XML Flow Control Actions: xml tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The core set of XML actions provides the
basic functionality to easily parse and access XML data. Another
important piece of functionality is the ability to iterate over elements
in an XML document, as well as conditionally process Jakarta Server Pages code fragments
depending on the result of an XPath expression. The XML flow control
actions provide these capabilities.</p>
</div>
<div class="sect2">
<h3 id="overview-7"><a class="anchor" href="#overview-7"></a>12.1. Overview</h3>
<div class="paragraph">
<p>The XML flow control actions provide flow
control based on the value of XPath expressions. These actions are
therefore similar to the Expression Language flow control actions (<code>&lt;c:if&gt;</code>, <code>&lt;c:choose&gt;</code>,
and &lt;`c:forEach&gt;`), except that they apply to XPath expressions.</p>
</div>
<div class="paragraph">
<p>The <em>&lt;x:if&gt;</em> action has a <em>select</em> attribute
that specifies an XPath expression. The expression is evaluated and the
resulting object is converted to a <em>boolean</em> according to the semantics
of the XPath <em>boolean()</em> function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A number is true if an only if it is neither
positive or negative zero nor NaN</p>
</li>
<li>
<p>A node-set is true if and only if it is
non-empty</p>
</li>
<li>
<p>A string is true if and only if its length is
non-zero</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>&lt;x:if&gt;</code> renders its body if the result is
true. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:if select="$customer/[location='UK']"&gt;
    UK based customer
&lt;/x:if&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;x:choose&gt;</code> action selects one among a
number of possible alternatives. It consists of a sequence of <code>&lt;x:when&gt;</code>
elements followed by an optional <code>&lt;x:otherwise&gt;</code>. Each &lt;x:when&gt; element
has a single attribute, <em>select</em>, which specifies an XPath expression.
When a <code>&lt;x:choose&gt;</code> element is processed, each of the <code>&lt;x:when&gt;</code> elements
has its expression evaluated in turn, and the resulting object is
converted to a boolean according to the semantics of the XPath boolean
function. The body of the first, and only the first, <code>&lt;x:when&gt;</code> whose
result is true is rendered.</p>
</div>
<div class="paragraph">
<p>If none of the test conditions of nested
<code>&lt;x:when&gt;</code> tags evaluates to true, then the body of an <code>&lt;x:otherwise&gt;</code> tag
is evaluated, if present.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:choose&gt;
    &lt;x:when select="$customer/firstName"&gt;
        Hello &lt;x:out select="$customer/firstName"/&gt;
    &lt;/x:when&gt;
    &lt;x:otherwise&gt;
        Hello my friend
    &lt;/x:otherwise&gt;
&lt;/x:choose&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <em>&lt;x:forEach&gt;</em> action evaluates the given
XPath expression and iterates over the result, setting the context node
to each element in the iteration. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:forEach select="$doc//author"&gt;
    &lt;x:out select="@name"/&gt;
&lt;/x:forEach&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xif"><a class="anchor" href="#xif"></a>12.2. &lt;x:if&gt;</h3>
<div class="paragraph">
<p>Evaluates the XPath expression specified in
the <em>select</em> attribute and renders its body content if the expression
evaluates to true.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:if select="XPathExpression"
        var="varName" [scope="{<span class="underline">page</span>|request|session|application}"]/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:if select="XPathExpression"
        [var="varName"] [scope="{<span class="underline">page</span>|request|session|application}"]&gt;
    body content
&lt;/x:if&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. If the test condition evaluates to true,
the Jakarta Server Pages container processes the body content and then writes it to the
current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>select</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The test condition that tells whether or not
the body content should be processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the resulting value of the test
condition. The type of the scoped variable is <em>Boolean</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If <em>scope</em> is specified, <em>var</em> must also be
specified.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The XPath expression specified via attribute
<em>select</em> is evaluated, and the resulting object is converted to a
<em>boolean</em> according to the semantics of the XPath <em>boolean()</em> function.
If true, the body content is evaluated by the Jakarta Server Pages container and the
result is written to the current <em>JspWriter</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xchoose"><a class="anchor" href="#xchoose"></a>12.3. &lt;x:choose&gt;</h3>
<div class="paragraph">
<p>Provides the context for mutually exclusive
conditional execution.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;x:choose&gt;
    body content (&lt;x:when&gt; and &lt;x:otherwise&gt; subtags)
&lt;/x:choose&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The body content is processed by the Jakarta Server Pages
container (at most one of the nested elements will be processed) and
written to the current <em>JspWriter</em>.</p>
</div>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>The body of the <code>&lt;x:choose&gt;</code> action can only
contain:</p>
<div class="ulist">
<ul>
<li>
<p>White spaces<br>
May appear anywhere around the <code>&lt;x:when&gt;</code> and
<code>&lt;x:otherwise&gt;</code> subtags.</p>
</li>
<li>
<p>1 or more <code>&lt;x:when&gt;</code> actions</p>
</li>
<li>
<p>Must all appear before <code>&lt;x:otherwise&gt;</code></p>
</li>
<li>
<p>0 or 1 <code>&lt;x:otherwise&gt;</code> action<br>
Must be the last action nested within
<code>&lt;x:choose&gt;</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;x:choose&gt;</code> action processes the body of
the first <em>&lt;x:when&gt;</em> action whose test condition evaluates to true. If
none of the test conditions of nested <em>&lt;x:when&gt;</em> actions evaluates to
true, then the body of an <em>&lt;x:otherwise&gt;</em> action is processed, if
present.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xwhen"><a class="anchor" href="#xwhen"></a>12.4. &lt;x:when&gt;</h3>
<div class="paragraph">
<p>Represents an alternative within an
<code>&lt;x:choose&gt;</code> action.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;x:when select="XPathExpression"&gt;
    body content
&lt;/x:when&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. If this is the first <em>&lt;x:when&gt;</em> action
to evaluate to true within <em>&lt;x:choose&gt;</em>, the Jakarta Server Pages container processes
the body content and then writes it to the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>select</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The test condition that tells whether or not
the body content should be processed</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must have <em>&lt;x:choose&gt;</em> as an immediate
parent.</p>
</li>
<li>
<p>Must appear before an <em>&lt;x:otherwise&gt;</em> action
that has the same parent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The XPath expression specified via attribute
<em>select</em> is evaluated, and the resulting object is converted to a
<em>boolean</em> according to the semantics of the XPath <em>boolean()</em> function.
If this is the first <em>&lt;x:when&gt;</em> action to evaluate to true within
<em>&lt;x:choose&gt;</em>, the Jakarta Server Pages container processes the body content and then
writes it to the current <em>JspWriter</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xotherwise"><a class="anchor" href="#xotherwise"></a>12.5. &lt;x:otherwise&gt;</h3>
<div class="paragraph">
<p>Represents the last alternative within a
<code>&lt;x:choose&gt;</code> action.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;x:otherwise&gt;
    conditional block
&lt;/x:otherwise&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. If no <code>&lt;x:when&gt;</code> action nested within
<code>&lt;x:choose&gt;</code> evaluates to true, the Jakarta Server Pages container processes the body
content and then writes it to the current <em>JspWriter</em>.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Attributes</strong></div>
<p>None.</p>
</div>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>Must have <code>&lt;x:choose&gt;</code> as an immediate parent.</p>
</li>
<li>
<p>Must be the last nested action within
<code>&lt;x:choose&gt;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Within a <code>&lt;x:choose&gt;</code> action, if none of the
nested <code>&lt;x:when&gt;</code> test conditions evaluates to true, then the body content
of the <code>&lt;x:otherwise&gt;</code> action is evaluated by the Jakarta Server Pages container, and the
result is written to the current <em>JspWriter</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="x:forEach"><a class="anchor" href="#x:forEach"></a>12.6. &lt;x:forEach&gt;</h3>
<div class="paragraph">
<p>Evaluates the given XPath expression and
repeats its nested body content over the result, setting the context
node to each element in the iteration.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>&lt;x:forEach [var="varName"] select="XPathExpression"&gt;
        [varStatus="varStatusName"]
        [begin="begin"] [end="end"] [step="step"]&gt;
    body content
&lt;/x:forEach&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. As long as there are items to iterate
over, the body content is processed by the Jakarta Server Pages container and written to
the current <em>JspWriter</em>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the current item of the iteration.
This scoped variable has nested visibility. Its type depends on the
result of the XPath expression in the <em>select</em> attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>select</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XPath expression to be evaluated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>varStatus</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the exported scoped variable for the
status of the iteration. Object exported is of type
<em>jakarta.servlet.jsp.jstl.core.LoopTagStatus</em>. This scoped variable has
nested visibility.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>begin</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
begins at the item located at the specified index. First item of the
collection has index 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>end</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
ends at the item located at the specified index (inclusive).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>step</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iteration
will only process every <em>step</em> items of the collection, starting with
the first one.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Constraints</strong></div>
<ul>
<li>
<p>If specified, <em>begin</em> must be &gt;= 0.</p>
</li>
<li>
<p>If <em>end</em> is specified and it is less than
<em>begin</em>, the loop is simply not executed.</p>
</li>
<li>
<p>If specified, <em>step</em> must be &gt;= 1</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>select</em> is empty, a <em>JspException</em> is
thrown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Inside the body of the tag, the context for
XPath expression evaluations is obtained as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>variable, function, and namespace bindings
operate as in the rest of the Jakarta Standard Tag Library</p>
</li>
<li>
<p>the context node is the node whose
representation would be exposed by 'var' (whether or not the 'var'
attribute is specified)</p>
</li>
<li>
<p>the context position is the iteration 'count'
(with the same meaning as in <code>&lt;c:forEach&gt;</code>)</p>
</li>
<li>
<p>the context size is equal to the number of
nodes in the node-set over which <code>&lt;x:forEach&gt;</code> is iterating</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xml-transform-actions-xml-tag-library"><a class="anchor" href="#xml-transform-actions-xml-tag-library"></a>13. XML Transform Actions: xml tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The transformation of XML documents using
XSLT stylesheets is popular in many web applications. The XML transform
actions provide this capability so XSLT transformations can be performed
within Jakarta Server Pages.</p>
</div>
<div class="sect2">
<h3 id="overview-8"><a class="anchor" href="#overview-8"></a>13.1. Overview</h3>
<div class="paragraph">
<p>The XML transform actions support the
transformation of XML documents with XSLT stylesheets.</p>
</div>
<div class="paragraph">
<p>In the example below, an external XML
document (retrieved from an absolute URL) is transformed by a local XSLT
stylesheet (context relative path). The result of the transformation is
written to the page.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;c:import url="http://acme.com/customers" var="doc"/&gt;
&lt;c:import url="/WEB-INF/xslt/customerList.xsl" var="xslt"/&gt;
&lt;x:transform doc="${doc}" xslt="${xslt}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to set transformation
parameters via nested <code>&lt;x:param&gt;</code> actions. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:transform doc="${doc}" xslt="${xslt}"&gt;
    &lt;x:param name="foo" value="foo-value"/&gt;
&lt;/x:transform&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is sometimes the case that the same
stylesheet transformation needs to be applied multiple times to
different source XML documents. A more efficient approach is to process
the transformation stylesheet once, and then save this "transformer"
object for successive transformations. The specification allows
implementations to support transparent caching of transformer objects to
improve performance.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xtransform"><a class="anchor" href="#xtransform"></a>13.2. &lt;x:transform&gt;</h3>
<div class="paragraph">
<p>Applies an XSLT stylesheet transformation to
an XML document.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Without body contentt</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:transform
        {doc="XMLDocument"|xml<sup class="footnote" id="_footnote_deprecated">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup>="XMLDocument"} xslt="XSLTStylesheet"
        [{docSystemId="XMLSystemId"|xmlSystemId<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup>="XMLSystemId"}]
        [xsltSystemId="XSLTSystemId"]
        [{var="varName" [scope="scopeName"]|result="resultObject"}]</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: With a body to specify
transformation parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:transform
        {doc="XMLDocument"|xml1="XMLDocument"} xslt="XSLTStylesheet"
        [{docSystemId="XMLSystemId"|xmlSystemId<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup>="XMLSystemId"}]
        [xsltSystemId="XSLTSystemId"]
        [{var="varName" [scope="scopeName"]|result="resultObject"}]
    &lt;x:param&gt; actions
&lt;/x:transform&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 3: With a body to specify XML
document and optional transformation parameters</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:transform
        xslt="XSLTStylesheet"
        [{docSystemId="XMLSystemId"|xmlSystemId<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup>="XMLSystemId"}]
        xsltSystemId="XSLTSystemId"
        [{var="varName" [scope="scopeName"]|result="resultObject"}]
    XML Document to parse
    optional &lt;x:param&gt; actions
&lt;/x:transform&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>where scopeName is
{<span class="underline">page</span>|request|session|application}</p>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dyn</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>doc</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String, Reader,
javax.xml.transform.Source, org.w3c.dom.Document, or object exported by
&lt;x:parse&gt;, &lt;x:set&gt;</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source XML document to
be transformed. (If exported by &lt;x:set&gt;, it must correspond to a
well-formed XML document, not a partial document.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>xml</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String, Reader,
javax.xml.transform.Source, org.w3c.dom.Document, or object exported by
&lt;x:parse&gt;, &lt;x:set&gt;</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Deprecated</em> <sup class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup>. Use attribute <em>doc</em> instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>xslt</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String, Reader or
javax.xml.transform.Source</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transformation
stylesheet as a <em>String</em>, <em>Reader</em>, or <em>Source</em> object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">docSystemId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
system identifier (URI) for parsing the XML document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xmlSystemId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Deprecated</em> <em>1</em>. Use attribute <em>docSystemId</em> instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xsltSystemId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system identifier (URI) for parsing the
XSLT stylesheet.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>var</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the exported scoped variable for the transformed XML document. The
type of the scoped variable is <em>org.w3c.dom.Document</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>scope</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>false</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope for var.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>javax.xml.transform.Result</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object that captures or processes the
transformation result.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If the source XML document is null or empty,
a <em>JspException</em> is thrown.</p>
</li>
<li>
<p>If the source XSLT document is null or empty,
a <em>JspException</em> is thrown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <code>&lt;x:transform&gt;</code> tag applies a
transformation to an XML document (attribute <em>doc</em> or the action&#8217;s body
content), given a specific XSLT stylesheet (attribute <em>xslt</em>). It does
not perform any validation against DTD&#8217;s or Schemas.</p>
</div>
<div class="paragraph">
<p>Nothing prevents an implementation from
caching <em>Transformer</em> objects across invocations of <code>&lt;x:transform&gt;</code>,
though implementations should be careful they take into account both the
<em>xslt</em> and <em>xsltSystemId</em> attributes when deciding whether to use a
cached <em>Transformer</em> or produce a new one. An implementation may assume
that any external entities that were referenced during parsing will not
change values during the life of the application.</p>
</div>
<div class="paragraph">
<p>The result of the transformation is written
to the page by default. It is also possible to capture the result of the
transformation in two other ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>javax.xml.transform.Result</em> object
specified by the <em>result</em> attribute.</p>
</li>
<li>
<p><em>org.w3c.dom.Document</em> object saved in the
scoped variable specified by the <em>var</em> and <em>scope</em> attributes.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="xparam"><a class="anchor" href="#xparam"></a>13.3. &lt;x:param&gt;</h3>
<div class="paragraph">
<p>Set transformation parameters. Nested action
of <code>&lt;x:transform&gt;</code>.</p>
</div>
<div class="paragraph">
<div class="title"><strong>Syntax</strong></div>
<p><em>Syntax 1: Parameter value specified in
attribute "value"</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:param name="name" value="value"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax 2: Parameter value specified in the
body content</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;x:param name="name"&gt;
    parameter value
&lt;/x:param&gt;</pre>
</div>
</div>
<div class="paragraph">
<div class="title"><strong>Body Content</strong></div>
<p>Jakarta Server Pages content. The Jakarta Server Pages container processes the body
content, then the action trims it and processes it further.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Attributes</strong></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Dynamic</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>name</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name
of the transformation parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Object</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value
of the parameter.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The <em>&lt;x:param&gt;</em> action must be nested within
<em>&lt;x:transform&gt;</em> to set transformation parameters. The value of the
parameter can be specified either via the <em>value</em> attribute, or via the
action&#8217;s body content.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tag-library-validators"><a class="anchor" href="#tag-library-validators"></a>14. Tag Library Validators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jakarta Server Pages provides tag library validators
(TLVs) as a mechanism for a tag library to enforce constraints on the
Jakarta Server Pages document (the "XML view") associated with any Jakarta Server Pages page into which
the tag library is imported. While the expectation is that TLVs used by
a tag library will typically enforce multi-tag constraints related to
usage of the library&#8217;s tags themselves, a TLV is free to perform
arbitrary validation of Jakarta Server Pages documents. A TLV returns to the container
information about which elements, if any, are in violation of its
specific constraints, along with textual descriptions of the syntactic
violation.</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library provides TLVs that perform "reusable"
validation; i.e. generic validation that custom tag-library authors
might wish to incorporate in their own tag libraries. These tag
libraries do not necessarily need to be substantial collections of tags;
a taglib may exist simply to provide site-specific validation logic.
Just like tag libraries whose primary focus is to provide new tags, such
"validation-centric" tag libraries may be configured and used by
"back-end" developers in order to affect the "front-end" Jakarta Server Pages page
author&#8217;s environment.</p>
</div>
<div class="paragraph">
<p>This chapter covers the Jakarta Standard Tag Library tag library
validators.</p>
</div>
<div class="sect2">
<h3 id="overview-9"><a class="anchor" href="#overview-9"></a>14.1. Overview</h3>
<div class="paragraph">
<p>The Jakarta Standard Tag Library exposes via TLVs two simple types of
validations. These TLV classes may be used in custom tag-library
descriptors (TLDs) to restrict the page author&#8217;s activities. The two
types of validation provided in this fashion are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>jakarta.servlet.jsp.jstl.tlv.ScriptFree</em><br>
Assurance of script-free pages</p>
</li>
<li>
<p><em>jakarta.servlet.jsp.jstl.tlv.PermittedTaglibs</em><br>
Enumeration of permitted tag libraries (including the Jakarta Standard Tag Library) on a page</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, to prevent a Jakarta Server Pages page from using
Jakarta Server Pages scriptlets and Jakarta Server Pages declarations, but still allow expressions, a
developer could create the following TLD:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;taglib xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation=
        "http://java.sun.com/xml/ns/j2ee web jsptaglibrary_2_0.xsd"
    version="2.0"&gt;
    &lt;description&gt;
        Validates Jakarta Server Pages to prohibit use of scripting elements.
    &lt;/description&gt;
    &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;
    &lt;jsp-version&gt;2.0&lt;/jsp.version&gt;
    &lt;short-name&gt;scriptfree&lt;/short-name&gt;
    &lt;uri&gt;http://acme.com/scriptfree&lt;/uri&gt;

    &lt;validator&gt;
        &lt;validator-class&gt;
            jakarta.servlet.jsp.jstl.tlv.ScriptFreeTLV
        &lt;/validator-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;allowDeclarations&lt;/param-name&gt;
            &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;allowScriptlets&lt;/param-name&gt;
            &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;allowExpressions&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;allowRTExpressions&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/validator&gt;
&lt;/taglib&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that in Jakarta Server Pages, scripting elements can
also be disabled through the use of the <em>scripting-invalid</em>
configuration element (see the Jakarta Server Pages specification for details).</p>
</div>
<div class="paragraph">
<p>Similarly, to restrict a Jakarta Server Pages page to a set of
permitted tag-libraries (in the example below, the Jakarta Standard Tag Library "Expression Language" tag
libraries), a developer could create the following TLD:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;

&lt;taglib
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation= +
        "http://java.sun.com/xml/ns/j2ee web jsptaglibrary_2_0.xsd"
    version="2.0"&gt;
    &lt;description&gt;
        Restricts Jakarta Server Pages to the Jakarta Standard Tag Library tag libraries
    &lt;/description&gt;
    &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;
    &lt;jsp-version&gt;2.0&lt;/jsp.version&gt;
    &lt;short-name&gt;jstl taglibs only&lt;/scriptfree&gt;
    &lt;uri&gt;http://acme.com/jstlTaglibsOnly&lt;/uri&gt;

    &lt;validator&gt;
        &lt;validator-class&gt;
            jakarta.servlet.jsp.jstl.tlv.PermittedTaglibsTLV
        &lt;/validator-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;permittedTaglibs&lt;/param-name&gt;
            &lt;param-value&gt;
                http://java.sun.com/jstl/core
                http://java.sun.com/jstl/xml
                http://java.sun.com/jstl/fmt
                http://java.sun.com/jstl/sql
            &lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/validator&gt;
&lt;/taglib&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="functions-function-tag-library"><a class="anchor" href="#functions-function-tag-library"></a>15. Functions: function tag library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Just like custom actions allow developers to
extend the Jakarta Server Pages syntax with their own customized behavior, the expression language defined in Jakarta Server Pages introduces the notion of <em>functions</em> to allow developers to extend the capabilities of the Expression Language.</p>
</div>
<div class="paragraph">
<p>The Jakarta Standard Tag Library is about the standardization, via these
extension mechanisms, of behavior that is commonly needed by page
authors. In addition to defining a standard set of actions, the Jakarta Standard Tag Library
therefore also defines a standardized set of Expression Language functions. These
functions are described in this chapter.</p>
</div>
<div class="sect2">
<h3 id="overview-10"><a class="anchor" href="#overview-10"></a>15.1. Overview</h3>
<div class="paragraph">
<p>The Jakarta Standard Tag Library functions are all grouped within the
<em>function</em> tag library. They cover various domains of functionality
described below.</p>
</div>
<div class="sect3">
<h4 id="the-length-function"><a class="anchor" href="#the-length-function"></a>15.1.1. The <em>length</em> Function</h4>
<div class="paragraph">
<p>A feature sorely missed in JSTL 1.0 was the
ability to easily get the size of a collection. While the
<em>java.util.Collection</em> interface defines a <em>size()</em> method, it
unfortunately does not conform to the JavaBeans architecture design
pattern for properties and cannot be accessed via the expression
language.</p>
</div>
<div class="paragraph">
<p>The <em>length</em> function has been designed to be
very similar to the use of "length" in EcmaScript. It can be applied to
any object supported by the Jakarta Standard Tag Library iteration action
&lt;c:forEach&gt;<sup class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnotedef_14" title="View footnote.">14</a>]</sup> and returns the length of the
collection. When applied to a String, it returns the number of
characters in the string.</p>
</div>
<div class="paragraph">
<p>A sample use of <em>length</em> is shown in the
example below where scoped variable <em>athletes</em> is a collection of
<em>Athletes</em> objects.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>There are ${fn:length(athletes)} athletes representing ${country}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="string-manipulation-functions"><a class="anchor" href="#string-manipulation-functions"></a>15.1.2. String Manipulation Functions</h4>
<div class="paragraph">
<p>String manipulation functions allow page
authors to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change the capitalization of a string (
<em>toLowerCase</em>, <em>toUpperCase</em>)</p>
</li>
<li>
<p>Get a subset of a string (<em>substring, substringAfter, substringBefore</em>)</p>
</li>
<li>
<p>Trim a string (<em>trim</em>)</p>
</li>
<li>
<p>Replace characters in a string (<em>replace</em>)</p>
</li>
<li>
<p>Check if a string contains another string (<em>indexOf, startsWith, endsWith, contains, containsIgnoreCase</em>)</p>
</li>
<li>
<p>split a string (<em>split</em>) into an array, and
join an array into a string (<em>join</em>)</p>
</li>
<li>
<p>Escape XML characters in the string (<em>escapeXml</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The example below shows simple uses of these
functions.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%-- truncate name to 30 chars and display it in uppercase --%&gt;
${fn:toUpperCase(fn:substring(name, 0, 30))}

&lt;%-- Display the text value prior to the first '*' character --%&gt;
${fn:substringBefore(text, '*')}

&lt;%-- Scoped variable "custId" may contain whitespaces at the beginning
or end. Trim it first, otherwise we end up with +'s in the URL --%&gt;
&lt;c:url var="myUrl" value="${base}/cust"&gt;
    &lt;c:param name="custId" value="${fn:trim(custId)}"/&gt;
&lt;/c:url&gt;

&lt;%-- Display the text in between brackets --%&gt;
${fn:substring(text, fn:indexOf(text, '(')+1,
                     fn:indexOf(text, ')'))}

&lt;%-- Display the name if it contains the search string --%&gt;
&lt;c:if test="${fn:containsIgnoreCase(name, searchString)}"&gt;
    Found name: ${name}
&lt;/c:if&gt;

&lt;%-- Display the last 10 characters of the text value --%&gt;
${fn:substring(text, fn:length(text)-10)}

&lt;%-- Display text value with bullets instead of '-' --%&gt;
${fn:replace(text, '-', '&amp;#149;')}</pre>
</div>
</div>
<div class="paragraph">
<p>While one can always use <code>&lt;c:out&gt;</code> to make sure
that XML characters are properly escaped, the function escapeXml
provides a syntax that is more concise as can be seen in the following
example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;%-- Escape XML characters when displaying
the value of a request parameter (avoid cross-site scripting) --%&gt;

&lt;input name="userName" value="${fn:escapeXml(param:userName)}"&gt;

&lt;%-- Escape XML characters when passing an attribute value to an action --%&gt;

&lt;%-- Using &lt;c:out&gt; with &lt;c:set&gt;--%&gt;
&lt;c:set var="nameEscaped"&gt;
    &lt;c:out value="${name}"/&gt;
&lt;/c:set&gt;
&lt;my:tag name="${nameEscaped}"/&gt;

&lt;%-- Using &lt;c:out&gt; with &lt;jsp:attribute&gt;--%&gt;
&lt;my:tag&gt;
    &lt;jsp:attribute name="name"&gt;
        &lt;c:out value="${name}"/&gt;
    &lt;/jsp:attribute&gt;
&lt;/my:tag&gt;

&lt;%-- Using fn:escapeXml --%&gt;
&lt;my:tag title="${fn:escapeXml(name)}"/&gt;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="fncontains"><a class="anchor" href="#fncontains"></a>15.2. fn:contains</h3>
<div class="paragraph">
<p>Tests if a string contains the specified
substring.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:contains(string, substring) → boolean</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>substring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring tested for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em> if the character sequence
represented by the <em>substring</em> argument exists in the character sequence
represented by the <em>string</em> argument, <em>false</em> otherwise.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>substring</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Returns <em>true</em> if the character sequence
represented by the <em>substring</em> argument exists in the character sequence
represented by the <em>string</em> argument, <em>false</em> otherwise.</p>
</div>
<div class="paragraph">
<p>If <em>substring</em> is empty, this matches the
beginning of the string and the value returned is true.</p>
</div>
<div class="paragraph">
<p>Essentially, <em>fn:contains</em> returns the value
of:</p>
</div>
<div class="paragraph">
<p>&#160;&#160;&#160;&#160; <em>fn:indexOf(string, substring) != -1</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fncontainsignorecase"><a class="anchor" href="#fncontainsignorecase"></a>15.3. fn:containsIgnoreCase</h3>
<div class="paragraph">
<p>Tests if a string contains the specified
substring in a case insensitive way.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:containsIgnoreCase(string, substring) → boolean</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>substring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring tested for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em> if the character sequence
represented by the <em>substring</em> argument exists in the character sequence
represented by the <em>string</em> argument ignoring case differences, <em>false</em>
otherwise.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>substring</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The behavior is the same as <em>fn:contains</em>,
except that the comparison is done in a case insensitive way, as in:</p>
</div>
<div class="paragraph">
<p><em>fn:contains(fn:toUpperCase(string),
fn:toUpperCase(substring)).</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnendswith"><a class="anchor" href="#fnendswith"></a>15.4. fn:endsWith</h3>
<div class="paragraph">
<p>Tests if a string ends with the specified
suffix.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:endsWith(string, suffix) → boolean</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>suffix</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The suffix to be matched.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em> if the character sequence
represented by the <em>suffix</em> argument is a suffix of the character
sequence represented by the <em>string</em> argument, <em>false</em> otherwise.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>substring</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Behavior is similar to <em>fn:startsWith</em>,
except that the substring must be at the end of the input string.</p>
</div>
<div class="paragraph">
<p>If <em>suffix</em> is empty, this matches the end of
the string and the value returned is true.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnescapexml"><a class="anchor" href="#fnescapexml"></a>15.5. fn:escapeXml</h3>
<div class="paragraph">
<p>Escapes characters that could be interpreted
as XML markup.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:escapeXml(string) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
conversion is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converted string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Escapes characters that could be interpreted
as XML markup. The conversions are the same as the ones applied by
<code>&lt;c:out&gt;</code> when attribute <em>escapeXml</em> is set to true. See
<a href="#c:out">&lt;c:out&gt;</a>.</p>
</div>
<div class="paragraph">
<p>If <em>string</em> is an empty string, an empty
string is returned.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnindexof"><a class="anchor" href="#fnindexof"></a>15.6. fn:indexOf</h3>
<div class="paragraph">
<p>Returns the index within a string of the
first occurrence of a specified substring.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:indexOf(string, substring) → int</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>substring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring to search for in the
input string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the substring argument is a substring of
the input string, returns the index of the first character of the first
such substring; if it does not occur as a substring, -1 is returned.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>substring</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Returns the index (0-based) within a string
of the first occurrence of a specified substring according to the
semantics of method <em>indexOf(substring)</em> of the Java class
<em>java.lang.String</em>, with the exception of the "Null and Error Handling"
processing described above.</p>
</div>
<div class="paragraph">
<p>If <em>substring</em> is empty, this matches the
beginning of the string and the value returned is 0.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnjoin"><a class="anchor" href="#fnjoin"></a>15.7. fn:join</h3>
<div class="paragraph">
<p>Joins all elements of an array into a string.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:join(array, separator) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>array</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array
of strings to be joined.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>separator</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String to
separate each element of the array in the resulting string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All array elements joined into one
string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>array</em> is null, an empty string is
returned.</p>
</li>
<li>
<p>If separator is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Joins all elements of the string array into a
string.</p>
</div>
<div class="paragraph">
<p>If separator is an empty string, then the
elements are joined together without any separator.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnlength"><a class="anchor" href="#fnlength"></a>15.8. fn:length</h3>
<div class="paragraph">
<p>Returns the number of items in a collection,
or the number of characters in a string.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:length(input) → integer</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>input</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any of
the types supported for the <em>items</em> attribute in the <code>&lt;c:forEach&gt;</code> action,
or <em>String</em>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input collection or string
on which the length is computed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of the collection or the string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>input</em> is null, it is treated as an empty
collection and the value returned is 0.</p>
</li>
<li>
<p>If input is an empty string, the value
returned is 0.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnreplace"><a class="anchor" href="#fnreplace"></a>15.9. fn:replace</h3>
<div class="paragraph">
<p>Returns a string resulting from replacing in
an input string all occurrences of a "before" substring into an "after"
substring.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:replace(inputString, beforeSubstring, afterSubstring) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>inputString</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
replace function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>beforeSubstring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
"before" substring to be replaced.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>afterSubstring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
"after" substring that replaces the "before" substring.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string that results from
replacing <em>beforeSubstring</em> with <em>afterSubstring</em>.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>inputString</em> is null, it is processed as
an empty string.</p>
</li>
<li>
<p>If <em>beforeSubstring</em> is null, it is processed
as an empty string.</p>
</li>
<li>
<p>If <em>afterSubstring</em> is null, it is processed
as an empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>All occurrences of <em>beforeSubstring</em> are
replaced by <em>afterSubstring</em>. The text replaced is not reprocessed for
further replacements.</p>
</div>
<div class="paragraph">
<p>If <em>inputstring</em> is an empty string, an empty
string is returned.</p>
</div>
<div class="paragraph">
<p>If <em>beforeSubstring</em> is an empty string, the
input string is returned.</p>
</div>
<div class="paragraph">
<p>If <em>afterSubstring</em> is an empty string, all
occurrences of <em>beforeSubstring</em> are removed from <em>inputString</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnsplit"><a class="anchor" href="#fnsplit"></a>15.10. fn:split</h3>
<div class="paragraph">
<p>Splits a string into an array of substrings.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:split(string, delimiters) → String[]</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string that gets split into an
array of substrings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>delimiters</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delimiter
characters used to split the string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String[]</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of strings.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>delimiters</em> is null, it is processed as
an empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Breaks a string into tokens according to the
semantics of the Java class <em>java.util.StringTokenizer</em>, with the
exception of the "Null and Error Handling" described above.</p>
</div>
<div class="paragraph">
<p>If the input string is empty, the array
returned contains one element consisting of an empty string (no
splitting occurred, original string is returned).</p>
</div>
<div class="paragraph">
<p>If <em>delimiters</em> is an empty string, the array
returned contains one element consisting of the input string (no
splitting occurred, original string is returned).</p>
</div>
<div class="paragraph">
<p>Delimiter characters themselves are not
treated as tokens, and are not included in any token.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnstartswith"><a class="anchor" href="#fnstartswith"></a>15.11. fn:startsWith</h3>
<div class="paragraph">
<p>Tests if a string starts with the specified
prefix.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:startsWith(string, prefix) → boolean</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>prefix</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The prefix to be matched.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>true</em> if the character sequence
represented by the <em>prefix</em> argument is a prefix of the character
sequence represented by the <em>string</em> argument, <em>false</em> otherwise.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>prefix</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Tests if an input string starts with the
specified prefix according to the semantics of method <em>startsWith(String
prefix)</em> of the Java class <em>java.lang.String</em>, with the exception of
the "Null and Error Handling" processing described above.</p>
</div>
<div class="paragraph">
<p>If <em>prefix</em> is empty, this matches the
beginning of the string and the value returned is true.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnsubstring"><a class="anchor" href="#fnsubstring"></a>15.12. fn:substring</h3>
<div class="paragraph">
<p>Returns a subset of a string.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:substring(string, beginIndex, endIndex) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
substring function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>beginIndex</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The beginning index (0-based),
inclusive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>endIndex</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ending index (0-based), exclusive
.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring of the input string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>beginIndex</em> is greater than the last
index of the input string, an empty string is returned.</p>
</li>
<li>
<p>If <em>beginIndex</em> is less than 0, its value is
adjusted to be 0.</p>
</li>
<li>
<p>If <em>endIndex</em> is less than 0 or greater than
the length of the input string, its value is adjusted to be the length
of the input string (the substring therefore starts at <em>beginIndex</em> and
extends to the end of the input string).</p>
</li>
<li>
<p>If <em>endIndex</em> is less than <em>beginIndex</em>, an
empty string is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Returns a substring of the input string
according to the semantics of method <em>substring()</em> of the Java class
<em>java.lang.String</em>, with the exception of the "Null and Error Handling"
processing described above.</p>
</div>
<div class="paragraph">
<p>Using a 0-based indexing scheme, the
substring begins at the specified <em>beginIndex</em> and extends to the
character at index <em>endIndex</em> -1. The length of the substring is
therefore <em>endIndex-beginIndex</em>.</p>
</div>
<div class="paragraph">
<p>It is suggested to use the value -1 for
<em>endIndex</em> to extend the substring to the end of the input string.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnsubstringafter"><a class="anchor" href="#fnsubstringafter"></a>15.13. fn:substringAfter</h3>
<div class="paragraph">
<p>Returns a subset of a string following a
specific substring.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:substringAfter(string, substring) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
substring function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>substring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring that delimits the
beginning of the subset of the input string to be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring of the input string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>substring</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The substring returned starts at the first
character after the substring matched in the input string, and extends
up to the end of the input string.</p>
</div>
<div class="paragraph">
<p>If <em>string</em> is an empty string, an empty
string is returned.</p>
</div>
<div class="paragraph">
<p>If <em>substring</em> is an empty string, it matches
the beginning of the input string and the input string is returned. This
is consistent with the behavior of function <em>indexOf</em>, where an empty
substring returns index 0.</p>
</div>
<div class="paragraph">
<p>If <em>substring</em> does not occur in the input
string, an empty string is returned.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fnsubstringbefore"><a class="anchor" href="#fnsubstringbefore"></a>15.14. fn:substringBefore</h3>
<div class="paragraph">
<p>Returns a subset of a string before a
specific substring.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:substringBefore(string, substring) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
substring function is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>substring</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring that delimits the end
of subset of the input string to be returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The substring of the input string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is processed as an
empty string.</p>
</li>
<li>
<p>If <em>substring</em> is null, it is processed as an
empty string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>The substring returned starts at the first
character in the input string and extends up to the character just
before the substring matched in the input string.</p>
</div>
<div class="paragraph">
<p>If <em>string</em> is an empty string, an empty
string is returned.</p>
</div>
<div class="paragraph">
<p>If <em>substring</em> is an empty string, it matches
the beginning of the input string and an empty string is returned. This
is consistent with the behavior of function <em>indexOf</em>, where an empty
substring returns index 0.</p>
</div>
<div class="paragraph">
<p>If <em>substring</em> does not occur in the input
string, an empty string is returned.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fntolowercase"><a class="anchor" href="#fntolowercase"></a>15.15. fn:toLowerCase</h3>
<div class="paragraph">
<p>Converts all of the characters of a string to
lower case.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:toLowerCase(string) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the
transformation to lower case is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string transformed to
lower case.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is treated as an
empty string and an empty string is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Converts all of the characters of the input
string to lower case according to the semantics of method
<em>toLowerCase()</em> of the Java class <em>java.lang.String</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fntouppercase"><a class="anchor" href="#fntouppercase"></a>15.16. fn:toUpperCase</h3>
<div class="paragraph">
<p>Converts all of the characters of a string to
upper case.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:toUpperCase(string) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the the
transformation to upper case is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string transformed to
upper case.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is treated as an
empty string and an empty string is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Converts all of the characters of the input
string to upper case according to the semantics of method
<em>toUpperCase()</em> of the Java class <em>java.lang.String</em>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="fntrim"><a class="anchor" href="#fntrim"></a>15.17. fn:trim</h3>
<div class="paragraph">
<p>Removes white space from both ends of a
string.</p>
</div>
<div class="literalblock">
<div class="title"><strong>Syntax</strong></div>
<div class="content">
<pre>fn:trim(string) → String</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Arguments &amp; Result</strong></caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The input string on which the the
trim is applied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>String</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The trimmed string.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title"><strong>Null &amp; Error Handling</strong></div>
<ul>
<li>
<p>If <em>string</em> is null, it is treated as an
empty string and an empty string is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Description</strong></div>
<p>Removes white space from both ends of a
string according to the semantics of method <em>trim()</em> of the Java class
<em>java.lang.String</em>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compatibility-migration"><a class="anchor" href="#compatibility-migration"></a>Appendix A: Compatibility &amp; Migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix provides
information on compatibility between different versions of the Jakarta Standard Tag Library, as well
as on how to migrate your web application to take advantage of the new
features of the latest Jakarta Standard Tag Library release.</p>
</div>
<div class="sect2">
<h3 id="java-ee-backwards-compatibility"><a class="anchor" href="#java-ee-backwards-compatibility"></a>A.1. Java EE Backwards Compatibility</h3>
<div class="paragraph">
<p>The API has moved from the Java EE (JCP) <code>javax.servlet.jsp.jstl</code> package to the Jakarta EE (Eclipse Foundation) <code>jakarta.servlet.jsp.jstl</code> package. Applications
using the Java EE package will need to change this to the Jakarta EE package.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changes"><a class="anchor" href="#changes"></a>Appendix B: Changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix lists the
changes in the Jakarta Standard Tag Library specification. This appendix is non-normative.</p>
</div>
<div class="sect2">
<h3 id="changed-between-jakarta-standard-tag-library-2-0-and-jsr-52"><a class="anchor" href="#changed-between-jakarta-standard-tag-library-2-0-and-jsr-52"></a>B.1. Changed between Jakarta Standard Tag Library 2.0 and JSR-52</h3>
<div class="ulist">
<ul>
<li>
<p>The API has moved from the <code>javax.servlet.jsp.jstl</code> package to the <code>jakarta.servlet.jsp.jstl</code> package.</p>
</li>
<li>
<p>The contents of the Javadoc were removed and are now included by reference.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<hr>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Since nested scoped variables are always saved in page scope, no scope attribute is associated with them.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. It is important to note that the Jakarta Server Pages specification says that "A name should refer to a unique object at all points in the execution, that is all the different scopes really should behave as a single name space." The Jakarta Server Pages specification also says that "A Jakarta Server Pages container implementation may or may not enforce this rule explicitly due to performance reasons". Because of this, if a scoped variable with the same name as a nested variable already exists in a scope other than 'page', exactly what happens to that scoped variable depends on how the Jakarta Server Pages container has been implemented. To comply with the Jakarta Server Pages specification, and to avoid non-portable behavior, page authors should therefore avoid using the same name in different scopes.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. The proper way to process strings of tokens is via &lt;c:forTokens&gt; or via functions <em>split</em> and <em>join</em>.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. If the responsibility was left to the consumer tag, this could lead to resource leaks (e.g. connection left open, memory space for buffers) until garbage collection is activated. This is because a consumer tag might not close the <em>Reader</em>, or because the page author might remove the consumer tag while leaving inadvertantly the &lt;c:import&gt; tag in the page.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. This restriction could eventually be lifted when the Jakarta Server Pages spec supports the notion of page events that actions could register to. On a <em>pageExit</em> event, an &lt;c:import&gt; tag would then simply release its resources if it had not already been done, removing the requirement for nested visibility.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. It is however important to note that using the output of &lt;c:url&gt; as the <em>url</em> attribute value of &lt;c:import&gt; won&#8217;t work for context relative URLs (URLs that start with a '/'). That&#8217;s because in those cases &lt;c:url&gt; prepends the context path to the URL value.
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. A variant code may also be specified, although rarely used.
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. Four formatting actions localize their data: &lt;fmt:formatNumber&gt;, &lt;fmt:parseNumber&gt;, &lt;fmt:formatDate&gt;, &lt;fmt:parseDate&gt;.
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. &lt;sql:transaction&gt; is responsible for setting the data source in a transaction.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. Deprecated.
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. Names beginning with the string "xml" are reserved by the XML specification.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. Deprecated.
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. Names beginning with the string "xml" are reserved by the XML specification.
</div>
<div class="footnote" id="_footnotedef_14">
<a href="#_footnoteref_14">14</a>. Note that the support in &lt;c:forEach&gt; for strings representing lists of coma separated values has been deprecated. The proper way to process strings of tokens is via &lt;c:forTokens&gt; or via functions <em>split</em> and <em>join</em>.
</div>
</div>
<div id="footer">
<div id="footer-text">
 2.0<br>
Last updated 2020-05-04 22:33:27 +0200
</div>
</div>
</body>
</html>