<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.10"/>
<meta name="author" content="Jakarta Authorization Team, https://projects.eclipse.org/projects/ee4j.jacc"/>
<title>Jakarta Authorization</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta Authorization</h1>
<div class="details">
<span id="author" class="author">Jakarta Authorization Team, https://projects.eclipse.org/projects/ee4j.jacc</span><br/>
<span id="email" class="email"><a href="https://dev.eclipse.org/mailman/listinfo/jacc-dev" class="bare">https://dev.eclipse.org/mailman/listinfo/jacc-dev</a></span><br/>
<span id="revnumber"> 2.0,</span>
<span id="revdate">July 28, 2020</span>
<br/><span id="revremark">Final</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#copyright">Copyright</a>
<ul class="sectlevel2">
<li><a href="#eclipse-foundation-specification-license">Eclipse Foundation Specification License</a>
<ul class="sectlevel3">
<li><a href="#disclaimers">Disclaimers</a></li>
</ul>
</li>
<li><a href="#preface">.1. Preface</a></li>
<li><a href="#status-of-document">.2. Status of Document</a></li>
<li><a href="#audience">.3. Audience</a></li>
<li><a href="#abstract">.4. Abstract</a></li>
<li><a href="#keywords">.5. Keywords</a></li>
<li><a href="#acknowledgements">.6. Acknowledgements</a></li>
</ul>
</li>
<li><a href="#overview">1. Overview</a>
<ul class="sectlevel2">
<li><a href="#introduction">1.1. Introduction</a></li>
<li><a href="#terminology">1.2. Terminology</a></li>
<li><a href="#a120">1.3. Assumptions</a></li>
<li><a href="#a136">1.4. Requirements</a></li>
<li><a href="#non-requirements">1.5. Non Requirements</a></li>
<li><a href="#a154">1.6. Running Without a SecurityManager</a></li>
<li><a href="#a160">1.7. Servlet or EJB only containers</a></li>
<li><a href="#servlet-only-containers">1.8. Servlet Only Containers</a></li>
<li><a href="#ejb-only-containers">1.9. EJB Only Containers</a></li>
</ul>
</li>
<li><a href="#a173">2. Provider Configuration Subcontract</a>
<ul class="sectlevel2">
<li><a href="#a175">2.1. Policy Implementation Class</a></li>
<li><a href="#permission-implementation-classes">2.2. Permission Implementation Classes</a></li>
<li><a href="#policy-configuration-interface">2.3. Policy Configuration Interface</a></li>
<li><a href="#a184">2.4. PolicyContext Class and Context Handlers</a></li>
<li><a href="#what-a-provider-must-do">2.5. What a Provider Must Do</a></li>
<li><a href="#optional-provider-support-for-jaas-policy-object">2.6. Optional Provider Support for JAAS Policy Object</a></li>
<li><a href="#a196">2.7. What the Application Server Must Do</a></li>
<li><a href="#modifications-to-the-jaas-subjectdomaincombiner">2.8. Modifications to the JAAS SubjectDomainCombiner</a></li>
</ul>
</li>
<li><a href="#a232">3. Policy Configuration Subcontract</a>
<ul class="sectlevel2">
<li><a href="#a235">3.1. What a Jakarta EE Platform’s Deployment Tools Must Do</a>
<ul class="sectlevel3">
<li><a href="#a253">3.1.1. Policy Contexts and Policy Context Identifiers</a>
<ul class="sectlevel4">
<li><a href="#a257">3.1.1.1. Policy Context Life Cycle</a></li>
<li><a href="#a269">3.1.1.2. Linking Policy Contexts</a></li>
</ul>
</li>
<li><a href="#a271">3.1.2. Servlet Policy Context Identifiers</a></li>
<li><a href="#a276">3.1.3. Translating Servlet Deployment Descriptors</a>
<ul class="sectlevel4">
<li><a href="#a278">3.1.3.1. Programmatic Servlet Registrations</a></li>
<li><a href="#a281">3.1.3.2. Translating security-constraint Elements</a></li>
<li><a href="#a343">3.1.3.3. Translating Servlet security-role-ref Elements</a></li>
<li><a href="#a347">3.1.3.4. Servlet URL-Pattern Matching Rules</a></li>
<li><a href="#a354">3.1.3.5. Example</a></li>
</ul>
</li>
<li><a href="#a512">3.1.4. Jakarta Enterprise Beans Policy Context Identifiers</a></li>
<li><a href="#a516">3.1.5. Translating Jakarta Enterprise Beans Deployment Descriptors</a>
<ul class="sectlevel4">
<li><a href="#a518">3.1.5.1. Translating Jakarta Enterprise Beans method-permission Elements</a></li>
<li><a href="#a521">3.1.5.2. Translating the Jakarta Enterprise Beans exclude-list</a></li>
<li><a href="#a524">3.1.5.3. Translating Jakarta Enterprise Beans security-role-ref Elements</a></li>
</ul>
</li>
<li><a href="#a527">3.1.6. Deploying an Application or Module</a></li>
<li><a href="#a533">3.1.7. Undeploying an Application or Module</a></li>
<li><a href="#a536">3.1.8. Deploying to an existing Policy Configuration</a></li>
<li><a href="#a540">3.1.9. Redeploying a Module</a></li>
</ul>
</li>
<li><a href="#a544">3.2. What the Provider Must Do</a></li>
<li><a href="#a549">3.3. Permission to Configure Policy</a></li>
</ul>
</li>
<li><a href="#a556">4. Policy Decision and Enforcement Subcontract</a>
<ul class="sectlevel2">
<li><a href="#a558">4.1. Policy Enforcement by Servlet Containers</a>
<ul class="sectlevel3">
<li><a href="#a560">4.1.1. Permission Names for Transport and Pre-Dispatch Decisions</a></li>
<li><a href="#a563">4.1.2. Evaluation of Transport Guarantees</a></li>
<li><a href="#a569">4.1.3. Pre-dispatch Decision</a></li>
<li><a href="#a572">4.1.4. Application Embedded Privilege Test</a></li>
</ul>
</li>
<li><a href="#a574">4.2. Provider Support for Servlet Policy Enforcement</a>
<ul class="sectlevel3">
<li><a href="#a576">4.2.1. Servlet Policy Decision Semantics</a>
<ul class="sectlevel4">
<li><a href="#a579">4.2.1.1. Matching Qualified URL Pattern Names</a></li>
<li><a href="#a589">4.2.1.2. Matching HTTP Method Specifications</a></li>
<li><a href="#a595">4.2.1.3. WebResourcePermission Matching Rules</a></li>
<li><a href="#a601">4.2.1.4. WebRoleRefPermission Matching Rules</a></li>
<li><a href="#a607">4.2.1.5. WebUserDataPermission Matching Rules</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a614">4.3. Policy Enforcement by Jakarta Enterprise Beans Containers</a>
<ul class="sectlevel3">
<li><a href="#a616">4.3.1. Jakarta Enterprise Beans Pre-dispatch Decision</a></li>
<li><a href="#a620">4.3.2. Jakarta Enterprise Beans Application Embedded Privilege Test</a></li>
</ul>
</li>
<li><a href="#a622">4.4. Provider Support for Jakarta Enterprise Beans Policy Enforcement</a>
<ul class="sectlevel3">
<li><a href="#a624">4.4.1. Jakarta Enterprise Beans Policy Decision Semantics</a>
<ul class="sectlevel4">
<li><a href="#a627">4.4.1.1. EJBMethodPermission Matching Rules</a></li>
<li><a href="#a697">4.4.1.2. EJBRoleRefPermission Matching Rules</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a703">4.5. Component runAs Identity</a></li>
<li><a href="#a707">4.6. Setting the Policy Context</a>
<ul class="sectlevel3">
<li><a href="#a710">4.6.1. Policy Context Handlers</a>
<ul class="sectlevel4">
<li><a href="#a715">4.6.1.1. Container Subject Policy Context Handler</a></li>
<li><a href="#a719">4.6.1.2. SOAPMessage Policy Context Handler</a></li>
<li><a href="#a721">4.6.1.3. HttpServletRequest Policy Context Handler</a></li>
<li><a href="#a723">4.6.1.4. EnterpriseBean Policy Context Handler</a></li>
<li><a href="#a725">4.6.1.5. Jakarta Enterprise Beans Arguments Policy Context Handler</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#a727">4.7. Checking AccessControlContext Independent Grants</a></li>
<li><a href="#a736">4.8. Checking the Caller for a Permission</a></li>
<li><a href="#a745">4.9. Missing Policy Contexts</a></li>
<li><a href="#a747">4.10. Default Policy Context</a></li>
<li><a href="#a750">4.11. Policy Compatibility Requirements</a></li>
<li><a href="#a753">4.12. Optimization of Permission Evaluations</a></li>
</ul>
</li>
<li><a href="#related-documents">Appendix A: Related Documents</a></li>
<li><a href="#issues">Appendix B: Issues</a>
<ul class="sectlevel2">
<li><a href="#configuration-context-and-policy-context-identifiers">B.1. Configuration Context and Policy Context Identifiers</a></li>
<li><a href="#a780">B.2. Configuration of Permissions with Parameters</a></li>
<li><a href="#extensibility-of-the-policyconfiguration-interface">B.3. Extensibility of the PolicyConfiguration Interface</a></li>
<li><a href="#directory-scoped-extension-matching-patterns">B.4. Directory Scoped Extension matching patterns</a></li>
<li><a href="#a788">B.5. Evolution of Deployment Policy Language</a></li>
<li><a href="#a791">B.6. Principals Passed to Providers in Subjects</a></li>
<li><a href="#a794">B.7. Clarification of Jakarta Servlet Constraint Matching Semantics</a></li>
<li><a href="#a797">B.8. References and Arguments in EJBMethodPermisison</a></li>
<li><a href="#a800">B.9. Permission Spanning in RoleRefPermission</a></li>
<li><a href="#a806">B.10. PolicyContext Identifiers are Unknown to Components</a></li>
<li><a href="#a809">B.11. JAAS Policy Interface expects Providers to be able to getPermissions</a></li>
<li><a href="#a812">B.12. Implementing Web Security Constraints as Permission</a></li>
<li><a href="#a815">B.13. Exception Handling</a></li>
<li><a href="#a818">B.14. PolicyConfiguration Commit</a></li>
<li><a href="#a821">B.15. Support for ServiceEndpoint methodInterface</a></li>
<li><a href="#a824">B.16. TypeNames of EJBMethodPermission Array Parameters</a></li>
<li><a href="#a827">B.17. Checking Permission on the root of a Web Application</a></li>
<li><a href="#a830">B.18. Calling isUserInRole from JSP not mapped to a Servlet</a></li>
<li><a href="#a833">B.19. Support for HTTP Extension Methods</a></li>
<li><a href="#a836">B.20. Welcome File and security-constraint Processing</a></li>
<li><a href="#a839">B.21. Colons Within path-segment of Request URI</a></li>
</ul>
</li>
<li><a href="#revision-history">Appendix C: Revision History</a>
<ul class="sectlevel2">
<li><a href="#community-draft-version-0-3-dated-12132001">C.1. Community Draft Version 0.3 (dated 12/13/2001)</a></li>
<li><a href="#changes-in-public-draft-version-0-1">C.2. Changes in Public Draft Version 0.1</a>
<ul class="sectlevel3">
<li><a href="#general">C.2.1. General</a></li>
<li><a href="#changes-to-provider-configuration-subcontract">C.2.2. Changes to Provider Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-configuration-subcontract">C.2.3. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-subcontract">C.2.4. Changes to Policy Decision Subcontract</a></li>
<li><a href="#changes-to-api">C.2.5. Changes to API</a></li>
<li><a href="#changes-to-issues">C.2.6. Changes to Issues</a></li>
</ul>
</li>
<li><a href="#changes-in-public-draft-version-0-2">C.3. Changes in Public Draft Version 0.2</a>
<ul class="sectlevel3">
<li><a href="#general-2">C.3.1. General</a></li>
<li><a href="#changes-to-provider-configuration-subcontract-2">C.3.2. Changes to Provider Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-subcontract-2">C.3.3. Changes to Policy Decision Subcontract</a></li>
<li><a href="#changes-to-issues-2">C.3.4. Changes to Issues</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-1-expert-draft-0-1">C.4. Changes in Proposed Final Draft 1 Expert Draft 0.1</a>
<ul class="sectlevel3">
<li><a href="#general-3">C.4.1. General</a></li>
<li><a href="#changes-to-the-preface-and-overview">C.4.2. Changes to the Preface and Overview</a></li>
<li><a href="#changes-to-provider-configuration-subcontract-3">C.4.3. Changes to Provider Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-2">C.4.4. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-subcontract-3">C.4.5. Changes to Policy Decision Subcontract</a></li>
<li><a href="#changes-to-api-2">C.4.6. Changes to API</a></li>
<li><a href="#changes-to-issues-3">C.4.7. Changes to Issues</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-1-expert-draft-0-2">C.5. Changes in Proposed Final Draft 1 Expert Draft 0.2</a>
<ul class="sectlevel3">
<li><a href="#changes-to-the-preface-and-overview-2">C.5.1. Changes to the Preface and Overview</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-3">C.5.2. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-subcontract-4">C.5.3. Changes to Policy Decision Subcontract</a></li>
<li><a href="#changes-to-history">C.5.4. Changes to History</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-1-expert-draft-0-3">C.6. Changes in Proposed Final Draft 1 Expert Draft 0.3</a>
<ul class="sectlevel3">
<li><a href="#changes-to-the-preface-and-overview-3">C.6.1. Changes to the Preface and Overview</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-4">C.6.2. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-subcontract-5">C.6.3. Changes to Policy Decision Subcontract</a></li>
<li><a href="#changes-to-api-3">C.6.4. Changes to API</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-2-expert-draft-1">C.7. Changes in Proposed Final Draft 2 Expert Draft 1</a>
<ul class="sectlevel3">
<li><a href="#general-4">C.7.1. General</a></li>
<li><a href="#changes-to-preface">C.7.2. Changes to Preface</a></li>
<li><a href="#changes-to-overview">C.7.3. Changes to Overview</a></li>
<li><a href="#changes-to-provider-configuration-subcontract-4">C.7.4. Changes to Provider Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-5">C.7.5. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-subcontract">C.7.6. Changes to Policy Decision and Enforcement Subcontract</a></li>
<li><a href="#changes-to-api-4">C.7.7. Changes to API</a></li>
<li><a href="#changes-to-references">C.7.8. Changes to References</a></li>
<li><a href="#changes-to-issues-4">C.7.9. Changes to Issues</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-2-expert-draft-2">C.8. Changes in Proposed Final Draft 2 Expert Draft 2</a>
<ul class="sectlevel3">
<li><a href="#changes-to-preface-2">C.8.1. Changes to Preface</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-6">C.8.2. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-subcontract-2">C.8.3. Changes to Policy Decision and Enforcement Subcontract</a></li>
<li><a href="#changes-to-api-5">C.8.4. Changes to API</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-2-expert-draft-3">C.9. Changes in Proposed Final Draft 2 Expert Draft 3</a>
<ul class="sectlevel3">
<li><a href="#changes-to-policy-configuration-subcontract-7">C.9.1. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-subcontract-3">C.9.2. Changes to Policy Decision and Enforcement Subcontract</a></li>
<li><a href="#changes-to-api-6">C.9.3. Changes to API</a></li>
</ul>
</li>
<li><a href="#changes-in-proposed-final-draft-2-expert-draft-4">C.10. Changes in Proposed Final Draft 2 Expert Draft 4</a>
<ul class="sectlevel3">
<li><a href="#changes-to-api-7">C.10.1. Changes to API</a></li>
</ul>
</li>
<li><a href="#changes-in-final-release">C.11. Changes in Final Release</a>
<ul class="sectlevel3">
<li><a href="#changes-to-license">C.11.1. Changes to License</a></li>
<li><a href="#changes-to-the-preface">C.11.2. Changes to the Preface</a></li>
<li><a href="#changes-to-overview-2">C.11.3. Changes to Overview</a></li>
<li><a href="#changes-to-provider-configuration-subcontract-5">C.11.4. Changes to Provider Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-8">C.11.5. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-contract">C.11.6. Changes to Policy Decision and Enforcement Contract</a></li>
<li><a href="#changes-to-api-8">C.11.7. Changes to API</a></li>
<li><a href="#changes-to-appendix-a-related-documents">C.11.8. Changes to Appendix A: Related Documents</a></li>
<li><a href="#changes-to-appendix-b-issues">C.11.9. Changes to Appendix B: Issues</a></li>
</ul>
</li>
<li><a href="#changes-in-errata-a">C.12. Changes in Errata A</a>
<ul class="sectlevel3">
<li><a href="#changes-to-policy-configuration-subcontract-9">C.12.1. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-policy-enforcement-subcontract">C.12.2. Changes to Policy Enforcement Subcontract</a></li>
<li><a href="#changes-to-api-9">C.12.3. Changes to API</a></li>
<li><a href="#changes-to-appendix-b-issues-2">C.12.4. Changes to Appendix B: Issues</a></li>
</ul>
</li>
<li><a href="#changes-in-errata-b">C.13. Changes in Errata B</a>
<ul class="sectlevel3">
<li><a href="#changes-to-overview-3">C.13.1. Changes to Overview</a></li>
</ul>
</li>
<li><a href="#change-log-for-errata-c">C.14. Change log for Errata C</a>
<ul class="sectlevel3">
<li><a href="#changes-made-throughout-the-document">C.14.1. Changes Made Throughout the Document</a></li>
<li><a href="#changes-to-overview-4">C.14.2. Changes to Overview</a></li>
<li><a href="#changes-to-provider-configuration-contract">C.14.3. Changes to Provider Configuration Contract</a></li>
<li><a href="#changes-to-policy-configuration-contract">C.14.4. Changes to Policy Configuration Contract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-contract-2">C.14.5. Changes to Policy Decision and Enforcement Contract</a></li>
<li><a href="#changes-to-api-10">C.14.6. Changes to API</a></li>
</ul>
</li>
<li><a href="#change-log-for-errata-d">C.15. Change log for Errata D</a>
<ul class="sectlevel3">
<li><a href="#changes-made-throughout-the-document-2">C.15.1. Changes Made Throughout the Document</a></li>
<li><a href="#changes-to-policy-configuration-contract-2">C.15.2. Changes to Policy Configuration Contract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-contract-3">C.15.3. Changes to Policy Decision and Enforcement Contract</a></li>
<li><a href="#changes-to-api-11">C.15.4. Changes to API</a></li>
<li><a href="#changes-to-appendix-b-issues-3">C.15.5. Changes to Appendix B: Issues</a></li>
</ul>
</li>
<li><a href="#change-log-for-errata-e">C.16. Change log for Errata E</a>
<ul class="sectlevel3">
<li><a href="#changes-made-throughout-the-document-3">C.16.1. Changes Made Throughout the Document</a></li>
<li><a href="#changes-to-overview-5">C.16.2. Changes to Overview</a></li>
<li><a href="#changes-to-policy-configuration-contract-3">C.16.3. Changes to Policy Configuration Contract</a></li>
<li><a href="#changes-to-policy-decision-and-enforcement-contract-4">C.16.4. Changes to Policy Decision and Enforcement Contract</a></li>
<li><a href="#changes-to-api-12">C.16.5. Changes to API</a></li>
<li><a href="#changes-to-issues-5">C.16.6. Changes to Issues</a></li>
</ul>
</li>
<li><a href="#change-log-for-errata-f">C.17. Change log for Errata F</a>
<ul class="sectlevel3">
<li><a href="#changes-made-throughout-the-document-4">C.17.1. Changes Made Throughout the Document</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-10">C.17.2. Changes to Policy Configuration Subcontract</a></li>
</ul>
</li>
<li><a href="#change-log-for-errata-g-maintenance-release-7">C.18. Change log for Errata G (maintenance Release 7)</a>
<ul class="sectlevel3">
<li><a href="#changes-made-throughout-the-document-5">C.18.1. Changes Made Throughout the Document</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-11">C.18.2. Changes to Policy Configuration Subcontract</a></li>
<li><a href="#changes-to-api-13">C.18.3. Changes to API</a></li>
</ul>
</li>
<li><a href="#change-log-for-errata-h-maintenance-release-8">C.19. Change log for Errata H (maintenance Release 8)</a>
<ul class="sectlevel3">
<li><a href="#changes-made-throughout-the-document-6">C.19.1. Changes Made Throughout the Document</a></li>
<li><a href="#changes-to-policy-configuration-subcontract-12">C.19.2. Changes to Policy Configuration Subcontract</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta Authorization

Version: 2.0

Status: Final

Release: July 28, 2020</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright"><a class="anchor" href="#copyright"></a>Copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright &#169; 2018, 2020 Eclipse Foundation.
<a href="https://www.eclipse.org/legal/efsl.php" class="bare">https://www.eclipse.org/legal/efsl.php</a></p>
</div>
<div class="sect2">
<h3 id="eclipse-foundation-specification-license"><a class="anchor" href="#eclipse-foundation-specification-license"></a>Eclipse Foundation Specification License</h3>
<div class="paragraph">
<p>By using and/or copying this document, or the Eclipse Foundation
document from which this statement is linked, you (the licensee) agree
that you have read, understood, and will comply with the following
terms and conditions:</p>
</div>
<div class="paragraph">
<p>Permission to copy, and distribute the contents of this document, or
the Eclipse Foundation document from which this statement is linked, in
any medium for any purpose and without fee or royalty is hereby
granted, provided that you include the following on ALL copies of the
document, or portions thereof, that you use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link or URL to the original Eclipse Foundation document.</p>
</li>
<li>
<p>All existing copyright notices, or if one does not exist, a notice
(hypertext is preferred, but a textual representation is permitted)
of the form: "Copyright &#169; [$date-of-document]
Eclipse Foundation, Inc. <a href="https://www.eclipse.org/legal/efsl.php" class="bare">https://www.eclipse.org/legal/efsl.php</a>"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inclusion of the full text of this NOTICE must be provided. We
request that authorship attribution be provided in any software,
documents, or other items or products that you create pursuant to the
implementation of the contents of this document, or any portion
thereof.</p>
</div>
<div class="paragraph">
<p>No right to create modifications or derivatives of Eclipse Foundation
documents is granted pursuant to this license, except anyone may
prepare and distribute derivative works and portions of this document
in software that implements the specification, in supporting materials
accompanying such software, and in documentation of such software,
PROVIDED that all such works include the notice below. HOWEVER, the
publication of derivative works of this document for use as a technical
specification is expressly prohibited.</p>
</div>
<div class="paragraph">
<p>The notice is:</p>
</div>
<div class="paragraph">
<p>"Copyright &#169; 2018, 2020 Eclipse Foundation. This software or
document includes material copied from or derived from
Jakarta&#174; Authorization
<a href="https://jakarta.ee/specifications/authorization/2.0/" class="bare">https://jakarta.ee/specifications/authorization/2.0/</a>"</p>
</div>
<div class="sect3">
<h4 id="disclaimers"><a class="anchor" href="#disclaimers"></a>Disclaimers</h4>
<div class="paragraph">
<p>THIS DOCUMENT IS PROVIDED &quot;AS IS,&quot; AND THE COPYRIGHT
HOLDERS AND THE ECLIPSE FOUNDATION MAKE NO REPRESENTATIONS OR
WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE DOCUMENT ARE
SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS
WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR
OTHER RIGHTS.</p>
</div>
<div class="paragraph">
<p>THE COPYRIGHT HOLDERS AND THE ECLIPSE FOUNDATION WILL NOT BE LIABLE
FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT
OF ANY USE OF THE DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE
CONTENTS THEREOF.</p>
</div>
<div class="paragraph">
<p>The name and trademarks of the copyright holders or the Eclipse
Foundation may NOT be used in advertising or publicity pertaining to
this document or its contents without specific, written prior
permission. Title to copyright in this document will at all times
remain with copyright holders.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="preface"><a class="anchor" href="#preface"></a>.1. Preface</h3>

</div>
<div class="sect2">
<h3 id="status-of-document"><a class="anchor" href="#status-of-document"></a>.2. Status of Document</h3>
<div class="paragraph">
<p>This document is the Final Release of the
Java <em>TM</em> Authorization Contract for Containers Version 1.5
specification and represents the definition of this technology as
implemented by the reference implementation (RI) and verified by the
technology compatibility kit (TCK) . This specification was developed
under the Java Community Process (JCP2.7).</p>
</div>
</div>
<div class="sect2">
<h3 id="audience"><a class="anchor" href="#audience"></a>.3. Audience</h3>
<div class="paragraph">
<p>This document is intended for developers of
the RI and TCK and for those who will be delivering implementations of
this technology in their products.</p>
</div>
</div>
<div class="sect2">
<h3 id="abstract"><a class="anchor" href="#abstract"></a>.4. Abstract</h3>
<div class="paragraph">
<p>This specification defines new
java.security.Permission classes to satisfy the Java EE authorization
model. The specification defines the binding of container access
decisions to operations on instances of these permission classes. The
specification defines the semantics of policy providers that employ the
new permission classes to address the authorization requirements of Java
EE, including the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the definition of roles as named
collections of permissions</p>
</li>
<li>
<p>the granting to principals of permissions
corresponding to roles</p>
</li>
<li>
<p>the determination of whether a principal
has been granted the permissions of a role (e.g. isCallerInRole)</p>
</li>
<li>
<p>the definition of identifier to role
mappings that bind application embedded identifiers to application
scoped role names.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The specification defines the installation
and configuration of authorization providers for use by containers. The
specification defines the interfaces that a provider must make available
to allow container deployment tools to create and manage permission
collections corresponding to roles.</p>
</div>
</div>
<div class="sect2">
<h3 id="keywords"><a class="anchor" href="#keywords"></a>.5. Keywords</h3>
<div class="paragraph">
<p>The keywords “MUST”, “MUST NOT”, “REQUIRED”,
“SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and
“OPTIONAL” in this document are to be interpreted as described in
RFC2119 [KEYWORDS].</p>
</div>
</div>
<div class="sect2">
<h3 id="acknowledgements"><a class="anchor" href="#acknowledgements"></a>.6. Acknowledgements</h3>
<div class="paragraph">
<p>This draft of the specification incorporates
the contributions of the RI and TCK teams with the output of the JSR115
Expert Group. The JSR 115 Expert Group included the following members:</p>
</div>
<div class="paragraph">
<p>Steven Bazyl RSA Security, Inc.</p>
</div>
<div class="paragraph">
<p>Sean Dolan Hitachi Computer Products</p>
</div>
<div class="paragraph">
<p>Herb Erickson SilverStream Software</p>
</div>
<div class="paragraph">
<p>Gary Ellison Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Neil Forrest Dyoti Enterprises Ltd</p>
</div>
<div class="paragraph">
<p>Johan Gellner Tmax Soft, Inc.</p>
</div>
<div class="paragraph">
<p>Craig Heath Individual</p>
</div>
<div class="paragraph">
<p>Hal Lockhart Entegrity Solutions</p>
</div>
<div class="paragraph">
<p>Larry McCay Hewlett-Packard Company</p>
</div>
<div class="paragraph">
<p>Serge Mister Entrust, Incorporated</p>
</div>
<div class="paragraph">
<p>Ron Monzillo Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Anthony Nadalin Tivoli Systems, Incorporated</p>
</div>
<div class="paragraph">
<p>Nataraj Nagaratnam International Business
Machines Corporation</p>
</div>
<div class="paragraph">
<p>Vijakumar Natarajan Borland Software
Corporation</p>
</div>
<div class="paragraph">
<p>Raymond K. Ng Oracle Corporation</p>
</div>
<div class="paragraph">
<p>Samir Nigam Sybase, Incorporated</p>
</div>
<div class="paragraph">
<p>Henry Pasternack Netegrity, Incorporated</p>
</div>
<div class="paragraph">
<p>Paul Patrick BEA Systems</p>
</div>
<div class="paragraph">
<p>Francis Pouatcha Individual</p>
</div>
<div class="paragraph">
<p>Jyri Virkki iPlanet</p>
</div>
<div class="paragraph">
<p>The RI, the TCK, and the improvements to the
specification made as a result of the experiences gained during these
actvities are the result of the fine work of the following individuals:</p>
</div>
<div class="paragraph">
<p>Jean-Francois Arcand Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Carla Carlson Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Shing Wai Chan Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Paul Hendley Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Kumar Jayanti Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Eric Jendrock Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Jagadesh Babu Munta Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Tony Ng Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Craig Perez Oracle America, Inc.</p>
</div>
<div class="paragraph">
<p>Raja Perumal Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Deepa Singh Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Harpreet Singh Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Nithya Subramanian Sun Microsystems</p>
</div>
<div class="paragraph">
<p>The following people are among many who
commented on the specification, and in so doing, contributed to its
final form. I would like to recognize the contributions of everyone who
commented on the specification.</p>
</div>
<div class="paragraph">
<p>Rajeev Angal iPlanet</p>
</div>
<div class="paragraph">
<p>Lambert Boskamp SAP AG</p>
</div>
<div class="paragraph">
<p>William Cox BEA Systems</p>
</div>
<div class="paragraph">
<p>Paul Ferwerda BEA Systems</p>
</div>
<div class="paragraph">
<p>Charlie Lai Sun Microsystmes</p>
</div>
<div class="paragraph">
<p>Rosanna Lee Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Robert Naugle Hewlett-Packard Company</p>
</div>
<div class="paragraph">
<p>Bob Scheifler Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Bill Shannon Sun Microsystems</p>
</div>
<div class="paragraph">
<p>Neil Smithline BEA Systems</p>
</div>
<div class="paragraph">
<p>Sirish Vepa Sybase, Incorporated</p>
</div>
<div class="paragraph">
<p>Kai Xu Sun Microsystems</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This specification defines a contract between Jakarta EE containers and authorization
policy modules such that container authorization functionality can be provided as
appropriate to suit the operational environment.</p>
</div>
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a>1.1. Introduction</h3>
<div class="paragraph">
<p>The contract defined by this specification is divided into three subcontracts. Taken
together, these subcontracts describe the installation and configuration of
authorization providers such that they will be used by containers in performing their access
decisions. The three subcontracts are the <a href="#a173">Provider Configuration Subcontract</a>, <a href="#a232">Policy Configuration Subcontract</a>, and the <a href="#a556">Policy Decision and Enforcement Subcontract</a>.</p>
</div>
<div id="a76" class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgaWQ9InN2ZzUzNSIKICAgdmVyc2lvbj0iMS4xIgogICB2aWV3Qm94PSIwIDAgMTM2LjA3MTQzIDExOS40NDA0OCIKICAgaGVpZ2h0PSIxMTkuNDQwNDhtbSIKICAgd2lkdGg9IjEzNi4wNzE0M21tIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNTI5IiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTUzMiI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgICA8ZwogICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC4zNTI3Nzc3NywwLDAsLTAuMzUyNzc3NzcsLTE0Ljc0ODYyOSwyMTUuODg1NzkpIgogICAgICAgaWQ9Imc0MTUiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDEwNiIKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyMzEuNzIsNTgxLjYwMiAtMS44NiwtMC4xMiAtMS43NCwtMC4yNCAtMS43NCwtMC40OCAtMS42OCwtMC42IC0xLjU2LC0wLjc4IC0xLjUsLTAuOSAtMS4zOCwtMS4wMiAtMS4yNiwtMS4xNCAtMS4yLC0xLjMyIC0xLjAyLC0xLjM4IC0wLjksLTEuNDQgLTAuNzIsLTEuNjIgLTAuNjYsLTEuNjIgLTAuNDIsLTEuNzQgLTAuMjQsLTEuOCAtMC4xMiwtMS44IHYgLTI3IGwgMC4xMiwtMS44NiAwLjI0LC0xLjggMC40MiwtMS43NCAwLjY2LC0xLjYyIDAuNzIsLTEuNTYgMC45LC0xLjUgMS4wMiwtMS4zOCAxLjIsLTEuMzIgMS4yNiwtMS4xNCAxLjM4LC0xLjAyIDEuNSwtMC45IDEuNTYsLTAuNzggMS42OCwtMC42IDEuNzQsLTAuNDIgMS43NCwtMC4zIDEuODYsLTAuMDYgaCA0OS41IGwgMS44NiwwLjA2IDEuNzQsMC4zIDEuNzQsMC40MiAxLjY4LDAuNiAxLjU2LDAuNzggMS41LDAuOSAxLjM4LDEuMDIgMS4yNiwxLjE0IDEuMiwxLjMyIDEuMDIsMS4zOCAwLjksMS41IDAuNzIsMS41NiAwLjY2LDEuNjIgMC40MiwxLjc0IDAuMjQsMS44IDAuMTIsMS44NiB2IDI3IGwgLTAuMTIsMS44IC0wLjI0LDEuOCAtMC40MiwxLjc0IC0wLjY2LDEuNjIgLTAuNzIsMS42MiAtMC45LDEuNDQgLTEuMDIsMS4zOCAtMS4yLDEuMzIgLTEuMjYsMS4xNCAtMS4zOCwxLjAyIC0xLjUsMC45IC0xLjU2LDAuNzggLTEuNjgsMC42IC0xLjc0LDAuNDggLTEuNzQsMC4yNCAtMS44NiwwLjEyIGggLTQ5LjUiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTA4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDIzMS43OCw1ODEuMzYyIC0xLjg2LC0wLjEyIC0xLjc0LC0wLjI0IC0xLjc0LC0wLjQ4IGggMC4wNiBsIC0xLjY4LC0wLjYgLTEuNTYsLTAuNzggLTEuNSwtMC45IDAuMDYsMC4wNiAtMS4zOCwtMS4wMiAtMS4yNiwtMS4xNCAtMS4yLC0xLjMyIC0xLjAyLC0xLjM4IDAuMDYsMC4wNiAtMC45LC0xLjQ0IC0wLjcyLC0xLjYyIC0wLjY2LC0xLjYyIHYgMC4wNiBsIC0wLjQyLC0xLjc0IC0wLjI0LC0xLjggLTAuMTIsLTEuOCB2IDAuMDYgLTI3IGwgMC4xMiwtMS44NiAwLjI0LC0xLjggdiAwLjA2IGwgMC40MiwtMS43NCAwLjY2LC0xLjYyIDAuNzIsLTEuNTYgdiAwLjA2IGwgMC45LC0xLjUgaCAtMC4wNiBsIDEuMDIsLTEuMzggMS4yLC0xLjMyIHYgMC4wNiBsIDEuMjYsLTEuMTQgMS4zOCwtMS4wMiBoIC0wLjA2IGwgMS41LC0wLjkgMS41NiwtMC43OCB2IDAuMDYgbCAxLjY4LC0wLjYgaCAtMC4wNiBsIDEuNzQsLTAuNDIgMS43NCwtMC4zIGggLTAuMDYgbCAxLjg2LC0wLjA2IGggNDkuNSBsIDEuODYsMC4wNiAxLjc0LDAuMyBoIC0wLjA2IGwgMS43NCwwLjQyIDEuNjgsMC42IC0wLjA2LC0wLjA2IDEuNTYsMC43OCAwLjI0LC0wLjQyIC0xLjU2LC0wLjc4IC0xLjY4LC0wLjYgaCAtMC4wNiBsIC0xLjc0LC0wLjQyIC0xLjc0LC0wLjMgaCAtMC4wNiBsIC0xLjg2LC0wLjA2IGggLTQ5LjUgbCAtMS44NiwwLjA2IC0xLjc0LDAuMyBoIC0wLjA2IGwgLTEuNzQsMC40MiAtMS42OCwwLjYgaCAtMC4wNiBsIC0xLjU2LDAuNzggLTEuNSwwLjkgdiAwLjA2IGwgLTEuMzgsMS4wMiAtMS4yNiwxLjE0IGggLTAuMDYgbCAtMS4yLDEuMzIgLTEuMDIsMS4zOCB2IDAuMDYgbCAtMC45LDEuNSAtMC43MiwxLjU2IC0wLjY2LDEuNjIgLTAuMDYsMC4wNiAtMC40MiwxLjc0IC0wLjI0LDEuOCAtMC4xMiwxLjg2IHYgMjcuMDYgbCAwLjEyLDEuOCAwLjI0LDEuOCB2IDAuMDYgbCAwLjQyLDEuNzQgaCAwLjA2IGwgMC42NiwxLjYyIDAuNzIsMS42MiB2IDAuMDYgbCAwLjksMS40NCAxLjAyLDEuMzggMS4yLDEuMzIgMC4wNiwwLjA2IDEuMjYsMS4xNCAxLjM4LDEuMDIgMS41LDAuOSAxLjU2LDAuNzggMC4wNiwwLjA2IDEuNjgsMC42IDEuNzQsMC40OCBoIDAuMDYgbCAxLjc0LDAuMjQgMS44NiwwLjEyIiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDExMCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyODkuNjgsNTIwLjk0MiAxLjUsMC45IDEuMzgsMS4wMiAxLjI2LDEuMTQgLTAuMDYsLTAuMDYgMS4yLDEuMzIgMS4wMiwxLjM4IDAuOSwxLjUgdiAtMC4wNiBsIDAuNzIsMS41NiAwLjY2LDEuNjIgaCAtMC4wNiBsIDAuNDIsMS43NCB2IC0wLjA2IGwgMC4yNCwxLjggMC4xMiwxLjg2IHYgMjcgLTAuMDYgbCAtMC4xMiwxLjggLTAuMjQsMS44IC0wLjQyLDEuNzQgMC4wNiwtMC4wNiAtMC42NiwxLjYyIC0wLjcyLDEuNjIgLTAuOSwxLjQ0IHYgLTAuMDYgbCAtMS4wMiwxLjM4IC0xLjIsMS4zMiBoIDAuMDYgbCAtMS4yNiwxLjE0IC0xLjM4LDEuMDIgdiAtMC4wNiBsIC0xLjUsMC45IC0xLjU2LDAuNzggaCAwLjA2IGwgLTEuNjgsMC42IC0xLjc0LDAuNDggaCAwLjA2IGwgLTEuNzQsMC4yNCAtMS44NiwwLjEyIGggLTQ5LjUgMC4wNiBsIC0wLjA2LDAuNDggaCA0OS41NiBsIDEuODYsLTAuMTIgMS43NCwtMC4yNCAxLjc0LC0wLjQ4IGggMC4wNiBsIDEuNjgsLTAuNiB2IC0wLjA2IGwgMS41NiwtMC43OCAxLjUsLTAuOSBoIDAuMDYgbCAxLjM4LC0xLjAyIDEuMjYsLTEuMTQgdiAtMC4wNiBsIDEuMiwtMS4zMiAxLjAyLC0xLjM4IGggMC4wNiBsIDAuOSwtMS40NCB2IC0wLjA2IGwgMC43MiwtMS42MiAwLjY2LC0xLjYyIDAuNDIsLTEuNzQgdiAtMC4wNiBsIDAuMjQsLTEuOCAwLjEyLC0xLjggdiAtMjcuMDYgbCAtMC4xMiwtMS44NiAtMC4yNCwtMS44IC0wLjQyLC0xLjc0IHYgLTAuMDYgbCAtMC42NiwtMS42MiAtMC43MiwtMS41NiAtMC45LC0xLjUgLTAuMDYsLTAuMDYgLTEuMDIsLTEuMzggLTEuMiwtMS4zMiAtMS4yNiwtMS4xNCAtMS4zOCwtMS4wMiAtMC4wNiwtMC4wNiAtMS41LC0wLjkiIC8+CiAgICAgIDx0ZXh0CiAgICAgICAgIGlkPSJ0ZXh0MTIwIgogICAgICAgICBzdHlsZT0iZm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjEwLjk4cHg7Zm9udC1mYW1pbHk6J1RpbWVzIE5ldyBSb21hbic7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpUaW1lc05ld1JvbWFuO3dyaXRpbmctbW9kZTpsci10YjtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLC0xLDIzNi4wNCw1NjQuNjIxNykiPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjExMiIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHg9IjAgNC44ODM5MDQgMTAuMzgyNjg4IDE1Ljg4MTQ3MiAxOC45NDI2OTYgMjMuODI2NTk5IDI2Ljg4NzgyMyAzMi4zNDgxNzkgMzcuMjY5NDEzIj5jb250YWluZXI8L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjExNCIKICAgICAgICAgICB5PSIxMi4xODAxMTQiCiAgICAgICAgICAgeD0iNi43MTk3NTk5IDEyLjIxMDg1OCAxNy43MDE5NTYgMjAuNzU1NDkzIDIzLjgwOTAzMiAyOC42ODUyNDkiPnBvbGljeTwvdHNwYW4+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMTE2IgogICAgICAgICAgIHk9IjI0LjM2MDIyOCIKICAgICAgICAgICB4PSItNy4wMjA2MTE4IC0yLjA5OTM3NiAzLjM2MDk3NzkgNy4wMjYxMDIxIDEyLjUyNDg4NiAxNi4xOTAwMSAyMS4wNzM5MTQgMjUuOTU3ODE3IDM0LjUwOTA0MSAzOS4zOTI5NDQgNDQuODkxNzMxIj5lbmZvcmNlbWVudDwvdHNwYW4+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMTE4IgogICAgICAgICAgIHk9IjM2LjQ3OTk1NCIKICAgICAgICAgICB4PSI5LjExODg4OTggMTQuNTg5MTI2IDIwLjEwODc3MiAyMy4xNDE0NDcgMjguNjExNjg1Ij5wb2ludDwvdHNwYW4+PC90ZXh0PgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDEyMiIKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyMzEuNzIsNDY1LjYyMiAtMS44NiwtMC4xMiAtMS43NCwtMC4yNCAtMS43NCwtMC40OCAtMS42OCwtMC42IC0xLjU2LC0wLjcyIC0xLjUsLTAuOSAtMS4zOCwtMS4wOCAtMS4yNiwtMS4xNCAtMS4yLC0xLjI2IC0xLjAyLC0xLjM4IC0wLjksLTEuNSAtMC43MiwtMS41NiAtMC42NiwtMS42OCAtMC40MiwtMS43NCAtMC4yNCwtMS44IC0wLjEyLC0xLjggdiAtMjcgbCAwLjEyLC0xLjg2IDAuMjQsLTEuOCAwLjQyLC0xLjY4IDAuNjYsLTEuNjggMC43MiwtMS41NiAwLjksLTEuNSAxLjAyLC0xLjM4IDEuMiwtMS4yNiAxLjI2LC0xLjIgMS4zOCwtMS4wMiAxLjUsLTAuOSAxLjU2LC0wLjc4IDEuNjgsLTAuNiAxLjc0LC0wLjQyIDEuNzQsLTAuMyAxLjg2LC0wLjA2IGggNDkuNSBsIDEuODYsMC4wNiAxLjc0LDAuMyAxLjc0LDAuNDIgMS42OCwwLjYgMS41NiwwLjc4IDEuNSwwLjkgMS4zOCwxLjAyIDEuMjYsMS4yIDEuMiwxLjI2IDEuMDIsMS4zOCAwLjksMS41IDAuNzIsMS41NiAwLjY2LDEuNjggMC40MiwxLjY4IDAuMjQsMS44IDAuMTIsMS44NiB2IDI3IGwgLTAuMTIsMS44IC0wLjI0LDEuOCAtMC40MiwxLjc0IC0wLjY2LDEuNjggLTAuNzIsMS41NiAtMC45LDEuNSAtMS4wMiwxLjM4IC0xLjIsMS4yNiAtMS4yNiwxLjE0IC0xLjM4LDEuMDggLTEuNSwwLjkgLTEuNTYsMC43MiAtMS42OCwwLjYgLTEuNzQsMC40OCAtMS43NCwwLjI0IC0xLjg2LDAuMTIgaCAtNDkuNSIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgxMjQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMjMxLjc4LDQ2NS4zODIgLTEuODYsLTAuMTIgLTEuNzQsLTAuMjQgLTEuNzQsLTAuNDggaCAwLjA2IGwgLTEuNjgsLTAuNiAtMS41NiwtMC43MiAtMS41LC0wLjkgMC4wNiwwLjA2IC0xLjM4LC0xLjA4IC0xLjI2LC0xLjE0IC0xLjIsLTEuMjYgLTEuMDIsLTEuMzggMC4wNiwwLjA2IC0wLjksLTEuNSAtMC43MiwtMS41NiAtMC42NiwtMS42OCB2IDAuMDYgbCAtMC40MiwtMS43NCAtMC4yNCwtMS44IC0wLjEyLC0xLjggdiAwLjA2IC0yNyBsIDAuMTIsLTEuODYgMC4yNCwtMS44IHYgMC4wNiBsIDAuNDIsLTEuNjggMC42NiwtMS42OCAwLjcyLC0xLjU2IHYgMC4wNiBsIDAuOSwtMS41IGggLTAuMDYgbCAxLjAyLC0xLjM4IHYgMC4wNiBsIDEuMiwtMS4yNiAxLjI2LC0xLjIgMS4zOCwtMS4wMiBoIC0wLjA2IGwgMS41LC0wLjkgMS41NiwtMC43OCB2IDAuMDYgbCAxLjY4LC0wLjYgaCAtMC4wNiBsIDEuNzQsLTAuNDIgMS43NCwtMC4zIGggLTAuMDYgbCAxLjg2LC0wLjA2IGggNDkuNSBsIDEuODYsMC4wNiAxLjc0LDAuMyBoIC0wLjA2IGwgMS43NCwwLjQyIDEuNjgsMC42IC0wLjA2LC0wLjA2IDEuNTYsMC43OCAwLjI0LC0wLjQyIC0xLjU2LC0wLjc4IC0xLjY4LC0wLjYgaCAtMC4wNiBsIC0xLjc0LC0wLjQyIC0xLjc0LC0wLjMgaCAtMC4wNiBsIC0xLjg2LC0wLjA2IGggLTQ5LjUgbCAtMS44NiwwLjA2IC0xLjc0LDAuMyBoIC0wLjA2IGwgLTEuNzQsMC40MiAtMS42OCwwLjYgaCAtMC4wNiBsIC0xLjU2LDAuNzggLTEuNSwwLjkgdiAwLjA2IGwgLTEuMzgsMS4wMiBoIC0wLjA2IGwgLTEuMjYsMS4yIC0xLjIsMS4yNiAtMS4wMiwxLjM4IHYgMC4wNiBsIC0wLjksMS41IC0wLjcyLDEuNTYgLTAuNjYsMS42OCAtMC4wNiwwLjA2IC0wLjQyLDEuNjggLTAuMjQsMS44IC0wLjEyLDEuODYgdiAyNy4wNiBsIDAuMTIsMS44IDAuMjQsMS44IHYgMC4wNiBsIDAuNDIsMS43NCBoIDAuMDYgbCAwLjY2LDEuNjggMC43MiwxLjU2IHYgMC4wNiBsIDAuOSwxLjUgMS4wMiwxLjM4IHYgMC4wNiBsIDEuMiwxLjI2IGggMC4wNiBsIDEuMjYsMS4xNCAxLjM4LDEuMDggMS41LDAuOSBoIDAuMDYgbCAxLjU2LDAuNzIgdiAwLjA2IGwgMS42OCwwLjYgMS43NCwwLjQ4IGggMC4wNiBsIDEuNzQsMC4yNCAxLjg2LDAuMTIiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTI2IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDI4OS42OCw0MDQuOTYyIDEuNSwwLjkgMS4zOCwxLjAyIGggLTAuMDYgbCAxLjI2LDEuMiAxLjIsMS4yNiB2IC0wLjA2IGwgMS4wMiwxLjM4IDAuOSwxLjUgdiAtMC4wNiBsIDAuNzIsMS41NiAwLjY2LDEuNjggaCAtMC4wNiBsIDAuNDIsMS42OCB2IC0wLjA2IGwgMC4yNCwxLjggMC4xMiwxLjg2IHYgMjcgLTAuMDYgbCAtMC4xMiwxLjggLTAuMjQsMS44IC0wLjQyLDEuNzQgMC4wNiwtMC4wNiAtMC42NiwxLjY4IC0wLjcyLDEuNTYgLTAuOSwxLjUgdiAtMC4wNiBsIC0xLjAyLDEuMzggLTEuMiwxLjI2IGggMC4wNiBsIC0xLjI2LDEuMTQgLTEuMzgsMS4wOCB2IC0wLjA2IGwgLTEuNSwwLjkgaCAwLjA2IGwgLTEuNTYsMC43MiAtMS42OCwwLjYgLTEuNzQsMC40OCBoIDAuMDYgbCAtMS43NCwwLjI0IC0xLjg2LDAuMTIgaCAtNDkuNSAwLjA2IGwgLTAuMDYsMC40OCBoIDQ5LjU2IGwgMS44NiwtMC4xMiAxLjc0LC0wLjI0IDEuNzQsLTAuNDggaCAwLjA2IGwgMS42OCwtMC42IHYgLTAuMDYgbCAxLjU2LC0wLjcyIDEuNSwtMC45IGggMC4wNiBsIDEuMzgsLTEuMDggMS4yNiwtMS4xNCAxLjIsLTEuMjYgdiAtMC4wNiBsIDEuMDIsLTEuMzggaCAwLjA2IGwgMC45LC0xLjUgdiAtMC4wNiBsIDAuNzIsLTEuNTYgMC42NiwtMS42OCAwLjQyLC0xLjc0IHYgLTAuMDYgbCAwLjI0LC0xLjggMC4xMiwtMS44IHYgLTI3LjA2IGwgLTAuMTIsLTEuODYgLTAuMjQsLTEuOCAtMC40MiwtMS42OCB2IC0wLjA2IGwgLTAuNjYsLTEuNjggLTAuNzIsLTEuNTYgLTAuOSwtMS41IC0wLjA2LC0wLjA2IC0xLjAyLC0xLjM4IC0xLjIsLTEuMjYgLTEuMjYsLTEuMiAtMS4zOCwtMS4wMiAtMC4wNiwtMC4wNiAtMS41LC0wLjkiIC8+CiAgICAgIDx0ZXh0CiAgICAgICAgIGlkPSJ0ZXh0MTQ0IgogICAgICAgICBzdHlsZT0iZm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjEwLjk4cHg7Zm9udC1mYW1pbHk6J1RpbWVzIE5ldyBSb21hbic7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpUaW1lc05ld1JvbWFuO3dyaXRpbmctbW9kZTpsci10YjtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLC0xLDIyMi40Miw0NDguNjQxNykiPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjEyOCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHg9IjAgNi4xMDcwNzYyIDExLjU5OTI3MiAxNC42NTM5MDggMTcuNzA4NTQ0IDIyLjU4NTg1OSAyOC4wNzgwNTYgMzAuODM4NDI4IDM2LjMzMDYyNCAzOS45ODkxNTkgNDUuNDgxMzU4IDUwLjk3MzU1MyA1NC4wMjgxODcgNTkuNTIwMzg2IDY0LjM5NzY5NyI+UG9saWN5IHByb3ZpZGVyPC90c3Bhbj48dHNwYW4KICAgICAgICAgICBpZD0idHNwYW4xMzAiCiAgICAgICAgICAgeT0iMTIuMTgwMTE0IgogICAgICAgICAgIHg9IjIwLjM0MDQ1IDI1LjgzMTU0OSAzMS4zMjI2NDUgMzQuMzc2MTgzIDM3LjQyOTcyMiA0Mi4zMDU5MzkiPnBvbGljeTwvdHNwYW4+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMTMyIgogICAgICAgICAgIHk9IjI0LjI5OTgzNyIKICAgICAgICAgICB4PSIxNS43MjAwNjYgMjEuMTk0Njk1IDI2LjExNTkzMSAzMC45NzU2NzcgMzQuMDEyNzQ1IDM4LjI2ODU5MyA0MS4zMDU2NiA0Ni43ODAyODkiPmRlY2lzaW9uPC90c3Bhbj48dHNwYW4KICAgICAgICAgICBpZD0idHNwYW4xMzQiCiAgICAgICAgICAgeT0iMzYuNDc5OTU0IgogICAgICAgICAgIHg9IjIxLjM2MDQ5MyAyNi44NTA0OTIgMzIuMzQwNDkyIDM1LjM5MjkzMyA0MC44ODI5MzEgNDMuOTM1MzcxIj5wb2ludDwvdHNwYW4+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMTM2IgogICAgICAgICAgIHk9Ii00Mi4xMjAzNzciCiAgICAgICAgICAgeD0iLTEyMi45Mzk3NyAtMTE4LjA2NDY0IC0xMTIuNTc0NjUgLTEwOS41MjIyMSAtMTA0LjAzMjIgLTk4LjU0MjIwNiAtOTQuODg1ODY0IC05MS44MzM0MjcgLTg2Ljk1ODMwNSAtODIuMDgzMTgzIC03OS4wMzA3NDYgLTc1Ljk3ODMxIC03MC40ODgzMDQiPmF1dGhvcml6YXRpb248L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjEzOCIKICAgICAgICAgICB5PSItMzAuMDAwNjU0IgogICAgICAgICAgIHg9Ii0xMDYuNDQwMTIgLTEwMC45MjI2NyAtOTUuNDYyMzE4IC05MC41NTk3NDYgLTg2Ljg3NTk1NCI+cXVlcnk8L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjE0MCIKICAgICAgICAgICB5PSItNDIuMTIwMzc3IgogICAgICAgICAgIHg9IjEzMy41NTk2MiAxMzguNDQ1NzIgMTQzLjk0NjcgMTQ2Ljk0ODY0IDE1Mi40NDk2MiAxNTcuOTUwNTkgMTYxLjYxNzkyIDE2NC42MTk4NCAxNjkuNTQxMDggMTc0LjQyNzE5IDE3Ny40OTA2IDE4MC41NTQwMiAxODYuMDE0MzciPmF1dGhvcml6YXRpb248L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjE0MiIKICAgICAgICAgICB5PSItMzAuMDAwNjU0IgogICAgICAgICAgIHg9IjE1MC4zNjAxMiAxNTQuMDIwODYgMTU4LjkwMDM2IDE2My4xNzU5OCAxNjguNjcwMzYgMTcxLjcyNzIiPnJlc3VsdDwvdHNwYW4+PC90ZXh0PgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE0NiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyMjAuNDQsMzUzLjM2MiBoIDcyLjMgdiAtMC40OCBoIC03Mi4zIHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTQ4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDI5Mi4yNiwzNTMuMTIyIGggMC40OCB2IC0zNi4yNCBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTUwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDIyMC4yLDMxNy4zNjIgaCA3Mi4zIHYgLTAuNDggaCAtNzIuMyB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE1MiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyMjAuMiwzNTMuMzYyIGggMC40OCB2IC0zNi4yNCBoIC0wLjQ4IHoiIC8+CiAgICAgIDx0ZXh0CiAgICAgICAgIGlkPSJ0ZXh0MTU4IgogICAgICAgICBzdHlsZT0iZm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjEwLjk4cHg7Zm9udC1mYW1pbHk6J1RpbWVzIE5ldyBSb21hbic7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpUaW1lc05ld1JvbWFuO3dyaXRpbmctbW9kZTpsci10YjtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLC0xLDI0Mi43NiwzMzcuNDYxNykiPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjE1NCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHg9IjAgNS40OTEwOTc5IDEwLjk4MjE5NiAxNC4wMzU3MzQgMTcuMDg5MjcyIDIxLjk2NTQ5Ij5wb2xpY3k8L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjE1NiIKICAgICAgICAgICB5PSIxMi4xMTk3MjQiCiAgICAgICAgICAgeD0iLTkuNDgwMTMyMSAtNS4xNzU5NzIgLTIuMTc0MDQwMSAyLjczNDAyIDUuODE5Mzk5OCAxMC42ODEzNDQgMTkuMjAyOTIzIDI0LjExMDk4MyAyOS41NzEzMzcgMzIuNjU2NzE1Ij5zdGF0ZW1lbnRzPC90c3Bhbj48L3RleHQ+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTYwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDI1Ni40NCwzODYuNjAyIGggLTMuMyBsIDAuMTgsMC42NiAyLjY0LDkuMjQgMC40OCwxLjYyIDAuNDgsLTEuNjIgMi43LC05LjI0IDAuMTgsLTAuNjYgaCAtMC42NiBsIC0wLjQ4LDAuMzYgLTIuNyw5LjI0IDAuOTYsMC4zIHYgLTAuMyBsIC0yLjY0LC05LjI0IC0wLjk2LDAuMyAwLjQ4LDAuMzYgaCAyLjY0IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE2MiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyNTYuNDQsMzg3LjYyMiBoIDIuNyB2IC0xLjAyIGggLTIuNyB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE2NCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyNTYuNDQsMzg3LjA4MiBoIC0yLjY0IGwgMi42NCw5LjI0IDIuNywtOS4yNCIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgxNjYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMjU2LjIsMzYyLjEyMiBoIDAuNDggdiAtMC4yNCBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTY4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDI1Ni4yLDM4Ni44NDIgaCAwLjQ4IHYgLTI0LjcyIGggLTAuNDggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgxNzAiCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTAyLjksMzY1LjU0MiAtMS44NiwtMC4wNiAtMS44LC0wLjMgLTEuNjgsLTAuNDIgLTEuNjgsLTAuNiAtMS41NiwtMC43OCAtMS41LC0wLjkgLTEuMzgsLTEuMDIgLTEuMjYsLTEuMTQgLTEuMiwtMS4zMiAtMS4wMiwtMS4zOCAtMC45LC0xLjUgLTAuNzIsLTEuNTYgLTAuNjYsLTEuNjIgLTAuNDIsLTEuNzQgLTAuMywtMS44IC0wLjA2LC0xLjg2IHYgLTI3IGwgMC4wNiwtMS44IDAuMywtMS44IDAuNDIsLTEuNzQgMC42NiwtMS42MiAwLjcyLC0xLjYyIDAuOSwtMS40NCAxLjAyLC0xLjM4IDEuMiwtMS4zMiAxLjI2LC0xLjE0IDEuMzgsLTEuMDIgMS41LC0wLjkgMS41NiwtMC43OCAxLjY4LC0wLjYgMS42OCwtMC40MiAxLjgsLTAuMyAxLjg2LC0wLjEyIGggNDkuNSBsIDEuODYsMC4xMiAxLjc0LDAuMyAxLjc0LDAuNDIgMS42OCwwLjYgMS41NiwwLjc4IDEuNSwwLjkgMS4zOCwxLjAyIDEuMjYsMS4xNCAxLjE0LDEuMzIgMS4wOCwxLjM4IDAuOSwxLjQ0IDAuNzIsMS42MiAwLjY2LDEuNjIgMC40MiwxLjc0IDAuMjQsMS44IDAuMTIsMS44IHYgMjcgbCAtMC4xMiwxLjg2IC0wLjI0LDEuOCAtMC40MiwxLjc0IC0wLjY2LDEuNjIgLTAuNzIsMS41NiAtMC45LDEuNSAtMS4wOCwxLjM4IC0xLjE0LDEuMzIgLTEuMjYsMS4xNCAtMS4zOCwxLjAyIC0xLjUsMC45IC0xLjU2LDAuNzggLTEuNjgsMC42IC0xLjc0LDAuNDIgLTEuNzQsMC4zIC0xLjg2LDAuMDYgaCAtNDkuNSIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgxNzIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTAyLjksMzY1LjMwMiAtMS44NiwtMC4wNiBoIDAuMDYgbCAtMS44LC0wLjMgLTEuNjgsLTAuNDIgaCAwLjA2IGwgLTEuNjgsLTAuNiAtMS41NiwtMC43OCAtMS41LC0wLjkgMC4wNiwwLjA2IC0xLjM4LC0xLjAyIC0xLjI2LC0xLjE0IC0xLjIsLTEuMzIgLTEuMDIsLTEuMzggMC4wNiwwLjA2IC0wLjksLTEuNSAtMC43MiwtMS41NiAtMC42NiwtMS42MiB2IDAuMDYgbCAtMC40MiwtMS43NCAtMC4zLC0xLjggdiAwLjA2IGwgLTAuMDYsLTEuODYgdiAtMjcgbCAwLjA2LC0xLjggMC4zLC0xLjggdiAwLjA2IGwgMC40MiwtMS43NCAwLjY2LC0xLjYyIDAuNzIsLTEuNjIgdiAwLjA2IGwgMC45LC0xLjQ0IGggLTAuMDYgbCAxLjAyLC0xLjM4IDEuMiwtMS4zMiB2IDAuMDYgbCAxLjI2LC0xLjE0IDEuMzgsLTEuMDIgaCAtMC4wNiBsIDEuNSwtMC45IDEuNTYsLTAuNzggdiAwLjA2IGwgMS42OCwtMC42IGggLTAuMDYgbCAxLjY4LC0wLjQyIDEuOCwtMC4zIDEuODYsLTAuMTIgaCAtMC4wNiA0OS41IGwgMS44NiwwLjEyIDEuNzQsMC4zIGggLTAuMDYgbCAxLjc0LDAuNDIgMS42OCwwLjYgLTAuMDYsLTAuMDYgMS41NiwwLjc4IDAuMjQsLTAuNDIgLTEuNTYsLTAuNzggLTEuNjgsLTAuNiBoIC0wLjA2IGwgLTEuNzQsLTAuNDIgLTEuNzQsLTAuMyAtMS44NiwtMC4xMiBIIDEwMi45IGwgLTEuODYsMC4xMiAtMS44LDAuMyBoIC0wLjA2IGwgLTEuNjgsMC40MiAtMS42OCwwLjYgaCAtMC4wNiBsIC0xLjU2LDAuNzggLTEuNSwwLjkgdiAwLjA2IGwgLTEuMzgsMS4wMiAtMS4yNiwxLjE0IEggOTAgbCAtMS4yLDEuMzIgLTEuMDIsMS4zOCB2IDAuMDYgbCAtMC45LDEuNDQgLTAuNzIsMS42MiAtMC42NiwxLjYyIC0wLjA2LDAuMDYgLTAuNDIsMS43NCAtMC4zLDEuOCB2IDAuMDYgbCAtMC4wNiwxLjggdiAyNyBsIDAuMDYsMS44NiAwLjMsMS44IHYgMC4wNiBsIDAuNDIsMS43NCBoIDAuMDYgbCAwLjY2LDEuNjIgMC43MiwxLjU2IHYgMC4wNiBsIDAuOSwxLjUgMS4wMiwxLjM4IDEuMiwxLjMyIDAuMDYsMC4wNiAxLjI2LDEuMTQgMS4zOCwxLjAyIDEuNSwwLjkgMS41NiwwLjc4IDAuMDYsMC4wNiAxLjY4LDAuNiAxLjY4LDAuNDIgaCAwLjA2IGwgMS44LDAuMyAxLjg2LDAuMDYiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTc0IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE2MC44NiwzMDQuOTQyIDEuNSwwLjkgMS4zOCwxLjAyIDEuMjYsMS4xNCAtMC4wNiwtMC4wNiAxLjE0LDEuMzIgMS4wOCwxLjM4IDAuOSwxLjQ0IHYgLTAuMDYgbCAwLjcyLDEuNjIgMC42NiwxLjYyIGggLTAuMDYgbCAwLjQyLDEuNzQgdiAtMC4wNiBsIDAuMjQsMS44IDAuMTIsMS44IHYgMjcgLTAuMDYgbCAtMC4xMiwxLjg2IC0wLjI0LDEuOCAtMC40MiwxLjc0IDAuMDYsLTAuMDYgLTAuNjYsMS42MiAtMC43MiwxLjU2IC0wLjksMS41IHYgLTAuMDYgbCAtMS4wOCwxLjM4IC0xLjE0LDEuMzIgSCAxNjUgbCAtMS4yNiwxLjE0IC0xLjM4LDEuMDIgdiAtMC4wNiBsIC0xLjUsMC45IC0xLjU2LDAuNzggaCAwLjA2IGwgLTEuNjgsMC42IC0xLjc0LDAuNDIgSCAxNTYgbCAtMS43NCwwLjMgLTEuODYsMC4wNiBoIC00OS41IHYgMC40OCBoIDQ5LjUgbCAxLjg2LC0wLjA2IGggMC4wNiBsIDEuNzQsLTAuMyAxLjc0LC0wLjQyIGggMC4wNiBsIDEuNjgsLTAuNiB2IC0wLjA2IGwgMS41NiwtMC43OCAxLjUsLTAuOSBoIDAuMDYgbCAxLjM4LC0xLjAyIDEuMjYsLTEuMTQgdiAtMC4wNiBsIDEuMTQsLTEuMzIgMS4wOCwtMS4zOCBoIDAuMDYgbCAwLjksLTEuNSB2IC0wLjA2IGwgMC43MiwtMS41NiAwLjY2LC0xLjYyIDAuNDIsLTEuNzQgdiAtMC4wNiBsIDAuMjQsLTEuOCAwLjEyLC0xLjg2IHYgLTI3LjA2IGwgLTAuMTIsLTEuOCAtMC4yNCwtMS44IC0wLjQyLC0xLjc0IHYgLTAuMDYgbCAtMC42NiwtMS42MiAtMC43MiwtMS42MiAtMC45LC0xLjQ0IC0wLjA2LC0wLjA2IC0xLjA4LC0xLjM4IC0xLjE0LC0xLjMyIC0xLjI2LC0xLjE0IC0xLjM4LC0xLjAyIC0wLjA2LC0wLjA2IC0xLjUsLTAuOSIgLz4KICAgICAgPHRleHQKICAgICAgICAgaWQ9InRleHQxODIiCiAgICAgICAgIHN0eWxlPSJmb250LXZhcmlhbnQ6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6MTAuOThweDtmb250LWZhbWlseTonVGltZXMgTmV3IFJvbWFuJzstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOlRpbWVzTmV3Um9tYW47d3JpdGluZy1tb2RlOmxyLXRiO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsLTEsMTA3LjIyLDM0My4wNDE3KSI+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMTc2IgogICAgICAgICAgIHk9IjAiCiAgICAgICAgICAgeD0iMCA0Ljg5NzA3OTkgMTAuNDA5MDQgMTUuOTIxIDE4LjkyMjkzMiAyMy44MjAwMTEgMjYuODk0NDExIDMyLjM1NDc2NyAzNy4yNzYwMDEiPmNvbnRhaW5lcjwvdHNwYW4+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMTc4IgogICAgICAgICAgIHk9IjEyLjExOTcyNCIKICAgICAgICAgICB4PSItNS41MTk2NDYyIC0wLjA1NDkwMDAwMiA0Ljc5NDk2NjIgMTAuMzE0NjEyIDEzLjM3NjkzNCAxOC44NDE2ODEgMjQuMzYxMzI2IDMyLjg3ODUxMyAzNy43OTk3NDcgNDMuMjY0NDk2Ij5kZXBsb3ltZW50PC90c3Bhbj48dHNwYW4KICAgICAgICAgICBpZD0idHNwYW4xODAiCiAgICAgICAgICAgeT0iMjQuMjk5ODM3IgogICAgICAgICAgIHg9IjkuNzIwNTk0NCAxMi43Nzg1MjQgMTguMjc0MDE0IDIzLjc2OTUwNSAyNi44Mjc0MzUiPnRvb2xzPC90c3Bhbj48L3RleHQ+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTg0IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE5NS40OCwzMzQuMDQyIHYgMy4zNiBsIDAuNjYsLTAuMTggOS4xOCwtMi43IDEuNjgsLTAuNDggLTEuNjgsLTAuNDggLTkuMTgsLTIuNjQgLTAuNjYsLTAuMTggdiAwLjY2IGwgMC4zNiwwLjQ4IDkuMTgsMi42NCAwLjMsLTAuOTYgaCAtMC4zIGwgLTkuMTgsMi43IDAuMywwLjk2IDAuMzYsLTAuNDggdiAtMi43IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE4NiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxOTUuNDgsMzM0LjA0MiBoIDEuMDIgdiAtMi42NCBoIC0xLjAyIHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTg4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE5NS45NiwzMzQuMDQyIHYgMi43IGwgOS4xOCwtMi43IC05LjE4LC0yLjY0IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE5MCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxNzkuNywzMzQuMjgyIGggMC4yNCB2IC0wLjQ4IGggLTAuMjQgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgxOTIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTc5Ljk0LDMzNC4yODIgaCAxNS43MiB2IC0wLjQ4IGggLTE1LjcyIHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMTk0IgogICAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDM1NS41LDM2NS41NDIgLTEuODYsLTAuMDYgLTEuOCwtMC4zIC0xLjc0LC0wLjQyIC0xLjYyLC0wLjYgLTEuNTYsLTAuNzggLTEuNSwtMC45IC0xLjM4LC0xLjAyIC0xLjMyLC0xLjE0IC0xLjE0LC0xLjMyIC0xLjAyLC0xLjM4IC0wLjksLTEuNSAtMC43OCwtMS41NiAtMC42LC0xLjYyIC0wLjQyLC0xLjc0IC0wLjMsLTEuOCAtMC4wNiwtMS44NiB2IC0yNyBsIDAuMDYsLTEuOCAwLjMsLTEuOCAwLjQyLC0xLjc0IDAuNiwtMS42MiAwLjc4LC0xLjYyIDAuOSwtMS40NCAxLjAyLC0xLjM4IDEuMTQsLTEuMzIgMS4zMiwtMS4xNCAxLjM4LC0xLjAyIDEuNSwtMC45IDEuNTYsLTAuNzggMS42MiwtMC42IDEuNzQsLTAuNDIgMS44LC0wLjMgMS44NiwtMC4xMiBIIDQwNSBsIDEuOCwwLjEyIDEuOCwwLjMgMS43NCwwLjQyIDEuNjIsMC42IDEuNjIsMC43OCAxLjQ0LDAuOSAxLjM4LDEuMDIgMS4zMiwxLjE0IDEuMTQsMS4zMiAxLjAyLDEuMzggMC45LDEuNDQgMC43OCwxLjYyIDAuNiwxLjYyIDAuNDgsMS43NCAwLjI0LDEuOCAwLjEyLDEuOCB2IDI3IGwgLTAuMTIsMS44NiAtMC4yNCwxLjggLTAuNDgsMS43NCAtMC42LDEuNjIgLTAuNzgsMS41NiAtMC45LDEuNSAtMS4wMiwxLjM4IC0xLjE0LDEuMzIgLTEuMzIsMS4xNCAtMS4zOCwxLjAyIC0xLjQ0LDAuOSAtMS42MiwwLjc4IC0xLjYyLDAuNiAtMS43NCwwLjQyIC0xLjgsMC4zIC0xLjgsMC4wNiBoIC00OS41IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDE5NiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzNTUuNSwzNjUuMzAyIC0xLjg2LC0wLjA2IGggMC4wNiBsIC0xLjgsLTAuMyAtMS43NCwtMC40MiBoIDAuMDYgbCAtMS42MiwtMC42IC0xLjU2LC0wLjc4IC0xLjUsLTAuOSAwLjA2LDAuMDYgLTEuMzgsLTEuMDIgLTEuMzIsLTEuMTQgLTEuMTQsLTEuMzIgLTEuMDIsLTEuMzggMC4wNiwwLjA2IC0wLjksLTEuNSAtMC43OCwtMS41NiAtMC42LC0xLjYyIHYgMC4wNiBsIC0wLjQyLC0xLjc0IC0wLjMsLTEuOCB2IDAuMDYgbCAtMC4wNiwtMS44NiB2IC0yNyBsIDAuMDYsLTEuOCAwLjMsLTEuOCB2IDAuMDYgbCAwLjQyLC0xLjc0IDAuNiwtMS42MiAwLjc4LC0xLjYyIHYgMC4wNiBsIDAuOSwtMS40NCBoIC0wLjA2IGwgMS4wMiwtMS4zOCAxLjE0LC0xLjMyIHYgMC4wNiBsIDEuMzIsLTEuMTQgMS4zOCwtMS4wMiBoIC0wLjA2IGwgMS41LC0wLjkgMS41NiwtMC43OCB2IDAuMDYgbCAxLjYyLC0wLjYgaCAtMC4wNiBsIDEuNzQsLTAuNDIgMS44LC0wLjMgMS44NiwtMC4xMiBIIDM1NS41IDQwNSBsIDEuOCwwLjEyIDEuOCwwLjMgaCAtMC4wNiBsIDEuNzQsMC40MiAxLjYyLDAuNiB2IC0wLjA2IGwgMS42MiwwLjc4IGggLTAuMDYgbCAwLjI0LC0wLjQyIC0xLjYyLC0wLjc4IC0xLjYyLC0wLjYgaCAtMC4wNiBsIC0xLjc0LC0wLjQyIC0xLjgsLTAuMyAtMS44LC0wLjEyIEggMzU1LjUgbCAtMS44NiwwLjEyIC0xLjgsMC4zIGggLTAuMDYgbCAtMS43NCwwLjQyIC0xLjYyLDAuNiBoIC0wLjA2IGwgLTEuNTYsMC43OCAtMS41LDAuOSB2IDAuMDYgbCAtMS4zOCwxLjAyIC0xLjMyLDEuMTQgaCAtMC4wNiBsIC0xLjE0LDEuMzIgLTEuMDIsMS4zOCB2IDAuMDYgbCAtMC45LDEuNDQgLTAuNzgsMS42MiBoIC0wLjA2IGwgLTAuNiwxLjYyIHYgMC4wNiBsIC0wLjQyLDEuNzQgLTAuMywxLjggdiAwLjA2IGwgLTAuMDYsMS44IHYgMjcgbCAwLjA2LDEuODYgMC4zLDEuOCB2IDAuMDYgbCAwLjQyLDEuNzQgMC42LDEuNjIgMC4wNiwwLjA2IDAuNzgsMS41NiAwLjksMS41IDEuMDIsMS4zOCAxLjE0LDEuMzIgMC4wNiwwLjA2IDEuMzIsMS4xNCAxLjM4LDEuMDIgMS41LDAuOSAxLjU2LDAuNzggMC4wNiwwLjA2IDEuNjIsMC42IDEuNzQsMC40MiBoIDAuMDYgbCAxLjgsMC4zIDEuODYsMC4wNiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgxOTgiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gNDEzLjQ2LDMwNC45NDIgMS40NCwwLjkgMS4zOCwxLjAyIDEuMzIsMS4xNCAtMC4wNiwtMC4wNiAxLjE0LDEuMzIgMS4wMiwxLjM4IDAuOSwxLjQ0IHYgLTAuMDYgbCAwLjc4LDEuNjIgaCAtMC4wNiBsIDAuNiwxLjYyIDAuNDgsMS43NCB2IC0wLjA2IGwgMC4yNCwxLjggMC4xMiwxLjggdiAyNyAtMC4wNiBsIC0wLjEyLDEuODYgLTAuMjQsMS44IC0wLjQ4LDEuNzQgdiAtMC4wNiBsIC0wLjYsMS42MiBoIDAuMDYgbCAtMC43OCwxLjU2IC0wLjksMS41IHYgLTAuMDYgbCAtMS4wMiwxLjM4IC0xLjE0LDEuMzIgaCAwLjA2IGwgLTEuMzIsMS4xNCAtMS4zOCwxLjAyIHYgLTAuMDYgbCAtMS40NCwwLjkgaCAwLjA2IGwgLTEuNjIsMC43OCAtMS42MiwwLjYgLTEuNzQsMC40MiBoIDAuMDYgbCAtMS44LDAuMyAtMS44LDAuMDYgaCAtNDkuNSB2IDAuNDggSCA0MDUgbCAxLjgsLTAuMDYgaCAwLjA2IGwgMS44LC0wLjMgMS43NCwtMC40MiBoIDAuMDYgbCAxLjYyLC0wLjYgdiAtMC4wNiBsIDEuNjIsLTAuNzggMS40NCwtMC45IGggMC4wNiBsIDEuMzgsLTEuMDIgMS4zMiwtMS4xNCB2IC0wLjA2IGwgMS4xNCwtMS4zMiAxLjAyLC0xLjM4IGggMC4wNiBsIDAuOSwtMS41IDAuNzgsLTEuNTYgdiAtMC4wNiBsIDAuNiwtMS42MiAwLjQ4LC0xLjc0IHYgLTAuMDYgbCAwLjI0LC0xLjggMC4xMiwtMS44NiB2IC0yNy4wNiBsIC0wLjEyLC0xLjggLTAuMjQsLTEuOCAtMC40OCwtMS43NCB2IC0wLjA2IGwgLTAuNiwtMS42MiAtMC43OCwtMS42MiAtMC45LC0xLjQ0IC0wLjA2LC0wLjA2IC0xLjAyLC0xLjM4IC0xLjE0LC0xLjMyIC0xLjMyLC0xLjE0IC0xLjM4LC0xLjAyIC0wLjA2LC0wLjA2IC0xLjQ0LC0wLjkiIC8+CiAgICAgIDx0ZXh0CiAgICAgICAgIGlkPSJ0ZXh0MjA2IgogICAgICAgICBzdHlsZT0iZm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjEwLjk4cHg7Zm9udC1mYW1pbHk6J1RpbWVzIE5ldyBSb21hbic7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpUaW1lc05ld1JvbWFuO3dyaXRpbmctbW9kZTpsci10YjtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLC0xLDM2Ni40OCwzNDcuNTQxNykiPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjIwMCIKICAgICAgICAgICB5PSIwIgogICAgICAgICAgIHg9IjAgNS40NjQ3NDYgMTAuOTg0MzkyIDE0LjAxMTU3OCAxNy4wMzg3NjUgMjEuOTU5OTk5Ij5wb2xpY3k8L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjIwMiIKICAgICAgICAgICB5PSIxMi4xMTk3MjQiCiAgICAgICAgICAgeD0iLTE3Ljk5OTUxNCAtMTMuMDkyNTUyIC03LjYzMjE5NzkgMC45NDIwODQwMSA0LjAyNjM2NjIgOS40ODY3MjAxIDEyLjU0OTA0MiAxNi44MDcwODcgMTkuODY5NDA4IDIzLjU1NzU5IDI4LjQ2NDU1MiAzMS40NjY0ODQgMzQuNTI4ODA1IDQwLjA1MDY0OCI+YWRtaW5pc3RyYXRpb248L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjIwNCIKICAgICAgICAgICB5PSIyNC4yOTk4MzciCiAgICAgICAgICAgeD0iMy4wNjAxMjYxIDYuMTE4MDU1OCAxMS42MTM1NDYgMTcuMTA5MDM1IDIwLjE2Njk2NSI+dG9vbHM8L3RzcGFuPjwvdGV4dD4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyMDgiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzEyLjk2LDMzNC4wNDIgdiAtMy4zIGwgLTAuNjYsMC4xOCAtOS4xOCwyLjY0IC0xLjYyLDAuNDggMS42MiwwLjQ4IDkuMTgsMi43IDAuNjYsMC4xOCB2IC0wLjY2IGwgLTAuMzYsLTAuNDggLTkuMTgsLTIuNyAtMC4zLDAuOTYgaCAwLjMgbCA5LjE4LC0yLjY0IC0wLjMsLTAuOTYgLTAuMzYsMC40OCB2IDIuNjQiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjEwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMxMS45NCwzMzYuNzQyIGggMS4wMiB2IC0yLjcgaCAtMS4wMiB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDIxMiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMTIuNDgsMzM0LjA0MiB2IC0yLjY0IGwgLTkuMTgsMi42NCA5LjE4LDIuNyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyMTQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzEyLjc4LDMzNC4yODIgaCAxNS45NiB2IC0wLjQ4IGggLTE1Ljk2IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjE2IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE5MC45OCw0MjguNjAyIHYgMy4zIGwgMC42NiwtMC4xOCA5LjE4LC0yLjY0IDEuNjIsLTAuNDggLTEuNjIsLTAuNDggLTkuMTgsLTIuNyAtMC42NiwtMC4xOCB2IDAuNjYgbCAwLjM2LDAuNDggOS4xOCwyLjcgMC4zLC0wLjk2IGggLTAuMyBsIC05LjE4LDIuNjQgMC4zLDAuOTYgMC4zNiwtMC40OCB2IC0yLjY0IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDIxOCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0iTSAxOTAuOTgsNDI4LjYwMiBIIDE5MiB2IC0yLjcgaCAtMS4wMiB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDIyMCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxOTEuNDYsNDI4LjYwMiB2IDIuNjQgbCA5LjE4LC0yLjY0IC05LjE4LC0yLjciIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjIyIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE2Ni4yLDU0NS44NDIgaCAzMS45OCB2IC0wLjQ4IEggMTY2LjIgWiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyMjQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTY2LjIsNTQ1LjYwMiBoIDAuNDggdiAtMTE3LjI0IGggLTAuNDggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyMjYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTY2LjQ0LDQyOC44NDIgaCAyNC43MiB2IC0wLjQ4IGggLTI0LjcyIHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjI4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMyMS45Niw1NDUuNjAyIHYgLTMuMyBsIC0wLjY2LDAuMTggLTkuMTgsMi42NCAtMS42OCwwLjQ4IDEuNjgsMC40OCA5LjE4LDIuNjQgMC42NiwwLjE4IHYgLTAuNjYgbCAtMC4zNiwtMC40OCAtOS4xOCwtMi42NCAtMC4zLDAuOTYgaCAwLjMgbCA5LjE4LC0yLjY0IC0wLjMsLTAuOTYgLTAuMzYsMC40OCB2IDIuNjQiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjMwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMyMC45NCw1NDguMjQyIGggMS4wMiB2IC0yLjY0IGggLTEuMDIgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyMzIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzIxLjQ4LDU0NS42MDIgdiAtMi42NCBsIC05LjE4LDIuNjQgOS4xOCwyLjY0IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDIzNCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMTQuNzYsNDI4Ljg0MiBoIDMxLjk4IHYgLTAuNDggaCAtMzEuOTggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyMzYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzQ2LjI2LDU0NS44NDIgaCAwLjQ4IHYgLTExNy4yNCBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjM4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMyMS43OCw1NDUuODQyIGggMjQuNzIgdiAtMC40OCBoIC0yNC43MiB6IiAvPgogICAgICA8dGV4dAogICAgICAgICBpZD0idGV4dDI0OCIKICAgICAgICAgc3R5bGU9ImZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc2l6ZToxMC45OHB4O2ZvbnQtZmFtaWx5OidUaW1lcyBOZXcgUm9tYW4nOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246VGltZXNOZXdSb21hbjt3cml0aW5nLW1vZGU6bHItdGI7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgxLDAsMCwtMSwyMTYuMzYsNDkyLjYyMTcpIj48dHNwYW4KICAgICAgICAgICBpZD0idHNwYW4yNDAiCiAgICAgICAgICAgeT0iMCIKICAgICAgICAgICB4PSIwIDUuNDYwMzUzOSAxMC45OCAxNC4wNDEyMjQgMTcuMTAyNDQ4IDIxLjk4NjM1MyAyNy40ODUxMzYgMzAuMTg1MTE4IDM1LjY4MzkwMyA0MC41Njc4MDYgNDUuNDUxNzEgNDguNTEyOTM2IDUyLjc5MjkzOCA1NS44NTQxNiA2MS4zMTQ1MTQgNjYuODM0MTYgNjkuNTk0NTM2IDc0LjQ3ODQzOSA3OS45Mzg3ODkiPnBvbGljeSBkZWNpc2lvbiBhbmQ8L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjI0MiIKICAgICAgICAgICB5PSIxMi4xODAxMTQiCiAgICAgICAgICAgeD0iLTExLjQ1OTgyNiAtNi41Mzg1OSAtMS4wNzgyMzYgMi41ODM1OTQxIDguMDc5MDg0NCAxMS43NDA5MTQgMTYuNjIxNTI1IDIxLjUwMjEzNCAzMC4wNTAwNjQgMzQuOTMwNjc2IDQwLjQyNjE2MyA0My40ODQwOTMgNDYuMTg0MDc0IDUwLjUwMjUxIDU1Ljk2Mjg2NCA2MS40NTgzNTUgNjYuMzM4OTY2IDcxLjgzNDQ1NyA3Ny4zMjk5NDEgODAuMzg3ODcxIDg0LjA0OTcwNiA4OC45MzAzMTMgOTMuODUxNTQ3Ij5lbmZvcmNlbWVudCBzdWJjb250cmFjdDwvdHNwYW4+PHRzcGFuCiAgICAgICAgICAgaWQ9InRzcGFuMjQ0IgogICAgICAgICAgIHk9IjIwMi40OTk3NiIKICAgICAgICAgICB4PSItNjcuMzE5NDgxIC02MS44MzA1NzggLTU2LjM0MTY3NSAtNTMuMjkwMzMzIC01MC4yMzg5OTEgLTQ1LjM2NDk2NyAtMzkuODc2MDY0IC0zNy4xMTU2OTIgLTMyLjI0MTY3MyAtMjYuNzUyNzY5IC0yMS4yNjM4NjggLTE3LjYwODYyNSAtMTQuNTU3Mjg0IC05LjA2ODM4MjMgLTMuNTc5NDc5OSAwLjA3NTc2MjAwNCA0Ljk0OTc4MzggOC4wMDExMjYzIDExLjA1MjQ2OCAxNi41NDEzNyI+cG9saWN5IGNvbmZpZ3VyYXRpb248L3RzcGFuPjx0c3BhbgogICAgICAgICAgIGlkPSJ0c3BhbjI0NiIKICAgICAgICAgICB5PSIyMTQuNjc5ODYiCiAgICAgICAgICAgeD0iLTQ3LjkzOTc3NyAtNDMuNjU4Njc2IC0zOC4xOTgzMjIgLTMyLjY5ODQ0MSAtMjcuODEzNDM4IC0yMi4zMTM1NTcgLTE2Ljg1MzIwMyAtMTMuNzkwODggLTEwLjEyNDY1OCAtNS4yMzk2NTYgLTAuMzU0NjU0MDEiPnN1YmNvbnRyYWN0PC90c3Bhbj48L3RleHQ+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjUwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE5OS45Miw1MzIuMTAyIHYgMy4zIGwgMC42NiwtMC4xOCAxMC45MiwtMy4xMiAtMTAuOTIsLTMuMTIgLTAuNjYsLTAuMTggdiAwLjY2IGwgMC4zNiwwLjQ4IDkuMjQsMi42NCAwLjMsLTAuOTYgaCAtMC4zIGwgLTkuMjQsMi42NCAwLjMsMC45NiAwLjM2LC0wLjQ4IHYgLTIuNjQiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjUyIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE5OS45Miw1MzIuMTAyIGggMS4wMiB2IC0yLjY0IGggLTEuMDIgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyNTQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMjAwLjQsNTMyLjEwMiB2IDIuNjQgbCA5LjI0LC0yLjY0IC05LjI0LC0yLjY0IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI1NiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAyMDQuNjYsNDQyLjM0MiBoIDQuMiB2IC0wLjQ4IGggLTQuMiB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI1OCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxODguNyw0NDIuMzQyIGggNC4yIHYgLTAuNDggaCAtNC4yIHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjYwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE4OC43LDQ0Ni4wNjIgaCAwLjQ4IHYgLTMuOTYgaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI2MiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxODguNyw0NjEuMTgyIGggMC40OCB2IC04LjU4IGggLTAuNDggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyNjQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTg4LjcsNDc2LjMwMiBoIDAuNDggdiAtOC41OCBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjY2IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE4OC43LDQ5MS4zNjIgaCAwLjQ4IHYgLTguNTIgaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI2OCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxODguNyw1MDYuNDgyIGggMC40OCB2IC04LjU4IGggLTAuNDggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyNzAiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMTg4LjcsNTIxLjYwMiBoIDAuNDggdiAtOC41OCBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjcyIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE4OC43LDUzMi4zNDIgaCAwLjQ4IHYgLTQuMjYgaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI3NCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAxODguOTQsNTMyLjM0MiBoIDMuOTYgdiAtMC40OCBoIC0zLjk2IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjc2IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDE5NS45LDUzMi4zNDIgaCA0LjI2IHYgLTAuNDggaCAtNC4yNiB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI3OCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMTIuOSw0NDIuMTAyIHYgLTMuMyBsIC0wLjY2LDAuMTggLTkuMTgsMi42NCAtMS42OCwwLjQ4IDEuNjgsMC40OCA5LjE4LDIuNjQgMC42NiwwLjE4IHYgLTAuNjYgbCAtMC4zNiwtMC40OCAtOS4xOCwtMi42NCAtMC4zLDAuOTYgaCAwLjMgbCA5LjE4LC0yLjY0IC0wLjMsLTAuOTYgLTAuMzYsMC40OCB2IDIuNjQiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjgwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMxMS44OCw0NDQuNzQyIGggMS4wMiB2IC0yLjY0IGggLTEuMDIgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyODIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzEyLjQyLDQ0Mi4xMDIgdiAtMi42NCBsIC05LjE4LDIuNjQgOS4xOCwyLjY0IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI4NCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMDMuOTYsNTMyLjM0MiBoIDQuMjYgdiAtMC40OCBoIC00LjI2IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjg2IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMxOS45Miw1MzIuMzQyIGggNC4yNiB2IC0wLjQ4IGggLTQuMjYgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyODgiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzIzLjcsNTMyLjEwMiBoIDAuNDggdiAtMy45NiBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjkwIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMyMy43LDUyMS42MDIgaCAwLjQ4IHYgLTguNTggaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI5MiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMjMuNyw1MDYuNDgyIGggMC40OCB2IC04LjU4IGggLTAuNDggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgyOTQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzIzLjcsNDkxLjM2MiBoIDAuNDggdiAtOC41MiBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMjk2IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMyMy43LDQ3Ni4zMDIgaCAwLjQ4IHYgLTAuMjQgaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDI5OCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMjMuNyw0NzYuMDYyIGggMC40OCB2IC04LjM0IGggLTAuNDggeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgzMDAiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzIzLjcsNDYxLjE4MiBoIDAuNDggdiAtMC4yNCBoIC0wLjQ4IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzAyIgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMyMy43LDQ2MC45NDIgaCAwLjQ4IHYgLTguMzQgaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDMwNCIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMjMuNyw0NDYuMDYyIGggMC40OCB2IC00LjIgaCAtMC40OCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDMwNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIKICAgICAgICAgZD0ibSAzMTkuOTIsNDQyLjM0MiBoIDQuMDIgdiAtMC40OCBoIC00LjAyIHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzA4IgogICAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIgogICAgICAgICBkPSJtIDMxNi42OCw0NDIuMzQyIGggMC4yNCB2IC0wLjQ4IGggLTAuMjQgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgaWQ9InBhdGgzMTAiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiCiAgICAgICAgIGQ9Im0gMzEyLjcyLDQ0Mi4zNDIgaCAzLjk2IHYgLTAuNDggaCAtMy45NiB6IiAvPgogIDwvZz4KPC9zdmc+Cg==" alt="authz 1"/>
</div>
<div class="title">Figure 1-1 Policy Configuration and Enforcement Subcontracts</div>
</div>
</div>
<div class="sect2">
<h3 id="terminology"><a class="anchor" href="#terminology"></a>1.2. Terminology</h3>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 20%;"/>
<col style="width: 80%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>Jakarta EE application</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of Jakarta EE modules that must share a common principal-to-role-mapping</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>deploy (e.g. an application)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sequence of operations comprised of <em>completing the declaration</em> of an application or module’s dependencies on
container facilities, <em>binding the declared dependencies</em> to specific
mechanisms or features of an operational environment, <em>installing or distributing</em>
the application software and related configuration
information to one or more application servers, and <em>activating</em> the
software such that it is available to service requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>undeploy (e.g. an application)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The combined process of <em>stopping</em> an application and then <em>removing</em> the software and configuration information
corresponding to the application or a module of the application from one or more application servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>redeploy (e.g. a module of an application)</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <em>repackaging</em> of an application or module
to accommodate modification of implementation and or of declared
dependencies and or of the binding of declared dependencies to
mechanisms, combined with <em>undeploying</em> a corresponding module or
application, followed by <em>redistribution</em> and <em>activation</em> of the modified
software and or configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>grant</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of assigning to entities the right to
perform a set of activities that is the subject of an authorization
decision (that is, a permission).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>hostname</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a logical host of an application
server, as may be used in the composition of a servlet policy context
identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a id="a90"></a> <strong>JAAS Policy interface</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>javax.security.auth.Policy</code> abstract class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a id="a92"></a> <strong>JAAS Policy provider</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An instance of a class that implements the JAAS Policy interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>permission</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents a set of activities (a set of one or more operations on some set of
one or more resources) that is the target of an authorization decision.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>Policy Context</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The collection of policy statements within a
policy provider that effect access to the resources of one or more
deployed modules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>Policy Context Identifier</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique string value that identifies the
collection of policy statements corresponding to a policy context within
a policy provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>policy statement</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A representation of the circumstances under
which the set of activities represented by a permission are to be
authorized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>excluded policy statement</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A representation of the decision not to
authorize a set of activities represented by a permission independent of
factors that might otherwise effect the outcome of the decision.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>unchecked policy statement</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A representation of the decision to authorize
a set of activities represented by a permission independent of factors
that might otherwise effect the outcome of the decision.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>principal</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>(Java) A security attribute acquired as a result of authentication by entities that perform activities.</p>
</li>
<li>
<p>An entity that performs activities.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>principal-to-role mapping</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The act of granting to principals the set of
permissions that comprise a role.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>privilege</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A security attribute that may be assigned to
entities and that may be used to differentiate an entity’s right to
perform activities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>Provider</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The software component that contains
implementations of the policy configuration, and policy decision classes
defined by this specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>reference-to-role mapping</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The component-scoped transformation of
component embedded role aliases into application-scoped role names. The
transformation is defined at application deployment and perhaps modified
by policy management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><strong>role</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>A named set of permissions that may be granted to principals.</p>
</li>
<li>
<p>A principal that has been granted permissions or that is used as a privilege.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="a120"><a class="anchor" href="#a120"></a>1.3. Assumptions</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The contract defined in this specifiction must be applicable to Jakarta EE 9 and future versions of the Jakarta EE platform.</p>
</li>
<li>
<p>We are defining a contract to be satisfied by “standard” Java SE Policy providers.</p>
</li>
<li>
<p>Jakarta EE 9 platforms will be required to implement the contract defined by this specification. This contract will be a
required element of subsequent versions of the Jakarta EE platform.</p>
</li>
<li>
<p>We do not expect to add new decision interfaces to Policy (JAAS or Java SE) to accomplish the work of this specification.</p>
</li>
<li>
<p>Jakarta EE application roles will be modeled as collections of permissions that are granted to principals.</p>
</li>
<li>
<p>A principal that is in a role is granted all the permissions of the collection. However, the converse is not true.
That is, a principal that has been granted all the permissions of a role is not necessarily in the role (as determined by
<code>isCallerInRole()</code>).</p>
</li>
<li>
<p>This contract will shift the responsibility for performing all of the authorization decisions pertaining to a Jakarta
EE application to the policy provider. Accordingly, the following mappings will become the responsibility of the provider.</p>
<div class="ulist">
<ul>
<li>
<p>permissions to roles</p>
</li>
<li>
<p>principals to roles</p>
</li>
<li>
<p>(Application embedded) role references to role names</p>
</li>
</ul>
</div>
</li>
<li>
<p>It is assumed that there are providers that are unable to enumerate all the permissions that pertain to a
subject/protection domain before returning from <code>Policy.getPermissions()</code>.</p>
</li>
<li>
<p>Any interfaces that this contract defines to be used by containers and or container deployment tools to create policy
statements within a policy provider must be compatible with a module-at-a-time application deployment mechanism.</p>
</li>
<li>
<p>Where the Jakarta Enterprise Beans or Jakarta Servlet specifications are incomplete or ambiguous in their
specification of authorization functionality, the contract defined in this document may require additional semantics.
Additional or clarifying semantics will only be adopted by this specification based on their acceptance by the
committers of the corresponding component specification.</p>
</li>
<li>
<p>The Jakarta Enterprise Beans policy decisions performed by providers may require access to the arguments of the
Enterprise Bean invocation and or (for entity beans) the container managed Enterprise Bean instance state.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="a136"><a class="anchor" href="#a136"></a>1.4. Requirements</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This contract must support providers that are unable to determine, before returning from <code>Policy.getPermissions()</code>,
all the permissions that pertain to a subject/protection domain.</p>
</li>
<li>
<p>Each Policy provider that satisfies this contract must perform or delegate to another provider all the permission
evaluations requested via its interface in the JRE; not just those made by the container to implement
Jakarta EE security functionality.</p>
</li>
<li>
<p>Each provider must export interfaces (defined by this contract) for use by containers and or container deployment
tools to create policy statements within the policy store of the provider. These interfaces must be used when an
application or module is deployed in a container.</p>
</li>
<li>
<p>Each provider must satisfy all of the authorization requirements of the Jakarta Enterprise Beans and
Jakarta Servlet specifications corresponding to the target platform. The provider is not required to
satisfy the authorization requirements pertaining to any of the above specifications for which the target platform
is not a compatible implementation.</p>
</li>
<li>
<p>The evaluation of a permission corresponding to a resource must identify the context of the resource&#8217;s use such that
different policy can be applied to a resource used in different contexts (that is, applications or instances of an application).</p>
</li>
<li>
<p>In the case of Jakarta Servlet resources, the provider must be able to associate a distinct policy context with each
context root (including context roots created to support virtual hosting) hosted by the server.</p>
</li>
<li>
<p>In protecting Jakarta Servlet resources, a provider must select the policy statements that apply to a request according to
the constraint matching and servlet mapping rules defined by the Jakarta Servlet specification.</p>
</li>
<li>
<p>To support this contract in a Jakarta Servlet environment, a container or its deployment tools must create policy
statements as necessary to support Servlet’s “default role-ref semantic”.</p>
</li>
<li>
<p>For a container to support this contract, it must execute in an environment controlled by a Java SE <code>SecurityManager</code>.
Containers may also execute in environments that are not controlled by a Java SE SecurityManager.
<a href="#a154">Running Without a SecurityManager</a> defines changes to this contract that apply to containers running without a Java SE <code>SecurityManager</code>.</p>
</li>
<li>
<p>Policy providers must perform the permission evaluations corresponding to container pre-dispatch decisions and
application embedded privilege tests (i.e <code>isUserInRole</code> and <code>isCallerInRole</code>) without requiring that containers
establish particular values for any of the non-principal attributes of the one or more
<code>java.security.ProtectionDomain</code> objects that are the subject of the evaluation.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="non-requirements"><a class="anchor" href="#non-requirements"></a>1.5. Non Requirements</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This specification does not require that containers
support server-side authentication module plug-ins for the purpose of
populating subjects with authorization provider specific principals.</p>
</li>
<li>
<p>This specification does not require that subjects be
attributed with role principals as a result of authentication.</p>
</li>
<li>
<p>This specification does not define or mandate a
specific policy language to be used by providers. Each provider must
define its own syntax, mechanisms, and administrative interfaces for
granting permissions to principals.</p>
</li>
<li>
<p>The specification does not require that providers
support a policy syntax for granting to principals roles as collections
of permissions.</p>
</li>
<li>
<p>Although the specification is focused on defining
permissions and policy for use by Jakarta EE containers, we make no
restrictions on the use of this information by other containers or
applications, or on support by containers or providers of other
permissions or policy.</p>
</li>
<li>
<p>It is not the intent of this specification to extend or
modify the Jakarta EE authorization model to be equivalent to standard RBAC
models for access control.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="a154"><a class="anchor" href="#a154"></a>1.6. Running Without a SecurityManager</h3>
<div class="paragraph">
<p>The following list defines changes to this contract that apply to containers running without a Java SE
<code>SecurityManager</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The restrictions defined in <a href="#a549">Permission to Configure Policy</a> need not be enforced.
Also, the containers of the application server must not be denied permission to perform any operation that would have been
permitted in the presence of a <code>SecurityManager</code>.</p>
</li>
<li>
<p>Such containers are not required (before dispatching a call) to associate an <code>AccessControlContext</code> with the call
thread (as otherwise required by <a href="#a569">Pre-dispatch Decision</a> and <a href="#a616">Jakarta Enterprise Beans Pre-dispatch Decision</a>).</p>
</li>
<li>
<p>When performing the operations defined in <a href="#a727">Checking AccessControlContext Independent Grants</a> and in <a href="#a736">Checking the Caller for a Permission</a>, such containers must not employ the
<code>SecurityManager.checkPermission</code> techniques defined in these sections.</p>
</li>
<li>
<p>When using the <code>AccessController.checkPermission</code> technique of <a href="#a736">Checking the Caller for a Permission</a>, the calling container must ensure that
the principals of the caller are contained in the <code>AccessControlContext</code> associated with the thread on
which the call to <code>checkPermission</code> is made.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="a160"><a class="anchor" href="#a160"></a>1.7. Servlet or EJB only containers</h3>
<div class="paragraph">
<p>The requirements of this specification that must be satisfied by a target platform that is a compatible
implementation of one but not both of the Jakarta Servlet and Jakarta Enterprise Beans specifications
are reduced as described in the next two sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="servlet-only-containers"><a class="anchor" href="#servlet-only-containers"></a>1.8. Servlet Only Containers</h3>
<div class="paragraph">
<p>A platform that is a compatible implementation of the Jakarta Servlet specification and that is not a compatible
implementation of the Jakarta Enterprise Beans specification must satisfy all of the requirements of this
specification with the following exceptions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the policy configuration requirements defined in <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a> and in <a href="#a516">Translating Jakarta Enterprise Beans Deployment Descriptors</a></p>
</li>
<li>
<p>the policy enforcement requirements defined in <a href="#a614">Policy Enforcement by Jakarta Enterprise Beans Containers</a> and <a href="#a622">Provider Support for Jakarta Enterprise Beans Policy Enforcement</a></p>
</li>
<li>
<p>the policy context handler requirements defined in <a href="#a719">SOAPMessage Policy Context Handler</a>, and <a href="#a723">EnterpriseBean Policy Context Handler</a>, and <a href="#a725">Jakarta Enterprise Beans Arguments Policy Context Handler</a></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ejb-only-containers"><a class="anchor" href="#ejb-only-containers"></a>1.9. EJB Only Containers</h3>
<div class="paragraph">
<p>A platform that is is a compatible implementation of the Jakarta Enterprise beans specification and that is not a compatible
implementation of the Jakara Servlet specification must satisfy all of the requirements of this specification with the following
exceptions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the policy configuration requirements defined in <a href="#a271">Servlet Policy Context Identifiers</a> and in <a href="#a276">Translating Servlet Deployment Descriptors</a></p>
</li>
<li>
<p>the policy enforcement requirements defined in <a href="#a558">Policy Enforcement by Servlet Containers</a> and <a href="#a574">Provider Support for Servlet Policy Enforcement</a></p>
</li>
<li>
<p>the policy context handler requirements defined in <a href="#a721">HttpServletRequest Policy Context Handler</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a173"><a class="anchor" href="#a173"></a>2. Provider Configuration Subcontract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="#a173">Provider Configuration Subcontract</a> defines the requirements placed on providers
and containers such that Policy providers may be integrated with
containers.</p>
</div>
<div class="sect2">
<h3 id="a175"><a class="anchor" href="#a175"></a>2.1. Policy Implementation Class</h3>
<div class="paragraph">
<p>The contract defined by this specification
has been designed to work in Java SE 8 or later Java Standard Edition
environments with the default <code>java.security.Policy</code> implementation
class.</p>
</div>
<div class="paragraph">
<p>Java platforms provide standard security
properties whose values may be defined to cause replacement of the
default system Policy implementation classes. The security property, “
<code>policy.provider</code> ”, may be used to replace the default
<code>java.security.Policy</code> implementation class. Similarly, the security
property, &#8220;auth.policy.provider&#8221;, may be used to replace the default
<code>javax.security.auth.Policy</code> implementation class. These properties are
defined in the Java security properties file, and replacement is
accomplished by setting their value to the fully qualified name of the
desired Policy implementation class. The contract defined in this
specification, is dependent on the Policy replacement mechanisms of the
target Java environment. An application server that supports this
contract must allow replacement of the top level <code>java.security.Policy</code>
object used by every JRE of the containers of the application server.</p>
</div>
</div>
<div class="sect2">
<h3 id="permission-implementation-classes"><a class="anchor" href="#permission-implementation-classes"></a>2.2. Permission Implementation Classes</h3>
<div class="paragraph">
<p>This contract defines a Java standard
extension package, <code>jakarta.security.jacc</code>, that contains (among other
things) <code>Permission</code> classes to be used by containers in their access
decisions.</p>
</div>
</div>
<div class="sect2">
<h3 id="policy-configuration-interface"><a class="anchor" href="#policy-configuration-interface"></a>2.3. Policy Configuration Interface</h3>
<div class="paragraph">
<p>The <code>jakarta.security.jacc</code> package defines an
abstract factory class that implements a static method that uses a
system property to find and instantiate a provider specific factory
implementation class. The abstract factory class is
<code>jakarta.security.jacc.PolicyConfigurationFactory</code>, the static method is
<code>getPolicyConfigurationFactory</code>, and the system property is
<code>jakarta.security.jacc.PolicyConfigurationFactory.provider</code> .</p>
</div>
<div class="paragraph">
<p>The abstract factory class also defines an
abstract public method used to create or locate instances of the
provider specific class that implements the interface used to define
policy contexts within the associated <code>Policy</code> provider. The method is
<code>getPolicyConfiguration</code> and the interface is
<code>jakarta.security.jacc.PolicyConfiguration</code> .</p>
</div>
<div class="paragraph">
<p>Use of the <code>PolicyConfiguration</code> interface is defined in <a href="#a232">Policy Configuration Subcontract</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="a184"><a class="anchor" href="#a184"></a>2.4. PolicyContext Class and Context Handlers</h3>
<div class="paragraph">
<p>This <code>jakarta.security.jacc</code> package defines a
utility class that is used by containers to communicate policy context
identifiers to Policy providers. The utility class is
<code>jakarta.security.jacc.PolicyContext</code>, and this class implements static
methods that are used to communicate policy relevant context values from
containers to Policy providers. Containers use the static method
<code>PolicyContext.setContextID</code> to associate a policy context identifier
with a thread on which they are about to call a decision interface of a
Policy provider. Policy providers use the static method
<code>PolicyContext.getContextID</code> to obtain the context identifier
established by a calling container. The role of policy context
identifiers in access decisions is described in
<a href="#a253">Policy Contexts and Policy Context Identifiers</a>.</p>
</div>
<div class="paragraph">
<p>In addition to the methods used to
communicate policy context identifiers, the
<code>jakarta.security.jacc.PolicyContext</code> class also provides static methods
that allow container specific context handlers that implement the
<code>jakarta.security.jacc.PolicyContextHandler</code> interface to be registered
with the <code>PolicyContext</code> class. The <code>PolicyContext</code> class also provides
static methods that allow <code>Policy</code> providers to activate registered
handlers to obtain additional policy relevant context to apply in their
access decisions.</p>
</div>
<div class="paragraph">
<p>Use of the <code>PolicyContext</code> class is defined in <a href="#a232">Policy Configuration Subcontract</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="what-a-provider-must-do"><a class="anchor" href="#what-a-provider-must-do"></a>2.5. What a Provider Must Do</h3>
<div class="paragraph">
<p>Each JRE of an application server must be
provided with classes that implement the <code>PolicyConfigurationFactory</code>
class and <code>PolicyConfiguration</code> interface. These classes must be
compatible with the <code>Policy</code> implementation class installed for use by the
JRE. In the case where the provider is not seeking to replace the <code>Policy</code>
implementation used by the JRE, no other components need be provided.</p>
</div>
<div class="paragraph">
<p>If the provider is seeking to replace the
<code>Policy</code> implementation used by the JRE, then the JRE must be provided
with an environment specific <code>Policy</code> implementation class. If the JRE is
running a Java SE 8 or later Java Standard Edition environment, then it
must be provided with an implementation of the <code>java.security.Policy</code>
class.</p>
</div>
<div class="paragraph">
<p>A replacement <code>Policy</code> object must assume
responsibility for performing all policy decisions within the JRE in
which it is installed that are requested by way of the <code>Policy</code> interface
that it implements. A replacement Policy object may accomplish this by
delegating non- <code>jakarta.security.jacc</code> policy decisions to the
corresponding default system <code>Policy</code> implementation class. A replacement
<code>Policy</code> object that relies in this way on the corresponding default
<code>Policy</code> implementation class must identify itself in its installation
instructions as a “delegating Policy provider”.</p>
</div>
<div class="paragraph">
<p>The standard security properties mechanism
for replacing a default system <code>Policy</code> implementation (see
<a href="#a175">Policy Implementation Class</a>) should
not be used to replace a default system <code>Policy</code> provider with a
delegating <code>Policy</code> provider.</p>
</div>
</div>
<div class="sect2">
<h3 id="optional-provider-support-for-jaas-policy-object"><a class="anchor" href="#optional-provider-support-for-jaas-policy-object"></a>2.6. Optional Provider Support for JAAS Policy Object</h3>
<div class="paragraph">
<p>In Java SE 8, the subject based authorization
functionality of the JAAS Policy interface has been integrated into
<code>java.security.Policy</code>, and the JAAS Policy interface (as a separate
entity) has been deprecated. This does not mean that the JAAS Policy
interface was removed, but rather that the essential parts of it have
been tightly integrated into the Java SE 8 platform.</p>
</div>
<div class="paragraph">
<p>According to this contract, a Java SE 8 or
later Java Standard Edition security environment may support replacement
of the JAAS Policy object if and only if all <code>jakarta.security.jacc policy</code>
decisions performed by the replacement JAAS Policy object return the
same result as when the <code>java.security.Policy</code> interface is used. To
satisfy this requirement, the replacement JAAS Policy object must be
compatible with the implementations of <code>PolicyConfigurationFactory</code>
and <code>PolicyConfiguration</code> interface provided for use with the
<code>java.security.Policy</code> implementation class.</p>
</div>
</div>
<div class="sect2">
<h3 id="a196"><a class="anchor" href="#a196"></a>2.7. What the Application Server Must Do</h3>
<div class="paragraph">
<p>An application server or container must
bundle or install the <code>jakarta.security.jacc</code> standard extension. This
package must include the abstract
<code>jakarta.security.jacc.PolicyConfigurationFactory</code> class, the
<code>jakarta.security.jacc.PolicyConfiguration</code> and
<code>jakarta.security.jacc.PolicyContextHandler</code> interfaces, and
implementations of the <code>jakarta.security.jacc.PolicyContextException</code>
exception, <code>the jakarta.security.jacc</code> <code>Permission</code> classes, and the
<code>jakarta.security.jacc.PolicyContext</code> utility class. The <code>Permission</code> classes
of the <code>jakarta.security.jacc</code> package are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.security.jacc.EJBMethodPermission</code></p>
</li>
<li>
<p><code>jakarta.security.jacc.EJBRoleRefPermission</code></p>
</li>
<li>
<p><code>jakarta.security.jacc.WebResourcePermission</code></p>
</li>
<li>
<p><code>jakarta.security.jacc.WebRoleRefPermission</code></p>
</li>
<li>
<p><code>jakarta.security.jacc.WebUserDataPermission</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable delegation of non-
<code>jakarta.security.jacc</code> policy decisions to default system <code>Policy</code>
providers, all application servers must implement the following <code>Policy</code>
replacement algorithm. The intent of the algorithm is to ensure that
<code>Policy</code> objects can capture the instance of the corresponding default
system <code>Policy</code> object during their integration into a container and such
that they may delegate non-container policy evaluations to it.</p>
</div>
<div class="paragraph">
<p>For each JRE of a Jakarta EE 9 or later version
Jakarta EE application server, if the system property
"`jakarta.security.jacc.policy.provider`” is defined, the application
server must construct an instance of the class identified by the system
property, confirm that the resulting object is an instance of
<code>java.security.Policy</code>, and set, by calling the
<code>java.security.Policy.setPolicy</code> method, the resulting object as the
corresponding <code>Policy</code> object used by the JRE. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> javaPolicy = <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">jakarta.security.jacc.policy.provider</span><span class="delimiter">&quot;</span></span>);

<span class="keyword">if</span> (javaPolicy != <span class="predefined-constant">null</span>) {
    <span class="keyword">try</span> {
        java.security.Policy.setPolicy((java.security.Policy)
            <span class="predefined-type">Class</span>.forName(javaPolicy).newInstance());
    } <span class="keyword">catch</span> (<span class="exception">ClassNotFoundException</span> cnfe) {
        <span class="comment">// problem with property value or classpath</span>
    } <span class="keyword">catch</span> (<span class="exception">IllegalAccessException</span> iae) {
        <span class="comment">// problem with policy class definition</span>
    } <span class="keyword">catch</span> (<span class="exception">InstantiationException</span> ie) {
        <span class="comment">// problem with policy instantiation</span>
    } <span class="keyword">catch</span> (<span class="exception">ClassCastException</span> cce) {
        <span class="comment">// Not instance of java.security.policy</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once an application server has used either of
the system properties defined in this section to replace a <code>Policy</code> object
used by a JRE, the application server must not use <code>setPolicy</code> to replace
the corresponding <code>Policy</code> object of the running JRE again.</p>
</div>
<div class="paragraph">
<p>The requirements of this section have been
designed to ensure that containers support <code>Policy</code> replacement and to
facilitate delegation to a default system <code>Policy</code> provider. These
requirements should not be interpreted as placing any restrictions on
the delegation patterns that may be implemented by replacement <code>Policy</code>
modules.</p>
</div>
</div>
<div class="sect2">
<h3 id="modifications-to-the-jaas-subjectdomaincombiner"><a class="anchor" href="#modifications-to-the-jaas-subjectdomaincombiner"></a>2.8. Modifications to the JAAS SubjectDomainCombiner</h3>
<div class="paragraph">
<p>The reference implementation of the combine
method of the JAAS <code>SubjectDomainCombiner</code> returns protection domains
that are constructed with a <code>java.security.Permissions</code> collection. This
is the norm in J2SE 1.3 environments, and it also occurs in J2SE 1.4 and
Java Standard Edition 5.0 environments when the installed JAAS Policy
implementation class is not the <code>com.sun.security.auth.PolicyFile</code> class
(that is, the JRE is operating in backward compatibility mode with
respect to JAAS Policy replacement). The use of
<code>java.security.Permissions</code> by the <code>SubjectDomainCombiner</code> forces JAAS
Policy providers to compute all the permissions that pertain to a
subject and code source and effectively precludes integration of Policy
subsystems that are not capable of doing so. To ensure that the
implementation of the JAAS <code>SubjectDomainCombiner</code> does not preclude
integration of a class of Policy providers, this contract imposes the
following requirement and recommendation on application servers.</p>
</div>
<div class="paragraph">
<p>To satisfy the contract defined by this
specification, an application server must install or bundle,
such that it is used by every JRE of the application server, a
<code>javax.security.auth.SubjectDomainCombiner</code> whose <code>combine</code> method
returns protection domains constructed using the permission collections
returned by <code>javax.security.auth.Policy.getPermisions</code> . It is
recommended that this requirement be satisfied by Jakarta EE 9 and
later version Jakarta EE application servers in the case where
<code>javax.security.auth.Policy</code> is used (in backward compatibility mode) to
perform <code>jakarta.security.jacc</code> policy decisions.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a232"><a class="anchor" href="#a232"></a>3. Policy Configuration Subcontract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="#a232">Policy Configuration Subcontract</a> defines the interactions between container
deployment tools and providers to support the translation of declarative
Jakarta EE authorization policy into policy statements within a Java SE
Policy provider.</p>
</div>
<div class="paragraph">
<p>This subcontract also applies to the
translation of authorization policy annotations that have an equivalent
representation in Jakarta EE deployment descriptor policy constructs (i.e.,
<code>security-constraint</code>, <code>method-permission</code>, <code>security-role-ref</code>, and
<code>exclude-list</code> elements).</p>
</div>
<div class="sect2">
<h3 id="a235"><a class="anchor" href="#a235"></a>3.1. What a Jakarta EE Platform’s Deployment Tools Must Do</h3>
<div class="paragraph">
<p>The <code>getPolicyConfigurationFactory</code> method
must be used in every JRE to which the components of the application or
module are being deployed to find or instantiate
PolicyConfigurationFactory objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">PolicyConfigurationFactory policyConfigurationFactory =
    PolicyConfigurationFactory.getPolicyConfigurationFactory();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>getPolicyConfiguration</code> method of the
factories must be used to find or instantiate <code>PolicyConfiguration</code>
objects corresponding to the application or modules being deployed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> petContextID = <span class="string"><span class="delimiter">&quot;</span><span class="content">acme-pet-server /petstore</span><span class="delimiter">&quot;</span></span>;

PolicyConfiguration petPolicyConfiguration =
    policyConfigurationFactory.getPolicyConfiguration(petContextID, <span class="predefined-constant">true</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The declarative authorization policy
statements derived from the application or module deployment
descriptor(s) must be translated to create instances of the
corresponding <code>jakarta.security.jacc</code> Permission classes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">WebResourcePermission webResourcePermission =
    <span class="keyword">new</span> WebResourcePermission(<span class="string"><span class="delimiter">&quot;</span><span class="content">/elephant</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Methods of the <code>PolicyConfiguration</code>
interface must be used with the permissions resulting from the
translation to create policy statements within the <code>PolicyConfiguration</code>
objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">petPolicyConfiguration.addToRole(<span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>, webResourcePermission);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>PolicyConfiguration</code> objects must be
linked such that the same principal-to-role mapping will be applied to
all the modules of the application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">petPolicyConfiguration.linkConfiguration(petFoodPolicyConfiguration);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The PolicyConfiguration objects must be
placed in Service such that they will be assimilated into the Policy
providers used by the containers to which the application has been
deployed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">petPolicyConfiguration.commit();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Independent of this specification, Jakarta EE
deployment tools must translate and complete the declarative policy
statements appearing in deployment descriptors into a form suitable for
securing applications on the platform. These
deployment tools must combine policy annotations in Java code with
policy statements appearing in deployment descriptors to yield complete
representations of authorization policy suitable for securing
applications on the platform. The rules for combining authorization
policy annotations with declarative policy statements are described in
the Jakarta Enterprise Beans, Jakarta Servlet, and Jakarta EE platform specifications.
Independent of whether
annotations factor in the translation, the resulting policy statements
may differ in form from the policy statements appearing in the
deployment descriptors. The policy translation defined by this
subcontract is described assuming that the policy statement form used by
a platform is identical to that used to express policy in the deployment
descriptors. Where this is not the case, the output of the translation
must be equivalent to the translation that would occur if policy was
completely specified in the deployment descriptors and the translation
had proceeded directly from the deployment descriptors to the Java SE
policy forms defined by this subcontract. Two translations are
equivalent if they produce corresponding collections of unchecked,
excluded, and role permissions, and if all of the permissions of each
such collection are implied<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
by the permissions of
the corresponding or excluded collection of the other translation.
Translation equivalence is only required with respect to the permission
types that are the subject of the translation.</p>
</div>
<div class="sect3">
<h4 id="a253"><a class="anchor" href="#a253"></a>3.1.1. Policy Contexts and Policy Context Identifiers</h4>
<div class="paragraph">
<p>It must be possible to define separate
authorization policy contexts corresponding to each deployed instance of
a Jakarta EE module. This per module scoping of policy context is necessary
to provide for the independent administration of policy contexts
corresponding to individual application modules (perhaps multiply
deployed) within a common <code>Policy</code> provider.</p>
</div>
<div class="paragraph">
<p>Each <code>policy</code> context contains all of the
policy statements (as defined by this specification) that effect access
to the resources<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>
in one or more deployed modules.
At policy configuration, a <code>PolicyConfiguration</code> object is created for
each policy context, and populated with the policy statements
(represented by permission objects) corresponding to the context. Each
policy context has an associated policy context identifier.</p>
</div>
<div class="paragraph">
<p>In the <a href="#a556">Policy Decision and Enforcement Subcontract</a>, access decisions are
performed by checking permissions that identify resources by name and
perhaps action. When a permission is checked, this specification
requires identification of the authorization policy context in which the
evaluation is to be performed (<a href="#a707">Setting the Policy Context</a>).</p>
</div>
<div class="sect4">
<h5 id="a257"><a class="anchor" href="#a257"></a>3.1.1.1. Policy Context Life Cycle</h5>
<div class="paragraph">
<p><a href="#a268">Figure 3-2</a> depicts the policy context life cycle
as effected through the methods of the <code>PolicyConfiguration</code> interface. A
policy context is in one of three states and all implementations of the
<code>PolicyConfiguration</code> interface must implement the state semantics defined
in this section.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>open</p>
<div class="paragraph">
<p>A policy context in the open state must be
available for configuration by any of the methods of the
PolicyConfiguration interface. A policy context in the open state must
not be assimilated at Policy.refresh into the policy statements used by
the Policy provider in performing its access decisions.</p>
</div>
</li>
<li>
<p>inService</p>
<div class="paragraph">
<p>A policy context in the inService state must
be assimilated at <code>Policy.refresh</code> into the policy statements used by its
provider. When a provider&#8217;s refresh method is called, it must assimilate
only policy contexts that are in the inService state and it must ensure
that the policy statements put into service for each policy context are
only those defined in the context at the time of the call to refresh. A
policy context in the inService state must be unavailable for additional
configuration. A policy context in the inService state must be
transitioned to the open state when it is returned as a result of a call
to <code>getPolicyConfiguration</code>. A policy context is transitioned to the
inService state by calling the commit method, and only a policy context
in the open state may be transitioned to the inService state.</p>
</div>
</li>
<li>
<p>deleted</p>
<div class="paragraph">
<p>A policy context in the deleted state must be
unavailable for configuration and it must be unavailable for
assimilation into its associated Provider. A policy context in the
deleted state must be transitioned to the open state when it is returned
as a result of a call to <code>getPolicyConfiguration</code>. A policy context is
transitioned to the deleted state by calling the delete method.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that for a provider implementation to be
compatible with multi-threaded environments, it may be necessary to
synchronize the refresh method of the provider with the methods of its
<code>PolicyConfiguration</code> interface and with the <code>getPolicyConfiguration</code> and
inService methods of its <code>PolicyConfigurationFactory</code>.</p>
</div>
<div id="a268" class="imageblock text-center">
<div class="content">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAAFfAgMAAABLuZ9IAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEX///8AAAAAAIMK4HvHAAAAAWJLR0QAiAUdSAAAAAd0SU1FB+MEHQgnNhCbnEoAAAzNSURBVHja7Z3NjuQoEoAJCfrQJ1KyR6N+Gixl3UnJ3sOc5thTT1HzEHPvPaxUqqfcCDAm8H9mgqenxkjldKZtPgfGQRAElBBnOtOZzvTvStDtT20e4h3nypN4En8KojaYpTK0278GUhcmUpZas9/GhOzEppLSSGVe1FVp0+i21jVURYmNxJLV2uKnNU0D+LVpihJBGiIaJOJGOCKvWQWIKiF2BxARIQciHCEjkrQn4nMEdQQRayqWbCOVrhtxwy2UJCZJz/1Yklibo4nz6STuJ+61rUw+4s4zPw/RULYua9qAal1TfSBRwqANshJBt9Ja5RoPeTGVtAo3shY3CWC1sdimZCYiC/X2BVCNy0o3uK+pecYd1LW4m5+ILRPmrK/aN1fSbQy1Hy0RxSV7qULnibXtibijTIetiShFFL2MIshIOwYKEn2p9qmR4Tn2RCmzEwU+LmyNNTXIWle07+pqJ4Wrq9mJm+l4oj6cKE7i/cR6j5sjK1FvniZP4kNELV7QeNIgevvObZqu75uXIRr8GBMDJzsRrNKVwQ8N2P5Dhd8BDYIKia3UldbZidhA2MbQB/XhmsY1GNh+NIK6eE0BoqBW0RPpz21cT7Jz/VZp8pdqmxJViyWMdkAjShHlWEa8CbIDChKrnkjJdZZ1cHjQc4QCdfWqbE11FSy2/2iE+LqKXXNBdbUAcfOko4nyk+jVk5ifuMMFkJloVk/6bMTO+tZYMy9AWaIRkRi8AAWIYKMjABUquT114gXIT2SOAHF1HUibeAFKEIMjoLNX10hq5gUoQoyOAKE9kXkBihCjI0AEGaEscXAEhOfIvQAliGZwBHQ3rKvQok0QvQCH65zjifqz6dWTeBJ/dqLacuVkJy5mJ0/iE0QpLmjHqU54q4o+0DQGWZJIHg2XayAazbqOuYkthVZI7BFT0AP20G/k4jG6BqmKtMjktqm0lc7Q6EdzyJyjkfrqWqZ9dKYNElUnG+EsDjKuaKS+gjLtY9cTJQ23eMuRbJ5yxAYGYpBRFCYqRpShVD3RlLDJhbkpNN+wrqqO6mptOqyraC1TXRVliGs653AifB69ehKLEOcDPGxJ4uwJ+iSexJ+cWLf9CNphRA3HEK81VBVY01hNPrm6PJEiZcmBc/XjSdgyliYaF0UqL1LW7UHEzhPJkkNid4SM4GWk8ToKSz6qVIkmDyrVGmhkTsJhdXWaTuI/kDh1sbSFidM85Un8LETsWw2bz0mkqTTYQPvNJyVeKDII+s1nIYKQXYtdO+MUrdRXI6+i3xQjAm31QcRa3OAKokYimgP2ACJ5HSugeCfyO0ok1gLB/aZIqZJ/jIjO73gEsQ5E+lPtAXrVBCIZkuTFvgwuiELEhhMrZFThTJWFNyVWpoOW1VUww6mWu1/Mg7wtnVNxcys5aGSYlXUve50Ilv2SEulP55dRKPYLvCUyXgwNTlTSWHWXmFvWo10kVs6pfSUn912ybljIimf2e0LUuqaemG5EVqIdEYdXhIiCok2QWFtxR1on1klg23e8A040FG1CMt4DXCeCodxampr04ohRC/TERpisz7GiQ0ChydoaJEIsPv8cUVGY5+rqNBHRR/AisYq/3wW5W0Y3NQkRfxTQcuODJsgoxjI+ntZLtRqeoyPC45LtJQK9j66uOmIWK2CPzgm6lT/HPMTZwQdG/B51jrs76d8WQ/GK+/XOxghLole/88uI6Dsijqh3myQbRMun8CTEyrQ1+bUujW11fdW7e3rrxIlejaXqVixAMSvqkKCmy0MEs6TJnX3piDorsRIjooqXoQ0diG5KRqZSHRGjJnf2pfdsY3OVT8YxsWKXOcNWxlK9v64uxCBZdm6iAbCuKporgQ1Zqy/XB97HhbQgo3i8vbqLCOy0h/XcVsw8L6ysmnwx8UNZW+RdxO/cehR8nntLPwVzp8lKHJIjhgh3v8aGZoe2iHW35znCO5dR6Vpd+wj3K012s6250WhQc0P1bjaIK4n3dN65hUwh7iHC/epNEwq5qdwE6mql1O4gfnnnFjIFY4cId+nNLxfUI3yk9uNEdvTLO7eQKcQ9xJtzorLbxNXpK7d46rcf3EKmEPdIbAai3pZxIw1iwet/+fvonmMf4Q7gZXShU9sybqTh0f3y8cb1Ki08cw3z3Fvhxkdv0Gqlb6TeV4jderJfw97rxxsYdmXMdKhdWbzaQnyE9C64Xq0jPbChzUP8Gohvgj3VgqnuhHe11hQgnMtxtZxUZ6qeeF+/9IlEb70jQpa+3I5EKtI7sJtjhATqxnmiPkbIyrG8kx6OEBLIxxiImdzWGyL2s9yJCEe8jmAYkczoA0R0VktP1OWFBBNQvk+cz1m+IqJgREqZlPWyiBPi8FtRETlRlFQDURxOLClklIYTCwrJhEmI5YRksiTEYrqOi5ISS6kB/rhGxDJqgIs4JpYRMqmRY2IJIRMRJ8QSui596SbE9Ibyizgl5lcDowynxNxCjvObEnMLOc5uhphXyEluM8S8um5SYnPE+9SAn4InQu+lf7tC+M1ExHniXWrAT8GjHYKE3EJXd9Qu6hFxcIJ5IXe4yrCb3g5T8GaWP2YizhKHXS/ktqsMyCHhpuBpmoI3Xf44iuhWtbVt7YiKxq/spTEvQ2ZW7HKVOT+IC4XRND1tuvwxE5EcKBSMTETtloKoKh3LS4tdrjK3rJIRU2I3JWpODKsXJsQ9rjK3rNJAnFn+mBM7zA8LZIW4w1Xmn6Mj4s3PLH+cyOhvb03GHa4yfKZVmII3t/zxUqk2c8RdrjJW0U28duZHoSzV1SrWVU9kV+1ylTHH0sBm/qdZp/Oszunf1JCecJXdQ8zjKrtLxizpJJ7Ek3gS/14imHnrtBzRWbaHEu38z+WI/hnOdKaKESXjHkO0yccBxCDctO6UIlZLB4oRh+8z3coixFiYk7pTiMiytccQ2ddx3SlDVMuHChGTXCeOpQJEWPlWhjiKENMr3zIRbXosrTsliLB2sAhxEnY3ci3nJ9rxQeBHCxA32sQCxJl2n9edAkQzc9iWJM56F1llyk+czRE2jj9FNLPH9cxeJuKCyzb+nJ24lKFNTqifjaGPRDALJwx1R8f7utttBCzIMYAWA4uHWyGY8QHI9xPZTYf87OLZoXP3PNFfbZKbmEuqP4mI2vv7nifq1cmONhfRX+0yM6sDKDJWGreKSBbiahY+TigD0V9t3Pf1sbdqGNuAC8vgCaLcCCaGKVH3IeY72f40f7Ujbg1KWTOVEe4Jox8TN2fCuVE1d1IbZHwBN6hzAbMwUJjMQ50Q1+9WWbhOiJb+SYTSF7cizUKK81D7wm8D8WVjQFN1lRjpVeTQzBLZuFX+ZmW8sHmoIyLo2qwSWZxtG4mCVgBH4kIIfzIPdaRXYSvsn707YAKxEbQCeLNYz5N5qIE4BM+vA4HnWTEiSDf8tSAjn4cK45zsOnHyxT9H0dJY0mJd5fNQYVxY6+9jouVhcg9LV/F5qPw5+mRWr02+/b6fGOehwgSzStTJt73EJE2Jv+4n/vo4EUbZLBM1V9uZiF8SkWDSqWJq+9szRBhijteJidrORXwbDg5hAYzI1fa3RyzkQKSx2Fo1VnHiEBbAiFxtf7uXxoh+HN39nwlO1HPEqLYfI3pt6ga7XfaJjCEsILmHqLYfIvZcFw/hsk+JfVjAiBjU9nNEytktTLxZqlFtP0nkpWr9z0NYQCQmlz1DFB3VVcC6SjVnuf3ISIwJifZo4optlc6z+y0T8U+zfGI+GdmN/+evtSlR2YjHy8iJbyu9q0JENhHwIOLf8D4uv5DFiMfLeBKfI8KkR/Xlr5U+Vg7igowLRmFKfH1knvmdxLSn80qb54nfdhPh43Eiv2yVmPZYMxFfdxO/vD9B1DuJif77LRJ9f9zNJmy2XAljoi+qRSJT8urjRyQ6C9MTtzx744x+WSd+ZVZOT4Sram60RFyFHRdot1a5CjmH0oLX91VinBaNyf1gXLgzfjaN+59uS8Sw/F/I+X/ByvnYIH6NwB89UfZEuIsYM3qLRO3i4GlX6qlu6d9NQ0tQ9cTa6iUilr0xbT34OmJpvbPS1kMsP4W+LxO16P+fihaLMrqyh+jPYQKYnuhi+l0sf2NNp81kiKAORPePck0sVTNLlFvEPhbcB09TH3yRSOVla4GdIoV1tVp4H13ZdzL45Zj11u/2va2+QzdL7Bfz3Ln+pC97Gfxys0QX0z9E4y8Tld2izZSqvMYj10FGEWL5xZyMYRlYswNHp7dUV1Woq3NEFf5lYl+q+jlivM5teQB+0/9OMf0+lh/r6sv0fcxP3HJG9et25SNuRsA/RzTRndHvbrvbwkLQ/xAixCGXsLvDpageW6XoCeKDCSY3umvc40xnOtOZfrL0f0AaUxvbMFSLAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA0LTI5VDE1OjM5OjU0LTA3OjAwJstgiQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNC0yOVQxNTozOTo1NC0wNzowMFeW2DUAAAAASUVORK5CYII=" alt="PolicyConfigurationStateTable" width="300"/>
</div>
<div class="title">Figure 3-2 PolicyConfiguration State Table</div>
</div>
</div>
<div class="sect4">
<h5 id="a269"><a class="anchor" href="#a269"></a>3.1.1.2. Linking Policy Contexts</h5>
<div class="paragraph">
<p>In the Jakarta EE security model,
principal-to-role mappings have application scope; that is, the same
principal-to-role mappings must apply in the access decisions applied at
all of the modules (that may represent separate policy contexts) that
comprise an application. Same application policy contexts must be
associated by calling the <code>PolicyConfiguration.linkConfiguration</code>
method. This method must create a transitive and symmetric relationship
within the provider and between this <code>PolicyConfiguration</code> and the
argument <code>PolicyConfiguration</code> , such that they and all
<code>PolicyConfiguration</code> objects otherwise linked to either of them share the
same principal-to-role mappings. The semantics of the association must
preserve the invariant that at most one principal-to-role mapping may
apply to any <code>PolicyConfiguration</code> .</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a271"><a class="anchor" href="#a271"></a>3.1.2. Servlet Policy Context Identifiers</h4>
<div class="paragraph">
<p>Servlet requests may be directed to a logical
host using various physical or virtual host names or addresses, and an
application server may be composed of multiple logical hosts. A virtual
application server may be realized as a cluster of physical application
servers, each hosting some subset of the logical hosts of the virtual
application server. This specification uses the term hostname to refer
to the name of a logical host that processes Servlet requests. A servlet
container is responsible for mapping the target name or address
information of an HTTP request to the appropriate hostname.</p>
</div>
<div class="paragraph">
<p>To satisfy this specification, an application
server must establish servlet policy context identifiers sufficient to
differentiate all instances of a web application deployed on the logical
host or on any other logical host that may share the same policy
statement repository. One way to satisfy this requirement is to compose
policy context identifiers by concatenating the hostname with the
context path (as defined in the Servlet specification) identifying the
web application at the host.</p>
</div>
<div class="paragraph">
<p>When an application is composed of multiple
web modules, a separate policy context must be defined per module. This
is necessary to ensure that url-pattern based and servlet name based
policy statements configured for one module do not interfere with those
configured for another.</p>
</div>
<div class="paragraph">
<p>The policy contexts assigned
to web applications and web modules must be distinct from those to which
any Jakarta Enterprise Beans<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>
components are assigned.</p>
</div>
</div>
<div class="sect3">
<h4 id="a276"><a class="anchor" href="#a276"></a>3.1.3. Translating Servlet Deployment Descriptors</h4>
<div class="paragraph">
<p>A reference to a <code>PolicyConfiguration</code> object
must be obtained by calling the <code>getPolicyConfiguration</code> method on the
<code>PolicyConfigurationFactory</code> implementation class of the provider
configured into the container. The policy context identifier used in the
call to the <code>getPolicyConfiguration</code> method must be a <code>String</code> composed
as described in <a href="#a271">Servlet Policy Context Identifiers</a>. The <code>security-constraint</code> and <code>security-role-ref</code> elements
in the deployment descriptor must be translated into permissions and
added to the <code>PolicyConfiguration</code> object as defined in the following
sections. Before the translation is performed, all policy statements
must have been removed<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>
from the policy context
associated with the returned <code>PolicyConfiguration</code>.</p>
</div>
<div class="sect4">
<h5 id="a278"><a class="anchor" href="#a278"></a>3.1.3.1. Programmatic Servlet Registrations</h5>
<div class="paragraph">
<p>Jakarta Servlet containers support the
programmatic registration and security configuration of servlets.
The servlet policy
translation defined by this subcontract is described assuming that all
such programmatic registration and security configuration has completed
(for the servlet module corresponding to the policy context) before the
translation is performed and that the resulting security related
configuration has been represented in its equivalent form within the
deployment descriptors on which the translation is performed. Where this
is not the case, the result of the translation must be equivalent, as
described previously, to the translation that would occur if it was the
case. The mapping to equivalent deployment descriptor representation of
security related configuration corresponding to programmatically
registered servlets is defined in the Jakarta Servlet specification.</p>
</div>
<div class="paragraph">
<p>If the results of a prior translation are
invalidated by subsequent programmatic registration and security
configuration (as might occur if an initial translation is performed
before the programmatic effects), the translation must be repeated.
Before the translation is repeated, a reference must be obtained to the
<code>PolicyConfiguration</code> object in the open state, and its policy
statements must be removed. If the PolicyConfiguration has already been
linked to other committed policy contexts, then it may be necessary or
preferable (in order to satisfy the linking requirements defined in
<a href="#a527">Deploying an Application or Module</a>)
to obtain the reference and remove the policy statements while
preserving the linkages established for the context by the prior
translation. Policy statements may be removed while preserving linkages
by calling the <code>removeUncheckedPolicy</code>, <code>removeExcludedPolicy</code>, and
<code>removeRole</code> methods on the open <code>PolicyConfiguration</code> object.</p>
</div>
</div>
<div class="sect4">
<h5 id="a281"><a class="anchor" href="#a281"></a>3.1.3.2. Translating security-constraint Elements</h5>
<div class="paragraph">
<p>The paragraphs of this section describe the
translation of security-constraints into <code>WebResourcePermission</code> and
<code>WebUserDataPermission</code> objects constructed using qualified URL pattern
names. In the exceptional case, as defined in
<a href="#a288">"Qualified URL Pattern Names"</a>, where a
pattern is made irrelevant by a qualifying pattern, the permission
instantiations that would result from the translation of the pattern, as
described below, must not be performed. Otherwise, the translation of
URL patterns in security constraints must yield an equivalent
translation to the translation that would result from following the
instructions in the remainder of this section.</p>
</div>
<div class="paragraph">
<p>A <code>WebResourcePermission</code> and a
<code>WebUserDataPermission<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></code> object must be added to the
excluded policy statements for each distinct <code>url-pattern</code> occurring
in the <code>security-constraint</code> elements that contain an
<code>auth-constraint</code> naming no roles (i.e an excluding <code>auth-constraint</code>).
The permissions must be constructed using the qualified (as defined
in <a href="#a288">"Qualified URL Pattern Names"</a>)
pattern as their name and with actions obtained by combining (as defined
in <a href="#a302">"Combining HTTP Methods"</a>) the
collections containing the pattern and occurring in a constraint with an
excluding <code>auth-constraint</code>. The constructed permissions must be
added to the excluded policy statements by calling the
<code>addToExcludedPolicy</code> method on the <code>PolicyConfiguration</code> object.</p>
</div>
<div class="paragraph">
<p>A <code>WebResourcePermission</code> must be added to
the corresponding role for each distinct combination in the
cross-product of` <code>url-pattern</code> and <code>role-name</code> occurring in the
<code>security-constraint</code> elements that contain an <code>auth-constraint</code>
naming roles. If the “any authenticated user” role-name, “**”, occurs
in an auth-constraint, a <code>WebResourcePermission</code> must also be added to the
“**” role. When an` <code>auth-constraint</code> names the reserved <code>role-name</code>
, "*", all of the patterns in the containing` <code>security-constraint</code>
must be combined with all of the roles defined in the web application;
which must not include the role “**” unless the application has defined
an application role named “**”. Each <code>WebResourcePermission</code> object must
be constructed using the qualified pattern as its name and with actions
defined by combining (as defined in <a href="#a302">"Combining HTTP Methods"</a>) the collections containing the pattern and
occurring in a constraint that names (or implies via "*") the role to
which the permission is being added. The resulting permissions must be
added to the corresponding roles by calling the <code>addToRole</code> method on
the <code>PolicyConfiguration</code> object.</p>
</div>
<div class="paragraph">
<p>A WebResourcePermission must be added to
the unchecked policy statements for each distinct <code>url-pattern</code>
occurring in the <code>security-constraint</code> elements that do not contain
an <code>auth-constraint</code>. Each <code>WebResourcePermission</code> object must be
constructed using the qualified pattern as its name and with actions
defined by combining (as defined in <a href="#a302">"Combining HTTP Methods"</a>) the collections containing the pattern and
occurring in a <code>security-constraint</code> without an <code>auth-constraint</code>.
The resulting permissions must be added to the unchecked policy
statements by calling the <code>addToUncheckedPolicy</code> method on the
<code>PolicyConfiguration</code> object.</p>
</div>
<div class="paragraph">
<p>A <code>WebUserDataPermission</code> must be added to
the unchecked policy statements for each distinct combination of
<code>url-pattern</code> and acceptable connection type resulting from the
processing of the <code>security-constraint</code> elements that do not contain
an excluding <code>auth-constraint</code>. The mapping of <code>security-constraint</code> to
acceptable connection type must be as defined in
<a href="#a330">"Mapping Transport Guarantee to Connection Type"</a>. Each <code>WebUserDataPermission</code> object must be constructed
using the qualified pattern as its name and with actions defined by
appending<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup> a representation of the acceptable
connection type to the HTTP method specification obtained by combining
(as defined in <a href="#a302">"Combining HTTP Methods"</a>)
the collections containing the pattern and occurring in a
<code>security-constraint</code> that maps to the connection type and that does
not contain an excluding <code>auth-constraint</code>. The resulting permissions
must be added to the unchecked policy statements by calling the
<code>addToUncheckedPolicy</code> method on the <code>PolicyConfiguration</code> object.</p>
</div>
<div class="paragraph">
<p>A <code>WebResourcePermission</code> and a <code>WebUserDataPermission</code> must be obtained for each
<code>url-pattern</code> in the deployment descriptor and the default pattern, "/", that is
not combined by the` <code>web-resource-collection</code> elements of the deployment descriptor
with every possible HTTP method value<sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup>.
The permission objects must be constructed using the qualified pattern as
their name and with actions represented by an HTTP method specification
that identifies all of the HTTP methods that do not occur in combination
with the pattern. The form of the HTTP method specification used in the
permission construction depends on the representation of the methods
that occurred in combination with the pattern. If the methods that
occurred are represented by an <code>HttpMethodExceptionList</code> as defined in
<a href="#a318">"HTTP Method Exception List"</a>), the
permissions must be constructed using an HTTPMethodList naming all of
the HTTP methods named in the exception list. Conversely, if the methods
that occurred are represented by an <code>HTTPMethodList</code>, the permissions must
be constructed using an <code>HTTPMethodExceptionList</code> naming all of the HTTP
methods that occurred with the pattern. If a deny uncovered HTTP methods
semantic is in effect for the web module associated with the
<code>PolicyContext</code>, the resulting permissions must be added to the excluded
policy statements by calling the <code>addToExcludedPolicy</code> method on the
<code>PolicyConfiguration</code> object. Otherwise, the permissions must be added
to the unchecked policy statements by calling the <code>addToUncheckedPolicy</code>
method on the <code>PolicyConfiguration</code> object.</p>
</div>
<div id="a288" class="paragraph">
<p><strong>Qualified URL Pattern Names</strong></p>
</div>
<div class="paragraph">
<p>The URL pattern qualification described in
this section serves to capture the best-matching semantics of the
Jakarta Servlet constraint model in the qualified names such that the
<code>WebResourcePermission</code> and <code>WebUserDataPermission</code> objects can be tested
using the standard Java SE permission evaluation logic.</p>
</div>
<div class="paragraph">
<p>The <code>WebResourcePermission</code> and <code>WebUserDataPermission</code> objects resulting
from the translation of a Jakarta Servlet deployment descriptor must be constructed with a
name produced by qualifying the URL pattern. The rules for qualifying a URL pattern
are dependent on the rules for determining if one URL pattern matches
another as defined in <a href="#a347">Servlet URL-Pattern Matching Rules</a>, and are described as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the pattern is a path prefix pattern, it
must be qualified by every path-prefix pattern in the deployment
descriptor matched by and different from the pattern being qualified.
The pattern must also be qualified by every exact pattern appearing in
the deployment descriptor that is matched by the pattern being
qualified.</p>
</li>
<li>
<p>If the pattern is an extension pattern, it
must be qualified by every path-prefix pattern appearing in the
deployment descriptor and every exact pattern in the deployment
descriptor that is matched by the pattern being qualified.</p>
</li>
<li>
<p>If the pattern is the default pattern, "/",
it must be qualified by every other pattern except the default pattern
appearing in the deployment descriptor.</p>
</li>
<li>
<p>If the pattern is an exact pattern, its
qualified form must not contain any qualifying patterns.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>URL patterns are qualified by appending to
their <code>String</code> representation, a colon separated representation of the
list of patterns that qualify the pattern. Duplicates must not be
included in the list of qualifying patterns, and any qualifying pattern
matched by another qualifying pattern may<sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup>
be
dropped from the list.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>QualifyingPatternList ::=
    empty string | colon QualifyingPattern |
    QualifyingPatternList colon QualifyingPattern

QualifiedPattern ::= Pattern QualifyingPatternList</code></pre>
</div>
</div>
<div class="paragraph">
<p>All colon characters occurring within Pattern
and QualifyingPattern elements must be transformed to escaped
encoding<sup class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup> prior to inclusion of the corresponding
element in the QualifiedPattern.</p>
</div>
<div class="paragraph">
<p>Any pattern, qualified by a pattern that
matches it, is overridden and made irrelevant (in the translation) by
the qualifying pattern. Specifically, all extension patterns and the
default pattern are made irrelevant by the presence of the path prefix
pattern "/*" in a deployment descriptor. Patterns qualified by the "/*"
pattern violate the URLPatternSpec constraints of <code>WebResourcePermission</code>
and <code>WebUserDataPermission</code> names and must be rejected by the
corresponding permission constructors.</p>
</div>
<div id="a302" class="paragraph">
<p><strong>Combining HTTP Methods</strong></p>
</div>
<div class="paragraph">
<p>The section defines the rules for combining
HTTP method names occurring in <code>web-resource-collection</code> elements that
apply to a common <code>url-pattern</code>. The rules are commutative and
associative and are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lists of <code>http-method</code> elements combine to
yield a list of <code>http-method</code> elements containing the union (without
duplicates) of the <code>http-method</code> elements that occur in the individual
lists.</p>
</li>
<li>
<p>Lists of <code>http-method-omission</code> elements
combine to yield a list containing only the <code>http-method-omission</code>
elements that occur in all of the individual lists (i.e., the
intersection).</p>
</li>
<li>
<p>A list of <code>http-method-omission</code> elements
combines with a list of <code>http-method</code> elements to yield the list of
<code>http-method-omission</code> elements minus any elements whose method name
occurs in the <code>http-method</code> list.</p>
</li>
<li>
<p>An empty list (of <code>http-method</code> and
<code>http-method-omission</code> elements) represents the set of all possible HTTP
methods, including when it results from combination according to the
rules described in this section. An empty list combines with any other
list to yield the empty list.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When these combining rules are applied to a
list of collections, the result is always either an empty list, a
non-empty list of <code>http-method</code> elements, or a non-empty list of
<code>http-method-omission</code> elements. When the result is an empty list, the
corresponding actions value is the null (or the empty string) value.
When the result is a non-empty list of <code>http-method</code> elements the
corresponding actions value is a comma separated list of the HTTP method
names occurring in the <code>http-method</code> elements of the list. When the
result is a non-empty list of <code>http-method-omission</code> elements the
corresponding actions value is an HTTP method exception list (as defined
in <a href="#a318">"HTTP Method Exception List"</a>)
containing the HTTP method names occurring in the <code>http-method-omission</code>
elements of the list. The following table contains the three alternative
combination results and their corresponding actions values.</p>
</div>
<table class="tableblock frame-all grid-all center" style="width: 75%;">
<caption class="title">Table 3-1 HTTP Method Combination to Actions Correspondence</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Combination Result</th>
<th class="tableblock halign-center valign-top">Actions Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty list</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">null or empty string</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">list of http-method elements</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">HttpMethodList (e.g., “GET,POST”)</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">list of http-method-omission elements</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">HttpMethodExceptionList (e.g.,”!PUT,DELETE”)</font></span></p>
</div></div></td>
</tr>
</tbody>
</table>
<div id="a318" class="paragraph">
<p><strong>HTTP Method Exception List</strong></p>
</div>
<div class="paragraph">
<p>An HTTP method exception list is used to
represent, by set difference, a non-enumerable subset of the set of all
possible HTTP methods. An exception list represents the subset of the
complete set of HTTP methods formed by subtracting the methods named in
the exception list from the complete set.</p>
</div>
<div class="paragraph">
<p>An exception list is distinguished by its
first character, which must be the exclamation point (i.e., “!”)
character. A comma separated list of one or more HTTP method names must
follow the exclamation point. The syntax of an HTTP method list is
formally defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>ExtensionMethod ::= any token as defined by IETF RFC 2616
    (i.e., 1*[any CHAR except CTLS or separators as defined in RFC 2616])

HTTPMethod ::= “GET” | “POST” | “PUT” | “DELETE” | “HEAD” |
    “OPTIONS” | “TRACE” | ExtensionMethod

HTTPMethodList ::= HTTPMethod | HTTPMethodList comma HTTPMethod

HTTPMethodExceptionList ::= exclaimationPoint HTTPMethodList</code></pre>
</div>
</div>
<div id="a330" class="paragraph">
<p><strong>Mapping Transport Guarantee to Connection Type</strong></p>
</div>
<div class="paragraph">
<p>A <code>transport-guarantee</code> (in a
<code>user-data-constraint</code> ) of NONE, or a <code>security-constraint</code> without a
<code>user-data-constraint</code> , indicates that the associated URL patterns and
HTTP methods may be accessed over any (including an unprotected)
transport. A <code>transport-guarantee</code> of INTEGRAL indicates that acceptable
connections are those deemed by the container to be integrity protected.
A <code>transport-guarantee</code> of CONFIDENTIAL indicates that acceptable
connections are those deemed by the container to be protected for
confidentiality.</p>
</div>
<table id="a332" class="tableblock frame-all grid-all center" style="width: 75%;">
<caption class="title">Table 3-2 transport-guarantee to Acceptable Connection Mapping</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">transport-guarantee in constraint</th>
<th class="tableblock halign-center valign-top">connection type String value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">INTEGRAL</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">":INTEGRAL"</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">CONFIDENTIAL</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">":CONFIDENTIAL"</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">NONE (including no user-data-constraint)</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">null</font></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="a343"><a class="anchor" href="#a343"></a>3.1.3.3. Translating Servlet security-role-ref Elements</h5>
<div class="paragraph">
<p>For each <code>security-role-ref</code> appearing in the deployment descriptor a
corresponding <code>WebRoleRefPermission</code> must be added to the corresponding role.
The name of the <code>WebRoleRefPermission</code> must be the <code>servlet-name</code> in whose
context the <code>security-role-ref</code> is defined. The actions of the
<code>WebRoleRefPermission</code> must be the value of the
<code>role-name</code> (that is the reference), appearing in the
<code>security-role-ref</code>. The deployment tools must call the <code>addToRole</code>
method on the <code>PolicyConfiguration</code> object to add the
<code>WebRoleRefPermission</code> object resulting from the translation to the <code>role</code>
identified in the <code>role-link</code> appearing in the <code>security-role-ref</code>.</p>
</div>
<div class="paragraph">
<p>Additional <code>WebRoleRefPermission</code> objects must
be added to the <code>PolicyConfiguration</code> as follows. For each servlet element
in the deployment descriptor a <code>WebRoleRefPermission</code> must be added to
each <code>security-role</code> of the application whose name does not appear as
the <code>role-name</code> in a <code>security-role-ref</code> within the servlet element. If
the “any authenticated user” <code>role-name</code>, “**”, does not appear in a
<code>security-role-ref</code> within the servlet, a <code>WebRoleRefPermission</code> must also
be added for it. The name of each such <code>WebRoleRefPermission</code> must be the
<code>servlet-name</code> of the corresponding servlet element. The actions (that is,
reference) of each such <code>WebRoleRefPermission</code> must be the corresponding
(non-appearing) <code>role-name</code>. The resulting permissions must be added to
the corresponding roles by calling the <code>addToRole</code> method on the
<code>PolicyConfiguration</code> object.</p>
</div>
<div class="paragraph">
<p>For each <code>security-role</code> defined in the
deployment descriptor and the “any authenticated user” role, “**”, an
additional <code>WebRoleRefPermission</code> must<sup class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup>
be added to
the corresponding role by calling the <code>addToRole</code> method on the
<code>PolicyConfiguration</code> object. The name of all such permissions must be the
empty string, and the actions of each such permission must be the
<code>role-name</code> of the corresponding role.</p>
</div>
</div>
<div class="sect4">
<h5 id="a347"><a class="anchor" href="#a347"></a>3.1.3.4. Servlet URL-Pattern Matching Rules</h5>
<div class="paragraph">
<p>This URL pattern matches another pattern if
they are related, by case sensitive comparison, as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>their pattern values are String equivalent, or</p>
</li>
<li>
<p>this pattern is the path-prefix pattern "/*", or</p>
</li>
<li>
<p>this pattern is a path-prefix pattern (that is, it starts with "/" and ends with "/*") and the other pattern starts
with the substring of this pattern, minus its last 2 characters, and the next character of the other pattern, if there is one, is "/", or</p>
</li>
<li>
<p>this pattern is an extension pattern (that is, it starts with "*.") and the other pattern ends with this pattern, or</p>
</li>
<li>
<p>this pattern is the special default pattern, "/", which matches all other patterns.</p>
</li>
</ul>
</div>
<table id="a3322" class="tableblock frame-all grid-all center" style="width: 65%;">
<caption class="title">Table 3-3 url-pattern Types by Example</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">pattern type</th>
<th class="tableblock halign-center valign-top">example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">exact</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/acme/widget/hammer</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">path prefix</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/acme/widget/*</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">extension</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">*.html</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">default</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/</font></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="a354"><a class="anchor" href="#a354"></a>3.1.3.5. Example</h5>
<div class="paragraph">
<p>This example demonstrates the <code>WebResourcePermission</code> and
<code>WebUserDataPermission</code> objects that would
result from the translation of a deployment descriptor that contained
the following <code>security-constraint</code> elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!--
    The following security-constraint excludes access to the patterns and method
    combinations defined by the two contained web-resource-collections.

    The first collection excludes access
    by all methods except GET and POST, while the second collection excludes
    access by all HTTP methods.
--&gt;</span>
<span class="tag">&lt;security-constraint&gt;</span>
    <span class="tag">&lt;web-resource-collection&gt;</span>
        <span class="tag">&lt;web-resource-name&gt;</span>sc1.c1<span class="tag">&lt;/web-resource-name&gt;</span>
            <span class="tag">&lt;url-pattern&gt;</span>/a/*<span class="tag">&lt;/url-pattern&gt;</span>
            <span class="tag">&lt;url-pattern&gt;</span>/b/*<span class="tag">&lt;/url-pattern&gt;</span>
            <span class="tag">&lt;url-pattern&gt;</span>/a<span class="tag">&lt;/url-pattern&gt;</span>
            <span class="tag">&lt;url-pattern&gt;</span>/b<span class="tag">&lt;/url-pattern&gt;</span>
            <span class="tag">&lt;http-method-omission&gt;</span>GET<span class="tag">&lt;/http-method-omission&gt;</span>
            <span class="tag">&lt;http-method-omission&gt;</span>POST<span class="tag">&lt;/http-method-omission&gt;</span>
    <span class="tag">&lt;/web-resource-collection&gt;</span>

    <span class="tag">&lt;web-resource-collection&gt;</span>
        <span class="tag">&lt;web-resource-name&gt;</span>sc1.c2<span class="tag">&lt;/web-resource-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>*.asp<span class="tag">&lt;/url-pattern&gt;</span>
    <span class="tag">&lt;/web-resource-collection&gt;</span>

    <span class="tag">&lt;auth-constraint</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/security-constraint&gt;</span>

<span class="comment">&lt;!--
    The following security-constraint restricts access to the patterns and method
    combinations defined by the two contained web-resource-collections to callers
    in role R1 who connect using a confidential transport.
--&gt;</span>
<span class="tag">&lt;security-constraint&gt;</span>
    <span class="tag">&lt;web-resource-collection&gt;</span>
        <span class="tag">&lt;web-resource-name&gt;</span>sc2.c1<span class="tag">&lt;/web-resource-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/a/*<span class="tag">&lt;/url-pattern&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/b/*<span class="tag">&lt;/url-pattern&gt;</span>
        <span class="tag">&lt;http-method&gt;</span>GET<span class="tag">&lt;/http-method&gt;</span>
    <span class="tag">&lt;/web-resource-collection&gt;</span>

    <span class="tag">&lt;web-resource-collection&gt;</span>
        <span class="tag">&lt;web-resource-name&gt;</span>sc2.c2<span class="tag">&lt;/web-resource-name&gt;</span>
        <span class="tag">&lt;url-pattern&gt;</span>/b/*<span class="tag">&lt;/url-pattern&gt;</span>
        <span class="tag">&lt;http-method&gt;</span>POST<span class="tag">&lt;/http-method&gt;</span>
    <span class="tag">&lt;/web-resource-collection&gt;</span>

    <span class="tag">&lt;auth-constraint&gt;</span>
        <span class="tag">&lt;role-name&gt;</span>R1<span class="tag">&lt;/role-name&gt;</span>
    <span class="tag">&lt;/auth-constraint&gt;</span>

    <span class="tag">&lt;user-data-constraint&gt;</span>
        <span class="tag">&lt;transport-guarantee&gt;</span>CONFIDENTIAL<span class="tag">&lt;/transport-guarantee&gt;</span>
    <span class="tag">&lt;/user-data-constraint&gt;</span>

<span class="tag">&lt;/security-constraint&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#a399">Qualified URL Pattern Names from Example</a> contains the qualified URL pattern names
that would result from the translation of the <code>security-constraint</code>
elements (including the qualified form of the default pattern). The
second column of <a href="#a399">Qualified URL Pattern Names from Example</a> contains the canonical form of the qualified names.
The values in the second column have been derived from the values in the
first column by removing qualifying patterns matched by other qualifying
patterns.</p>
</div>
<table id="a399" class="tableblock frame-all grid-all center" style="width: 65%;">
<caption class="title">Table 3-4 Qualified URL Pattern Names from Example</caption>
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Qualified URL Pattern Name type</th>
<th class="tableblock halign-center valign-top">Canonical Form</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">"/a</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/a/*:/a]</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/a/*:/a]</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/b/*:/b]</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/b/*:/b]</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/b/*:/b]</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/b/*:/b]</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[*.asp:/a/*:/b/*]</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[*.asp:/a/*:/b/*]</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/:/a:/b:/a/*:/b/*:*.asp]</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">pass:[/:/a/*:/b/*:*.asp]</font></span></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#a416">Permissions and PolicyConfiguration Operations from Example</a> represents the
permissions and <code>PolicyConfiguration</code> operations that would result from
the translation of the security-constraint elements.The names appearing
in the second column of the table are those found in the first column of
<a href="#a399">Qualified URL Pattern Names from Example</a>. As noted previously, any equivalent form of the qualified
names, including their canonical forms, could have been used in the
permission constructions.</p>
</div>
<table id="a416" class="tableblock frame-all grid-all center" style="width: 75%;">
<caption class="title">Table 3-5 Permissions and PolicyConfiguration Operations from Example</caption>
<colgroup>
<col style="width: 20%;"/>
<col style="width: 25%;"/>
<col style="width: 30%;"/>
<col style="width: 25%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Permission Type</th>
<th class="tableblock halign-center valign-top">Name</th>
<th class="tableblock halign-center valign-top">Actions</th>
<th class="tableblock halign-center valign-top">Policy Configuration Add To</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a/*:/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a/*:/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b/*:/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b/*:/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">!GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">*.asp:/a/*:/b/*</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>null</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">*.asp:/a/*:/b/*</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">null</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">excluded</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a/*:/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">role(R1)</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b/*:/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">role(R1)</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a/*:/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET:CONFIDENTIAL</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b/*:/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET,POST:CONFIDENTIAL</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a/*:/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a/*:/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/a</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/b</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">GET,POST</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebResource</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/:/a:/b:/a/*:/b/*:*.asp</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">null</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">WebUserData</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">/:/a:/b:/a/*:/b/*:*.asp</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">null</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">unchecked</font></span></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Regarding the <code>null</code> in the third column of <a href="#a416">Permissions and PolicyConfiguration Operations from Example</a>; the canonical form for the set of all HTTP Methods (including all extension methods) is null.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a512"><a class="anchor" href="#a512"></a>3.1.4. Jakarta Enterprise Beans Policy Context Identifiers</h4>
<div class="paragraph">
<p>To satisfy this specification, an application
server must establish Jakarta Enterprise Beans policy context identifiers sufficient to
differentiate all instances of the deployment of an Jakarta Enterprise Beans jar on the
application server, or on any other application server with which the
server may share the same policy statement repository.</p>
</div>
<div class="paragraph">
<p>When an application is composed of multiple
Jakarta Enterprise Beans jars, no two jars that share at least one <code>ejb-name</code> value in common
may share the same policy context identifiers.</p>
</div>
<div class="paragraph">
<p>In cases where Jakarta Enterprise Beans may be packaged in war
files, the application server must assign the Jakarta Enterprise Beans to a policy context
distinct from that to which any web components are assigned.</p>
</div>
</div>
<div class="sect3">
<h4 id="a516"><a class="anchor" href="#a516"></a>3.1.5. Translating Jakarta Enterprise Beans Deployment Descriptors</h4>
<div class="paragraph">
<p>A reference to a <code>PolicyConfiguration</code> object
must be obtained by calling the <code>getPolicyConfiguration</code> method on the
<code>PolicyConfigurationFactory</code> implementation class of the provider
configured into the container. The policy context identifier used in the
call to <code>getPolicyConfiguration</code> must be a <code>String</code> that satisfies the
requirements described in <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a>. The <code>method-permission</code>, <code>exclude-list,</code> and
<code>security-role-ref</code> elements appearing in the deployment descriptor must
be translated into permissions and added to the <code>PolicyConfiguration</code>
object to yield an equivalent translation as that defined in the
following sections and such that every Jakarta Enterprise Beans method for which the
container performs pre-dispatch access decisions is implied by at least
one permission resulting from the translation. Before the translation is
performed, all policy statements must have been
removed<sup class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup> from the policy context associated with
the returned <code>PolicyConfiguration</code>.</p>
</div>
<div class="sect4">
<h5 id="a518"><a class="anchor" href="#a518"></a>3.1.5.1. Translating Jakarta Enterprise Beans method-permission Elements</h5>
<div class="paragraph">
<p>For each <code>method</code> element of each
<code>method-permission</code> element, an <code>EJBMethodPermission</code> object translated from
the <code>method</code> element must be added to the policy statements of the
<code>PolicyConfiguration</code> object. The name of each such <code>EJBMethodPermission</code>
object must be the <code>ejb-name</code> from the corresponding <code>method</code> element, and
the actions must be established by translating the <code>method</code> element into
a method specification according to the methodSpec syntax defined in the
documentation of the <code>EJBMethodPermission</code> class. The actions translation
must preserve the degree of specificity with respect to <code>method-name</code>,
<code>method-intf</code>, and <code>method-params</code> inherent in the method element.</p>
</div>
<div class="paragraph">
<p>If the <code>method-permission</code> element contains
the <code>unchecked</code> element, then the deployment tools must call the
<code>addToUncheckedPolicy</code> method to add the permissions resulting from the
translation to the <code>PolicyConfiguration</code> object. Alternatively, if the
<code>method-permission</code> element contains one or more <code>role-name</code> elements,
then the deployment tools must call the <code>addToRole</code> method to add the
permissions resulting from the translation to the corresponding roles of
the <code>PolicyConfiguration</code> object. These <code>addToRole</code> calls must be made for
any <code>role-name</code> used in the <code>method-permision</code> which may include the
role-name “**”; which, by default, is mapped to any authenticated user.</p>
</div>
</div>
<div class="sect4">
<h5 id="a521"><a class="anchor" href="#a521"></a>3.1.5.2. Translating the Jakarta Enterprise Beans exclude-list</h5>
<div class="paragraph">
<p>An <code>EJBMethodPermission</code> object must be created
for each <code>method</code> element occurring in the <code>exclude-list</code> element of the
deployment descriptor. The name and actions of each <code>EJBMethodPermission</code>
must be established as described in <a href="#a518">Translating Jakarta Enterprise Beans method-permission Elements</a></p>
</div>
<div class="paragraph">
<p>The deployment tools must use the
<code>addToExcludedPolicy</code> method to add the <code>EJBMethodPermission</code> objects
resulting from the translation of the <code>exclude-list</code> to the excluded
policy statements of the <code>PolicyConfiguration</code> object.</p>
</div>
</div>
<div class="sect4">
<h5 id="a524"><a class="anchor" href="#a524"></a>3.1.5.3. Translating Jakarta Enterprise Beans security-role-ref Elements</h5>
<div class="paragraph">
<p>For each <code>security-role-ref</code> element
appearing in the deployment descriptor, a corresponding
<code>EJBRoleRefPermission</code> must be created. The value of the <code>ejb-name</code> element
within the element containing the <code>security-role-ref</code> element must be used
as the name of the <code>EJBRoleRefPermission</code>. The actions used to construct
the permission must be the value of the <code>role-name</code> (that is the
reference), appearing in the <code>security-role-ref</code>. The deployment tools
must call the <code>addToRole</code> method on the <code>PolicyConfiguration</code> object to
add a policy statement corresponding to the <code>EJBRoleRefPermission</code> to the
role identified in the <code>role-link</code> appearing in the <code>security-role-ref</code>.</p>
</div>
<div class="paragraph">
<p>Additional <code>EJBRoleRefPermission</code> objects must
be added to the <code>PolicyConfiguration</code> as follows. For each element in the
deployment descriptor for which the Jakarta Enterprise Beans descriptor schema
supports<sup class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup> inclusion of <code>security-role-ref</code> elements,
an EJBRoleRefPermission must be added to each <code>security-role</code> of the
application whose name does not appear as the <code>role-name</code> in a
<code>security-role-ref</code> within the element. If the “any authenticated user”
<code>role-name</code> , “**”, does not appear in a <code>security-role-ref</code> within the
element, a <code>EJBRoleRefPermission</code> must also be added for it. The name of
each such <code>EJBRoleRefPermission</code> must be the value of the <code>ejb-name</code> element
within the element in which the <code>security-role-ref</code> elements could
otherwise occur. The actions (that is, reference) of each such
<code>EJBRoleRefPermission</code> must be the corresponding (non-appearing)
<code>role-name</code> . The resulting permissions must be
added<sup class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup>
to the corresponding roles by calling the
<code>addToRole</code> method on the <code>PolicyConfiguration</code> object.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a527"><a class="anchor" href="#a527"></a>3.1.6. Deploying an Application or Module</h4>
<div class="paragraph">
<p>The application server’s deployment tools
must translate the declarative authorization policy appearing in the
application or module deployment descriptor(s) into policy statements
within the <code>Policy</code> providers used by the containers to which the
components of the application or module are being deployed. In Jakarta Servlet
containers, the policy statements resulting from the deployment and
initialization of a web module, must represent the effects of any
programmatic registration and security configuration of servlets that
occurred during the initialization of the module.</p>
</div>
<div class="paragraph">
<p>When a module is deployed, its policy context
must be linked to all the other policy contexts with which it must share
the same principal-to-role mapping. When an application is deployed,
every policy context of the application must be linked to every other
policy context of the application with which it shares a common Policy
provider. <code>Policy</code> contexts are linked<sup class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnotedef_14" title="View footnote.">14</a>]</sup>
by calling the linkConfiguration method on the <code>PolicyConfiguration</code> objects of the
provider.</p>
</div>
<div class="paragraph">
<p>After the translation and linking has
occurred (note that they may occur in either order) for a policy
context, the <code>commit</code> method must be called on the corresponding
<code>PolicyConfiguration</code> object to place it in service such that its policy
statements will be assimilated by the corresponding <code>Policy</code> providers.
These three operations, translate, link and commit, must be performed
for all of the policy contexts of the application.</p>
</div>
<div class="paragraph">
<p>Once the translation, linking, and committing
has occurred, a call must be made to <code>Policy.refresh</code> on the Policy
provider used by each of the containers to which the application or
module is being deployed. The calls to <code>Policy.refresh</code> must occur
before the containers will accept requests for the deployed resources.
If a module corresponding to a policy context may have inter-module,
initialization-time, dependencies that must be satisfied before the
translation of the policy context of the dependent module can be
completed<sup class="footnote">[<a id="_footnoteref_15" class="footnote" href="#_footnotedef_15" title="View footnote.">15</a>]</sup>,
the <code>commit</code> of the depended upon
modules must occur before the initialization of the dependent module,
and the calls to <code>Policy.refresh</code> described above must additionally
occur after the processing of the depended upon modules and before the
initialization of the dependent module.</p>
</div>
<div class="paragraph">
<p>The policy context identifiers corresponding
to the deployed application or module must be recorded in the
application server so that they can be used by containers to establish
the policy context as required by <a href="#a707">Setting the Policy Context</a> of the <a href="#a556">Policy Decision and Enforcement Subcontract</a>, and such that the Deployer
may subsequently remove or modify the corresponding policy contexts as a
result of the undeployment or redeployment of the application.</p>
</div>
</div>
<div class="sect3">
<h4 id="a533"><a class="anchor" href="#a533"></a>3.1.7. Undeploying an Application or Module</h4>
<div class="paragraph">
<p>To ensure that there is not a period during
undeployment when the removal of policy statements on application
components renders what were protected components unprotected, the
application server must stop dispatching requests for the application’s
components before undeploying an application or module.</p>
</div>
<div class="paragraph">
<p>To undeploy an application or module, the
deployment tools must indicate at all the <code>Policy</code> providers to which
policy contexts of the application or module have been deployed that the
policy contexts associated with the application or module that have been
configured in the provider are to be removed from service. A deployment
tool indicates that a policy context is to be removed from service
either by calling <code>getPolicyConfiguration</code> with the identifier of the
policy context on the provider’s <code>PolicyConfigurationFactory</code> or by
calling delete on the corresponding <code>PolicyConfiguration</code> object. If the
<code>getPolicyConfiguration</code> method is used, the value <code>true</code> should be passed
as the second argument to cause the corresponding policy statements to
be deleted from the context. After the policy contexts are marked for
removal from service, a call must be made to <code>Policy.refresh</code> on all of
the <code>Policy</code> providers from which at least one module of the application
or module was marked for removal from service.</p>
</div>
</div>
<div class="sect3">
<h4 id="a536"><a class="anchor" href="#a536"></a>3.1.8. Deploying to an existing Policy Configuration</h4>
<div class="paragraph">
<p>Containers are not required to deploy to an
existing policy configuration. Containers that chose to provide this
functionality must satisfy the following requirements.</p>
</div>
<div class="paragraph">
<p>To associate an application or module with an
existing set of linked policy contexts, the identifiers of the existing
policy contexts must be applied by the relevant containers in fulfilling
their obligations as defined in the <a href="#a556">Policy Decision and Enforcement Subcontract</a>. The policy contexts should
be verified for existence, by calling the <code>inService</code> method of the
<code>PolicyConfigurationFactory</code> of the Policy providers of the relevant
containers. The deployment tools must call <code>Policy.refresh</code> on the
Policy provider of each of the relevant containers, and the containers
must not perform pre-dispatch decisions or dispatch requests for the
deployed resources until these calls have completed.</p>
</div>
<div class="paragraph">
<p>In Jakarta Servlet containers, if any
programmatic registration and security configuration of servlets has
occurred during the initialization of a web module associated with a
pre-exiting policy context, the corresponding <code>PolicyConfiguration</code> object
must be opened, its policy statements must be removed, and the policy
translation of the module must be repeated to include the programmatic
effects. The <code>PolicyConfiguration</code> object must be committed, and an
additional call to <code>Policy.refresh</code> must be made after all such
<code>PolicyConfiguration</code> objects are committed.</p>
</div>
</div>
<div class="sect3">
<h4 id="a540"><a class="anchor" href="#a540"></a>3.1.9. Redeploying a Module</h4>
<div class="paragraph">
<p>Containers are not required to implement
redeployment functionality. Containers that chose to provide this
functionality must satisfy the following requirements.</p>
</div>
<div class="paragraph">
<p>To ensure redeployment does not create a
situation where the removal of policy statements on application
components renders what were protected components unprotected, the
application server must stop dispatching requests for the application’s
components before redeployment begins. The application server must not
resume dispatching requests for the application’s components until after
the calls to <code>Policy.refresh</code>, described in <a href="#a527">Deploying an Application or Module</a>,
have completed.</p>
</div>
<div class="paragraph">
<p>To redeploy a module, the deployment tools
must indicate at all of the Policy providers to which the module is to
be redeployed that the policy context associated with the module is to
be removed from service. If the module is to be redeployed to the same
policy context at a provider, all policy statements and linkages must be
removed from the policy context at the provider. After the policy
contexts have been marked for removal from service and emptied of policy
statements and linkages (as necessary), the deployment tools must
proceed as described in <a href="#a527">Deploying an Application or Module</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a544"><a class="anchor" href="#a544"></a>3.2. What the Provider Must Do</h3>
<div class="paragraph">
<p>The provider must include an implementation
of the <code>jakarta.security.jacc.PolicyConfigurationFactory</code> class along with
a matched implementation of a class that implements the
<code>jakarta.security.jacc.PolicyConfiguration</code> interface. In addition to
providing a <code>PolicyConfiguration</code> interface for integration with the
application server’s deployment tools, the provider must also include a
management interface for policy administrators to use to grant the
collections of permissions that comprise roles, to principals. This
interface need not be standardized.</p>
</div>
<div class="paragraph">
<p>The provider must ensure that all of the
permissions added to a role in a policy context are granted to any
principal mapped to the role by the policy administrator. For the any
“authenticated user role”, “**”, and unless an application specific
mapping has been established for this role, the provider must ensure
that all permissions added to the role are granted to any authenticated
user. The provider must ensure that the same principal-to-role mappings
are applied to all linked policy contexts.</p>
</div>
<div class="paragraph">
<p>The provider must ensure that excluded policy
statements take precedence over overlapping unchecked policy statements,
and that both excluded and unchecked policy statements take precedence
over overlapping role based policy statements.</p>
</div>
<div class="paragraph">
<p>This specification does not prescribe the
policy language or the methods used within providers to implement the
policy and role requirements described above.</p>
</div>
</div>
<div class="sect2">
<h3 id="a549"><a class="anchor" href="#a549"></a>3.3. Permission to Configure Policy</h3>
<div class="paragraph">
<p>The <code>getPolicyConfigurationFactory</code>, and <code>inService</code> methods of the
abstract factory class,
<code>jakarta.security.jacc.PolicyConfigurationFactory</code>, must throw a
<code>SecurityException</code> when called by an <code>AccessControlContext</code> that has not been
granted the “setPolicy” <code>SecurityPermission</code>.</p>
</div>
<div class="paragraph">
<p>The <code>getPolicyConfiguration</code> method of all implementations of the
<code>PolicyConfigurationFactory</code> abstract class must throw a
<code>SecurityException</code> when called by an <code>AccessControlContext</code> that has not been
granted the “setPolicy” <code>SecurityPermission</code>.</p>
</div>
<div class="paragraph">
<p>All of the public methods of all of the
concrete implementations of the <code>PolicyConfiguration</code> interface must
throw a <code>SecurityException</code> when called by an <code>AccessControlContext</code> that
has not been granted the “setPolicy” <code>SecurityPermission</code>.</p>
</div>
<div class="paragraph">
<p>In cases where a required permission is not
held by a caller, the implementation must return without changing the
state of the policy statement repository.</p>
</div>
<div class="paragraph">
<p>The containers of an application server must
be granted the “getPolicy” <code>SecurityPermission</code> and the “setPolicy”
<code>SecurityPermission</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a556"><a class="anchor" href="#a556"></a>4. Policy Decision and Enforcement Subcontract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="#a556">Policy Decision and Enforcement Subcontract</a> defines the interactions between
container policy enforcement points and the providers that implement the
policy decisions required by Jakarta EE containers.</p>
</div>
<div class="sect2">
<h3 id="a558"><a class="anchor" href="#a558"></a>4.1. Policy Enforcement by Servlet Containers</h3>
<div class="paragraph">
<p>Jakarta Servlet containers must employ the methods
defined in the following subsections to enforce the authorization
policies established for web resources.</p>
</div>
<div class="sect3">
<h4 id="a560"><a class="anchor" href="#a560"></a>4.1.1. Permission Names for Transport and Pre-Dispatch Decisions</h4>
<div class="paragraph">
<p>The name of the permission checked in a
transport or pre-dispatch decision must be the unqualified request URI
minus the context path. All colon characters occurring within the name
must be represented using escaped encoding<sup class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnotedef_16" title="View footnote.">16</a>]</sup>
For
the special case where this transformation of the request URI yields the
URLPattern "/", the empty string URLPattern, "", must be used as the
permission name.</p>
</div>
<div class="paragraph">
<p>For the special case where the empty string
must be substituted for the "/" pattern in the permission evaluation,
all target related processing (including servlet mapping, filter
mapping, and form based login processing) must be performed using the
original pattern, "/".</p>
</div>
</div>
<div class="sect3">
<h4 id="a563"><a class="anchor" href="#a563"></a>4.1.2. Evaluation of Transport Guarantees</h4>
<div class="paragraph">
<p>The Jakarta Servlet container must obtain a
<code>WebUserDataPermission</code> object with name obtained from the request URI as
defined in <a href="#a560">Permission Names for Transport and Pre-Dispatch Decisions</a>. The actions of the obtained
permission must be composed of the HTTP method of the request and a
protection value describing the transport layer protection of the
connection on which the request arrived. The protection value must be as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the request arrived on a connection
deemed by the container to be protected for confidentiality, a
protection value of “:CONFIDENTIAL” must be used.</p>
</li>
<li>
<p>If the request arrived on a connection
deemed by the container to be protected for integrity (but not
confidentiality), a protection value of “:INTEGRAL” must be used.</p>
</li>
<li>
<p>If the request arrived on a connection
deemed by the container to be unprotected, the actions used in the
permission construction must contain only the HTTP method of the
request.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Servlet container must use one of the
methods described in <a href="#a727">Checking AccessControlContext Independent Grants</a> to test if access to the
resource using the method and connection type encapsulated in the
<code>WebUserDataPermission</code> is permitted. If a <code>SecurityException</code> is thrown in
the permission determination, it must be caught, and the result of the
determination must be that access to the resource using the method and
connection type is not permitted. If access is not permitted, the
request must be redirected as defined by the Jakarta Servlet Specification. If
access is permitted, the request must be subjected to a pre-dispatch
decision.</p>
</div>
</div>
<div class="sect3">
<h4 id="a569"><a class="anchor" href="#a569"></a>4.1.3. Pre-dispatch Decision</h4>
<div class="paragraph">
<p>The Jakarta Servlet container must obtain a
<code>WebResourcePermission</code> object with name obtained from the request URI as
defined in <a href="#a560">Permission Names for Transport and Pre-Dispatch Decisions</a>. The actions of the obtained
permission must be the HTTP method of the request. The Jakarta Servlet container
must use one of the methods described in
<a href="#a736">Checking the Caller for a Permission</a>
to test if the <code>WebResourcePermission</code> has been granted to the caller. If
a <code>SecurityException</code> is thrown in the permission determination, it must
be caught, and the result of the determination must be that the
permission is not granted to the caller. The Jakarta Servlet container may only
dispatch the request to the web resource if the <code>WebResourcePermission</code> is
determined to be granted to the caller. Otherwise the request must be
rejected with the appropriate HTTP error message as defined by the
Jakarta Servlet Specification.</p>
</div>
<div class="paragraph">
<p>Before it dispatches a call to a web
resource, the container must associate with the call thread an
<code>AccessControlContext</code> containing the principals of (only) the target
component’s runAs identity (as defined in
<a href="#a703">Component runAs Identity</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="a572"><a class="anchor" href="#a572"></a>4.1.4. Application Embedded Privilege Test</h4>
<div class="paragraph">
<p>When a call is made from a web resource to
<code>isUserInRole(String roleName)</code> the implementation of this method must
obtain a <code>WebRoleRefPermission</code> object with name corresponding to the
<code>servlet-name</code> of the calling web resource and with actions equal to the
roleName used in the call. For the special case where the call to
<code>isUserInRole</code> is made from a web resource that is not mapped to a
Servlet (i.e. by a <code>servlet-mapping</code>), the name of the
<code>WebRoleRefPermission</code> must be the empty string. In either case, the
implementation of the <code>isUserInRole</code> method must then use one of the
methods described in <a href="#a736">Checking the Caller for a Permission</a> to determine if the <code>WebRoleRefPermission</code> has
been granted to the caller. If a <code>SecurityException</code> is thrown in the
permission determination, it must be caught, and the result of the
determination must be that the permission is not granted to the caller.
If it is determined that the <code>WebRoleRefPermission</code> has been granted to
the caller, <code>isUserInRole</code> must return true. Otherwise the return value
must be false.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a574"><a class="anchor" href="#a574"></a>4.2. Provider Support for Servlet Policy Enforcement</h3>
<div class="paragraph">
<p>In support of the policy enforcement done by
servlet containers, providers must implement the policy decision
functionality defined in the following subsections.</p>
</div>
<div class="sect3">
<h4 id="a576"><a class="anchor" href="#a576"></a>4.2.1. Servlet Policy Decision Semantics</h4>
<div class="paragraph">
<p>A Policy provider must use the combined
policy statements of the default policy context (as defined in
<a href="#a747">Default Policy Context</a>) and of the
policy context identified by calling <code>PolicyContext.getContextID</code> to
determine if they imply the permission being checked. If one or more
excluded policy statements imply the checked permission, the evaluation
may terminate and the checked permission must be determined not to be
granted. Otherwise, if one or more unchecked policy statements imply the
checked permission, the checked permission must be determined to be
granted independent of <code>AccessControlContext</code>. If the status of the
checked permission is not resolved by the excluded and unchecked
evaluations, it must be determined if a permission that implies the
checked permission has been granted to the <code>AccessControlContext</code> being
tested for the permission. The checked permission may only be determined
to be granted if a permission that implies the checked permission has
been granted to the <code>AccessControlContext</code>. Otherwise the permission must
be determined not to be granted. The policy decision semantics are
dependent on permission specific rules for determining if the
permissions in policy statements imply the permission being checked.</p>
</div>
<div class="paragraph">
<p>The <code>WebResourcePermission</code>,
<code>WebUserDataPermission</code>, and <code>WebRoleRefPermission</code> specific rules used to
determine if the permissions in policy statements imply a checked
permission are defined in the next sections.</p>
</div>
<div class="sect4">
<h5 id="a579"><a class="anchor" href="#a579"></a>4.2.1.1. Matching Qualified URL Pattern Names</h5>
<div class="paragraph">
<p>Qualified URL Patterns names were described
in a subsection of <a href="#a281">Translating security-constraint Elements</a>. The <code>WebResourcePermission</code> and
<code>WebUserDataPermission</code> classes use the term URLPatternSpec to describe
the syntax of qualified URL pattern names. The URLPatternSpec syntax is
defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>URLPatternList ::= URLPattern | URLPatternList colon URLPattern
URLPatternSpec ::= URLPattern | URLPattern colon URLPatternList
name ::= URLPatternSpec</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given this syntax, A reference URLPatternSpec
matches an argument URLPatternSpec if all of the following are true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first URLPattern in the argument
URLPatternSpec is matched by the first URLPattern in the reference
URLPatternSpec.</p>
</li>
<li>
<p>The first URLPattern in the argument
URLPatternSpec is NOT matched by any URLPattern in the URLPatternList of
the reference URLPatternSpec.</p>
</li>
<li>
<p>If the first URLPattern in the argument
URLPatternSpec matches the first URLPattern in the reference
URLPatternSpec, then every URLPattern in the URLPatternList of the
reference URLPatternSpec must be matched by a URLPattern in the
URLPatternList of the argument URLPatternSpec.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The comparisons described above are case
sensitive, and all matching is according to the rules defined in
<a href="#a347">Servlet URL-Pattern Matching Rules</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="a589"><a class="anchor" href="#a589"></a>4.2.1.2. Matching HTTP Method Specifications</h5>
<div class="paragraph">
<p>The <code>WebResourcePermission</code> and
<code>WebUserDataPermission</code> classes use the term HTTPMethodSpec to describe
the syntax of the HTTP method component of their actions values. The
HTTPMethodSpec syntax is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>HTTPMethodSpec ::= null | emptyString |
    HTTPMethodExceptionList | HTTPMethodList</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given this syntax, a reference HTTPMethodSpec
matches an argument HTTPMethodSpec if all of the HTTP methods
represented by the actions of the argument specification are included in
the method subset represented by the actions of the reference
specification.</p>
</div>
<div class="paragraph">
<p>A null or emptyString HTTPMethodSpec
represents the entire set of HTTP methods, and as such, matches any
argument HTTPMethodSpec. An
HTTPMethodExceptionList<sup class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnotedef_17" title="View footnote.">17</a>]</sup>
matches any subset that
does not include a method named in the exception list. A reference
HTTPMethodList matches an argument HTTPMethodList if the methods named
in the argument list are all named in the reference list. An
HTTPMethodList never matches an argument HTTPMethodExceptionList.
Neither an HTTPMethodList or an HTTPMethodExceptionList matches a null
or emptyString HTTPMethodSpec.</p>
</div>
</div>
<div class="sect4">
<h5 id="a595"><a class="anchor" href="#a595"></a>4.2.1.3. WebResourcePermission Matching Rules</h5>
<div class="paragraph">
<p>A reference <code>WebResourcePermission</code> implies an
argument permission if all of the following are true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The argument permission is an instanceof
<code>WebResourcePermission</code>.</p>
</li>
<li>
<p>The name of the argument permission is
matched by the name of the reference permission according to the rules
defined in <a href="#a579">Matching Qualified URL Pattern Names</a>.</p>
</li>
<li>
<p>The HTTP methods represented by the actions
of the argument permission are a subset of the HTTP methods represented
by the actions of the reference permission as defined in
<a href="#a589">Matching HTTP Method Specifications</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The comparisons described above are case
sensitive.</p>
</div>
</div>
<div class="sect4">
<h5 id="a601"><a class="anchor" href="#a601"></a>4.2.1.4. WebRoleRefPermission Matching Rules</h5>
<div class="paragraph">
<p>A reference <code>WebRoleRefPermission</code> implies an
argument permission if all of the following are true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The argument permission is an instanceof
<code>WebRoleRefPermission</code>.</p>
</li>
<li>
<p>The name of the argument permission is
equivalent to the name of the reference permission.</p>
</li>
<li>
<p>The actions (i.e role reference) of the
argument permission is equivalent to the actions (i.e role reference) of
the reference permission.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The comparisons described above are case
sensitive.</p>
</div>
</div>
<div class="sect4">
<h5 id="a607"><a class="anchor" href="#a607"></a>4.2.1.5. WebUserDataPermission Matching Rules</h5>
<div class="paragraph">
<p>A reference <code>WebUserDataPermission</code> implies an
argument permission if all of the following are true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The argument permission is an instanceof
<code>WebUserDataPermission</code>.</p>
</li>
<li>
<p>The name of the argument permission is
matched by the name of the reference permission according to the rules
defined in <a href="#a579">Matching Qualified URL Pattern Names</a>.</p>
</li>
<li>
<p>The HTTP methods represented by the actions
of the argument permission are a subset of the HTTP methods represented
by the actions of the reference permission as defined in
<a href="#a589">Matching HTTP Method Specifications</a>.</p>
</li>
<li>
<p>The <code>transportType</code> in the actions of the
reference permission either corresponds to the value "NONE", or equals
the <code>transportType</code> in the actions of the argument permission.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The comparisons described above are case
sensitive.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a614"><a class="anchor" href="#a614"></a>4.3. Policy Enforcement by Jakarta Enterprise Beans Containers</h3>
<div class="paragraph">
<p>Jakarta Enterprise Beans containers must employ the methods
defined in the following subsections to enforce the authorization
policies established for Jakarta Enterprise Beans resources.</p>
</div>
<div class="sect3">
<h4 id="a616"><a class="anchor" href="#a616"></a>4.3.1. Jakarta Enterprise Beans Pre-dispatch Decision</h4>
<div class="paragraph">
<p>The Jakarta Enterprise Beans container must obtain an
<code>EJBMethodPermission</code> object with name corresponding to the <code>ejb-name</code> of
the target resource and with actions that completely specify the
about-to-be-called method of the akarta Enterprise Bean by identifying the method
interface, method name, and method signature as defined for a methodSpec
in the documentation of the <code>EJBMethodPermission</code> class.</p>
</div>
<div class="paragraph">
<p>The Jakarta Enterprise Beans container must use one of the methods
described in <a href="#a736">Checking the Caller for a Permission</a> to determine if the <code>EJBMethodPermission</code> has been granted to
the caller. If a <code>SecurityException</code> is thrown in the permission
determination, it must be caught, and the result of the determination
must be that the permission is not granted to the caller. The Jakarta Enterprise Beans
container may only dispatch the request to the Jakarta Enterprise Bean resource, if the
<code>EJBMethodPermission</code> is determined to be granted to the caller. Otherwise
the request must be rejected with the appropriate exception, as defined
by the corresponding Jakarta Enterprise Beans specification.</p>
</div>
<div class="paragraph">
<p>Before it dispatches a call to a Jakarta Enterprise Bean, the
container must associate with the call thread an <code>AccessControlContext</code>
containing the principals of only the target Jakarta Enterprise Bean&#8217;s <code>runAs</code> identity (as
defined in <a href="#a703">Component runAs Identity</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="a620"><a class="anchor" href="#a620"></a>4.3.2. Jakarta Enterprise Beans Application Embedded Privilege Test</h4>
<div class="paragraph">
<p>When a Jakarta Enterprise Bean makes a call to
<code>isCallerInRole(String roleName)</code> the implementation of this method must
obtain an <code>EJBRoleRefPermission</code> object with name corresponding to the
<code>ejb-name</code> of the Jakarta Enterprise Bean making the call and with actions equal to the
<code>roleName</code> used in the call. The implementation of the <code>isCallerInRole</code>
method must then use one of the methods described in
<a href="#a736">Checking the Caller for a Permission</a>
to determine if the <code>EJBRoleRefPermission</code> has been granted to the caller.
If a <code>SecurityException</code> is thrown in the permission determination, it
must be caught, and the result of the determination must be that the
permission is not granted to the caller. If it is determined that the
<code>EJBRoleRefPermission</code> has been granted to the caller, then <code>isCallerInRole</code>
must return <code>true</code>. Otherwise the return value must be <code>false</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a622"><a class="anchor" href="#a622"></a>4.4. Provider Support for Jakarta Enterprise Beans Policy Enforcement</h3>
<div class="paragraph">
<p>In support of the policy enforcement done by
Jakarta Enterprise Beans containers, providers must implement the policy decision
functionality defined in the following subsections.</p>
</div>
<div class="sect3">
<h4 id="a624"><a class="anchor" href="#a624"></a>4.4.1. Jakarta Enterprise Beans Policy Decision Semantics</h4>
<div class="paragraph">
<p>A Policy provider must employ the policy
decision semantics described in <a href="#a576">Servlet Policy Decision Semantics</a> in the processing of Jakarta Enterprise Beans Policy decisions.</p>
</div>
<div class="paragraph">
<p>The <code>EJBMethodPermission</code> and
<code>EJBRoleRefPermission</code> specific rules used to determine if the permissions
in policy statements imply a checked permission are defined in the
following sections.</p>
</div>
<div class="sect4">
<h5 id="a627"><a class="anchor" href="#a627"></a>4.4.1.1. EJBMethodPermission Matching Rules</h5>
<div class="paragraph">
<p>A reference EJBMethodPermission implies an
argument permission, if all of the following are true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The argument permission is an instanceof
<code>EJBMethodPermission</code>.</p>
</li>
<li>
<p>The name of the argument permission is
equivalent to the name of the reference permission.</p>
</li>
<li>
<p>The methods to which the argument
permission applies (as defined in its actions) must be a subset of the
methods to which the reference permission applies (as defined in its
actions). This rule is satisfied if all of the following conditions are
met.</p>
<div class="ulist">
<ul>
<li>
<p>The method name of the reference permission
is null, the empty string, or equivalent to the method name of the
argument permission.</p>
</li>
<li>
<p>The method interface of the reference
permission is null, the empty string, or equivalent to the method
interface of the argument permission.</p>
</li>
<li>
<p>The method parameter type list of the
reference permission is null, the empty string, or equivalent to the
method parameter type list of the argument permission.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The comparisons described above are case
sensitive.</p>
</div>
<div class="paragraph">
<p><a href="#a639">EJBMethodPermission <a id="a639"></a>methodSpec Matching Examples</a> demonstrate the
properties of <code>EJBMethodPermission</code> matching by example.</p>
</div>
<table id="a639" class="tableblock frame-all grid-all center" style="width: 80%;">
<caption class="title">Table 4-6 EJBMethodPermission <a id="a639"></a>methodSpec Matching Examples</caption>
<colgroup>
<col style="width: 15%;"/>
<col style="width: 25%;"/>
<col style="width: 20%;"/>
<col style="width: 25%;"/>
<col style="width: 15%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><span class="small"><font size=".8em">type</font></span></th>
<th class="tableblock halign-center valign-top"><span class="small"><font size=".8em">methodInterface Spec</font></span></th>
<th class="tableblock halign-center valign-top"><span class="small"><font size=".8em">methodName Spec</font></span></th>
<th class="tableblock halign-center valign-top"><span class="small"><font size=".8em">methodParams Spec</font></span></th>
<th class="tableblock halign-center valign-top"><span class="small"><font size=".8em">implies checked permission</font></span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">checked permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">Home</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">doThis</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">java.lang.String</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em"></font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">yes</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">Home</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">yes</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">doThis</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">yes</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">empty string</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">java.lang.String</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">yes</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">Remote</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">doThis</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">java.lang.String</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">no</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">Home</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">doNotDoThis</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">java.lang.String</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">no</font></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">reference permission</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">Home</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">doThis</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">java.lang.byte</font></span></p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><span class="small"><font size=".8em">no</font></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="a697"><a class="anchor" href="#a697"></a>4.4.1.2. EJBRoleRefPermission Matching Rules</h5>
<div class="paragraph">
<p>A reference <code>EJBRoleRefPermission</code> implies an
argument permission, if all of the following are true.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The argument permission is an instanceof
<code>EJBRoleRefPermission</code>.</p>
</li>
<li>
<p>The name of the argument permission is
equivalent to the name of the reference permission.</p>
</li>
<li>
<p>The actions (i.e role reference) of the
argument permission is equivalent to the actions (i.e role reference) of
the reference permission.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The comparisons described above are case
sensitive.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a703"><a class="anchor" href="#a703"></a>4.5. Component runAs Identity</h3>
<div class="paragraph">
<p>The identity used by Jakarta Servlet or Jakarta Enterprise Beans
components in the operations they perform is configured by the Deployer.
This identity is referred to as the component’s <code>runAs</code> identity. By
default (and unless otherwise specified in the Jakarta Servlet or Jakarta Enterprise Beans
specifications), components are configured such that they are assigned
the identity of their caller (such as it is) as their <code>runAs</code> identity.
Alternatively, a Deployer may choose to assign an environment specific
identity as a component’s <code>runAs</code> identity. In this case, the container
must establish the specified identity as the component’s <code>runAs</code> identity
independent of the identity of the component’s caller.</p>
</div>
<div class="paragraph">
<p>When a Deployer configures an environment
specific component identity based on a deployment descriptor
specification that the component run with an identity mapped to a role,
those responsible for defining the principal-to-role mapping must ensure
that the specified identity is mapped to the role.</p>
</div>
<div class="paragraph">
<p>A container establishes a component’s <code>runAs</code>
identity by associating an <code>AccessControlContext</code> with the component’s
thread of execution. The container must ensure that the
<code>AccessControlContext</code> includes a <code>SubjectDomainCombiner</code>; and the container
must protect the <code>AccessControlContext</code> associated with a running
component such that, by default, the component is not granted
permissions sufficient to modify the <code>AccessControlContext</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="a707"><a class="anchor" href="#a707"></a>4.6. Setting the Policy Context</h3>
<div class="paragraph">
<p>A policy context identifier is set on a
thread by calling the <code>setContextID</code> method on the <code>PolicyContext</code> utility
class. The value of a thread’s policy context identifier is <code>null</code> until
the <code>setContextID</code> method is called. Before invoking <code>Policy</code> to evaluate a
transport guarantee or to perform a pre-dispatch decision, and before
dispatching into a Jakarta Servlet or Jakarta Enterprise Beans component, a container must ensure
that the thread’s policy context identifier identifies the policy
context corresponding to the instance of the module or application for
which the operation is being performed.</p>
</div>
<div class="paragraph">
<p>Containers must be granted the “setPolicy”
<code>SecurityPermission</code> independent of policy context identifier (or in all
policy contexts) as they need this permission to set the policy context
identifier.</p>
</div>
<div class="sect3">
<h4 id="a710"><a class="anchor" href="#a710"></a>4.6.1. Policy Context Handlers</h4>
<div class="paragraph">
<p>This specification requires that containers
register policy context handlers with the <code>PolicyContext</code> utility class
such that Policy providers can invoke these handlers to obtain
additional context to apply in their access decisions. Policy context
handlers are objects that implement the <code>PolicyContextHandler</code> interface.
To satisfy the requirements of this specification, containers are
required to provide and register with the <code>PolicyContext</code> class the policy
context handlers described in the following subsections. All of the
required context handlers must<a href="#a1268">19</a> return the value
null when activated outside of the scope of a container’s processing of
a component request. In this context, the scope of a container&#8217;s
processing of a component request begins when the container asks policy
to perform the corresponding pre-dispatch access decision and ends
either when the access decision returns a failed authorization or when
the dispatched request returns from the component to the container.</p>
</div>
<div class="paragraph">
<p>Policy providers must not call methods on or
modify the objects returned by the context handlers if these actions
will cause the container to fail in its processing of the associated
request.</p>
</div>
<div class="paragraph">
<p>Containers may delay the registration of
required context handlers until the first call to
<code>PolicyContext.getHandlerKeys</code>, or for a specific handler, until the
required context handler is activated (assuming <code>getHandlerKeys</code> has not
been called). When a required context handler for which registration has
been delayed is invoked, the container may return null, and must
complete the registration of the handler before returning.</p>
</div>
<div class="paragraph">
<p>A provider that is dependent on a handler,
should force registration of the handler in advance of the provider’s
processing of a component request for which the handler is required.
This can be accomplished by invoking the required handler during
initialization of the provider.</p>
</div>
<div class="sect4">
<h5 id="a715"><a class="anchor" href="#a715"></a>4.6.1.1. Container Subject Policy Context Handler</h5>
<div class="paragraph">
<p>All Jakarta Servlet and Jakarta Enterprise Beans containers must register
a <code>PolicyContextHandler</code> whose <code>getContext</code> method returns a
<code>javax.security.auth.Subject</code> object when invoked with the key
“javax.security.auth.Subject.container”. When this handler is activated
as the result of a policy decision performed by a container before
dispatch into a component, this handler must return a <code>Subject</code> containing the principals
and credentials of the “caller” of the component.
When activated from the scope of a dispatched call, this
handler must return a <code>Subject</code> containing the principals and credentials
corresponding to the identity established by the container prior to the
activation of the handler. The identity established by the container
will either be the component’s <code>runAs</code> identity or the caller’s identity
(e.g. when a Jakarta Enterprise Beans component calls <code>isCallerInRole</code>). In all cases, if
the identity of the corresponding <code>Subject</code> has not been established or
authenticated, this handler must return the value null.</p>
</div>
</div>
<div class="sect4">
<h5 id="a719"><a class="anchor" href="#a719"></a>4.6.1.2. SOAPMessage Policy Context Handler</h5>
<div class="paragraph">
<p>All Jakarta Enterprise Beans containers must register a
<code>PolicyContextHandler</code> whose <code>getContext</code> method returns a
<code>jakarta.xml.soap.SOAPMessage</code> object when invoked with the key
“jakarta.xml.soap.SOAPMessage”. If the request being processed by the
container arrived as a SOAP request at the <code>ServiceEndpoint</code> method
interface, the container must return the SOAP message object when this
handler is activated. Otherwise, this handler must return the value
null.</p>
</div>
</div>
<div class="sect4">
<h5 id="a721"><a class="anchor" href="#a721"></a>4.6.1.3. HttpServletRequest Policy Context Handler</h5>
<div class="paragraph">
<p>All Jakarta Servlet containers must register a
<code>PolicyContextHandler</code> whose <code>getContext</code> method returns a
<code>jakarta.servlet.http.HttpServletRequest</code> object when invoked with the key
“jakarta.servlet.http.HttpServletRequest”. When this handler is activated,
the container must return the <code>HttpServletRequest</code> object corresponding to
the component request being processed by the container.</p>
</div>
</div>
<div class="sect4">
<h5 id="a723"><a class="anchor" href="#a723"></a>4.6.1.4. EnterpriseBean Policy Context Handler</h5>
<div class="paragraph">
<p>All Jakarta Enterprise Beans containers must register a
<code>PolicyContextHandler</code> whose <code>getContext</code> method returns a
<code>jakarta.ejb.EnterpriseBean</code> object when invoked with the key
“jakarta.ejb.EnterpriseBean”. When this handler is activated, the
container must return the <code>EnterpriseBean</code> object corresponding to the Jakarta Enterprise Beans
component request (as restricted below) being processed by the
container. The <code>EnterpriseBean</code> object must only be returned when this
handler is activated within the scope of a container&#8217;s processing of a
business method of the Jakarta Enterprise Beans <code>Remote</code>, <code>Local</code>, or <code>ServiceEndpoint</code> interfaces
of the <code>EnterpriseBean</code> object. The value null must be returned if the
bean implementation class does not implement the
<code>jakarta.ejb.EnterpriseBean</code> interface.</p>
</div>
</div>
<div class="sect4">
<h5 id="a725"><a class="anchor" href="#a725"></a>4.6.1.5. Jakarta Enterprise Beans Arguments Policy Context Handler</h5>
<div class="paragraph">
<p>All EJB containers must register a
<code>PolicyContextHandler</code> whose <code>getContext</code> method returns an array of objects
(<code>Object[]</code>) containing the arguments of the Jakarta Enterprise Beans method invocation (in the
same order as they appear in the method signature) when invoked with the
key “jakarta.ejb.arguments”. The context handler must return the value
null when called in the context of a SOAP request that arrived at the
<code>ServiceEndpoint</code> method interface. Otherwise, the context handler must
return the array of objects corresponding to the parameters of the Jakarta Enterprise Beans
component invocation. If there are no parameters in the method
signature, the context handler must return an empty array of <code>Object</code>
(i.e. <code>Object[0]</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a727"><a class="anchor" href="#a727"></a>4.7. Checking AccessControlContext Independent Grants</h3>
<div class="paragraph">
<p>This section describes the techniques used by
containers to check permissions for which policy is defined in terms of
the operation defined by the permission and independent of properties of
the invocation context represented in the <code>AccessControlContext</code>. The
<code>WebUserDataPermission</code> policy statements resulting from the translation
of Jakarta Servlet <code>user-data-constraint</code> elements are an example of such
permissions. A container must use one of the following techniques to
check an instance of a permission for which policy is defined
independent of <code>AccessControlContext</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container calls
<code>AccessControlContext.checkPermission</code> with the permission being checked
as argument. The call to <code>checkPermission</code> may be made on any
<code>AccessControlContext</code>. If <code>checkPermission</code> throws an
<code>AccessControlException</code>, the permission is not granted. Otherwise the
permission is granted.</p>
</li>
<li>
<p>The container calls
<code>AccessController.checkPermission</code> with the permission being checked.
The value of the current thread’s <code>AccessControlContext</code> is irrelevant in
the access determination. If <code>checkPermission</code> throws an
<code>AccessControlException</code>, the checked permission is not granted. Otherwise
the permission is granted.</p>
</li>
<li>
<p>The container calls
<code>SecurityManager.checkPermission</code> with the permission being checked. If
<code>checkPermission</code> throws an `AccessControlExceptio`n, the checked
permission is not granted. Otherwise the permission is granted.</p>
</li>
<li>
<p>The container calls
<code>Policy.implies</code> with two arguments; the permission being checked and a
<code>ProtectionDomain</code> that need not be constructed with principals. The
checked permission is granted if <code>Policy.implies</code> returns true. Otherwise,
the permission is not granted.</p>
</li>
<li>
<p>The container calls
<code>java.security.Policy.getPermissions</code> with a <code>ProtectionDomain</code> that need
not be constructed with principals. The container must call the
<code>implies</code> method on the returned <code>PermissionCollection</code> using the
permission being checked as argument. The checked permission is granted
if the <code>PermissionCollection</code> implies it. Otherwise, the permission is not
granted. This technique is supported but not recommended.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Prior to using any of the techniques
described in this section, the container must have established a policy
context identifier as defined in <a href="#a707">Setting the Policy Context</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="a736"><a class="anchor" href="#a736"></a>4.8. Checking the Caller for a Permission</h3>
<div class="paragraph">
<p>A container must determine if the caller has
been granted a permission by evaluating the permission in the context of
an <code>AccessControlContext</code>, <code>ProtectionDomain</code>, or <code>Subject</code> containing the
principals of (only) the caller<sup class="footnote">[<a id="_footnoteref_18" class="footnote" href="#_footnotedef_18" title="View footnote.">18</a>]</sup>. If the caller’s
identity has been asserted or vouched for by a trusted authority (other
than the caller), the principals of the authority must not be included
in the principals of the caller. A container must use one of the
following techniques to determine if a permission has been granted to
the caller.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container calls
<code>AccessControlContext.checkPermission</code> with the permission as argument.
The call to <code>checkPermission</code> must be made on an <code>AccessControlContext</code>
that contains the principals of the caller. If <code>checkPermission</code> throws an
<code>AccessControlException</code>, the permission is not granted to the caller.
Otherwise the permission is granted.</p>
</li>
<li>
<p>The container calls
<code>AccessController.checkPermission</code> with the permission as argument. The
<code>AccessControlContext</code> associated with the thread on which the call to
<code>checkPermission</code> is made must contain the principals of the caller. If
<code>checkPermission</code> throws an <code>AccessControlException</code>, the permission is
not granted to the caller. Otherwise the permission is granted.</p>
</li>
<li>
<p>The container calls
<code>SecurityManager.checkPermission</code> with the permission as argument. The
<code>AccessControlContext</code> associated with the thread on which the call to
<code>checkPermission</code> is made must contain the principals of the caller. If
<code>checkPermission</code> throws an <code>AccessControlException</code>, the permission is not
granted to the caller. Otherwise the permission is granted.</p>
</li>
<li>
<p>container calls
<code>Policy.implies</code> with two arguments; the permission being checked and a
ProtectionDomain constructed with the principals of the caller. The
boolean result returned by <code>Policy.implies</code> indicates whether or not the
permission has been granted to the caller.</p>
</li>
<li>
<p>The container calls
<code>java.security.Policy.getPermissions</code> with an argument <code>ProtectionDomain</code>
that was constructed with the principals of the caller. The container
must call the <code>implies</code> method on the returned <code>PermissionCollection</code>
using the permission being checked as argument. If the
PermissionCollection implies the permission being tested, the permission
has been granted to the caller. Otherwise it has not. This technique is
supported but not recommended<sup class="footnote">[<a id="_footnoteref_19" class="footnote" href="#_footnotedef_19" title="View footnote.">19</a>]</sup></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Prior to using any of the techniques
described in this section, the container must have established a policy
context identifier as defined in <a href="#a707">Setting the Policy Context</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="a745"><a class="anchor" href="#a745"></a>4.9. Missing Policy Contexts</h3>
<div class="paragraph">
<p>A Policy provider must return that a tested
permission has not been granted if it acquires a non-null policy context
identifier by calling <code>getContextID</code> on the <code>PolicyContext</code> class and the
<code>inService</code> method of the <code>PolicyConfigurationFactory</code> associated with
the provider would return <code>false</code> if called with the policy context
identifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="a747"><a class="anchor" href="#a747"></a>4.10. Default Policy Context</h3>
<div class="paragraph">
<p>The default policy context contains the
policy statements that apply to the JRE independent of the policy
contexts defined as the result of the deployment of modules or
applications in containers. The policy context identifier of the default
policy context is the null value. The default policy context is never
linked to another <code>PolicyConfiguration</code>, and as such does not share the
principal-to-role mapping of any other policy context.</p>
</div>
<div class="paragraph">
<p>A Policy provider must include the policy
statements of the default policy context in every access determination
it performs. A Policy provider that either does not call
<code>PolicyContext.getContexdID</code>, or does so and acquires the identifier of
the default policy context, must use only the policy statements of the
default policy context to perform its access determination.</p>
</div>
</div>
<div class="sect2">
<h3 id="a750"><a class="anchor" href="#a750"></a>4.11. Policy Compatibility Requirements</h3>
<div class="paragraph">
<p>To be compatible with this contract, every
JRE of an application server must perform all of the policy
decisions defined by this contract by interacting with the
<code>java.security.Policy</code> instance available in the JRE via the
<code>java.security.Policy.getPolicy</code> method.</p>
</div>
<div class="paragraph">
<p>If an application server or JRE employs a
custom <code>SecurityManager</code>, the necessary reliance on <code>Policy</code> object may be
accomplished by ensuring that the custom <code>SecurityManager</code> relies on the
appropriate (as defined above) <code>Policy</code> object for all of the policy
decisions defined by this contract.</p>
</div>
</div>
<div class="sect2">
<h3 id="a753"><a class="anchor" href="#a753"></a>4.12. Optimization of Permission Evaluations</h3>
<div class="paragraph">
<p>Containers may employ the following
optimizations (based on reuse) when the result obtained by repeating the
evaluation will not differ from the previous result or when the time
since the previous evaluation is less than the container’s threshold for
being effected by policy changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Containers may reuse an authorization
result obtained from a previous equivalent permission evaluation.</p>
</li>
<li>
<p>Containers may reuse an authorization
result obtained for an unauthenticated caller (i.e. a caller with no
principals) performed as defined in <a href="#a736">Checking the Caller for a Permission</a> to grant, independent of caller
identity, any permission implied by the unauthenticated result.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This specification does not prescribe how a
container determines when a repeated evaluation will return the same
result. That said, one way that containers could make this determination
is if they are, and can determine if they will be, notified of policy
changes and if they can establish that their policy provider does not
employ additional context (such as could be acquired by calling a
<code>PolicyContextHandler</code>) in its policy evaluations.</p>
</div>
<div class="paragraph">
<p>Common practice for containers to receive
such notification could be for them to register to the
<code>"java.security.Policy.supportsReuse"</code> key a <code>PolicyContextHandler</code> and
for the container to determine if its provider will notify it of policy
changes by making a test call to the provider’s <code>refresh</code> method. Only a
provider that is compatible with the optimizations described above
(including because it does not employ additional context in its policy
evaluations) may deliver notice of policy changes by activating this
handler when its <code>refresh</code> method is called.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-documents"><a class="anchor" href="#related-documents"></a>Appendix A: Related Documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This specification refers to the following documents. The terms used to refer to the documents in this
specification are included in brackets.</p>
</div>
<div class="paragraph">
<p><em>S. Bradner, “Key words for use in RFCs to Indicate Requirement Levels,” RFC 2119, Harvard University, March 1997, [Keywords]</em></p>
</div>
<div class="paragraph">
<p><em>Jakarta EE 9 Specification [Jakarta EE 9 Specification], available at: <a href="https://github.com/eclipse-ee4j/jakartaee-platform" class="bare">https://github.com/eclipse-ee4j/jakartaee-platform</a></em></p>
</div>
<div class="paragraph">
<p><em>Jakarta Servlet Specification, Version 5.0 [Jakarta Servlet Specification], available at: <a href="https://github.com/eclipse-ee4j/servlet-api" class="bare">https://github.com/eclipse-ee4j/servlet-api</a></em></p>
</div>
<div class="paragraph">
<p><em>Jakarta Enterprise Beans, Version 4.0 [Jakarta Enterprise Beans Specification], available at: _https://github.com/eclipse-ee4j/ejb-api</em></p>
</div>
<div class="paragraph">
<p><em>Java™, Standard Edition, Version 8.0 API Specification [Java SE 8 Specification], available at: <a href="https://docs.oracle.com/javase/8/docs/api" class="bare">https://docs.oracle.com/javase/8/docs/api</a></em></p>
</div>
<div class="paragraph">
<p><em>Java™ Authentication and Authorization Service</em> (JAAS) [JAAS Specification], available at: <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html_" class="bare">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html_</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="issues"><a class="anchor" href="#issues"></a>Appendix B: Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections document the more
noteworthy issues that have been discussed by the Expert Group. These
sections are included in the Final Release as they provide insight into
the discussions and decisions which shaped the form of the current
specification. All of these issues have been resolved, and their
resolutions are described below and reflected in the document.</p>
</div>
<div class="sect2">
<h3 id="configuration-context-and-policy-context-identifiers"><a class="anchor" href="#configuration-context-and-policy-context-identifiers"></a>B.1. Configuration Context and Policy Context Identifiers</h3>
<div class="paragraph">
<p>The <code>PolicyConfiguration</code> interface associates
Configuration Context Identifiers with policy statements, which
themselves contain embedded policy context identifiers. There needs to
be more explanation of the purpose and use models of these context
identifiers. Configuration context identifiers should only be assigned
by the Provider, to eliminate problems with ambiguity. In the case of
createRole, we allow a configuration context identifier to be passed to
createRole so that one configuration context id can be used for all of
the roles in an application/module. It would probably be a good idea to
allow the unchecked and excluded policy collections to also share the
same context id. This would reduce the complexity of the identity
mapping, but it would make it harder for the provider to ensure
uniqueness of identifiers. We also want to support deployment and
undeployment of modules, within a multi-module policy configuration
context. That is, the modules share the same roles, but their individual
policy statements are differentiated by policy context id within these
roles.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Note -</strong> Regarding policy context identifiers, it will not be possible to
surgically replace the policy statements corresponding to a module, if
modules within a policy configuration context share the same policy
context identifiers.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong> <code>The PolicyConfiguration</code> interface has been redesigned to support both
the factory and finder patterns, and to include an <code>inService</code> method to
allow a container to check if a <code>PolicyConfiguration</code> with a given
identifier already exists. The interface also includes the concept of
linked <code>PolicyConfigurations</code> to identify those <code>PolicyConfigurations</code> that
must share the same principal-to-role mappings.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a780"><a class="anchor" href="#a780"></a>B.2. Configuration of Permissions with Parameters</h3>
<div class="paragraph">
<p>The <code>PolicyConfiguration</code> interface is used to
communicate policy statements to <code>Policy</code>. An element of these statements
is a <code>PermissionCollection</code> that may contain <code>EJBMethodPermission</code> and
<code>EJBRoleRefPermission</code> objects that may have been constructed with
embedded references to argument arrays or <code>EntityBean</code> instances. The
contract must state whether such permissions may be passed through the
<code>PolicyConfiguration</code> interface, and what the responsibility of the
provider shall be should it occur.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution (Partial) -</strong> resolved via the introduction of <code>PolicyContext</code> handlers and the
corresponding removal of the ability to include such information in
permission constrictions.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="extensibility-of-the-policyconfiguration-interface"><a class="anchor" href="#extensibility-of-the-policyconfiguration-interface"></a>B.3. Extensibility of the PolicyConfiguration Interface</h3>
<div class="paragraph">
<p>For example, the <code>PolicyConfiguration</code>
interface does not include methods that may be used to interrogate
<code>Policy</code> to determine the list of configured policy configuration
contexts. We should also consider whether the interface should be
extended to support the configuration of additional forms (other than
unchecked, and excluded) logical policy statements</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution (Partial) -</strong> with the change to finder semantics, that is
<code>getPolicyConfiguration</code>, and the addition of the <code>inService</code> method to
<code>PolicyConfigurationFactory</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="directory-scoped-extension-matching-patterns"><a class="anchor" href="#directory-scoped-extension-matching-patterns"></a>B.4. Directory Scoped Extension matching patterns</h3>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong> We will not require that they be supported by policy providers, nor will
we require that policy providers reject other than the patterns defined
by Jakarta Servlet.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a788"><a class="anchor" href="#a788"></a>B.5. Evolution of Deployment Policy Language</h3>
<div class="paragraph">
<p>The Policy Configuration and Policy Decision
Subcontracts should be generalized to sustain evolution in the
declarative authorization policy representations used in deployment
descriptors. One dimension of this evolution, would be a change from
DTDs to schema.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong> Some generalization in the <code>PolicyConfiguration</code> interface has occurred as
a result of the removal of policy context identifiers from permissions
such that any permission objects may be configured through this
interface.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a791"><a class="anchor" href="#a791"></a>B.6. Principals Passed to Providers in Subjects</h3>
<div class="paragraph">
<p>The provider is expected to do
principal-to-role mapping, but we have not allowed the provider to
assume that it is working with a companion authentication module. We
have also not defined standard principals for containers to put in the
subjects used when they ask <code>Policy</code> to make decisions for them. So, it is
unclear how providers will be able to do Principal-to-Role mapping.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  We decoupled consideration of this issue from notions of principal
selection imposed by the <code>getCallerPrincipal</code> and <code>getUserPrincipal</code> methods
of Jakarta Enterprise Beans and Jakarta Servlet respectively. We clarified that all principals in an
<code>AccessControlContext</code> shall be available to the policy module for use in
principal to role mapping. We added a requirement with respect to
asserting or vouching authorities to ensure that principals
corresponding to authorities are not misinterpreted by providers as
principals of the subject (see <a href="#a736">Checking the Caller for a Permission</a>). Moreover, we concluded that independent
of this contract, a policy module must be familiar with the principals
(i.e. security attributes) assigned to subjects as the result of
authentication in its operational environment and for which it must
evaluate policy.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a794"><a class="anchor" href="#a794"></a>B.7. Clarification of Jakarta Servlet Constraint Matching Semantics</h3>
<div class="paragraph">
<p>The definition of the <code>security-constraint</code>
matching and enforcement semantics were under specified in the historical
pre-Jakarta Servlet 2.2 and 2.3 specifications. The contract defined in this document has
clarified these semantics; however there was an issue until these
clarifications were incorporated into the pre-Jakarta Servlet.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong> The pre-Jakarta Servlet 2.4 specification and onwards include a more complete description of
the processing of constraints.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a797"><a class="anchor" href="#a797"></a>B.8. References and Arguments in EJBMethodPermisison</h3>
<div class="paragraph">
<p>When a container constructs an
<code>EJBMethodPermission</code> as part of its policy decision subcontract, it may
include a reference to the Jakarta Enterprise Bean (for an EntityBean) and the arguments to
the method in the constructed permission. Inclusion of this additional
context by containers is optional for performance reasons, yet it has
been suggested that the contract provide a way (perhaps via a callback
or an exception thrown by the provider) for the container to find out
whether or not such information would be used by the provider.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong> Resolved with introduction of policy context handlers</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a800"><a class="anchor" href="#a800"></a>B.9. Permission Spanning in RoleRefPermission</h3>
<div class="paragraph">
<p>The <code>EJBRoleRefPermission</code> and
<code>WebRoleRefPermission</code> objects support the checking of multiple
“references” in a single permission check. This functionality was
motivated by recurring requests to extend the Jakarta EE “inRole” APIs to
allow multiple role references to be evaluated in a single call. The
permission classes noted above, currently support this functionality, at
the cost of having to span permissions in collection implication. The
most direct consequence of this spanning is that the new Permission
Collection methods of these Permission classes must not return null, as
they must return a <code>PermissionCollection</code> capable of doing the permission
specific spanning.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  The replacement paradigm has been changed such that it should no longer
be possible for providers to depend on custom implementations of the
permission classes defined by this specification. Accordingly, the
complexity introduced by spanning should be attenuated in a compatible
implementation.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a806"><a class="anchor" href="#a806"></a>B.10. PolicyContext Identifiers are Unknown to Components</h3>
<div class="paragraph">
<p>Although not strictly speaking within the
scope of this specification, the work of this specification empowers application components
to use the Java SE policy decision interface to perform their own access
control decisions. The permissions defined by this specification must be
constructed with an embedded policy context identifier so that the
policy provider can evaluate the permission in the proper deployment
context (i.e policy configuration). As currently defined, the
specification does not provide a component with access to its policy
configuration identifiers, and as such a component can not check any
permissions which implement the <code>PolicyContext</code> interface.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  resolved by moving policy context identifiers out of the permissions,
into the <code>PolicyContext</code> utility class</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a809"><a class="anchor" href="#a809"></a>B.11. JAAS Policy Interface expects Providers to be able to getPermissions</h3>
<div class="paragraph">
<p>Not all Policy providers can, or find it
convenient or efficient, to determine all of the permissions granted to
an access control context. The JAAS Policy decision interface, and the
use of this interface by the JAAS <code>SubjectDomainCombiner</code>, impede the
integration of Policy Providers that are unable to enumerate all the
permissions that pertain to a subject/protection domain before returning
from <code>Policy.getPermissions()</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Added recommendation to <a href="#a173">Provider Configuration Subcontract</a>] that the
<em>javax.security.auth.SubjectDomainCombiner</em> of an application
server must <em>combine</em> into the permission collection returned by
<em>javax.security.auth.Policy.getPermisions</em>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a812"><a class="anchor" href="#a812"></a>B.12. Implementing Web Security Constraints as Permission</h3>
<div class="paragraph">
<p>Specification of the <code>WebResourcePermission</code>
and <code>WebUserDataPermission</code> classes with simple, single URL pattern names
is a bad fit for the Java SE Policy decision interface. The
implementation of <code>getPermissions</code> presents a major challenge, as the
constraint model would force the implementation to preserve ungranted
constraining permissions in the returned <code>PermissionCollection</code>. It also
would not be possible to implement the enumeration functionality
available through the elements method of the collection. Perhaps more
significant, the mapping of security constraints to simple, single URL
pattern names would require a special more complex Policy provider rule
combining algorithm, and as such, would render the default Java Policy
provider incompetent to process such permissions. The last point is in
direct conflict with a stated goal of the specification.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  The translation of web security constraints into Java SE permissions was
modified such that the URL pattern names of the <code>WebResource</code> and
<code>WebUserData</code> permissions include a representation of the URL patterns to
which the permission does NOT apply. The permission implies logic was
enhanced to take this change into account. As a result of these changes
these permissions may be processed by the default Java SE Policy module
like any other Java SE permission.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a815"><a class="anchor" href="#a815"></a>B.13. Exception Handling</h3>
<div class="paragraph">
<p>The first PFD did not define error handling
for the methods of the <code>PolicyConfigurationFactory</code> and <code>PolicyContext</code>
classes, or for the <code>PolicyConfiguration</code> and <code>PolicyContextHandler</code>
interfaces. Also, no provision was provided for implementation classes
to pass checked exceptions out through the defined interfaces and
classes.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  A <code>PolicyContextException</code> class was added to the <code>jakarta.security.jacc</code>
package, and the methods of the classes and interfaces identified above
were modified to throw this checked exception as appropriate.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a818"><a class="anchor" href="#a818"></a>B.14. PolicyConfiguration Commit</h3>
<div class="paragraph">
<p>The first PFD did not provide a way for
container deployment tools to indicate when the translation of a policy
context was complete and available for assimilation into the associated
Policy provider. It had been assumed that the <code>Policy.refresh</code> method
could serve this purpose, until it was discovered that depending on
<code>Policy.refresh</code> for this purpose would preclude parallelism in the
deployment of applications.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Added "commit" and “inService” methods to the <code>PolicyConfiguration</code>
interface, and formalized a 3 state (i.e. open, inService, and deleted)
life cycle for policy contexts. Required that the commit method be
called on a <code>PolicyConfiguration</code> object after all of its policy
statements have been added, and after it is "linked to any other module
with which it must share the same principal-to-role mapping". Also
required that <code>Policy.refresh</code> only assimilate policy contexts in the
“inService” state.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a821"><a class="anchor" href="#a821"></a>B.15. Support for ServiceEndpoint methodInterface</h3>
<div class="paragraph">
<p>The definition of the <code>EJBMethodPermission</code>
class in the first PFD did not support “ServiceEndpoint" as a valid
methodInterface value. The <code>ServiceEndpoint</code> methodInterface was
introduced by pre-Jakarta Enterprise Beans 2.1.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Added “ServiceEndpoint” as another possible value for the
methodInterface component of an <code>EJBMethodPermission</code> methodNameSpec.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a824"><a class="anchor" href="#a824"></a>B.16. TypeNames of EJBMethodPermission Array Parameters</h3>
<div class="paragraph">
<p>The syntax or syntaxes that may be used to
specify array parameters are not defined by the constructors of the
<code>EJBMethodPermission</code> class. The corresponding canonical form of such
params as returned by <code>getActions</code> must also be specified.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Added requirement that <code>Array</code> parameters be specified as <code>ComponentType[]</code>
as opposed to in the form returned by <code>Class.getName()</code> (i.e.
<code>[LComponentType;</code>).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a827"><a class="anchor" href="#a827"></a>B.17. Checking Permission on the root of a Web Application</h3>
<div class="paragraph">
<p>The <code>URLPattern</code>, "/", cannot be used to check
a permission, as it is a synonym for asking if permission to access the
entire application has been granted.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Require that the empty string be used as a replacement for "/", during
the permission evaluation. Clarify the <code>WebResourcePermission</code> and
<code>WebUserDataPermission</code> definitions to account for the use of the
empty-string as a legitimate <code>URLPattern</code> in such permissions.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a830"><a class="anchor" href="#a830"></a>B.18. Calling isUserInRole from JSP not mapped to a Servlet</h3>
<div class="paragraph">
<p>Checking a <code>WebRoleRefPermission</code> requires the
name of a Jakarta Servlet to identify the scope of the reference to role
translation. The name of a scoping servlet has not been established for
an unmapped Jakarta Server Page.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  For every security role in the web application add a
<code>WebRoleRefPermission</code> to the corresponding role. The name of all such
permissions shall be the empty string, and the actions of each
permission shall be the corresponding role name. When checking a
<code>WebRoleRefPermission</code> from a Web resource not mapped to a servlet, use a
permission with the empty string as its name and with the argument to
<code>isUserInRole</code> as its actions.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a833"><a class="anchor" href="#a833"></a>B.19. Support for HTTP Extension Methods</h3>
<div class="paragraph">
<p>Pre-Jakarta Servlet 2.5 added support for HTTP extension
methods (as defined in IETF RFC 2616 "Hypertext Transfer Protocol&#8201;&#8212;&#8201;HTTP/1.1") to <code>security-constraints</code>. Support for extension methods
requires changes to the <code>WebResourcePermission</code> and <code>WebUserDataPermission</code>
classes and to the translation of servlet security-constraints. In
general support for HTTP extension methods requires an ability to
represent non-enumerable HTTP method sets in the HTTPMethodSpec
components of WebResourcePermission and WebUserDataPermission actions
values.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Modified the HTTPMethodSpec constructs of <code>WebResourcePermission</code> and
<code>WebUserDataPermission</code> to support an HTTPMethodExceptionList as a third
form of HTTPMethodSpec. This resolution is known to have the following
consequences with respect to backward compatibility: 1) A permission
constructed with an HTTPMethodSpec composed of an HTTPMethodList
containing all the "standard" HTTP methods (i.e.,
"DELETE,GET,HEAD,OPTIONS,POST,PUT,TRACE) is no longer equal to and no
longer implies a permission constructed with a null, empty array, or
emptyString HTTPMethodSpec. 2) Permissions constructed with a null,
empty array, or emptyString HTTPMethodSpec component to their actions
value represent the non-enumerable (due to extension methods) set of all
possible HTTP methods and are NOT equal to or implied by any permission
constructed with an HTTPMethodSpec represented as an HTTPMethodList. 3)
It is no longer possible to use the HTTPMethodList syntax to represent
(via enumeration) the complement of a proper subset of all HTTP methods.
As such, an HTTPMethodExceptionList must be used to represent any proper
subset of HTTP methods determined NOT to be constrained during the
translation of servlet <code>security-constraints</code>. 4) The use of exception
lists causes the permissions resulting from the translation of a given
security-constraint configuration to differ in their actions values from
those that would have been produced prior to support for HTTP extension
methods. Previously translated permissions remain supported by the
changed permission implementations, and (with the exceptions listed in 1
and 2 above) continue to function as they did before the change, as long
as extension methods are not set in checked permissions.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a836"><a class="anchor" href="#a836"></a>B.20. Welcome File and security-constraint Processing</h3>
<div class="paragraph">
<p>The relationship between welcome file
processing (which can modify the effective request URI) and
<code>security-constraint</code> processing is not defined by the Jakarta Servlet
Specification. Since this specification uses <code>url-patterns</code> derived from
request URIs to name target resources in checked permissions, it is
important that welcome file processing and its relationship to
<code>security-constraint</code> processing be clearly specified. Without a clear
description of this relationship, unprotected request URIs which are
modified to yield effective request URIs for protected resources may
inadvertently be left unprotected.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  pending Jakarta Servlet clarification. Recommend that Jakarta Servlet standarize an
<code>HttpServletRequest</code> attribute that can be used to portably obtain the
<code>requestURI</code> following welcome file mapping. Once this attribute is
standardized, The <code>HttpServletRequest</code> based constructors of
<code>WebResourcePermission</code> and <code>WebUserDataPermission</code> would use its value to
establish the permission name.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
<div class="sect2">
<h3 id="a839"><a class="anchor" href="#a839"></a>B.21. Colons Within path-segment of Request URI</h3>
<div class="paragraph">
<p>As defined in IETF RFC 2396 "Uniform Resource
Identifiers (URI): Generic Syntax", the abs_path component of a request
URI may consist of a sequence of "/" separated path segments, where the
format of each segment is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>segment = *pchar *( &quot;;&quot; param )
param = *pchar
pchar = unreserved | escaped |&quot;:&quot; | &quot;@&quot; | &quot;&amp;&quot; | &quot;=&quot; | &quot;+&quot; | &quot;$&quot; | &quot;,&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A colon character occurring within a
path-seqment will be syntactically indistinguishable from colons used by
the <code>WebResourcePermission</code> and <code>WebUserDataPermission</code> constructors to
demarcate qualifying patterns.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
<div class="paragraph">
<p><strong>Resolution -</strong>  Require that containers use escaped encoding (as defined in RFC 2396) on
colon characters occuring within <code>url-patterns</code> obtained from <code>web.xml</code>.
Also require that containers encode colons occuring within patterns
extracted from <code>HttpServletRequest</code> objects and used to create the names
of checked <code>WebResourcePermission</code> and <code>WebUserDataPermission</code> objects. Also
require the <code>HttpServletRequest</code> based constructors of
<code>WebResourcePermission</code> and <code>WebUserDataPermission</code> apply escaped encoding
to colons occuring in the names the derived from the request URI. Note
that the colon character is represented as %3A in escaped encoding.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfkAAAAQAQAAAAA98Tu3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAHdElNRQfjBB0IHhG7FaSbAAAAHUlEQVQ4y2P4TxloYBgGBlAIBoMXRg0YNYAaBgAA0Gu1fX7HmvUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDQtMjlUMTU6MzA6MTctMDc6MDBvfF8kAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA0LTI5VDE1OjMwOjE3LTA3OjAwHiHnmAAAAABJRU5ErkJggg==" alt="image"/></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="revision-history"><a class="anchor" href="#revision-history"></a>Appendix C: Revision History</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="community-draft-version-0-3-dated-12132001"><a class="anchor" href="#community-draft-version-0-3-dated-12132001"></a>C.1. Community Draft Version 0.3 (dated 12/13/2001)</h3>
<div class="paragraph">
<p>Posted for Community Review 12/17/2001</p>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-public-draft-version-0-1"><a class="anchor" href="#changes-in-public-draft-version-0-1"></a>C.2. Changes in Public Draft Version 0.1</h3>
<div class="sect3">
<h4 id="general"><a class="anchor" href="#general"></a>C.2.1. General</h4>
<div class="paragraph">
<p>JCP version changed to 2.1.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Specification title changed to J2EETM
Authorization Contract for Containers
.Added additional definitions to the terminology
section for <a href="#a90">[a90]</a> and <a href="#a92">[a92]</a>.</p>
</li>
<li>
<p>Converted the requirements with respect to
support for this specification on J2EE 1.3 and 1.4 platforms into
assumptions, as any such requirements will ultimately be defined in the
J2EE 1.4 Platform Specification.</p>
</li>
<li>
<p>Added an Assumption and a corresponding
requirement with respect to support for Policy Providers that get all
permissions before returning from Policy.</p>
</li>
<li>
<p>Clarified relationship to Servlet and EJB
specification of authorization semantics.</p>
</li>
<li>
<p>Changed all references to “VM” to “JRE”</p>
</li>
<li>
<p>Changed all references to “deploy tool” to
“deployment tool”</p>
</li>
<li>
<p>Removed empty brackets from all method names in
prose.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-provider-configuration-subcontract"><a class="anchor" href="#changes-to-provider-configuration-subcontract"></a>C.2.2. Changes to Provider Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Rewrote replacability paradigm. New model does
not require replacement of permission implementations.</p>
</li>
<li>
<p>Described changes to JAAS SubjectDomainCombiner
as required when contract is optionally applied in a J2EE 1.3 context.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract"><a class="anchor" href="#changes-to-policy-configuration-subcontract"></a>C.2.3. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed to be compatible with the changes made
(for replacability) to the <a href="#a173">Provider Configuration Subcontract</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-subcontract"><a class="anchor" href="#changes-to-policy-decision-subcontract"></a>C.2.4. Changes to Policy Decision Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added section describing
<a href="#a703">Component runAs Identity</a> to
distinguish between <code>runAs</code> identity and caller identity. More accurately
described what a container must do to set a component’s runAs identity.
Added requirement that container prevent component from being able to
modify its runAs identity.</p>
</li>
<li>
<p>Added clarification of the matching of an
excluded policy statement to a granted permission.</p>
</li>
<li>
<p>Clarified the policy decision algorithms in
<a href="#a727">Checking AccessControlContext Independent Grants</a> and <a href="#a736">Checking the Caller for a Permission</a> to be compatible with the distinction between
caller and runAs identity. Also factored out references to platform
versions.</p>
</li>
<li>
<p>In <a href="#a736">Checking the Caller for a Permission</a> added requirement that caller identity not
include principals of any trusted (other than the caller).</p>
</li>
<li>
<p>Added new section,
<a href="#a745">Missing Policy Contexts</a>, to make
explicit the behavior of a provider when asked to check a permission in
an unknown policy context.</p>
</li>
<li>
<p>Rewrote the <a href="#a750">Policy Compatibility Requirements</a> to indicate that a J2EE 1.4
container that uses a JAAS policy interface to perform container access
decisions would not be compatible with this specification.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api"><a class="anchor" href="#changes-to-api"></a>C.2.5. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed PolicyConfigurationFactory to be an
abstract class with a static method that reads a system property to
instantiate a concrete factory implementation class. Also documented the
role of PolicyConfigurationFactory in supporting the PolicyConfiguration
with null context identifier.</p>
</li>
<li>
<p>Specified exceptions to be thrown by methods of
PolicyConfiguration interface.</p>
</li>
<li>
<p>Changed the PolicyConfiguration interface to
support the configuration of permissions that are not instances of
PolicyContext into a PolicyConfiguration with null identifier.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-issues"><a class="anchor" href="#changes-to-issues"></a>C.2.6. Changes to Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Resolved issue <a href="#a791">Principals Passed to Providers in Subjects</a></p>
</li>
<li>
<p>Resolved issue <a href="#a800">Permission Spanning in RoleRefPermission</a></p>
</li>
<li>
<p>Added new issue <a href="#a806">PolicyContext Identifiers are Unknown to Components</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-public-draft-version-0-2"><a class="anchor" href="#changes-in-public-draft-version-0-2"></a>C.3. Changes in Public Draft Version 0.2</h3>
<div class="sect3">
<h4 id="general-2"><a class="anchor" href="#general-2"></a>C.3.1. General</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Specification title changed to JavaTM Authorization Contract for Containers</p>
</li>
<li>
<p>Corrected audience to be the public</p>
</li>
<li>
<p>In terminology: simplified definition of
redeploy, corrected definition of provider, by removing permission
implementations, as these will now be part of application server
platform.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-provider-configuration-subcontract-2"><a class="anchor" href="#changes-to-provider-configuration-subcontract-2"></a>C.3.2. Changes to Provider Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replaced most references to container with JRE, as a provider integrates per JRE.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-subcontract-2"><a class="anchor" href="#changes-to-policy-decision-subcontract-2"></a>C.3.3. Changes to Policy Decision Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a624">Jakarta Enterprise Beans Policy Decision Semantics</a>, replace references to “subject” with “access control context”.</p>
</li>
<li>
<p>In <a href="#a703">Component runAs Identity</a>, softened requirement that container prevent component
from modifying its runAs identity by saying that this must be the
default policy.</p>
</li>
<li>
<p>Changes references to “access exception” to AccessControlException.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-issues-2"><a class="anchor" href="#changes-to-issues-2"></a>C.3.4. Changes to Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added Introductory paragraph.</p>
</li>
<li>
<p>Added new issue, <a href="#a809">JAAS Policy Interface expects Providers to be able to getPermissions</a> and its resolution to ensure that this issue is documented.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-1-expert-draft-0-1"><a class="anchor" href="#changes-in-proposed-final-draft-1-expert-draft-0-1"></a>C.4. Changes in Proposed Final Draft 1 Expert Draft 0.1</h3>
<div class="sect3">
<h4 id="general-3"><a class="anchor" href="#general-3"></a>C.4.1. General</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The license page was changed; most notably the license number.</p>
</li>
<li>
<p>Improper uses of the word “which” were replaced with the word “that”.</p>
</li>
<li>
<p>The word “shall” was replaced with the word “must”.</p>
</li>
<li>
<p>The 2.3 version designation was removed from references to Servlet as the applicable Servlet release is defined by
the EE environment.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-the-preface-and-overview"><a class="anchor" href="#changes-to-the-preface-and-overview"></a>C.4.2. Changes to the Preface and Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The preface was changed to reflect the purpose
of the PFD</p>
</li>
<li>
<p>the definition of hostname was modified so that
hostnames are no longer required to be used in servlet policy context
identifiers.</p>
</li>
<li>
<p>The requirement that permissions identify the
context of their use was changed to require that the context be set
before permission evaluation.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-provider-configuration-subcontract-3"><a class="anchor" href="#changes-to-provider-configuration-subcontract-3"></a>C.4.3. Changes to Provider Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#a184">PolicyContext Class and Context Handlers</a> was inserted to describe the PolicyContext
utility class and the PolicyContextHandler interface.</p>
</li>
<li>
<p><a href="#a196">What the Application Server Must Do</a> was modified to include the application
server’s responsibilities relating to the PolicyContext class, and to
correct errors in the names of the abstract policy classes.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-2"><a class="anchor" href="#changes-to-policy-configuration-subcontract-2"></a>C.4.4. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The examples in <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a>, were modified to reflect changes to policy context
identifiers and their removal from permission names.</p>
</li>
<li>
<p>The requirement that the names of
checked permissions identify the policy context was removed from
<a href="#a253">Policy Contexts and Policy Context Identifiers</a></p>
</li>
<li>
<p>The linkConfiguration method name replaced the incorrect link method name in <a href="#a269">Linking Policy Contexts</a></p>
</li>
<li>
<p><a href="#a271">Servlet Policy Context Identifiers</a> was moved to follow <a href="#a269">Linking Policy Contexts</a>, and the
section was made less prescriptive with respect to the format of Servlet
policy context identifiers. The non-normative description of the
behavior of the Tomcat server was removed.</p>
</li>
<li>
<p><a href="#a281">Translating security-constraint Elements</a> was made a subsection of a new <a href="#a276">Translating Servlet Deployment Descriptors</a> and changed to deal with the removal of policy context
identifiers from permission names.</p>
</li>
<li>
<p>The part of the translation remaining in <a href="#a281">Translating security-constraint Elements</a> was modified to yield an OR constraint combination semantic.</p>
</li>
<li>
<p>The description of the mapping of
transport guarantees to unacceptable connection types was moved to a new <a href="#a330">"Mapping Transport Guarantee to Connection Type"</a></p>
</li>
<li>
<p><a href="#a343">Translating Servlet security-role-ref Elements</a> was modified to reflect the removal of policy context identifiers from permission names.</p>
</li>
<li>
<p><a href="#a518">Translating Jakarta Enterprise Beans method-permission Elements</a> was made a subsection of a new <a href="#a516">Translating Jakarta Enterprise Beans Deployment Descriptors</a> and changed to deal with the removal of policy context identifiers from
permission names.</p>
</li>
<li>
<p>A new section <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a>, was added to describe the selection of EJB policy context identifiers.</p>
</li>
<li>
<p><a href="#a518">Translating Jakarta Enterprise Beans method-permission Elements</a>, <a href="#a521">Translating the Jakarta Enterprise Beans exclude-list</a>, and <a href="#a524">Translating Jakarta Enterprise Beans security-role-ref Elements</a> were all changed to reflect
the removal of the policy context identifier from permission names.</p>
</li>
<li>
<p><a href="#a533">Undeploying an Application or Module</a> was modified to reflect the use of the PolicyContext class to define the policy context.</p>
</li>
<li>
<p><a href="#a549">Permission to Configure Policy</a> was changed to require that “the state of the policy
statement repository” not be changed when the caller does not have the
“setPolicy” permission. Also a new requirement was added that policy be
configured to grant containers the “getPolicy” and “setPolicy”
permissions.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-subcontract-3"><a class="anchor" href="#changes-to-policy-decision-subcontract-3"></a>C.4.5. Changes to Policy Decision Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The name was changed to the “Policy Decision and Enforcement Contract”.</p>
</li>
<li>
<p><a href="#a563">Evaluation of Transport Guarantees</a>, <a href="#a569">Pre-dispatch Decision</a>, and <a href="#a572">Application Embedded Privilege Test</a> were changed to reflect the removal of the policy
context identifier from permission names.</p>
</li>
<li>
<p>Section 4.2.1 “Servlet Constraint Matching
Semantics”, was replaced by two sections;
<a href="#a576">Servlet Policy Decision Semantics</a>, and <a href="#a595">WebResourcePermission Matching Rules</a>.</p>
</li>
<li>
<p>The latter describes the processing of servlet constraints in a manner
related to the three types of policy statements created via the
PolicyConfiguration interface.</p>
</li>
<li>
<p>Section 4.2.2.1, “Servlet URL-Pattern Matching
Rules” was renamed.</p>
</li>
<li>
<p>Some changes were made to the last two tables
of Section 4.2.2.2, “Servlet Constraint Matching Examples” to
accommodate and better illustrate the OR constraint combining semantics.</p>
</li>
<li>
<p>Section 4.2.3, “WebRoleRefPermission Processing
Semantics” was added as the public draft mistakenly assumed that the
Servlet policy model was just about constraints.</p>
</li>
<li>
<p><a href="#a616">Jakarta Enterprise Beans Pre-dispatch Decision</a> and <a href="#a620">Jakarta Enterprise Beans Application Embedded Privilege Test</a> were changed to reflect the removal
of the policy context identifier from permission names.</p>
</li>
<li>
<p>A new <a href="#a707">Setting the Policy Context</a> was added to describe how a container must set the
policy context before invoking policy. This section also requires that
containers be granted the setPolicy permission in all policy contexts.</p>
</li>
<li>
<p>A new <a href="#a710">Policy Context Handlers</a> was added to define the requirements on containers
with respect to policy context handlers. The following new sections were
added to define the policy context handlers required of containers:
<a href="#a715">Container Subject Policy Context Handler</a>, <a href="#a719">SOAPMessage Policy Context Handler</a>, <a href="#a721">HttpServletRequest Policy Context Handler</a>, <a href="#a723">EnterpriseBean Policy Context Handler</a>, and <a href="#a725">Jakarta Enterprise Beans Arguments Policy Context Handler</a>.</p>
</li>
<li>
<p>The methods for checking policy as defined in
<a href="#a727">Checking AccessControlContext Independent Grants</a> were reorganized such that it is clear that one of
the presented alternatives must be used. Using
AccessController.checkPermission was added as an additional supported
alternative, and the release specific techniques were annotated as such.
Also the techniques based on getPermissions were annotated as not
recommended. At the end of the section a requirement was made regarding
the policy context having been set prior to the evaluation.</p>
</li>
<li>
<p>The same changes as described in the previous
change item were applied to <a href="#a736">Checking the Caller for a Permission</a>.</p>
</li>
<li>
<p><a href="#a745">Missing Policy Contexts</a> was renamed from “Unconfigured Policy Contexts” and the
semantics were modified to reflect the use of the PolicyContext utility
class and the designation of the null policy context id as the default.</p>
</li>
<li>
<p>A new <a href="#a747">Default Policy Context</a> was introduced to describe requirements for chaining
policy evaluation through to the provider of the default policy context.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-2"><a class="anchor" href="#changes-to-api-2"></a>C.4.6. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replaced the PolicyContext interface with the
PolicyContext class. Also changed all of the permissions such that none
of them implement the PolicyContext interface and such that none of them
include a policy context identifier in their names.</p>
</li>
<li>
<p>Added the PolicyContextHandler interface.</p>
</li>
<li>
<p>Removed the special purpose, EntityBean and</p>
</li>
<li>
<p>Argument array constructors from the EJBMethodPermission class.</p>
</li>
<li>
<p>Removed the special purpose, EntityBean
constructor from the EJBRoleRefPermission class.</p>
</li>
<li>
<p>Modified the actions field of the
EJBRoleRefPermission and WebRoleRefPermission classes such that they
contain at most a single role reference. Related to this change, also
removed the newPermissionCollection method implementation from both of
these classes.</p>
</li>
<li>
<p>In the PolicyConfiguration interface, changed
the name of the getPolicyContextId method to getContextID.</p>
</li>
<li>
<p>Changed the description of the
PolicyConfigurationFactory to require implementation classes to have a
public no argument constructor. Also precluded the use of the null value
as an argument to getPolicyConfiguration.</p>
</li>
<li>
<p>Added a new constructor to the
WebResourcePermission and WebUserDataPermission classes to allow an
instance to be constructed from an HttpServletRequest.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-issues-3"><a class="anchor" href="#changes-to-issues-3"></a>C.4.7. Changes to Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed the introductory material to indicate
that all of the issues have been resolved.</p>
</li>
<li>
<p>The resolution of Issue <a href="#a780">Configuration of Permissions with Parameters</a>, was changed to reflect the introduction of policy context
handlers.</p>
</li>
<li>
<p>Issue <a href="#a788">Evolution of Deployment Policy Language</a>, was partially resolved by
removing the requirement that permissions added via the
PolicyConfiguration interface have policy context identifiers in their
names.</p>
</li>
<li>
<p><a href="#a794">Clarification of Jakarta Servlet Constraint Matching Semantics</a>, was resolved
with the rewrite of Section <a href="#a595">WebResourcePermission Matching Rules</a>, and with the expectation that the
Servlet EG will adopt a change to section SRV.12.8 of the Servlet
specification.</p>
</li>
<li>
<p>Issue <a href="#a797">References and Arguments in EJBMethodPermisison</a>, was resolved with the introduction of policy context handlers.</p>
</li>
<li>
<p>Issue "Integrating Principal-to-Role Mapping with the Deployer Console", was
made optional functionality.</p>
</li>
<li>
<p><a href="#a806">PolicyContext Identifiers are Unknown to Components</a>, was resolved by
introducing the PolicyContext utility class.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-1-expert-draft-0-2"><a class="anchor" href="#changes-in-proposed-final-draft-1-expert-draft-0-2"></a>C.5. Changes in Proposed Final Draft 1 Expert Draft 0.2</h3>
<div class="sect3">
<h4 id="changes-to-the-preface-and-overview-2"><a class="anchor" href="#changes-to-the-preface-and-overview-2"></a>C.5.1. Changes to the Preface and Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The restriction that entities be identified by
principal was removed from the definition of grant.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-3"><a class="anchor" href="#changes-to-policy-configuration-subcontract-3"></a>C.5.2. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a>, the argument to linkConfiguration was corrected in the example.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-subcontract-4"><a class="anchor" href="#changes-to-policy-decision-subcontract-4"></a>C.5.3. Changes to Policy Decision Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Section 4.2.2.1, “Servlet URL-Pattern Matching
Rules” was modified to indicate that pattern length only is significant
among path prefix matches.</p>
</li>
<li>
<p>A description of the content of the tables and
how they should be interpreted was added to Section 4.2.2.2, “Servlet
Constraint Matching Examples”.</p>
</li>
<li>
<p>Section 4.2.3, “WebRoleRefPermission Processing
Semantics” was added as the public draft mistakenly assumed that the
Servlet policy model was just about constraints.</p>
</li>
<li>
<p><a href="#a616">Jakarta Enterprise Beans Pre-dispatch Decision</a> and <a href="#a572">Application Embedded Privilege Test</a> were changed to reflect the removal of the
policy context identifier from permission names.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-history"><a class="anchor" href="#changes-to-history"></a>C.5.4. Changes to History</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The history section was completed to reflect the changes made in Version 0.1 and 0.2</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-1-expert-draft-0-3"><a class="anchor" href="#changes-in-proposed-final-draft-1-expert-draft-0-3"></a>C.6. Changes in Proposed Final Draft 1 Expert Draft 0.3</h3>
<div class="sect3">
<h4 id="changes-to-the-preface-and-overview-3"><a class="anchor" href="#changes-to-the-preface-and-overview-3"></a>C.6.1. Changes to the Preface and Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The requirement that applicable constraints be
selected by best-match was rephrased to define best-match as it is
defined in this spec and the Servlet specification.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-4"><a class="anchor" href="#changes-to-policy-configuration-subcontract-4"></a>C.6.2. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A clarifying sentence was added to the end of
<a href="#a544">What the Provider Must Do</a> to make it
clear that this specification does not prescribe the policy language or
the methods used within providers to implement the defined policy and
role requirements.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-subcontract-5"><a class="anchor" href="#changes-to-policy-decision-subcontract-5"></a>C.6.3. Changes to Policy Decision Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Section 4.2.3, “WebRoleRefPermission Processing
Semantics” was simplified, as much of its content was not pertinent to
the WebRoleRefPermission class.</p>
</li>
<li>
<p>Section 4.4.2, “EJB Permission Matching Rules”
was changed to reflect the change to a single role in the actions of the
EJBRoleRefPermission class.</p>
</li>
<li>
<p>In <a href="#a715">Container Subject Policy Context Handler</a>, the key for the "Subject Policy Context
Handler" was changed to javx.security.auth.Subject.container, and the
semantics were modified to return the caller or runAs identity as
appropriate.</p>
</li>
<li>
<p>In <a href="#a723">EnterpriseBean Policy Context Handler</a>, the handler return type was
corrected.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-3"><a class="anchor" href="#changes-to-api-3"></a>C.6.4. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The resolution of the class diagram was improved by changing to a black and white image.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-2-expert-draft-1"><a class="anchor" href="#changes-in-proposed-final-draft-2-expert-draft-1"></a>C.7. Changes in Proposed Final Draft 2 Expert Draft 1</h3>
<div class="sect3">
<h4 id="general-4"><a class="anchor" href="#general-4"></a>C.7.1. General</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In many places through out the document,
replaced used of the phrase “policy configuration” with “policy
context”, and adopted the practice of using PolicyConfiguration to refer
to the configuration interface of a policy context.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-preface"><a class="anchor" href="#changes-to-preface"></a>C.7.2. Changes to Preface</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Updated Status section</p>
</li>
<li>
<p>Acknowledged all contributors, including RI and
TCK team, and all those who commented on the specification.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-overview"><a class="anchor" href="#changes-to-overview"></a>C.7.3. Changes to Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added dashed lines to <a href="#a76">Figure 1-1</a> to represent PolicyContext interactions.</p>
</li>
<li>
<p>Modified requirement 7, to reflect change is treatment of permissions derived from security-constraints.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-provider-configuration-subcontract-4"><a class="anchor" href="#changes-to-provider-configuration-subcontract-4"></a>C.7.4. Changes to Provider Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added two new sentences to the end of <a href="#a175">Policy Implementation Class</a>, to make
it clear that this contract is dependent on the standard Java Policy
replacement mechanisms, and to make it clear that containers must
support replacability.</p>
</li>
<li>
<p>In <a href="#a196">What the Application Server Must Do</a>, added all elements of the jacc package to
the list of things that an application server must bundle.</p>
</li>
<li>
<p>In <a href="#a196">What the Application Server Must Do</a>, the requirement for
javax.security.auth.Policy replacement was softened such that it only
applies to 1.3 application servers that choose to support this
specification.</p>
</li>
<li>
<p>In <a href="#a196">What the Application Server Must Do</a>, reintroduced the requirement that setPolicy
not be called again, to ensure more than temporary Policy replacement.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-5"><a class="anchor" href="#changes-to-policy-configuration-subcontract-5"></a>C.7.5. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the examples in <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a>, the type of the declared permission was corrected to
agree with constructed type, and “petID” was changed to “petContextID”
(as a clarification).</p>
</li>
<li>
<p>In the examples in <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a>, a new stanza was added to place the policy context in
service.</p>
</li>
<li>
<p><a href="#a257">Policy Context Life Cycle</a>, was added.</p>
</li>
<li>
<p>In <a href="#a276">Translating Servlet Deployment Descriptors</a>, the call to getPolicyConfiguration was
augmented with a second parameter to ensure that all policy statements
are removed from the context.</p>
</li>
<li>
<p><a href="#a281">Translating security-constraint Elements</a>, was rewritten such that the target names
of the WebResourcePermission and WebUserDataPermission policy statements
resulting from the translation are qualified such that they precisely
specify the resources to which they apply. The most significant affect
of this change is that it captures the best-matching semantics of the
Servlet constraint model in the permission names, such that these
permissions can be tested using the standard J2SE permission evaluation
logic.</p>
</li>
<li>
<p>Added a new section, <a href="#a288">"Qualified URL Pattern Names"</a>, to
describe the rules for composing the target names used in the
construction of the WebResourcePermission and WebUserDataPermission
policy statements resulting from the translation of Servlet security
constraints.</p>
</li>
<li>
<p>The section that had described the “Mapping to
Unacceptable Transport Connection Types” was changed to describe the
mapping to “acceptable” connection type. The title of the section was
changed to <a href="#a330">"Mapping Transport Guarantee to Connection Type"</a>. <a href="#a332">transport-guarantee to Acceptable Connection Mapping</a> was also changed
to reflect the change to “acceptable” connection types, and the
connection type values in the table were modified to agree with the
transportTypeSpec syntax of the WebUserDataPermission class.</p>
</li>
<li>
<p><a href="#a347">Servlet URL-Pattern Matching Rules</a>, was added to support the pattern
qualification section, and relevant sections of the enforcement
subcontract.</p>
</li>
<li>
<p><a href="#a354">Example</a> was added</p>
</li>
<li>
<p>In <a href="#a516">Translating Jakarta Enterprise Beans Deployment Descriptors</a>, the call to getPolicyConfiguration was
augmented with a second parameter to ensure that all policy statements
are removed from the context.</p>
</li>
<li>
<p>The last paragraph of
<a href="#a521">Translating the Jakarta Enterprise Beans exclude-list</a>, was
clarified.</p>
</li>
<li>
<p><a href="#a527">Deploying an Application or Module</a>, <a href="#a533">Undeploying an Application or Module</a>, <a href="#a536">Deploying to an existing Policy Configuration</a>, and <a href="#a540">Redeploying a Module</a>, were all changed o reflect the introduction of
the policy context life cycle and the commit method.</p>
</li>
<li>
<p>The inService method was added to the factory
methods called out in the first paragraph of
<a href="#a549">Permission to Configure Policy</a>, and
the SecurityPermission required by these methods was changed from
“getPolicy” to “setPolicy” to correct an inconsistency with the Java
implementation.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-subcontract"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-subcontract"></a>C.7.6. Changes to Policy Decision and Enforcement Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#a558">Policy Enforcement by Servlet Containers</a>, was modified to require that
containers use Policy to make access control decisions.</p>
</li>
<li>
<p><a href="#a563">Evaluation of Transport Guarantees</a>, was modified to describe how the transport type
value is obtained for the permission construction, and to reflect the
change made to the WebUserDataPermission class such that it is no longer
checked by “determining if a Permission has been excluded”.</p>
</li>
<li>
<p><a href="#a563">Evaluation of Transport Guarantees</a>, and <a href="#a569">Pre-dispatch Decision</a>, were changed to reference the error processing defined in the
Servlet specification.</p>
</li>
<li>
<p><a href="#a576">Servlet Policy Decision Semantics</a>, was rewritten to reflect the qualification of the
permission names, and the change to conventional permission evaluation
semantics.</p>
</li>
<li>
<p><a href="#a595">WebResourcePermission Matching Rules</a>, <a href="#a601">WebRoleRefPermission Matching Rules</a>, and <a href="#a607">WebUserDataPermission Matching Rules</a>
were added to define the permission specific matching semantics
necessary to support the policy decision semantics.</p>
</li>
<li>
<p>Section 4.2.2.1, “Servlet URL-Pattern Matching
Rules”, Section 4.2.2.2, “Servlet Constraint Matching Examples”, and
Section 4.2.3, “WebRoleRefPermission Processing Semantics” were removed
from the document, as the change to qualified pattern names made these
sections unnecessary.</p>
</li>
<li>
<p><a href="#a614">Policy Enforcement by Jakarta Enterprise Beans Containers</a>, was modified to require that containers
use Policy to make access control decisions.</p>
</li>
<li>
<p><a href="#a624">Jakarta Enterprise Beans Policy Decision Semantics</a>, was replaced with a simplified section that
references <a href="#a576">Servlet Policy Decision Semantics</a>.</p>
</li>
<li>
<p><a href="#a627">EJBMethodPermission Matching Rules</a>, and <a href="#a697">EJBRoleRefPermission Matching Rules</a>,
were added to define the permission specific matching semantics
necessary to support the policy decision semantics. These new sections
replaced Section 4.4.2, “EJB Permission Matching Rules”.</p>
</li>
<li>
<p>The last paragraph of <a href="#a703">Component runAs Identity</a>, was modified
to ensure that the AccessControlContext includes a
SubjectDomainCombiner.</p>
</li>
<li>
<p>In <a href="#a710">Policy Context Handlers</a>, changed the last sentence of the paragraph to “&#8230;&#8203;if
these actions will cause the container to fail in its processing of the
associated request”.</p>
</li>
<li>
<p>In <a href="#a715">Container Subject Policy Context Handler</a> replaced “caller’s identify” with
“caller’s identity”.</p>
</li>
<li>
<p>In <a href="#a719">SOAPMessage Policy Context Handler</a>, reduce to only EJB container, and added
additional qualification of the request coming in at the ServiceEndpoint
method interface.</p>
</li>
<li>
<p>In <a href="#a725">Jakarta Enterprise Beans Arguments Policy Context Handler</a>, clarified that this handler may not
be used if the request came in on the ServiceEndpoint method interface.
Also changed the return type when there are no arguments to an empty
array.</p>
</li>
<li>
<p>Renamed section
<a href="#a727">Checking AccessControlContext Independent Grants</a> and changed it to reflect the changes made to
WebUserDataPermissions such that they are no longer “excluded”
permissions.</p>
</li>
<li>
<p>In &lt;&lt;a745&gt;, changed replaced contains with inService method.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-4"><a class="anchor" href="#changes-to-api-4"></a>C.7.7. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A new class diagram was imported to reflect the
changes to the API, most notably the introduction of the
PolicyContextException class.</p>
</li>
<li>
<p>The javadocs were regenerated to conceal
implementation specific private instance variables.</p>
</li>
<li>
<p>Added “ServiceEndpoint” to the list of
alternative MethodInterface identifiers for EJBMethodPermissions.</p>
</li>
<li>
<p>More completely specified EJBMethodPermission
matching of methodNameSpec in implies</p>
</li>
<li>
<p>Added policy context life cycle, including
description, and state table to PolicyConfiguration interface.</p>
</li>
<li>
<p>Added new methods “commit” and inService to the
PolicyConfiguration interface.</p>
</li>
<li>
<p>Changed all the method signatures of the
PolicyConfiguration interface to throw PolicyContextException, and
described the other exceptions that implementations are required to
throw.</p>
</li>
<li>
<p>Changed the documentation of
getPolicyConfigurationFactory to properly identify the system property.</p>
</li>
<li>
<p>Added a new parameter to the
getPolicyConfiguration method of PolicyConfigurationFactory to indicate
whether or not all the policy statements should be removed from the
policy context.</p>
</li>
<li>
<p>Renamed contains of PolicyConfigurationFactory
class to inService.</p>
</li>
<li>
<p>Changed all the method signatures of the
PolicyConfigurationFactory class to throw PolicyContextException, and
described the other exceptions that implementations are required to
throw.</p>
</li>
<li>
<p>Changed authorization requirement of the
PolicyContext class to allow containers to be responsible for deciding
how callers of this method must be authorized.</p>
</li>
<li>
<p>Changed the getContext and registerHandler
methods of the PolicyContext class to declare that they throw
PolicyContextException., and described the other exceptions that these
methods are required to throw.</p>
</li>
<li>
<p>Changed the format of the name used to
construct a WebResourcePermission to contain a URLPatternSpec, and
described the restrictions on the patterns appearing in the
URLPatternList.</p>
</li>
<li>
<p>Modified the specification of the implies and
equals methods of WebResourcePermission to account for the
URLPatternSpec.</p>
</li>
<li>
<p>Changed the format of the name used to
construct a WebUserDataPermission to contain a URLPatternSpec, and
described the restrictions on the patterns appearing in the
URLPatternList.</p>
</li>
<li>
<p>Changed BNF for “actions” of
WebUserDataPermission such that a separating “:” is not required if a
transportType is not explicitly specified.</p>
</li>
<li>
<p>Replaced transportTypeList in actions of
WebuserdataPermission with a single transportType value.</p>
</li>
<li>
<p>Modified the specification of the implies and
equals methods of WebUserDataPermission to account for the
URLPatternSpec.</p>
</li>
<li>
<p>Comparable Interface was removed from
WebResourcePermission and WebUserDataPermission.</p>
</li>
<li>
<p>description of the second clause of the
“servlet matching rules” of WebResourcePermission.implies and
WebUserDataPermission.implies were changed to properly reflect the
servlet matching semantics; where for example, /a/b/* must match /a/b in
addition to /a/b/z.</p>
</li>
<li>
<p>In WebUserDataPermission constructor removed
extra “and” in “&#8230;&#8203;by calling and HttpServletRequest.isSecure()”.</p>
</li>
<li>
<p>In description of
PolicyContextHandler.getContext, removed extra “the” from “and obtain
from it the the”.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-references"><a class="anchor" href="#changes-to-references"></a>C.7.8. Changes to References</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Upgraded document version references for [J2EE
specification], [J2SE specification], [EJB specification], and [Servlet
specification] to 1.4, 1.4.0, 2.1, and 2.4 respectively. Also updated
URL for [J2EE specification].</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-issues-4"><a class="anchor" href="#changes-to-issues-4"></a>C.7.9. Changes to Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added new issue,
<a href="#a812">Implementing Web Security Constraints as Permission</a>.</p>
</li>
<li>
<p>Added new issue,
<a href="#a815">Exception Handling</a>.</p>
</li>
<li>
<p>Added new issue,
<a href="#a818">PolicyConfiguration Commit</a>.</p>
</li>
<li>
<p>Added new issue,
<a href="#a821">Support for ServiceEndpoint methodInterface</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-2-expert-draft-2"><a class="anchor" href="#changes-in-proposed-final-draft-2-expert-draft-2"></a>C.8. Changes in Proposed Final Draft 2 Expert Draft 2</h3>
<div class="sect3">
<h4 id="changes-to-preface-2"><a class="anchor" href="#changes-to-preface-2"></a>C.8.1. Changes to Preface</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>fixed typos, and added additional RI team
member to credits.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-6"><a class="anchor" href="#changes-to-policy-configuration-subcontract-6"></a>C.8.2. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a347">Servlet URL-Pattern Matching Rules</a>, added additional clause to support
universal matching by “/*”.</p>
</li>
<li>
<p>In <a href="#a354">Example</a>,
Added comments to security-constraint elements, Also corrected qualified
URL Pattern Names occurring in <a href="#a399">Qualified URL Pattern Names from Example</a> and
<a href="#a416">Permissions and PolicyConfiguration Operations from Example</a>.</p>
</li>
<li>
<p>In <a href="#a527">Deploying an Application or Module</a>, changed the text of the footnote to properly
reflect that policy contexts are linked by object not by identifier.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-subcontract-2"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-subcontract-2"></a>C.8.3. Changes to Policy Decision and Enforcement Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a563">Evaluation of Transport Guarantees</a>, and <a href="#a569">Pre-dispatch Decision</a>, changed the corresponding construction
descriptions to be less prescriptive such that calling any constructor
that results in the proper name being established would be allowed. Also
indicated that the resulting url-pattern is to be “unqualified”.</p>
</li>
<li>
<p>Modified <a href="#a576">Servlet Policy Decision Semantics</a>, to require that the policy
statements of the default policy context be included in the access
decisions and to require that the subject based policy statements be
tested when the status is unresolved following the excluded and
unchecked evaluations.</p>
</li>
<li>
<p>Added a new <a href="#a579">Matching Qualified URL Pattern Names</a> to describe URLPatternSpec
matching, and replaced the duplicate descriptions of this processing in
sections <a href="#a595">WebResourcePermission Matching Rules</a> and <a href="#a607">WebUserDataPermission Matching Rules</a> with a reference to this new section. Also modified the
description of the comparison to support symmetric implication as
necessary to support consistent semantics between the implies and equals
methods of these permissions.</p>
</li>
<li>
<p>Added requirement that the comparisons defined
by <a href="#a595">WebResourcePermission Matching Rules</a>, <a href="#a601">WebRoleRefPermission Matching Rules</a>, <a href="#a607">WebUserDataPermission Matching Rules</a>, <a href="#a627">EJBMethodPermission Matching Rules</a>, and <a href="#a697">EJBRoleRefPermission Matching Rules</a> be case sensitive.</p>
</li>
<li>
<p>The word “form” was changed to “from” in first
paragraph of <a href="#a727">Checking AccessControlContext Independent Grants</a>.</p>
</li>
<li>
<p>In bullets 4 and 5 of
<a href="#a727">Checking AccessControlContext Independent Grants</a>, removed “that was constructed without static
permissions and”.</p>
</li>
<li>
<p>Rewrote <a href="#a747">Default Policy Context</a> to indicate describe the properties of the
default policy context, and to require that its policy statements be
included in every access decision.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-5"><a class="anchor" href="#changes-to-api-5"></a>C.8.4. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>comments on HttpServletRequest based
constructors for WebResourcePermission and WebUserDataPermission were
changed so as not to imply that this is the only constructor that may be
used by a container “prior to checking” a Servlet request.</p>
</li>
<li>
<p>the description of the implies method of
WebResourcePermission and WebUserDataPermission was modified to support
the maxim that two permission objects p1 and p2 are equivalent iff
p1.implies(p2) and p2.implies(p1). To do so required handling the case
where the name of the argument permission (to implies) is a qualified
URLPatternSpec.</p>
</li>
<li>
<p>the description of the servlet matching rules
in the implies method of WebResourcePermission and WebUserDataPermission
was corrected to account for universal matching by “/*”.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-2-expert-draft-3"><a class="anchor" href="#changes-in-proposed-final-draft-2-expert-draft-3"></a>C.9. Changes in Proposed Final Draft 2 Expert Draft 3</h3>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-7"><a class="anchor" href="#changes-to-policy-configuration-subcontract-7"></a>C.9.1. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added a new first paragraph to
<a href="#a281">Translating security-constraint Elements</a>, to describe the treatment of patterns overridden by and made
irrelevant by the presence of the “/*” pattern in the a
web-resource-collection within the deployment descriptor.</p>
</li>
<li>
<p>Moved the last paragraph in
<a href="#a288">"Qualified URL Pattern Names"</a> to be its
first, and added a new paragraph to its end to describe irrelevant
patterns and their treatment by the permission constructors. Clarified
the syntax and description of URLPattern qualification. Indicated that
patterns qualified by other qualifying patterns may be dropped from the
list of qualifying patterns (and described why).</p>
</li>
<li>
<p>In <a href="#a354">Example</a>, removed the “/*” pattern from the first web-resource-collection of the
first security constraint, and made the corresponding changes to the
table of qualified URL pattern names and the table of constructed
permissions.</p>
</li>
<li>
<p>Added a new column to
<a href="#a399">Qualified URL Pattern Names from Example</a> of <a href="#a354">Example</a> to represent the
canonical form of the qualified names.The description of
<a href="#a416">Permissions and PolicyConfiguration Operations from Example</a> was modified to indicate that the names in its
second column were obtained from the first column of
<a href="#a399">Qualified URL Pattern Names from Example</a>, and that any equivalent form of the qualified names, including
their canonical forms, could have been used in the permission
constructions.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-subcontract-3"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-subcontract-3"></a>C.9.2. Changes to Policy Decision and Enforcement Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a563">Evaluation of Transport Guarantees</a>, clarified the actions value used for a request
that arrives on an unprotected connection.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-6"><a class="anchor" href="#changes-to-api-6"></a>C.9.3. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The URLPatternList descriptions of the
WebResourcePermission and WebUserDataPermission classes; were modified
to require that no pattern in a URLPatternList may imply the first
pattern of the URLPatternSpec, as otherwise the URLPatternSpec could not
imply itself which would violate the required equals semantics.</p>
</li>
<li>
<p>The definition of the equals method of the
WebResourcePermission and WebUserDataPermission classes; was modified
such that different URLPatternList values are equal if the lists imply
the same patterns.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-proposed-final-draft-2-expert-draft-4"><a class="anchor" href="#changes-in-proposed-final-draft-2-expert-draft-4"></a>C.10. Changes in Proposed Final Draft 2 Expert Draft 4</h3>
<div class="sect3">
<h4 id="changes-to-api-7"><a class="anchor" href="#changes-to-api-7"></a>C.10.1. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The serialization (see Serialized Form on html
Javadocs) of the javax.security.jacc permission classes was described
more completely and to remove unnecessary constraints on
implementations.</p>
</li>
<li>
<p>The canonical forms produced by the getActions
methods of the WebResourcePermission and WebUserDataPermission classes
were more completely specified.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-final-release"><a class="anchor" href="#changes-in-final-release"></a>C.11. Changes in Final Release</h3>
<div class="sect3">
<h4 id="changes-to-license"><a class="anchor" href="#changes-to-license"></a>C.11.1. Changes to License</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>License was replaced</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-the-preface"><a class="anchor" href="#changes-to-the-preface"></a>C.11.2. Changes to the Preface</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The preface was changed to reflect the purpose
of the Final Release.</p>
</li>
<li>
<p>Additional contributor names were added.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-overview-2"><a class="anchor" href="#changes-to-overview-2"></a>C.11.3. Changes to Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added requirement to support
<a href="#a736">Checking the Caller for a Permission</a>, to ensure that policy providers not place extra requirements on
containers.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-provider-configuration-subcontract-5"><a class="anchor" href="#changes-to-provider-configuration-subcontract-5"></a>C.11.4. Changes to Provider Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added another catch clause to the code sample
in <a href="#a196">What the Application Server Must Do</a>, to support verification that the loaded object is an instanceof
javax.security.Policy.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-8"><a class="anchor" href="#changes-to-policy-configuration-subcontract-8"></a>C.11.5. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added definition of what it means for two
translations to be “equivalent” to <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a>.</p>
</li>
<li>
<p>Added clarification to
<a href="#a281">Translating security-constraint Elements</a> to allow for “equivalent” translations.</p>
</li>
<li>
<p>Restated the translation description of
<a href="#a281">Translating security-constraint Elements</a>, such that it no longer prescribes the number of permissions
that must be constructed.</p>
</li>
<li>
<p>Modified the title of the second column of
<a href="#a332">transport-guarantee to Acceptable Connection Mapping</a>.</p>
</li>
<li>
<p>Restated the translation description of
<a href="#a343">Translating Servlet security-role-ref Elements</a>, such that it no longer is as prescriptive with respect to the
“construction” of permissions, and such that it defines the name to use
for the “additional” permissions.</p>
</li>
<li>
<p>Fixed a syntax problem, missing "&lt;" in
"urlPattern&gt;", in <a href="#a354">Example</a>.</p>
</li>
<li>
<p>Changed some of the actions values of
<a href="#a416">Permissions and PolicyConfiguration Operations from Example</a>, such that they are all in canonical form.
Added table footnote to that effect.</p>
</li>
<li>
<p>Added clarification to
<a href="#a518">Translating Jakarta Enterprise Beans method-permission Elements</a> to allow for “equivalent” translations.</p>
</li>
<li>
<p>Restated the translation description of
<a href="#a518">Translating Jakarta Enterprise Beans method-permission Elements</a>, such that it no longer such that it no longer prescribes the
number of permissions that must be constructed.</p>
</li>
<li>
<p>Clarified the linking requirements of
<a href="#a527">Deploying an Application or Module</a> and
of <a href="#a540">Redeploying a Module</a>.</p>
</li>
<li>
<p>In <a href="#a533">Undeploying an Application or Module</a>, <a href="#a536">Deploying to an existing Policy Configuration</a>, and in
<a href="#a540">Redeploying a Module</a>, changed “must
stop accepting” to “must stop dispatching” requests.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-contract"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-contract"></a>C.11.6. Changes to Policy Decision and Enforcement Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added special rule for checking "/" to
<a href="#a563">Evaluation of Transport Guarantees</a>,
and <a href="#a569">Pre-dispatch Decision</a>.</p>
</li>
<li>
<p>In <a href="#a563">Evaluation of Transport Guarantees</a>, <a href="#a569">Pre-dispatch Decision</a>, <a href="#a572">Application Embedded Privilege Test</a>, <a href="#a616">Jakarta Enterprise Beans Pre-dispatch Decision</a>, and <a href="#a620">Jakarta Enterprise Beans Application Embedded Privilege Test</a>, changed the description of how the checked permission
is "obtained".</p>
</li>
<li>
<p>Added clarification of "the scope of a
containers processing of a component request" to
<a href="#a710">Policy Context Handlers</a>.</p>
</li>
<li>
<p>Added a clarification to
<a href="#a710">Policy Context Handlers</a>, allowing
containers to delay the registration of the required handlers.</p>
</li>
<li>
<p>In <a href="#a723">EnterpriseBean Policy Context Handler</a>, restricted the use of this
handler to the business method of the EJB Remote, Local, or
ServiceEndpoint interfaces of the EnterpriseBean object.</p>
</li>
<li>
<p>Added a footnote to
<a href="#a736">Checking the Caller for a Permission</a>,
to clarify why calling Policy.getPermissions is not recommended.</p>
</li>
<li>
<p>Added <a href="#a753">Optimization of Permission Evaluations</a> to describe the circumstances
under which containers may caching the results of permission
evaluations.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-8"><a class="anchor" href="#changes-to-api-8"></a>C.11.7. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added package description</p>
</li>
<li>
<p>Changed MethodSpec and constructor descriptions
of EJBMethodPermission to provide support for additional method-intf
values.</p>
</li>
<li>
<p>Clarified the syntax of typeName as used in
methodParams of EJBMethodPermission. Also specified the corresponding
affect on the canonical form returned by getActions.</p>
</li>
<li>
<p>For both WebResourcePermission nd
WebUserDataPermission, specified the effect of constructing these
permissions with a null name. Also clarified that the empty string is a
supported exact pattern.</p>
</li>
<li>
<p>For both WebResourcePermission nd
WebUserDataPermission, corrected definition of HttpServletRequest based
constructors such that they obtain the permission name from the
RequestURI minus the contextPath, except for the special case where the
name would be "/", in which case the empty string is used as the
permission name.</p>
</li>
<li>
<p>In WebUserDataPermission, Fixed errors in the
BNF for transportType.</p>
</li>
<li>
<p>Added text to javadoc of JACC permission
classes to make it clear that these permissions may implement
newPermissionCollection or inherit its implementation from their
superclass.</p>
</li>
<li>
<p>Modified the definition of the PolicyContext
class to allow for implementations that restrict access to the security
sensitive methods of this utility class without necessarily resorting to
checking the setPolicy SecurityPermission.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-appendix-a-related-documents"><a class="anchor" href="#changes-to-appendix-a-related-documents"></a>C.11.8. Changes to Appendix A: Related Documents</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Updated the copyright dates.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-appendix-b-issues"><a class="anchor" href="#changes-to-appendix-b-issues"></a>C.11.9. Changes to Appendix B: Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added descriptions of 3 new issues:
<a href="#a824">TypeNames of EJBMethodPermission Array Parameters</a>, <a href="#a827">Checking Permission on the root of a Web Application</a>, and <a href="#a830">Calling isUserInRole from JSP not mapped to a Servlet</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-errata-a"><a class="anchor" href="#changes-in-errata-a"></a>C.12. Changes in Errata A</h3>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-9"><a class="anchor" href="#changes-to-policy-configuration-subcontract-9"></a>C.12.1. Changes to Policy Configuration Subcontract</h4>
<div class="paragraph">
<p>Page 24: added requirement to
<a href="#a343">Translating Servlet security-role-ref Elements</a> for extra WebRoleRefPermission objects to be created to
support calls to isUserInRole from unmapped JSPs.</p>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-enforcement-subcontract"><a class="anchor" href="#changes-to-policy-enforcement-subcontract"></a>C.12.2. Changes to Policy Enforcement Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Page 37: added requirement to
<a href="#a572">Application Embedded Privilege Test</a>
to support calling isUserInRole from an unmapped (to servlet) web
resource.</p>
</li>
<li>
<p>page 47: added footnote to
<a href="#a736">Checking the Caller for a Permission</a>
to act as a forward reference to optimization by reuse of
unauthenticated results as allowed for by new text added to
<a href="#a753">Optimization of Permission Evaluations</a>. This optimization allows a container to optimize
authorization checks on unprotected resources.</p>
</li>
<li>
<p>Page 50: added new clarifying text to
<a href="#a753">Optimization of Permission Evaluations</a> to support performance optimization based on reuse of
evaluation results. In addition to reuse of equivalent evaluations,
added text to support reuse of unauthenticated evaluations to authorize
evaluations independent of caller identity. Described a common practice
that could be implemented by containers and providers, and that would
cause containers to be notified by providers of policy changes. By
following the suggested practice providers would be able to tell when
containers expect to be notified, for containers to determine if they
will be notified, and for containers to determine if their provider has
other properties necessary to sustain reuse.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-9"><a class="anchor" href="#changes-to-api-9"></a>C.12.3. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Page 87: Clarified Description of WebRoleRefPermission class.</p>
</li>
<li>
<p>Page 88: Modified description of name parameter of WebRoleRefPermission constructor to describe use of empty-string
name.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-appendix-b-issues-2"><a class="anchor" href="#changes-to-appendix-b-issues-2"></a>C.12.4. Changes to Appendix B: Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Page 105: removed sentence from description of
resolution of issue B19, &lt;&lt;a830[See Calling
isUserInRole from JSP not mapped to a Servlet]", that had indicated that
the resolution would NOT be adopted until the Servlet spec was changed.
As a result of this errata, the resolution to issue B19 has been fully
integrated.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changes-in-errata-b"><a class="anchor" href="#changes-in-errata-b"></a>C.13. Changes in Errata B</h3>
<div class="sect3">
<h4 id="changes-to-overview-3"><a class="anchor" href="#changes-to-overview-3"></a>C.13.1. Changes to Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Page 7: modified requirement 9 to allow for and
describe the circumstances under which a container may run without a
SecurityManager.</p>
</li>
<li>
<p>Page 8: added <a href="#a154">Running Without a SecurityManager</a> to describe the changes to this
contract that apply to containers running without a J2SE
SecurityManager.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-log-for-errata-c"><a class="anchor" href="#change-log-for-errata-c"></a>C.14. Change log for Errata C</h3>
<div class="sect3">
<h4 id="changes-made-throughout-the-document"><a class="anchor" href="#changes-made-throughout-the-document"></a>C.14.1. Changes Made Throughout the Document</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed the "J2EE" and "J2SE" platform names
(when not used with a specific version such as J2EE 1.4) to "Java EE"
and "Java SE" respectively.</p>
</li>
<li>
<p>Changed improper uses of "affect" to "effect".</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-overview-4"><a class="anchor" href="#changes-to-overview-4"></a>C.14.2. Changes to Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a120">Assumptions</a>, clarified assumptions 1 and 3 to indicate that contract
is intended to apply and be required by future versions of the Java EE
platform.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-provider-configuration-contract"><a class="anchor" href="#changes-to-provider-configuration-contract"></a>C.14.3. Changes to Provider Configuration Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generalized the J2EE 1.4 version specific
requirements such that they also apply to later versions of the EE
platform.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-contract"><a class="anchor" href="#changes-to-policy-configuration-contract"></a>C.14.4. Changes to Policy Configuration Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Extended the chapter abstract to indicate that
the subcontract applies to the configuration of policy providers from
authorization rules defined within Java code using common annotations.</p>
</li>
<li>
<p>In <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a> and 18, described the deployment
tool requirements relating to annotation processing, and the merging of
annotations into the deployment descriptor such that the translation may
occur using the deployment descriptor translation rules.</p>
</li>
<li>
<p>In <a href="#a271">Servlet Policy Context Identifiers</a>, described why each module of a multi-module
web application must be deployed to a separate policy context.</p>
</li>
<li>
<p>In <a href="#a343">Translating Servlet security-role-ref Elements</a>, clarified that the set of all roles
defined for the application is used to determine the additional
permissions to be constructed.</p>
</li>
<li>
<p>In <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a>, added rule to ensure that no two EJBs in a policy
context share the same ejb-name. If this rule is not observed the policy
statements for the EJBs would be inappropriately combined.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-contract-2"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-contract-2"></a>C.14.5. Changes to Policy Decision and Enforcement Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Inserted new section
<a href="#a560">Permission Names for Transport and Pre-Dispatch Decisions</a>, to call attention to the description of how the
corresponding permissions names are constructed. This section was
intended to account for the welcome file processing defined by the
Servlet specification. The corresponding clarification of the
relationship between welcome file processing and servlet-constraint
processing was not made to the Servlet spec, so, consistent with the
assumptions under which this spec. was defined, clarifying semantics
will not be prescribed by this spec. until they are adopted by the
Servlet specification.</p>
</li>
<li>
<p>Revised section
<a href="#a563">Evaluation of Transport Guarantees</a> and
section <a href="#a569">Pre-dispatch Decision</a>, to
refer to the newly inserted section for the definition of their
respective permission names.</p>
</li>
<li>
<p>Added new sentence the description of the
<a href="#a723">EnterpriseBean Policy Context Handler</a>
to account for EJB 3.0 Session and Entity beans which are not required
to implement the javax.ejb.EnterpriseBean interface.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-10"><a class="anchor" href="#changes-to-api-10"></a>C.14.6. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On page 69, clarified the description of the
PolicyConfiguration.commit() method to indicate that it also throws an
UnsupportedOperationException when completing the commit would cause
there to be two or more inService and linked policy contexts with
different principal-to-role mappings.</p>
</li>
<li>
<p>Changes to the description of the
HttpServletRequest based constructors of the WebResourcePermission and
WebUserDataPermission intended to clarify that welcome file processing
must have been performed before permission construction were deferred
pending clarification of the corresponding functionality in the Servlet
Specification</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-log-for-errata-d"><a class="anchor" href="#change-log-for-errata-d"></a>C.15. Change log for Errata D</h3>
<div class="sect3">
<h4 id="changes-made-throughout-the-document-2"><a class="anchor" href="#changes-made-throughout-the-document-2"></a>C.15.1. Changes Made Throughout the Document</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed The specification version from 1.0 to
1.1</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-contract-2"><a class="anchor" href="#changes-to-policy-configuration-contract-2"></a>C.15.2. Changes to Policy Configuration Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Amended <a href="#a281">Translating security-constraint Elements</a> to support the translation of
security-constraints containing extension methods as defined in IETF RFC
2616 "Hypertext Transfer Protocol&#8201;&#8212;&#8201;HTTP/1.1".</p>
</li>
<li>
<p>Added a new subsection, <a href="#a318">"HTTP Method Exception List"</a>, to
describe the representation of non-enumerable HTTP method subsets as
necessary, for example, to identify all methods not named in a
security-constraint.</p>
</li>
<li>
<p>Modified the actions entries in Table 3-4:
"Permissions and PolicyConfiguration Operations from
Example" to conform to the translation changes required to support
non-enumerable http extension methods.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-contract-3"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-contract-3"></a>C.15.3. Changes to Policy Decision and Enforcement Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Inserted new <a href="#a589">Matching HTTP Method Specifications</a> to describe the HTTPMethodSpec as
revised (by the definition of the HTTPMethodExceptionList) to support
HTTP extension methods.</p>
</li>
<li>
<p>Modified <a href="#a595">WebResourcePermission Matching Rules</a> and <a href="#a607">WebUserDataPermission Matching Rules</a> to refer to the new section describing the matching of HTTP method
specifications.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-11"><a class="anchor" href="#changes-to-api-11"></a>C.15.4. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modified the WebResourcePermission class to
support HTTP extension methods. Extended the permission&#8217;s actions syntax
to represent HTTP method exception lists so that non-enumerable method
subsets can be represented in the permission&#8217;s actions. Exception lists
are used to represent unconstrained http method subsets.</p>
</li>
<li>
<p>Modified the WebUserDataPermission class to
support HTTP extension methods. Extended the permission&#8217;s actions syntax
to represent HTTP method exception lists as was done for the
WebResourcePermission class.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-appendix-b-issues-3"><a class="anchor" href="#changes-to-appendix-b-issues-3"></a>C.15.5. Changes to Appendix B: Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added new issue <a href="#a833">Support for HTTP Extension Methods</a>.
Resolution describes consequences with respect to backward
compatibility:</p>
</li>
<li>
<p>Added new issue
<a href="#a836">Welcome File and security-constraint Processing</a> to describe the need for clarification of the relationship
between welcome file processing, which can change the effective request
URI, and the url-patterns applied in security-constraint processing.</p>
</li>
<li>
<p>Added new issue
<a href="#a839">Colons Within path-segment of Request URI</a> to document the potential ambiguity resulting from the use, by the
WebResourcePermission and WebUserDataPermission classes, of the colon
character to distinguish qualifying patterns.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-log-for-errata-e"><a class="anchor" href="#change-log-for-errata-e"></a>C.16. Change log for Errata E</h3>
<div class="sect3">
<h4 id="changes-made-throughout-the-document-3"><a class="anchor" href="#changes-made-throughout-the-document-3"></a>C.16.1. Changes Made Throughout the Document</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed the specification version from 1.1 to 1.2</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-overview-5"><a class="anchor" href="#changes-to-overview-5"></a>C.16.2. Changes to Overview</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a136">Requirements</a>, clarified requirement 4 to indicate that a policy
provider in a Servlet or EJB only container need only satisfy the
requirements corresponding to the supported container.</p>
</li>
<li>
<p>Corrected bullet 3 of
<a href="#a154">Running Without a SecurityManager</a>, by
removing prohibition on AccessControlContext.checkPermission.</p>
</li>
<li>
<p>Added new bullet 4 to
<a href="#a154">Running Without a SecurityManager</a>, to
ensure that container sets AccessControlContext if it uses the
AccessController.checkPermission technique.</p>
</li>
<li>
<p>Added new section,
<a href="#a160">Servlet or EJB only containers</a>, to
differentiate requirements that must be satisfied by web containers from
those that must be satisfied by EJB containers.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-contract-3"><a class="anchor" href="#changes-to-policy-configuration-contract-3"></a>C.16.3. Changes to Policy Configuration Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>in <a href="#a235">What a Jakarta EE Platform’s Deployment Tools Must Do</a>, modified the definition of
equivalence to accept as equivalent a translation in which permissions
that are implied by excluded permissions are removed from the role and
unchecked permission collections. Limited the definition of equivalence
to apply only to those permission types that are the subject of the
translation. Added footnote to describe why equivalence cannot always be
evaluated by PermissionCollection.implies().</p>
</li>
<li>
<p>in <a href="#a276">Translating Servlet Deployment Descriptors</a> and in <a href="#a516">Translating Jakarta Enterprise Beans Deployment Descriptors</a>, relaxed requirement that the value true be passed as the
second argument to getPolicyConfiguration. Changed text to require that
the policy statements be removed, and added footnotes to describe
implementation choices.</p>
</li>
<li>
<p>added a requirement to
<a href="#a288">"Qualified URL Pattern Names"</a>, that the
translation use escaped encoding to differentiate colons occurring
within the Pattern and QualifyingPattern elements from those used to
construct the QualifyingPatternList.</p>
</li>
<li>
<p>Corrected determination of permission name in
<a href="#a524">Translating Jakarta Enterprise Beans security-role-ref Elements</a> such that the name is acquired from the ejb-name of the
element containing the security-role-ref.</p>
</li>
<li>
<p>Added a new paragraph in
<a href="#a524">Translating Jakarta Enterprise Beans security-role-ref Elements</a> to describe the creation of additional EJBRoleRefPermission
objects to support optional declaration of security-role-ref elements
(as required by the EJB 3.0 specification)</p>
</li>
<li>
<p>Added a footnote to
<a href="#a524">Translating Jakarta Enterprise Beans security-role-ref Elements</a> to indicate that the requirements of this section apply to any
elements that are permitted by the EJB deployment descriptor schema to
contain security-role-ref elements. This was done in anticipation of
support for inclusion of this element in the message-driven element</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-decision-and-enforcement-contract-4"><a class="anchor" href="#changes-to-policy-decision-and-enforcement-contract-4"></a>C.16.4. Changes to Policy Decision and Enforcement Contract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a560">Permission Names for Transport and Pre-Dispatch Decisions</a>, added the requirement
that all colon characters occurring within the name of the checked
permission be represented using escaped encoding.</p>
</li>
<li>
<p>In <a href="#a616">Jakarta Enterprise Beans Pre-dispatch Decision</a> corrected requirement that an
RMISecurityException be thrown by requiring that the container throw an
exception as required by the corresponding EJB Specification.</p>
</li>
<li>
<p>Added footnote to
<a href="#a710">Policy Context Handlers</a> to make it
explicit that the requirement that a handler return a null value when
called outside of the context of an invocation, need not apply to any
additional handlers registered with the container.</p>
</li>
<li>
<p>Modified the requirements of
<a href="#a710">Policy Context Handlers</a> to allow
containers to effectively delay registrations that would otherwise
impede performance. As a result of the change, containers (especially
EJB containers) may return null when, during the processing of a
request, an attempt is made to invoke a required but not yet registered
handler.</p>
</li>
<li>
<p>In <a href="#a727">Checking AccessControlContext Independent Grants</a> corrected return result of
AccessController.checkPermission when exception is not thrown.</p>
</li>
<li>
<p>In <a href="#a750">Policy Compatibility Requirements</a>. corrected the reference to the
<em>javax.security.auth.Policy.getPolicy</em> method.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-12"><a class="anchor" href="#changes-to-api-12"></a>C.16.5. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added requirement to the HttpServletRequest
based constructors of WebResourcePermission and WebUserDataPermission
that the constructors must transform all colon characters occurring in
the name to escaped encoding.</p>
</li>
<li>
<p>Added requirement that all colons occurring
within the URLPattern elements of the name and URLPatternSpec arguments
passed to the String based constructors of WebResoucePermission and
WebUserDataPermission must be represented in escaped encoding.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-issues-5"><a class="anchor" href="#changes-to-issues-5"></a>C.16.6. Changes to Issues</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added recommended resolution to issue,
<a href="#a836">Welcome File and security-constraint Processing</a>.</p>
</li>
<li>
<p>Added resolution to issue,
<a href="#a839">Colons Within path-segment of Request URI</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-log-for-errata-f"><a class="anchor" href="#change-log-for-errata-f"></a>C.17. Change log for Errata F</h3>
<div class="sect3">
<h4 id="changes-made-throughout-the-document-4"><a class="anchor" href="#changes-made-throughout-the-document-4"></a>C.17.1. Changes Made Throughout the Document</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed the specification version from 1.2 to
1.3.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-10"><a class="anchor" href="#changes-to-policy-configuration-subcontract-10"></a>C.17.2. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>in <a href="#a281">Translating security-constraint Elements</a>, modified the translation to
handle http-method-omission elements introduced by servlet 3.0.</p>
</li>
<li>
<p>added new <a href="#a302">"Combining HTTP Methods"</a>, to define the combination of http-method and
http-method-omission elements, and to describe the translation of the
results to the actions string used to construct WebResourcePermission
and WebUserDataPermission objects.</p>
</li>
<li>
<p>In <a href="#a354">Example</a>,
modified the excluding auth constraint to demonstrate the use of an
http-method-omission list. Also changed &lt;&lt;a416[See
Permissions and PolicyConfiguration Operations from Example] to contain
the corresponding translation.</p>
</li>
<li>
<p>In <a href="#a524">Translating Jakarta Enterprise Beans security-role-ref Elements</a>, added an example in a
footnote.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-log-for-errata-g-maintenance-release-7"><a class="anchor" href="#change-log-for-errata-g-maintenance-release-7"></a>C.18. Change log for Errata G (maintenance Release 7)</h3>
<div class="sect3">
<h4 id="changes-made-throughout-the-document-5"><a class="anchor" href="#changes-made-throughout-the-document-5"></a>C.18.1. Changes Made Throughout the Document</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed the specification version from 1.3 to
1.4.</p>
</li>
<li>
<p>Changed the JCP version to 2.7</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-11"><a class="anchor" href="#changes-to-policy-configuration-subcontract-11"></a>C.18.2. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a253">Policy Contexts and Policy Context Identifiers</a>, added a footnote to describe
exceptional case of EJBs bundled within a WAR.</p>
</li>
<li>
<p>In <a href="#a271">Servlet Policy Context Identifiers</a>, added paragraph to ensure that EJBs defined
in web modules are assigned to a separate policy context to ensure that
the EJBcontext can be put in service before the policy context of the
web module (which may depend on being able to call the EJB) . Also added
a footnote with reference to section &lt;&lt;a512[See
EJB Policy Context Identifiers] for further clarification.</p>
</li>
<li>
<p>Added <a href="#a278">Programmatic Servlet Registrations</a>, to describe how the servlet policy
translation defined by this subcontract can be applied to the security
configuration resulting from the programmatic registration and security
configuration enabled by Servlet 3.0. Also added a description of how an
existing policy context may be retranslated while presrving its links to
other policy contexts.</p>
</li>
<li>
<p>In <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a>, added paragraph to ensure that EJBs defined in web
modules are assigned to a separate policy context to ensure that the EJB
context can be put in service before the policy context of the web
module (which may depend on being able to call the EJB).</p>
</li>
<li>
<p>Clarified <a href="#a527">Deploying an Application or Module</a>, to allow translations, links, and
commits of individual modules to be interleaved as necessary to support
runtime initialization of servlet policy (as required by Servlet 3.0)
while preserving the ability of a ServletContextListener to make a local
call to an EJB in the same application (and without getting an access
exception).</p>
</li>
<li>
<p>In the optional
<a href="#a536">Deploying to an existing Policy Configuration</a>, added an additional paragraph to describe what must be
done to capture the effects of any programmatic registrations and
security configurations that may happen during initialization in a
Servlet 3.0 container.</p>
</li>
<li>
<p>Simplified <a href="#a540">Redeploying a Module</a>, by having it refer to
<a href="#a527">Deploying an Application or Module</a>,
which, as described above, has been changed to handle Servlet 3.0.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-api-13"><a class="anchor" href="#changes-to-api-13"></a>C.18.3. Changes to API</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Added clarification to removeUncheckedPolicy,
removeExcludedPolicy, and removeRole methods (of the PolicyConfiguration
interface) to indicate that these methods have no effect on the linkages
among policy contexts.</p>
</li>
<li>
<p>Added requirement that the removeRole method
of the PolicyConfiguration interface remove all roles when called with a
role name of "*" and when no role by that name exists in the
PolicyConfiguration..</p>
</li>
<li>
<p>Added clarification to the
getPolicyConfiguration method of PolicyConfigurationFactory to indicate
that it removes policy statements and linkages when the value of the
remove parameter is true.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="change-log-for-errata-h-maintenance-release-8"><a class="anchor" href="#change-log-for-errata-h-maintenance-release-8"></a>C.19. Change log for Errata H (maintenance Release 8)</h3>
<div class="sect3">
<h4 id="changes-made-throughout-the-document-6"><a class="anchor" href="#changes-made-throughout-the-document-6"></a>C.19.1. Changes Made Throughout the Document</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Changed the specification version from 1.4 to
1.5.</p>
</li>
<li>
<p>updated the license page</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="changes-to-policy-configuration-subcontract-12"><a class="anchor" href="#changes-to-policy-configuration-subcontract-12"></a>C.19.2. Changes to Policy Configuration Subcontract</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <a href="#a278">Programmatic Servlet Registrations</a>, changed reference to Servlet 3.0 to
"beginning with Servlet 3.0".</p>
</li>
<li>
<p>In <a href="#a281">Translating security-constraint Elements</a>, added text to describe the
handling of the role-name "**" in an auth-constraint, and to indicate
that the "*" role does not imply the "**" role unless the application
has defined its own role named "**". Amended description of permissions
created for uncovered methods, to require that they be added to either
the excluded or unchecked permission collections, based on the uncovered
method semantic in effect for the web-module.</p>
</li>
<li>
<p>In <a href="#a343">Translating Servlet security-role-ref Elements</a>, and
<a href="#a524">Translating Jakarta Enterprise Beans security-role-ref Elements</a>, added description of the handling of the "any authenticated
user" role "**".</p>
</li>
<li>
<p>In <a href="#a518">Translating Jakarta Enterprise Beans method-permission Elements</a>, amended description of the
translation of role-names in method-permission elements, to include
support for the role named "**".</p>
</li>
<li>
<p>In <a href="#a544">What the Provider Must Do</a>, added requirement that the provider grant all
permissions assigned to role "**" to any authenticated user.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr/>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. For some permission types, such as the <code>EJBMethodPermission</code>, it will generally not be possible to use the implies method of the <code>PermissionCollection</code> to compute collection equivalence (because the implies method is unable to determine when a collection contains all the permissions implied by a wild carded form of the permission).
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. An exception to this rule is described in <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a>.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. See <a href="#a512">Jakarta Enterprise Beans Policy Context Identifiers</a> for further clarification.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. This can be achieved by passing true as the second parameter in the call to <code>getPolicyConfiguration</code>, or by calling delete on the <code>PolicyConfiguration</code> before calling <code>getPolicyConfiguration</code> to transition it to the open state.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. The WebUserDataPermission objects allow a container to determine when to reject a request before redirection if it would ultimately be rejected as the result of an excluding auth-constraint
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. The value null should be used as the actions value in the construction of a <code>WebUserDataPermission</code> when both the HTTP method specification, and the representation of the acceptable connection type may be represented by null. If only one of the action components may be represented by null the other should be used as the actions value.
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. The set of all possible HTTP methods is non-enumerable and contains the traditional HTTP methods (i.e., DELETE, GET, HEAD, OPTIONS, POST, PUT, TRACE) and any method conforming to the “extension-method” syntax defined in IETF RFC 2616 “Hypertext Transfer Protocol&#8201;&#8212;&#8201;HTTP/1.1”. A null or the emptyString HTTP method specification is used to this set.
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. Qualifying patterns implied by another qualifying pattern may be dropped because the use of the reduced list to qualify a pattern will yield a <code>URLPatternSpec</code> “equal” to the <code>URLPatternSpec</code> produced by qualifying the pattern with the full list (for example, /a/*:/ a/b:/a/b/*:/a/b/c/* is equal to /a/*:/a/b/*)
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. See <a href="#a839">Colons Within path-segment of Request URI</a> for details.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. These additional <code>WebRoleRefPermission</code> objects support the use of <code>isUserInRole</code> from unmapped (to a Servlet) JSP components.
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. This can be achieved by passing <code>true</code> as the second parameter in the call to <code>getPolicyConfiguration</code>, or by calling <code>delete</code> on the <code>PolicyConfiguration</code> before calling <code>getPolicyConfiguration</code> to transition it to the open state.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. Jakarta Enterprise Beans supports inclusion of <code>security-role-ref</code> elements in entity and session elements. Future versions could support inclusion in <code>message-driven</code>.
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. For example, if an application declares roles {R1, R2, R3} and defines a session Jakarta Enterprise Bean named “shoppingCart” that contains one <code>security-role-ref</code> element with <code>role-name</code> R1, then an additional <code>EJBRoleRefPermission</code> must be added to each of the roles R2 and R3. The name of both permissions must be “shoppingCart”, and the actions value of the permission added to role R2 must be “R2”, and the actions value of the permission added to role R3 must be “R3”.
</div>
<div class="footnote" id="_footnotedef_14">
<a href="#_footnoteref_14">14</a>. Policy context linking is transitive and symmetric, and this specification should not be interpreted as requiring that linkConfiguration be called on every combination of policy contexts that must share the same principal-to-role mapping, or that all contexts must be linked before any can be committed.
</div>
<div class="footnote" id="_footnotedef_15">
<a href="#_footnoteref_15">15</a>. Such as having a Jakarta Servlet <code>ServletContextListener</code> configured that could programmatically register a servlet and configure its security constraints and that could also perform a local invocation of a Jakarta Enterprise Bean in another module of the application.
</div>
<div class="footnote" id="_footnotedef_16">
<a href="#_footnoteref_16">16</a>. The <code>HttpServletRequest</code> based constructors of <code>WebResourcePermission</code> and <code>WebUserDataPermission</code> must perform the escaped ecoding. For all other constructors, the encoding must be performed prior to invoking the constructor. See issue Section B.22, “Colons Within path-segment of Request URI.
</div>
<div class="footnote" id="_footnotedef_17">
<a href="#_footnoteref_17">17</a>. The syntax and semantics of an <code>HTTPMethodExceptionList</code> are described in a subsection of <a href="#a281">Translating security-constraint Elements</a>
</div>
<div class="footnote" id="_footnotedef_18">
<a href="#_footnoteref_18">18</a>. <a href="#a753">Optimization of Permission Evaluations</a> allows containers to reuse granted results obtained for unauthenticated callers (i.e. with no principals) to authorize, independent of caller identity, permissions implied by such results.
</div>
<div class="footnote" id="_footnotedef_19">
<a href="#_footnoteref_19">19</a>. Not all policy systems support this query. Also, the Policy provider does not see the permission being checked, and therefore cannot use the permission to identify when to invoke a particular policy context handler.
</div>
</div>
<div id="footer">
<div id="footer-text">
 2.0<br/>
Last updated 2020-02-13 18:03:22 +0100
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>