<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Jakarta Messaging Team, https://projects.eclipse.org/projects/ee4j.jms">
<title>Jakarta Messaging</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta Messaging</h1>
<div class="details">
<span id="author" class="author">Jakarta Messaging Team, https://projects.eclipse.org/projects/ee4j.jms</span><br>
<span id="email" class="email"><a href="https://dev.eclipse.org/mailman/listinfo/jms-dev" class="bare">https://dev.eclipse.org/mailman/listinfo/jms-dev</a></span><br>
<span id="revnumber"> 3.0,</span>
<span id="revdate">October 23, 2020</span>
<br><span id="revremark">Final</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#copyright">Copyright</a></li>
<li><a href="#eclipse-foundation-specification-license">Eclipse Foundation Specification License</a>
<ul class="sectlevel3">
<li><a href="#disclaimers">Disclaimers</a></li>
</ul>
</li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#overview-of-jakarta-messaging">1.1. Overview of Jakarta Messaging</a>
<ul class="sectlevel3">
<li><a href="#what-is-messaging">1.1.1. What is messaging?</a></li>
<li><a href="#the-objectives-of-jakarta-messaging">1.1.2. The objectives of Jakarta Messaging</a></li>
<li><a href="#jakarta-messaging-domains">1.1.3. Jakarta Messaging domains</a></li>
<li><a href="#what-jakarta-messaging-does-not-include">1.1.4. What Jakarta Messaging does not include</a></li>
<li><a href="#java-se-and-jakarta-ee-support">1.1.5. Java SE and Jakarta EE support</a></li>
</ul>
</li>
<li><a href="#what-is-new-in-jakarta-messaging-2-0">1.2. What is new in Jakarta Messaging 2.0?</a></li>
</ul>
</li>
<li><a href="#architecture">2. Architecture</a>
<ul class="sectlevel2">
<li><a href="#overview">2.1. Overview</a></li>
<li><a href="#what-is-a-jakarta-messaging-application">2.2. What is a Jakarta Messaging application?</a></li>
<li><a href="#administration">2.3. Administration</a></li>
<li><a href="#two-messaging-styles">2.4. Two messaging styles</a></li>
<li><a href="#jakarta-messaging-apis">2.5. Jakarta Messaging APIs</a></li>
<li><a href="#interfaces-common-to-multiple-apis">2.6. Interfaces common to multiple APIs</a></li>
<li><a href="#classic-api-interfaces">2.7. Classic API interfaces</a></li>
<li><a href="#simplified-api-interfaces">2.8. Simplified API interfaces</a>
<ul class="sectlevel3">
<li><a href="#goals-of-the-simplified-api">2.8.1. Goals of the simplified API</a></li>
<li><a href="#key-features-of-the-simplified-api">2.8.2. Key features of the simplified API</a></li>
</ul>
</li>
<li><a href="#legacy-domain-specific-api-interfaces">2.9. Legacy domain-specific API interfaces</a></li>
<li><a href="#relationship-between-interfaces">2.10. Relationship between interfaces</a></li>
<li><a href="#terminology-for-sending-and-receiving-messages">2.11. Terminology for sending and receiving messages</a></li>
<li><a href="#developing-a-jakarta-messaging-application">2.12. Developing a Jakarta Messaging application</a>
<ul class="sectlevel3">
<li><a href="#developing-a-jakarta-messaging-client">2.12.1. Developing a Jakarta Messaging client</a></li>
</ul>
</li>
<li><a href="#security">2.13. Security</a></li>
<li><a href="#multi-threading">2.14. Multi-threading</a></li>
<li><a href="#triggering-clients">2.15. Triggering clients</a></li>
<li><a href="#requestreply">2.16. Request/reply</a></li>
</ul>
</li>
<li><a href="#jakarta-messaging-message-model">3. Jakarta Messaging message model</a>
<ul class="sectlevel2">
<li><a href="#background">3.1. Background</a></li>
<li><a href="#goals">3.2. Goals</a></li>
<li><a href="#jakarta-messaging-messages">3.3. Jakarta Messaging messages</a></li>
<li><a href="#message-header-fields">3.4. Message header fields</a>
<ul class="sectlevel3">
<li><a href="#jmsdestination">3.4.1. JMSDestination</a></li>
<li><a href="#jmsdeliverymode">3.4.2. JMSDeliveryMode</a></li>
<li><a href="#jmsmessageid">3.4.3. JMSMessageID</a></li>
<li><a href="#jmstimestamp">3.4.4. JMSTimestamp</a></li>
<li><a href="#jmscorrelationid">3.4.5. JMSCorrelationID</a></li>
<li><a href="#jmsreplyto">3.4.6. JMSReplyTo</a></li>
<li><a href="#jmsredelivered">3.4.7. JMSRedelivered</a></li>
<li><a href="#jmstype">3.4.8. JMSType</a></li>
<li><a href="#jmsexpiration">3.4.9. JMSExpiration</a></li>
<li><a href="#jmspriority">3.4.10. JMSPriority</a></li>
<li><a href="#how-message-header-values-are-set">3.4.11. How message header values are set</a></li>
<li><a href="#overriding-message-header-fields">3.4.12. Overriding message header fields</a></li>
<li><a href="#jmsdeliverytime">3.4.13. JMSDeliveryTime</a></li>
</ul>
</li>
<li><a href="#message-properties">3.5. Message properties</a>
<ul class="sectlevel3">
<li><a href="#property-names">3.5.1. Property names</a></li>
<li><a href="#property-values">3.5.2. Property values</a></li>
<li><a href="#using-properties">3.5.3. Using properties</a></li>
<li><a href="#property-value-conversion">3.5.4. Property value conversion</a></li>
<li><a href="#property-values-as-objects">3.5.5. Property values as objects</a></li>
<li><a href="#property-iteration">3.5.6. Property iteration</a></li>
<li><a href="#clearing-a-messages-property-values">3.5.7. Clearing a message’s property values</a></li>
<li><a href="#non-existent-properties">3.5.8. Non-existent properties</a></li>
<li><a href="#jakarta-messaging-defined-properties">3.5.9. Jakarta Messaging defined properties</a></li>
<li><a href="#provider-specific-properties">3.5.10. Provider-specific properties</a></li>
<li><a href="#jmsxdeliverycount">3.5.11. JMSXDeliveryCount</a></li>
</ul>
</li>
<li><a href="#message-acknowledgment">3.6. Message acknowledgment</a></li>
<li><a href="#the-message-interface">3.7. The Message interface</a></li>
<li><a href="#message-selection">3.8. Message selection</a>
<ul class="sectlevel3">
<li><a href="#message-selector">3.8.1. Message selector</a>
<ul class="sectlevel4">
<li><a href="#message-selector-syntax">3.8.1.1. Message selector syntax</a></li>
<li><a href="#null-values">3.8.1.2. Null values</a></li>
<li><a href="#special-notes">3.8.1.3. Special notes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#access-to-sent-messages">3.9. Access to sent messages</a></li>
<li><a href="#changing-the-value-of-a-received-message">3.10. Changing the value of a received message</a></li>
<li><a href="#jakarta-messaging-message-body">3.11. Jakarta Messaging message body</a>
<ul class="sectlevel3">
<li><a href="#clearing-a-message-body">3.11.1. Clearing a message body</a></li>
<li><a href="#read-only-message-body">3.11.2. Read-only message body</a></li>
<li><a href="#conversions-provided-by-streammessage-and-mapmessage">3.11.3. Conversions provided by StreamMessage and MapMessage</a></li>
<li><a href="#messages-for-non-jakarta-messaging-clients">3.11.4. Messages for non-Jakarta Messaging clients</a></li>
</ul>
</li>
<li><a href="#provider-implementations-of-jakarta-messaging-message-interfaces">3.12. Provider implementations of Jakarta Messaging message interfaces</a></li>
</ul>
</li>
<li><a href="#messaging-domains">4. Messaging domains</a>
<ul class="sectlevel2">
<li><a href="#jakarta-messaging-point-to-point-model">4.1. Jakarta Messaging point-to-point model</a>
<ul class="sectlevel3">
<li><a href="#overview-2">4.1.1. Overview</a></li>
<li><a href="#queue-semantics">4.1.2. Queue semantics</a></li>
<li><a href="#queue-management">4.1.3. Queue management</a></li>
<li><a href="#queue">4.1.4. Queue</a></li>
<li><a href="#temporaryqueue">4.1.5. TemporaryQueue</a></li>
<li><a href="#queuebrowser">4.1.6. QueueBrowser</a></li>
<li><a href="#queuerequestor">4.1.7. QueueRequestor</a></li>
<li><a href="#reliability">4.1.8. Reliability</a></li>
</ul>
</li>
<li><a href="#jakarta-messaging-publishsubscribe-model">4.2. Jakarta Messaging publish/subscribe model</a>
<ul class="sectlevel3">
<li><a href="#overview-3">4.2.1. Overview</a></li>
<li><a href="#topic-semantics">4.2.2. Topic semantics</a></li>
<li><a href="#pubsub-latency">4.2.3. Pub/sub latency</a></li>
<li><a href="#subscription-name-characters-and-length">4.2.4. Subscription name characters and length</a></li>
<li><a href="#topic-management">4.2.5. Topic management</a></li>
<li><a href="#topic">4.2.6. Topic</a></li>
<li><a href="#temporary-topics">4.2.7. Temporary topics</a></li>
<li><a href="#recovery-and-redelivery">4.2.8. Recovery and redelivery</a></li>
<li><a href="#administering-subscriptions">4.2.9. Administering subscriptions</a></li>
<li><a href="#topicrequestor">4.2.10. TopicRequestor</a></li>
<li><a href="#reliability-2">4.2.11. Reliability</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#administered-objects">5. Administered objects</a>
<ul class="sectlevel2">
<li><a href="#overview-4">5.1. Overview</a></li>
<li><a href="#destination">5.2. Destination</a></li>
<li><a href="#connection-factories">5.3. Connection factories</a></li>
</ul>
</li>
<li><a href="#connecting-to-a-jakarta-messaging-provider">6. Connecting to a Jakarta Messaging provider</a>
<ul class="sectlevel2">
<li><a href="#connections">6.1. Connections</a>
<ul class="sectlevel3">
<li><a href="#authentication">6.1.1. Authentication</a></li>
<li><a href="#client-identifier">6.1.2. Client identifier</a></li>
<li><a href="#connection-setup">6.1.3. Connection setup</a></li>
<li><a href="#starting-a-connection">6.1.4. Starting a connection</a></li>
<li><a href="#pausing-delivery-of-incoming-messages">6.1.5. Pausing delivery of incoming messages</a></li>
<li><a href="#connectionmetadata">6.1.6. ConnectionMetaData</a></li>
<li><a href="#exceptionlistener">6.1.7. ExceptionListener</a></li>
<li><a href="#closing-a-connection">6.1.8. Closing a connection</a></li>
</ul>
</li>
<li><a href="#sessions">6.2. Sessions</a>
<ul class="sectlevel3">
<li><a href="#producer-and-consumer-creation">6.2.1. Producer and consumer creation</a></li>
<li><a href="#creating-temporary-destinations">6.2.2. Creating temporary destinations</a></li>
<li><a href="#creating-destination-objects">6.2.3. Creating Destination objects</a></li>
<li><a href="#optimized-message-implementations">6.2.4. Optimized message implementations</a></li>
<li><a href="#threading-restrictions-on-a-session">6.2.5. Threading restrictions on a session</a></li>
<li><a href="#threading-restrictions-on-a-jmscontext">6.2.6. Threading restrictions on a JMSContext</a></li>
<li><a href="#transactions">6.2.7. Transactions</a></li>
<li><a href="#distributed-transactions">6.2.8. Distributed transactions</a></li>
<li><a href="#message-order">6.2.9. Message order</a>
<ul class="sectlevel4">
<li><a href="#order-of-message-receipt">6.2.9.1. Order of message receipt</a></li>
<li><a href="#order-of-message-sends">6.2.9.2. Order of message sends</a></li>
</ul>
</li>
<li><a href="#message-acknowledgment-2">6.2.10. Message acknowledgment</a></li>
<li><a href="#duplicate-delivery-of-messages">6.2.11. Duplicate delivery of messages</a></li>
<li><a href="#duplicate-production-of-messages">6.2.12. Duplicate production of messages</a></li>
<li><a href="#serial-execution-of-client-code">6.2.13. Serial execution of client code</a></li>
<li><a href="#concurrent-message-delivery">6.2.14. Concurrent message delivery</a></li>
<li><a href="#closing-a-session">6.2.15. Closing a session</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sending-messages">7. Sending messages</a>
<ul class="sectlevel2">
<li><a href="#producers">7.1. Producers</a></li>
<li><a href="#synchronous-send">7.2. Synchronous send</a></li>
<li><a href="#asynchronous-send">7.3. Asynchronous send</a>
<ul class="sectlevel3">
<li><a href="#quality-of-service">7.3.1. Quality of service</a></li>
<li><a href="#exceptions">7.3.2. Exceptions</a></li>
<li><a href="#message-order-2">7.3.3. Message order</a></li>
<li><a href="#close-commit-or-rollback">7.3.4. Close, commit or rollback</a></li>
<li><a href="#restrictions-on-usage-in-jakarta-ee">7.3.5. Restrictions on usage in Jakarta EE</a></li>
<li><a href="#message-headers">7.3.6. Message headers</a></li>
<li><a href="#restrictions-on-threading">7.3.7. Restrictions on threading</a></li>
<li><a href="#use-of-the-completionlistener-by-the-jakarta-messaging-provider">7.3.8. Use of the CompletionListener by the Jakarta Messaging provider</a></li>
<li><a href="#restrictions-on-the-use-of-the-message-object">7.3.9. Restrictions on the use of the Message object</a></li>
</ul>
</li>
<li><a href="#setting-message-delivery-options">7.4. Setting message delivery options</a></li>
<li><a href="#setting-message-properties">7.5. Setting message properties</a></li>
<li><a href="#setting-message-headers">7.6. Setting message headers</a></li>
<li><a href="#message-delivery-mode">7.7. Message delivery mode</a></li>
<li><a href="#message-time-to-live">7.8. Message time-to-live</a></li>
<li><a href="#message-delivery-delay">7.9. Message delivery delay</a></li>
<li><a href="#jmsproducer-method-chaining">7.10. JMSProducer method chaining</a></li>
</ul>
</li>
<li><a href="#receiving-messages">8. Receiving messages</a>
<ul class="sectlevel2">
<li><a href="#consumers">8.1. Consumers</a></li>
<li><a href="#creating-a-consumer-on-a-queue">8.2. Creating a consumer on a queue</a></li>
<li><a href="#creating-a-consumer-on-a-topic">8.3. Creating a consumer on a topic</a>
<ul class="sectlevel3">
<li><a href="#unshared-non-durable-subscriptions">8.3.1. Unshared non-durable subscriptions</a></li>
<li><a href="#shared-non-durable-subscriptions">8.3.2. Shared non-durable subscriptions</a></li>
<li><a href="#unshared-durable-subscriptions">8.3.3. Unshared durable subscriptions</a></li>
<li><a href="#shared-durable-subscriptions">8.3.4. Shared durable subscriptions</a></li>
</ul>
</li>
<li><a href="#starting-message-delivery">8.4. Starting message delivery</a></li>
<li><a href="#receiving-messages-synchronously">8.5. Receiving messages synchronously</a></li>
<li><a href="#receiving-message-bodies-synchronously">8.6. Receiving message bodies synchronously</a></li>
<li><a href="#receiving-messages-asynchronously">8.7. Receiving messages asynchronously</a></li>
<li><a href="#closing-a-consumer">8.8. Closing a consumer</a></li>
</ul>
</li>
<li><a href="#other-jakarta-messaging-facilities">9. Other Jakarta Messaging facilities</a>
<ul class="sectlevel2">
<li><a href="#reliability-3">9.1. Reliability</a></li>
<li><a href="#method-inheritance-across-messaging-domains">9.2. Method inheritance across messaging domains</a></li>
</ul>
</li>
<li><a href="#jakarta-messaging-exceptions">10. Jakarta Messaging exceptions</a>
<ul class="sectlevel2">
<li><a href="#overview-5">10.1. Overview</a></li>
<li><a href="#jmsexception-and-jmsruntimeexception">10.2. JMSException and JMSRuntimeException</a></li>
<li><a href="#standard-exceptions">10.3. Standard exceptions</a></li>
</ul>
</li>
<li><a href="#jakarta-messaging-application-server-facilities">11. Jakarta Messaging application server facilities</a>
<ul class="sectlevel2">
<li><a href="#overview-6">11.1. Overview</a></li>
<li><a href="#concurrent-processing-of-a-subscriptions-messages">11.2. Concurrent processing of a subscription’s messages</a>
<ul class="sectlevel3">
<li><a href="#session">11.2.1. Session</a></li>
<li><a href="#serversession">11.2.2. ServerSession</a></li>
<li><a href="#serversessionpool">11.2.3. ServerSessionPool</a></li>
<li><a href="#connectionconsumer">11.2.4. ConnectionConsumer</a></li>
<li><a href="#how-a-connectionconsumer-uses-a-serversession">11.2.5. How a ConnectionConsumer uses a ServerSession</a></li>
<li><a href="#how-an-application-server-implements-a-serversession">11.2.6. How an application server implements a ServerSession</a></li>
<li><a href="#the-result">11.2.7. The result</a></li>
</ul>
</li>
<li><a href="#support-for-distributed-transactions">11.3. Support for distributed transactions</a>
<ul class="sectlevel3">
<li><a href="#xa-connection-factory">11.3.1. XA connection factory</a></li>
<li><a href="#xa-connection">11.3.2. XA connection</a></li>
<li><a href="#xa-session">11.3.3. XA session</a></li>
<li><a href="#xajmscontext">11.3.4. XAJMSContext</a></li>
<li><a href="#xaresource">11.3.5. XAResource</a></li>
</ul>
</li>
<li><a href="#jakarta-messaging-application-server-interfaces">11.4. Jakarta Messaging application server interfaces</a></li>
</ul>
</li>
<li><a href="#use-of-jakarta-messaging-api-in-jakarta-ee-applications">12. Use of Jakarta Messaging API in Jakarta EE applications</a>
<ul class="sectlevel2">
<li><a href="#overview-7">12.1. Overview</a></li>
<li><a href="#restrictions-on-the-use-of-jakarta-messaging-api-in-the-jakarta-ee-web-container-or-enterprise-beans-container">12.2. Restrictions on the use of Jakarta Messaging API in the Jakarta EE web container or Enterprise Beans container</a></li>
<li><a href="#behaviour-of-jakarta-messaging-sessions-in-the-jakarta-ee-web-container-or-enterprise-beans-container">12.3. Behaviour of Jakarta Messaging sessions in the Jakarta EE web container or Enterprise Beans container</a></li>
<li><a href="#injection-of-jmscontext-objects">12.4. Injection of JMSContext objects</a>
<ul class="sectlevel3">
<li><a href="#support-for-injection">12.4.1. Support for injection</a></li>
<li><a href="#container-managed-and-application-managed-jmscontexts">12.4.2. Container-managed and application-managed JMSContexts</a></li>
<li><a href="#injection-syntax">12.4.3. Injection syntax</a></li>
<li><a href="#scope-of-injected-jmscontext-objects">12.4.4. Scope of injected JMSContext objects</a></li>
<li><a href="#restrictions-on-use-of-injected-jmscontext-objects">12.4.5. Restrictions on use of injected JMSContext objects</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resource-adapter">13. Resource adapter</a>
<ul class="sectlevel2">
<li><a href="#mdb-activation-properties">13.1. MDB activation properties</a></li>
</ul>
</li>
<li><a href="#examples-of-the-classic-api">14. Examples of the classic API</a>
<ul class="sectlevel2">
<li><a href="#preparing-to-send-and-receive-messages">14.1. Preparing to send and receive messages</a>
<ul class="sectlevel3">
<li><a href="#getting-a-connectionfactory">14.1.1. Getting a ConnectionFactory</a></li>
<li><a href="#getting-a-destination">14.1.2. Getting a Destination</a></li>
<li><a href="#creating-a-connection">14.1.3. Creating a Connection</a></li>
<li><a href="#creating-a-session">14.1.4. Creating a Session</a></li>
<li><a href="#creating-a-messageproducer">14.1.5. Creating a MessageProducer</a></li>
<li><a href="#creating-a-messageconsumer">14.1.6. Creating a MessageConsumer</a></li>
<li><a href="#starting-message-delivery-2">14.1.7. Starting message delivery</a></li>
<li><a href="#using-a-textmessage">14.1.8. Using a TextMessage</a></li>
</ul>
</li>
<li><a href="#sending-and-receiving-messages">14.2. Sending and receiving messages</a>
<ul class="sectlevel3">
<li><a href="#sending-a-message">14.2.1. Sending a message</a></li>
<li><a href="#receiving-a-message-synchronously">14.2.2. Receiving a message synchronously</a></li>
<li><a href="#unpacking-a-textmessage">14.2.3. Unpacking a TextMessage</a></li>
</ul>
</li>
<li><a href="#other-messaging-features">14.3. Other messaging features</a>
<ul class="sectlevel3">
<li><a href="#receiving-messages-asynchronously-2">14.3.1. Receiving messages asynchronously</a></li>
<li><a href="#using-message-selection">14.3.2. Using message selection</a></li>
<li><a href="#using-durable-subscriptions">14.3.3. Using durable subscriptions</a>
<ul class="sectlevel4">
<li><a href="#creating-a-durable-subscription">14.3.3.1. Creating a durable subscription</a></li>
<li><a href="#creating-a-consumer-on-an-existing-durable-subscription">14.3.3.2. Creating a consumer on an existing durable subscription</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#jakarta-messaging-message-types">14.4. Jakarta Messaging message types</a>
<ul class="sectlevel3">
<li><a href="#creating-a-textmessage">14.4.1. Creating a TextMessage</a></li>
<li><a href="#unpacking-a-textmessage-2">14.4.2. Unpacking a TextMessage</a></li>
<li><a href="#creating-a-bytesmessage">14.4.3. Creating a BytesMessage</a></li>
<li><a href="#unpacking-a-bytesmessage">14.4.4. Unpacking a BytesMessage</a></li>
<li><a href="#creating-a-mapmessage">14.4.5. Creating a MapMessage</a></li>
<li><a href="#unpacking-a-mapmessage">14.4.6. Unpacking a MapMessage</a></li>
<li><a href="#creating-a-streammessage">14.4.7. Creating a StreamMessage</a></li>
<li><a href="#unpacking-a-streammessage">14.4.8. Unpacking a StreamMessage</a></li>
<li><a href="#creating-an-objectmessage">14.4.9. Creating an ObjectMessage</a></li>
<li><a href="#unpacking-an-objectmessage">14.4.10. Unpacking an ObjectMessage</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#examples-of-the-simplified-api">15. Examples of the simplified API</a>
<ul class="sectlevel2">
<li><a href="#sending-a-message-jakarta-ee">15.1. Sending a message (Jakarta EE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api">15.1.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api">15.1.2. Example using the simplified API</a></li>
<li><a href="#example-using-the-simplified-api-and-injection">15.1.3. Example using the simplified API and injection</a></li>
</ul>
</li>
<li><a href="#sending-a-message-java-se">15.2. Sending a message (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-2">15.2.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-2">15.2.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#sending-a-message-with-properties-java-se">15.3. Sending a message with properties (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-3">15.3.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-3">15.3.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#receiving-a-message-synchronously-jakarta-ee">15.4. Receiving a message synchronously (Jakarta EE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-4">15.4.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-4">15.4.2. Example using the simplified API</a></li>
<li><a href="#example-using-the-simplified-api-and-injection-2">15.4.3. Example using the simplified API and injection</a></li>
</ul>
</li>
<li><a href="#receiving-a-message-synchronously-java-se">15.5. Receiving a message synchronously (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-5">15.5.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-5">15.5.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#receiving-a-message-synchronously-from-a-durable-subscription-jakarta-ee">15.6. Receiving a message synchronously from a durable subscription (Jakarta EE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-6">15.6.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-6">15.6.2. Example using the simplified API</a></li>
<li><a href="#example-using-the-simplified-api-and-injection-3">15.6.3. Example using the simplified API and injection</a></li>
</ul>
</li>
<li><a href="#receiving-messages-asynchronously-java-se">15.7. Receiving messages asynchronously (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-7">15.7.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-7">15.7.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#receiving-a-message-asynchronously-from-a-durable-subscription-java-se">15.8. Receiving a message asynchronously from a durable subscription (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-8">15.8.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-8">15.8.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#receiving-messages-in-multiple-threads-java-se">15.9. Receiving messages in multiple threads (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-9">15.9.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-9">15.9.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#receiving-synchronously-and-sending-a-message-in-the-same-local-transaction-java-se">15.10. Receiving synchronously and sending a message in the same local transaction (Java SE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-10">15.10.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-10">15.10.2. Example using the simplified API</a></li>
</ul>
</li>
<li><a href="#requestreply-pattern-using-a-temporaryqueue-jakarta-ee">15.11. Request/reply pattern using a TemporaryQueue (Jakarta EE)</a>
<ul class="sectlevel3">
<li><a href="#example-using-the-classic-api-11">15.11.1. Example using the classic API</a></li>
<li><a href="#example-using-the-simplified-api-11">15.11.2. Example using the simplified API</a></li>
<li><a href="#example-using-the-simplified-api-and-injection-4">15.11.3. Example using the simplified API and injection</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#change-history">Appendix A: Change history</a>
<ul class="sectlevel2">
<li><a href="#version-2-0">A.1. Version 2.0</a>
<ul class="sectlevel3">
<li><a href="#reorganisation-of-chapters">A.1.1. Reorganisation of chapters</a></li>
<li><a href="#jakarta-messaging-providers-must-implement-both-ptp-and-pub-sub-jms_spec-50">A.1.2. Jakarta Messaging providers must implement both PTP and Pub-Sub (JMS_SPEC-50)</a></li>
<li><a href="#use-of-jakarta-messaging-api-in-jakarta-ee-applications-jms_spec-45-and-jms_spec-27">A.1.3. Use of Jakarta Messaging API in Jakarta EE applications (JMS_SPEC-45 and JMS_SPEC-27)</a></li>
<li><a href="#resource-adapter-jms_spec-25">A.1.4. Resource adapter (JMS_SPEC-25)</a></li>
<li><a href="#mdb-activation-properties-jms_spec-30-jms_spec-54-jms_spec-55">A.1.5. MDB activation properties (JMS_SPEC-30, JMS_SPEC-54, JMS_SPEC-55)</a></li>
<li><a href="#new-methods-to-create-a-session-jms_spec-45">A.1.6. New methods to create a session (JMS_SPEC-45)</a></li>
<li><a href="#new-createdurableconsumer-methods-jms_spec-51">A.1.7. New createDurableConsumer methods (JMS_SPEC-51)</a></li>
<li><a href="#multiple-consumers-now-allowed-on-the-same-topic-subscription-jms_spec-40">A.1.8. Multiple consumers now allowed on the same topic subscription (JMS_SPEC-40)</a>
<ul class="sectlevel4">
<li><a href="#non-durable-subscriptions">A.1.8.1. Non-durable subscriptions</a></li>
<li><a href="#durable-subscriptions">A.1.8.2. Durable subscriptions</a></li>
</ul>
</li>
<li><a href="#client-id-optional-on-shared-durable-subscriptions-jms_spec-39">A.1.9. Client ID optional on shared durable subscriptions (JMS_SPEC-39)</a></li>
<li><a href="#delivery-delay-jms_spec-44">A.1.10. Delivery delay (JMS_SPEC-44)</a></li>
<li><a href="#sending-messages-asynchronously-jms_spec-43">A.1.11. Sending messages asynchronously (JMS_SPEC-43)</a></li>
<li><a href="#use-of-autocloseable-jms_spec-53">A.1.12. Use of AutoCloseable (JMS_SPEC-53)</a></li>
<li><a href="#jmsxdeliverycount-jms_spec-42">A.1.13. JMSXDeliveryCount (JMS_SPEC-42)</a></li>
<li><a href="#simplified-api-jms_spec-64">A.1.14. Simplified API (JMS_SPEC-64)</a></li>
<li><a href="#new-method-to-extract-the-body-directly-from-a-message-jms_spec-101">A.1.15. New method to extract the body directly from a Message (JMS_SPEC-101)</a></li>
<li><a href="#subscription-name-characters-and-length-2">A.1.16. Subscription name characters and length</a></li>
<li><a href="#clarification-message-may-be-sent-using-any-session-jms_spec-52">A.1.17. Clarification: message may be sent using any session (JMS_SPEC-52)</a></li>
<li><a href="#clarification-use-of-exceptionlistener-jms_spec-49">A.1.18. Clarification: use of ExceptionListener (JMS_SPEC-49)</a></li>
<li><a href="#clarification-use-of-stop-or-close-from-a-message-listener-jms_spec-48">A.1.19. Clarification: use of stop or close from a message listener (JMS_SPEC-48)</a></li>
<li><a href="#clarification-use-of-nolocal-when-creating-a-durable-subscription-jms_spec-65">A.1.20. Clarification: use of noLocal when creating a durable subscription (JMS_SPEC-65)</a></li>
<li><a href="#clarification-message-headers-that-are-intended-to-be-set-by-the-jakarta-messaging-provder-jms_spec-34">A.1.21. Clarification: message headers that are intended to be set by the Jakarta Messaging provder (JMS_SPEC-34)</a></li>
<li><a href="#clarification-session-methods-createqueue-and-createtopic-jms_spec-31">A.1.22. Clarification: Session methods createQueue and createTopic (JMS_SPEC-31)</a></li>
<li><a href="#clarification-definition-of-jmsexpiration-jms_spec-82">A.1.23. Clarification: Definition of JMSExpiration (JMS_SPEC-82)</a></li>
<li><a href="#correction-reconnecting-to-a-durable-subscription-jms_spec-80">A.1.24. Correction: Reconnecting to a durable subscription (JMS_SPEC-80)</a></li>
<li><a href="#correction-mapmessage-when-name-is-null-jms_spec-77">A.1.25. Correction: MapMessage when name is null (JMS_SPEC-77)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta Messaging

Version: 3.0

Status: Final

Release: October 23, 2020</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copyright"><a class="anchor" href="#copyright"></a>Copyright</h3>
<div class="paragraph">
<p>Copyright (c) 2019, 2020 Eclipse Foundation.</p>
</div>
</div>
<div class="sect2">
<h3 id="eclipse-foundation-specification-license"><a class="anchor" href="#eclipse-foundation-specification-license"></a>Eclipse Foundation Specification License</h3>
<div class="paragraph">
<p>By using and/or copying this document, or the Eclipse Foundation
document from which this statement is linked, you (the licensee) agree
that you have read, understood, and will comply with the following
terms and conditions:</p>
</div>
<div class="paragraph">
<p>Permission to copy, and distribute the contents of this document, or
the Eclipse Foundation document from which this statement is linked, in
any medium for any purpose and without fee or royalty is hereby
granted, provided that you include the following on ALL copies of the
document, or portions thereof, that you use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link or URL to the original Eclipse Foundation document.</p>
</li>
<li>
<p>All existing copyright notices, or if one does not exist, a notice
(hypertext is preferred, but a textual representation is permitted)
of the form: "Copyright (c) [$date-of-document]
Eclipse Foundation, Inc. <a href="#url to this license">[url to this license]</a>"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inclusion of the full text of this NOTICE must be provided. We
request that authorship attribution be provided in any software,
documents, or other items or products that you create pursuant to the
implementation of the contents of this document, or any portion
thereof.</p>
</div>
<div class="paragraph">
<p>No right to create modifications or derivatives of Eclipse Foundation
documents is granted pursuant to this license, except anyone may
prepare and distribute derivative works and portions of this document
in software that implements the specification, in supporting materials
accompanying such software, and in documentation of such software,
PROVIDED that all such works include the notice below. HOWEVER, the
publication of derivative works of this document for use as a technical
specification is expressly prohibited.</p>
</div>
<div class="paragraph">
<p>The notice is:</p>
</div>
<div class="paragraph">
<p>"Copyright (c) 2018 Eclipse Foundation. This software or
document includes material copied from or derived from [title and URI
of the Eclipse Foundation specification document]."</p>
</div>
<div class="sect3">
<h4 id="disclaimers"><a class="anchor" href="#disclaimers"></a>Disclaimers</h4>
<div class="paragraph">
<p>THIS DOCUMENT IS PROVIDED &quot;AS IS,&quot; AND THE COPYRIGHT
HOLDERS AND THE ECLIPSE FOUNDATION MAKE NO REPRESENTATIONS OR
WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE DOCUMENT ARE
SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS
WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR
OTHER RIGHTS.</p>
</div>
<div class="paragraph">
<p>THE COPYRIGHT HOLDERS AND THE ECLIPSE FOUNDATION WILL NOT BE LIABLE
FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT
OF ANY USE OF THE DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE
CONTENTS THEREOF.</p>
</div>
<div class="paragraph">
<p>The name and trademarks of the copyright holders or the Eclipse
Foundation may NOT be used in advertising or publicity pertaining to
this document or its contents without specific, written prior
permission. Title to copyright in this document will at all times
remain with copyright holders.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This specification describes the objectives and functionality of the
Jakarta Messaging.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging provides a common way for Java programs to create, send, receive and
read an enterprise messaging system’s messages.</p>
</div>
<div class="sect2">
<h3 id="overview-of-jakarta-messaging"><a class="anchor" href="#overview-of-jakarta-messaging"></a>1.1. Overview of Jakarta Messaging</h3>
<div class="paragraph">
<p>Enterprise messaging products (or as they are sometimes called,
message-oriented middleware products) are an essential component for
integrating intra-company operations. They allow separate business
components to be combined into a reliable, yet flexible, system.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging was initially developed to provide a standard Java API for the
established messaging products that already existed. Since then many
more messaging products have been developed.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging provides a common way for both Java client applications and Java
middle-tier services to use these messaging products. It defines some
messaging semantics and a corresponding set of Java interfaces.</p>
</div>
<div class="paragraph">
<p>Since messaging is a peer-to-peer technology, users of Jakarta Messaging are referred
to generically as <em>clients</em>. A Jakarta Messaging <em>application</em> is made up of a set of
application defined messages and a set of clients that exchange them.</p>
</div>
<div class="paragraph">
<p>Messaging products that implement Jakarta Messaging do so by supplying a <em>provider</em>
that implements the Jakarta Messaging interfaces. Messaging products may support
clients which use programming languages other than Java. Although such
support is beyond the scope of Jakarta Messaging, the design of Jakarta Messaging has always
accommodated the need for messaging products to support languages other
than Java.</p>
</div>
<div class="sect3">
<h4 id="what-is-messaging"><a class="anchor" href="#what-is-messaging"></a>1.1.1. What is messaging?</h4>
<div class="paragraph">
<p>The term <em>messaging</em> is quite broadly defined in computing. It is used
for describing various operating system concepts; it is used to describe
email and fax systems; and here, it is used to describe asynchronous
communication between enterprise applications.</p>
</div>
<div class="paragraph">
<p>Messages, as described here, are asynchronous requests, reports or
events that are consumed by enterprise applications, not humans. They
contain vital information needed to coordinate these systems. They
contain precisely formatted data that describe specific business
actions. Through the exchange of these messages each application tracks
the progress of the enterprise.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-objectives-of-jakarta-messaging"><a class="anchor" href="#the-objectives-of-jakarta-messaging"></a>1.1.2. The objectives of Jakarta Messaging</h4>
<div class="paragraph">
<p>The objectives of Jakarta Messaging are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to provide Java applications with the messaging functionality needed
to implement sophisticated enterprise applications</p>
</li>
<li>
<p>to define a common set of messaging concepts and facilities</p>
</li>
<li>
<p>to minimize the concepts a Java language programmer must learn to use
enterprise messaging products</p>
</li>
<li>
<p>to maximize the portability of Java messaging applications between
different messaging products</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="jakarta-messaging-domains"><a class="anchor" href="#jakarta-messaging-domains"></a>1.1.3. Jakarta Messaging domains</h4>
<div class="paragraph">
<p>Jakarta Messaging supports the two major styles of messaging provided by enterprise
messaging products:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Point-to-point (PTP) messaging allows a client to send a message to
another client via an intermediate abstraction called a <em>queue</em>. The
client that sends the message sends it to a specific queue. The client
that receives the message extracts it from that queue.</p>
</li>
<li>
<p>Publish and subscribe (pub/sub) messaging allows a client to send a
message to multiple clients via an intermediate abstraction called a
<em>topic</em>. The client that sends the message <em>publishes</em> it to a specific
topic. The message is then delivered to all the clients that are
<em>subscribed</em> to that topic.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="what-jakarta-messaging-does-not-include"><a class="anchor" href="#what-jakarta-messaging-does-not-include"></a>1.1.4. What Jakarta Messaging does not include</h4>
<div class="paragraph">
<p>Jakarta Messaging does not address the following functionality:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Load balancing/fault tolerance - Many products provide support for
multiple, cooperating clients implementing a critical service. The Jakarta Messaging
API does not specify how such clients cooperate to appear to be a
single, unified service.</p>
</li>
<li>
<p>Error/advisory notification - Most messaging products define system
messages that provide asynchronous notification of problems or system
events to clients. Jakarta Messaging does not attempt to standardize these messages.
By following the guidelines defined by Jakarta Messaging, clients can avoid using
these messages and thus prevent the portability problems their use
introduces.</p>
</li>
<li>
<p>Administration - Jakarta Messaging does not define an API for administering
messaging products.</p>
</li>
<li>
<p>Security - Jakarta Messaging does not specify an API for controlling the privacy and
integrity of messages. It also does not specify how digital signatures
or keys are distributed to clients. Security is considered to be a Jakarta Messaging
provider-specific feature that is configured by an administrator rather
than controlled via the Jakarta Messaging API by clients.</p>
</li>
<li>
<p>Wire protocol - Jakarta Messaging does not define a wire protocol for messaging.</p>
</li>
<li>
<p>Message type repository - Jakarta Messaging does not define a repository for storing
message type definitions and it does not define a language for creating
message type definitions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="java-se-and-jakarta-ee-support"><a class="anchor" href="#java-se-and-jakarta-ee-support"></a>1.1.5. Java SE and Jakarta EE support</h4>
<div class="paragraph">
<p>The Jakarta Messaging API is designed to be suitable for use by both Java client
applications using the Java™ Platform, Standard Edition (Java SE), and
Java middle-tier services using Jakarta EE.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider must support its use by Java client applications using
Java SE. It is optional whether a given Jakarta Messaging provider supports its use by
middle-tier applications using Jakarta EE.</p>
</div>
<div class="paragraph">
<p>The Jakarta EE Specification requires a full Jakarta EE platform
implementation to include a messaging provider which supports the Jakarta Messaging
API in both Java SE and Jakarta EE applications.</p>
</div>
<div class="paragraph">
<p>Jakarta EE makes a number of additional features available to messaging
applications beyond those defined in the Jakarta Messaging specification itself, most
notably message-driven beans (MDBs) and Jakarta transactions. Jakarta EE also
imposes a number of restrictions on the use of the Jakarta Messaging API.</p>
</div>
<div class="paragraph">
<p>For more information on the use of Jakarta Messaging by Jakarta EE applications, see
chapter 12 “Use of Jakarta Messaging API in Jakarta EE applications”.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="what-is-new-in-jakarta-messaging-2-0"><a class="anchor" href="#what-is-new-in-jakarta-messaging-2-0"></a>1.2. What is new in Jakarta Messaging 2.0?</h3>
<div class="paragraph">
<p>A full list of the new features, changes and clarifications introduced
in Jakarta Messaging 2.0 is given in section A.1 “Version 2.0” of the “Change history”
chapter. Here is a summary:</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging 2.0 specification now requires Jakarta Messaging providers to implement both
PTP and pub/sub.</p>
</div>
<div class="paragraph">
<p>The following new messaging features have been added in Jakarta Messaging 2.0:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delivery delay: a message producer can now specify that a message must
not be delivered until after a specified time interval.</p>
</li>
<li>
<p>New send methods have been added to allow an application to send
messages asynchronously.</p>
</li>
<li>
<p>Jakarta Messaging providers must now set the JMSXDeliveryCount message property.</p>
<div class="paragraph">
<p>The following change has been made to aid scalability:</p>
</div>
</li>
<li>
<p>Applications which create a durable or non-durable topic subscription
may now designate them to be “shared”. A shared subscription may have
multiple consumers.</p>
<div class="paragraph">
<p>Several changes have been made to the Jakarta Messaging API to make it simpler and
easier to use:</p>
</div>
</li>
<li>
<p>Connection, Session and other objects with a close() method now
implement the java.lang.AutoCloseable interface to allow them to be used
in a Java SE 7 try-with-resources statement.</p>
</li>
<li>
<p>A new “simplified API” has been added which offers a simpler
alternative to the previous API, especially in Jakarta EE applications.</p>
</li>
<li>
<p>New methods have been added to create a session without the need to
supply redundant arguments.</p>
</li>
<li>
<p>Although setting client ID remains mandatory when creating an unshared
durable subscription, it is optional when creating a shared durable
subscription.</p>
</li>
<li>
<p>A new method getBody has been added to allow an application to extract
the body directly from a Message without the need to cast it first to an
appropriate subtype.</p>
<div class="paragraph">
<p>A new chapter has been added which describes some additional
restrictions and behaviour which apply when using the Jakarta Messaging API in the
Jakarta EE web container or the Enterprise Beans container. This information was previously only
available in the Jakarta Enterprise Beans and Jakarta EE platform specifications.</p>
</div>
<div class="paragraph">
<p>A new chapter has been added which adds a new recommendation for a Jakarta Messaging
provider to include a resource adapter, and which defines a number of
activation configuration properties.</p>
</div>
<div class="paragraph">
<p>New methods have been added to Session which return a MessageConsumer on
a durable topic subscription. Applications could previously only obtain
a domain-specific TopicSubscriber, even though its use was discouraged.</p>
</div>
<div class="paragraph">
<p>The specification has been clarified in various places.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>2. Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>2.1. Overview</h3>
<div class="paragraph">
<p>This chapter describes the environment of message based applications and
the role Jakarta Messaging plays in this environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="what-is-a-jakarta-messaging-application"><a class="anchor" href="#what-is-a-jakarta-messaging-application"></a>2.2. What is a Jakarta Messaging application?</h3>
<div class="paragraph">
<p>A Jakarta Messaging application is composed of the following parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Messaging Clients - These are the Java language programs that send and
receive messages.</p>
</li>
<li>
<p>Non-Jakarta Messaging Clients - These are clients that use a message system’s native
client API instead of Jakarta Messaging. If the application predated the availability
of Jakarta Messaging it is likely that it will include both Jakarta Messaging and non-Jakarta Messaging clients.</p>
</li>
<li>
<p>Messages - Each application defines a set of messages that are used to
communicate information between its clients.</p>
</li>
<li>
<p>Jakarta Messaging Provider - This is a messaging system that implements Jakarta Messaging in
addition to the other administrative and control functionality required
of a full featured messaging product.</p>
</li>
<li>
<p>Administered Objects - Administered objects are preconfigured Jakarta Messaging
objects created by an administrator for the use of clients.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="administration"><a class="anchor" href="#administration"></a>2.3. Administration</h3>
<div class="paragraph">
<p>It is expected that each Jakarta Messaging provider will differ significantly in its
underlying messaging technology. It is also expected there will be major
differences in how a provider’s system is installed and administered.</p>
</div>
<div class="paragraph">
<p>If Jakarta Messaging clients are to be portable, they must be isolated from these
proprietary aspects of a provider. This is done by defining Jakarta Messaging
administered objects that are created and customized by a provider’s
administrator and later used by clients. The client uses them through
Jakarta Messaging interfaces that are portable. The administrator creates them using
provider-specific facilities.</p>
</div>
<div class="paragraph">
<p>There are two types of Jakarta Messaging administered objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ConnectionFactory - This is the object a client uses to create a
connection with a provider.</p>
</li>
<li>
<p>Destination - This is the object a client uses to specify the
destination of messages it is sending and the source of messages it
receives.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Administered objects are placed in a JNDI namespace by an administrator.
A Jakarta Messaging client typically notes in its documentation the Jakarta Messaging administered
objects it requires and how the JNDI names of these objects should be
provided to it. Figure 2‑1 illustrates how Jakarta Messaging administration ordinarily
works.</p>
</div>
<div class="paragraph">
<p>Figure 2‑1 Jakarta Messaging Administration</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPcAAACICAYAAAA7+H1HAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAACA0SURBVHhe7Z0HtNREF8ex67GBitg/FSuiWFBUFDsqYsWKigVsIFjAgl2KFcEudgV7AbtiBXvvYO9dsYGIiJrv/O7LXeblZXeT7CTb5nfOnJTNy2bz5p/M3Ln3TrP//vvvaM/zxrviiiu1VZr5Kw5Hasw777zeFVdc4UrKZeONN/bveANO3I7UWWihhfw1R5ocfPDB/loDZRf3n3/+6XXo0KFo+ffff/2/cFQbTtzZgLjHjh0r5Y033shG3Hfeead33XXXSTn++OO9gw46KFcOO+ww/6jCcOHm35144om5c44ZM8Y/ylGJ2BB327ZtZUnTc+bMmbL+wQcfeE888YR3++23e927d5d6cfjhh3tff/21fN6qVStZKmuttZb3xx9/yPrkyZO9O+64Q9ZrBTRy5ZVXSnn66afTE/cPP/zgzT333FI++ugjb8aMGVJsvYE5j57z7bffzn3X77//7h/hqBRsinvffff1mjdvLuumuH/55RfZ999//3k77LCDrAfFvd1223mtW7eWdVPcq6++utQdZauttvLatWvnHXPMMd5ff/3V6DOEw/ZVV13l7/FydQ8mTpzoPfPMM7I9depU2Uf9Z3ufffaRbWD7kUce8bcatpdddll/Kxmpivudd97x+vXr51100UXe1Vdf7e/NFgwLfD/X8f777/t7HeXEprj3339/7/LLLxdRh4kbEDEExd2lSxdp6T3wwAM5cX/55Zfeb7/9Jp8vuOCCsuQB8PPPP0s9uvTSS2UfXUOgZQDa4tT98Oabb3rvvvuud9RRR8n2AgssIMsbb7xRlnwf5z3ppJNk+95775XlkksuKcvvvvvOu+eee2Q9CdbFzRt6/Pjx3hprrOEdeeSR/t7KoFevXnJdL7zwgvfjjz/6ex1Zk1TcCJY3MZjihv79+ycSNwwZMiQnbprpvKmpJyruTp06yRJxKyriFi1ayLEURbcRLuJGWKDifvzxx+Vz3symuBXErefg9yTFqrhp/gwaNMh76aWX/D2VCeI+7bTTvN12283f48iSpOK+5pprvL///lvWg+L+9NNPvfbt2zcRN2+/a6+9VtbziZu39YYbbijifuyxx6TZfOutt0YSt765zz//fFmaNqOLL75YxE3fHlTcK6+8sixp/pviHjBggCz1zc1nNOmTYkXcPIn222+/XJ+iWuDmcd1PPfWUv8eRBaU0yw844AD5nyl0uxSETB/3xRdflGMoRx+NT1YDvXv39tcaUEECdVdfSrQCbrnlFmnpweDBg2U5btw4WcLpp58uS6375htWvxv0zc329OnTZR/XyTbfp5phm2a8wnafPn38rWSULG6eRg8++KC/VZ3cfffduaeqI31s9LmrBbNZnjWJxU1T4swzz/S3aoMzzjgj90R2pEc9ibucJBI3B+v4YK2BYUWtmY50cOLOhtjipg9Dv6aWYZwc5xpHOjhxZ0MscWOtnDRpkr9V22DcuP766/0th02cuLMhsrhx76w3by+cGWrNrlAJOHFnQyRxn3LKKd4rr7zib9UXzz//fNkE3rJlS++ss86Scuqpp8o+9ZAqxOabb+6vVSZO3NlQVNy45+FPW8/8+uuvZWmiI26la9euslxmmWVkucgii4gDx+677y6BE7Qyll9+eek6OXE7oKi4jz322LoPr0Q8BCjgHJEliBvXSYoKXcW98MILe99//704VnzyySfeOeecI/uxFThxO6CguE0neIfnrbrqquKUkBWF3tz6WVDc4MTtgLziJqILP1vHLIjQIcggK8opbvyzSZyRBk7c2ZBX3GRuiNMMZewbD68JEyb4e2ZRzOsLp3+cR8J46KGH/LXGzD777P5afgjYh2effVaWpcL4NyIjs0UW4PvMPaUQ8QTDhw+XpfpFf/zxx7kgCT32hhtukO1SwJHn5JNPlv8dARA2ceLOhrziXnvttVlEhuwqCFTfbARlLLXUUt5bb70lFYT+IdE57Hv11Ve9oUOHSjOXtwNO91TeYcOGSWXlmJ9++knOQ9goYX5HHHGE7OfY0aNHe82aNZMK2KZNG2/bbbf1pk2bJgYljiHstFu3bt58883nTZkyxTv33HNzQfl33XWXnBvrM8fyhooD18zN4vtqGe6t/kb9n3zzzTdW7C9piJthWq6PUi1Q99O85lBxE/xOTHYcCEgnCwqhlKDhdDQbVdwa2oYIcYbhjXPbbbc1ErcGoWyyySayRNyE+WEFBm0Z6Jt7hRVWkPMQtqcVj1A60Dc34r7pppukNULSBq5TI300S0dUuNYePXrkwghrFVPc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" alt="image" width="390" height="213"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="two-messaging-styles"><a class="anchor" href="#two-messaging-styles"></a>2.4. Two messaging styles</h3>
<div class="paragraph">
<p>A Jakarta Messaging application can use either the point-to-point (PTP) or the
publish-and-subscribe (pub/sub) style of messaging, which are described
in more detail later in this specification. An application can also
combine both styles of messaging in one application. These two styles of
messaging are often referred to as messaging domains. Jakarta Messaging provides these
two messaging domains because they represent two common models for
messaging.</p>
</div>
<div class="paragraph">
<p>When using the Jakarta Messaging API, a developer can use interfaces and methods that
support both models of messaging. When using these interfaces, the
behavior of the messaging system may be somewhat different, because the
two messaging domains have different semantics. These semantic
differences are described in chapter 4 “Messaging domains”.</p>
</div>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-apis"><a class="anchor" href="#jakarta-messaging-apis"></a>2.5. Jakarta Messaging APIs</h3>
<div class="paragraph">
<p>For historical reasons Jakarta Messaging offers four alternative sets of interfaces
for sending and receiving messages.</p>
</div>
<div class="paragraph">
<p>JMS 1.0 defined two <strong>domain-specific APIs</strong>, one for point-to-point
messaging (queues) and one for pub/sub (topics). Although these remain
part of Jakarta Messaging for reasons of backwards compatibility they should be
considered to be completely superseded by the later APIs.</p>
</div>
<div class="paragraph">
<p>JMS 1.1 introduced a new unified API which offered a single set of
interfaces that could be used for both point-to-point and pub/sub
messaging. This is referred to here as the <strong>classic API</strong>.</p>
</div>
<div class="paragraph">
<p>JMS 2.0 introduces a <strong>simplified API</strong> which offers all the features of
the classic API but which requires fewer interfaces and is simpler to
use.</p>
</div>
<div class="paragraph">
<p>Each API offers a different set of interfaces for connecting to a Jakarta Messaging
provider and for sending and receiving messages. However they all share
a common set of interfaces for representing messages and message
destinations and to provide various utility features.</p>
</div>
<div class="paragraph">
<p>All interfaces are in the jakarta.jms package.</p>
</div>
</div>
<div class="sect2">
<h3 id="interfaces-common-to-multiple-apis"><a class="anchor" href="#interfaces-common-to-multiple-apis"></a>2.6. Interfaces common to multiple APIs</h3>
<div class="paragraph">
<p>The main interfaces common to multiple APIs are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Message, BytesMessage, MapMessage, ObjectMessage, StreamMessage and
TextMessage – a message sent to or received from a Jakarta Messaging provider.</p>
</li>
<li>
<p>Queue – an administered object that encapsulates the identity of a
message destination for point-to-point messaging</p>
</li>
<li>
<p>Topic – an administered object that encapsulates the identity of a
message destination for pub/sub messaging.</p>
</li>
<li>
<p>Destination - the common supertype of Queue and Topic</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="classic-api-interfaces"><a class="anchor" href="#classic-api-interfaces"></a>2.7. Classic API interfaces</h3>
<div class="paragraph">
<p>The main interfaces provided by the classic API are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ConnectionFactory - an administered object used by a client to create
a Connection. This interface is also used by the simplified API.</p>
</li>
<li>
<p>Connection - an active connection to a Jakarta Messaging provider</p>
</li>
<li>
<p>Session - a single-threaded context for sending and receiving messages</p>
</li>
<li>
<p>MessageProducer - an object created by a Session that is used for
sending messages to a queue or topic</p>
</li>
<li>
<p>MessageConsumer - an object created by a Session that is used for
receiving messages sent to a queue or topic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Figure 2‑2 Overview of classic API
<span class="image"><img src="data:image/png;base64,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" alt="image"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="simplified-api-interfaces"><a class="anchor" href="#simplified-api-interfaces"></a>2.8. Simplified API interfaces</h3>
<div class="paragraph">
<p>The simplified API provides the same messaging functionality as the
classic API but requires fewer interfaces and is simpler to use.</p>
</div>
<div class="paragraph">
<p>The main interfaces provided by the simplified API are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ConnectionFactory - an administered object used by a client to create
a Connection. This interface is also used by the classic API.</p>
</li>
<li>
<p>JMSContext - an active connection to a Jakarta Messaging provider and a
single-threaded context for sending and receiving messages</p>
</li>
<li>
<p>JMSProducer - an object created by a JMSContext that is used for
sending messages to a queue or topic</p>
</li>
<li>
<p>JMSConsumer - an object created by a JMSContext that is used for
receiving messages sent to a queue or topic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Figure 2‑3 Overview of simplified API
<span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA/8AAAHyCAMAAACK3Y6TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABoVBMVEUAAADG2fHF2O+zxdu90+6SpsKpvNSvxNy6zeUjPV+Rnq8AAAB4hJJHTldfaHMXGRuOnK2Sn7AuMjiouMxieZegtc5WbYzD1u5DXHuds8yDmrbL3PK1yOIxTG0oRGakuNOLoLs9VnpddZP///9GRkanp6fd3d2JiYnDw8NpaWkjIyMpKSkLCwu1tbXS0tIREREZGRk0NDTm5uaZmZlLS0vy8/VycnKFhYVZWVn2+f1iYmKVlZU7Ozvs7OzMzMx7e3vl6OzD1vFmcHxWVla/v7/u8POtra3U4vTa5vbj7Pikr72dqrubp7axwteqtMHd6Pe6ws3y9fvX3OKuuMTJ1OLP1dzd4eaVorOnsr/DytS0vciot8vIz9fj5uqNs+KWueScveaqxum30O7s8/qKsN6kw+izzOyRtuOgv+e/1fChwOeuyeu4z+6PpMCFq9ktSGyEqddihK1xlcFCYIZ6ncpGZIqBpdNef6kzT3J+os5MbJRqi7WIrdx+o9A9Wn9XeJ9ukLtce6U/XYFJZo51mMRTcppwk75mh7E0UXQ3VnonQmRdqyA3AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjBQEGOiOvG/ggAAA1nklEQVR42u2di2Mb1b3nI0WEeI4ekVQIVIVert5ybMU4gSSNcXxN66SF0t67u3S7u341VqI4m15a4DZQLqTAbdm/es9rXrYeY8/jN6Pz/bTE8mgsa77z+5xz5sxofOECICSXy+Vzi0ueOl8A0gq1nGgDAKBioft9tAAAzILayWShThuANEHtI1oAAMiglhENAABkUKuIBgAAMqhFJAKzgABcMNZ/DAAAuHDBnPN+aAAAOAG1hITgCAAYD7WE8B8AMqgdJOUidfoA0EKtICkF6vQBoIVaQVqo0weAFmoDaXmJOn4AKDH35J/kEnX+AFBCLSAxL1PnDwAl1AISc3mJegcAQAi1gMTk4T8wmdgNs1jR85hF+MqlKF4M/gOTmW1HmTFWueIx+OyUWdl5XA3sf43ZXJm6ToXV4T8AYZgpR0U7WA4o0zz/g+P6b8F/AOJilhslJg1T/leFjHWlZpk3DDW1Qol/W3Fbi5p6WJQrV4pixK/IqcGE051XdLPC16yU9St7sdRL1bj/dfkCRbdhqFWZ/N2SUk6/dEX9mFjCX9yy1KLZTQj3Hw0AMJhZ/msri8K9kmOb3TXXXAcr2jxbtprj5in/rVzOs7JuKdjpBkD4X2P8N9Tt3yIagLo7KvD6X3HWcH4fK8J/AOYxQ40rdm+uumlL2lWUHtf16FstFp20biws4VxRPS5JN33j/5p20da2JpUuTzhKsE40CkX5EzX1lpTSzvi/ZDcvdT30KPFv7MlGNvsoAf4Dk5mhhuXxX4tbFIuUq3KJsrLEWwWnH+eLa6yqfr542v8rrszKzbocPdhLPI2P63/JHm/U9aGGmvl3/NeziiX7gMKyf5lsWE68MPwHwCGg/xWlmBRwov9lj/8V7yz/Cf+ralnRaVWm+F9V43/1u23/Ld9atv91/T7Va7ivZKnx/+xJQvgPTGaGGnXP2bqK6lStGf1/ybOyx7lJ43+7U65M7//dxqespxdq/hbJ6z/z/CbPK9VYcV73D/+B0cxyo2Qf04vjae/x/wT/9SF9nakJOyWoa3ZNuar9r/uO/+f4L1+9rk4t6On+qvsO6nKc4Dv+L7mvUZnX/cN/YDQz5bDP/xedKf2aelRS5+9Kcola4EwAXHF/rpZzp+zrztR8zZ31r6tH7vk7t+u2zyt4pvQt97GaWbBfzr1MoeQ+VK8yp/uH/8BoZttRtM/daQ3tk3sT/NcW1vRQ3D1lb2kfvf6rJqJk/4aZ/ssfrFjMnvR33pGSve78PmeR4781t/uH/8BocotMcW73D/+B0VArGisBrhCG/8BkqBWNDWvexwfgPwDUmsZGFf4DMA9qTamB/8BkqP2jBv4Dk6H2jxr4D0yG2j9q4D8wGWr/qIH/wGSo/aMG/gOTofaPGvgPTIbaP2rgPzAZav+ogf/AZKj9owb+A5Oh9o8a+A9Mhto/auA/MBlq/6iB/8BkqP2jBv4Dk6H2jxr4D0yG2j9q4D8wGWr/qIH/wGSo/aMG/gOTofaPGvgPTIbaP2rgPzAZav+ogf/AZKj9owb+A5Oh9o8a+A9Mhto/auA/MBlq/6iB/8BkqP2jBv4Dk6H2jxr4D0yG2j9q4D8wGWr/qIH/wGSo/aMG/gOTofaPGvgPTIbaP2rgPzAZav+ogf/AZKj9owb+A5Oh9o8a+A9Mhto/auA/MBlq/6iB/8BkqP2jBv4Dk6H2jxr4D0yG2j9q4D8wGWr/qIH/wGSo/aMG/gOTofaPGvgPTIbaP2rgPzAZav+ogf/AZKj9owb+A5Oh9o8a+A9Mhto/auA/MBlq/6iB/8BkqP2jBv4Dk6H2jxr4D0yG2j9i8vAfmAy1gMRchv/AZKgFJOZl+A9MhlpAYi7Bf2A01AbS8hL8B0ZDbSAtP4L/wGioDSSlAP2B2VArSMor8B8YDrWDlLwK/4HhXKaWkA7e/cN/YDhXqTWkIv8a9AfG8zq1h1T8GN0/AKY2AJeW4D8AFy5cpFaRgMZP3oD+AHBeM7AB+Mlr6P4BkLz5Sp7ax4T56RvQHwDN0o9NOguQz//TEvQHwGHprdev5owYBPCNfOU16A+Al6WlV18vULuZBIVXXl2C/gD4EUr880uXXr68sKOA/OWXL730o6Ul6A/AaZZMgjpsANIGtZOwHwBSqMWE/QDQQq0n1AcAAAAAAAAAAAAAAAAAAAAgO7ApUL8vAED8wH8AzIWx5gTgPwAmAP8BMBf4D4C5wH8AzAX+A2Au8B8Ac4H/AJjLNP+blFCHAoAhwH8AzAX+A2Au8B8Ac4H/AJgL/AfAXOA/AOYC/wEwF/gPgLnAfwDMBf4DYC7wHwBzgf8AmAv8B8BcwvjPWvAfgCwD/wEwF/gPgLlM878t/ghIs9lhXf6oJx4w+bXZlM90ms2+/DshXb6kxb/2xVM9+wH8ByALTPNfuN5tce0HAyV9m38v/umLTn8gGgC7/xdfOuKfnmgN+m34D0BGmOa/7sY7utNX36u2wG4OtP99+Qpdvl5Xtgro/wHICtP879n+64F921W9qXt67f9yy16jK5fCfwCywjT/Oz7/2/afBZ3gv/1UWxwWRHL4D/8BSIag/vec57rOvJ/2v+/7wSiOAahDAcAQgo3/1fG+pCWe8vX/vrOAnShOClKHAoAhzJ3/Uw9cq+UCr/99f48P/wHIDLPO/7Vbjv9qaq/fF8f48qyAOu+vmoiBbBH4U23fSAH+A5Bypvb/9vU/eiAgLu1Rj+XlP2qmX836iWk/9TJ6GhD+A5AN8Pk/AMwF/gNgLvAfAHOB/wCYC/wHwFzgPwDmAv8BMBf4D4C5wH8AzAX+A2Au8B8Ac4H/AJgL/AfAXOA/AGbBfEz238O1FfgPwOJwJv8Hq0nrD/8BiBPGhoE69d51tvZ24vrDfwBihffr6/M9bDN242by+sN/AOKFNwDvzNPw3QDrwH8Asghjt2b27bfvMPYzEv3hPwCxw9jdGcf2G3cJJv7hPwBJMWtuv7PMrr9HpD/8ByABGLvWm2xg7zpbJpj4h/8AJMe00wDta6xFMfEP/wFIEN4AbJ72713G7tym0x/+A5AQjN06qfod9ee94D8ACw9jd+955bvZYtei+CNe8B+ADMDYsuc0wNvL7Hrv/OrCfwCyBfMY/951X2sA/wFYdNw/27tyjTHqdwMASBT7NECXQX8AzEOe8etDfwCMhLG7N2A/AIbC0PkDYC7QHwAAAAAAAAAAAAAAAAAAAAAAAABg8cnlcvncIkMd8ImwFxrqfL0sdlVHkjX1JmQpK9Qjsk4doUKifvNJkqeuSOoAkPUikg/RAlC/94ShLUlTOqQ0ZE299ZnImvptJw9ht0S96cmDrNOdNfV7zkxQKElknXLO0bFRv+XMBIWSPC/IOr1Zm3U0GiIolCSyzgKIKZacUJPIOhMgpViCQkki62yAlIJxFSWZGIlPt1BvcEaypn6vWckpEoydaoH/Kc2a+q3SchEliawXkOBZU79TWgqoSWS9gATPmvqd0pLwoJR6c2lB1okRvK6p3ykxL6EmkfUCEjRr6vdJzaUkS9Lg2b/Es6be2IxkTf0+qUl0Uop6Y4l5GVknRtC6pn6f1FxeQk0i68UjaNaGD0lzW6jJxMgnmbXhhR20rqnfp5cqY8xK+pea63+Z1eesUakh66ySqP915lAS35cYq6ilNVFlVf3cnHK6Av8DU3UTL4rvKzJ5S+yAEpNryKdqlekvUWPV2b+jziq5SMle1iU35npOVXRRLbVUpRflU6wcbVDJZR3NL/P4z/S3FRWNVPqK/dy8eqrB/4BccQMXrWpRtrxlt1SLnt0xNewrs38H/Pf6X9bfFkVba+de8/Z6qSLx8X9JtIwqp7Ksu5p4WFdduhK7wlcRidWLeixQdtsEsbzMV9NNbE01uHJxzZJV7OQsfqpYn1nbZ8gpwaKMeBcLgS01ZqrJQEW+YkldxF5SSeVk7qp8eeyVsu7Kyp7WQ31T13HLaFnOLnM1voiETGYtW0FV0aq8LfmwJJIrM13XImzLE2K54ox2azpENSbmK5Vk98jX0bXvhJ+TNpRYJKOJgFlHFpPjf0WZKlJRdaYiETkV+ZbZLaaIrOIUmDOA8PvvLnY6tLpbupF0T5msSYUIVY745b81kbvaESIi1SNVKrou5R5xBgV1v/8VZ484/lfgv8bxvyj/LfMUZbaqgOV41RLGlnwhOk1rxR49+P0/JYF4Tf8hXSJZRxaT7X+NFYv8H1mD7rBI+a82rCILUCWSk6vV+fO6Di39Qqr1UItzqlkQj4pqgRqH1aKYnspkTbqhWiLrOu+MRDBu1+Ed26vdUBEr1PXwrKzWqdp7Tn4vi5nXZ9nSLxP9+D+LWWv/a/wLz1AkY3fXvoCKTMdX1CWtKtiSBVtWfVxFriedL+dkQ1vzha8PnK0ojoKp/OeG8m2xzbZn9Gq+FlF7qwfwPAE7SCbK1vXfXsx7NKfPl9GXohn7nyGndNWkQvhfZbUSK4npqFrO7oPqvokU3V3lmBOoXuKs4+2N1GhB9T/w30mhLEb0JTGbXbYDq/kD0mkW1WFB2V5SdxTw+18X1S+W+MKvRzP2P0PWUfyqmh52Sv9FJ17JOX7qYqp5hjUVp/VU7QBPpKprtObv/y13AFE64X9kg9JM1mSlYqd1hdVEiZUsu1Gty3rz+F/WWYlFE/2v+0pQdGQl+6XM9l8O6x3/xcFTsWz7KQ/evQFVmJuZx3+dbiU3xf/6Cf8jSzxB/yvaSUv6Xxaey40rqxBLOf/Evus/01GWq7p6Kyf9d0b4ZV/DaLr/KrmajkgcAYivlkqlKA+tnLicqYAZ/b/npcvOOM14/4vaSd2jC4vLMtucnT5zL6FwpgL8/b/9ZGl6/+/5jVn13552lluj/yvaM//T/M/V3OP/ik5M+V+25/90V2SJIwS5hsXcsUaiOaWlJhUyp6LIQnmv/lOHnTJLPf8virTuO/73+K9CVDPOat2yntG2GwC5vBjdye2MZV2UackCFkbb/6njV1nvev6/rsL3HP87/pflRExVT76o+T+f/97wM+u/HsBYzDNz/C/ugN1yZzWd8Y74QffMquUMg2ruLHXRXVx0JwDqzsR0JNcKZKwmFU5wZRW8TLVS9mRrh1jJec6cyEfOSdeis4Y7BGX2/L/nqM1g/+3gaioRuaBUcdJyp/rL3imumnyyYs/6OxnaP6iKV//nCd/+fZFcdZno/J+20ef/FVYs6Uqb5r8qX/USMi51GlvkYFXckwVqlboTOoX/LCU1qanrmRCf/xazam75VFx1Kzo4v//qh2WI9rxh3e+//MEIjwEi8T/gnojkDZeZ5zIf2/9SxQ1Il3bdeWjl/P6X3UkrGWfNuSrO9t+dtM2u/xkmWE4sZf5nk2j8D7YrqLeVGvgfZU7wP7ms5+6KQPuCelupgf8R5hSw5hB2BFnD/ySzpn6b5ATJicH/xLKevzOuBdoZ1NtKDfyPLCfGbt2F/8lkHcD/Vj9IA9Cg3thsZE39NsmZnxNjrdst+J9I1kH8v3v7RoAGgHpbqYH/EeXE2PJGE/4nknUg/1vNm2vzGwDqbaUG/keTE2PXO80mxv9JZB3M/7vN5tuVuQ0A9bZSA/8jyYmxa71mE/1/ElkH97+5OpzXAFBvKzXwP5KcGGvzckP/n0TWAf1viR2yAv8jyZr6bZIzOyfG3hXVxvv/UCBsX9bhwrwr98j6nAaAelupgf8R5MRYXxYb7//hf3RZhwuzpXbJ5uwGgHpbqYH/4XNi7MbtZnjg/4msGYsg1eb2zAaAelupgf+hc2Js+WYUhQr/T2Qdjf83785qAKi3lRr4HzYnxq6/HUWdwv+TWUfjf/Pt5RkNAPW2UgP/Q+bE2LX3IilT+H8y64j8b3ZmfBSAelupgf8hc2JsJZoqhf8ns47K/+b78H9e1vD/fDkx9rOIihT+n8w6Mv+b7akNAPW2UgP/Q+XE2DtR1Sj8P5l1dP5PPwtIva3UwP8wOTG2HcWZP/g/MesI/W/emdIAUG8rNfA/RE6MrUVy5g/+T8w6Sv9vTzkLSL2t1MD/EDnZF5nC/1iyjtL/5g34Pytr+H+enBi7Bf9jyzpK//sY/8/MGv6fKyfGNuF/XFlH6H8X83+zs4b/s7GsiUf6bf3B32j81w+ot5UaO+vo/F9hbH3yM9TbSg38D8YU/0XH8j78jyfryPzvXZs6TKPeVmrgfzCm+d+8w4ar8D9SqtVo/e9cnz5NQ72t1MD/YFSn+d+8wQZRff4HNSmxrkTq/81ldnfqaVrqbaUG/gdjav8/u7zgf4iso/H/dostT2+gqbeVGvgfDKv682kl9PZ1tg3/I806Sv/vsOszDtCot5Ua+B8MuyYn8d41+1MAIe//hZrk5J1jrSju/9d8l7FeE/5PA/4HY/r4v+k5vRTy/p+oSU4jfyUS/9X9/+adoKXeWmrgfzBm9f/N5s/YtRXV/0dxMpB6W6mZnXUw3lf+9+w7MyPrycD/YMzs/5vNd9i1Vdn/w/8Iso7Ef/n3P66zO8h6FvA/GNXZNXn7hrwLIPr/SLK2Iur/N5bnfkCLelupgf/BmNP/i781uXYT/X8kROP/XXHn37l3ZqbeVmrgfzDm1uTbFXbjRP/f7TXPBfW2EpOvWj8/X3A+/1vNW/JvsiLrWcD/YMzr/+VdZvu+/r/L4P95yM/POoj/dzeD3JmZemOpgf/BsOb3SSuMXYP/UWQdeP5vMJj2TI/vC/YLZD0P+B+MIH3SOmPwP4qsI/D/fb4vush6LvA/GN6a7G0zNhDF1WKrA7a20dzoDhhrrYi7zL6/ss3kY3X1Sk+tvXxnQ/xge43/4OYGanI2wef/ZvrfR1s7H/gfDE//32bDfndNlFeLDVvdVnNjja11Nwes3bzF+lzw7rYQv9ti/W5Hrb0tWgnePKx1+dI11ORs1PxfT7SfHd6O9nvqGr6B3aV3xDNtee8FpjTvO9f78QcD5X+wv8lKva3UwP9guHPSneFQXerT4//JotuUNchbgc7tu2x5QzYRfT3+12vLBcr81mDepDT1tlIj29q2MLzNXWYDpqTvizahL56Rxrfd/l9+YcviH75D2mJvvB/wzszU20oN/A9E3h2Trqt7yawM29x/eW35cCiH9Cv8iZWK7KF6og6l/+v6KHSNbTTZcO7pKNRkLp+X11rp/lz06G3VbDal9jpC2Rxo/7tyoWgwes7F/p2A92Sg3lpq4H8w3OP/vjut15IPV9mgK+jrS85XutvLjv/8iEA+OeDfbDK2thngrwVSbys1oq11TbYH9vJwvu2ELxcvD9ymocNb2p7TagSFelupgf/BcP1vnfS/5/3IWXsojkBbjv/uJwL5N2KakA3n3jGYelupEf6fEF0d8+sY3cWq/x/op7pyImAwL15k7QH+B8Md//dP++92OitsuN7b8Iz/W/6TgKvr21NvRYua1FgT/XfP5vWcz/dq/72dfutsd2Sm3lZq4H8wrJPH/x3+RcvN1PF/e9htbqu/Br7i+N/VdTtY66yubTrPoSanks+r/t8//u+4p/NUpF7//V3+4Cy3DaLeWmrgfzBc//WMfp9349r/vpr/F4f427JsN9Yc/zvq9sDrfMG94fCe236gJqdnzY+1Ou78X0v3604PP3AW2/N/vjFWC/4HB/4Hw3P9b5sfwqvT+Np/rvtAnP/vy2uA+93+UPq/ztbk+X8mzv+LVmBd/GB//lkA6m2lRt5rsSta0t7A8V8dZYkTgvIAbCC/1acD5J2TOvxxv+8bKcD/ucD/YHiv/1XX/224B/fy+r81OWBdWeOP1uXpvg2+2opae9iXdbrCD04HfXwmbQ5qrqVrX//jngjUk3tiTrXdkosH6pKgll5XPjiL/sZnDf+DEcVn0lCTwYji8//IOhjwPxioyeRAW5sc8D8YUdyTAjUZiEg+/4+sgwH/g4GaTDJrtLVJAf8DkY/inrSoyYBZo61NLGv4H4irSfq/Q7211Fkn6H+DemtpuQz/A3ER/ifG5ST93zG7AXgZ/gfiYjVB/+9Tby1x1km2tYZnfSmg/6Y3AJeS9P8B9dYSZz3jby0j62h5Cf4H4peWlVhJNm+bPSb9VTXJrKm3lpYfwf8gFCzrg+Rq0uxJqatV61fIOhkKQfU33P8Pq9avE6zJj6i3lzRrC1knxSuB/b+Qp36vlPzKsn6TYE3eNjnshLP+LfX2UvJqcP8L1O+VEN4lWf+aYE027+eNbQGSz5p6i8lovL4U3P8LV6nfLhX5/AeWVQ10N/nIMDdsZJ0cr51B/wuvU79bMupVy/q3REuy+d+ot9mgrP879TZT8eOzdP/mNgAX+YjU+h/J1uTND6m3moT8xSqyTopLS2fz/8LFLeq3TMHlj6vV6u+SLclm839ebBg2BZDP5xuXP+b6J5/1Zeptp+Anb5xR/wuv/YT6PVPE9LHoku4lXZO3f3XZtDPTXH9+8G9VKbKm3vbk+clrZ+3+L1x407xDgJ++IUb/v0+6JPlRqWXcsPTDj+myNq2x/ekbZ9f/woWlH5s1WZr/p6UlXpK/THZCWvEb63+JIwBjjgLydWE/WdZGFXZeTP2dXX/eALz1et6cknxFjJEs64PkPvrj5d+sjz/MG3MhwIcfSP0ps87lDJlzef21c+rPG4ClV18341KgwuuvypSsDxI/IFXc/HXV+tWHol9a+MHp1ddfrSr9qbL+nSWyNqG1Lbyi6vpc+osGYGnpn1+69PLlBc7q8suXXvrRkuZ3ND0S5/bvq1bV+uWlixevLmzWV+2spf+EWf/Gsq7wJoBnvbhHAr66Pp/+ugUwhwsUx6M2/5tbUVU9o/rXsqjziAs59UeatQhZhV1d3Jgdzq2/UQ0A31rCkmw2f/57y0+VOpG44J3//yGN2sm6usjNrCaE/QY1AXJTaYuyee/3H3vsX9zC/HWiH/qZmXV10f0Pa78BbYC7mdRF2bz9r7//oGr3S4vY/6cjZl/WC+t/NOqbBHVJam5qqONY8JjtrKnjAAAAAAAAAAAAAAAAZBLq2c2zQ50YkosdNgXq97WAUNdkdquYOofsJjcX+J8Y1DWZ3SqmziG7yc2FsUlvH/5HwLSmlbo201/FSC7BqCe9ffgfAahiJJd64H9sTIuWujbTX8VIjjxq6ve1AKCKkVzqgf+xgSpGcqkH/scGqhjJpR74HxuoYiSXelIZNXUoCxxtJvYDkjM7aupQFjjaTOwHJGd21NShpCvaHusGXnd1jbH1zO+HqJJrsd6Epd3eWV8nO8mRRW1meolEexb/h2yz28n8fojV/y6D/9FHbWZ6aYu2x1qLsB/gf+aiNjO9tEUL/33A/8SiNjO9UNG22OqArd1rbnQHjLVW5LLeNmMDOdx3l4rx/yZry+fX2AZfcIuv1N8Q37f58f7yOxvOK3JaTdZqD1m/2ez0h2y4vSpfosdfbrjZXOWv31pN+36Yl5zMZm29aSewJhNrtToiPRnUBt/0wYr0X6TAtlfcV+H0dNL9jWY8UNdeZFGTQB1KMtG22LDVvdHcWOP1uzmQgrfZsN9dE+6qpctiqfC/ozr2VbatV9pma7x2N/lK3RZb06/Y7rPlbrvJuP2b3PUh2+72mXqJteEml6bPfyP/tUGrPq3JrfEN41uzyR/22WBTJdZsDYY8sqGYLemITb/Fc+jxhzwtvtRuAPj297sdFSKPInBbuKAVDP/Jom0ppzdl8XLfO6JWV5tq2KqW3hNL5fyfeCDWXRErvdcUrQBfQZnfGthTfmr8z9SE4UDW/OpweI8vZ/yFO+qJ7cAD4JQm15Pm3xvybV2RzSBvBdoiNhHZKhuI79dlRHxLu8weQ2nk+L/Dhh25RqTHS/TJRR01DdShJBNtS43ph6o7XuFFvS4Lu7kybHuXytpty4oeDJt8JVXK4lBAVbGL7X9H/mhfLtvkP9kT4wbxhHjRbuAzhClNjm+lPYLRbdmGaAhbcrObQ76aaANkRML/Tf/LSP/d46l4BgDUtRdV1DRQh5JMtGp2apUtv9vl9Lm6fadn5r1Y114q/ZcVLju+bT5+FQzkKIGtba64L277Lx7bmjtNiPtE0POJaU2OH/K3ulJcPtqXiOdaTMfqTINuyvE/G95a9zST0v+W9n6TrTTjgLr2IouaBOpQkolW+d9z7m7R8sxXu0tvaHn7vHfri6ptOU/xlcVEmJjXc37M63/PWbZg/ovZPTXT5703iNd/tYUyAjHlyZvJ9+wf1v7b3wS/tmIhKxj+k0Vr++8egvY9/rtLVTWLbny41jx1Umt1fdu95M+Q/l9saXdNzGl4l53u/3UTeG9lc5kN7dXQ/58x6uShDiWZaLXIejq+Pezax/8d/sWzVMs7GKxIo219B2ud1TU1X+A0Fl7//cf/i+R/e7CiNqxrZ9gR8xuu/97j/00V5JrTauL4/wxRzySuydPspBcqWl27fTX/P1DnqlabavZaLb0nlmp5N1lLTt911EmrdZ7+PTVLuO5McXn9b6pTiqtMzv8vkv+6e9/mfXdbzf/fEpvk8b8vN1HP/3dVvPaUoT3/b4dodgXDf7Jotf/31thAnP/vy4odbqrz+Z6lWt4OU5P4oqzF+X9RwOti/b57FsDnv+/8/yL5z80f2Jc99EUCa7IV8Pi/scZaIheeMDe/1X132T0LsM7WcP4/cNSzgP+horUP5NXVbGo8qq7/2/At7Tkn/PSxqlhp2JfOr7TEVWzO7LbPf3X9X3+1uXD+N7vyoj/nCkiVmMf/5sbmULQRIuGNvriQsu387AZPb0UnvXnP9AqeFnVbzal2WFeOokTvw1S9ymc6ouUVdJtqRrqvyk8/MCW9c0UbU8nFAJLLWnKRRS1PLrW49gM5ldIWo8iu+KcvepiBvNRC9//ii7w+VfYy/XbgkLKf3rmipa7N9O8HJEcete7GO7rTV9+rtqCpmwPtf98529xlEX30nDqUeKOlrs307wckRx61PlvSsQf2slfvuzOwYtyv/F9u2WtEdjEFdSjxRktdm+nfD0iOPGrdk2v/2yf+ApPXf/uptjgsiOTwPzvpnSta6tpM/35AcuRRn/Tfveas68z7af/7vh+M4hiAOpR4o6WuzfTvByRHHrV//N9mzqyePGvl6/99ZwE7UZwUpA4l3mipazP9+wHJkUftzP+pB67VcoHX/76/x4f/86Klrs307wckRx616OXbLcd/NbXX74tjfOdGEuqCi4682LrHH4sPZHlGCgakd65oqWsz/fsByZFH3bev/9EDAfmB1L56jh/j29eTSdsH9sygngY0J71zRUtdm+nfD0jO7KipQ1ngaDOxH5Cc2VFTh7LA0WZiPyA5s6OmDmWBo83EfkByZkdNHcoCR5uJ/YDkzI6aOpQFjjYT+wHJmR01dSgLHG0m9gOSMztq6lAWONpM7AckZ3bU1KEscLSZ2A9IzuyoqUNZ4GgzsR+QnNlRU4eywNFmYj8gObOjpg5lgaPNxH5AcmZHTR3KAkebif2A5MyOmjqUBY42E/sByZkdNXUoCxxtJvYDkos5Xi+To/ZwLZ4/kZjV9M4Q8+Rok04ze/sBycWd7xn8H8T0J5Iym17wlCdHm3icmdsPSC72gIN16r3rbO1tpHeWYFM+tErtfkByCae9Pn8r2ozduIn0zhhsqodW6d0PSC7htN+ZtxHvBljHzPRmBpvqoVWK9wOSSzju7Zl9++077NrPkN45cg04tNqmGFqleT+ke1Ca5uTOGfesZnTjLt0xFnUyYXMNNrS6TZRuevdDwOQi+RtTi5XcOeOefhjVWWbX30N65w12ztDqFmNEQ6uU74e5o6JbgcYI5FBXYNC0r70/+f3zY6zliP6Y78KmNzPYu7OGVq20T1/T7Qee3D0kl1zak+/X/4trrEV4jEUdSxTBLqdzaJX6/ZDaQWnqkztf2mzz9Lvnx1h3KI9OqVOJJNhrvckbJ4ZWaZ++ptwPSC7huG+d6Olv31F/3gvphct18oFqm3ZolYH9gOQSjtt/rHqTH2NF8Ue8zEhvVq6ThlZd4qFVFvZDOgelWUjunHF7j1Xf5sdYvfNvuHHpzQz21omCFUOrd4nDzcJ+OJ1cE8nFmLZr/HvXZ8xcIb2zBpu6oVVG9gOSSzZt+zTAL64xRv1uFoj0Da2yUsVILtm01REXPzqF/lGSuqFVZqoYySUc953bzXegf9S4Q6uVazMvbUkjKUnuF0guibhbLdgfPZ6h1a3MTF+nooq9yVEnka3kzhs39I8DObTqTzynlXJSkFzzNpJLLG3qd7CgMHb3Bg+XuiYzWMV6UEqdQwaTAylCDa2oazKLVYzkwAIgh1bUNZnJKkZyYEGgrsnsVjF1DtlNDqQH6prMbhVT55Dd5EB6oK7J7FYxdQ7ZTQ6kB+qazG4VU+eQ3eRAeqCuyexWMXUO2U0OpAfqmsxuFVPnkN3kQHqgrsnsVjF1DtlNDqQH6prMbhVT55Dd5EB6oK7J7FYxdQ7ZTQ6kB+qazG4VU+eQ3eRAeqCuyXRV8e6Z2dvXHCgKh4VCIZ/P5Ro7Ozv3Hzx48Iff/va31JElkBxIC/76fHimGj6SNXxYOBwV8rm8rOGPRA3/ITU1HEkVn13z0KgWgrcNPFTeLPyW4q4L1JUJIiSGGn0UsIav5nO8hv9AUsPnquLZrR/naP9INH2j0eFoVNji/8s1co1GI7dj89E0nDVygkauIBgJ+OsdPT46Ei8/LU4ZpswykSipSxaEYKa4vhrmFArjq7wHb4gqPlMNix/gNXyV1/ChrmFexPsza/iwkE+uhgNXse9tPnSC2n98JN5xobDVEMObj5JiZ6fB0x2LtuHg6Mn+3sm29tH+0QFvdT56EONAi7qEwRmZIrsQ/ZhLPt6Sdt9PqITvixpu5MaiaZA1vHe6hkdPc437cdbwvCo+FRb3fTQaj0VDmJjss0L0NAmNRr5Q0Fl6ByT7B0/zOw+ib06pyxkE49QAdV/UcGEsJpWc6nlwspwS4YH/V94XLcKW7NOOfF3ao33em+3E0hAEyGzv8QFXPiXGB4QnyYM8eLLny7Dx0R/gvyn4O64nB0L5hrd7f3CqapL2f14NN8ZjXsP7ngOEiGv4dBV7tBeRNRrpyuTs3OdjLG9DsD9qfBTJYCDO2s1lmvSYv3ekavi+cP3+BOOzAa9h3pkd7dmTivsHEdWwr4rd0EZ8tCF/L/WGR8lO7uroSDcDe6PGgxT736A2OLMNgEf8BaphZxt2GgVvDf8hMv/1MOkxby0XIbDpQd5vXD1+/Ejlt5NW/6n9zab/dg0fjxe6hsU8QWH0JJIaVlWsmpODQpYO8MOxMz7Yk/GFaEHhf5r8N6yG7zs1/ChMDcsqFsEVdh4sxlApeII7hSOe3hb8XwT/xUGxkTX8OFQNiyre3T0wpNE8xc7B7u65B1DwfypLyet/kNiJ+5QhajhcdDmzGk0fjXDhxQS1v1nzn9ewuSX8US5UDe/uHpna/YdvPGOC2t/Q/ifcAKCGw2THB08N6o0gITcSG59sqQaC2t/s+b/7yNAabowehavh3d3HciY8t2PMYcADcR5w61hcV/Vkdzfxg9X5UPubPf/35ex/7r4pJSy5nzsWZwD2Q9UwP3YqyBMJu/ujRT9xqmmMR/vqIpFxuGOnuKD2N3v+2zW8x2uYurwSreFHR4Vwc1g8O87oYM++tPBpbnET3OEbKmJ7JDb0MLeV4/4nXawBoPY3g/5zCgf7zgfncgs7H3B/Z4vXsC3rSGx4qBpW2XG2Cgf2pYV8KCU+Prs4g4H7ja3xyN26xyq30NnFBbW/2fRftQGPnb18dLxgNZwbHxztuzV8mBN3GIjMf8Xo+Mjz8Vme4Wic3RB3dvgwibdqzgbtPTk6Ptzybi/8Xyj/J9bwwWi8ldkavt+QNbz/yN0eLqVve6P0vyH/P+YRPuZHBM79zvb2+S8dbeXIPwQ89yNc4kPUhcLhwdGTE3cBOB4VGlunShX+L57/6uNTW7yGfR+j543/wUi0/qm/VEjU8NZTbv1jXw0L8QsT4o7Sf3+MvB04kA2B/8PUfPBxbN8GxJ+lPQEbR8L3Pa/vsuPc+ONg/+RNVOS9HvgIZmt6qcL/GCD23894dOqeMLoyxG1ACidr+P5HD+6rUkvUd3m/Cm7bY7eGHz1Usxnx1vDM7FRTKhqCsXhzR/47bT102gN5H7CRvNvf2L5LWvDND/SxbPGSjYa4JYJ6L/zN8IG9fDuPJuza40PxTuYD/2MgVf47jMfi7lBH+5PuvidrmPdq4kZg4m52jbPWcEDPRQ3zd1Kwa5h3rtPeDa/hp7yLDUCM/vvRAyvnzYsOd+ZtTsWdFPce8xWP9A291Q0Vn4p/DuWtFeUD+VAtOpS3SZQcHUnFPXdLnPS7RFb7T57wtEaHhWDOR5ZdXJx+m4yxsvhaY6wWh7HRkk7/vWyJEeMZavjoMYfX5LGs4YJbrHbxHrpVLJ62Vz3ircrjvel3rdU1/Ej+imNew0+fzurpJ5OY/1MYj59ypY9lnEeP90WiczZ4cgoPheDT9sWjPRESf/EjcWPWYxn51cJWLs+N3xLWy4P7CUf4MWYXF6ffJve/wr9UGfyPrIa3vI95nyZ6NX8Nz7uFtyrWh3NXs9d8pEv4sarhY3kQLbv4UHd8ofZ/OuOrfKRzKNtGvq3H/H8H8xmJ/4m1D0dj3qOPt+YOghqN/IR9Gn92cXH6bda5+MVcrqSagSL/jlnqGSapi4c1+ZCvJtZTa3IqYl213PtzcZIN/wOyNS5s8aZhPJI1eXwQpIQPRsey3nknxQcD8hVifIfp9X8Ksrvmyipr887yvOexyj7Y620FXC/q7OLi9Nusy46/rqxWnsuBQF09lFJX1MOys7TiWUH47/m5eFko/yWNiY/z6n98Qb6RP/uLRkXm/FfZpYLM+F+psGqZ1bjUZVYSi2qiRy/LaYGa6P8tKXZZ9v+SilhaEUst2RZ4fy5eFs//VJNJ/1NCdvzn+jJW5SJX7B69pkf09iru4L5ujwrq6iigKL54fy5e4H+iwH+i7OLi9NsUHgtz9VfXY9kAqI697gz6i85RQVXJbonFDP4vJvCfKLu4OP02hfe8+7fqsv+vn3zSO+gvCdPF9zV25UT/X88lA/xPFPhPlF1cnH6bwmP7v7Ka7i8J02ty8C9nAcpy8G/JacKKfF4s8B3/uz8XL/A/UeA/UXZxcepdFvWwXQ7fnQP5mntMb+lzfmr+v+aO9O35f9EiVDD+X0jgP1F2cXHqXfr9Fz25nuurOXLrhe6VAEV9raCwvuhdJf4LAOB/osB/ouziIvKtrCd71SD8TxT4T5RdXES+lQkc83uB/4kC/4myi4soN7DuOSxICvifKFnwv64+v6YfzylHy3OJWtG+jj2F2cVFtMG7lwglxYL6X2RVz+M5ZVli3sexDr+o/XcvPJ+VnRvBXP/LnteC/9kje/5XWYBhUuks3ZL3agsz/J+ZSPEsEZRntyWpyS4uktr4uMie/xZj8zux0lk+OZHc1Vbk/udqcmBUsT9f4rQElt0sOJ9Cq+tzWTJI/qhSthvdsjNOdfZFTp/UtoOs6P3DV62VIhrUwv8YyJ7/+popS58dda6ptuuy5F5Ura+tcs+0liv2JRU15+oK+2IM8SIVT9coRaie/LmQpMT/nIjENl0IXnQ8nuq/O+pynZ/if9VZWvasQJpdXERRFJRk1n9ekjW3LtXVkr6PWk3y37mmynIfTvG/7Kzh/bmwpMD/K7mcGh9VZANal27W5GM7WM/43x5I1Zm6cLXsvpClYvIMw+yBlB1mTTYFxTMOx2LJLi4iqAlSsus/rzJdvKopyMnHVVW8voKzy1JdVe0Z7etuyTv+t1/cknVrV/2Jnzs/KfLf7qTtu9U47dsU/yvuU+64YaL/9guI2K7oj7pHMEsA/2Mg2/47w0slqDsnMMV/dQcG0XFVPZOIk/zXL1BVn8Zwfy4kKfC/qjev6PVfj4L0WH+2/xab4799Ywvxu6rwP9Vk2/+S1389uS1LcKb/V9zj0qn+15yh7KL5b6lNtqxTBzRFlcc8/ysyjtIs/0vOtxb8TzXZ9b8qP195sq5K6smZ/lfFuN5yn5jsf9H5dvH8r6kPmcsGQEahHtacz6WKBC1vkB7/5VFT2TdYqPmCrHuO/+F/usms//LQXB2fixGp+EfWGHM/Zs0rUP7A6f5fjUprzsSg5Xzuwva/6Dv+t9uN0FD7X/GMlyx3/O9M+udUhOrDZ87Sir55VVk+LrmL3dMFdedwouSdlXV/IvzsKfyPgez575St6licUit6FrtnoDxlWZP/qlmCiqda3al+p7KLzmkBfQ/Xkm924fykxP+a5zvZ3rlh5LTTJc+pQL//Mpqyvr+12h3lnDdo/cp2tPA/xWTP/6rraM6uUVFqlnexc+p6iv/qVusVZp8tUD2i13/1yurmTIvjf5aB/zGQPf8zDfwnyi4uqEMJC/xPFPhPlF1cUIcSFvifKPCfKLu4oA4lLPA/UeA/UXZxQR1KWOB/osB/ouzigjqUsMD/RIH/RNnFBXUoYYH/iQL/ibKLC+pQwgL/EwX+E2UXF9ShhAX+Jwr8J8ouLqhDCQv8TxT4T5RdXFCHEhb4nyjwnyi7uKAOJSzwP1HgP1F2cUEdSljgf6LAf6Ls4oI6lLDA/0SB/0TZxQV1KGGB/4kC/4myiwvqUMIC/xMF/hNlFxfUoYQF/icK/CfKLi6oQwkL/E8U+E+UXVxQhxIW+J8o8J8ou7igDiUs8D9R4D9RdnFBHUpY4H+iwH+i7OKCOpSwwP9Egf9E2cUFdShhgf+JAv+JsosL6lDCAv8TBf4TZRcX1KGEBf4nCvwnyi4uqEMJC/xPFPhPlF1cUIcSFvifKPCfKLu4oA4lLPA/UeA/UXZxQR1KWOB/osB/ouzigjqUkBTgf6LAf6Ls4oI6lJD8X/ifKPCfKLu4oA4lHC+/Af8TBf4TZRcX1KGEQugP/5ME/hNlFxfUoYThotAf/idJSP8LW9QbQEdh9xn8j5DGy39MXn/ja/jfwyS+u3s0pt4EIq4e7O5+Av8j5GWC3t/sGt4KW8O7nP0D6s1Invxon2/5n96E/9FBpL+xNZyLoob//KmIb+9otEW9NQnmdrTHt/nhp5/R1OscqNM5LySDf4m5NbwbvoaX/viJjG9378nRqEC9WTFTGB3sy9x2P/+Pv6TS/sz6TzH1Z8Nr+PlDVcMHo3GDOop42XJq+HkUNbx0YWnpzS++fP7XXdUK7B+MCleptzFieEWMRweP9x7JTXz41ZdfvLmkoSnYWVCHdT7oev8LE2t4vKX2+yLBa1j1+ru7f30eWQ3br/KfX39jB7j7iEd4MDosZDpA/uYbhac8M91citg+/ebFn5c8EBXsLKhjmxHolv/7vFselL3/BbeG//b1N5/aNcybgaODkTwmyHQZb43Ho2NPDT+LvIY9r/XGty++/O5zJ8LdPR7i8Wj0dOKBQT6tuY4LI6m9k9nuXz//7ssXn/1xyQ9Zvc4kV8hTBziZrcaU7y//mFb/C/4a/mxyDWfrJEFB1vCRHrPKcaus4TdiqeETL/rHP3//yTeffvVs14UPCfaOjvioYFQo2CdcU1GnsgiF8aPjAy6921CKI8Jnn3/6X598/eeT4lNX69n2RkZIWWqqhj/31rBsCo4OjkUNj7eoC9cpX92MFvhgdcRLWNTwI8+b5jX8zd+/j7+GJ+3Tf3z2/Ysv//Td83//666fR3t7e09Ee8APEw49acY6JtCvfXXMG8fC8bHOyg7LzezZV9/96cv/+P6zH9JaqufYE6mHOrSpyf1F1fBXzybU8P6+7NMOCoeH47Fv2iuK5mHLW7UnnirwX3l4IHx/4qlht7N/9vzTP335IvEanrp73/zh269f/P3L//ru0+fPnu1OhDcJPND9J6pdEEMF0TjI8QL/rzAOMq4djwv8gId35yIe3qUfj8QrHXH292ROjyb95ofPeFzc+b+/+P7bH95cmgV1hYbaCSmGOrMg8b351rff8xr+ZnoNP9I1LApOlvCBrGHRxYkyvloIcoaMVzqveGX4oejS3RreFzW8d6p8Va+laphL/+1b/48467m7+x8/fPbFixef8Cz/9Pz5V89Ota3R8fDUkr8+e/bV86++++6bLz958fUX3771Q9YKNHz8aYM6sHOFmFwNn4bX8PPnz1UNv0hvDZ+lBt54662/ffHFF9+/EJlyvhM8f/7588+faQLIbq/61VcyHo54qb/z1/yev/bf3vrhLwtRmyA5zlIrf3zrrf+cUMPPz1LDu/aqnz/31vAnTg2/9Y8M1vCZ3zIt1HGBFEJdlAtTw9TJZCwukEKoy3WxahhJgayDGk5TtNRvGQAfqGEAwOLw/wFYzmppnjnugAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNS0wMVQxMzo1ODozNS0wNzowMJGMk8oAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDUtMDFUMTM6NTg6MzUtMDc6MDDg0St2AAAAAElFTkSuQmCC" alt="image"></span></p>
</div>
<div class="paragraph">
<p>In the simplified API a single JMSContext object encompasses the
behaviour which in the classic API is provided by two separate objects,
a Connection and a Session. Although this specification refers to the
JMSContext as having an underlying “connection” and “session”, the
simplified API does not use the Connection and Session interfaces.</p>
</div>
<div class="sect3">
<h4 id="goals-of-the-simplified-api"><a class="anchor" href="#goals-of-the-simplified-api"></a>2.8.1. Goals of the simplified API</h4>
<div class="paragraph">
<p>The simplified API has the following goals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To reduce the number of objects needed to send and receive messages,
and in particular to combine the Jakarta Messaging Connection, Session objects into a
single object.</p>
</li>
<li>
<p>To maintain a consistent style with the existing API where possible so
that users of the old API feel it to be an evolution which they can
learn quickly. In particular the simplified API will continue to use the
concepts of connection and session even though it doesn’t require the
use of Connection or Session objects.</p>
</li>
<li>
<p>To be capable of use in both Jakarta EE and Java SE applications.</p>
</li>
<li>
<p>To allow resource injection to be exploited in those environments
which support it.</p>
</li>
<li>
<p>To provide the option to send and receive the message body directly
without the need to use jakarta.jms.Message objects.</p>
</li>
<li>
<p>To remove where possible the need to catch JMSException on method
calls</p>
</li>
<li>
<p>To be functionally as complete as the classic API, so that users of
the simplified API will not have the need to switch back to the classic
API in order to perform an operation that is unavailable in the
simplified API.</p>
</li>
<li>
<p>To be an alternative to, but not a replacement for, the classic API.
The classic API remains and is not deprecated. Developers who are
familiar with the classic API, or who prefer it, may continue to use the
classic API.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="key-features-of-the-simplified-api"><a class="anchor" href="#key-features-of-the-simplified-api"></a>2.8.2. Key features of the simplified API</h4>
<div class="paragraph">
<p>The main object in the simplified API is jakarta.jms.JMSContext. This
combines in a single object the functionality of several separate
objects from the classic API. In particular it combines the
functionality of a Connection and a Session in a single object.</p>
</div>
<div class="paragraph">
<p>Although the JMSContext does not expose constituent Connection and
Session objects to applications, the concepts of connection and session
remain important. A Connection represents a physical link to the Jakarta Messaging
server, a Session represents a single-threaded context for sending and
receiving messages, and a JMSContext represents both.</p>
</div>
<div class="paragraph">
<p>Applications that send messages will use the JMSContext method
createProducer to create a jakarta.jms.JMSProducer object. This provides
an API to send messages. Although it provides similar functionality to
an anonymous MessageProducer (one with no destination specified) it
provides a more convenient API for configuring delivery options, message
properties and message headers.</p>
</div>
<div class="paragraph">
<p>Applications that consume messages will use one of several methods on
JMSContext to create a jakarta.jms.JMSConsumer object. This provides a
similar API to a MessageConsumer for consuming messages from a
particular queue or topic. Messages may be consumed either synchronously
or asynchronously, except in a Jakarta EE web containers or Enterprise Beans container where
messages may be consumed only synchronously.</p>
</div>
<div class="paragraph">
<p>Applications running in the Jakarta EE web containers and Enterprise Beans containers must not
create more than one active session on a connection (see Section 12.2
“Restrictions on the use of Jakarta Messaging API in the Jakarta EE web container or Enterprise Beans container”. Since a JMSContext contains a single connection and a single
session it is ideally suited for use by such applications.</p>
</div>
<div class="paragraph">
<p>Applications running in a Java SE environment or in the Jakarta EE
application client container are permitted to create multiple active
sessions on the same connection. This allows the same physical
connection to be used in multiple threads simultaneously. Such
applications which require multiple sessions to be created on the same
connection should use the factory methods on the ConnectionFactory
interface to create the first JMSContext and then use the createContext
method on JMSContext to create additional JMSContext objects that use
the same connection:</p>
</div>
<div class="paragraph">
<p>To simplify application code, methods on JMSContext throw unchecked
exceptions rather than checked exceptions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="legacy-domain-specific-api-interfaces"><a class="anchor" href="#legacy-domain-specific-api-interfaces"></a>2.9. Legacy domain-specific API interfaces</h3>
<div class="paragraph">
<p>Although the domain-specific API remains part of Jakarta Messaging for reasons of
backwards compatibility it should be considered to be completely
superseded by the classic and simplified APIs.</p>
</div>
<div class="paragraph">
<p>The main interfaces provided by the domain-specific API for
<strong>point-to-point</strong> messaging are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>QueueConnectionFactory - an administered object used by a client to
create a QueueConnection.</p>
</li>
<li>
<p>QueueConnection - an active connection to a Jakarta Messaging provider</p>
</li>
<li>
<p>QueueSession - a single-threaded context for sending and receiving
messages</p>
</li>
<li>
<p>QueueSender - an object created by a QueueSession that is used for
sending messages to a queue</p>
</li>
<li>
<p>QueueReceiver - an object created by a QueueSession that is used for
receiving messages sent to a queue</p>
<div class="paragraph">
<p>Figure 2‑4 Overview of legacy point-to-point-specific API
<span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+oAAAJ2CAMAAAD/k4hsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAADG2fHF2O/D1u6twtt1i6mcss2ludS5zeUjPV9HTlcAAAAuMjiQna8XGRuouMx4hJJfaHOOnK20xtypvNRziqbC1vAxTGx/lLG90+4sR2h7ka4pQ2Vnf5uLor2jt9Ggtc6Gm7i2yeKCl7Jwh6X///9HR0fd3d3Dw8MjIyOJiYmnp6dpaWmtra0LCwu1tbXR0dG+vr4YGBg0NDTl5eWVlZVLS0vy8/VycnKGhoZWVlZYWFg7Ozvs7OwqKirMzMycnJx+fn5hYWH2+f2Dm7dVbIxIX395j6xddZNNZoSInrsRERGUobLs8vrK3PLu8PPT4fS3yd7h6/fd6Pejssacqrva5vairbuuuMRieZfL0dnP3e7y9fu9x9PX3OLq7fCSpsKnsb+5wcyzvMhuhaLd4eaaprXGzdaZp7iyu8fIz9fa3+Xh5OmNs+KStuOcveaqxumzzOy30O7j7Pigv+ehwOeWueWkwui/1fCuyeuBptNcfKWEqddUc5twk76Fq9lylcEnQmQ8VntukLs/XYEtSGxGY4psj7p5nMl+os5ef6k9Wn9MbJRhgKl+o9BQb5V1mMQ0UXRqi7WIrtw3Vnpmh7GTbkZzAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjBQEGOjArpbn+AAA6aklEQVR42u2diWMb133nBdC1RTwMDlmFg9x1AxCXSUa0LJMySVPaNNuFoip2rGy7Sds0PXbbFUkwFA8fteMkPhLHdZzN/7vvmBMcnDPzfjPzvp84IgjMAJgvfp/33ryZAa9dAxQUOMVC7igWqIMFIEXk0HE/1PECkA6oTYTsAGiA2kLIDoAOqBXURZE6aAAooRZQK9RhA0AGtXxwHQAdUKsH1wHQArV5UB0AHVCLB9cB0AG1dnAdAC1QWwfVAdABtXQ0rFDHDoBuqKUjgjp2ADRDrRwVz1AHD4Becn4x20QwggeGQa0cGX9GnTwAOqEWjo5nqaMHQCfUwtHxHHX0AOiEWjg6MC8HjIJaODqur1JnD4BGqIWjowjVgUlosarEGCtTq30FqA5MQodTTGFRuw3VgcFoUKrCKgXZs1drXPiqUF/cUagz9atoCupygRv8lypTv2pQHa4Dg0jeqJo9di+xUkD1iurrSz7VLdt/DlQHIFaSN6rEavJnVQheEarLWyXVdVeU3+J2md+0nA6/BNUBiJPkjSo7O+lB1ZlDya96yb0bqgMQJzpUD+vVq+Gql6E6AImQvFF1b1892Kv7F3FUd0b7OoDqwCSSN6rK3Bl4e9ecqX116XpZWC53zeW0nMWk6zW1yw7VAYiL5I0q1HzH1d198WrBN4C3nNt1bwGoDkCcaFBdmWx300LlqjrmVmLOgXW5RK0sj7lZTNeBdagOTEKH6nKyrV4op+zcWKgOTEKX6b6OPS1AdWASelS35Mlx1G5DdWAw1L5BdQC0QO0bVAdAC9S+QXUAtEDtG1QHQAvUvkF1ALRA7RtUB0AL1L5BdQC0kLBOlu9KNSvWI+ulyE8G1YFJTHNBXqdSjXQ+et239vyqe1etT/7qyYo6ex6qAzAXcwgX5buf6ks1FFAdgLiZZqkUrSJVt5yL0MTlZxX1re58gXLJvdy04n3Xu1zYKte9i1ML9vdDOuaW7RaEjxsqdefyNh+Weqqyurrdu9JNrFe2mHcxrGyGas5Fr5a8h78Tq6ruEm9q4nddQHVgEpNVrygxLfvbXG2xnA637H25Kyt4V5z7r0kvT1Ld+bKpqnsp+7jrQvUy489UdV6l7lvP9x10JW8MUPdd985uQHUAAkw0veq7EK0mJb0htanb3yZTLdhfGSO/I0rJKr/v1VJG1+2ev+49pfOFkhX5UFksXGXqW2jqwRe3xvy37DVkX++MNqru6KPqvEXZdpT4XeKJq157BdWB8cyluu1oTfXldecey7XZ7Z29r4dT03lhqtujc6mhepXa+HzADZ/qdecCWOcdqbl3V3X7Rt3ZI7Ddll9lV5v296OgOjCJuVSvMO+uUNXrPtXL/tF4mOo1+z7RJkxQ3R7Aq5Uc1a3AUq7q9vtUb8Z7pqoawE/561FQHZjEZBN8A+iKrzue0Kt7Fpb9eo2pfkOpXnYXnKK6oiZ39KtKdX8X7amubtTsXt19phKrT+3UoTowiskm2DPwVa6LumnZ++ohqhfUBJncQa7b7sleuWZPnFX9jQDz76vPUF29nPoGG3vC3fLegXhzpeC+uvtM4ptqp/5JSKgOTGKKCs5ke929WXYOk4mZ7XpdjqvVH1SueQP4wPdLuZPt7uR42T9drw6T1ce/jKrsfT+V96chat4Ee63gzv+X/X/8zZmXr9vd+vS/9AzVgUlMc8E3D245h8omqG4f/i47g27XN2v8OFjZcbnsLDlVdeV61fa74hy6K9heV93XqxbGVa/O+DvPUB2YRCG/WNM7dagOjILaxwQpT+/UoTowCmofE6Lq7dRDdQCuQXUADIHaSUKgOjAJat+gOgBaoPYNqgOgBWrfoDoAWqD2DaoDoAVq36A6AFqg9g2qA6AFat+gOgBaoPYNqgOgBWrfoDoAWqD2DaoDoAVq36A6AFqg9g2qA6AFat+gOgBaoPYNqgOgBWrfoDoAWqD2DaoDoAVq36A6AFqg9g2qA6AFat+gOgBaoPYNqgOgBWrfoDoAWqD2DaoDoAVq36A6AFqg9g2qA6AFat+gOgBaoPYNqgOgBWrfoDoAWqD2DaoDoAVq36A6AFqg9g2qA6AFat+gOgBaoPYNqgOgBWrfoDoAWqD2DaoDoAVq36A6AFqg9g2qA6AFat+gOgBaoPaNjutQHZgEtXB0PA/VgUlQC0fHTagOTIJaODqeherAKKiNI+PPoTowCmrjqGi8ANOBUVArR8Uz6NSBYVA7R8RXoDowjBVq6UhofhWqA9Ogto6CxtdWoTowjevU3hFw/eswHZhHkVo8/XwDnTowkG9Si6edb8J0YCTPUqunmW+tQnVgJs9Qy6eV51+A6cBQvv5tav008q0X0KkDY1n9C2Pm5sR+OkwHxrL6jRepHdRAo3D9GzAdmM3q6tfyf4C9+ZWvw3RgOqurX/3KzQa1jMkgN6t48y+/ugrTARASvPCdZ597MX+9+/UXbz775y+srsJ0AASrJkAdMgBpgNpDiA6AJqhdhOgA6INaSVgOAAAAAAAAAAAAAAAAAAAAAAAAAAByDJsA9fsCAMQKVAfACBhrhQDVAcgZUB0AI4DqABgBVAfACKA6AEYA1QEwAqgOgBFMUr1FC3UsAOQNqA6AEUB1AIwAqgNgBFAdACOA6gAYAVQHwAigOgBGANUBMAKoDoARQHUAjACqA2AEUB0AI4DqABgBVAfACKKq3k6mUaCOBYC8AdUBMAKoDoARTFN9TfyZl06r1W3zWz1+R5epn2IBeasv/xJMm9/R4z+7zkNdqA5AypiiekfI3OG3ul22Js0fiN/lP2tC7p7Xq8sfXfGPEL8/gOoApIspqnedzrmruvK2/H0gtW/ZUtuqvyQ6f9k2dFg/cpcO1QGIncmqr9ljddd5JvvqvrTavVupPmDOEh3ZAEB1AFLGZNW9/lmpvub8kdYQ1dv2QwNhfQy76lAdgJhZRPWe+7jS3qe6327ufeRBPHUsAOSNaaoHB/BrzJ1s68ubgV49sHo38hE46lgAyBtTpuXcgbi9r+75rHbNfar3g/149IPt1LEAkDemqN4X3foac1VXM279rjjO1hc+i7t7atddHY7jtweDQP8P1QFIB9NOoek7p9B03bvtObeBOINm0FU9uBR74EzYtdXsHFQHIFXgyjYAjACqA2AEUB0AI4DqABgBVAfACKA6AEYA1QEwAqgOgBFAdQCMAKoDYARQHQAjgOoAGAFUB8AIoDoARgDVATACqA6AEUB1AIwAqgNgBFAdACOA6gAYAVQHILewAOGq+1jfgOoAZJKFVO9u6jcdqgMQC7yr/u48xnVusa2XCUyH6gDEA++tb88Wrs/YK3coTIfqAMQEd/3VWb5tx/F3WqA6ALQwtjO9x747V88P1QFIOYy9NmU/fLdNMvUO1QGIHcYqa5NcW9tjt/bJTIfqAMTJ5In4zi22RzL1DtUBSADG2Othpr20zto0U+9QHYAk4K4fXBVtm7F79ylNh+oAxA1jd8etvsfYNqnoUB2A+GHstV2/ZXfabL1PbDpUByB+GNvzneb+8h671aE2HaoDkADMJ/f+Lcao3w8AIBkYY/aQfWMdpgOQX5yJ+B6D6QDkGjkRP4DpAOQdxtqvQHQA8g9Dlw6AEcB0AAAAAAAAAAAAAACuFQuNQq6hDhiAFECtoR6K1DEDQAu1ghqhjhoAQqj10wk6dmAu1PZphjpuAIigVg+uA6ADavHgOgA6oNaOAuyvA/Ogto4I6tgB0A21czSgWwemQe0cFU3q4AHQC7VyVKxQBw+AXqiVI+O/UScPgE5yfn3LFJ6ljh4AnRSpjSPjGeroAdAJtXB0XKeOHgCdUAtHx8oqdfYAaIRaOEKgOjAJat+gOgBaoPYNqgOgBWrfFqNS9t1mtYiqw3VgEHNqYYk/ulSNppZ4ilq5EuEZqsy3NlQHYAHms6LEJKUIYtWYTVyqRwaqA5OYS4o6Y5bs2euia65L9S3xgOM//70iFyi5DcMVS+VjdfVA2V6P+1+pq/FCVfT54v/OK7qjiIpYuFZRN5hapOpveWrO69lPUYfqAIwzlxS2dVzlgOpOR10Nqm7fGxSubotZqdieyvXcrr7q3ildr3ijCMtbZILqZff1WOhLQ3UA5lPdYmVHKos7W7dvVVVXWhOPqqF1TdhXVh3z2K59WQ0D7G66LO9R1tcL9nPKu+VrlZSsFbFORRpdtXt+3wC+Zqtelw/VZONjP+d8w3yoDkxiHiccqbiCftXrzN8nO6q7vXOwb/Wp7rQcFdlcuE0E/92x2X2KkruwnM4LVb2i2pS6amYs2cpAdQDGmE/10F69FKq6NVP1mv1IiXf/oapXfarX/E8Tqrp9n2wToDoAE5jHiapvXz3Qq9d9i3i9eujwueQt7LQc5Sm9+hWhp6iu3lwNvToAU5hLirI3A68GynJaTu1nqwZA7rerabmy8nHssLc9A88frXIVffvqYaqXnHn6uvMifJGaI3HNuadkNyL+fXWoDkAoc0lRcMfTvhnxurezXvUOhPmG3/XAU9TcBdynsOzDZOJ5KnI1yz5VxxvAe5P0VsE32V65+tIl+ySdqrMwVAfAYz7VlU7KH0ue9CZNrvpOrOFLlGvSZFvI8OeoO8ME2bNPUt2eB6h67UzFe45KoRBQXT1LtQDVAZjMnKrXpGK1qOfGpgqoDkxiftPZvL1lVoDqwCTmVb0kz1WJeIFJuoDqwCSofYPqAGiB2jeoDoAWqH2D6gBogdo3qA6AFqh9g+oAaIHaN6gOgBaofYPqAGiB2jeoDoAWqH2D6gBogdo3qA6AFqh9g+oAaIHaN6gOgBaofYPqAGiB2jeoDoAWqH2D6gBogdo3qA6AFqh9g+oAaIHaN6gOgBaofYPqAGiB2jeoDoAWqH2D6gBogdo3qA6AFqh9g+oAaIHaN6gOgBaofYPqAGiB2jeoDoAWqH2D6gBogdo3qA6AFqh9g+oAaIHaN6gOgBaofYPqAGiB2jeoDoAWqH2D6gBogdo3qA6AFqh9g+oAaIHaN6gOgBaofYPqAGiB2jeoDoAWqH2D6gBogdo3OlagOjCJIrVxZFyH6sAkqIWj43moDkyCWjg6vg3VgVFQG0fGd6A6MApq46govgDTgVFQK0fFTXTqwDAMnYP/HlQHhvEitXQkfHsVqgPTaBrYr6/8FVQH5lE0zvWVb8B0YCBfozZPO3+5CtWBiXzfrH69CNOBqfz369T6aUSO3mE6MJO/erZBbaAunhUzclAdGMrq6l/fFIP4HAsvN6343PdWYTowGV79X/3Os89cX6E2MjFWrj/z7e+8sArTgemsGgR11gBQQu0fRAdAE9QOQnQAtEFtIjQHAAAAAAAAAAAAACB+2ASo3xcAIFagOgBGwFgrBKgOQM6A6gAYAVQHwAigOgBGANUBMIJJqrdooY4FgLwB1QEwAqgOgBFAdQCMAKoDYARQHQAjgOoAGAFUB8AIoDoARgDVATACqA6AEUB1AIwAqgNgBFAdACOIqno7mUaBOhYA8gZUB8AIoDoARjBN9TXxLdGdVqvb5rd6/I4uUz/FAvJWX36RdJvf0eM/u85DXagOQMqYonpHyNzht7pdtibNH4jf5T9rQu6e16vLH13xjxC/P4DqAKSLKap3nc65q7rytvx9ILVv2VLbqvdF5y/bhg7rR+7SoToAsTNZ9TV7rO46zwae1e7dSvUBc5boyAYAqgOQMiar7vXPSvU15288hajeth8aCOtj2FWH6gDEzCKq99zHlfY+1f12c+8jD+KpYwEgb0xTPTiAX2PuZFtf3gz06oHVu5GPwFHHAkDemDIt5w7E7X11z2e1a+5TvR/sx6MfbKeOBYC8MUX1vujW15iruppx63fFcba+8Fnc3VO77upwHL89GAT6f6gOQDqYdgpN3zmFpuvebc+5DcQZNIOu6sGl2ANnwq6tZuegOgCpAle2AWAEUB0AI4DqABgBVAcgt7AA4ar7WN+A6gBkkoVU727qNx2qAxALvKv+7jzGdW6xrZcJTIfqAMQD761vzxauz9grdyhMh+oAxAR3/dVZvm3PsQxUByDlMLYzvce+O1fPD9UBSDmMvTZlP3z3NZKpd6gOQOxMm11f22O39slMh+oAxAlj651w1Tq32B7J1DtUByABGGOvh5n20jpr00y9Q3UAkoC7fnBVtG3G7t2nNB2qAxA3jN0ds/r+Peb7GjmoDkA+GJ+Iv9Nm67F8lztUByBVMLbnm4h/eY/d6izvKFQHILUwn9z7twLiQ3UAcgRzv7l9Y529tkvtOVQHICGciXjx91Sp3wsAIEHE4bX7A5gOQN5hrP0KRAcg/zB06QAYAUwHAAAAAAAAAAAAAAAAAADQRCHfNArUAcuMi9Q5JAt1wCrknIN4Eg8JJZj6jBEy8lEU6QqRetNNyPha3gdNPpYLyJx8lo4oehGaBFHGCBkBRY4oMka1plSuU2916kOmfscZiAhFmIGMETICihwRijADGSNkBBQ5IhRhBjJGyAgockQowgxkjJBnYth0kU0RVZg8UD1VIVO/UyqaKMKkKerM2NSQFyhk6ndKhc5unXpbTcjY2JBXkNAsvokqTJhG8X9A9cSZO2TqN0rHt7QVYYN6Uw3IGIWMhCbyDKowRxkjZCQ0keuowhxljJCR0ERWVlGF+ckYISOhyUD1HGWMkJFQ5IRQhVnIGCEjocgJoQqzkDFCzkdCdcZYAgnpqkPq+OamxEpZzTgLIZdZPZHnnTPkSK9RY5EdrPJnKNdZdepChqoeQ7wWf4ZSad4nMUt1UVWViNkK5s4sw6qX1aZGef81Oy5rxnImqh5DvHU73mqE58hGxouHXFHR1JbeNkd1VqZKd7GQI7xCSZYQl7VWVZGVVU1ZToJlmULNrtZyWCMqG7qqUt1djxdoueR2aLIlUL+UnG5OjgXEMy7/QaVedS9eS7WFFbXtE+KthNVcRSxojX0sBacVqbmZyqeo+D4gy2kg+JL1yvLVnF7VyzJNXmo3JsRbkf113Y4pNN6yrNux6rXjLVssuJ7bKFRUFTMVd83t6cT94vUWHlklrnrVdrHGKgHVVe2IrfDXYpWFNqIVWU/14HpOX8QKXrfP7LBY4NlmDweiJ0Skui/eQC2Gx2uFx+G0kIH13A6Nr+cMHUqFgOol995ytJ4rtapb9qbWhZOh8fpVnxCvUr0klvDFW/Vq079euOplL96Ks149mZCX+wRVDdrNj9C1ZDeEVX53WRWLLMCyTLMuHrIKXv26eI1YcD2VXk0EUlfhiWBlO+H1UWW+UoShabpVD8RbZjcKStwJ8TqhjA2bSm7dhK1XE8lW5INqqaq9fk0Wp/oU6vKpK0sGnVrV604wqrKskHjVJ2BXYWi8cr0aG6v6srotMgyuZ9kNpm2B+LeuPmW3tPl91YWHqomr7oZVDqjudANi87xadPdrxrej7rR6/vVuuOvZBW/JCPytnhVt8D53QoxK9UC8Xi2Gx+uOfcb7nZKzq+5fr+pbMPCROKqrl1P1W7c7/xvJZRzLZ7DgGys5W10JqO6PyVN9UrzebIpvPSdEPpYaW89RXbUI0nK3J7dbh6WmRTWoHtqrV2bUYoig8t7w9er28vxj8FqLuj+25ZknIUaoeqBXd2pxUkwOV42sykrzr2e3mhUnfOaMtZwqrTDvV0f15faU4lF9ng9hwTdWCu/V/TF5qnvxhqleLwTWszxfx9Zza7aqBvBVd5/UVT3JkJd67oJ64+7OZCHQq1u+RbxePdTMqgpcpBO+nt23VWWvXgm8ug7VGZ3qgXj93U5YTLXw7sBSDaUYn191teKtU3ZHlo7qXmmmQvU5PoUF31iN3ZI/62Ibw+P19+rhvW1Z7Y7XA+v5KnNsPe8RPmCv2/Mj/h2jtKouWjJ7itjdSZF7LXKrZYSWPcVYFwu7OzCBwOXvZb7ZwfWcGq66UxpiKXtOqVbQpDojVD0Qr9yXq6idydB41dCvOnZYTe1n8xXrgfXq9pSxnNSrFTzFq+5clX9fvV6gV332x7DoO2PODLw1KV57/0Xtq4fFq1KpMjXEd9djzk5nfWw9r2b5J8fsCWn5wz6hIbWqOzvPohTcAXrN3W2pFLzxSdkbfgcG8O5qvr3Jin1uQ0mu542B6u7OujdgjXTGx8yEGKnq/njdFKwJ8da8BXz4D2X41it5z+wL0rnXPpZijyrL8sEKW/L4fkyqr8/+HBZ9Z5a3tRPideutFB6vZVeueNC/nq/Ua1efWD1F2aldZ+TvGbL4WT06zpZzLC0oaa2KTK7mU1oEVfcdSxjbjiqrldx73fX8qttzSMw3+VEo6FGdsVvbhKoH4hUbrHa6J8Xr7fF5WMwqu/d669Xd5tWpRXXMyFf8lnNvOlTf7s78IBZ+a1WnmCbGK+6pl1SVhcTrqC6SC34sFe+p3fWCqltuq+HOS6db9brd8UZ6EjJmqr6+/zqp6tmOd66M51S9v3lr1iex+HsryVasFOXc2HSgQXV33EN23mWSCTH2UotU9YzHO0/G86r+euu7savujmKoM9IVcpSXkDM2pUhnrKU3IcZut1p9WtUzHe8cGS+g+sxWd+G3VvKdy51tdAzgs83UhBgbtGR9RQEZuxlHC5Kr3jqY7jr1lqYhZKi+REKMvXIfqseYcXTVWztTXafe0jSEDNUXT4ixrTuiuvYPtg8k284/296vY78FH+E3oHpA9clpTU7R+bkpPoz7r01znXpL0xAyVF84IcZuvdyKDFQPqB490N29Ka5Tb2kaQobqiybE2HAzemFC9ULMqremHXKj3tI0hAzVF02IsY0Y6hKqF+JWvdWB6tNChuoLJiQPs0H1eDOOR/UpRz+ptzQNIUP1xRJi7NVYqhKqF+JXffIhN+otTUPIUH2hhBjbuQ/VY884LtVb9ya4Tr2laQgZqi+SkHOYDarHm3Fsqrfa4a5Tb2kaQobqiyTE2Gtx1SRUT0L1+69A9UkhQ/WFEmLsLlSPP+PYVB9gAD8xZKg+AetB2FC9s84O4lLdvkG9oZQZW3fGwohIj7Hvhj5AvaWEQPVZWDdC98pfYqwP1ePKOGbVX1pX58NDdR9QfRZuGV7tODpQPeaM41F9f/KQi3pLCYHqs5ikOt8djOnEWFRhvKq/fIvtTHqMeksJgeqzmKj6/TbrxnK5C6owVtXv7LHXJp7zQL2lhED1WUxUvXVny66pfd81qWNXs06+7SwK1QuFBzdc1WUwV/KcmF/g3335HG22t9uC6leA6jMoWtYPJtUNHynKQ24Rv5oCVXjD69UjfzXFPXZryn4V9ZYSAtVn8HByr+7O/7zOtrzOyN8piZvbYbe9Tor/hyp84GQc7Me3DyZlGda778lDIttsfdpsKfWWEgLVZzFN9daGPOTWj+V8GuoNTWvG83JPfBSzjoFSbykhUH0W08vwtjhX43V2D6onl/Hcqr8uzmzaRsjhQPVZ3Jhehq+y9c0+VE804/m4y15fuzXrk6DeUkKg+iwezCjDHdbtYQCfbMZzcY/d3mPtGZcWU28pIVB9FrMGl3deY+vo1SNm/OBv4lB9ne3NajKot5QQqD6LmfuRL3fZuOobt6H6QhnfWKRX3w0/F+7ePN/gS72lhED1WTyYWYabwzHVO6wH1RfKeKEBfDv8lDreq+8j5MlA9VnceDCzDDtj++pQfUEWm4GfqPoc3+BLvaWEQPVZzFOGr6NXTzzjmarfvY2QpwHVZ+Evw7XBkA0Hu6LaNrtsa7e12+M76u2NljgVc2OHydvia82YkF0uvSPP0uzwx4aDTVTh1Iz7W4xtia6ZtftD8YcvfQm2bvMHxe2OczKxXFq2qfJT2JrrG3ypt5QQqD4L3zFfvlO+09sRirfZsN1rt3a32Nb2QVeeoNVj3YPtHXERe3/A2r2OWnowFFe6bvDHegM2XEMVhqL21QciwaEIkw3ZvYMDf4I88a1eb4sNd9e4172evfSW/Eu4W3wxfu88XwtEvaWEQPVZPLDcA0FbttM9XnhtcceBrDQu/Fprl3XF9VR9cY8awKul94ddUafisd5wA1UYiuzVN0Qb2todDndbTO0BqQQ317viQTntPhD3yAG8Wlre0ZGS7w7bUH0aUH0W3nfLbbItOVzkldVWZ1qLspRld9DqdGV1dkQbIFXfVK0Bbw42+OKYMZrGDXGUY0eFdNDd56qvtYIJ3h7Ki1hEM6tU31HfAbTLPxOe+e7seI0PGarPwttX73uzbW1ZaJus2xMMVE12Nno7XVf123wUz9lu8182GOve6++iCidlLJrTrjfbpi7stRPsteV57budfq89dFXntyRiUb7T3u7N941A1FtKCFSfhad6b1z1jnulNPe7P+Q/u21X9Z77IP9lY0vc2NlFFU7OmI2rHkjwQPzc2nJV91/uvzuQ2c/ztZ7UW0oIVJ/FlF69w7zdww02vN3Z9Q3ge8Ejbmt9Xo87qMLJGXevqu4leMC2+h3/AH7sq6k6Pd6YztGxU28pIVB9BkVPdXtfvdXdslVvMbWv3h/2nD3NDVd1px0YdPm+ur2Tz1CFociM7QT7w77tsT/BoZzY5MY7qtufwBpvPvvdDfcxqD4RqD4Dn+r2jHCfV5ddaAM1A9/lv+3Ix3a3XNVb6hjcpmgOnF37LVRhKP4Z+C2273TZvgSHaqLO21fvqxn4HX6H3STsYO5zKlB9KsWA6rzSBurwuK06r8tu76ArhN9g4rGhVH2fDdVx9Ta/R5TrpnjwYDi9Fh9SbyxdypZzXN0+PG6r7kvwgA0PxCkNQvUdtiOPq/N7tqTw4jriXnt6Q2q86itQfSrF4srVs+XW3OGjfZ6WnA8SM29bt3nPz2uPW32glmY7csHNnSFbvzv9T0Q8ot5YMpr+s+VEmM6eji/BbR70zoY4ttba5IvtqqW7PTmu78kT5+Y54mZuyNeh+gx+GMvXJsyDuVX4w1i+cAohT+UZqD6D57WV4RvUm2pAxq03qbeVjG/Nqbq5rv/Isu5Hr7B5+AH1phqQscEhfx+qT6f4wLI0VaG5U0YPrAe6MjZ28rP4wpymG6s63418S1cVPqbeWAMyNjbkeXfVOUXq90rDjy3rf+qqwvvUG0vEWxozNjbkv51f9Rep3ysBxSLvcKy/01aG/4t6g0l4nmccx1+vRshTuLk6v+rXVqjfrX6Kxbcs3+XqifMTE4dOPGNLY8atnzSot5iAxvcWUf0r5tVh8UcPLOvH+qqw9VPqLabImLemb2nM2MSQxfT7/KZfu/ZN6vernZu8v7H+XmMV/kOVepNpMl6LHh1CnsI/ri6mumGuFwv/KKrwZzqrsPVPppXhzx9oz9i8kBc2/dq1fzZpf734tVVRhv+itQrvPPiRSRmLk2e0Z9y6869GhdwQo/dFVV/96+eo37c2bn5vddWyHvyb3ips/Yv1v583ZlLkh29J03VnLEMuyJSL+c9aFPLCpnPXV793M//h8Aq4+bciHsv6ue4qbP2dZb3FZc9/yisvKtEJMnZCzr/qdiEvbrpwffWFP/vWM9fzOwBauf7Mc99/QeVj/R9dp2b7+Hde/Q9+9PwPV4q8Dou5lH7l+vPPfe0FJfqDnxNk3Po3/sIyZDMKeQnTlezG8FOCImy1/v6BcsD+R/1GHUUCqE37J5KMW2sPLC/lXMbrZynTDXL92jWaKmzt/szyyG8tis361/8gyri1+yM323zG67Gk6MbILjaUqgxb//LjoOi5rEUuur5zjkP4jx97wybqLBIkgugG6O5sJGEd/sO//+zBA8/0B9SRJJDxT/8vpehOyLltSVXIAAAAAAAAAAAAGIN6PmIxqNPKYGTpyGwWbALU7ytPUBdiBsuWOoQsZjYLqJ481IWYwbKlDiGLmc0i/M9FQvUoTGo+qQsyzWWLzDREHPbWoXoUULbILIVA9fiZlCl1Qaa5bJEZWcTU7yvLoGyRWQqB6vGDskVmKQSqxw/KFpmlkJRGTB1LHjNNdfTIzNSIqWPJY6apjh6ZmRoxdSx5zDTV0SMzUyOmjiWPmaY6emRmasTUsaQi0x7rzL1sv8tYPH/gMtuZha6xfxBLMmnLjChiE7NLOtMFVN9kw14vy9EnqjprxxNNyjIjitjE7FKUaY/FJDpUz05mRBGbmF2KMoXq09aA6nFGbGJ2S2baYb0DNrzdaq0Nhmy4I/ewd3t8X/vuvnx4h7HuYLelBvBbTP6J2l22ZS/U3hC/i1XZzob33Jxeh22rJ/Y/xS5fsttvbWwxJu9JafSz6tC3wV5sHda5zSMZyIg2+Ua3N+UaYvuHA2fqoifCaQfiM7Jcobr2TDtsuH4w6Lc2h2ynNxgOueC7W2xL+M+rs8+LtLfDtnaV6n3VXd9mt+2FuqzPq33IFzpYZ07d9tqs3evwJx4e3Ourp2jLZ+uxrW7vYMgO2IAX+lydWyoz4xt8b5tvB99gX2wdtqW2lIe1ITZ6ayjW2GDdg96ADe2/493psW6vb8e3zgamlitU155ph6npti0hLa/cbqt1IAuww13kNS16o764Q6i+y7pq2V17oV3Rz/ek5B1v1C4H8PYTr6ki7wuze2xvV9wUD+x25/pUU5mZb4NVbPvDPdloirB2xD1deQBiINZoMzF82R56g562fOhAxTf/YY18lStU155ph+2JH5t2J3vAq3goi7O1tcW7b6WvcFvOwA/YvrB3p9UaDuVCG7xke2zs8JGtelc9Yd9+in1+/235ilvijvZch+NSmZm3wf7YOqqLFpnZN3eV6mOjdDl8V+Hw+HYMLVeorj3TjirW23zMzdlus+01b2h9l4+0BV2uuVRdmC07tU0+DBUMZN/P91Zvr3lPbqsun8YxWsigjte5D8zToaUyM7HBd+UG27HxYXvPGdaIHz23iRSRse6g75uYEJvfsRXfVc2egeUK1bVnaovXc79pZbvjqd5277VVb3V5b9QdyuG5DV94f0fc2HJ76aDq6r5taUA+VJeTbnKDvdjGVO+03I0Xc5CM7biyK9V7ydU2dcXFEvEs2sk0CtSxJJmpq7q7p73mV93TUZUv75z3Rc/eCc6q7W4cdNnQWzTfvbq3wf7DiiG9ul2Pa/3B0Bupo1efL+LpQPWFM7XFc9QddN199UF30ynZ7taa7ekaG7wq9tdbTO2r94e91oG66U0x+VU/YC+11KObuVHd22B/bD7VA/vqW+5N+2mwrz474plA9YUzdYq1q2bghcFqcn1/OBTT56JPvq2mz9VM/d6erN2BmoEXe/Hbssb5TWeM6ledP8V+8Cmyr3rP2+A9Lzaf6q2u3Dh7Br4jl3C7b3sGXsa3hxn4kIjX1C5jq9teYzLULmN2p6P2lcRRHLXvKHehus5DXTOyWybTlqf65pC1e3yc2ZeHgNo9ddiYRyqOq6uD4rIq+T23xU++UFccVx/Imm+LqTt3Ht6vunNcfX0zP6qLDd5WG7zvxeZXnacpD7EzITkLnHXAB00HOK4+LeKOKh8xMSRP2VoTKXXUP2tOQ2v36vKHPG4rqqofOU7qWJLKVFWmvdOtzgCT+skzudRNdaqXCNxWnY9EVectF9qSR9J2B+LMr7775AHV1dlyB7ut/Kju32AvNr/qrTW+0VsbshA3d8QRCm9j+133ZMMdnC0XEnHX6Zy7KtG2/H3AnGM8sn6U6i8xJ/kO67digDqWpDLNAMgsK5nFFvGaO9VpO6+GPn23a5B3K9XvMWeJTjyXFlDHklCmWQCZZSWz2CL2+mel+pp3wNd3t1LdORo8kBMj0XfVs5Hd4plmAWSWlcxii/iq6t4BTaW9T3W/3dz7yIN46lgSyjQLILOsZBZbxJ2xAfyaN3cpL8YI9uqB1ee7riLz2S2eaRZAZlnJLL6I3YG4va/u+Txg7t3qzn6wH49+sJ06lqQyzQDILCuZxRexvFR6jbmqqxm3flccwukLn8Xd9gEhdTiO3x4MAv1/rrNbItMMgMyyklmMEfedU2i67t32nNtAnEEzkDfbcjJO3iOtb6vZOROyWybT9IPMspJZPiKmjiWPmaY6emRmasTUseQx01RHj8xMjZg6ljxmmurokZmpEVPHksdMUx09MksoVj/hEftYT+QKgYxmN1++4ZnqjzE70SOzpHJdQPVuPH8KLC/ZzRNpOpvP1EWPzLSEvP7deTahc4ttvYzs5os07c1n+qJHZnpCvj17C/qMvXIH2c0b6XzdDlnzmcLoGRsis+RDZq/O2oDtOE6GyWF2kyO9PXvLePO58zdEqaYv+vm7nPvUuaQms2VS3pnaY9+/N9fHYGR2kxJlM/+QN28+X0111WqOfs4uB5lFTPm1KYOi3dco50Gos1k60hQ3nymNHplpCXnyVMfaHru1j+wWj3Rryp875c3nfPumlBBkNrXLaad56p0qsyVCXp/wxYKdW2yPch6EOpkIkaa2+Uxt9MhMS8js9bC3/tI6a9NMvWcnu4mRTjqOSd18pjf69HY56c1siZDDZpJ6jN1DdstHGvp9W+TNZ4qjT22Xk+LMlkn57tjsppgH2UZ2ERINaz63efOZ7mlkyujT2uWkObNlUg7OitxvM/uPfiG7pSPdSWHzme7okZmWkPd8syIv77FbCfxVq5xmNzHSYPN5p83WY/lTGDmOnmcWOHhxJ45vHs55ZkuE7Mm9fysgPrJbNtL0NZ9pjx6ZaQnZmRV5aX2sbUV2y0aauuYz9dGPZ7YWZTMMyWyJkNWsiPh7qtTvJSd4E/FpaT7TX7bITE/K99TXvlK/kdzgNp/rbIe6FLNStr4u524mDlekILNlUm63IXqsiMNr9wdzXAOTKugzayGzpEOG6THD2Guv8FCpCzFTZcu7nFcmnFCTXqgLbfGQqd9B7lDNJ3UhZqtsZWbUIWQsM0CPbD6pCzFjZZu91pE+M5AOqAsxg2VLHUIWMwP0UBdiBsuWOoQsZgbooS7EDJYtdQhZzAzQQ12IGSxb6hCymBmgh7oQM1i21CFkMTNAD3UhZrBsqUPIYmaAHupCzGDZUoeQxcwAPdSFmMGypQ4hi5kBeqgLMR1l+2RxDo9sjhWjZnN0crJSKBaKDx9x3vjFL974xU9+8hPyK2OoKwwkRCxFezI6aTaKBadoedWmomijle28aSyR4Cx4tqeyMSgUeKIizIxkBoiZ2+FopXsY8gsv2qe8aEd20b6htWgXKttZG3d2dnZ0en5+Khu30Qn/b+WiudJsFB4+LDwsFB7ZPH5zAo+dJfjC/L/CRfOCrz1qjkajy8vjy+OnT8/Pj/hrTHoDZzzIy+YKf6E3fvCDlGQGiJmnaM95XblF22w2Vxq8aGUJLlC0fAVOgZfsRVOUrKja4+PLpxxetGeHU4u2kXzRzizbie+PN0+XIpcVvoV8Q9+MhcdzLykahIeFRoMP8XmgT5+enY03pYdHx5cnKw8f/yL+AKnLF0xnStFeXvLhdbP5ML6inb9mVdE+bFw0Zd/lFO2T8aIt8KJNor+fL6wzNfK4kF6Pb8Eb8Xi+WGwh64rhQONCNKbnwRDPnl42C49/EdvuEnUpg1CuFu3pueiOnKKNUl1x474XOYZtjEa8vzoKFu2RKNofxLiPPymuQ/FivOO+4APix1feYAZ4zIdUF7zLf+oFePh0VHgzhk4+uWotNAoZJS2Oy6IVA+Is1aqLEL/J+6qjQNE+jKNofWXrG0Sc852HhzGNySlxPu1HD/lA//jIHt4fHq88jtZWJmd6hqGV/PAsL0XrIIr28twr2kbEorXL1smLx1XIUVpX07u4PFXt5XnhF1A926obU7TNy6eHdtG+EVF1e5jQyHFeLryjf9QYncvglpYdqtOrrmp/lGfJ/TwqRC1aUbZ8/+aykMk9m+V5XBjx3n3ZNhKqk6tuYtG++XB0uHzR8rJ98mREvQkkPB49OYfq8bGq1/SRaZ6roj158iRS+3hhYGyPV86ipJYM1LpmSPUj84r28ZuPm5GKVu30NB9Sb4gm5EkAD5vHcrN1Vuc8UOsaSXWdrjtFa5LuvGgPoxUtHwupU01PR42HMZ4OkzrEpr3x+KE9KffkbATVM6z66Myefm/kv5N6/KgxUkfdohXtkyfibJ1z+5j92fkop4cuHhUuvK18enlRKED1DKteEB+nfUnK2XF+i7Y5Oo6taEVqgsbId47O2fnx6KSRh/geFURap96WHR2P7FPSnjzRWp5zQK1rplQPFq04u/P0cnRSVEWbxZG9957FOXPi9G7fqfFxFK2TmuJi5DuB/FCehWSfaJihMw0fPRLnwh/zLfFd/3J4dHp82fRvK1TPvOrK90DR8k/68ExcsZGNonX2mB8/evTwonlyzHulsaIdxVa0QdVtxLU350fjV96diWvE5aVBD70UHwffd7I7+6HPLlIqrDRGI2n32NVCh2envLE6uQjZSKieD9Vt4RvNE160p+MFIC964UXbaBZU0aZjOuqxd3HW8elReNE2Q2KOXXWXlaa8UuzoKPSCW3mBurzQdzRqXlwUnMvSE2hLHzsXsjcaKxcnUuvjU3H5esjbOjyUb2t0cnExbdugepxQqy5oyP8Kjaa4ZOR8QnWcnZ3Jy9NF0V5cNBri2xRmF+0bc9yeULTi0rWLhryI/fjy+PR0QtFKl0RHmljRTlc9wIVoN3krxEM8Ogy/1v4wEKlI9enTU/VtFfLifyEp3xr5r/zF+5f/70QaLK7oP356enr69OmZuKr/7MkMeItz9pS7rS5GnntzoHqcpET1K7dXmupLIs5PedHOUUrqC1aOzsU3MqhilPWp/i+/J+XEvm3X7sgpWv4avNifnvNq9Ns84Uspzg6Pjs71Fu0Cql/hotm0gxT+n4uv2Dqb8o0bU1uGOT4E3vAdnfEsxUCCJ8SDbl6sLP/uoXqcpEH1MBq+f9XNphwVjuyifSqL9nB2h7IMh2eHh8J88Trqe2540V64RdtY/KJlKtWn0mxccHgPzscCo0vxxRsqXofL4zDEcpeyyeTwlqTZWAlr8uK4rjsDqlcZYzVxo8JYKaHPKSbSqvp0xuuoudJs8sGrqD1RtJdORxbk0vnHfkzUtqhw3j+rqr0I33WMoWpTqfrEzSuqf4tFeatY9N1fHFsoUTKiepn/rDGorrNoQyj6K1KWalHWsGbSrPosHpK9cgZUL1jccatQKCvj6/w3VpUPiEaAI29X5E2+mFhOLcmR96n7feslRt5VTwlZVj2bqSXD1fdoye7cUgIrpWX3bqmb0l/7Zs29t+xbQKjuWy85oLoWoLru1JLh6nu0GO+oqyX+b7lQYnVxV0X00yW5C18RvXpNOlySvbpE9vXS7JrU3r9eckB1LUB13aklw9X3yFUvsZIYiZcLbj9dUkPyirOINzq3nL7eUsP4uvjhXy85oLoWoLru1JLh6nvkyoq98pL901NW7n6r7tpyR+11d1ivunr+o1yoQvUcAdV1p5YMV9+j6J3FEF716lce9I/a60Jq8XvlSq+uI02orgWorju1ZLj6HoWyzv9Lytmy6MsrcvQu99hLcvRek7N3Zfm4uCOwr+6tlxxQXQtQXXdqyXDlLdbVuFuOwSsF30CcuUN1dYBNzcBXvCWcGXghPwbw+QGq604tGa68xaDqon+2p+Aqrsf2nd4Rdss+s07q718k2QPrUF0LUF13askQ+yZa+s6xg+pagOq6U0uG2Dcx4f1zP1BdC6lX3Up+AKk3tWSIPXI9k++S/KnuO3chPaRd9ZKOMzO1ppYMcW6dxfRWau5Ur7iznWki5arX5fFeXnt1+6JMdTxIzTbVC87VHDX7lJCyphrNt+q6yZvqZTkiEqVbY/bhS1mUNefSIlW7JfvcBl1dWcpVt8fu3PWA6s65XUHVnZO7km9NoXqc5Ex1y+5t6qwcUL3sHsP0q17zXX2ULOlW3XIuqyzzVJzrNKpOmHXRGFr2eZ1156qMqoa9TKgeJzlTve5MaIpCFOXKS7JiV6uo5JqziChqu1prTqEnSLpVrzkjm1JA9ZJ7brZfde/iy8S7dageJzlTveTUXyWgunuSUtlT/YY7PtXQradd9dBevRyqeg2qZ5PcqV5XN4K9OgtR3fL1WoarXvX21QuBXt2T2d+rJz8IiiG1ZNC15UmQM9Vr7Jb8WVffCeL16p7Mnup1facvpFt10X/bM/B2a1lWl1RL12siQbnfrqblKsp1luwXKURNLRkS/yQSJGeqF5g7A2/PHzG1ry5dL6nvDCjZ03JVdezISvkEk45DlL7LLWre+LzkDeAL3rjIwgA+k+RNdctXhiVvfF7xBvBupda9nXXDB/AFezZDddM1+4oM96vQ6vJu0RLU1QUcFU0nf0D1OMmb6vZRX3VbuF5lvkPEspZF/dbKvkPEGg6sp171mpS3lq5zY6F6nOROdel3qVBK17mxaVfdHbUnvv+tK7VkoE4kCrlT3b9/mR7Sr7r65sN0nU8M1eMkh6p7p3Cnh7Srnk6gepzkTvV0AtV1p5YM1IlEAaprAarrTi0ZqBOJAlTXAlTXnVoyUCcSBaiuBaiuO7VkoE4kClBdC1Bdd2rJQJ1IFKC6FqC67tSSgTqRKEB1LUB13aklA3UiUYDqWoDqulNLBupEogDVtQDVdaeWDNSJRAGqawGq604tGagTiQJU1wJU151aMlAnEgWorgWorju1ZKBOJApQXQtQXXdqyUCdSBSguhaguu7UkoE6kShAdS1Add2pJQN1IlGA6lqA6rpTSwbqRKIA1bUA1XWnlgzUiUSgAdW1ANV1p5YM1IlE4EWorgWorju1ZKBOJAL/DNW1ANV1p5YM1Iksz1+sQnUtRFP9kvrt03D55G2oHhPCdL2qo2iXiu3s+IR6E3RzcXz25Mk7UD0edJsuivbwuEm92bppRi7at59w24+OTxrUm6KHxsnx+SHf5Hff012fM6GOZkmk6ZqjFEV7eHQ5yn/Rqi08OT6No2jf+893nwjOTo8vL6i3LEkuRsdHZ3JT3//gvV/qr89ZUOezHBSmB4p2dJHjqm0EivbrEaPma3/4zq/efqI4PDo/vhzlKrzmyeXx06NDewPf/uCdX6+SlOcsqHNaChrTVdH+p1e0vJs6yVPRNprNBIpWPcXqbz565+NP3n3iciadH11kdIzEm8PR5fH50dmhu0XvfvKrdz76zaqH9gKdDnVky0Bk+vSiPWnO2pFPaVE3mydXivbTX/02xqL1PdHq7z77/ceffP7+Ex+Hh0c8QRHhRfrEb7gfW+OC2z065m2hPyox8nn7k49//1+/++VqEP31OQPqKJeAyvRrwaL9NS/aLz5/N6RoR9z7FbdoG47khGVcDPzWFHbzoj0/vVK0XyRUtKvj/OGj93775Qc8vz8+GeOMh3jKUxR9vmhAG4HcwqKMPdhGsbnSPOEt4OiSN4LnZzymw7F3+cd3P/3kg49//95Hf1gNhaQ8Z1DI2KzyzW/QRhlWtL/nRfvp1aI95DVyfn6ualZ0WY1JVdkQLrrdxyJF6d646kBD3d8URSvM5kXLO6Sz8Xf5x/c//+SDLzUU7eoE/vDRZ++88+WXX3zy+dtXMxQxCv/PeJicc5Gn4JKHyscBglHjYuWiedFcmR0Xb+SaKhG5Ijf5ciSfTjyveH7xOk/C+eO7wu4vv3znnc8++nB1CmSlufxHkGbSmdj/c4r2k3fHi/ZQlawo2jNVtE/Pn6qiHdlF2xzxeuV12Jhnyu9CLrtycSJXFM8geiC7aE9l0Z5NKlree9MV7axP9usf/u4znuKfeIxS/ndD9U8a/rI8oy+++PLLP/32nf/67Ncf/mbW+05BWUYPP4VQRzZXbr/88Nde0X7yOa8egpp98j7vjHjRcrP/xNVOTdEu9nn/8sMPP/zos88+e++dd2SgX378heTTtz95+1PRHLwvmMdgueD7n38q+EQ+x8f86b4Uz/sef4GP+Av9crH3lpp6jD31NECdWIT4rhTtr+yiFXz+vs0cBit43yOL9oMMF63++lkil5Rklb2sc5pw5E2LqQYXfh7q4OJLMGGo8wEphLooc1O0iAhkDhRtqmKlft/AYFC0AIAs8v8BNEgGXhvD2hsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDUtMDFUMTM6NTg6NDgtMDc6MDD6nvsTAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA1LTAxVDEzOjU4OjQ4LTA3OjAwi8NDrwAAAABJRU5ErkJggg==" alt="image"></span></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The main interfaces provided by the domain-specific API for <strong>pub/sub</strong>
messaging are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TopicConnectionFactory - an administered object used by a client to
create a TopicConnection.</p>
</li>
<li>
<p>TopicConnection - an active connection to a Jakarta Messaging provider</p>
</li>
<li>
<p>TopicSession - a single-threaded context for sending and receiving
messages</p>
</li>
<li>
<p>TopicPublisher - an object created by a TopicSession that is used for
sending messages to a topic</p>
</li>
<li>
<p>TopicSubscriber - an object created by a TopicSession that is used for
receiving messages sent to a topic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Figure 2‑5 Overview of legacy pub/sub-specific API
<span class="image"><img src="data:image/png;base64,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" alt="image"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="relationship-between-interfaces"><a class="anchor" href="#relationship-between-interfaces"></a>2.10. Relationship between interfaces</h3>
<div class="paragraph">
<p>The following table summarises the different interfaces used by the four
APIs and how they correspond to one another:</p>
</div>
<div class="paragraph">
<p>Table 2‑1 Relationship between interfaces used by each API</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Classic API</th>
<th class="tableblock halign-left valign-top">Simplified API</th>
<th class="tableblock halign-left valign-top">Domain-specific API for point-to-point
messaging</th>
<th class="tableblock halign-left valign-top">Domain-specific API for pub/sub messaging</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection Factory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection Factory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueConnection Factory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicConnection Factory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicConnection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicSession</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageProducer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSProducer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueSender</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueReceiver</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="terminology-for-sending-and-receiving-messages"><a class="anchor" href="#terminology-for-sending-and-receiving-messages"></a>2.11. Terminology for sending and receiving messages</h3>
<div class="paragraph">
<p>The term <em>consume</em> is used in this document to mean the receipt of a
message by a Jakarta Messaging client; that is, a Jakarta Messaging provider has received a message
and has given it to its client. Since Jakarta Messaging supports both synchronous and
asynchronous receipt of messages, the term <em>consume</em> is used when there
is no need to make a distinction between them.</p>
</div>
<div class="paragraph">
<p>The term <em>produce</em> is used as the most general term for sending a
message. It means giving a message to a Jakarta Messaging provider for delivery to a
destination.</p>
</div>
</div>
<div class="sect2">
<h3 id="developing-a-jakarta-messaging-application"><a class="anchor" href="#developing-a-jakarta-messaging-application"></a>2.12. Developing a Jakarta Messaging application</h3>
<div class="paragraph">
<p>Broadly speaking, a Jakarta Messaging application is one or more Jakarta Messaging clients that
exchange messages. The application may also involve non-Jakarta Messaging clients;
however, these clients use the Jakarta Messaging provider’s native API in place of
JMS.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging application can be architected and deployed as a unit. In many
cases, Jakarta Messaging clients are added incrementally to an existing application.</p>
</div>
<div class="paragraph">
<p>The message definitions used by an application may originate with Jakarta Messaging or
they may have been defined by the non-Jakarta Messaging part of the application.</p>
</div>
<div class="sect3">
<h4 id="developing-a-jakarta-messaging-client"><a class="anchor" href="#developing-a-jakarta-messaging-client"></a>2.12.1. Developing a Jakarta Messaging client</h4>
<div class="paragraph">
<p>A typical Jakarta Messaging client using the classic API executes the following Jakarta Messaging
setup procedure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use JNDI to find a ConnectionFactory object</p>
</li>
<li>
<p>Use JNDI to find one or more Destination objects</p>
</li>
<li>
<p>Use the ConnectionFactory to create a Jakarta Messaging Connection object with
message delivery inhibited</p>
</li>
<li>
<p>Use the Connection to create one or more Jakarta Messaging Session objects</p>
</li>
<li>
<p>Use a Session and the Destinations to create the MessageProducer and
MessageConsumer objects needed</p>
</li>
<li>
<p>Tell the Connection to start delivery of messages</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In contrast, a typical Jakarta Messaging client using the simplified API does the
following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use JNDI to find a ConnectionFactory object</p>
</li>
<li>
<p>Use JNDI to find one or more Destination objects</p>
</li>
<li>
<p>Use the ConnectionFactory to create a JMSContext object</p>
</li>
<li>
<p>Use the JMSContext to create the JMSProducer and JMSConsumer objects
needed.</p>
</li>
<li>
<p>Delivery of messages is started automatically</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At this point a client has the basic Jakarta Messaging setup needed to produce and
consume messages.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="security"><a class="anchor" href="#security"></a>2.13. Security</h3>
<div class="paragraph">
<p>Jakarta Messaging does not provide features for controlling or configuring message
integrity or message privacy.</p>
</div>
<div class="paragraph">
<p>It is expected that many Jakarta Messaging providers will provide such features. It is
also expected that configuration of these services will be handled by
provider-specific administration tools. Clients will get the proper
security configuration as part of the administered objects they use.</p>
</div>
</div>
<div class="sect2">
<h3 id="multi-threading"><a class="anchor" href="#multi-threading"></a>2.14. Multi-threading</h3>
<div class="paragraph">
<p>Jakarta Messaging could have required that all its objects support concurrent use.
Since support for concurrent access typically adds some overhead and
complexity, the Jakarta Messaging design restricts its requirement for concurrent
access to those objects that would naturally be shared by a
multi-threaded client. The remaining objects are designed to be accessed
by one logical thread of control at a time.</p>
</div>
<div class="paragraph">
<p>Table 2‑2 Objects used in the classic API, showing which support
concurrent use</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jakarta Messaging Object</th>
<th class="tableblock halign-left valign-top">Supports Concurrent Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConnectionFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageProducer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MessageConsumer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 2‑3 Objects used in the simplified API, showing which support
concurrent use</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jakarta Messaging Object</th>
<th class="tableblock halign-left valign-top">Supports Concurrent Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConnectionFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSProducer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSConsumer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 2‑4 Objects used in the domain-specific API for point-to-point
messaging, showing which support concurrent use</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jakarta Messaging Object</th>
<th class="tableblock halign-left valign-top">Supports Concurrent Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueConnectionFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueSender</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueReceiver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 2‑5 Objects used in the domain-specific API for pub/sub messaging,
showing which support concurrent use</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jakarta Messaging Object</th>
<th class="tableblock halign-left valign-top">Supports Concurrent Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicConnectionFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">YES</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicPublisher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicSubscriber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NO</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Jakarta Messaging defines some specific rules that restrict the concurrent use of
sessions. These apply to the Session object in the classic API and to
the QueueSession and TopicSession objects in the domain-specific APIs.
They also apply to the JMSContext object in the simplified API since it
encompasses a session. Since these rules require more knowledge of Jakarta Messaging
specifics than we have presented at this point, they will be described
later. Here we will describe the rationale for imposing them.</p>
</div>
<div class="paragraph">
<p>There are two reasons for restricting concurrent access to sessions.
First, sessions are the Jakarta Messaging entity that supports transactions. It is
very difficult to implement transactions that are multi-threaded.
Second, sessions support asynchronous message consumption. It is
important that Jakarta Messaging <em>not</em> require that client code used for asynchronous
message consumption be capable of handling multiple, concurrent
messages. In addition, if a session has been set up with multiple,
asynchronous consumers, it is important that the client is not forced to
handle the case where these separate consumers are concurrently
executing. These restrictions make Jakarta Messaging easier to use for typical
clients. More sophisticated clients can get the concurrency they desire
by using multiple sessions. In the classic API and the domain-specific
APIs this means using multiple session objects. In the simplified API
this means using multiple JMSContext objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="triggering-clients"><a class="anchor" href="#triggering-clients"></a>2.15. Triggering clients</h3>
<div class="paragraph">
<p>Some clients are designed to periodically wake up and process messages
waiting for them. A message-based application triggering mechanism is
often used with this style of client. The trigger is typically a
threshold of waiting messages, etc.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not provide a mechanism for triggering the execution of a
client. Some providers may supply such a triggering mechanism via their
administrative facilities.</p>
</div>
</div>
<div class="sect2">
<h3 id="requestreply"><a class="anchor" href="#requestreply"></a>2.16. Request/reply</h3>
<div class="paragraph">
<p>Jakarta Messaging provides the JMSReplyTo message header field for specifying the
Destination where a reply to a message should be sent. The
JMSCorrelationID header field of the reply can be used to reference the
original request. See Section 3.4 “Message header fields” for more information.</p>
</div>
<div class="paragraph">
<p>In addition, Jakarta Messaging provides a facility for creating temporary queues and
topics that can be used as a unique destination for replies.</p>
</div>
<div class="paragraph">
<p>Enterprise messaging products support many styles of request/reply, from
the simple “one message request yields one message reply” to “one
message request yields streams of messages from multiple respondents.”
Rather than architect a specific Jakarta Messaging request/reply abstraction, Jakarta Messaging
provides the basic facilities on which many can be built.</p>
</div>
<div class="paragraph">
<p>The legacy domain-specific APIs define request/reply helper classes
(classes written using Jakarta Messaging) for both the point-to-point and pub/sub
domains that implement a basic form of request/reply. See sections 4.1.7
“QueueRequestor” and 4.2.10 “TopicRequestor”. Jakarta Messaging providers and clients may provide more specialized
implementations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jakarta-messaging-message-model"><a class="anchor" href="#jakarta-messaging-message-model"></a>3. Jakarta Messaging message model</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="background"><a class="anchor" href="#background"></a>3.1. Background</h3>
<div class="paragraph">
<p>Enterprise messaging products treat messages as lightweight entities
that consist of a header and a body. The header contains fields used for
message routing and identification; the body contains the application
data being sent.</p>
</div>
<div class="paragraph">
<p>Within this general form, the definition of a message varies
significantly across products. There are major differences in the
content and semantics of headers. Some products use a self describing,
canonical encoding of message data; others treat data as completely
opaque. Some products provide a repository for storing message
descriptions that can be used to identify and interpret message content;
others don’t.</p>
</div>
<div class="paragraph">
<p>It would be quite difficult for Jakarta Messaging to capture the breadth of this,
sometimes conflicting, union of message models.</p>
</div>
</div>
<div class="sect2">
<h3 id="goals"><a class="anchor" href="#goals"></a>3.2. Goals</h3>
<div class="paragraph">
<p>The Jakarta Messaging message model has the following goals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide a single, unified message API</p>
</li>
<li>
<p>Provide an API suitable for creating messages that match the format
used by existing, non-Jakarta Messaging applications</p>
</li>
<li>
<p>Support the development of heterogeneous applications that span
operating systems, machine architectures, and computer languages</p>
</li>
<li>
<p>Support messages containing Java objects</p>
</li>
<li>
<p>Support messages containing Extensible Markup Language pages (see
<a href="http://www.w3.org/XML" class="bare">http://www.w3.org/XML</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-messages"><a class="anchor" href="#jakarta-messaging-messages"></a>3.3. Jakarta Messaging messages</h3>
<div class="paragraph">
<p>Jakarta Messaging messages are composed of the following parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Header - All messages support the same set of header fields. Header
fields contain values used by both clients and providers to identify and
route messages.</p>
</li>
<li>
<p>Properties - In addition to the standard header fields, messages
provide a built-in facility for adding optional header fields to a
message.</p>
<div class="ulist">
<ul>
<li>
<p>Application-specific properties - In effect, this provides a
mechanism for adding application specific header fields to a message.</p>
</li>
<li>
<p>Standard properties - Jakarta Messaging defines some standard properties that are,
in effect, optional header fields.</p>
</li>
<li>
<p>Provider-specific properties – Some Jakarta Messaging providers may require the use
of provider-specific properties. Jakarta Messaging defines a naming convention for
these.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Body - Jakarta Messaging defines several types of message body which cover the
majority of messaging styles currently in use.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="message-header-fields"><a class="anchor" href="#message-header-fields"></a>3.4. Message header fields</h3>
<div class="paragraph">
<p>The following subsections describe each Jakarta Messaging message header field. A
message’s complete header is transmitted to all Jakarta Messaging clients that receive
the message. Jakarta Messaging does not define the header fields transmitted to
non-Jakarta Messaging clients.</p>
</div>
<div class="sect3">
<h4 id="jmsdestination"><a class="anchor" href="#jmsdestination"></a>3.4.1. JMSDestination</h4>
<div class="paragraph">
<p>The JMSDestination header field contains the destination to which the
message is being sent.</p>
</div>
<div class="paragraph">
<p>When a message is sent this value is ignored. After completion of the
send it holds the Destination object specified by the sending method.</p>
</div>
<div class="paragraph">
<p>When a message is received, its destination value must be equivalent to
the value assigned when it was sent.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsdeliverymode"><a class="anchor" href="#jmsdeliverymode"></a>3.4.2. JMSDeliveryMode</h4>
<div class="paragraph">
<p>The JMSDeliveryMode header field contains the delivery mode specified
when the message was sent.</p>
</div>
<div class="paragraph">
<p>When a message is sent this value is ignored. After completion of the
send, it holds the delivery mode specified by the sending method.</p>
</div>
<div class="paragraph">
<p>See Section 7.7 “Message delivery mode” for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsmessageid"><a class="anchor" href="#jmsmessageid"></a>3.4.3. JMSMessageID</h4>
<div class="paragraph">
<p>The JMSMessageID header field contains a value that uniquely identifies
each message sent by a provider.</p>
</div>
<div class="paragraph">
<p>When a message is sent, JMSMessageID is ignored. When the send method
returns it contains a provider-assigned value.</p>
</div>
<div class="paragraph">
<p>A JMSMessageID is a String value which should function as a unique key
for identifying messages in a historical repository. The exact scope of
uniqueness is provider defined. It should at least cover all messages
for a specific installation of a provider where an installation is some
connected set of message routers.</p>
</div>
<div class="paragraph">
<p>All JMSMessageID values must start with the prefix 'ID:'. Uniqueness of
message ID values across different providers is not required.</p>
</div>
<div class="paragraph">
<p>Since message IDs take some effort to create and increase a message’s
size, some Jakarta Messaging providers may be able to optimize message overhead if
they are given a hint that message ID is not used by an application.
Both MessageProducer and JMSProducer provide a method
setDisableMessageID which allows the application to provide a hint to
disable message ID. When an application sets a producer to disable
message ID, it is saying that it does not depend on the value of message
ID for the messages it produces. If the Jakarta Messaging provider accepts this hint,
these messages must have the message ID set to null; if the provider
ignores the hint, the message ID must be set to its normal unique value.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmstimestamp"><a class="anchor" href="#jmstimestamp"></a>3.4.4. JMSTimestamp</h4>
<div class="paragraph">
<p>The JMSTimestamp header field contains the time a message was handed off
to a provider to be sent. It is not the time the message was actually
transmitted because the actual send may occur later due to transactions
or other client side queueing of messages.</p>
</div>
<div class="paragraph">
<p>When a message is sent, JMSTimestamp is ignored. When the send method
returns, the field contains a time value somewhere in the interval
between the call and the return. It is in the format of a normal Java
millis time value.</p>
</div>
<div class="paragraph">
<p>Since timestamps take some effort to create and increase a message’s
size, some Jakarta Messaging providers may be able to optimize message overhead if
they are given a hint that timestamp is not used by an application. Both
MessageProducer and JMSProducer provide a method
setDisableMessageTimestamp which allows the application to provide a
hint to disable timestamps. When an application sets a producer to
disable timestamps it is saying that it does not depend on the value of
timestamp for the messages it produces. If the Jakarta Messaging provider accepts this
hint, these messages must have the timestamp set to zero; if the
provider ignores the hint, the timestamp must be set to its normal
value.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmscorrelationid"><a class="anchor" href="#jmscorrelationid"></a>3.4.5. JMSCorrelationID</h4>
<div class="paragraph">
<p>A client can use the JMSCorrelationID header field to link one message
with another. A typical use is to link a response message with its
request message.</p>
</div>
<div class="paragraph">
<p>JMSCorrelationID can hold one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A provider-specific message ID</p>
</li>
<li>
<p>An application-specific String</p>
</li>
<li>
<p>A provider-native byte[] value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since each message sent by a Jakarta Messaging provider is assigned a message ID value
it is convenient to link messages via message ID. All message ID values
must start with the 'ID:' prefix.</p>
</div>
<div class="paragraph">
<p>In some cases, an application (made up of several clients) needs to use
an application-specific value for linking messages. For instance, an
application may use JMSCorrelationID to hold a value referencing some
external information. Application-specified values must not start with
the 'ID:' prefix; this is reserved for provider-generated message ID
values.</p>
</div>
<div class="paragraph">
<p>If a provider supports the native concept of correlation ID, a Jakarta Messaging
client may need to assign specific JMSCorrelationID values to match
those expected by non-Jakarta Messaging clients. A byte[] value is used for this
purpose. Jakarta Messaging providers without native correlation ID values are not
required to support byte[] values<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> The use of a byte[] value for
JMSCorrelationID is non-portable.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsreplyto"><a class="anchor" href="#jmsreplyto"></a>3.4.6. JMSReplyTo</h4>
<div class="paragraph">
<p>The JMSReplyTo header field contains a Destination supplied by a client
when a message is sent. It is the destination where a reply to the
message should be sent.</p>
</div>
<div class="paragraph">
<p>Messages sent with a null JMSReplyTo value may be a notification of some
event or they may just be some data the sender thinks is of interest.</p>
</div>
<div class="paragraph">
<p>Messages sent with a JMSReplyTo value are typically expecting a
response. A response may be optional; it is up to the client to decide.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsredelivered"><a class="anchor" href="#jmsredelivered"></a>3.4.7. JMSRedelivered</h4>
<div class="paragraph">
<p>If a client receives a message with the JMSRedelivered indicator set, it
is likely, but not guaranteed, that this message was delivered but not
acknowledged in the past. In general, a provider must set the
JMSRedelivered message header field of a message whenever it is
redelivering a message. If the field is set to true, it is an indication
to the consuming application that the message may have been delivered in
the past and that the application should take extra precautions to
prevent duplicate processing. See Section 6.2.10 “Message
acknowledgment” for more information.</p>
</div>
<div class="paragraph">
<p>This header field has no meaning on send and is left unassigned by the
sending method.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging-defined message property JMSXDeliveryCount will be set to the
number of times a particular message has been delivered. See section
3.5.11 “JMSXDeliveryCount” for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmstype"><a class="anchor" href="#jmstype"></a>3.4.8. JMSType</h4>
<div class="paragraph">
<p>The JMSType header field contains a message type identifier supplied by
a client when a message is sent.</p>
</div>
<div class="paragraph">
<p>Some Jakarta Messaging providers use a message repository that contains the
definitions of messages sent by applications. The JMSType header field
may reference a message’s definition in the provider’s repository.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not define a standard message definition repository nor does it
define a naming policy for the definitions it contains.</p>
</div>
<div class="paragraph">
<p>Some messaging systems require that a message type definition for each
application message be created and that each message specify its type.
In order to work with such Jakarta Messaging providers, Jakarta Messaging clients should assign a
value to JMSType whether the application makes use of it or not. This
ensures that the field is properly set for those providers that require
it.</p>
</div>
<div class="paragraph">
<p>To ensure portability, Jakarta Messaging clients should use symbolic values for
JMSType that can be configured at installation time to the values
defined in the current provider’s message repository. If string literals
are used they may not be valid type names for some Jakarta Messaging providers.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsexpiration"><a class="anchor" href="#jmsexpiration"></a>3.4.9. JMSExpiration</h4>
<div class="paragraph">
<p>When a message is sent, the Jakarta Messaging provider calculates its expiration time
by adding the time-to-live value specified on the send method to the
time the message was sent (for transacted sends, this is the time the
client sends the message, not the time the transaction is committed). It
is represented as a long value which is defined as the difference,
measured in milliseconds, between the expiration time and midnight,
January 1, 1970 UTC.</p>
</div>
<div class="paragraph">
<p>On return from the send method, the message’s JMSExpiration header field
contains this value. When a message is received its JMSExpiration header
field contains this same value.</p>
</div>
<div class="paragraph">
<p>If the time-to-live is specified as zero, the message’s JMSExpiration
header field is set to zero to indicate that the message does not
expire.</p>
</div>
<div class="paragraph">
<p>When an undelivered message’s expiration time is reached, the message
should be destroyed. Jakarta Messaging does not define a notification of message
expiration.</p>
</div>
<div class="paragraph">
<p>Clients should not receive messages that have expired; however, Jakarta Messaging does
not guarantee that this will not happen.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmspriority"><a class="anchor" href="#jmspriority"></a>3.4.10. JMSPriority</h4>
<div class="paragraph">
<p>The JMSPriority header field contains the message’s priority.</p>
</div>
<div class="paragraph">
<p>When a message is sent this value is ignored. After completion of the
send it holds the value specified by the method sending the message.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging defines a ten level priority value with 0 as the lowest priority and
9 as the highest. In addition, clients should consider priorities 0-4 as
gradations of <em>normal</em> priority and priorities 5-9 as gradations of
<em>expedited</em> priority.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not require that a provider strictly implement priority
ordering of messages; however, it should do its best to deliver
expedited messages ahead of normal messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="how-message-header-values-are-set"><a class="anchor" href="#how-message-header-values-are-set"></a>3.4.11. How message header values are set</h4>
<div class="paragraph">
<p>The following table lists the message header fields supported by Jakarta Messaging and
whether they are set by the Jakarta Messaging provider or by the client application.</p>
</div>
<div class="paragraph">
<p>Table 3‑1 Message header field values</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header Fields</th>
<th class="tableblock halign-left valign-top">Set By</th>
<th class="tableblock halign-left valign-top">Setter method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSDestination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setJMSDestination<br>
(not for client use)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSDeliveryMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setJMSDeliveryMode(not for
client use)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSExpiration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>setJMSExpiration</p>
</div>
<div class="paragraph">
<p>(not for client use)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSDeliveryTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>setJMSDeliveryTime</p>
</div>
<div class="paragraph">
<p>(not for client use)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSPriority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>setJMSPriority</p>
</div>
<div class="paragraph">
<p>(not for client use)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSMessageID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>setJMSMessageID</p>
</div>
<div class="paragraph">
<p>(not for client use)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSTimestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider send method</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>setJMSTimestamp</p>
</div>
<div class="paragraph">
<p>(not for client use)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSCorrelationID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setJMSCorrelationID,
setJMSCorrelationIDAsBytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSReplyTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setJMSReplyTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">setJMSType</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSRedelivered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jakarta Messaging provider prior to delivery</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>setJMSRedelivered</p>
</div>
<div class="paragraph">
<p>(not for client use)</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Message header fields that are defined as being set by the “client
application” in the above table may be set by the client application,
using the appropriate setter method, before the message is sent.</p>
</div>
<div class="paragraph">
<p>Message header fields that are defined as being set by the “Jakarta Messaging provider
send method” will be available on the sending client as well as on the
receiving client. If a message is sent synchronously (see section 7.2
“Synchronous send”) then these message header fields may be accessed on
the sending client when the send method returns. If a message is sent
asynchronously (see section 7.3 “Asynchronous send”) then these message
header fields may be accessed on the sending client only after the
completion listener has been invoked. The Jakarta Messaging provider sets these header
fields using the appropriate setter methods. These setter methods are
public to allow a Jakarta Messaging provider to set these fields when handling a
message whose implementation is not its own. Client applications should
not use these setter methods. Any values set by calling these methods
prior to sending a message will be ignored and overwritten.</p>
</div>
<div class="paragraph">
<p>A client application may specify the delivery mode, priority, time to
live and delivery delay of a message using appropriate methods on the
MessageProducer or JMSProducer object, but not by methods on the Message
object itself.</p>
</div>
<div class="paragraph">
<p>Message header fields that are defined as being set by the “Jakarta Messaging provider
prior to delivery” will be set by the Jakarta Messaging provider on the message
delivered to the receiving client.</p>
</div>
</div>
<div class="sect3">
<h4 id="overriding-message-header-fields"><a class="anchor" href="#overriding-message-header-fields"></a>3.4.12. Overriding message header fields</h4>
<div class="paragraph">
<p>Jakarta Messaging permits an administrator to configure Jakarta Messaging to override the client
specified values for delivery mode, priority, time to live and delivery
delay. If this is done, the JMSDeliveryMode, JMSPriority, JMSExpiration
and JMSDeliveryTime header field value must reflect the administratively
specified value.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not define specifically how an administrator overrides these
header field values. A Jakarta Messaging provider is not required to support this
administrative option.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsdeliverytime"><a class="anchor" href="#jmsdeliverytime"></a>3.4.13. JMSDeliveryTime</h4>
<div class="paragraph">
<p>When a message is sent, the Jakarta Messaging provider calculates its delivery time by
adding the delivery delay value specified on the send method to the time
the message was sent (for transacted sends, this is the time the client
sends the message, not the time the transaction is committed). It is
represented as a long value which is defined as the difference, measured
in milliseconds, between the delivery time time and midnight, January 1,
1970 UTC.</p>
</div>
<div class="paragraph">
<p>On return from the send method, the message’s JMSDeliveryTime header
field contains this value. When a message is received its
JMSDeliveryTime header field contains this same value.</p>
</div>
<div class="paragraph">
<p>A message&#8217;s delivery time is the earliest time when a provider may make
the message visible on the target destination and available for delivery
to consumers.</p>
</div>
<div class="paragraph">
<p>Clients must not receive messages before the delivery time has been
reached.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="message-properties"><a class="anchor" href="#message-properties"></a>3.5. Message properties</h3>
<div class="paragraph">
<p>In addition to the header fields defined here, the Message interface
contains a built-in facility for supporting property values. In effect,
this provides a mechanism for adding optional header fields to a
message.</p>
</div>
<div class="paragraph">
<p>Properties allow a client, via message selectors (see Section 3.8
“Message selection”), to have a Jakarta Messaging provider select messages on its
behalf using application-specific criteria.</p>
</div>
<div class="sect3">
<h4 id="property-names"><a class="anchor" href="#property-names"></a>3.5.1. Property names</h4>
<div class="paragraph">
<p>Property names must obey the rules for a message selector identifier.
See Section 3.8 “Message selection” for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="property-values"><a class="anchor" href="#property-values"></a>3.5.2. Property values</h4>
<div class="paragraph">
<p>Property values can be boolean, byte, short, int, long, float, double,
and String.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-properties"><a class="anchor" href="#using-properties"></a>3.5.3. Using properties</h4>
<div class="paragraph">
<p>Property values are set prior to sending a message. When a client
receives a message, its properties are in read-only mode. If a client
attempts to set properties at this point, a MessageNotWriteableException
is thrown.</p>
</div>
<div class="paragraph">
<p>A property value may duplicate a value in a message’s body or it may
not. Although Jakarta Messaging does not define a policy for what should or should not
be made a property, application developers should note that Jakarta Messaging
providers will likely handle data in a message’s body more efficiently
than data in a message’s properties. For best performance, applications
should only use message properties when they need to customize a
message’s header. The primary reason for doing this is to support
customized message selection.</p>
</div>
<div class="paragraph">
<p>See Section 3.8 “Message selection” for more information about Jakarta Messaging
message properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="property-value-conversion"><a class="anchor" href="#property-value-conversion"></a>3.5.4. Property value conversion</h4>
<div class="paragraph">
<p>Properties support the following conversion table. The marked cases must
be supported. The unmarked cases must throw the Jakarta Messaging
MessageFormatException. The String to numeric conversions must throw the
java.lang.NumberFormatException if the numeric’s valueOf method does not
accept the String value as a valid representation. Attempting to read a
null value as a Java primitive type must be treated as calling the
primitive’s corresponding valueOf(String) conversion method with a null
value.</p>
</div>
<div class="paragraph">
<p>A value set as the row type can be read as the column type.</p>
</div>
<div class="paragraph">
<p>Table 3‑2 Property value conversion</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">boolean</th>
<th class="tableblock halign-left valign-top">byte</th>
<th class="tableblock halign-left valign-top">short</th>
<th class="tableblock halign-left valign-top">int</th>
<th class="tableblock halign-left valign-top">long</th>
<th class="tableblock halign-left valign-top">float</th>
<th class="tableblock halign-left valign-top">double</th>
<th class="tableblock halign-left valign-top">String</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="property-values-as-objects"><a class="anchor" href="#property-values-as-objects"></a>3.5.5. Property values as objects</h4>
<div class="paragraph">
<p>In addition to the type-specific set/get methods for properties, Jakarta Messaging
provides the setObjectProperty/getObjectProperty methods. These support
the same set of property types using the objectified primitive values.
Their purpose is to allow the decision of property type to be made at
execution time rather than at compile time. They support the same
property value conversions.</p>
</div>
<div class="paragraph">
<p>The setObjectProperty method accepts values of Boolean, Byte, Short,
Integer, Long, Float, Double and String. An attempt to use any other
class must throw a Jakarta Messaging MessageFormatException.</p>
</div>
<div class="paragraph">
<p>The getObjectProperty method only returns values of null, Boolean, Byte,
Short, Integer, Long, Float, Double and String. A null value is returned
if a property by the specified name does not exist.</p>
</div>
</div>
<div class="sect3">
<h4 id="property-iteration"><a class="anchor" href="#property-iteration"></a>3.5.6. Property iteration</h4>
<div class="paragraph">
<p>The order of property values is not defined. To iterate through a
message’s property values, use getPropertyNames to retrieve a property
name enumeration and then use the various property get methods to
retrieve their values.</p>
</div>
<div class="paragraph">
<p>The getPropertyNames method does not return the names of the Jakarta Messaging
standard header fields.</p>
</div>
</div>
<div class="sect3">
<h4 id="clearing-a-messages-property-values"><a class="anchor" href="#clearing-a-messages-property-values"></a>3.5.7. Clearing a message’s property values</h4>
<div class="paragraph">
<p>A message’s properties are deleted by the clearProperties method. This
leaves the message with an empty set of properties. New property entries
can then be both created and read.</p>
</div>
<div class="paragraph">
<p>Clearing a message’s property entries does not clear the value of its
body.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not provide a way to remove an individual property entry once
it has been added to a message.</p>
</div>
</div>
<div class="sect3">
<h4 id="non-existent-properties"><a class="anchor" href="#non-existent-properties"></a>3.5.8. Non-existent properties</h4>
<div class="paragraph">
<p>Getting a property value for a name which has not been set is handled as
if the property exists with a null value.</p>
</div>
</div>
<div class="sect3">
<h4 id="jakarta-messaging-defined-properties"><a class="anchor" href="#jakarta-messaging-defined-properties"></a>3.5.9. Jakarta Messaging defined properties</h4>
<div class="paragraph">
<p>Jakarta Messaging reserves the 'JMSX' property name prefix for Jakarta Messaging defined properties.
The full set of these properties is provided in Table 3‑3. This table
defines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The name of the property</p>
</li>
<li>
<p>The type of the property (integer or string)</p>
</li>
<li>
<p>Whether support for the property is mandatory or optional.</p>
</li>
<li>
<p>Whether the property is set by the sending client, by the provider
when the message is sent, or by the provider when the message is
received.</p>
</li>
<li>
<p>The purpose of the property</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Table 3‑3 Jakarta Messaging defined properties</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Optional or mandatory</th>
<th class="tableblock halign-left valign-top">Set By</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXUserID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider on Send</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identity of the
user sending the message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXAppID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider on Send</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identity of the
application sending the message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXDeliveryCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider on Receive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of
message delivery attempts. See section 3.5.11
“JMSXDeliveryCount”.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXGroupID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identity of the message
group this message is part of</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXGroupSeq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sequence number of this
message within the group; the first message is 1, the second 2,&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXProducerTXID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider on Send</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction
identifier of the transaction within which this message was produced</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXConsumerTXID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider on Receive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The
transaction identifier of the transaction within which this message was
consumed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXRcvTimestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider on Receive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time Jakarta Messaging
delivered the message to the consumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMSXState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assume there exists a message warehouse that contains a separate copy of
each message sent to each consumer and that these copies exist from the
time the original message was sent.</p>
</div>
<div class="paragraph">
<p>Each copy’s state is one of: 1(waiting), 2(ready), 3(expired) or
4(retained)</p>
</div>
<div class="paragraph">
<p>Since state is of no interest to producers and consumers it is not
provided to either. It is only of relevance to messages looked up in a
warehouse and Jakarta Messaging provides no API for this.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>New Jakarta Messaging defined properties may be added in later versions of Jakarta Messaging.</p>
</div>
<div class="paragraph">
<p>The Enumeration ConnectionMetaData.getJMSXPropertyNames() method returns
the names of the JMSX properties supported by a connection.</p>
</div>
<div class="paragraph">
<p>JMSX properties may be referenced in message selectors whether or not
they are supported by a connection. If they are not present in a
message, they are treated like any other absent property. The effect of
setting a message selector on a property which is set by the provider on
receive is undefined.</p>
</div>
<div class="paragraph">
<p>The existence, in a particular message, of optional Jakarta Messaging defined
properties that are set by a Jakarta Messaging Provider depends on how a particular
provider controls use of the property. It may choose to include them in
some messages and omit them in others depending on administrative or
other criteria.</p>
</div>
<div class="paragraph">
<p>JMSX properties ‘set by provider on send’ are available to both the
producer and the consumers of the message. JSMX properties set by the
provider on receive are only available to the consumers. JMSXGroupID and
JMSXGroupSeq are standard properties clients should use if they want to
group messages. All providers must support them.</p>
</div>
<div class="paragraph">
<p>The case of these JMSX property names must be as defined in the table
above.</p>
</div>
<div class="paragraph">
<p>Unless specifically noted, the values and semantics of the JMSX
properties are undefined.</p>
</div>
</div>
<div class="sect3">
<h4 id="provider-specific-properties"><a class="anchor" href="#provider-specific-properties"></a>3.5.10. Provider-specific properties</h4>
<div class="paragraph">
<p>Jakarta Messaging reserves the ‘JMS_&lt;vendor_name&gt;’ property name prefix for
provider-specific properties. Each provider defines their own value of
<em>&lt;vendor_name&gt;</em>. This is the mechanism a Jakarta Messaging provider uses to make its
special per message services available to a Jakarta Messaging client.</p>
</div>
<div class="paragraph">
<p><em>The purpose of provider-specific properties is to provide special
features needed to support Jakarta Messaging use with provider-native clients. They
should not be used for Jakarta Messaging to Jakarta Messaging messaging.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="jmsxdeliverycount"><a class="anchor" href="#jmsxdeliverycount"></a>3.5.11. JMSXDeliveryCount</h4>
<div class="paragraph">
<p>When a client receives a message the mandatory Jakarta Messaging-defined message
property JMSXDeliveryCount will be set to the number of times the
message has been delivered. The first time a message is received it will
be set to 1, so a value of 2 or more means the message has been
redelivered.</p>
</div>
<div class="paragraph">
<p>If the JMSRedelivered message header value is set then the
JMSXDeliveryCount property must always be 2 or more. See section 3.4.7
“JMSRedelivered” for more information about the JMSRedelivered message
header,</p>
</div>
<div class="paragraph">
<p>The purpose of the JMSXDeliveryCount property is to allow consuming
applications to identify whether a particular message is being
repeatedly redelivered and take appropriate action.</p>
</div>
<div class="paragraph">
<p>The value of the JMSXDeliveryCount property is not guaranteed to be
exactly correct. The Jakarta Messaging provider is not expected to persist this value
to ensure that its value is not lost in the event of a failure.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="message-acknowledgment"><a class="anchor" href="#message-acknowledgment"></a>3.6. Message acknowledgment</h3>
<div class="paragraph">
<p>All Jakarta Messaging messages support the acknowledge method for use when a client
has specified that a Jakarta Messaging consumer’s messages are to be explicitly
acknowledged.</p>
</div>
<div class="paragraph">
<p>If a client uses automatic acknowledgment, calls to acknowledge are
ignored.</p>
</div>
<div class="paragraph">
<p>See Section 6.2.10 “Message acknowledgment” for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-message-interface"><a class="anchor" href="#the-message-interface"></a>3.7. The Message interface</h3>
<div class="paragraph">
<p>The Message interface is the root interface for all Jakarta Messaging messages. It
defines the Jakarta Messaging message header fields, property facility and the
acknowledge method used for all messages.</p>
</div>
</div>
<div class="sect2">
<h3 id="message-selection"><a class="anchor" href="#message-selection"></a>3.8. Message selection</h3>
<div class="paragraph">
<p>Many messaging applications need to filter and categorize the messages
they produce.</p>
</div>
<div class="paragraph">
<p>In the case where a message is sent to a single receiver, this can be
done with reasonable efficiency by putting the criteria in the message
and having the receiving client discard the ones it’s not interested in.</p>
</div>
<div class="paragraph">
<p>When a message is broadcast to many clients, it becomes useful to place
the criteria into the message header so that it is visible to the Jakarta Messaging
provider. This allows the provider to handle much of the filtering and
routing work that would otherwise need to be done by the application.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging provides a facility that allows clients to delegate message
selection to their Jakarta Messaging provider. This simplifies the work of the client
and allows Jakarta Messaging providers to eliminate the time and bandwidth they would
otherwise waste sending messages to clients that don’t need them.</p>
</div>
<div class="paragraph">
<p>Clients attach application-specific selection criteria to messages using
message properties. Clients specify message selection criteria using Jakarta Messaging
<em>message selector</em> expressions.</p>
</div>
<div class="sect3">
<h4 id="message-selector"><a class="anchor" href="#message-selector"></a>3.8.1. Message selector</h4>
<div class="paragraph">
<p>A Jakarta Messaging message selector allows a client to specify, by message header,
the messages it’s interested in. Only messages whose headers and
properties match the selector are delivered. The semantics of <em>not
delivered</em> differ a bit depending on the MessageConsumer being used. See
section 4.1.2 “Queue semantics” and 4.2.2 “Topic semantics” for more
details.</p>
</div>
<div class="paragraph">
<p>Message selectors cannot reference message body values.</p>
</div>
<div class="paragraph">
<p>A message selector matches a message when the selector evaluates to true
when the message’s header field and property values are substituted for
their corresponding identifiers in the selector.</p>
</div>
<div class="sect4">
<h5 id="message-selector-syntax"><a class="anchor" href="#message-selector-syntax"></a>3.8.1.1. Message selector syntax</h5>
<div class="paragraph">
<p>A message selector is a String whose syntax is based on a subset of the
SQL92<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>
conditional expression syntax.</p>
</div>
<div class="paragraph">
<p>If the value of a message selector is an empty string, the value is
treated as a null and indicates that there is no message selector for
the message consumer.</p>
</div>
<div class="paragraph">
<p>The order of evaluation of a message selector is from left to right
within precedence level. Parentheses can be used to change this order.</p>
</div>
<div class="paragraph">
<p>Predefined selector literals and operator names are written here in
upper case; however, they are case insensitive.</p>
</div>
<div class="paragraph">
<p>A selector can contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Literals:</p>
<div class="ulist">
<ul>
<li>
<p>A string literal is enclosed in single quotes, with an included
single quote represented by doubled single quote; for example, 'literal'
and 'literal''s'. Like Java String literals, these use the Unicode
character encoding.</p>
</li>
<li>
<p>An exact numeric literal is a numeric value without a decimal point,
such as 57, -957, +62; numbers in the range of Java long are supported.
Exact numeric literals use the Java integer literal syntax.</p>
</li>
<li>
<p>An approximate numeric literal is a numeric value in scientific
notation, such as 7E3 and -57.9E2, or a numeric value with a decimal,
such as 7., -95.7, and +6.2; numbers in the range of Java double are
supported. Approximate literals use the Java floating-point literal
syntax.</p>
</li>
<li>
<p>The boolean literals TRUE and FALSE.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Identifiers:</p>
<div class="ulist">
<ul>
<li>
<p>An identifier is an unlimited-length character sequence that must
begin with a Java identifier start character; all following characters
must be Java identifier part characters. An identifier start character
is any character for which the method Character.isJavaIdentifierStart
returns true. This includes '_' and '$'. An identifier part character is
any character for which the method Character.isJavaIdentifierPart
returns true.</p>
</li>
<li>
<p>Identifiers cannot be the names NULL, TRUE, or FALSE.</p>
</li>
<li>
<p>Identifiers cannot be NOT, AND, OR, BETWEEN, LIKE, IN, IS, or ESCAPE.</p>
</li>
<li>
<p>Identifiers are either header field references or property
references. The type of a property value in a message selector
corresponds to the type used to set the property. If a property that
does not exist in a message is referenced, its value is NULL. The
semantics of evaluating NULL values in a selector are described in
Section 3.8.1.2 “Null values”.</p>
</li>
<li>
<p>The conversions that apply to the get methods for properties do not
apply when a property is used in a message selector expression. For
example, suppose you set a property as a string value, as in the
following:</p>
<div class="paragraph">
<p>myMessage.setStringProperty("NumberOfOrders", "2");</p>
</div>
<div class="paragraph">
<p>The following expression in a message selector would evaluate to false,
because a string cannot be used in an arithmetic expression:</p>
</div>
<div class="paragraph">
<p>"NumberOfOrders &gt; 1"</p>
</div>
</li>
<li>
<p>Identifiers are case sensitive.</p>
</li>
<li>
<p>Message header field references are restricted to JMSDeliveryMode,
JMSPriority, JMSMessageID, JMSTimestamp, JMSCorrelationID, and JMSType.
JMSMessageID, JMSCorrelationID, and JMSType values may be null and if so
are treated as a NULL value.</p>
</li>
<li>
<p>Any name beginning with 'JMSX' is a Jakarta Messaging defined property name.</p>
</li>
<li>
<p>Any name beginning with 'JMS_' is a provider-specific property name.</p>
</li>
<li>
<p>Any name that does not begin with 'JMS' is an application-specific
property name.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Whitespace is the same as that defined for Java: space, horizontal
tab, form feed and line terminator.</p>
</li>
<li>
<p>Expressions:</p>
<div class="ulist">
<ul>
<li>
<p>A selector is a conditional expression; a selector that evaluates to
true matches; a selector that evaluates to false or unknown does not
match.</p>
</li>
<li>
<p>Arithmetic expressions are composed of themselves, arithmetic
operations, identifiers with numeric values, and numeric literals.</p>
</li>
<li>
<p>Conditional expressions are composed of themselves, comparison
operations, logical operations, identifiers with boolean values, and
boolean literals.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Standard bracketing () for ordering expression evaluation is
supported.</p>
</li>
<li>
<p>Logical operators in precedence order: NOT, AND, OR</p>
</li>
<li>
<p>Comparison operators: =, &gt;, &gt;=, &lt;, &#8656;, &lt;&gt; (not equal)</p>
<div class="ulist">
<ul>
<li>
<p>Only like type values can be compared. One exception is that it is
valid to compare exact numeric values and approximate numeric values
(the type conversion required is defined by the rules of Java numeric
promotion). If the comparison of non-like type values is attempted, the
value of the operation is false. If either of the type values evaluates
to NULL, the value of the expression is unknown.</p>
</li>
<li>
<p>String and Boolean comparison is restricted to = and &lt;&gt;. Two strings
are equal if and only if they contain the same sequence of characters.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Arithmetic operators in precedence order:</p>
<div class="ulist">
<ul>
<li>
<p>+, - (unary)</p>
</li>
<li>
<p>*, / (multiplication and division)</p>
</li>
<li>
<p>+, - (addition and subtraction)</p>
</li>
<li>
<p>Arithmetic operations must use Java numeric promotion.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>arithmetic-expr1</em> [NOT] BETWEEN <em>arithmetic-expr2</em> and
<em>arithmetic-expr3</em> (comparison operator)</p>
<div class="ulist">
<ul>
<li>
<p>"age BETWEEN 15 AND 19" is equivalent to "age &gt;= 15 AND age &#8656; 19"</p>
</li>
<li>
<p>"age NOT BETWEEN 15 AND 19" is equivalent to "age &lt; 15 OR age &gt; 19"</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>identifier</em> [NOT] IN (<em>string-literal1</em>, <em>string-literal2</em>,&#8230;&#8203;)
(comparison operator where <em>identifier</em> has a String or NULL value).</p>
<div class="ulist">
<ul>
<li>
<p>"Country IN ('UK', 'US', 'France')" is true for 'UK' and false for
'Peru'; it is equivalent to the expression (Country = 'UK') OR (Country
= 'US') OR (Country = 'France')</p>
</li>
<li>
<p>Country NOT IN ('UK', 'US', 'France') is false for 'UK' and true for
'Peru'; it is equivalent to the expression "NOT Country = 'UK') OR (Country = 'US') OR (Country = 'France'"</p>
</li>
<li>
<p>If identifier of an IN or NOT IN operation is NULL, the value of the
operation is unknown.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>identifier</em> [NOT] LIKE <em>pattern-value</em> [ESCAPE <em>escape-character</em>]
(comparison operator, where <em>identifier</em> has a String value;
<em>pattern-value</em> is a string literal where '_' stands for any single
character; '%' stands for any sequence of characters, including the
empty sequence, and all other characters stand for themselves. The
optional <em>escape-character</em> is a single-character string literal whose
character is used to escape the special meaning of the '_' and '%' in
pattern-value.)</p>
<div class="ulist">
<ul>
<li>
<p>"phone LIKE '12%3'" is true for '123' or '12993' and false for '1234'</p>
</li>
<li>
<p>"word LIKE 'l_se'" is true for 'lose' and false for 'loose'</p>
</li>
<li>
<p>"underscored LIKE '_%' ESCAPE '\'" is true for '_foo' and false for
'bar'</p>
</li>
<li>
<p>"phone NOT LIKE '12%3'" is false for '123' and '12993' and true for
'1234'</p>
</li>
<li>
<p>If <em>identifier</em> of a LIKE or NOT LIKE operation is NULL, the value of
the operation is unknown.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>identifier</em> IS NULL (comparison operator that tests for a null header
field value or a missing property value)</p>
<div class="ulist">
<ul>
<li>
<p>"prop_name IS NULL"</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>identifier IS NOT NULL</em> (comparison operator that tests for the
existence of a non-null header field value or property value)</p>
<div class="ulist">
<ul>
<li>
<p>"prop_name IS NOT NULL"</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta Messaging providers are required to verify the syntactic correctness of a
message selector at the time it is presented. A method providing a
syntactically incorrect selector must result in a Jakarta Messaging
InvalidSelectorException. Jakarta Messaging providers may also optionally provide some
semantic checking at the time the selector is presented. Not all
semantic checking can be performed at the time a message selector is
presented, because property types are not known.</p>
</div>
<div class="paragraph">
<p>The following message selector selects messages with a message type of
<em>car</em> and color of <em>blue</em> and weight greater than 2500 lbs:</p>
</div>
<div class="paragraph">
<p>"JMSType = 'car' AND color = 'blue' AND weight &gt; 2500"</p>
</div>
</div>
<div class="sect4">
<h5 id="null-values"><a class="anchor" href="#null-values"></a>3.8.1.2. Null values</h5>
<div class="paragraph">
<p>As noted above, header fields and property values may be NULL. The
evaluation of selector expressions containing NULL values is defined by
SQL 92 NULL semantics. A brief description of these semantics is
provided here.</p>
</div>
<div class="paragraph">
<p>SQL treats a NULL value as unknown. Comparison or arithmetic with an
unknown value always yields an unknown value.</p>
</div>
<div class="paragraph">
<p>The IS NULL and IS NOT NULL operators convert an unknown header or
property value into the respective TRUE and FALSE values.</p>
</div>
<div class="paragraph">
<p>The boolean operators use three-valued logic as defined by the following
tables:</p>
</div>
<div class="paragraph">
<p>Table 3‑4 The definition of the AND operator</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">AND</th>
<th class="tableblock halign-left valign-top">T</th>
<th class="tableblock halign-left valign-top">F</th>
<th class="tableblock halign-left valign-top">U</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 3‑5 The definition of the OR operator</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">OR</th>
<th class="tableblock halign-left valign-top">T</th>
<th class="tableblock halign-left valign-top">F</th>
<th class="tableblock halign-left valign-top">U</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Table 3‑6 The definition of the NOT operator</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">NOT</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="special-notes"><a class="anchor" href="#special-notes"></a>3.8.1.3. Special notes</h5>
<div class="paragraph">
<p>When used in a message selector <em>JMSDeliveryMode</em> is treated as having
the values 'PERSISTENT' and 'NON_PERSISTENT'.</p>
</div>
<div class="paragraph">
<p>Date and time values should use the standard Java long millisecond
value. When a date or time literal is included in a message selector, it
should be an integer literal for a millisecond value. The standard way
to produce millisecond values is to use java.util.Calendar.</p>
</div>
<div class="paragraph">
<p>Although SQL supports fixed decimal comparison and arithmetic, Jakarta Messaging
message selectors do not. This is the reason for restricting exact
numeric literals to those without a decimal (and the addition of
numerics with a decimal as an alternate representation for approximate
numeric values).</p>
</div>
<div class="paragraph">
<p>SQL comments are not supported.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access-to-sent-messages"><a class="anchor" href="#access-to-sent-messages"></a>3.9. Access to sent messages</h3>
<div class="paragraph">
<p>After sending a message, a client may retain and modify it without
affecting the message that has been sent. The same message object may be
sent multiple times.</p>
</div>
<div class="paragraph">
<p>During the execution of its sending method, the message must not be
changed by the client. If it is modified, the result of the send is
undefined.</p>
</div>
</div>
<div class="sect2">
<h3 id="changing-the-value-of-a-received-message"><a class="anchor" href="#changing-the-value-of-a-received-message"></a>3.10. Changing the value of a received message</h3>
<div class="paragraph">
<p>When a message is received, its header field values can be changed;
however, its property entries and its body are read-only, as specified
in this chapter.</p>
</div>
<div class="paragraph">
<p>The rationale for the read-only restriction is that it gives Jakarta Messaging
Providers more freedom in how they implement the management of received
messages. For instance, they may return a message object that references
property entries and body values that reside in an internal message
buffer rather than being forced to make a copy.</p>
</div>
<div class="paragraph">
<p>A consumer can modify a received message after calling either the
clearBody or clearProperties method to make the body or properties
writable. If the consumer modifies a received message, and the message
is subsequently redelivered, the redelivered message must be the
original, unmodified message (except for headers and properties modified
by the Jakarta Messaging provider as a result of the redelivery, such as the
JMSRedelivered header and the JMSXDeliveryCount property).</p>
</div>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-message-body"><a class="anchor" href="#jakarta-messaging-message-body"></a>3.11. Jakarta Messaging message body</h3>
<div class="paragraph">
<p>Jakarta Messaging provides five forms of message body. Each form is defined by a
message interface:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>StreamMessage - a message whose body contains a stream of Java
primitive values. It is filled and read sequentially.</p>
</li>
<li>
<p>MapMessage - a message whose body contains a set of name-value pairs
where names are String objects and values are Java primitive types. The
entries can be accessed sequentially by enumerator or randomly by name.
The order of the entries is undefined.</p>
</li>
<li>
<p>TextMessage - a message whose body contains a java.lang.String. The
inclusion of this message type is based on our presumption that String
messages will be used extensively. One reason for this is that XML will
likely become a popular mechanism for representing the content of Jakarta Messaging
messages.</p>
</li>
<li>
<p>ObjectMessage - a message that contains a serializable Java object. If
a collection of Java objects is needed, one of the collection classes
provided in JDK 1.2 can be used.</p>
</li>
<li>
<p>BytesMessage - a message that contains a stream of uninterpreted
bytes. This message type is for literally encoding a body to match an
existing message format. In many cases, it will be possible to use one
of the other, self-defining, message types instead. <em>Although Jakarta Messaging allows
the use of message properties with byte messages it is typically not
done since the inclusion of properties may affect the format.</em></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="clearing-a-message-body"><a class="anchor" href="#clearing-a-message-body"></a>3.11.1. Clearing a message body</h4>
<div class="paragraph">
<p>The clearBody method of Message resets the value of the message body to
the ‘empty’ initial message value as set by the message type’s create
method provided by Session. Clearing a message’s body does not clear its
property entries.</p>
</div>
</div>
<div class="sect3">
<h4 id="read-only-message-body"><a class="anchor" href="#read-only-message-body"></a>3.11.2. Read-only message body</h4>
<div class="paragraph">
<p>When a message is received, its body is read only. If an attempt is made
to change the body a MessageNotWriteableException must be thrown. If its
body is subsequently cleared, the body is in the same state as an empty
body in a newly created message.</p>
</div>
</div>
<div class="sect3">
<h4 id="conversions-provided-by-streammessage-and-mapmessage"><a class="anchor" href="#conversions-provided-by-streammessage-and-mapmessage"></a>3.11.3. Conversions provided by StreamMessage and MapMessage</h4>
<div class="paragraph">
<p>Both StreamMessage and MapMessage support the same set of primitive data
types.</p>
</div>
<div class="paragraph">
<p>The types can be read or written explicitly using methods for each type.
They may also be read or written generically as objects. For instance, a
call to MapMessage.setInt("foo", 6) is equivalent to
MapMessage.setObject("foo", new Integer(6)). Both forms are provided
because the explicit form is convenient for static programming and the
object form is needed when types are not known at compile time.</p>
</div>
<div class="paragraph">
<p>Both StreamMessage and MapMessage support the following conversion
table. The marked cases must be supported. The unmarked cases must throw
a Jakarta Messaging MessageFormatException. The String to numeric conversions must
throw a java.lang.NumberFormatException if the numeric’s valueOf()
method does not accept the String value as a valid representation.</p>
</div>
<div class="paragraph">
<p>StreamMessage and MapMessage must implement the String to boolean
conversion as specified by the valueOf(String) method of Boolean as
defined by the Java language.</p>
</div>
<div class="paragraph">
<p>Attempting to read a null value as a Java primitive type must be treated
as calling the primitive’s corresponding valueOf(String) conversion
method with a null value. Since char does not support a String
conversion, attempting to read a null value as a char must throw
NullPointerException.</p>
</div>
<div class="paragraph">
<p>Getting a MapMessage field for a field name that has not been set is
handled as if the field exists with a null value.</p>
</div>
<div class="paragraph">
<p>If a read method of StreamMessage or BytesMessage throws a
MessageFormatException or NumberFormatException, the current position of
the read pointer must not be incremented. A subsequent read must be
capable of recovering from the exception by rereading the data as a
different type.</p>
</div>
<div class="paragraph">
<p>A value written as the row type can be read as the column type</p>
</div>
<div class="paragraph">
<p>Table 3‑7 Conversions for StreamMessage and MapMessage</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.091%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">boolean</th>
<th class="tableblock halign-left valign-top">byte</th>
<th class="tableblock halign-left valign-top">short</th>
<th class="tableblock halign-left valign-top">char</th>
<th class="tableblock halign-left valign-top">int</th>
<th class="tableblock halign-left valign-top">long</th>
<th class="tableblock halign-left valign-top">float</th>
<th class="tableblock halign-left valign-top">double</th>
<th class="tableblock halign-left valign-top">String</th>
<th class="tableblock halign-left valign-top">byte[]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">char</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte[]</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="messages-for-non-jakarta-messaging-clients"><a class="anchor" href="#messages-for-non-jakarta-messaging-clients"></a>3.11.4. Messages for non-Jakarta Messaging clients</h4>
<div class="paragraph">
<p>A number of enterprise messaging systems support some form of
self-defining stream and/or map native message type. Although clients
could use BytesMessage to construct native messages of this form, Jakarta Messaging
provides the StreamMessage and MapMessage types as a more convenient
API.</p>
</div>
<div class="paragraph">
<p>For instance, when a client is using a Jakarta Messaging provider that supports a
native map message; and, it wishes to send a map message that can be
read by both Jakarta Messaging and native clients, it uses a MapMessage. When the
message is sent, the provider translates it into its native form. Native
clients can then receive it. If a Jakarta Messaging provider receives it, the provider
translates it back into a MapMessage.</p>
</div>
<div class="paragraph">
<p>Even when a new Jakarta Messaging application with newly defined messages is written,
the application may choose to use StreamMessage and MapMessage to ensure
that later, non-Jakarta Messaging clients will be able to read them.</p>
</div>
<div class="paragraph">
<p>If a Jakarta Messaging client sends a StreamMessage or MapMessage, it must be
translated by a receiving Jakarta Messaging provider into an equivalent StreamMessage
or MapMessage. When passed between Jakarta Messaging clients, a message must always
retain its full form. For instance, a message sent as MapMessage must
not arrive at a Jakarta Messaging client as a BytesMessage.</p>
</div>
<div class="paragraph">
<p>If a Jakarta Messaging provider receives a message created by a native client, the
provider should do its best to transform it into the ‘best’ Jakarta Messaging message
type. For instance, if it is a native stream message it should be
transformed into a StreamMessage. If this is not possible, the provider
is always able to transform it into a BytesMessage.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="provider-implementations-of-jakarta-messaging-message-interfaces"><a class="anchor" href="#provider-implementations-of-jakarta-messaging-message-interfaces"></a>3.12. Provider implementations of Jakarta Messaging message interfaces</h3>
<div class="paragraph">
<p>Jakarta Messaging provides a set of message interfaces that define the Jakarta Messaging message
model. It does not provide implementations of these interfaces.</p>
</div>
<div class="paragraph">
<p>Each Jakarta Messaging provider provides its own implementation of its Session’s
message creation methods. This allows a provider to use message
implementations that are tailored to its needs.</p>
</div>
<div class="paragraph">
<p>A provider must be prepared to accept, from a client, a message whose
implementation is <em>not</em> one of its own. A message with a ‘foreign’
implementation may not be handled as efficiently as a provider’s own
implementation; however, it must be handled.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging message interfaces provide write/set methods for setting object
values in a message body and message properties. All of these methods
must be implemented to copy their input objects into the message. The
value of an input object is allowed to be null and will return null when
accessed. One exception to this is that BytesMessage does not support
the concept of a null stream and attempting to write a null into it must
throw java.lang.NullPointerException.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging message interfaces provide read/get methods for accessing
objects in a message body and message properties. All of these methods
must be implemented to return a copy of the accessed message objects.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="messaging-domains"><a class="anchor" href="#messaging-domains"></a>4. Messaging domains</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jakarta Messaging supports two styles of messaging:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>point-to-point (PTP) messaging using <em>queues</em></p>
</li>
<li>
<p>publish-and-subscribe (pub/sub)messaging using <em>topics</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-point-to-point-model"><a class="anchor" href="#jakarta-messaging-point-to-point-model"></a>4.1. Jakarta Messaging point-to-point model</h3>
<div class="sect3">
<h4 id="overview-2"><a class="anchor" href="#overview-2"></a>4.1.1. Overview</h4>
<div class="paragraph">
<p>Point-to-point systems are about working with queues of messages. They
are point-to-point in that a client sends a message to a specific queue.
Some PTP systems blur the distinction between PTP and pub/sub by
providing system clients that automatically distribute messages.</p>
</div>
<div class="paragraph">
<p>It is common for a client to have all its messages delivered to a single
queue.</p>
</div>
<div class="paragraph">
<p>Like any generic mailbox, a queue can contain a mixture of messages.
And, like real mailboxes, creating and maintaining each queue is
somewhat costly. Most queues are created administratively and are
treated as static resources by their clients.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging PTP model defines how a client works with queues: how it finds
them, how it sends messages to them, and how it receives messages from
them.</p>
</div>
</div>
<div class="sect3">
<h4 id="queue-semantics"><a class="anchor" href="#queue-semantics"></a>4.1.2. Queue semantics</h4>
<div class="paragraph">
<p>When point-to-point messaging is being used, an application sends
messages to a <em>queue</em>.</p>
</div>
<div class="paragraph">
<p>An application may consume messages from the queue by creating a
consumer (a MessageConsumer, JMSConsumer or QueueReceiver object) on
that queue. A consumer may be used to consume messages either
synchronously or asynchronously.</p>
</div>
<div class="paragraph">
<p>A queue may have more than one consumer. Each message in the queue is
delivered to only one consumer.</p>
</div>
<div class="paragraph">
<p>A consumer may be configured to use a message selector. In this case
only messages whose properties match the message selector will be
delivered to the consumer. Messages which are not selected remain on the
queue or are delivered to another consumer.</p>
</div>
<div class="paragraph">
<p>The order in which an individual consumer receives messages is described
in section 6.2.9 “Message order” below.</p>
</div>
<div class="paragraph">
<p>By definition, if a consumer uses a message selector, or there are other
consumers on the same queue, then a consumer may not receive all the
messages on the queue. However those messages that are delivered to the
consumer will be delivered in the order defined in section 6.2.9.</p>
</div>
<div class="paragraph">
<p>Apart from the requirements of any message selectors, Jakarta Messaging does not
define how messages are distributed between multiple consumers on the
same queue.</p>
</div>
</div>
<div class="sect3">
<h4 id="queue-management"><a class="anchor" href="#queue-management"></a>4.1.3. Queue management</h4>
<div class="paragraph">
<p>Jakarta Messaging does not define facilities for creating, administering, or deleting
long-lived queues (it does provide such a mechanism for temporary
queues). Since most clients use statically defined queues this is not a
problem.</p>
</div>
</div>
<div class="sect3">
<h4 id="queue"><a class="anchor" href="#queue"></a>4.1.4. Queue</h4>
<div class="paragraph">
<p>A Queue object encapsulates a provider-specific queue name. It is the
way a client specifies the identity of a queue to Jakarta Messaging methods.</p>
</div>
<div class="paragraph">
<p>The actual length of time messages are held by a queue and the
consequences of resource overflow are not defined by Jakarta Messaging.</p>
</div>
<div class="paragraph">
<p>See chapter 5 “Administered objects” for more information about Jakarta Messaging
Destination objects.</p>
</div>
</div>
<div class="sect3">
<h4 id="temporaryqueue"><a class="anchor" href="#temporaryqueue"></a>4.1.5. TemporaryQueue</h4>
<div class="paragraph">
<p>A TemporaryQueue is a unique Queue object created for the duration of a
connection. It is a system-defined queue that can only be consumed by
the connection that created it.</p>
</div>
<div class="paragraph">
<p>See Section 6.2.2 “Creating temporary destinations” for more
information.</p>
</div>
</div>
<div class="sect3">
<h4 id="queuebrowser"><a class="anchor" href="#queuebrowser"></a>4.1.6. QueueBrowser</h4>
<div class="paragraph">
<p>A client uses a QueueBrowser to look at messages on a queue without
removing them. A QueueBrowser can be created from a JMSContext, Session
or QueueSession.</p>
</div>
<div class="paragraph">
<p>The browse methods return a java.util.Enumeration that is used to scan
the queue’s messages. It may be an enumeration of the entire content of
a queue, or it may contain only the messages matching a message
selector.</p>
</div>
<div class="paragraph">
<p>Messages may be arriving and expiring while the scan is done. Jakarta Messaging does
not require the content of an enumeration to be a static snapshot of
queue content. Whether these changes are visible or not depends on the
Jakarta Messaging provider.</p>
</div>
<div class="paragraph">
<p>A message must not be returned by a QueueBrowser before its delivery
time has been reached.</p>
</div>
</div>
<div class="sect3">
<h4 id="queuerequestor"><a class="anchor" href="#queuerequestor"></a>4.1.7. QueueRequestor</h4>
<div class="paragraph">
<p>The legacy domain-specific API for point-to-point messaging provides a
QueueRequestor helper class to simplify making service requests.</p>
</div>
<div class="paragraph">
<p>The QueueRequestor constructor is given a non-transacted QueueSession
and a destination queue. It creates a TemporaryQueue for the responses
and provides a request method that sends the request message and waits
for its reply.</p>
</div>
<div class="paragraph">
<p>This is a very basic request/reply abstraction which assumes the session
is non-transacted with a delivery mode of either AUTO_ACKNOWLEDGE or
DUPS_OK_ACKNOWLEDGE. It is expected that most applications will create
less basic implementations.</p>
</div>
<div class="paragraph">
<p>There is no equivalent to this class for the classic or simplified APIs.
Applications using these APIs are expected to create their own
implementations.</p>
</div>
</div>
<div class="sect3">
<h4 id="reliability"><a class="anchor" href="#reliability"></a>4.1.8. Reliability</h4>
<div class="paragraph">
<p>A queue is typically created by an administrator and exists for a long
time. It is always available to hold messages sent to it, whether or not
the client that consumes its messages is active. For this reason, a
client does not have to take any special precautions to ensure it does
not miss messages.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-publishsubscribe-model"><a class="anchor" href="#jakarta-messaging-publishsubscribe-model"></a>4.2. Jakarta Messaging publish/subscribe model</h3>
<div class="sect3">
<h4 id="overview-3"><a class="anchor" href="#overview-3"></a>4.2.1. Overview</h4>
<div class="paragraph">
<p>The Jakarta Messaging pub/sub model defines how Jakarta Messaging clients publish messages to, and
subscribe to messages from, a well-known node in a content-based
hierarchy. Jakarta Messaging calls these nodes <em>topics</em>.</p>
</div>
<div class="paragraph">
<p>In pub/sub messaging, the term <em>publish is sometimes used to refer to
the act of sending messages to a topic instead of the more generic terms
send or produce.</em></p>
</div>
<div class="paragraph">
<p><em>The term subscribe is used to refer to the act of</em> registering an
interest <em>in a topic. This creates a subscription from which a client
consumes or receives messages.</em></p>
</div>
<div class="paragraph">
<p>A topic can be thought of as a mini message broker that gathers and
distributes messages addressed to it. By relying on the topic as an
intermediary, message publishers are kept independent of subscribers and
vice versa. The topic automatically adapts as both publishers and
subscribers come and go.</p>
</div>
</div>
<div class="sect3">
<h4 id="topic-semantics"><a class="anchor" href="#topic-semantics"></a>4.2.2. Topic semantics</h4>
<div class="paragraph">
<p>When pub/sub messaging is being used, an application sends messages to a
<em>topic</em>.</p>
</div>
<div class="paragraph">
<p>An application consumes messages from a topic by creating a
<em>subscription</em> on that topic, and creating a consumer (a
MessageConsumer, JMSConsumer or TopicSubscriber object) on that
subscription.</p>
</div>
<div class="paragraph">
<p>A subscription may be thought of as an entity within the Jakarta Messaging provider
itself whereas a consumer is a Jakarta Messaging object within the application.</p>
</div>
<div class="paragraph">
<p>A subscription will receive a copy of every message that is sent to the
topic after the subscription is created, except if a message selector is
specified. If a message selector is specified then only those messages
whose properties match the message selector will be added to the
subscription.</p>
</div>
<div class="paragraph">
<p>Each copy of the message is treated as a completely separate message.
Work done on one copy has no effect on any other; acknowledging one does
not acknowledge any other; one message may be delivered immediately,
while another waits for its consumer to process messages ahead of it.</p>
</div>
<div class="paragraph">
<p>Some subscriptions are restricted to a single consumer. In this case all
the messages in the subscription are delivered to that consumer. Some
subscriptions allow multiple consumers. In this case each message in the
subscription is delivered to only one consumer. Jakarta Messaging does not define how
messages are distributed between multiple consumers on the same
subscription.</p>
</div>
<div class="paragraph">
<p>The order in which messages are delivered to a consumer is described in
section 6.2.10 “Message order” below. By definition, if a subscription
uses a message selector, or there are other consumers on the same
subscription, then a consumer may not receive all the messages sent to
the topic. However those messages that are delivered to the consumer
will be delivered in the order defined in section 6.2.10.</p>
</div>
<div class="paragraph">
<p>Subscriptions may be <em>durable</em> or <em>non-durable</em>.</p>
</div>
<div class="paragraph">
<p>A <em>non-durable subscription</em> only exists for as long as there is an
active consumer on the subscription. This means that any messages sent
to the topic will only be added to the subscription whilst a consumer
exists and is not closed.</p>
</div>
<div class="paragraph">
<p>A non-durable subscription may be either <em>unshared</em> or <em>shared</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <em>unshared non-durable subscription</em> does not have a name and may
have only a single consumer object associated with it. It is created
automatically when the consumer object is created. It is not persisted
and is deleted automatically when the consumer object is closed. See
section 8.3.1 “Unshared non-durable subscriptions” .</p>
</li>
<li>
<p>A <em>shared non-durable subscription</em> is identified by name and an
optional client identifier, and may have several consumer objects
consuming messages from it. It is created automatically when the first
consumer object is created. It is not persisted and is deleted
automatically when the last consumer object is closed. See section 8.3.2
“Shared non-durable subscriptions” below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the cost of higher overhead, a subscription may be <em>durable</em>. A
<em>durable subscription</em> is persisted and continues to accumulate messages
until explicitly deleted, even if there are no consumer objects
consuming messages from it.</p>
</div>
<div class="paragraph">
<p>A durable subscription has a unique identity that is retained by Jakarta Messaging.
Subsequent consumer objects can resume the subscription in the state it
was left by the prior consumer. If there are no active consumers on a
durable subscription, Jakarta Messaging retains the subscription’s messages until they
are consumed or until they expire.</p>
</div>
<div class="paragraph">
<p>A durable subscription may also be either <em>unshared</em> or <em>shared</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <em>unshared durable subscription</em> is identified by name and client
identifier (which must be set) and may have only a single consumer
object associated with it. See section 8.3.3 “Unshared durable
subscriptions”</p>
</li>
<li>
<p>A <em>shared durable subscription</em> is identified by name and an optional
client identifier, and may have several consumer objects consuming
messages from it. See section 8.3.4 “Shared durable subscriptions”
below.</p>
<div class="paragraph">
<p>A durable subscription which exists but which does not currently have a
non-closed consumer object associated with it is described as being
<em>inactive</em>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>When an unshared non-durable or durable subscription is created, the
noLocal parameter may be specified. The effect of setting this parameter
is defined in sections 8.3.1 “Unshared non-durable subscriptions” and 8.3.3
“Unshared durable subscriptions” below.</p>
</div>
</div>
<div class="sect3">
<h4 id="pubsub-latency"><a class="anchor" href="#pubsub-latency"></a>4.2.3. Pub/sub latency</h4>
<div class="paragraph">
<p>Since there is typically some latency in all pub/sub systems, the exact
messages seen by a subscriber may vary depending on how quickly a Jakarta Messaging
provider propagates the existence of a new subscriber and the length of
time a provider retains messages in transit.</p>
</div>
<div class="paragraph">
<p>For instance, some messages from a distant publisher may be missed
because it may take a second for the existence of a new subscriber to be
propagated system wide. When a new subscriber is created, it may receive
messages sent earlier because a provider may still have them available.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not define the exact semantics that apply during the interval
when a pub/sub provider is adjusting to a new client. Jakarta Messaging semantics only
apply once the provider has reached a ‘steady state’ with respect to a
new client.</p>
</div>
</div>
<div class="sect3">
<h4 id="subscription-name-characters-and-length"><a class="anchor" href="#subscription-name-characters-and-length"></a>4.2.4. Subscription name characters and length</h4>
<div class="paragraph">
<p>The Jakarta Messaging provider must allow a durable or non-durable subscription name
to contain the following characters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java letters</p>
</li>
<li>
<p>Java digits</p>
</li>
<li>
<p>Underscore (_)</p>
</li>
<li>
<p>Dot (.)</p>
</li>
<li>
<p>Minus (-)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta Messaging providers may support additional characters to these, but
applications which use them may not be portable.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging provider must allow a durable or non-durable subscription name
to have up to 128 characters.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging providers may support names longer than this, but applications which
use longer names may not be portable.</p>
</div>
</div>
<div class="sect3">
<h4 id="topic-management"><a class="anchor" href="#topic-management"></a>4.2.5. Topic management</h4>
<div class="paragraph">
<p>Some products require that topics be statically defined with associated
authorization control lists, and so on; others don’t even have the
concept of topic administration.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not define facilities for creating, administering, or deleting
topics.</p>
</div>
<div class="paragraph">
<p>A special type of topic called a <em>temporary topic</em> is provided for
creating a <em>topic</em> that is unique to a <em>particular connection</em>. See
Section 4.2.7 “Temporary topics” for more details.</p>
</div>
</div>
<div class="sect3">
<h4 id="topic"><a class="anchor" href="#topic"></a>4.2.6. Topic</h4>
<div class="paragraph">
<p>A Topic object encapsulates a provider-specific topic name. It is the
way a client specifies the identity of a topic to Jakarta Messaging methods.</p>
</div>
<div class="paragraph">
<p>Many Jakarta Messaging providers group topics into hierarchies and provide various
options for subscribing to parts of the hierarchy. Jakarta Messaging places no
restriction on what a Topic object represents. It might be a leaf in a
topic hierarchy or it might be a larger part of the hierarchy (for
subscribing to a general class of information).</p>
</div>
<div class="paragraph">
<p>The organization of topics and the granularity of subscriptions to them
is an important part of a pub/sub application’s architecture. Jakarta Messaging does
not specify a policy for how this should be done. If an application
takes advantage of a provider-specific topic grouping mechanism, it
should document this. If the application is installed using a different
provider, it is the job of the administrator to construct an equivalent
topic architecture and create equivalent Topic objects.</p>
</div>
</div>
<div class="sect3">
<h4 id="temporary-topics"><a class="anchor" href="#temporary-topics"></a>4.2.7. Temporary topics</h4>
<div class="paragraph">
<p>A TemporaryTopic is a unique Topic object created for the duration of a
JMSContext, Connection or TopicConnection. It is a system defined Topic
whose messages may be consumed only by the connection that created it.</p>
</div>
<div class="paragraph">
<p>By definition, it does not make sense to create a durable subscription
to a temporary topic. To do this is a programming error that may or may
not be detected by a Jakarta Messaging Provider.</p>
</div>
<div class="paragraph">
<p>See Section 6.2.2 “Creating temporary destinations” for more
information.</p>
</div>
</div>
<div class="sect3">
<h4 id="recovery-and-redelivery"><a class="anchor" href="#recovery-and-redelivery"></a>4.2.8. Recovery and redelivery</h4>
<div class="paragraph">
<p>Unacknowledged messages of a nondurable subscriber should be able to be
recovered for the lifetime of that nondurable subscriber. When a
nondurable subscriber terminates, messages waiting for it will probably
be dropped by the Jakarta Messaging provider whether or not they have been
acknowledged.</p>
</div>
<div class="paragraph">
<p>Only durable subscriptions are reliably able to recover unacknowledged
messages.</p>
</div>
<div class="paragraph">
<p>Sending a message to a topic with a delivery mode of PERSISTENT does not
alter this model of recovery and redelivery. To ensure delivery, a
durable subscription should be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="administering-subscriptions"><a class="anchor" href="#administering-subscriptions"></a>4.2.9. Administering subscriptions</h4>
<div class="paragraph">
<p>Ideally, publishers and subscribers are dynamically registered by a
provider when they are created. From the client viewpoint this is always
the case. From the administrator’s viewpoint, other tasks may be needed
to support the creation of publishers and subscribers.</p>
</div>
<div class="paragraph">
<p>The amount of resources allocated for message storage and the
consequences of resource overflow are not defined by Jakarta Messaging.</p>
</div>
<div class="paragraph">
<p>All Jakarta Messaging providers must be able to run Jakarta Messaging applications that dynamically
create and delete durable subscriptions. Some Jakarta Messaging providers may, in
addition, provide facilities to administratively configure durable
subscriptions. If a durable subscription has been administratively
configured, it is valid for it to silently override the subscription
specified by the client.</p>
</div>
</div>
<div class="sect3">
<h4 id="topicrequestor"><a class="anchor" href="#topicrequestor"></a>4.2.10. TopicRequestor</h4>
<div class="paragraph">
<p>The legacy domain-specific API for pub/sub messaging provides a
TopicRequestor helper class to simplify making service requests.</p>
</div>
<div class="paragraph">
<p>The TopicRequestor constructor is given a non-transacted TopicSession
and a destination topic. It creates a TemporaryTopic for the responses
and provides a request method that sends the request message and waits
for its reply.</p>
</div>
<div class="paragraph">
<p>This is a very basic request/reply abstraction which assumes the session
is non-transacted with a delivery mode of either AUTO_ACKNOWLEDGE or
DUPS_OK_ACKNOWLEDGE. It is expected that most applications will create
less basic implementations.</p>
</div>
<div class="paragraph">
<p>There is no equivalent to this class for the classic or simplified APIs.
Applications using these APIs are expected to create their own
implementations.</p>
</div>
</div>
<div class="sect3">
<h4 id="reliability-2"><a class="anchor" href="#reliability-2"></a>4.2.11. Reliability</h4>
<div class="paragraph">
<p>When all messages for a topic must be received, a durable subscriber
should be used. Jakarta Messaging ensures that messages published while a durable
subscriber is inactive are retained by Jakarta Messaging and delivered when the
subscriber subsequently becomes active.</p>
</div>
<div class="paragraph">
<p>Non-durable subscribers should only be used when missed messages are
tolerable.</p>
</div>
<div class="paragraph">
<p>Table 4‑1 Pub/sub reliability</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">How Published</th>
<th class="tableblock halign-left valign-top">Non-Durable Subscriber</th>
<th class="tableblock halign-left valign-top">Durable Subscriber</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NON_PERSISTENT</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>at-most-once</p>
</div>
<div class="paragraph">
<p>(missed if inactive)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">at-most-once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PERSISTENT</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>once-and-only-once</p>
</div>
<div class="paragraph">
<p>(missed if inactive)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">once-and-only-once</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="administered-objects"><a class="anchor" href="#administered-objects"></a>5. Administered objects</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-4"><a class="anchor" href="#overview-4"></a>5.1. Overview</h3>
<div class="paragraph">
<p>Jakarta Messaging administered objects are objects containing Jakarta Messaging configuration
information that are created by a Jakarta Messaging administrator and later used by
Jakarta Messaging clients. They make it practical to administer Jakarta Messaging applications in
the enterprise.</p>
</div>
<div class="paragraph">
<p><em>Although the interfaces for administered objects do not explicitly
depend on JNDI, Jakarta Messaging establishes the convention that Jakarta Messaging clients find
them by looking them up in a namespace using JNDI.</em></p>
</div>
<div class="paragraph">
<p>An administrator can place an administered object anywhere in a
namespace. Jakarta Messaging does not define a naming policy.</p>
</div>
<div class="paragraph">
<p>This strategy of partitioning Jakarta Messaging and administration provides several
benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It hides provider-specific configuration details from Jakarta Messaging clients.</p>
</li>
<li>
<p>It abstracts Jakarta Messaging administrative information into Java objects that are
easily organized and administered from a common management console.</p>
</li>
<li>
<p>Since there will be JNDI providers for all popular naming services,
this means Jakarta Messaging providers can deliver one implementation of administered
objects that will run everywhere.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An administered object should not hold on to any remote resources. Its
lookup should not use remote resources other than those used by JNDI
itself.</p>
</div>
<div class="paragraph">
<p>Clients should think of administered objects as local Java objects.
Looking them up should not have any hidden side effects or use
surprising amounts of local resources.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging defines two administered objects, Destination and ConnectionFactory.</p>
</div>
<div class="paragraph">
<p>It is expected that Jakarta Messaging providers will provide the tools an
administrator needs to create and configure administered objects in a
JNDI namespace. Jakarta Messaging provider implementations of administered objects
should be both javax.naming.Referenceable and java.io.Serializable so
that they can be stored in all JNDI naming contexts. In addition, it is
recommended that these implementations follow the JavaBeans<sup>TM</sup> design
patterns.</p>
</div>
</div>
<div class="sect2">
<h3 id="destination"><a class="anchor" href="#destination"></a>5.2. Destination</h3>
<div class="paragraph">
<p>Jakarta Messaging does not define a standard address syntax. Although this was
considered, it was decided that the differences in address semantics
between existing enterprise messaging products was too wide to bridge
with a single syntax. Instead, Jakarta Messaging defines the Destination object which
encapsulates provider-specific addresses.</p>
</div>
<div class="paragraph">
<p>Since Destination is an administered object it may also contain
provider-specific configuration information in addition to its address.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging also supports a client’s use of provider-specific address names. See
Section 6.2.3 “Creating Destination objects” for more information.</p>
</div>
<div class="paragraph">
<p>Destination objects support concurrent use.</p>
</div>
</div>
<div class="sect2">
<h3 id="connection-factories"><a class="anchor" href="#connection-factories"></a>5.3. Connection factories</h3>
<div class="paragraph">
<p>A connection factory object encapsulates a set of connection
configuration parameters that has been defined by an administrator. A
client uses it to create a connection with a Jakarta Messaging provider.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The classic API uses connection factories of type ConnectionFactory.</p>
</li>
<li>
<p>The simplified API uses connection factories of type
ConnectionFactory.</p>
</li>
<li>
<p>The domain-specific API for point-to-point messaging uses connection
factories of type QueueConnectionFactory.</p>
</li>
<li>
<p>The domain-specified API for pub-sub messaging uses connection
factories of type TopicConnectionFactory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Connection factory objects support concurrent use.</p>
</div>
<div class="paragraph">
<p>For information on how to use a connection factory to create a
connection, see section 6.1 “Connections”.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connecting-to-a-jakarta-messaging-provider"><a class="anchor" href="#connecting-to-a-jakarta-messaging-provider"></a>6. Connecting to a Jakarta Messaging provider</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="connections"><a class="anchor" href="#connections"></a>6.1. Connections</h3>
<div class="paragraph">
<p>Jakarta Messaging uses the term <em>connection</em> to refer to a client’s active connection
to its Jakarta Messaging provider. It will typically allocate provider resources
outside the Java virtual machine.</p>
</div>
<div class="paragraph">
<p>A connection is created using a connection factory. For more information
about connection factories see section 5.3 “Connection factories”.</p>
</div>
<div class="paragraph">
<p>A connection may be used to create one or more sessions. Sessions are
used to send and consume messages and are described in section 6.2
“Sessions”.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API a connection is represented by a Connection object
and is created using one of the following methods on ConnectionFactory:</p>
<div class="paragraph">
<p>createConnection()</p>
</div>
<div class="paragraph">
<p>createConnection(String userName, String password)</p>
</div>
<div class="paragraph">
<p>A Connection object may be used to create separate Session objects.
Connection objects support concurrent use.</p>
</div>
</li>
<li>
<p>In the simplified API a connection is represented by a JMSContext
object and is created using one of the following methods on
ConnectionFactory.</p>
<div class="paragraph">
<p>createContext()</p>
</div>
<div class="paragraph">
<p>createContext(int sessionMode)</p>
</div>
<div class="paragraph">
<p>createContext(String userName, String password)</p>
</div>
<div class="paragraph">
<p>createContext(String userName, String password, int sessionMode)</p>
</div>
<div class="paragraph">
<p>A JMSContext represents both a connection and a session. Although a
connection supports concurrent use, a session does not. JMSContext
objects therefore do not support concurrent use</p>
</div>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging a connection
is represented by a QueueConnection object and is created using one of
the following methods on QueueConnectionFactory:</p>
<div class="paragraph">
<p>createQueueConnection()</p>
</div>
<div class="paragraph">
<p>createQueueConnection(String userName, String password)</p>
</div>
<div class="paragraph">
<p>A QueueConnection object may be used to create separate QueueSession
objects. QueueConnection objects support concurrent use.</p>
</div>
</li>
<li>
<p>In the domain-specified API for pub-sub messaging a connection is
represented by a TopicConnection object and is created using one of the
following methods on TopicConnectionFactory:</p>
<div class="paragraph">
<p>createTopicConnection()</p>
</div>
<div class="paragraph">
<p>createTopicConnection(String userName, String password)</p>
</div>
<div class="paragraph">
<p>A TopicConnection object may be used to create separate TopicSession
objects. TopicConnection objects support concurrent use.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A connection serves several purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It encapsulates an open connection with a Jakarta Messaging provider. It typically
represents an open TCP/IP socket between a client and a provider’s
service daemon.</p>
</li>
<li>
<p>Its creation is when client authentication takes place.</p>
</li>
<li>
<p>It can specify a unique client identifier.</p>
</li>
<li>
<p>It provides ConnectionMetaData.</p>
</li>
<li>
<p>It supports an optional ExceptionListener.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Due to the authentication and communication setup done when a connection
is created, the objects that represent a connection are relatively
heavyweight Jakarta Messaging objects. Most clients will do all their messaging with a
single connection. Other more advanced applications may use several
connections. Jakarta Messaging does not architect a reason for using multiple
connections (other than when a client acts as a gateway between two
different providers); however, there may be operational reasons for
doing so.</p>
</div>
<div class="sect3">
<h4 id="authentication"><a class="anchor" href="#authentication"></a>6.1.1. Authentication</h4>
<div class="paragraph">
<p>When creating a connection, a client may specify its credentials as
name/password.</p>
</div>
<div class="paragraph">
<p>If no credentials are specified, the current thread’s credentials are
used. At this point, the JDK does not define the concept of a thread’s
default credentials; however, it is likely this will be defined in the
near future. For now, the identity of the user under which the Jakarta Messaging
client is running should be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="client-identifier"><a class="anchor" href="#client-identifier"></a>6.1.2. Client identifier</h4>
<div class="paragraph">
<p>The preferred way to assign a client’s client identifier is for it to be
configured in a client-specific ConnectionFactory and transparently
assigned to the connection it creates. Alternatively, a client can set a
connection’s client identifier using a provider-specific value. The
facility to explicitly set a connection’s client identifier is not a
mechanism for overriding the identifier that has been administratively
configured. It is provided for the case where no administratively
specified identifier exists. If one does exist, an attempt to change it
by setting it must throw an IllegalStateException.</p>
</div>
<div class="paragraph">
<p>An application may explicitly set a connection&#8217;s client identifier by
calling the setClientID method on the Connection, JMSContext,
QueueConnection or TopicConnection object.</p>
</div>
<div class="paragraph">
<p>If a client explicitly sets a connection&#8217;s client identifier it must do
so immediately after creating the Connection, JMSContext,
QueueConnection or TopicConnection and before any other action on this
object taken. After this point, setting the client identifier is a
programming error that should throw an IllegalStateException.</p>
</div>
<div class="paragraph">
<p>The purpose of client identifier is to associate a connection and its
objects with a state maintained on behalf of the client by a provider.
By definition, the client state identified by a client identifier can be
‘in use’ by only one client at a time. A Jakarta Messaging provider must prevent
concurrently executing clients from using it.</p>
</div>
<div class="paragraph">
<p>This prevention may take the form of a JMSException being thrown when
such use is attempted; it may result in the offending client being
blocked; or some other solution. A Jakarta Messaging provider must ensure that such
attempted ‘sharing’ of an individual client state does not result in
messages being lost or doubly processed.</p>
</div>
<div class="paragraph">
<p>The only use of a client identifier defined by Jakarta Messaging is its mandatory use
in identifying an unshared durable subscription or its optional use in
identifying a shared durable or non-durable subscription.</p>
</div>
</div>
<div class="sect3">
<h4 id="connection-setup"><a class="anchor" href="#connection-setup"></a>6.1.3. Connection setup</h4>
<div class="ulist">
<ul>
<li>
<p>In the classic API, a Jakarta Messaging client typically creates a Connection, one
or more Session objects, and a number of MessageProducer and
MessageConsumer objects.</p>
</li>
<li>
<p>In the simplified API, a Jakarta Messaging client typically creates a JMSContext and
a number of JMSProducer and JMSConsumer objects.</p>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging, a Jakarta Messaging client
typically creates a QueueConnection, one or more QueueSession objects,
and a number of QueueSender and QueueReceiver objects.</p>
</li>
<li>
<p>In the domain-specific API for pub/sub messaging, a Jakarta Messaging client
typically creates a TopicConnection, one or more TopicSession objects,
and a number of TopicPublisher and TopicSubscriber objects.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="starting-a-connection"><a class="anchor" href="#starting-a-connection"></a>6.1.4. Starting a connection</h4>
<div class="paragraph">
<p>When a Connection, JMSContext, QueueConnection or TopicConnection is
created, it is in <em>stopped</em> mode. That means that no messages are being
delivered to it.</p>
</div>
<div class="paragraph">
<p>In the case of a Connection, QueueConnection or TopicConnection it is
typical to leave the connection in stopped mode until setup is complete.
At that point the start method is called and messages begin arriving at
the connection’s consumers. This setup convention minimizes any client
confusion that may result from asynchronous message delivery while the
client is still in the process of setting itself up.</p>
</div>
<div class="paragraph">
<p>These objects can be started immediately and the setup can be done
afterwards. Clients that do this must be prepared to handle asynchronous
message delivery while they are still in the process of setting up.</p>
</div>
<div class="paragraph">
<p>In the case of a JMSContext the connection is started automatically when
the first consumer is created. Applications may disable this behaviour
by calling setAutoStart(false) and then calling start() explicitly when
required.</p>
</div>
<div class="paragraph">
<p>Whether a connection is started or stopped only affects the use of a
connection to <em>receive</em> messages. It has no effect on the use of the
connection to <em>send</em> messages. A connection may be used to send messages
irrespective of whether it is started or stopped.</p>
</div>
<div class="paragraph">
<p>It is important to note that clients rely on the fact that no messages
will be delivered to a consumer until its connection has been started.
Jakarta Messaging Providers must ensure that this is the case.</p>
</div>
</div>
<div class="sect3">
<h4 id="pausing-delivery-of-incoming-messages"><a class="anchor" href="#pausing-delivery-of-incoming-messages"></a>6.1.5. Pausing delivery of incoming messages</h4>
<div class="paragraph">
<p>A connection’s delivery of incoming messages can be temporarily stopped
using its stop method. It can be restarted using its start method. When
stopped, delivery to all the connection’s consumer objects is inhibited:
synchronous receives block, and messages are not delivered to any
message listeners.</p>
</div>
<div class="paragraph">
<p>Stopping a connection has no affect on its ability to send messages.
Stopping a stopped connection and starting a started connection are
ignored.</p>
</div>
<div class="paragraph">
<p>A stop method call must not return until delivery of messages has
paused. This means a client can rely on the fact that none of its
message listeners will be called and all threads of control waiting for
receive to return will not return with a message until the connection is
restarted. The receive timers for a stopped connection continue to
advance so receives may time out and return a null message while the
connection is stopped.</p>
</div>
<div class="paragraph">
<p>If any message listeners are running when stop is invoked, stop must
wait until all of them have returned before it may return. While these
message listeners are completing, they must have the full services of
the connection available to them.</p>
</div>
<div class="paragraph">
<p>If the stop method is called from a message listener on its own
Connection or JMSContext, or on a JMSContext that uses the same
connection, then it will either fail and throw a
jakarta.jms.IllegalStateException (in the case of<br>
Connection) or jakarta.jms.IllegalStateRuntimeException (in the case of
JMSContext), or it will succeed and stop the connection, blocking until
all other message listeners that may have been running have returned.</p>
</div>
<div class="paragraph">
<p>Since two alternative behaviors are permitted in this case,
applications<br>
should avoid calling stop from a message listener on its own Connection
or JMSContext, or on a JMSContext that uses the same connection, because
this is not portable.</p>
</div>
</div>
<div class="sect3">
<h4 id="connectionmetadata"><a class="anchor" href="#connectionmetadata"></a>6.1.6. ConnectionMetaData</h4>
<div class="paragraph">
<p>All the objects that represent a connection provide a ConnectionMetaData
object. This object provides the latest version of Jakarta Messaging supported by the
provider as well as the provider’s product name and version.</p>
</div>
<div class="paragraph">
<p>It also provides a list of the Jakarta Messaging defined property names supported by
the connection.</p>
</div>
</div>
<div class="sect3">
<h4 id="exceptionlistener"><a class="anchor" href="#exceptionlistener"></a>6.1.7. ExceptionListener</h4>
<div class="paragraph">
<p>If a Jakarta Messaging provider detects a problem with a connection, it will inform
the connection’s ExceptionListener, if one has been registered. To
retrieve an ExceptionListener, the Jakarta Messaging provider calls the connection’s
getExceptionListener() method. This method returns the ExceptionListener
for the connection. If no ExceptionListener is registered, the value
null is returned<em>.</em> The connection can then use the listener by
calling the listener’s onException() method, passing it a JMSException
describing the problem.</p>
</div>
<div class="paragraph">
<p>This allows a client to be asynchronously notified of a problem. Some
connections only consume messages, so they would have no other way to
learn their connection has failed.</p>
</div>
<div class="paragraph">
<p>A Connection serializes execution of its ExceptionListener.This means
that if a connection encounters multiple problems and therefore needs to
call its ExceptionListener multiple times, then it will only invoke
onException from one thread at a time. However if the same
ExceptionListener is registered with multiple connections then it is
undefined whether these connections could call onException from
different threads simultaneously.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider should attempt to resolve connection problems itself
prior to notifying the client of them.</p>
</div>
<div class="paragraph">
<p>The exceptions delivered to ExceptionListener are those that have no
other place to be reported. If an exception is thrown on a Jakarta Messaging call it,
by definition, must not be delivered to an ExceptionListener (in other
words, ExceptionListener is not for the purpose of monitoring all
exceptions thrown by a connection).</p>
</div>
<div class="paragraph">
<p>There is no restriction on the use of the Jakarta Messaging API by the listener&#8217;s
onException method. However since that method will only be called when
there is a serious problem with the connection, any attempt to use that
connection may fail and cause exceptions.</p>
</div>
</div>
<div class="sect3">
<h4 id="closing-a-connection"><a class="anchor" href="#closing-a-connection"></a>6.1.8. Closing a connection</h4>
<div class="paragraph">
<p>Since a provider typically allocates significant resources outside the
JVM on behalf of a connection, clients should close them when they are
not needed. Relying on garbage collection to eventually reclaim these
resources may not be timely enough.</p>
</div>
<div class="paragraph">
<p>A close terminates all pending message receives on the connection’s
session’s consumers. The receives may return with a message or null
depending on whether there was a message or not available at the time of
the close.</p>
</div>
<div class="paragraph">
<p>Note that in this case, the message consumer will likely get an
exception if it is attempting to use the facilities of the now closed
connection while processing its last message. A developer must take this
‘last message’ case into account when writing a message consumer. It
bears repeating that the message consumer cannot rely on a null return
value to indicate this ‘last message’ case.</p>
</div>
<div class="paragraph">
<p>If one or more of the connection’s session’s message listeners is
processing a message at the point when connection close is invoked, all
the facilities of the connection and its sessions must remain available
to those listeners until they return control to the Jakarta Messaging provider.</p>
</div>
<div class="paragraph">
<p>When connection close is invoked it should not return until message
processing has been shut down in an orderly fashion. This means that all
message listeners that may have been running have returned, and that all
pending receives have returned.</p>
</div>
<div class="paragraph">
<p>Closing a Connection, QueueConnection or TopicConnection closes its
constituent sessions, producers, consumers or queue browsers. The
connection close is sufficient to signal the Jakarta Messaging provider that all
resources for the connection should be released.</p>
</div>
<div class="paragraph">
<p>Closing a JMSContext closes the underlying session and any underlying
producers and consumers. If there are no other active (not closed)
JMSContext objects using the underlying connection then this method also
closes the underlying connection.</p>
</div>
<div class="paragraph">
<p>If a message listener attempts to close its own connection (either by
calling<br>
close on a Connection object or by calling close on a JMSContext object
which has no other active JMSContext objects using the underlying
connection) then it will either fail and throw a
jakarta.jms.IllegalStateException (in the case of Connection) or
jakarta.jms.IllegalStateRuntimeException (in the case of JMSContext), or
it will succeed and close the connection, blocking until all other
message listeners that may have been running have returned, and all
pending receive calls have completed. If close succeeds and the
acknowledge mode of the session is set to AUTO_ACKNOWLEDGE, the current
message will still be acknowledged automatically when the onMessage call
completes.</p>
</div>
<div class="paragraph">
<p>Since two alternative behaviors are permitted in this case,
applications<br>
should avoid calling close from a message listener on its own
Connection<br>
or JMSContext because this is not portable.</p>
</div>
<div class="paragraph">
<p>The Connection, JMSContext, QueueConnection and TopicConnection
interfaces all extend the java.lang.AutoCloseable interface. This means
that applications which create these objects in a try-with-resources
statement do not need to call the close method when they are no longer
needed. Instead these objects will be closed automatically at the end of
the statement. The use of a try-with-resources statement also simplifies
the handling of any exceptions thrown by the close method. See the Java
Tutorials<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup> for more information
about the try-with-resources statement.</p>
</div>
<div class="paragraph">
<p>Closing a connection must rollback the transactions in progress on its
transacted sessions<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>. Closing a
connection does NOT force an acknowledge of client acknowledged
sessions. Invoking the acknowledge method of a received message from a
closed connection’s sessions must throw an IllegalStateException. These
semantics ensure that closing a connection does not cause messages to be
lost for queues and durable subscriptions which require reliable
processing by a subsequent execution of their Jakarta Messaging client.</p>
</div>
<div class="paragraph">
<p>Once a connection has been closed, an attempt to use it or its sessions
or their message consumers and producers must throw an
IllegalStateException (calls to the close method of these objects must
be ignored). It is valid to continue to use message objects created or
received via the connection with the exception of a received message’s
acknowledge method.</p>
</div>
<div class="paragraph">
<p>Closing a closed connection must NOT throw an exception.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sessions"><a class="anchor" href="#sessions"></a>6.2. Sessions</h3>
<div class="paragraph">
<p>In Jakarta Messaging a <em>session</em> is a single-threaded context<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup> for producing and consuming messages.
Although it may allocate provider resources outside the Java virtual
machine, it is considered a lightweight Jakarta Messaging object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API a session is represented by a Session object and is
creating using one of the following methods on Connection:</p>
<div class="paragraph">
<p>createSession()</p>
</div>
<div class="paragraph">
<p>createSession(boolean transacted, int acknowledgeMode)</p>
</div>
<div class="paragraph">
<p>createSession(int sessionMode)</p>
</div>
</li>
<li>
<p>In the simplified API a connection and a session are represented by a
single JMSContext object. When a JMSContext is created the underlying
session is created automatically.</p>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging a session is
represented by a QueueSession object and is created using the following
method on QueueConnection:</p>
<div class="paragraph">
<p>createQueueSession(boolean transacted, int acknowledgeMode)</p>
</div>
</li>
<li>
<p>In the domain-specified API for pub-sub messaging a session is
represented by a TopicSession object and is created using the following
method on TopicConnection:</p>
<div class="paragraph">
<p>createTopicSession(boolean transacted, int acknowledgeMode)</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A session serves several purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is a factory for producer and consumer objects. These are described
in chapter 7 “Sending messages” and chapter 8 “Receiving messages”.</p>
</li>
<li>
<p>It is a factory for TemporaryTopic and TemporaryQueue objects.</p>
</li>
<li>
<p>It provides a way to create Queue or Topic objects for those clients
that need to dynamically manipulate provider-specific destination names.</p>
</li>
<li>
<p>It supplies provider-optimized message factories.</p>
</li>
<li>
<p>It supports a single series of transactions that combine work spanning
this session’s producers and consumers into atomic units.</p>
</li>
<li>
<p>It defines a serial order for the messages it consumes and the
messages it produces.</p>
</li>
<li>
<p>It retains messages it consumes until they have been acknowledged.</p>
</li>
<li>
<p>It serializes execution of MessageListener objects registered with it.</p>
</li>
<li>
<p>It is a factory for QueueBrowser objects.</p>
</li>
<li>
<p>It provides the unsubscribe method for deleting durable topic
subscriptions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there are messages that have been received from a queue but not
acknowledged when a session terminates, these messages must be retained
and redelivered when a consumer next accesses the queue.</p>
</div>
<div class="paragraph">
<p>If there are messages that have been received from a topic subscription
but not acknowledged when a session terminates, a durable subscriber
must retain and redeliver them; a nondurable subscriber need not do so.</p>
</div>
<div class="sect3">
<h4 id="producer-and-consumer-creation"><a class="anchor" href="#producer-and-consumer-creation"></a>6.2.1. Producer and consumer creation</h4>
<div class="paragraph">
<p>A session can create and service multiple producer and consumer objects.
See section 7 “Sending messages” and section 8 “Receiving messages” for
information on their creation and use.</p>
</div>
<div class="paragraph">
<p>Although a session may create multiple producers and consumers, they are
restricted to serial use. In effect, only a single logical thread of
control can use them. This is explained in more detail later.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-temporary-destinations"><a class="anchor" href="#creating-temporary-destinations"></a>6.2.2. Creating temporary destinations</h4>
<div class="paragraph">
<p>Although sessions are used to create temporary destinations, this is
only for convenience. Their scope is actually the entire connection.
Their lifetime is that of their connection and any of the connection’s
sessions are allowed to create a consumer for them.</p>
</div>
<div class="paragraph">
<p>Temporary destinations (TemporaryQueue or TemporaryTopic objects) are
destinations that are system-generated uniquely for their connection.
Only their own connection is allowed to create consumer objects for
them.</p>
</div>
<div class="paragraph">
<p>One typical use for a temporary destination is as the JMSReplyTo
destination for service requests.</p>
</div>
<div class="paragraph">
<p>Each TemporaryQueue or TemporaryTopic object is unique. It cannot be
copied.</p>
</div>
<div class="paragraph">
<p>Since temporary destinations may allocate resources outside the JVM,
they should be deleted if they are no longer needed. They will be
automatically deleted when they are garbage collected or when their
connection is closed.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-destination-objects"><a class="anchor" href="#creating-destination-objects"></a>6.2.3. Creating Destination objects</h4>
<div class="paragraph">
<p>Most clients will use Destination objects that are Jakarta Messaging administered
objects that they have looked up via JNDI. This is the most portable
approach.</p>
</div>
<div class="paragraph">
<p>Some specialized clients may need to create Destination objects by
dynamically manufacturing one using a provider specific destination
name. Sessions provide a Jakarta Messaging provider-specific method for doing this.</p>
</div>
</div>
<div class="sect3">
<h4 id="optimized-message-implementations"><a class="anchor" href="#optimized-message-implementations"></a>6.2.4. Optimized message implementations</h4>
<div class="paragraph">
<p>A session provides the following methods to create messages:
createMessage, createBytesMessage, createMapMessage,
createObjectMessage, createStreamMessage and createTextMessage.</p>
</div>
<div class="paragraph">
<p>These methods allow the Jakarta Messaging provider to create message implementations
which are optimized for that particular provider and allow the provider
to minimize its overhead for handling messages.</p>
</div>
<div class="paragraph">
<p>However the fact that these methods are provided on a session does not
mean that messages must be sent using a message producer created from
the same session. Messages may be sent using any session, not just the
session used to create the message.</p>
</div>
<div class="paragraph">
<p>Furthermore, sessions must be capable of sending all Jakarta Messaging messages
regardless of how they may be implemented. See section 3.12 “Provider
implementations of Jakarta Messaging message interfaces”.</p>
</div>
</div>
<div class="sect3">
<h4 id="threading-restrictions-on-a-session"><a class="anchor" href="#threading-restrictions-on-a-session"></a>6.2.5. Threading restrictions on a session</h4>
<div class="paragraph">
<p>Sessions are designed for serial use by one thread at a time. The only
exception to this occurs during the orderly shutdown of the session or
its connection. See Section 6.1.8 “Closing a connection” and Section
6.2.15 “Closing a session” for further details.</p>
</div>
<div class="paragraph">
<p>One typical use is to have a thread call receive() on a consumer, which
blocks until a message arrives. The thread may then use one or more of
the session’s producer objects.</p>
</div>
<div class="paragraph">
<p>It is erroneous for a client to use a thread of control to attempt to
synchronously receive a message if there is already a client thread of
control waiting to receive a message in the same session.</p>
</div>
<div class="paragraph">
<p>Another typical use is to have one thread set up a session by creating
its producers and one or more asynchronous consumers. In this case, the
message producers are exclusively for the use of the consumers’ message
listeners. Since the session serializes execution of its consumers’
message listeners, they can safely share the resources of their session.</p>
</div>
<div class="paragraph">
<p>If a connection is left in stopped mode while its sessions are being set
up, a client does not have to deal with messages arriving before the
client is fully prepared to handle them. This is the preferred strategy
because it eliminates the possibility of unanticipated conflicts between
setup and message processing. It is possible to create and set up a
session while a connection is receiving messages. In this case, more
care is required to ensure that a session’s message producers, message
consumers and message listeners are created in the right order. For
instance, a bad order may cause a MessageListener to use a producer
object that has yet to be created; or messages may arrive in the wrong
order due to the order in which MessageListener objects are registered.</p>
</div>
<div class="paragraph">
<p>If a client desires to have one thread producing messages while others
consume them, the client should use a separate session for its producing
thread.</p>
</div>
<div class="paragraph">
<p>Once a connection has been started, all its sessions with a registered
message listener are dedicated to the thread of control that delivers
messages to them. It is erroneous for client code to use such a session
from another thread of control. The only exception to this is the use of
the consumer, session or connection close method.</p>
</div>
<div class="paragraph">
<p>One consequence of the session’s single-thread-of-control restriction is
that a session with message listeners cannot also be used to
synchronously receive messages. Either the session is dedicated to the
thread of control used for delivery to message listeners, or it is
dedicated to a thread of control initiated by client code. It is
erroneous to attempt to combine both in the same session.</p>
</div>
<div class="paragraph">
<p>Another consequence is that a connection must be in stopped mode to set
up a session with more than one message listener. The reason is that
when a connection is actively delivering messages, once the first
message listener for a session has been registered, the session is now
controlled by the thread of control that delivers messages to it. At
this point a client thread of control cannot be used to further
configure the session.</p>
</div>
<div class="paragraph">
<p>It should be natural for most clients to partition their work into
sessions. This model allows clients to start simply and incrementally
add message processing complexity as their need for concurrency grows.</p>
</div>
<div class="paragraph">
<p>Since a JMSContext incorporates a session it is subject to the same
threading restrictions as a Session. For more information, and an
exception to this, see section 6.2.6 “Threading restrictions on a
JMSContext”.</p>
</div>
<div class="paragraph">
<p>Additional threading restrictions apply to applications which perform an
asynchronous send. See section 7.3 “Asynchronous send” and in particular
section 7.3.7 “Restrictions on threading”.</p>
</div>
</div>
<div class="sect3">
<h4 id="threading-restrictions-on-a-jmscontext"><a class="anchor" href="#threading-restrictions-on-a-jmscontext"></a>6.2.6. Threading restrictions on a JMSContext</h4>
<div class="paragraph">
<p>Since a JMSContext incorporates a session it is subject to the same
threading restrictions as a session. These are described in section
6.2.5 “Threading restrictions on a session” which explains how a session
may only be used by one thread at a time.</p>
</div>
<div class="paragraph">
<p>The JMSContext method createContext does not use its underlying session
and so is not subject to this threading restriction.</p>
</div>
<div class="paragraph">
<p>This restriction also does not apply to the close method on JMSContext
or JMSConsumer (since closing a session or consumer from another thread
is permitted).</p>
</div>
<div class="paragraph">
<p>By default, when createConsumer or createDurableConsumer is used to
create a JMSConsumer the connection will automatically be started. This
behaviour is described in section 6.1.4 “Starting a connection”. It
means that if setMessageListener is called to configure the asynchronous
delivery of messages then the JMSContext’s session will immediately
become dedicated to the thread of control that delivers messages to the
listener and the application must not subsequently call methods on the
JMSContext from another thread of control. However this restriction does
not apply to applications which call setMessageListener to set a second
or subsequent message listener. The Jakarta Messaging provider will be responsible for
ensuring that a second message listener may be safely configured even if
the underlying connection has been started.</p>
</div>
</div>
<div class="sect3">
<h4 id="transactions"><a class="anchor" href="#transactions"></a>6.2.7. Transactions</h4>
<div class="paragraph">
<p>A session may be optionally specified as <em>transacted</em>. Each transacted
session supports a single series of transactions. Each transaction
groups a set of produced messages and a set of consumed messages into an
atomic unit of work. In effect, transactions organize a session’s input
message stream and output message stream into a series of atomic units.
When a transaction commits, its atomic unit of input is acknowledged and
its associated atomic unit of output is sent. If a transaction rollback
is done, its produced messages are destroyed and its consumed messages
are automatically recovered. For more information on session recovery
see Section 6.2.10 “Message acknowledgment”.</p>
</div>
<div class="paragraph">
<p>A transaction is completed using either its session’s commit() or
rollback() method. The completion of a session’s current transaction
automatically begins the next. The result is that a transacted session
always has a current transaction within which its work is done.</p>
</div>
<div class="paragraph">
<p>JTS or some other transaction monitor facility may be used to combine a
session’s transaction with transactions on other resources (databases,
other Jakarta Messaging Sessions, etc.). Since Java distributed transactions are
controlled via the Jakarta Transactions transaction demarcation API, use of the session’s
commit and rollback methods in this context throws a Jakarta Messaging
TransactionInProgressException.</p>
</div>
</div>
<div class="sect3">
<h4 id="distributed-transactions"><a class="anchor" href="#distributed-transactions"></a>6.2.8. Distributed transactions</h4>
<div class="paragraph">
<p>Jakarta Messaging does not require that a provider support distributed transactions;
however, it does define that if a provider supplies this support it
should be done via the Java XAResource API.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider may also be a distributed transaction monitor. If it is,
it should provide control of the transaction via the Jakarta Transactions API.</p>
</div>
<div class="paragraph">
<p>Although it is possible for a Jakarta Messaging client to handle distributed
transactions directly, it is recommended that Jakarta Messaging clients avoid doing
this. Jakarta Messaging clients that use the XA-based interfaces described in Chapter
11 “Jakarta Messaging application server facilities” may not be portable across
different Jakarta Messaging implementations, because these interfaces are optional.
Support for Jakarta Transactions in Jakarta Messaging is targeted at systems vendors who will be
integrating Jakarta Messaging into their application server products. See Chapter 11
“Jakarta Messaging application server facilities” for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="message-order"><a class="anchor" href="#message-order"></a>6.2.9. Message order</h4>
<div class="paragraph">
<p>Jakarta Messaging clients need to understand when they can depend on message order and
when they cannot.</p>
</div>
<div class="sect4">
<h5 id="order-of-message-receipt"><a class="anchor" href="#order-of-message-receipt"></a>6.2.9.1. Order of message receipt</h5>
<div class="paragraph">
<p>Messages consumed by a session define a serial order. This order is
important because it defines the effect of message acknowledgment. See
Section 6.2.10 “Message acknowledgment” for more details. The messages
for each of a session’s consumers are interleaved in a session’s input
message stream.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging defines that messages sent by a session to a destination must be
received in the order in which they were sent (see Section 6.2.9.2
“Order of message sends” for a few qualifications). This defines a
partial ordering constraint on a session’s input message stream.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not define order of message receipt across destinations or
across a destination’s messages sent from multiple sessions. This aspect
of a session’s input message stream order is timing-dependent. It is not
under application control.</p>
</div>
</div>
<div class="sect4">
<h5 id="order-of-message-sends"><a class="anchor" href="#order-of-message-sends"></a>6.2.9.2. Order of message sends</h5>
<div class="paragraph">
<p>Although clients loosely view the messages they produce within a session
as forming a serial stream of sent messages, the total ordering of this
stream is not significant. The only ordering that is visible to
receiving clients is the order of messages a session sends to a
particular destination. Several things can affect this order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Messages of higher priority may jump ahead of previous lower-priority
messages.</p>
</li>
<li>
<p>Messages with a later delivery time may be delivered after messages
with an earlier delivery time.</p>
</li>
<li>
<p>A client may not receive a NON_PERSISTENT message due to a Jakarta Messaging
provider failure.</p>
</li>
<li>
<p>If both PERSISTENT and NON_PERSISTENT messages are sent to a
destination, order is only guaranteed within delivery mode. That is, a
later NON_PERSISTENT message may arrive ahead of an earlier PERSISTENT
message; however, it will never arrive ahead of an earlier
NON_PERSISTENT message with the same priority.</p>
</li>
<li>
<p>A client may use a transacted session to group its sent messages into
atomic units (the producer component of a Jakarta Messaging transaction). A
transaction’s order of messages to a particular destination is
significant. The order of sent messages across destinations is not
significant. See Section 6.2.7 “Transactions” for more information.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="message-acknowledgment-2"><a class="anchor" href="#message-acknowledgment-2"></a>6.2.10. Message acknowledgment</h4>
<div class="paragraph">
<p>If a session is transacted, message acknowledgment is handled
automatically by commit<em>,</em> and recovery is handled automatically by
rollback.</p>
</div>
<div class="paragraph">
<p>If a session is not transacted, there are three acknowledgment options
and recovery is handled manually:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DUPS_OK_ACKNOWLEDGE - This option instructs the session to lazily
acknowledge the delivery of messages. This is likely to result in the
delivery of some duplicate messages if Jakarta Messaging fails. It it should therefore
only be used by consumers that are tolerant of duplicate messages. Its
benefit is the reduction of session overhead achieved by minimizing the
work the session does to prevent duplicates.</p>
</li>
<li>
<p>AUTO_ACKNOWLEDGE - With this option, the session automatically
acknowledges a client’s receipt of a message when it has either
successfully returned from a call to receive or the message listener it
has called to process the message successfully returns.</p>
</li>
<li>
<p>CLIENT_ACKNOWLEDGE - With this option, a client acknowledges a message
by calling the message’s acknowledge method. Acknowledging a consumed
message automatically acknowledges the receipt of all messages that have
been delivered by its session.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When CLIENT_ACKNOWLEDGE mode is used, a client may build up a large
number of unacknowledged messages while attempting to process them. A
Jakarta Messaging provider should provide administrators with a way to limit client
over-run so that clients are not driven to resource exhaustion and
ensuing failure when some resource they are using is temporarily
blocked.</p>
</div>
<div class="paragraph">
<p>A session’s recover method is used to stop a session and restart it with
its first unacknowledged message. In effect, the session’s series of
delivered messages is reset to the point after its last acknowledged
message. The messages it now delivers may be different from those that
were originally delivered due to message expiration, the arrival of
higher-priority messages, or the delivery of messages which could not
previously be delivered as they had not reached their specified delivery
time.</p>
</div>
<div class="paragraph">
<p>A session must set the JMSRedelivered header and increment the
JMSXDeliveryCount property of messages it redelivers due to a recovery.</p>
</div>
</div>
<div class="sect3">
<h4 id="duplicate-delivery-of-messages"><a class="anchor" href="#duplicate-delivery-of-messages"></a>6.2.11. Duplicate delivery of messages</h4>
<div class="paragraph">
<p>A Jakarta Messaging provider must never deliver a second copy of an acknowledged
message.</p>
</div>
<div class="paragraph">
<p>When a client uses the AUTO_ACKNOWLEDGE mode, it is not in direct
control of message acknowledgment. Since such clients cannot know for
certain if a particular message has been acknowledged, they must be
prepared for redelivery of the last consumed message. This can be caused
by the client completing its work just prior to a failure that prevents
the message acknowledgment from occurring. Only a session’s last
consumed message is subject to this ambiguity. The JMSRedelivered
message header field must be set for a message redelivered under these
circumstances, and the JMSXDeliveryCount property must be incremented.</p>
</div>
</div>
<div class="sect3">
<h4 id="duplicate-production-of-messages"><a class="anchor" href="#duplicate-production-of-messages"></a>6.2.12. Duplicate production of messages</h4>
<div class="paragraph">
<p>Jakarta Messaging providers must never produce duplicate messages. This means that a
client that produces a message can rely on its Jakarta Messaging provider to ensure
that consumers of the message will receive it only once. No client error
can cause a provider to duplicate a message.</p>
</div>
<div class="paragraph">
<p>If a failure occurs between the time a client commits its work on a
Session and the commit method returns, the client cannot determine if
the transaction was committed or rolled back. The same ambiguity exists
when a failure occurs between the non-transactional send of a PERSISTENT
message and the return from the sending method.</p>
</div>
<div class="paragraph">
<p>It is up to a Jakarta Messaging application to deal with this ambiguity. In some
cases, this may cause a client to produce functionally duplicate
messages.</p>
</div>
<div class="paragraph">
<p>A message that is redelivered due to session recovery is not considered
a duplicate message.</p>
</div>
</div>
<div class="sect3">
<h4 id="serial-execution-of-client-code"><a class="anchor" href="#serial-execution-of-client-code"></a>6.2.13. Serial execution of client code</h4>
<div class="paragraph">
<p>Even though the Java language provides built-in support for
multithreading, writing multithreaded programs is still more difficult
than writing single-threaded ones.</p>
</div>
<div class="paragraph">
<p>For this reason, Jakarta Messaging does not cause concurrent execution of client code
unless a client explicitly requests it. One way this is done is to
define that a session serializes all asynchronous delivery of messages.</p>
</div>
<div class="paragraph">
<p>To receive messages asynchronously, a client creates a consumer object
(MessageConsumer, JMSConsumer, QueueReceiver or TopicConsumer) and uses
the setMessageListener method to register with it an object that
implements the Jakarta Messaging MessageListener interface. <em>In effect, a session uses
a single thread to run all its message listeners</em>. While the thread is
busy executing one listener, all other messages to be asynchronously
delivered to the session must wait.</p>
</div>
</div>
<div class="sect3">
<h4 id="concurrent-message-delivery"><a class="anchor" href="#concurrent-message-delivery"></a>6.2.14. Concurrent message delivery</h4>
<div class="paragraph">
<p>Clients that desire concurrent delivery can use multiple sessions. In
effect, each session’s listener thread runs concurrently. While a
listener on one session is executing, a listener on another session may
also be executing.</p>
</div>
</div>
<div class="sect3">
<h4 id="closing-a-session"><a class="anchor" href="#closing-a-session"></a>6.2.15. Closing a session</h4>
<div class="paragraph">
<p>Since a provider may allocate some resources on behalf of a session
outside the JVM, clients should close a session when it is not needed.
Relying on garbage collection to eventually reclaim these resources may
not be timely enough. The same is true for any producer and consumer
objects created by a session.</p>
</div>
<div class="paragraph">
<p>The close methods on Session, QueueSession and TopicSession allow a
session to be closed separately from the connection used to create it.</p>
</div>
<div class="paragraph">
<p>The close method on JMSContext closes the underlying session. If there
are no other active (not closed) JMSContext objects using the underlying
connection then it also closes the underlying connection.</p>
</div>
<div class="paragraph">
<p>Session close terminates all message processing on the session. It must
handle the shutdown of pending receives by the session’s consumers or a
running message listener as described in section 6.1.8 “Closing a
connection”.</p>
</div>
<div class="paragraph">
<p>Session close is the only session method that may be invoked from a
thread of control separate from the one which is currently controlling
the session.</p>
</div>
<div class="paragraph">
<p>When session close is invoked it should not return until its message
processing has been shut down in an orderly fashion. This means that
none of its message listeners are running, and that if there is a
pending receive, it has returned with either null or a message.</p>
</div>
<div class="paragraph">
<p>If a message listener attempts to close its own session (either by
calling<br>
close on a Session object or by calling close on a JMSContext object)<br>
then it will either fail and throw a jakarta.jms.IllegalStateException (in
the case of Session) or jakarta.jms.IllegalStateRuntimeException (in the
case of JMSContext), or it will succeed and close the session, blocking
until any pending receive call in progress has completed. If close
succeeds and the acknowledge mode of the session is set to
AUTO_ACKNOWLEDGE, the current message will still be acknowledged
automatically when the onMessage call completes.</p>
</div>
<div class="paragraph">
<p>Since two alternative behaviors are permitted in this case, applications
should avoid calling close from a message listener on its own Session or
JMSContext because this is not portable.</p>
</div>
<div class="paragraph">
<p>When a session is closed, there is no need to close its constituent
producers, consumers or queue browsers. The session close is sufficient
to signal the Jakarta Messaging provider that all resources for the session should be
released.</p>
</div>
<div class="paragraph">
<p>Note that closing a connection will cause any sessions created from it
to be closed, so, although a session should be closed when no longer
needed, there is no need to close a session immediately prior to closing
its connection.</p>
</div>
<div class="paragraph">
<p>The Session, JMSContext, QueueSession and TopicSession interfaces all
extend the java.lang.AutoCloseable interface. This means that
applications which create these objects in a try-with-resources
statement do not need to call the close method when they no longer
needed. Instead these objects will be closed automatically at the end of
the statement. The use of a try-with-resources statement also simplifies
the handling of any exceptions thrown by the close method.</p>
</div>
<div class="paragraph">
<p>Closing a transacted session must rollback its transaction in progress.
Closing a client-acknowledged session does NOT force an acknowledge.</p>
</div>
<div class="paragraph">
<p>Once a session has been closed, an attempt to use it or its consumers
and producers must throw an IllegalStateException (calls to the close
method of these objects must be ignored). It is valid to continue to use
message objects created or received via the session with the exception
of a received message’s acknowledge method.</p>
</div>
<div class="paragraph">
<p>Closing a closed session must NOT throw an exception.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sending-messages"><a class="anchor" href="#sending-messages"></a>7. Sending messages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="producers"><a class="anchor" href="#producers"></a>7.1. Producers</h3>
<div class="paragraph">
<p>A client application uses a <em>producer</em> to send messages to a
Destination.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API a producer is represented by a MessageProducer
object and is created using the method createProducer(Destination
destination)on Session. The destination parameter specifies the
destination to which the producer will send messages.</p>
<div class="paragraph">
<p>If destination is set to null then the destination must be specified on
every send operation. A typical use for this style of producer is to
send replies to requests using the request’s JMSReplyTo destination.</p>
</div>
</li>
<li>
<p>In the simplified API a producer is represented by a JMSProducer
object and is created using the method createProducer() on JMSContext.
The destination must be specified on every send operation.</p>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging a producer is
represented by a QueueSender object and is created using the method
createSender(Queue queue) on QueueSession. The queue parameter specifies
the queue to which the producer will send messages. If queue is set to
null then the queue must be specified on every send operation.</p>
</li>
<li>
<p>In the domain-specified API for pub-sub messaging a producer is
represented by a TopicPublisher object and is created using the method
createPublisher(Topic topic)on TopicSession. The topic parameter
specifies the topic to which the producer will send messages. If topic
is set to null then the topic must be specified on every send operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A producer may be used to send a message either synchronously or
asynchronously. For more details see sections 7.2 “Synchronous send” and
7.3 “Asynchronous send”.</p>
</div>
<div class="paragraph">
<p>Each time a client creates a producer, it defines a new sequence of
messages that have no ordering relationship with the messages it has
previously sent.</p>
</div>
</div>
<div class="sect2">
<h3 id="synchronous-send"><a class="anchor" href="#synchronous-send"></a>7.2. Synchronous send</h3>
<div class="ulist">
<ul>
<li>
<p>In the classic API the following methods on MessageProducer may be
used to send a message synchronously:</p>
<div class="listingblock">
<div class="content">
<pre>send(Message message)

send(Message message, int deliveryMode, int priority, long timeToLive)

send(Destination destination, Message message, int deliveryMode, int
priority, long timeToLive)

send(Destination destination, Message message)</pre>
</div>
</div>
</li>
<li>
<p>In the simplified API the following method on JMSProducer may be used
to send a message:</p>
<div class="listingblock">
<div class="content">
<pre>send(Destination destination, Message message)</pre>
</div>
</div>
<div class="paragraph">
<p>The following methods on JMSProducer allow the application to supply the
message body directly. The Jakarta Messaging provider automatically creates a message of the appropriate type before sending.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>send(Destination destination, String body)

send(Destination destination, Map&lt;String,Object&gt; body)

send(Destination destination, byte[] body)

send(Destination destination, Serializable body)

send(Destination destination, String body)</pre>
</div>
</div>
<div class="paragraph">
<p>All the send method on JMSProducer will send the message synchronously
unless the JMSProducer has been configured to perform an asynchronous
send.</p>
</div>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging the following
methods on QueueSender may be used to send a message synchronously:</p>
<div class="listingblock">
<div class="content">
<pre>send(Message message)

send(Message message, int deliveryMode, int priority, long timeToLive)

send(Queue queue, Message message)

send(Queue queue, Message message, int deliveryMode, int priority, long
timeToLive)</pre>
</div>
</div>
<div class="paragraph">
<p>These are in addition to the methods inherited from MessageProducer and
listed above.</p>
</div>
</li>
<li>
<p>In the domain-specific API for pub/sub messaging the following methods
on TopicPublisher may be used to send a message synchronously:</p>
<div class="listingblock">
<div class="content">
<pre>publish(Message message)

publish(Message message, int deliveryMode, int priority, long
timeToLive)

publish(Topic topic, Message message)

publish(Topic topic, Message message, int deliveryMode, int priority,
long timeToLive)</pre>
</div>
</div>
<div class="paragraph">
<p>These are in addition to the methods inherited from MessageProducer and
listed above.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These methods will block until the message has been sent. If necessary
the call will block until a confirmation message has been received back
from the Jakarta Messaging server.</p>
</div>
</div>
<div class="sect2">
<h3 id="asynchronous-send"><a class="anchor" href="#asynchronous-send"></a>7.3. Asynchronous send</h3>
<div class="paragraph">
<p>Clients may alternatively send a message asynchronously. This permits
the Jakarta Messaging provider to perform part of the work involved in sending the
message in a separate thread.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API the following methods on MessageProducer may be
used to send a message asynchronously</p>
<div class="listingblock">
<div class="content">
<pre>send(Message message, CompletionListener completionListener)

send(Message message, int deliveryMode, int priority, long timeToLive,
CompletionListener completionListener)

send(Destination destination, Message message, CompletionListener
completionListener)

send(Destination destination, Message message, int deliveryMode, int
priority, long timeToLive, CompletionListener completionListener)</pre>
</div>
</div>
</li>
<li>
<p>In the simplified API a JMSProducer may be used to send a message
asynchronously by using calling the method <code>setAsync(CompletionListener
completionListener)</code> on the JMSProducer prior to calling one of the
normal send methods listed in section 7.2 “Synchronous send”.</p>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging a QueueSender
may be used to send a message asynchronously using any of the methods
inherited from MessageProducer and listed above.</p>
</li>
<li>
<p>In the domain-specific API for pub/sub messaging a TopicPublisher may
be used to send a message asynchronously using any of the methods
inherited from MessageProducer and listed above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the message has been successfully sent the Jakarta Messaging provider invokes the callback method onCompletion on an application-specified
CompletionListener object. Only when that callback has been invoked can
the application be sure that the message has been successfully sent with
the same degree of confidence as if a normal synchronous send had been
performed. An application which requires this degree of confidence must
therefore wait for the callback to be invoked before continuing.</p>
</div>
<div class="paragraph">
<p>The following information is intended to give an indication of how an
asynchronous send would typically be implemented.</p>
</div>
<div class="paragraph">
<p>In some Jakarta Messaging providers, a normal synchronous send involves sending the
message to a remote Jakarta Messaging server and then waiting for an acknowledgement
to be received before returning. It is expected that such a provider
would implement an asynchronous send by sending the message to the
remote Jakarta Messaging server and then returning without waiting for an
acknowledgement. When the acknowledgement is received, the Jakarta Messaging provider
would notify the application by invoking the onCompletion method on the
application-specified CompletionListener object. If for some reason the
acknowledgement is not received the Jakarta Messaging provider would notify the
application by invoking the CompletionListener’s onException method.</p>
</div>
<div class="paragraph">
<p>In those cases where the Jakarta Messaging specification permits a lower level of
reliability, a normal synchronous send might not wait for an
acknowledgement. In that case it is expected that an asynchronous send
would be similar to a synchronous send: the Jakarta Messaging provider would send the
message to the remote Jakarta Messaging server and then return without waiting for an
acknowledgement. However the Jakarta Messaging provider would still notify the
application that the send had completed by invoking the onCompletion
method on the application-specified CompletionListener object.</p>
</div>
<div class="paragraph">
<p>It is up to the Jakarta Messaging provider to decide exactly what is performed in the
calling thread and what, if anything, is performed asynchronously, so
long as it satisfies the requirements given in the following sections:</p>
</div>
<div class="sect3">
<h4 id="quality-of-service"><a class="anchor" href="#quality-of-service"></a>7.3.1. Quality of service</h4>
<div class="paragraph">
<p>After the send operation has completed successfully, which means that
the message has been successfully sent with the same degree of
confidence as if a normal synchronous send had been performed, the Jakarta Messaging
provider must invoke the CompletionListener’s onCompletion method.The
CompletionListener must not be invoked earlier than this.</p>
</div>
</div>
<div class="sect3">
<h4 id="exceptions"><a class="anchor" href="#exceptions"></a>7.3.2. Exceptions</h4>
<div class="paragraph">
<p>If an exception is encountered during the call to the send method then
an appropriate exception should be thrown in the thread that is calling
the send method. In this case the Jakarta Messaging provider must not invoke the
CompletionListener’s onCompletion or onException method.</p>
</div>
<div class="paragraph">
<p>If an exception is encountered which cannot be thrown in the thread that
is calling the send method then the Jakarta Messaging provider must call the
CompletionListener’s onException method.</p>
</div>
<div class="paragraph">
<p>In both cases if an exception occurs it is undefined whether or not the
message was successfully sent.</p>
</div>
</div>
<div class="sect3">
<h4 id="message-order-2"><a class="anchor" href="#message-order-2"></a>7.3.3. Message order</h4>
<div class="paragraph">
<p>If the same producer is used to send multiple messages then Jakarta Messaging message
ordering requirements (see section 6.2.9 “Message order”) must be
satisfied. This applies even if a combination of synchronous and
asynchronous sends has been performed. The application is not required
to wait for an asynchronous send to complete before sending the next
message.</p>
</div>
</div>
<div class="sect3">
<h4 id="close-commit-or-rollback"><a class="anchor" href="#close-commit-or-rollback"></a>7.3.4. Close, commit or rollback</h4>
<div class="paragraph">
<p>If the application calls close to close the producer, session or
connection then the Jakarta Messaging provider must block until any incomplete send
operations have been completed and all CompletionListener callbacks have
returned before closing the object and returning.</p>
</div>
<div class="paragraph">
<p>If the session is transacted (uses a local transaction) then when the
commit or rollback method is called the Jakarta Messaging provider must block until
any incomplete send operations have been completed and all
CompletionListener callbacks have returned before performing the commit
or rollback.</p>
</div>
<div class="paragraph">
<p>Incomplete sends should be allowed to complete normally unless an error
occurs.</p>
</div>
<div class="paragraph">
<p>A CompletionListener callback method must not call close on its own
producer, session (including JMSContext) or connection or call commit or
rollback on its own session. Doing so will cause the close, commit or
rollback to throw an IllegalStateException or
IllegalStateRuntimeException (depending on the method signature).</p>
</div>
</div>
<div class="sect3">
<h4 id="restrictions-on-usage-in-jakarta-ee"><a class="anchor" href="#restrictions-on-usage-in-jakarta-ee"></a>7.3.5. Restrictions on usage in Jakarta EE</h4>
<div class="paragraph">
<p>An asynchronous send is not permitted in a Jakarta EE web container or Enterprise Beans container.</p>
</div>
<div class="paragraph">
<p>The following methods must therefore not be used in a Jakarta EE web container or Enterprise Beans container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jakarta.jms.MessageProducer method send(Message message,
CompletionListener completionListener)</p>
</li>
<li>
<p>jakarta.jms.MessageProducer method send(Message message, int
deliveryMode, int priority, long timeToLive, CompletionListener
completionListener)</p>
</li>
<li>
<p>jakarta.jms.MessageProducer method send(Destination destination, Message
message, CompletionListener completionListener)</p>
</li>
<li>
<p>jakarta.jms.MessageProducer method send(Destination destination, Message
message, int deliveryMode, int priority, long timeToLive,
CompletionListener completionListener)</p>
</li>
<li>
<p>jakarta.jms.JMSProducer method setAsync(CompletionListener
completionListener)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All the methods listed in this section may throw a
jakarta.jms.JMSException (if allowed by the method) or a
jakarta.jms.JMSRuntimeException (if not) when called by an application
running in the Jakarta EE web container or Enterprise Beans container. This is recommended but not
required.</p>
</div>
</div>
<div class="sect3">
<h4 id="message-headers"><a class="anchor" href="#message-headers"></a>7.3.6. Message headers</h4>
<div class="paragraph">
<p>Jakarta Messaging defines a number of message header fields and message properties
which must be set by the “Jakarta Messaging provider on send”. See section 3.4.11 “How
message header values are set” and section 3.5.9 “Jakarta Messaging defined
properties”. If the send is asynchronous these fields and properties may
be accessed on the sending client only after the CompletionListener has
been invoked. If the CompletionListener’s onException method is called
then the state of these message header fields and properties is
undefined. See also section 7.3.9 “Restrictions on the use of the
Message object” below.</p>
</div>
</div>
<div class="sect3">
<h4 id="restrictions-on-threading"><a class="anchor" href="#restrictions-on-threading"></a>7.3.7. Restrictions on threading</h4>
<div class="paragraph">
<p>Applications that perform an asynchronous send must conform to the
threading restrictions defined in section 6.2.5 “Threading restrictions
on a session”. This means that the session may be used by only one
thread at a time.</p>
</div>
<div class="paragraph">
<p>Setting a CompletionListener does not cause the session to be dedicated
to the thread of control which calls the CompletionListener. The
application thread may therefore continue to use the session after
performing an asynchronous send. However the CompletionListener’s
callback methods must not use the session if an application thread might
be using the session at the same time.</p>
</div>
</div>
<div class="sect3">
<h4 id="use-of-the-completionlistener-by-the-jakarta-messaging-provider"><a class="anchor" href="#use-of-the-completionlistener-by-the-jakarta-messaging-provider"></a>7.3.8. Use of the CompletionListener by the Jakarta Messaging provider</h4>
<div class="paragraph">
<p>A session will only invoke one CompletionListener callback method at a
time. For a given MessageProducer or JMSContext, callbacks (both
onCompletion and onException) will be performed in the same order as the
corresponding calls to the asynchronous send method.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider must not invoke the CompletionListener from the thread
that is calling the asynchronous send method.</p>
</div>
</div>
<div class="sect3">
<h4 id="restrictions-on-the-use-of-the-message-object"><a class="anchor" href="#restrictions-on-the-use-of-the-message-object"></a>7.3.9. Restrictions on the use of the Message object</h4>
<div class="paragraph">
<p>Applications which perform an asynchronous send must take account of the
restriction that a Message object is designed to be accessed by one
logical thread of control at a time and does not support concurrent use.
See section 2.14 “Multi-threading”.</p>
</div>
<div class="paragraph">
<p>After the send method has returned, the application must not attempt to
read the headers, properties or body of the Message object until the
CompletionListener’s onCompletion or onException method has been called.
This is because the Jakarta Messaging provider may be modifying the Message object in
another thread during this time.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider may throw a JMSException if the application attempts to
access or modify the Message object after the send method has returned
and before the CompletionListener has been invoked. If the Jakarta Messaging provider
does not throw an exception then the behaviour is undefined.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-message-delivery-options"><a class="anchor" href="#setting-message-delivery-options"></a>7.4. Setting message delivery options</h3>
<div class="paragraph">
<p>A client can specify a producer’s delivery mode, priority, time-to-live
and delivery delay. This sets these values for all messages sent by a
producer,</p>
</div>
<div class="paragraph">
<p>An application that uses the classic or domain-specific APIs may also
specify the delivery mode, priority, and time-to-live as parameters to
the send method used to send the message. This overrides any values set
on the producer itself.</p>
</div>
<div class="paragraph">
<p>For more information on these various options see sections 7.7 “Message
delivery mode”, Section “", 7.8 “Message time-to-live” and 7.9 “Message
delivery delay”.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-message-properties"><a class="anchor" href="#setting-message-properties"></a>7.5. Setting message properties</h3>
<div class="paragraph">
<p>Prior to sending a message, the client application may use methods on
the <code>Message</code> object to set message properties.</p>
</div>
<div class="paragraph">
<p>Applications using the simplified API may also set message properties on
the JMSProducer. There are nine methods on JMSProducer, all called
setProperty. Any message properties set using these methods will
override any values that have been set directly on the message.</p>
</div>
<div class="paragraph">
<p>There are five send methods on JMSProducer that allow the application to
supply the message body directly without the need to create a Message
object. When these methods are used the JMSProducer’s setProperty
methods provide the only way to set message properties.</p>
</div>
<div class="paragraph">
<p>There are five send methods on JMSProducer that allow the application to
supply the message body directly without the need to create a Message
object. When these methods are used the only way to set message
properties is to call setProperty on JMSProducer prior to calling send.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-message-headers"><a class="anchor" href="#setting-message-headers"></a>7.6. Setting message headers</h3>
<div class="paragraph">
<p>Prior to sending a message, the application may use methods on the
Message object to set the JMSCorrelationID, JMSReplyTo and JMSType
message headers.</p>
</div>
<div class="paragraph">
<p>For more information see sections 3.4.5 “JMSCorrelationID” 3.4.6
“JMSReplyTo” and 3.4.8 “JMSType” above.</p>
</div>
<div class="paragraph">
<p>Applications using the simplified API may also set these message headers
on the JMSProducer. Any message headers set using these methods will
override any values that have been set directly on the message.</p>
</div>
<div class="paragraph">
<p>There are five send methods on JMSProducer that allow the application to
supply the message body directly without the need to create a Message
object. When these methods are used the only way to set these message
headers is to call the appropriate methods on JMSProducer prior to
calling send.</p>
</div>
</div>
<div class="sect2">
<h3 id="message-delivery-mode"><a class="anchor" href="#message-delivery-mode"></a>7.7. Message delivery mode</h3>
<div class="paragraph">
<p>Jakarta Messaging supports two modes of message delivery.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The NON_PERSISTENT mode is the lowest overhead delivery mode because
it does not require that the message be logged to stable storage. A Jakarta Messaging
provider failure can cause a NON_PERSISTENT message to be lost.</p>
</li>
<li>
<p>The PERSISTENT mode instructs the Jakarta Messaging provider to take extra care to
ensure the message is not lost in transit due to a Jakarta Messaging provider failure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider must deliver a NON_PERSISTENT message <em>at-most-once.</em>
This means it may lose the message, but it must not deliver it twice.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider must deliver a PERSISTENT message <em>once-and-only-once</em>.
This means a Jakarta Messaging provider failure must not cause it to be lost, and it
must not deliver it twice.</p>
</div>
<div class="paragraph">
<p>PERSISTENT (once-and-only-once) and NON_PERSISTENT (at-most-once)
message delivery are a way for a Jakarta Messaging client to select between delivery
techniques that may lose a messages if a Jakarta Messaging provider dies and those
which take extra effort to ensure that messages can survive such a
failure. There is typically a performance/reliability trade-off implied
by this choice. When a client selects the NON_PERSISTENT delivery mode,
it is indicating that it values performance over reliability; a
selection of PERSISTENT reverses the requested trade-off.</p>
</div>
<div class="paragraph">
<p><em>The use of PERSISTENT messages does not guarantee that all messages are
always delivered to every eligible consumer.</em> See Section 9.1
“Reliability” for further discussion on this topic.</p>
</div>
<div class="paragraph">
<p>An application may specify the required delivery mode using the method
setDeliveryMode on the producer object. This sets the delivery mode of
all messages sent using that producer. An application that uses the
classic or domain-specific APIs may also specify the delivery mode as a
parameter to the send method used to send the message. Note however that
the setDeliveryMode method on Message cannot be used to set the delivery
mode of a message.</p>
</div>
<div class="paragraph">
<p>See also section 3.4.2 “JMSDeliveryMode”.</p>
</div>
</div>
<div class="sect2">
<h3 id="message-time-to-live"><a class="anchor" href="#message-time-to-live"></a>7.8. Message time-to-live</h3>
<div class="paragraph">
<p>A client can specify a time-to-live value in milliseconds for each
message it sends. This is used to determine the message’s expiration
time which is calculated by adding the time-to-live value specified on
the send method to the time the message was sent (for transacted sends,
this is the time the client sends the message, not the time the
transaction is committed).</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider should do its best to accurately expire messages;
however, Jakarta Messaging does not define the accuracy provided. It is not acceptable
to simply ignore time-to-live.</p>
</div>
<div class="paragraph">
<p>An application may specify the required time-to-live using the method
setTimeToLive on the producer object. This sets the time-to-live of all
messages sent using that producer. An application that uses the classic
or domain-specific APIs may also specify the time-to-live as a parameter
to the send method used to send the message. Note however that the
setTimeToLive method on Message cannot be used to set the time-to-live
of a message.</p>
</div>
<div class="paragraph">
<p>See also section 3.4.9 “JMSExpiration”.</p>
</div>
</div>
<div class="sect2">
<h3 id="message-delivery-delay"><a class="anchor" href="#message-delivery-delay"></a>7.9. Message delivery delay</h3>
<div class="paragraph">
<p>A client can specify a delivery delay value in milliseconds for each
message it sends. This is used to determine the message’s delivery time
which is calculated by adding the delivery delay value specified on the
send method to the time the message was sent (for transacted sends, this
is the time the client sends the message, not the time the transaction
is committed).</p>
</div>
<div class="paragraph">
<p>A message’s delivery time is the earliest time when a Jakarta Messaging provider may
deliver the message to a consumer. The provider must not deliver
messages before the delivery time has been reached.</p>
</div>
<div class="paragraph">
<p>If a message is published to a topic, it will only be added to a durable
or non-durable subscription on that topic if the subscription exists at
the time the message is sent.</p>
</div>
<div class="paragraph">
<p>An application may specify the required delivery delay using the method
setDeliveryDelay on the producer object. This sets the delivery delay of
all messages sent using that producer. Note however that the
setDeliveryDelay method on Message cannot be used to set the delivery
delay of a message.</p>
</div>
<div class="paragraph">
<p>See also section 3.4.13 “JMSDeliveryTime”.</p>
</div>
</div>
<div class="sect2">
<h3 id="jmsproducer-method-chaining"><a class="anchor" href="#jmsproducer-method-chaining"></a>7.10. JMSProducer method chaining</h3>
<div class="paragraph">
<p>In the simplified API, the various setter methods on JMSProducer all
return the JMSProducer object. This allows method calls to be chained
together, allowing a fluid programming style. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>context.createProducer().
    setProperty("foo", "bar").
    setTimeToLive(10000).
    setDeliveryMode(NON_PERSISTENT).
    setDisableMessageTimestamp(true).
    send(dataQueue, body);</pre>
</div>
</div>
<div class="paragraph">
<p>Instances of JMSProducer are intended to be lightweight objects which
can be created freely and which do not consume significant resources.
JMSProducer therefore does not provide a close method.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="receiving-messages"><a class="anchor" href="#receiving-messages"></a>8. Receiving messages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="consumers"><a class="anchor" href="#consumers"></a>8.1. Consumers</h3>
<div class="paragraph">
<p>A client uses a <em>consumer</em> to receive messages from a destination.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API a consumer is represented by a MessageConsumer
object and is created using one of several methods on Session.</p>
</li>
<li>
<p>In the simplified API a consumer is represented by a JMSConsumer
object and is created using one of several methods on JMSContext.</p>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging a consumer is
represented by a QueueReceiver object and is created using one of
several methods on QueueSession.</p>
</li>
<li>
<p>In the domain-specified API for pub-sub messaging a consumer is
represented by a TopicSubscriber object and is created using one of
several methods on TopicSession.</p>
<div class="paragraph">
<p>In all cases the destination from which the consumer will receive
messages must be specified.</p>
</div>
<div class="paragraph">
<p>The methods used to create a consumer are described in sections 8.2
“Creating a consumer on a queue” and 8.3 “Creating a consumer on a
topic” below.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A consumer can be created with a message selector. This allows the
client to restrict the messages delivered to the consumer to those that
match the selector. See Section 3.8.1 “Message selector” for more information.</p>
</div>
<div class="paragraph">
<p>A client may either synchronously receive a consumer’s messages or have
the provider asynchronously deliver them as they arrive. See sections
8.5 “Receiving messages synchronously”, 8.6 “Receiving message bodies
synchronously” and 8.7 “Receiving messages asynchronously” below.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-consumer-on-a-queue"><a class="anchor" href="#creating-a-consumer-on-a-queue"></a>8.2. Creating a consumer on a queue</h3>
<div class="paragraph">
<p>The methods used to create a consumer on a queue vary depending on which
API is being used. The basic semantics of queues were introduced in
section 4.1.2 “Queue semantics”.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API a consumer on a queue is created using one of
several createConsumer methods on Session, all of which return a
MessageConsumer.</p>
</li>
<li>
<p>In the simplified API a consumer on a queue is created using one of
several createConsumer methods on JMSContext, all of which return a
JMSConsumer.</p>
</li>
<li>
<p>In the domain-specific API for point-to-point messaging a consumer on
a queue is created using one of several createReceiver methods on
QueueSession, all of which return a QueueReceiver:</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-consumer-on-a-topic"><a class="anchor" href="#creating-a-consumer-on-a-topic"></a>8.3. Creating a consumer on a topic</h3>
<div class="paragraph">
<p>The methods used to create a consumer on a topic vary depending on what
kind of topic subscription is required, and which API is being used. The
basic concepts of topics were introduced in section 4.2.2 “Topic
semantics” and are explained in more detail below.</p>
</div>
<div class="sect3">
<h4 id="unshared-non-durable-subscriptions"><a class="anchor" href="#unshared-non-durable-subscriptions"></a>8.3.1. Unshared non-durable subscriptions</h4>
<div class="paragraph">
<p>An unshared non-durable subscription is the simplest way to consume
messages from a topic.</p>
</div>
<div class="paragraph">
<p>An unshared non-durable subscription is created, and a consumer object
created on that subscription, using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API, one of several createConsumer methods on Session.
These return a MessageConsumer object.</p>
</li>
<li>
<p>In the simplified API, one of several createConsumer methods on
JMSContext. These return a JMSConsumer object.</p>
</li>
<li>
<p>In the legacy domain-specific API for pub/sub, using one of several
createSubscriber methods on TopicSession. These return a TopicSubscriber
object.</p>
</li>
<li>
<p>In the legacy domain-specific API for pub/sub, using one of several
createConsumer methods on TopicSession. As these methods are inherited
from Session they return a MessageConsumer object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An unshared non-durable subscription does not have a name. Each call to
createConsumer or createSubscriber creates a new subscription.</p>
</div>
<div class="paragraph">
<p>An unshared non-durable subscription only exists for as long as the
consumer remains active. This means that any messages sent to the topic
will only be added to the subscription for as long as the consumer
object exists and is not closed. The subscription is not persisted and
will be deleted (together with any undelivered messages associated with
it) when the consumer is closed.</p>
</div>
<div class="paragraph">
<p>If a message selector is specified then only messages with properties
matching the message selector expression will be added to the
subscription.</p>
</div>
<div class="paragraph">
<p>The noLocal parameter may be used to specify that messages published to
the topic by its own connection must not be added to the subscription.</p>
</div>
<div class="paragraph">
<p>Each unshared non-durable subscription has a single consumer. If the
application needs to create multiple consumers on the same subscription
then a shared non-durable subscription should be used instead. See
section 8.3.2 “Shared non-durable subscriptions”.</p>
</div>
<div class="paragraph">
<p>If the application needs to be able to receive messages that were sent
to the topic even when there was no active consumer on it then a durable
subscription should be used instead. See section 8.3.3 “Unshared durable
subscriptions”.</p>
</div>
</div>
<div class="sect3">
<h4 id="shared-non-durable-subscriptions"><a class="anchor" href="#shared-non-durable-subscriptions"></a>8.3.2. Shared non-durable subscriptions</h4>
<div class="paragraph">
<p>A non-durable shared subscription is used by a client that needs to be
able to share the work of receiving messages from a non-durable topic
subscription amongst multiple consumers. A non-durable shared
subscription may therefore have more than one consumer. Each message
from the subscription will be delivered to only one of the consumers on
that subscription.</p>
</div>
<div class="paragraph">
<p>A shared non-durable subscription is created, and a consumer created on
that subscription, using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API, one of several createSharedConsumer methods on
Session. These return a MessageConsumer object.</p>
</li>
<li>
<p>In the simplified API, one of several createSharedConsumer methods on
JMSContext. These return a JMSConsumer object.</p>
</li>
<li>
<p>In the legacy domain-specific API for pub/sub, using one of several
createSharedConsumer methods on TopicSession. As these methods are
inherited from Session they return a MessageConsumer object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The same methods may be used to create a consumer on an existing shared
non-durable subscription.</p>
</div>
<div class="paragraph">
<p>A shared non-durable subscription is identified by a name specified by
the client and by the client identifier if set. If the client identifier
was set when the shared non-durable subscription was first created then
a client which subsequently wishes to create a consumer on that shared
non-durable subscription must use the same client identifier.</p>
</div>
<div class="paragraph">
<p>A shared non-durable subscription only exists for as long as there is an
active consumer on the subscription. This means that any messages sent
to the topic will only be added to the subscription whilst a consumer
object exists and is not closed. The subscription is not persisted and
will be deleted (together with any undelivered messages associated with
it) when the last consumer on the subscription is closed.</p>
</div>
<div class="paragraph">
<p>If there is an active (i.e. not closed) consumer on the shared
non-durable subscription, and an attempt is made to create an additional
consumer, specifying the same name and client identifier (if set) but a
different topic or message selector, then a JMSException or
JMSRuntimeException (depending on the method signature) will be thrown.</p>
</div>
<div class="paragraph">
<p>If a message selector is specified then only messages with properties
matching the message selector expression will be added to the
subscription.</p>
</div>
<div class="paragraph">
<p>There is no restriction to prevent a shared non-durable subscription and
a durable subscription having the same name. Such subscriptions would be
completely separate.</p>
</div>
<div class="paragraph">
<p>See also section 6.1.2 “Client identifier”.</p>
</div>
</div>
<div class="sect3">
<h4 id="unshared-durable-subscriptions"><a class="anchor" href="#unshared-durable-subscriptions"></a>8.3.3. Unshared durable subscriptions</h4>
<div class="paragraph">
<p>A durable subscription is used by an application that needs to receive
all the messages published on a topic, including the ones published when
there is no consumer associated with it. The Jakarta Messaging provider retains a
record of this durable subscription and ensures that all messages from
the topic’s publishers are retained until they are delivered to, and
acknowledged by, a consumer on the durable subscription or until they
have expired.</p>
</div>
<div class="paragraph">
<p>An <em>unshared</em> durable subscription may have only one active (i.e. not
closed) consumer at the same time.</p>
</div>
<div class="paragraph">
<p>An unshared durable subscription is created, and a consumer created on
that subscription, using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API, one of several createDurableConsumer methods on
Session. These return a MessageConsumer object.</p>
</li>
<li>
<p>In the simplified API, one of several createDurableConsumer methods on
JMSContext. These return a JMSConsumer object.</p>
</li>
<li>
<p>In the legacy domain-specific API for pub/sub, one of several
createDurableSubscriber methods on Session and TopicSession. These
return a TopicSubscriber object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The same methods may be used to create a consumer on an existing
unshared durable subscription.</p>
</div>
<div class="paragraph">
<p>An unshared durable subscription is identified by a name specified by
the client and by the client identifier, which must be set. A client
which subsequently wishes to create a consumer on that unshared durable
subscription must use the same client identifier.</p>
</div>
<div class="paragraph">
<p>An unshared durable subscription is persisted and will continue to
accumulate messages until it is deleted using the unsubscribe method on
the Session, JMSContext or TopicSession. It is erroneous for a client to
delete a durable subscription while it has an active consumer or while a
message received from it is part of a current transaction or has not
been acknowledged in the session.</p>
</div>
<div class="paragraph">
<p>If there is an active (i.e. not closed) consumer on the unshared durable
subscription, and an attempt is made to create an additional consumer,
specifying the same name and client identifier, then a JMSException or
JMSRuntimeException (depending on the method signature) will be thrown.</p>
</div>
<div class="paragraph">
<p>If there is no active (i.e. not closed) consumer on the unshared durable
subscription, and an attempt is made to create a new consumer on that
unshared durable subscription, specifying the same name and client
identifier but a different topic, message selector or noLocal value,
then this is equivalent to unsubscribing (deleting) the old one and
creating a new one.</p>
</div>
<div class="paragraph">
<p>A shared durable subscription and an unshared durable subscription may
not have the same name and client identifier. If the application calls
one of the createDurableConsumer or createDurableSubscriber methods, and
a shared durable subscription already exists with the same name and
client identifier, then a JMSException or JMSRuntimeException (depending
on the method signature) will be thrown.</p>
</div>
<div class="paragraph">
<p>If a message selector is specified then only messages with properties
matching the message selector expression will be added to the
subscription.</p>
</div>
<div class="paragraph">
<p>The noLocal parameter may be used to specify that messages published to
the topic by the Session, JMSContext or TopicSession’s own connection,
or any other connection with the same client identifier, will not be
added to the durable subscription.</p>
</div>
<div class="paragraph">
<p>There is no restriction to prevent a durable subscription and a shared
non-durable subscription having the same name. Such subscriptions would
be completely separate.</p>
</div>
<div class="paragraph">
<p>See also section 6.1.2 “Client identifier”.</p>
</div>
</div>
<div class="sect3">
<h4 id="shared-durable-subscriptions"><a class="anchor" href="#shared-durable-subscriptions"></a>8.3.4. Shared durable subscriptions</h4>
<div class="paragraph">
<p>A durable subscription is used by an application that needs to receive
all the messages published on a topic, including the ones published when
there is no consumer associated with it. The Jakarta Messaging provider retains a
record of this durable subscription and ensures that all messages from
the topic’s publishers are retained until they are delivered to, and
acknowledged by, a consumer on the durable subscription or until they
have expired.</p>
</div>
<div class="paragraph">
<p>A <em>shared</em> non-durable subscription is used by a client that needs to be
able to share the work of receiving messages from a durable subscription
amongst multiple consumers. A shared durable subscription may therefore
have more than one consumer. Each message from the subscription will be
delivered to only one of the consumers on that subscription.</p>
</div>
<div class="paragraph">
<p>A shared durable subscription is created, and a consumer created on that
subscription, using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the classic API, one of several createSharedDurableConsumer methods
on Session. These return a MessageConsumer object.</p>
</li>
<li>
<p>In the simplified API, one of several createSharedDurableConsumer
methods on JMSContext. These return a JMSConsumer object.</p>
</li>
<li>
<p>In the legacy domain-specific API for pub/sub, using one of several
createSharedDurableConsumer methods on JMSContext return a JMSConsumer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The same methods may be used to create a consumer on an existing shared
durable subscription.</p>
</div>
<div class="paragraph">
<p>A shared durable subscription is identified by a name specified by the
client and by the client identifier if set. If the client identifier was
set when the shared durable subscription was first created then a client
which subsequently wishes to create a consumer on that shared durable
subscription must use the same client identifier.</p>
</div>
<div class="paragraph">
<p>A durable subscription is persisted and will continue to accumulate
messages until it is deleted using the unsubscribe method on the
Session, TopicSession or JMSContext. It is erroneous for a client to
delete a durable subscription while it has an active consumer or while a
message received from it is part of a current transaction or has not
been acknowledged in the session.</p>
</div>
<div class="paragraph">
<p>If there are no active (i.e. not closed) consumers on the shared durable
subscription, and an attempt is made to create a new consumer,
specifying the same name and client identifier (if set) but a different
topic or message selector, then this is equivalent to unsubscribing
(deleting) the old one and creating a new one.</p>
</div>
<div class="paragraph">
<p>If there is an active (i.e. not closed) consumer on the shared durable
subscription, and an attempt is made to create an additional consumer,
specifying the same name and client identifier (if set) but a different
topic or message selector, then a JMSException or JMSRuntimeException
(depending on the method signature) will be thrown.</p>
</div>
<div class="paragraph">
<p>A shared durable subscription and an unshared durable subscription may
not have the same name and client identifier. If the application calls
one of the createSharedDurableConsumer methods, and an unshared durable
subscription already exists with the same name and client identifier,
then a JMSException or JMSRuntimeException is thrown.</p>
</div>
<div class="paragraph">
<p>If a message selector is specified then only messages with properties
matching the message selector expression will be added to the
subscription.</p>
</div>
<div class="paragraph">
<p>There is no restriction to prevent a durable subscription and a shared
non-durable subscription having the same name. Such subscriptions would
be completely separate.</p>
</div>
<div class="paragraph">
<p>See also section 6.1.2 “Client identifier”.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="starting-message-delivery"><a class="anchor" href="#starting-message-delivery"></a>8.4. Starting message delivery</h3>
<div class="paragraph">
<p>An application using the classic API to consume messages needs to call
the connection’s start method to start delivery of incoming messages. It
may temporarily suspend delivery by calling stop, after which a call to
start will restart delivery. This is described in section 6.1.3
“Connection setup”.</p>
</div>
<div class="paragraph">
<p>The simplified API provides corresponding start and stop methods on
JMSContext. The start method will be called automatically when
createConsumer or createDurableConsumer are called on the JMSContext
object. This means there is no need for the application to call start
when the consumer is first established. As with the classic API, an
application may temporarily suspend delivery by calling stop, after
which a call to start will restart delivery.</p>
</div>
<div class="paragraph">
<p>Sometimes an application will need the connection to remain in stopped
mode until setup is complete and not commence message delivery until the
start method is explicitly called, as with the classic API. This can be
configured by calling setAutoStart(false) on the JMSContext prior to
calling createConsumer or createDurableConsumer.</p>
</div>
</div>
<div class="sect2">
<h3 id="receiving-messages-synchronously"><a class="anchor" href="#receiving-messages-synchronously"></a>8.5. Receiving messages synchronously</h3>
<div class="paragraph">
<p>A client application can request the next message from a consumer by
callinge receive, receive(long timeout) or receiveNoWait methods. These
methods return a Message object.</p>
</div>
<div class="paragraph">
<p>Table 8‑1 MessageConsumer,JMSConsumer, QueueReceiver and TopicSubscriber
methods to receive a message synchronously</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message receive ();</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the next message produced for this
JMSConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message receive (<br>
long timeout);</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the next message produced for this JMSConsumer
that arrives within the specified timeout period</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message receiveNoWait();</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the next message produced for this
JMSConsumer if one is immediately available</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="receiving-message-bodies-synchronously"><a class="anchor" href="#receiving-message-bodies-synchronously"></a>8.6. Receiving message bodies synchronously</h3>
<div class="paragraph">
<p>A client application using the simplified API can use the following
methods on JMSConsumer to receive a message body directly.</p>
</div>
<div class="paragraph">
<p>Table 8‑2 JMSConsumer methods to receive a message body synchronously</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;T&gt; T receiveBody(<br>
Class&lt;T&gt; c);</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives the next message produced for this JMSConsumer
and returns its body as an object of the specified type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;T&gt; T receiveBody(<br>
Class&lt;T&gt; c,<br>
long timeout);</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives the next message produced for this JMSConsumer
that arrives within the specified timeout period, and returns its body
as an object of the specified type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;T&gt; T receiveBodyNoWait(<br>
Class&lt;T&gt; c);</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Receives the next message produced for this JMSConsumer if
one is immediately available and returns its body as an object of the
specified type</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These methods may be used to receive any type of message except for
StreamMessage and Message, so long as the message has a body which is
capable of being assigned to the specified type. This means that the
specified class or interface must either be the same as, or a superclass
or superinterface of, the class of the message body. If the message is
not one of the supported types, or its body cannot be assigned to the
specified type, or it has no body, then a MessageFormatRuntimeException
is thrown.</p>
</div>
<div class="paragraph">
<p>These methods do not give access to the message headers or properties
(such as the JMSRedelivered message header field or the
JMSXDeliveryCount message property) and should only be used if the
application has no need to access them.</p>
</div>
<div class="paragraph">
<p>If the next message is expected to be a TextMessage then this should be
set to String.class or another class to which a String is assignable.</p>
</div>
<div class="paragraph">
<p>If the next message is expected to be a ObjectMessage then this should
be set to java.io.Serializable.class or another class to which the body
is assignable.</p>
</div>
<div class="paragraph">
<p>If the next message is expected to be a MapMessage then this should be
set to java.util.Map.class (or java.lang.Object).</p>
</div>
<div class="paragraph">
<p>If the next message is expected to be a BytesMessage then this should be
set to byte[].class (or java.lang.Object).</p>
</div>
<div class="paragraph">
<p>The result of this method throwing a MessageFormatRuntimeException
depends on the session mode:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AUTO_ACKNOWLEDGE or DUPS_OK_ACKNOWLEDGE: The Jakarta Messaging provider will behave
as if the unsuccessful call to receiveBody or receiveBodyNoWait had not
occurred. The message will be delivered again before any subsequent
messages.</p>
<div class="paragraph">
<p>This is not considered to be redelivery and does not cause the
JMSRedelivered message header field to be set or the JMSXDeliveryCount
message property to be incremented.</p>
</div>
</li>
<li>
<p>CLIENT_ACKNOWLEDGE: The Jakarta Messaging provider will behave as if the call to
receiveBody or receiveBodyNoWait had been successful and will not
deliver the message again.</p>
<div class="paragraph">
<p>As with any message that is delivered with a session mode of
CLIENT_ACKNOWLEDGE, the message will not be acknowledged until
acknowledge is called on the JMSContext. If an application wishes to
have the failed message redelivered, it must call recover on the
JMSContext. The redelivered message’s JMSRedelivered message header
field will be set and its JMSXDeliveryCount message property will be
incremented.</p>
</div>
</li>
<li>
<p>Transacted session: The Jakarta Messaging provider will behave as if the call to
receiveBody or receiveBodyNoWait had been successful and will not
deliver the message again.</p>
<div class="paragraph">
<p>As with any message that is delivered in a transacted session, the
transaction will remain uncommitted until the transaction is committed
or rolled back by the application. If an application wishes to have the
failed message redelivered, it must roll back the transaction. The
redelivered message’s JMSRedelivered message header field will be set
and its JMSXDeliveryCount message property will be incremented.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="receiving-messages-asynchronously"><a class="anchor" href="#receiving-messages-asynchronously"></a>8.7. Receiving messages asynchronously</h3>
<div class="paragraph">
<p>A client can register an object that implements the Jakarta Messaging MessageListener
interface with a consumer. As messages arrive for the consumer, the
provider delivers them by calling the listener’s onMessage method.</p>
</div>
<div class="paragraph">
<p>It is possible for a listener to throw a RuntimeException; however, this
is considered a client programming error. Well behaved listeners should
catch such exceptions and attempt to divert messages causing them to
some form of application-specific ‘unprocessable message’ destination.</p>
</div>
<div class="paragraph">
<p>The result of a listener throwing a RuntimeException depends on the
session’s acknowledgment mode.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AUTO_ACKNOWLEDGE or DUPS_OK_ACKNOWLEDGE - the message will be
immediately redelivered. The number of times a Jakarta Messaging provider will
redeliver the same message before giving up is provider-dependent. The
JMSRedelivered message header field will be set, and the
JMSXDeliveryCount message property incremented, for a message
redelivered under these circumstances.</p>
</li>
<li>
<p>CLIENT_ACKNOWLEDGE - the next message for the listener is delivered.
If a client wishes to have the previous unacknowledged message
redelivered, it must manually recover the session.</p>
</li>
<li>
<p>Transacted Session - the next message for the listener is delivered.
The client can either commit or roll back the session (in other words, a
RuntimeException does not automatically rollback the session).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta Messaging providers should flag clients with message listeners that are
throwing RuntimeException as possibly malfunctioning.</p>
</div>
<div class="paragraph">
<p>See Section 6.2.13 “Serial execution of client code” for information about how onMessage calls are serialized by a session.</p>
</div>
</div>
<div class="sect2">
<h3 id="closing-a-consumer"><a class="anchor" href="#closing-a-consumer"></a>8.8. Closing a consumer</h3>
<div class="paragraph">
<p>The close methods on MessageConsumer, JMSConsumer, QueueReceiver and
TopicSubscriber allow a consumer to be closed separately from the
session or connection used to create it.</p>
</div>
<div class="paragraph">
<p>Closing a consumer terminates the delivery of messages to the consumer.</p>
</div>
<div class="paragraph">
<p>close is the only method on a consumer that may be invoked from a thread
of control separate from the one which is currently controlling the
session.</p>
</div>
<div class="paragraph">
<p>If close is called in one thread whilst another thread is calling
receive on the same consumer then the call to close must block until the
receive call has completed. A blocked receive call returns null when the
consumer is closed.</p>
</div>
<div class="paragraph">
<p>If close is called in one thread whilst a message listener for this
consumer is in progress in another thread then the call to close must
block until the message listener has completed.</p>
</div>
<div class="paragraph">
<p>If close is called from a message listener’s onMessage method on its own
consumer then after this method returns the onMessage method must be
allowed to complete normally.</p>
</div>
<div class="paragraph">
<p>Closing a consumer has no effect on the acknowledgement of messages
delivered to the application, or on any transaction in progress. This is
because message acknowledgement and transactions are functions of the
session, not the consumer.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the session mode is AUTO_ACKNOWLEDGE or DUPS_OK_ACKNOWLEDGE then
any messages delivered to the application will be automatically
acknowledged as normal.</p>
</li>
<li>
<p>If the session mode is CLIENT_ACKNOWLEDGE then any messages delivered
to the application may be acknowledged by calling acknowledge in the
normal way. It makes no difference whether this occurs before or after
the consumer is closed.</p>
</li>
<li>
<p>If the session is transacted then the application may commit or
rollback the transaction as normal. It makes no difference whether this
occurs before or after the consumer is closed.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="other-jakarta-messaging-facilities"><a class="anchor" href="#other-jakarta-messaging-facilities"></a>9. Other Jakarta Messaging facilities</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="reliability-3"><a class="anchor" href="#reliability-3"></a>9.1. Reliability</h3>
<div class="paragraph">
<p>Most clients should use producers that produce PERSISTENT messages. This
ensures once-and-only-once message delivery for messages delivered from
a queue or a durable subscription.</p>
</div>
<div class="paragraph">
<p>In some cases, an application may only require at-most-once message
delivery for some of its messages. This is accomplished by publishing
NON_PERSISTENT messages. These messages typically have lower overhead;
however, they may be lost if a Jakarta Messaging provider fails. Both PERSISTENT and
NON_PERSISTENT messages can be published to the same destination.</p>
</div>
<div class="paragraph">
<p>Normally, a consumer fully processes each message before acknowledging
its receipt to Jakarta Messaging. This ensures that Jakarta Messaging does not discard a partially
processed message due to machine failure, etc. A consumer accomplishes
this by using either a transacted or CLIENT_ACKNOWLEDGE session.
Unacknowledged messages redelivered due to system failure must have the
JMSRedelivered message header field set, and the JMSXDeliveryCount
incremented, by the Jakarta Messaging provider, as described in sections 3.4.7
“JMSRedelivered” and 3.5.11 “JMSXDeliveryCount”</p>
</div>
<div class="paragraph">
<p>If a NON_PERSISTENT message is delivered to a durable subscription or a
queue, delivery is not guaranteed if the durable subscription becomes
inactive (that is, if it has no current subscriber) or if the Jakarta Messaging
provider is shut down and later restarted.</p>
</div>
<div class="paragraph">
<p><em>It is expected that important messages will be produced with a
PERSISTENT delivery mode within a transaction and will be consumed
within a transaction from a nontemporary queue or a durable
subscription.</em></p>
</div>
<div class="paragraph">
<p>When this is done, applications have the highest level of assurance that
a message has been properly produced, reliably delivered, and accurately
consumed. Non-transactional production and consumption can also achieve
the same level of assurance; however, this requires careful programming.</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider may have resource restrictions that limit the number of
messages that can be held for high-volume destinations or non-responsive
clients. If messages are dropped due to resource limits, this is usually
a serious administrative issue that needs attention. Correct functioning
of Jakarta Messaging requires that clients are responsive and that adequate resources
to service them are available.</p>
</div>
<div class="paragraph">
<p><em>Once-and-only-once message delivery, as described in this
specification, has the important caveat that it does not cover message
destruction due to message expiration or other administrative
destruction criteria. It also does not cover loss due to resource
restrictions. Configuration of adequate resources and processing power
for Jakarta Messaging applications is the job of administrators, who must be aware of
their Jakarta Messaging provider’s reliability features.</em></p>
</div>
<div class="paragraph">
<p>NON_PERSISTENT messages, nondurable subscriptions, and temporary
destinations are by definition unreliable. A Jakarta Messaging provider shutdown or
failure will likely cause the loss of NON_PERSISTENT messages and the
loss of messages held by temporary destinations and nondurable
subscriptions. The termination of an application will likely cause the
loss of messages held by nondurable subscriptions and temporary
destinations of the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="method-inheritance-across-messaging-domains"><a class="anchor" href="#method-inheritance-across-messaging-domains"></a>9.2. Method inheritance across messaging domains</h3>
<div class="paragraph">
<p>When Jakarta Messaging 1.1 unified the domain-specific APIs for point-to-point and
pub/sub messaging into a single “unified” API (now referred to as the
“classic” API), some methods that are not appropriate to a messaging
domain became inherited by the domain-specific interfaces. For example,
the Session interface has the method createBrowser<em>.</em> Since
TopicSession inherits from the Session interface, TopicSession inherits
the createBrowser method, though that method must not be used by a
topic, as topics do not support queue browsers. Table 9‑1outlines these
instances.</p>
</div>
<div class="paragraph">
<p>If an application attempts to call any of the methods listed, the Jakarta Messaging
provider must throw an IllegalStateException.</p>
</div>
<div class="paragraph">
<p>Table 9‑1 methods that throw an IllegalStateException</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface</th>
<th class="tableblock halign-left valign-top">Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createSharedConnectionConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createDurableConnectionConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createSharedDurableConnectionConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QueueSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createDurableSubscriber</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createDurableConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createSharedConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createSharedDurableConsumer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createTemporaryTopic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createTopic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unsubscribe</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopicSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createBrowser</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createQueue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createTemporaryQueue</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jakarta-messaging-exceptions"><a class="anchor" href="#jakarta-messaging-exceptions"></a>10. Jakarta Messaging exceptions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-5"><a class="anchor" href="#overview-5"></a>10.1. Overview</h3>
<div class="paragraph">
<p>This chapter provides an overview of Jakarta Messaging exception handling and defines
the standard Jakarta Messaging exceptions.</p>
</div>
</div>
<div class="sect2">
<h3 id="jmsexception-and-jmsruntimeexception"><a class="anchor" href="#jmsexception-and-jmsruntimeexception"></a>10.2. JMSException and JMSRuntimeException</h3>
<div class="paragraph">
<p>Jakarta Messaging defines two sets of exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JMSException is the base class for all checked exceptions</p>
</li>
<li>
<p>JMSRuntimeException is the base class for all unchecked exceptions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, methods on interfaces defined in Jakarta Messaging 1.1 and earlier throw
checked exceptions, whilst methods on the JMSContext, JMSProducer and
JMSConsumer interfaces that were defined for the simplified API throw
unchecked exceptions.</p>
</div>
<div class="paragraph">
<p>For those methods which throw checked exceptions, catching JMSException
provides a generic way of handling all exceptions thrown by Jakarta Messaging.</p>
</div>
<div class="paragraph">
<p>Similarly, for those methods which throw unchecked exceptions only,
catching JMSRuntimeException provides a generic way of handling all
exceptions thrown by Jakarta Messaging. The Java language does not require unchecked
exceptions to be explicitly caught by the application.</p>
</div>
<div class="paragraph">
<p>JMSException and JMSRuntimeException provide the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A provider-specific string describing the error - This string is the
standard Java exception message, and is available via getMessage().</p>
</li>
<li>
<p>A provider-specific string error code</p>
</li>
<li>
<p>A reference to another exception - Often a Jakarta Messaging exception will be the
result of a lower level problem. If appropriate, this lower level
exception can be linked to the Jakarta Messaging exception.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Methods which throw checked exceptions include only JMSException in
their signatures. Jakarta Messaging methods can throw any Jakarta Messaging standard exception as
well as any Jakarta Messaging provider specific exception. <strong>The javadoc for these
methods documents only the mandatory exception cases.</strong></p>
</div>
<div class="paragraph">
<p>Methods which only throw unchecked exceptions do not include any
exception in their signature. The javadoc for these methods documents
the mandatory exception cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="standard-exceptions"><a class="anchor" href="#standard-exceptions"></a>10.3. Standard exceptions</h3>
<div class="paragraph">
<p>In addition to JMSException and JMSRuntimeException, Jakarta Messaging defines several
additional exceptions that standardize the reporting of basic error
conditions.</p>
</div>
<div class="paragraph">
<p>There are only a few cases where Jakarta Messaging mandates that a specific Jakarta Messaging
exception must be thrown. These cases are indicated by the words <strong>must
be</strong> in the exception description. <strong>These cases are the only ones on
which client logic</strong> should depend on a specific problem resulting in a
specific Jakarta Messaging exception being thrown.</p>
</div>
<div class="paragraph">
<p>In the remainder of cases, it is strongly suggested that Jakarta Messaging providers
use one of the standard exceptions where possible. Jakarta Messaging providers may
also derive provider-specific exceptions from these if needed.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging defines the following standard exceptions. In most cases there is a
checked exception (a subclass of JMSException) and a corresponding
unchecked exception (a subclass of JMSRuntimeException). The unchecked
version may only be thrown on those methods whose method signature does
not permit the checked version to be thrown.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>IllegalStateException and IllegalStateRuntimeException. These
exceptions are thrown when a method is invoked at an illegal or
inappropriate time or if the provider is not in an appropriate state for
the requested operation. For example, IllegalStateException <strong>must be</strong>
thrown if Session.commit() is called on a non-transacted session.
IllegalStateException also <strong>must be</strong> called when a domain inappropriate
method is called, such as calling TopicSession.createBrowser().</p>
</li>
<li>
<p>JMSSecurityException and JMSSecurityRuntimeException: These exceptions
<strong>must be</strong> thrown when a provider rejects a user name/password submitted
by a client. They may also be thrown for any case where a security
restriction prevents a method from completing.</p>
</li>
<li>
<p>InvalidClientIDException and InvalidClientIDRuntimeException: These
exceptions <strong>must be</strong> thrown when a client attempts to set a connection’s
client identifier to a value that is rejected by a provider.</p>
</li>
<li>
<p>InvalidDestinationException and InvalidDestinationRuntimeException:
These exceptions <strong>must be</strong> thrown when a destination is either not
understood by a provider or is no longer valid.</p>
</li>
<li>
<p>InvalidSelectorException and InvalidSelectorRuntimeException: These
exceptions <strong>must be</strong> thrown when a Jakarta Messaging client attempts to give a
provider a message selector with invalid syntax.</p>
</li>
<li>
<p>MessageEOFException: This exception <strong>must be</strong> thrown when an
unexpected end of stream has been reached when a StreamMessage or
BytesMessage is being read.</p>
</li>
<li>
<p>MessageFormatException and MessageFormatRuntimeException: These
exceptions <strong>must be</strong> thrown when a Jakarta Messaging client attempts to use a data
type not supported by a message or attempts to read data in a message as
the wrong type. They must also be thrown when equivalent type errors are
made with message property values. For example, a MessageFormatException
<strong>must be</strong> thrown if StreamMessage.writeObject() is given an unsupported
class or if StreamMessage.readShort() is used to read a boolean value.
These exceptions also <strong>must be</strong> thrown if a provider is given a type of
message it cannot accept. Note that the special case of a failure caused
by attempting to read improperly formatted String data as numeric values
must throw the java.lang.NumberFormatException.</p>
</li>
<li>
<p>MessageNotReadableException: This exception <strong>must be</strong> thrown when a
Jakarta Messaging client attempts to read a write-only message.</p>
</li>
<li>
<p>MessageNotWriteableException and MessageNotWriteableRuntimeException:
These exceptions <strong>must be</strong> thrown when a Jakarta Messaging client attempts to write to
a read-only message.</p>
</li>
<li>
<p>ResourceAllocationException and ResourceAllocationRuntimeException:
This exception is thrown when a provider is unable to allocate the
resources required by a method. For example, this exception should be
thrown when a call to <em>createTopicConnection</em> fails due to lack of Jakarta Messaging
provider resources.</p>
</li>
<li>
<p>TransactionInProgressException and
TransactionInProgressRuntimeException: These exceptions are thrown when
an operation is invalid because a transaction is in progress. For
instance, attempting to call Session.commit() when a session is part of
a distributed transaction should throw a
TransactionInProgressException<em>.</em></p>
</li>
<li>
<p>TransactionRolledBackException and
TransactionRolledBackRuntimeException: A TransactionRolledBackException
exception <strong>must be</strong> thrown when a call to Session.commit() results in a
rollback of the current transaction. A
TransactionRolledBackRuntimeException <strong>must be</strong> thrown when a call to
JMSContext.commit() results in a rollback of the current transaction</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jakarta-messaging-application-server-facilities"><a class="anchor" href="#jakarta-messaging-application-server-facilities"></a>11. Jakarta Messaging application server facilities</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-6"><a class="anchor" href="#overview-6"></a>11.1. Overview</h3>
<div class="paragraph">
<p>This chapter describes Jakarta Messaging facilities for concurrent processing of a
subscription’s messages. It also defines how a Jakarta Messaging provider supplies Jakarta Transactions
aware sessions. These facilities are primarily intended for the use of
the Jakarta Messaging provider.</p>
</div>
<div class="paragraph">
<p>If Jakarta Messaging clients use the Jakarta Transactions aware facilities the client program may be
non-portable code, because Jakarta Messaging providers are not required to support
these interfaces.</p>
</div>
<div class="paragraph">
<p>The facilities described in this chapter are a special category of Jakarta Messaging.
They are optional and might only be supported by some Jakarta Messaging providers.</p>
</div>
</div>
<div class="sect2">
<h3 id="concurrent-processing-of-a-subscriptions-messages"><a class="anchor" href="#concurrent-processing-of-a-subscriptions-messages"></a>11.2. Concurrent processing of a subscription’s messages</h3>
<div class="paragraph">
<p>Jakarta Messaging provides a special facility for creating a consumer that can
concurrently consume messages.</p>
</div>
<div class="paragraph">
<p>This facility partitions the work into three roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Messaging provider - its role is to deliver the messages.</p>
</li>
<li>
<p>Application Server - its role is to create the consumer and manage the
threads used by the concurrent MessageListener objects.</p>
</li>
<li>
<p>Application - its role is to define a subscription with a destination
and optionally a message selector and provide a single threaded
MessageListener class to consume its messages. An application server
will construct multiple objects of this class to concurrently consume
messages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This facility requires the use of the classic API or the domain-specific
APIs. It is not available in the simplified API. However since this
facility is intended for use by application servers only this
restriction does not affect applications.</p>
</div>
<div class="sect3">
<h4 id="session"><a class="anchor" href="#session"></a>11.2.1. Session</h4>
<div class="paragraph">
<p>The Session, QueueSession and TopicSession objects provide the following
methods for use by application servers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>setMessageListener() and getMessageListener() - a session’s
MessageListener consumes messages that have been assigned to the session
by a ConnectionConsumer, as described in the next few paragraphs.</p>
</li>
<li>
<p>run() - causes the messages assigned to its session by a
ConnectionConsumer to be serially processed by the session’s
MessageListener. When the listener returns from processing the last
message, run() returns.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An application server would typically be given a MessageListener class
that contained the single threaded code written by an application
programmer to process messages. It would also be given the destination
and message selector that specified the messages the listener was to
consume.</p>
</div>
<div class="paragraph">
<p>An application server would take care of creating the Jakarta Messaging connection,
ConnectionConsumer, and session objects it needs to handle message
processing. It would create as many MessageListener instances as it
needed and register each with its own session.</p>
</div>
<div class="paragraph">
<p>Since many listeners will need to use the services of its session, the
listener is likely to require that its session be passed to it as a
constructor parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="serversession"><a class="anchor" href="#serversession"></a>11.2.2. ServerSession</h4>
<div class="paragraph">
<p>A ServerSession is an object implemented by an application server. It is
used by an application server to associate a thread with a Jakarta Messaging session.</p>
</div>
<div class="paragraph">
<p>A ServerSession implements two methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>getSession() - returns the ServerSession’s Jakarta Messaging session.</p>
</li>
<li>
<p>start() - starts the execution of the ServerSession thread and results
in the execution of the associated Jakarta Messaging session’s run method.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="serversessionpool"><a class="anchor" href="#serversessionpool"></a>11.2.3. ServerSessionPool</h4>
<div class="paragraph">
<p>A ServerSessionPool is an object implemented by an application server to
provide a pool of ServerSession objects for processing the messages of a
ConnectionConsumer.</p>
</div>
<div class="paragraph">
<p>Its only method is getServerSession(). This removes a ServerSession from
the pool and gives it to the caller (which is assumed to be a
ConnectionConsumer) to use for consuming one or more messages.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging does not architect how the pool is implemented. It could be a static
pool of ServerSession objects or it could use a sophisticated algorithm
to dynamically create ServerSession objects as needed.</p>
</div>
<div class="paragraph">
<p>If the ServerSessionPool is out of ServerSession objects, the
getServerSession() method may block. If a ConnectionConsumer is blocked,
it cannot deliver new messages until a ServerSession is eventually
returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="connectionconsumer"><a class="anchor" href="#connectionconsumer"></a>11.2.4. ConnectionConsumer</h4>
<div class="paragraph">
<p>For application servers, the Connection, QueueConnection and
TopicConnection objects provide a special method
createConnectionConsumer for creating a ConnectionConsumer. The messages
it is to consume are specified by a destination and a message selector.
In addition, a ConnectionConsumer must be given a ServerSessionPool to
use for processing its messages. A maxMessages value is specified to
limit the number of messages a ConnectionConsumer may load at one time
into a ServerSession’s Session.</p>
</div>
<div class="paragraph">
<p>Normally, when traffic is light, a ConnectionConsumer gets a
ServerSession from its pool; loads its Session with a single message;
and, starts it. As traffic picks up, messages can back up. If this
happens, a ConnectionConsumer can load each Session with more than one
message. This reduces the thread context switches and minimizes resource
use at the expense of some serialization of a message processing.</p>
</div>
</div>
<div class="sect3">
<h4 id="how-a-connectionconsumer-uses-a-serversession"><a class="anchor" href="#how-a-connectionconsumer-uses-a-serversession"></a>11.2.5. How a ConnectionConsumer uses a ServerSession</h4>
<div class="paragraph">
<p>A ConnectionConsumer implemented by a Jakarta Messaging provider uses a ServerSession
to process one or more messages that have arrived. It does this as
follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It gets a ServerSession from the its ServerSessionPool</p>
</li>
<li>
<p>It gets the ServerSession’s session</p>
</li>
<li>
<p>It loads the session with one or more messages</p>
</li>
<li>
<p>It then starts the ServerSession to consume these messages</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A ConnectionConsumer for a Connection will expect to load its messages
into a Session. A ConnectionConsumer for a QueueConnection will expect
to load its messages into a QueueSession, as one for a TopicConnection
would expect to load a TopicSession.</p>
</div>
<div class="paragraph">
<p>Note that Jakarta Messaging does not architect how the ConnectionConsumer loads the
session with messages. Since both the ConnectionConsumer and session are
implemented by the same Jakarta Messaging provider, they can accomplish the load using
a private mechanism.</p>
</div>
</div>
<div class="sect3">
<h4 id="how-an-application-server-implements-a-serversession"><a class="anchor" href="#how-an-application-server-implements-a-serversession"></a>11.2.6. How an application server implements a ServerSession</h4>
<div class="paragraph">
<p>Jakarta Messaging does not architect the implementation of a ServerSession. A typical
implementation is presented here to illustrate the concept:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>An app server creates a Thread for a ServerSession registering the
ServerSession’s runObject. The implementation of this runObject is
private to the app server.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>The ServerSession’s start method calls its Thread’s start method. As
with all Java threads, a call to start initiates execution of the
started thread and calls the thread’s runObject. The caller to
ServerSession.start (the ConnectionConsumer) and the ServerSession
runObject are now running in different threads.</p>
</li>
<li>
<p>The runObject will do some housekeeping and then call its Session’s
run() method. On return, the runObject puts its ServerSession back into
its ServerSessionPool and returns. This terminates execution of the
ServerSession’s thread and the cycle starts again.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="the-result"><a class="anchor" href="#the-result"></a>11.2.7. The result</h4>
<div class="paragraph">
<p>Jakarta Messaging has defined a flexible mechanism that partitions the job of
concurrent message consumption into roles that are well suited for each
participant.</p>
</div>
<div class="paragraph">
<p>The application programmer provides a simple to write, single threaded
implementation of MessageListener.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging provider retains control of its messages until they are
delivered to the MessageListener. This ensures it is under direct
control of message acknowledgment.</p>
</div>
<div class="paragraph">
<p>The application server is in control of setting up the
ConnectionConsumer and managing all the threads used for executing its
MessageListeners.</p>
</div>
<div class="paragraph">
<p>The following diagram illustrates the relationship between the three
roles and the objects they implement.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,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" alt="image" width="390" height="388"></span></p>
</div>
<div class="paragraph">
<p>The following diagram illustrates the process a ConnectionConsumer uses
to deliver a message to a MessageListener<em>.</em></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWYAAAGjCAYAAAAfA78RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAACTwSURBVHhe7d1hlqI6EIbhXhcLYj3+nY24GRfjpEJVKDAgKIEI73NO7rQxJJjA11xGnT8AWOhJ+agAwKZSwOAzfg5DAYCPpCDBtvzcagGARTRGUJrMdTflADBPYwOlyVx3Uw4A0zQysAeZ73///sXSTT8AvNLIwF5kzglnAHM0LrAXmXOCGcAUjQrsSeadYAYwRaMCe5J5t2AmnAGMaVRgTzLvBDOAKRoVeffWfTCivWvt9jYd594+m9tDHywQ2qexY2mfq/Zg7XiBjEMwA5iiUZEhgeVCUsKzSDbvNc6UcbCuDVqCGcDGNCoyHrdn09yer5Fzf7bxyjIUe17CqWlCnVxthufTdo/nrXFXo7n2a8bxdenKdlSXgtKN7cbt2mlbrcsHc2b7iT4JZgBb0qiY4INMg+hxa/orWgslaTe46m2eXbbd4rbv2sfHC8YZ1IVWj9Dwpe7Wt7XATD+7cdN2fuxYusDObT/Vp9UtJeMQzACmaFS8Z0E0uB8sRdJtHE4uSAdtp9o7s+MMro41/Md1Gszpl4OQq/LRuDKOBXNuX3Lbv+tzKdlXghnAFI2KVzFUY3J1LDBToHkv4RTCsmljub1pv2ocLxeIUtf02/sx4s+jcWP/uX6C3Pbv+lxK5p1gBjBFoyJvcNWa7rP6K9S/yXCK23bJ97b90nEkDFM7d8thUJf6nr8fLNvNBXN2+zd9LiXbE8wApmhUYE8y7wQzgCkaFdiTzDvBDGCKRgX2JPNOMAOYolGBPcm8E8wApmhUYE8y7wQzgCkaFdiTzDvBDGCKRgX2JPNOMAOYolGBPcm8E8wA5mhcYC8y5wQzgDkaF9iLzDnBDGCOxgX2IPPtQ5lgBjBFYwOlyVwTzMC1LT3pNTZQmsw1wQwghsFcwT5krgllAGYQxHMF2/JzOw5lghnAICRGxcs9T/mw5MLYl9AGwMW8BEWmDOTCg1Km6JQDuICp0PX1ueejXIBQti863QBObDZslW8z1y7JBQrl86LTCuDEVoVssLY9AGCBb8KVQAaAjXwTxgCAjRDGKMofYJTpAnA8oAh/YMWCZXJzpwXnxlpjM/5gSgXby82zFvwu1hGbiwcUjmNroAW/gTVDMfHAQh1sPWRhUCXWCEWlAwx1cWtTBd0tFKLTDBDItbM10nIo3aXvPR7Ph/54b93ra+9au71Nx7m3z+Zmr2A7Yd+A7iDFb7D1koU7iu7Kl+7Ptrl1wRwCzoekhGeRbN5rnC/pNOOi0kmO3+LW7hC6GxNC4MZ9a55tG0oMPqsLRcP4cWu6x9LgcXs2FtIDr9vFq9RGtm3Dsy7cw39vjbadar9mHF8Xx8rUpStmN7Ybt2unbaVuobANLkwPA/wiWT8tu9NdyJLA7cK4C6sud60uSGHmQzXwQab12e2kXaqUh82zy8Zb3PZd+/h4wTiDutDqERq+1N36tt1r6tqMxx1u917YN1xUPDDx22wdZUH3pMNnpaAMLJAG93WlxJQaBbNj4ZbdzgLXuCAdtJ1q78yOM7g6ttc0qtNg9q85dPpsRuMSzFgiHlg4B1tPWdi96NBZPoTsHm4+mPpgjqHqGlhgZrd7CVrpp43l9qb9qnG8XLhLXdNv78eIPxPMWIFQPiFZ0z2/oFuHndBfVUpwdYHkrzRDfQwsvS+riTW4ak1X0pntMiEZt439vG+/dBwJ09RO7xG/1KW+8/eYbVyCGe/o0uNMZF2l7BXOOmyWDyG7YsY6Os24iHjy1sb2q/ZSO9vPPcJZh5zgrj4n7iFjXjfLuIJ4otTC9qemfXrH73Ot++32rygdDoXoNOPkqggS248a9mULtb4e2Z/SV806FArRacbJ6XLvS8b15cxqe62yDyXDWYdBITrNODld7vJkLCtXdvQ8yLgSzHv9ZeDGBvMnFcAZ6em6PenbF7w6Yo5knB8LZj9HwCXo6bot6bdU32dlc1Z63qR/C+aKw9nPB3A5erpuQ/qz8kI+juqe7z/KuoJ9FWTmgwRvybafbPeO7/Ob/VOT87cR6bvSYE6vPT4CLkpP1W1If7N92vcEJPKe1jXfrBXaf/ze12+2XcqN8eUvAJvLrdfISL+VBLN/rQACPU2/I/1YmfUSzFKV+VhuClBXFwJcvusg/iwbWPCFP23s9PWJgyvz7qrcf1y2C8y1X8Uo7fuP3nZ9aBDrvqQxbP/aULJ9LWf7szXp88BgTq8rPgIwoKfp56SPxf1kgtkC1n9UN1sXgvHxyFyRhj/t+xRSe/cvX/R9vIZo3F7bTPblyNc4xmbhz7YNfYXX0+p2XV/D/bPAz/W1hs3xFutlpK+dg9m/DgAz9DRdT7a1stjMFfPgy2OkxHb+ilmufPPB7AO2695dDYfS1Q2D+aOvYozP38OV+z38GK6Cw+NuN227zP4F3wazsdezBenHgrlgOKd9jo8ALKKn6Tqy3UfbvgSzBG9/e2A2vGLQhSvUBcHsQ7f/opxhMEtbv91UX0PSR6iP24e2emuj365sMAub+0/Xzsj2hYLZ7yPOwa8pZXn5iJ6iy8k2Vj4iwez6GL4rQ0K6f05CTQKtbysh6L4K0oIvF4ChzrZr5T5vfL6/ih4/XvNVjCnoZYyX7TL7J7UbBrOx1/cp2XbDYE77Ex/hDNKa4jN+DkNZTDdf7pNtUI6sx6drItt9Gcxp/PgIZ5DWFNvyc6tlkm6yjLRfuw3KW7su1lb+/CCY03jxEc4mHhsoT+a6m/JX2uQ9abumPfa1dn2s/QcF56ZHCEqTue6m/JU2mSftlrb92lafzNuijx8jayRXvkvZui4ouAY9MrAHme+p/1vVJvOWtvuee0fDty4YzELWamk4S9sFBdehRwb2InOeC2d9et7SdtMm3v0w+lScfwfG4B0Oo+2szdyn/LLBPB4z9SX9uHeEpF8O/l0iOta4Ljd2atM829bejZHrf3vSvy30O90+zxZcix4Z2IvM+WHBLIFrIZl+llD0Id2l6aL3GS/6lF/q03FjSjvfT/+vNQdu/FQXtgrDvNbdX8fu23S/WIZ1QW7fNiJrtSaY9YDIFVyLHhXYk8z7YcH87hN2qW4UzMs/meeurEPpusqEn68b9WPbpmL7k+rGV8NW9zq232/bx/ynGrcnfdtCS5ljbQf71RVcjx4V2JPMuz9fu6VYsBhL2rwj4eRDMP4cgjGFUwrJZVfMvm4chP7DH9Yu8XWjfgZXzDkT/cn8jMe2/ZqqK0n2xy/0HGsrf7qCa9KjAnuSeffna7cUCxdjabtpE/eYQxjGunT/tm/XheDEdi5QY9hpQEpJn/KbCNJU99KPvxKe+tRh13ZQlxvbXVX3gf/afwnSt1/oObYvruC69KjAnmTe/fnaLcXCxVjabpVccJ6EvzpOV/A7kbXyCz1H2vr24Wdclx4Vnxvcrit40G86zsE5JK/Bn6/hcaRPz1vabpUTB3N4cf3VsV3p70TG9As9Z9w2PMZ16VHxIfk/RxeSxS5I9hpnJzLvuXNQn563tB2OJ2vlF3rOuK0cELgsPSo+JH85n70IyVykyEVZvI0ptwfD82m74V+kZ9uvGcfXpdulo7p0gZi/bdq107ZStzHpO3cO6tPzlrbDsWSd/CJLmTNuLwcELkuPii/4INNw87f1YsBKCEq7wVWv/uV9CF3Z9l37+HjBOIO60Cr7dlf56l5t2wV012Y87nC77chryJ2D+vQ8abe0bTVsUZdy74X+VbJGfpGlzBm3D4+/pl2jIJ3qNZZso71vw8JtcD9YiqTb+Nx0QTpoO9XemR1ncHU88XZXDeblb83dluxH7hzUp9+TtmvaH25VMIfFyv7v0e+w9fGLLGXOuH14/DXt+jj6C/ZMf0E0Fid6nX4upmnvn4mh6ubZAjMbaC/zKedfG4v8m55z7VeN4+XWUOqafns/Rvx5NO5s/x+Sec+dg/r0MtJ+7TZljO4T+cfu/lA3qZnnwn/7e1mjf+DVP+f7SvfE6tO9jnWhLMbbhMdf064Por9gw3r5k/fX/4JoTKd6rXScuOJp758b/DJM55o/V/Vtoi7wTNw2LtL79kvHkTBN7fTcfalLfS98a+7GZLzcOahPL/fJNlsbTlL3vyHpsU2m/jloO3rO6v5a+W3dLYa094th7f2JXhNZDyl+ca28M94uPP6adr0xO+nCWqa1dieiW7vucVi3dMJ6r9sM6tIv3lFdOl6O+QuisTDWJ9x+5gv2J/OeOwf16eVkGyvH8SeOnIT9PsUiZ66eTIPfrvrcMNhF6E9PtHf3mmpir8kvrC/vjLcNj7+mXW+qX68uGOXnwRqm9enXUepkd2LRutw2w2MhPA4NX+oO/guisfS6Ni7Yn8x77hzUp9eTbb/ZfjN6Ar6cENkTT+lzUXz7TX+FNXXypfYVsLmX4hfVlyXG24fHX9OuN+V/Wdp65n7hhto+mB1bx8ltUl2df0E0FvbrE/p6XorR3rEnmffcOahPf0a2t7InOQH6seV/H/2JNL4vlXlOatNJKieb/i9qPKvm7zUdzV6HX8xxWcr6sv7Cn1/TrjflA0/WTX7Oh2AXzHc5PtyTFsxvgzO3zlJ38F8QjelUrzVYb6kY0d6xJ5l3f+52S/HlYrjOYkE5NsdS/EKOyxq+z1H5mHa9sf6Xq4RkF365X7j9L9jB1XG6in7dRsI0tdN7xC91KXznf2lXHMzu9UzS3rEnmXd//nZLsdFiaIepYFs2r34Bc2Ut69P636KU4APPrpivLMxzCdo79iTz7s/hbik2XAzXcbET9GpsLqX4xRuXT/n+Z8oq2vXG3JVu5h7y1XQzvTntHXuSeffncrcUBRZDO08Fn7H584uWK9+w/m2sTFlNu0ZBOtUl6AjYi8y5P5+7ZSi0EG4QrcFSMmdW/IKNyxb8WKPyMe0aBelUl6AjYC8y5/687pah8ELoQIOCV35+/CJNla34cbV8TbtGQTrVJegI2IPM9/jc7pZhh4XIDJzKlfl5GM/RVNnaePzwM6BHB0qTufbntz8HtUl54x3QnRiUMxu/1tx8zJUSxvsRHgN6dKA0mWt//vlzUJvsY7wT4yL7Y+UM/OvJvd53pbTxfoXHuDg9NFCYTLU/98bnnzY7xnjHfJF9s/Ir/D5Lyb2ud2VP430Mj4F4XKAMm19/3uXOP21+vNyOWpH9XFpKyI2TK7l9X1KOMt7n8Bgw8fjANmw+/fk2LjLpRjerT27HlxR5TVuX3DjflFqMX1t4DCR6TFA2KP48y5XQZkBP0brlXsivlRrJ+vt97A4JoOOPDUq5otM9oKfo78i9sBrLL5D19/vcHRLAkD9GKNsVnd4sPUXPKTcZ35YzkfX3r607JIA8f6xQPi86nbP0FMUVyfqvPWAAlKenKK5I1l8KwQzURU9RXJGs/6gAqICeorgiWX+9UiacgYroKYorkvXPBLMUAAfSUxRXJOs/EcxWABxAT1Fckaz/ggJgZ3qK4opk/RcWADvSUxRXI2v/RQFQkJ6muCJZf3sPs95rXsqH9GA77RoF6VTjxHSpcUWy/h8G85gFtPa8gXv7bG4PfQAvzjhOTZcaVyTrv1EwJ9o1CtKpxonpUuOKZP2LB/Pj9mxCtTz199c8u4vg+7NNdW14NH4sTeyK2Z5rnm0bijwZnuvauvbJ43lr9LnmFh4F2fZuTGs3kO+naRrXRyB1bSjWdxrL2rzr591+vAptcXK61LgiWf/ywfxIYfO4dcFqf3YeIaeGj8MmXXiFYO7bdgGXglk3GPbVPbZbIOnnTPvBdjqW966fROo0UKVdbpwl+xNl9iNHpxonpkuNK5L1Lx7MGqjylJQuhPwVslxFjx9Lky6kJLQtq1KIuQAbBFvg24cnw9VseDLT/t7aeFp8J8G7fhJflx1nvp93+5ET2uHkdKlxRbL+pYPZB5OE0EvujMPOHuufPnjT9pkANPLYP+f7sjppP95u7F0/ia+bGGeuH2u3hk41TkyXGlck6186mCWEpFpKK/diQyBJGFmd3Ge9jR7HnErh1V9Ny33ZGGKzwTZxT/elvb9KD33r8735fhJflx3nXT/v9uNVaIeT06XGFcn6Fw/mL/ngzV5xX5BONU5OlxtXI2tfezAPrigXvmvh7LqZxtnpcuNqZO2l1B3MGNOpxsnpcuNqZO2tEMy/Q6caJ6fLjauRtR+Vr2nXKEinGieny40rkXXXq+Rx+Yp2X468o2H2k3a5e9L+nQ+jT9vZdrOfUGz6Tx36bSf7LyuMg4vQJf/S4ODe8W/Q7dNlg7chLXTUPh/MXu9E+Zh2X44EsQZifNudLpi9e8O/i8OOh0Fd2FLeW+0fx08azn5Csf/U4ZL+Y38F6VTjAnTJvyFXDf5qQR67Tz0VE8b5+G/rj9rn48mavykf0e7L8b983c8WjvlP0sm6Wp2s7/hx7OHlE4r+wzHr+u+2KSWMg4vQJf+CP2EG8m+wj49j0WDM1fkDPoWvP4HchxO6s0b3YfmYX+2z379Mn+lKSuom//c78xql/fjLcjbWv5bZspp2X46b39xcD69eM/z2Qh/nPqHo+8rVZY37L0CnGhegS/65qQNW6v3JE38OB+/4f0FzdYM+7YD3B37cpu2vmPW5pWMO+nc+217/F9btX3pettV9lDrfT/o0m7Bt3VglyHqvKKvoEOW4+c3O9eCXZfdJujjnqW76k4ZWZ59Q9H316/S+/3Ir1wnj4CJ0yb/gTxhzDwexuxIJR/Dkl8rk6nL/29ifgCaMMQrmd18ckxszWbPPg5NUt3k3zuj5weuTMhqrBBnH3rtsJdSN2T6tokOcgj/W7Iq5BjrVuIB4En5HQsoFWohKuR0gVxo+iOLPb8LL6vyJkfjQktCU/hdeMY/7D5Xf7bNnz7t26WR2deN+BlfMxrcvQNZ6QTCb2L778T0d4iTcL147xirQzTSuIh6AX8m+wyF/v9aH0zi8hsHZ92fP91fSEqrav2yQ+lg4Zvfg432WP227/n9h+31Ooeu2fe0n8xp9+43ZOCuC2di2s3QYFKRTjQvRpccZyfpK+SCUPesnS4dCQTrVa326nbF1p6wrm4id4Zxkbceh/EEwm+yBp0OhIJlmLWt8sl3aBp/xcxjKV1iIE7J13TCYjfWN/aV11fLOkvbpeWzLz62W1bQrnIGsp5QCoex9fLBhM2mttYyNn8+2wT5krrspXy5uhHOQtSwcyt5HBxyKsLVYUoweNShN5rqb8nXihvhtto47BrOxsVGPdDxMFexH5vvTc1G7wC+S9ZPiw/jTA+ELth84VjoeJorQIwd7kTn/5JxMC4ffYuvmw/iTA2BDtk/YXzoeXMnRowd7kTn/5ryMHeA32Hr5MPZFFvRAtn+oix492JPM+7fnZewE9bI1kuKD2JfwXC1sX1EHPYqwJ5n3r85P3SgV1MXWxS/yuITna2T7jmPpkYQ9ybxvco7qxrGgDrYefoHHJTxfO3sdOIYeTccYfJNk+iKbDxX8rpmtyevd7DzVDrRrHEXWwIpf3HEJz/8Se03Ylx5VBwhB6sO4pq9YLU3mfdNzVTvJFmwvN89+QXMltPllv77/v0aPtAPEr+/Nfa1q7mtX/bcxvn6jY6xLV8z5b4ns2mlbqTuQ7EeRc9Z36jqnbFxy8zxXwjZnYK8f5WlUHMQHpobo4Ot5NWwHdaGV/KtBL3W3vq3d0kg/u6vz4XbHkNdb7Lz1HVOOL7osZ2InLcrRqDiehejgvrOUmKL+6tj+kYtRnQbz4n/J6ECyz0XPXd85Zf+iy3B2evKhAI2K/UlA+nvMFsxvg9OFbCJ1+i8QWT8i/Xy1YJ7iB6VsU3Rqr4yA3p5GxTEGV8fZ+8ndv+4jYZra6T3il7oUviv+JaODyL5xbuNs9GTEBjQqsCeZd4IZZ0VAf0+jAnuSeSeYcXYE9Oc0KrAnmXeCGVdBQK+nUYE9ybwTzLgaAno5jQrsSeadYMZVEdDvaVRgTzLvBDMOpcciCtKp/oT2gD3JvBPMOJQei3V7PPQ9tG8sbbcznepPaA/Yk8w7wYxD6bFYsfuzTR9umLO03f50qj+lvWAvMucEMw6lx2Il/KfKRp8gk4/0puf0+xb0o77S9mbtjv7YWEbYr29oL9iLzDnBjEPpsViF4cdxH/FbytKVsLtNkdqFYO6DmCtmfE/m24cywYxD6PFYCX/F7L6lLAau+46FUCyY7TsWThzMQntCaTLXBDMOp8djfVLodoF7c18Xmf41DYIZG5O5JphxOD0eq/DyjWRd7eBKWUrbaiAPglnb9fdCqhH2+SvaDQqTqSaUUQU9JlGQTvU3YmhIwbb83I5DmWDGYfT4REE61VsZhAnlu5ILY19CG2B/mh0oSKd6E7nwoJQpOuXA/jQ7UJBO9SZyAULZvuh0AyhATrDTnmS5QKF8XnRaAezk1AENAL+MgAaAShHQAFApAhoAKkVAA0ClCGgAqBQBDQCVIqABoFIENABUioAGgEoRzgBQIa6eAaBSBDQAVIqABoBKEdAAUCkCGgAqRUADQKUIaACoFAENAJUioAGgUgQ0AFSKgAaAShHQAFCpJQFNgAPAAeYCekl4AwAKyYWw1RHOAHAgH8Q+mK0OAHCQcShbAQAcIBfIvgAAdpIL4akCANhBLoAp6wsAbCoFDD7j5zAUAPhIChJsy8+tFgBYRGMEpclcd1MOAPM0NlCazHU35QAwTSMDe5D5/vfvXyzd9APAK40M7EXmnHAGMEfjAnuROSeYAUzRqMCeZN4JZgBTNCqwJ5l3C2bCGcCYRgX2JPNOMAOYolGBPcm8E8wApmhUfO7euk+1tXet3d6m49zbZ3N76IP9yWsgmAFM0aj4UAg4H5ISnkWyea9xdiLzTjADmKJR8aHH7dk0t+frtef92cqVrRR7Xq5SmybUteHZ8Hza7vG8Ne5qONd+zTi+Lo6VqUtXzG5sN27XTttK3cakb4IZwBSNii/4INNwe9ya/orWQlDaDa56m2eXjbe47bv28fGCcQZ1odUjNHypu/Vtu4Du2ozHHW63HXkNBDOAKRoV27BwG9wPliLpZoFrXJAO2k61d2bHGVwda/iP6zSY0y8HIVflo3EJZgBH0Kj4TAxVl1wWmNlAewnaEJZNG8vtTftV43i5cJe6pt/ejxF/JpgBHEyj4nODq9bsfd6/l8AzcduYfO/bLx1HwjS103vEL3Wp7/w9ZhuXYAZwBI0K7EnmnWAGMEWjAnuSeSeYAUzRqMCeZN4JZgBTNCqwJ5l3ghnAFI0K7EnmnWAGMEWjAnuSeSeYAUzRqMCeZN4JZgBzNC6wF5lzghnAHI0L7EXmnGAGMEfjAnuQ+fahTDADmKKxgdJkrglmAEtobKA0mWuCGcBbmhkoTKaaUAawVAwNlGHzOw5lghnAEgT0hmw+c4FsRSYdAGZpWFA2KOMQHpfQBgDeywVIDSXs2tuS267WEvYXANbJhcnRJezWbMltU1sJ+wkA38mFy5El7FK25NrWVMI+AsBpvYSyFgDAgQhlAKgMwQwAFSKUAaAyBDMAVIZQBoDKEMwAUBmCGQAqQzADQGUIZgCoDMEMAJUhmAGgMgQzAFSGYAaAyhDMAFAZghnAuem/H4pCdJoBYDnNDxSi0wwAy2l+oBCdZgBYTvOjLvf22TRNCLX2eZefb49Y/bg1z/bePS+73pXQJj5bpzjJALCG5kddJHhjAnc/Z4NZn091ldJpBoDlND/q4sJ4Kphf6iql0wwAy2l+1GUimO/tH8EM4Pw0P+rig/l5f7bxXvJfvO9MMAM4Pc0PFKLTDADLaX6gEJ1mAFhO8wOF6DQDwHKaHyhEpxkAltP8QCE6zQBwaoQdAFSGYAaAyhDMAFAZghkAKkMwA0BlCGYAqAzBDACVIZgBoDIEMwBUhmAGgMoQzABQGYIZAA42DuJ3jwEAhUnwvisAgJ3lwtgXAMABcoEsBQBwkFwoSwEAHIhQBoDKEMwAUCFCGQAqQzADuCQLP8q6AgCbSgGDz/g5DAUAPpKCBNvyc6sFABbRGEFpMtfdlAPAPI0NlCZz3U05AEzTyMAeZL7//fsXSzf9APBKIwN7kTknnAHM0bjAXmTOCWYAUzQqsCeZd4IZwBSNCuxJ5t2CmXAGMKZRgT3JvBPMAKZoVGBPMu8EM4ApGhXHuLfuE3HtXWs/dG+fze2hD+omr5dgBjBFo+IAIUh9GEtIf5vNv0LmnWAGMEWj4gCP27Npbs/Xa9z7s5UraCnpeVf314ZHmbp0xfx43hqtt+3ll8DL9seR/SCYAUzRqDiID0wN0cet6a+cNWwHdaHVIzR8qbv1be2WRvrZXZ0PtzuGvF6CGcAUjYrjWYgO7jtLiSnqr46bZ5e7ozoN5ntrzwdyVS7bp6tpghlA/TQq9icB6e8xWzC/DU4XsonUNf32PoTjzwQzgB+iUXGMwdVx9n7yXwrb1E7vEb/UpfDN32MmmAH8Co0K7EnmnWAGMEWjAnuSeSeYAUzRqMCeZN4JZgBTNCqwJ5l3ghnAFI0K7EnmnWAGMEWjAnuSeSeYAUzRqMCeZN4JZgBzNC6wF5lzghnAHI0L7EXmnGAGMEfjAnuQ+fahTDADmKKxgdJkrglmAEtobKA0mWuCGcBbmhkoTKaaUAawVAwNlGHzOw5lghnAEgT0hmw+c4FsRSYdAGZpWFA2KOMQHpfQBgDeywVIDSXs2tuS267WEvYXANbJhcnRJezWbMltU1sJ+wkA38mFy5El7FK25NrWVMI+AsBpvYSyFgDAgQhlAKgMwQwAFSKUAaAyBDMAVIZQBoDKEMwAUBmCGQAqQzADQGUIZgCoDMEMAJUhmAGgMgQzAFSGYAZwbvqvIaEQnWYAWE7zA4XoNAPAcpof+7q3IbDa510fPp+P5635e7Z9xWnoNAPAcpof+4rB3DxvD338uD2bsCsEMwAEmh8b6a58pdu/5hYeBTGEtc6ukkNd07bPVpP5cQs/t40G8/3ZWnvrw9elK+1RnYZ799hC39qEvmf7LyeMAwDraH5s4nFrnk0KW/1ZglkvhaUu/ijBfLs/b60EYwjz8Oddn0ttRGwXWvg62SJ0+1J3l5700Utf/a2SXP8l6TQDwHKaH5u4h6vSlHNyBSsJ6MIvhaLWde1DQLvwvbd21aul28BdHY+vhq3OXa2H0vXV7898/+WEMQBgHc2PTUj4+RCOP88Es/zZyi2NUGfPpTZTXH9JqJOXYtUSvuO+cnV76GYZAFbQ/NhI/h7zZDDHq97unnEfmP5K+C+2k+fssd1jfqnTcJYiYd/339U1zXT/JYUxAGAdzY9T8lfHdsW8N51mAFhO8+Ok3NXxDu/AyOlmGQBW0PxAITrNALCc5gcK0WkGgFMj7ACgMgQzAFSGYAaAyhDMAFAZghkAKkMwA0BlCGYAqAzBDACVIZgBoDIEMwAcbBzE7x4DAAqT4PXhaz9bvX8OALATH8K5AgA4QC6QpQAADpILZSkAgAMRygBQGYIZACpEKANAZQhmAAAAXI9dBZcoAIAVYniWZGPIYACAacUDeczGlMEBAL3dA3nM9kF2BgCu7PBAHrN9kp0DgCupLpDHbB+1AMCpVR/Knu2v7DgAnNFPhbKx/ZYXAABn8pOhbGz/5YUAwBnkQ/nehvr2edeHz+fjeWv+nm1fURV7HfKCAOCX5UNZxGBunreHPn7cnk1oW2swC3s98sIA4NekEJsUgrlp22eryfy4hZ/bxgXz/dlaP80tXE+P6uLV9vhxoAHf1VnwW7vQfxoj1/97Xb+xAMBP0RibIcF8uz9vrYTiI/55v/XB/HA/d21DK18XtrkPgjw8L+ka/mMha+377frbJbn+15DX2L1UAPgNGl8zNAwlXG+PENCj4L236cq0K/EJf4XcbTd8LFt24WvbyWbdGPJcH8j5/peTbf79+yd/AsBP0PiaYVep4c9WbmmEXPTBPLiizRlf5Q6C3qper45zdZ+S10k4A/gFGltvpGCVq97u/vAwLP3V8F9sK8/bY7mnfBs9jpuGfq1OAr8fo6trGhvjtf+1ZDsJZsIZQO00tuqRu2LegrxWghnAL9DYqom7Ol7xDowlpE/CGUDtNLKuQV4vwQygZhpX1yGvmWAGUDuNrIUm3l0xyb1PuQbyei2YCWcAtdLIWuhdEA/cn+3G94i/Ja+XYAZQO42shSavmP3b2fq308XH8r5ne86COmzXte3bD/pw7eQtc32bz0m/PpQJZgC10thaaCKYh+9pDo+7VI1XzP6j22l7CWattG0HfWTafUteK8EM4FdodC1ggWnSY3/FbJ/m64L5lvs4tevHAjn7sevxeF+QPglmAL9Co2uByWB2fFiPr5hNJpiHV91qo2CW10goA/glGl8LhKCU9r5IcEqo9nV2P1i/oMjfY9b2uWCOQT7T7hvSH8EM4JdofJ2TvL5xKBPMAGoXw0vK2djrIpQB/KpThbO9nnEoE8wAfs0pwtleB6EM4OdpcP10ONv+jwPZSngOAH7ST4az7XcukKXICwOAX6Zx9xtkf6XkAllKfEUAcAIx7Gpm+5gLYyvyQgDgNDTYqgto26dxCI9LaAMA5+NC7vCAtn3w4TtVQjsAOK9R4O0e0Dam34+pEtoBwHWMArB4QNsYftypEtoBwHWNArFY8eNMldAOAGByQblX0V0AAOTkgrNU0SEBAEvkgnSrokMAADDl7+8/9RQ4l/8ofocAAAAASUVORK5CYII=" alt="image" width="356" height="418"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="support-for-distributed-transactions"><a class="anchor" href="#support-for-distributed-transactions"></a>11.3. Support for distributed transactions</h3>
<div class="paragraph">
<p>Some application servers provide support for grouping resource use into
a distributed transaction. To include Jakarta Messaging transactions in a distributed
transaction, an application server requires a Jakarta Transactions API
capable Jakarta Messaging provider.</p>
</div>
<div class="sect3">
<h4 id="xa-connection-factory"><a class="anchor" href="#xa-connection-factory"></a>11.3.1. XA connection factory</h4>
<div class="paragraph">
<p>A Jakarta Messaging provider exposes its Jakarta Transactions support using XA equivalents of the
normal connection factory objects.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For applications which use the classic or simplified APIs, a Jakarta Messaging
provider exposes its Jakarta Transactions support using a Jakarta Messaging XAConnectionFactory which
an application server uses to create XAConnection or JMSXAContext
objects.</p>
</li>
<li>
<p>For applications which use the domain-specific API for point-to-point
messaging, a Jakarta Messaging provider exposes its Jakarta Transactions support using a Jakarta Messaging
XAQueueConnectionFactory which the application server uses to create
XAQueueConnection objects.</p>
</li>
<li>
<p>For applications which use the domain-specific API for pub/sub
messaging, a Jakarta Messaging provider exposes its Jakarta Transactions support using a Jakarta Messaging
XATopicConnectionFactory which the application server uses to create
XATopicConnection objects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These connection factory objects provide the same authentication options
as normal connection factory objects. They are Jakarta Messaging administered objects
just like normal connection factory objects. It is expected that
application servers will find them using JNDI.</p>
</div>
</div>
<div class="sect3">
<h4 id="xa-connection"><a class="anchor" href="#xa-connection"></a>11.3.2. XA connection</h4>
<div class="paragraph">
<p>The XA connection objects extend the capability of normal connection
objects by providing the ability to create XA session objects.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An XAConnection provides the ability to create XASession objects.</p>
</li>
<li>
<p>An XAQueueConnection provides the ability to create XAQueueSession
objects.</p>
</li>
<li>
<p>An XATopicConnection provides the ability to create XATopicSession
objects.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="xa-session"><a class="anchor" href="#xa-session"></a>11.3.3. XA session</h4>
<div class="paragraph">
<p>The XA session objects (XASession, XAQueueSession and XATopicSession)
provide access to what looks like a normal session object (a Session,
QueueSession or TopicSession) and a javax.transaction.xa.XAResource
object which controls its transaction context.</p>
</div>
<div class="paragraph">
<p>An application server controls the transactional assignment of an XA
session object by obtaining its XAResource. It uses the XAResource to
assign the session to a distributed transaction; prepare and commit work
on the transaction, and so on. A client of the application server is
given the normal session object. Behind the scenes, the application
server controls the transaction management of the underlying XA session
object.</p>
</div>
</div>
<div class="sect3">
<h4 id="xajmscontext"><a class="anchor" href="#xajmscontext"></a>11.3.4. XAJMSContext</h4>
<div class="paragraph">
<p>XAJMSContext provides access to what looks like a normal JMSContext
object and a javax.transaction.xa.XAResource object which controls its
transaction context.</p>
</div>
<div class="paragraph">
<p>An application server controls the transactional assignment of an
XAJMSContext by obtaining its XAResource. It uses the XAResource to
assign the session to a distributed transaction; prepare and commit work
on the transaction, and so on.</p>
</div>
<div class="paragraph">
<p>A client of the application server is given the XAJMSContext’s
JMSContext. Behind the scenes, the application server controls the
transaction management of the underlying XAJMSContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="xaresource"><a class="anchor" href="#xaresource"></a>11.3.5. XAResource</h4>
<div class="paragraph">
<p>The functionality of XAResource closely resembles that defined by the
standard X/Open XA Resource interface.</p>
</div>
<div class="paragraph">
<p>An XAResource provides some fairly sophisticated facilities for
interleaving work on multiple transactions, recovering a list of
transactions in progress, and so on. A Jakarta Transactions aware Jakarta Messaging provider must fully
implement this functionality. This could be done by using the services
of a database that supports XA, or a Jakarta Messaging provider may choose to
implement this functionality from scratch.</p>
</div>
<div class="paragraph">
<p>It is important to note that a distributed transaction context does
<em>not</em> flow with a message; that is, the receipt of the message cannot be
part of the same transaction that produced the message. This is the
fundamental difference between messaging and synchronized processing.
Message producers and consumers use an alternative approach to
reliability that is built upon a Jakarta Messaging provider’s ability to supply a
once-and-only-once message delivery guarantee.</p>
</div>
<div class="paragraph">
<p>To reiterate, the act of producing and/or consuming messages in a
Session can be transactional. The act of producing and consuming a
specific message across different sessions cannot.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-application-server-interfaces"><a class="anchor" href="#jakarta-messaging-application-server-interfaces"></a>11.4. Jakarta Messaging application server interfaces</h3>
<div class="paragraph">
<p>The domain-specific APIs for point-to-point and pub/sub messaging
provide their own versions of Jakarta Transactions aware Jakarta Messaging facilities.</p>
</div>
<div class="paragraph">
<p>However the classic API provides common interfaces, which should be used
in preference to the domain-specific interfaces. These are listed as Jakarta Messaging
common interfaces in .</p>
</div>
<div class="paragraph">
<p>Table 11‑1 Relationship of optional interfaces in domains</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Classic API</th>
<th class="tableblock halign-left valign-top">Domain-specific API for point-to-point messaging</th>
<th class="tableblock halign-left valign-top">Domain-specific API for pub/sub messaging</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServerSessionPool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ServerSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConnectionConsumer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAConnectionFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAQueueConnectionFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XATopicConnectionFactory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAQueueConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XATopicConnection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XASession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAQueueSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XATopicSession</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XAJMSContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Not domain-specific</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-of-jakarta-messaging-api-in-jakarta-ee-applications"><a class="anchor" href="#use-of-jakarta-messaging-api-in-jakarta-ee-applications"></a>12. Use of Jakarta Messaging API in Jakarta EE applications</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-7"><a class="anchor" href="#overview-7"></a>12.1. Overview</h3>
<div class="paragraph">
<p>The Jakarta EE Platform Specification
requires support for the Jakarta Messaging API as part of the full Jakarta EE platform.</p>
</div>
<div class="paragraph">
<p>The Jakarta EE platform provides a number of additional features which are
not available in the Java Platform Standard Edition (Java SE). These
include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Support for distributed transactions which are demarcated either
programmatically, using methods on jakarta.transaction.UserTransaction, or
automatically by the container. These are referred to in this
specification as Jakarta transactions to distinguish them from Jakarta Messaging local
transactions.</p>
</li>
<li>
<p>Support for Jakarta Messaging message-driven beans.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These features are defined in detail in other specifications including
the Jakarta EE Platform specification and the Jakarta Enterprise Beans
specification. However the use of the Jakarta EE platform imposes
restrictions on the way that the Jakarta Messaging API may be used by applications,
and those restrictions are described here.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging specification does not define how a Jakarta EE container integrates
with its Jakarta Messaging provider. Different Jakarta EE containers may integrate with
their Jakarta Messaging provider in different ways.</p>
</div>
</div>
<div class="sect2">
<h3 id="restrictions-on-the-use-of-jakarta-messaging-api-in-the-jakarta-ee-web-container-or-enterprise-beans-container"><a class="anchor" href="#restrictions-on-the-use-of-jakarta-messaging-api-in-the-jakarta-ee-web-container-or-enterprise-beans-container"></a>12.2. Restrictions on the use of Jakarta Messaging API in the Jakarta EE web container or Enterprise Beans container</h3>
<div class="paragraph">
<p>Jakarta Messaging applications which run in the Jakarta EE web container or Enterprise Beans container are
subject to a number of restrictions in the way the Jakarta Messaging API may be used.
These restrictions are necessary for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In a Jakarta EE web container or Enterprise Beans container, a Jakarta Messaging provider operates as a
transactional resource manager which must participate in Jakarta
transactions as defined in the Jakarta EE platform specification. This
overrides the behaviour of Jakarta Messaging sessions as defined elsewhere in the Jakarta Messaging
specification. For more details see section 12.3 “Behaviour of Jakarta Messaging sessions in the Jakarta EE web container or Enterprise Beans container”.</p>
</li>
<li>
<p>The Jakarta EE web containers or Enterprise Beans containers need to be able to manage the
threads used to run applications.</p>
</li>
<li>
<p>The Jakarta EE web containers and Enterprise Beans containers perform connection management which
may include the pooling of Jakarta Messaging connections.</p>
<div class="paragraph">
<p>The restrictions described in this section do not apply to the Jakarta EE
application client container.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applications running in the Jakarta EE web containers and Enterprise Beans containers must not
attempt to create more than one active (not closed) Session object per
connection.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If an application attempts to use the Connection object’s
createSession method when an active Session object exists for that
connection then a JMSException should be thrown.</p>
</li>
<li>
<p>If an application attempts to use the JMSContext object’s
createContext method then a JMSRuntimeException must be thrown, since
the first JMSContext already contains a connection and session and this
method would create a second session on the same connection.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following methods are intended for use by the application server and
their use by applications running in the Jakarta EE web container or Enterprise Beans container
may interfere with the container’s ability to properly manage the
threads used in the runtime environment. They must therefore not be
called by applications running in the Jakarta EE web container or Enterprise Beans container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jakarta.jms.Session method setMessageListener</p>
</li>
<li>
<p>jakarta.jms.Session method getMessageListener</p>
</li>
<li>
<p>jakarta.jms.Session method run</p>
</li>
<li>
<p>jakarta.jms.Connection method createConnectionConsumer</p>
</li>
<li>
<p>jakarta.jms.Connection method createSharedConnectionConsumer</p>
</li>
<li>
<p>jakarta.jms.Connection method createDurableConnectionConsumer</p>
</li>
<li>
<p>jakarta.jms.Connection method createSharedDurableConnectionConsumer</p>
<div class="paragraph">
<p>The following methods may interfere with the container’s ability to
properly manage the threads used in the runtime environment and must not
be used by applications running in the Jakarta EE web container or Enterprise Beans container:</p>
</div>
</li>
<li>
<p>jakarta.jms.MessageConsumer method setMessageListener</p>
</li>
<li>
<p>jakarta.jms.MessageConsumer method getMessageListener</p>
</li>
<li>
<p>jakarta.jms.JMSContext method setMessageListener</p>
</li>
<li>
<p>jakarta.jms.JMSContext method getMessageListener</p>
<div class="paragraph">
<p>This restriction means that applications running in the Jakarta EE web container or
Enterprise Beans container which need to receive messages asynchronously may only do
so using message-driven beans.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following methods may interfere with the container’s management of
connections and must not be used by applications running in the Jakarta EE
web container or Enterprise Beans container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jakarta.jms.Connection method setClientID</p>
</li>
<li>
<p>jakarta.jms.Connection method stop</p>
</li>
<li>
<p>jakarta.jms.Connection method setExceptionListener</p>
</li>
<li>
<p>jakarta.jms.JMSContext method setClientID</p>
</li>
<li>
<p>jakarta.jms.JMSContext method stop</p>
</li>
<li>
<p>jakarta.jms.JMSContext method setExceptionListener</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applications which need to use a specific client identifier must set it
on the connection factory, as described in section 6.1.2 “Client
identifier”.</p>
</div>
<div class="paragraph">
<p>An asynchronous send is not permitted in a Jakarta EE web contaienr or Enterprise Beans container.
The following methods must therefore not be used in a Jakarta EE web web container or Enterprise Beans container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>jakarta.jms.MessageProducer method send(Message message,
CompletionListener completionListener)</p>
</li>
<li>
<p>jakarta.jms.MessageProducer method send(Message message, int
deliveryMode, int priority, long timeToLive, CompletionListener
completionListener)</p>
</li>
<li>
<p>jakarta.jms.MessageProducer method send(Destination destination, Message
message, CompletionListener completionListener)</p>
</li>
<li>
<p>jakarta.jms.MessageProducer method send(Destination destination, Message
message, int deliveryMode, int priority, long timeToLive,
CompletionListener completionListener)</p>
</li>
<li>
<p>jakarta.jms.JMSProducer method setAsync(CompletionListener
completionListener)</p>
<div class="paragraph">
<p>All the methods listed in this section may throw a
jakarta.jms.JMSException (if allowed by the method) or a
jakarta.jms.JMSRuntimeException (if not) when called by an application
running in the Jakarta EE web container or Enterprise Beans container. This is recommended but not
required.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="behaviour-of-jakarta-messaging-sessions-in-the-jakarta-ee-web-container-or-enterprise-beans-container"><a class="anchor" href="#behaviour-of-jakarta-messaging-sessions-in-the-jakarta-ee-web-container-or-enterprise-beans-container"></a>12.3. Behaviour of Jakarta Messaging sessions in the Jakarta EE web container or Enterprise Beans container</h3>
<div class="paragraph">
<p>The behaviour of Jakarta Messaging Session and JMSContext objects in respect of<br>
transactions and message acknowledgement is different for applications<br>
which run in a Jakarta EE web container or Enterprise Beans container than it is for
applications<br>
which run in a normal Java SE environment or in the Jakarta EE
application<br>
client container.</p>
</div>
<div class="paragraph">
<p>When an application creates a Session or JMSContext in a Jakarta EE web container<br>
or Enterprise Beans container, and there is an active Jakarta transaction in progress,<br>
then the session that is created will participate in the Jakarta<br>
transaction and will be committed or rolled back when the Jakarta<br>
transaction is committed or rolled back. Any session parameters that<br>
are specified when creating the Session or JMSContext are ignored. The<br>
use of local transactions or client acknowledgement is not permitted.</p>
</div>
<div class="paragraph">
<p>This applies irrespective of whether the Jakarta transaction is demarcated<br>
automatically by the container or programmatically using methods on<br>
jakarta.transaction.UserTransaction.</p>
</div>
<div class="paragraph">
<p>The term “session parameters” here refers to the arguments that may be<br>
passed into a call to the createSession or createContext methods to<br>
specify whether the session should use a local transaction and, if the<br>
session is non-transacted, what the acknowledgement mode should be.</p>
</div>
<div class="paragraph">
<p>When an application uses one of the createSession methods to create<br>
a Session, and there is no active Jakarta transaction in progress,<br>
then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the session parameters specify that the session should be
non-transacted with an acknowledgement mode of AUTO_ACKNOWLEDGE or
DUPS_OK_ACKNOWLEDGE then the session will be non-transacted and messages
will be acknowledged according to the specified acknowledgement mode.</p>
</li>
<li>
<p>If the session parameters specify that the session should be
non-transacted with an acknowledgement mode of CLIENT_ACKNOWLEDGE then
the Jakarta Messaging provider is recommended to ignore the specified parameters and
instead provide a non-transacted, auto-acknowledged session. However the
Jakarta Messaging provider may alternatively provide a non-transacted session with
client acknowledgement.</p>
</li>
<li>
<p>If the session parameters specify that the session should be
transacted,<br>
then the Jakarta Messaging provider is recommended to ignore the specified parameters
and instead provide a non-transacted, auto-acknowledged session. However
the Jakarta Messaging provider may alternatively provide a local transacted session.</p>
</li>
<li>
<p>Applications running in a Jakarta EE web web container or Enterprise Beans container are recommended
to specify no session parameters or to specify that the session be
non-transacted with an acknowledgement mode of AUTO_ACKNOWLEDGE or
DUPS_OK_ACKNOWLEDGE.</p>
</li>
<li>
<p>It is not recommended that applications specify client acknowledgement
or a local transaction since applications may not be portable.
Furthermore if the Jakarta Messaging provider does support the use of client
acknowledgement and local transactions when there is no Jakarta transaction,
the application would need to be written differently dependent on
whether there was a Jakarta transaction or not.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When an application uses one of the createContext methods to create<br>
a JMSContext, and there is no active Jakarta transaction in progress,<br>
then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the specified session mode is AUTO_ACKNOWLEDGE or
DUPS_OK_ACKNOWLEDGE then the session will be non-transacted and messages
will be acknowledged according to the specified acknowledgement mode.</p>
</li>
<li>
<p>If the specified session mode is CLIENT_ACKNOWLEDGE or
SESSION_TRANSACTED then it will be ignored and a session mode of
AUTO_ACKNOWLEDGE used.</p>
</li>
<li>
<p>Applications running in a Jakarta EE web container or Enterprise Beans container are recommended
to specify no session parameters or to specify that the session be
non-transacted with an acknowledgement mode of AUTO_ACKNOWLEDGE or
DUPS_OK_ACKNOWLEDGE.</p>
</li>
<li>
<p>The use of local transactions or client acknowledgement is not
permitted in a Jakarta EE web container or Enterprise Beans container even if there is no active<br>
Jakarta transaction because this would require applications to be written<br>
differently depending on whether there was a Jakarta transaction or not.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When programmatic transaction demarcation is being used, the session
should be both created and used within an active Jakarta transaction.</p>
</div>
<div class="paragraph">
<p>If a Session or JMSContext is created when there is an active Jakarta
transaction, then after that transaction is committed or rolled back the
session remains available for use in any subsequent Jakarta transaction
until the Session or JMSContext is closed.</p>
</div>
<div class="paragraph">
<p>However, if a Session or JMSContext is created when there is an active
Jakarta transaction but is subsequently used to send or receive messages
when there is no active Jakarta transaction then the behaviour is undefined.</p>
</div>
<div class="paragraph">
<p>Similarly, if a Session or JMSContext is created when there is no active
Jakarta transaction but subsequently used to send or receive messages when
there is an active Jakarta transaction then the behaviour is undefined.</p>
</div>
<div class="paragraph">
<p>The Bean Provider should not make use of the Jakarta Messaging request/reply paradigm
(sending of a Jakarta Messaging message, followed by the synchronous receipt of a
reply to that message) within a single transaction. Because a Jakarta Messaging
message is typically not delivered to its final destination until the
transaction commits, the receipt of the reply within the same
transaction will not take place.</p>
</div>
</div>
<div class="sect2">
<h3 id="injection-of-jmscontext-objects"><a class="anchor" href="#injection-of-jmscontext-objects"></a>12.4. Injection of JMSContext objects</h3>
<div class="sect3">
<h4 id="support-for-injection"><a class="anchor" href="#support-for-injection"></a>12.4.1. Support for injection</h4>
<div class="paragraph">
<p>Injection of JMSContext objects is supported in those Jakarta EE
application classes which support dependency injection using CDI and for
which CDI support has been enabled by means of a META_INF/beans.xml
descriptor.</p>
</div>
<div class="paragraph">
<p>Section EE.5.24 of the Jakarta EE specification lists the application
classes that support dependency injection using CDI.</p>
</div>
<div class="paragraph">
<p>Section 12.1 of the CDI specification specifies how CDI support may be
enabled for a particular application.</p>
</div>
</div>
<div class="sect3">
<h4 id="container-managed-and-application-managed-jmscontexts"><a class="anchor" href="#container-managed-and-application-managed-jmscontexts"></a>12.4.2. Container-managed and application-managed JMSContexts</h4>
<div class="paragraph">
<p>A JMSContext object which has been injected is described as being
<em>container-managed</em>, as it is created and closed by the container, not
the application.</p>
</div>
<div class="paragraph">
<p>A JMSContext object which has been created by calling the
ConnectionFactory method createContext is described as being
<em>application-managed</em>. The application is responsible for calling the
close method when the object is not longer needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="injection-syntax"><a class="anchor" href="#injection-syntax"></a>12.4.3. Injection syntax</h4>
<div class="paragraph">
<p>Applications may declare a field of type jakarta.jms.JMSContext and
annotate it with the jakarta.inject.Inject annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
private JMSContext context;</pre>
</div>
</div>
<div class="paragraph">
<p>The container will inject a JMSContext. This object will have a scope as
defined by section 12.4.4 “Scope of injected JMSContext objects”.</p>
</div>
<div class="paragraph">
<p>The annotation jakarta.jms.JMSConnectionFactory may be used to specify the
JNDI lookup name of the ConnectionFactory used to create the JMSContext.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
@JMSConnectionFactory("jms/connectionFactory")
private JMSContext context;</pre>
</div>
</div>
<div class="paragraph">
<p>If the JMSConnectionFactory annotation is omitted then the platform
default Jakarta Messaging connection factory will be used.</p>
</div>
<div class="paragraph">
<p>The annotation jakarta.jms.JMSPasswordCredential may be used to specify a
user name and password which will be used when the JMSContext is
created. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
@JMSConnectionFactory("jms/connectionFactory")
@JMSPasswordCredential(
    userName="admin",password="mypassword")
private JMSContext context;</pre>
</div>
</div>
<div class="paragraph">
<p>The annotation jakarta.jms.JMSSessionMode may be used to specify the
session mode of the JMSContext. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
@JMSConnectionFactory("jms/connectionFactory")
@JMSSessionMode(JMSContext.AUTO_ACKNOWLEDGE)
private JMSContext context;</pre>
</div>
</div>
<div class="paragraph">
<p>The meaning and possible values of session mode are the same as for the
ConnectionFactory method createContext(int sessionMode):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Jakarta EE application client container, session mode may be set
to any of JMSContext.SESSION_TRANSACTED, JMSContext.CLIENT_ACKNOWLEDGE,
JMSContext.AUTO_ACKNOWLEDGE or JMSContext.DUPS_OK_ACKNOWLEDGE. If no
session mode is specified or the JMSSessionMode annotation is omitted a
session mode of JMSContext.AUTO_ACKNOWLEDGE will be used.</p>
</li>
<li>
<p>In a Jakarta EE web container or Enterprise Beans container, when there is an active Jakarta
transaction in progress, session mode is ignored and the JMSSessionMode
annotation is unnecessary.</p>
</li>
<li>
<p>In a Jakarta EE web container or Enterprise Beans container, when there is no active Jakarta
transaction in progress, session mode may be set to either of
JMSContext.AUTO_ACKNOWLEDGE or JMSContext.DUPS_OK_ACKNOWLEDGE. If no
session mode is specified or the JMSSessionMode annotation is omitted a
session mode of JMSContext.AUTO_ACKNOWLEDGE will be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about the use of session mode when creating a
messaging context, see section 12.3 “Behaviour of Jakarta Messaging sessions in the
Jakarta EE web container or Enterprise Beans container” and the API documentation for the
ConnectionFactory method createContext(int sessionMode).</p>
</div>
</div>
<div class="sect3">
<h4 id="scope-of-injected-jmscontext-objects"><a class="anchor" href="#scope-of-injected-jmscontext-objects"></a>12.4.4. Scope of injected JMSContext objects</h4>
<div class="paragraph">
<p>The scope of an injected JMSContext defines whether different injected
JMSContext objects will actually refer to the same JMSContext object.</p>
</div>
<div class="paragraph">
<p>It also defines when the injected JMSContext will be closed by the
container. When the object falls out of scope, the container will
automatically call close().</p>
</div>
<div class="paragraph">
<p>The scope of an injected JMSContext object will depend on whether there
is a Jakarta transaction in progress at the point where a particular method
on the JMSContext is called.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a method is called on an injected JMSContext when there is a Jakarta
transaction (either bean-managed or container-managed), the scope of the
JMSContext will be @TransactionScoped. This scope is defined in the Jakarta Transactions
specification. This means that:</p>
<div class="ulist">
<ul>
<li>
<p>The JMSContext object will be automatically created the first time a
method on the JMSContext is called within the transaction.</p>
</li>
<li>
<p>The JMSContext object will be automatically closed when the
transaction is committed or rolled back.</p>
</li>
<li>
<p>Within the same Jakarta transaction, JMSContext objects injected using
identical annotations will refer to the same JMSContext object.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If a method is called on an injected JMSContext when there is no Jakarta
transaction then the scope of the JMSContext will be @RequestScoped.
This scope is defined in the CDI specification. This means that:</p>
<div class="ulist">
<ul>
<li>
<p>The JMSContext object will be automatically created the first time a
method on the JMSContext is called within a request.</p>
</li>
<li>
<p>The JMSContext object will be automatically closed when the request
ends.</p>
</li>
<li>
<p>Within the same request, JMSContext objects injected using identical
annotations will refer to the same JMSContext object.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If a method is called on an injected JMSContext both in a Jakarta
transaction and outside a Jakarta transaction then separate JMSContext
objects will be used in each case, with a separate JMSContext object
being used for each Jakarta transaction as described above.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="restrictions-on-use-of-injected-jmscontext-objects"><a class="anchor" href="#restrictions-on-use-of-injected-jmscontext-objects"></a>12.4.5. Restrictions on use of injected JMSContext objects</h4>
<div class="paragraph">
<p>Within the same scope, different injected JMSContext objects which are
injected using identical annotations will all refer to the same
JMSContext object.</p>
</div>
<div class="paragraph">
<p>This means that they will all use the same connection. This will reduce
the resource usage of the application and improve performance.</p>
</div>
<div class="paragraph">
<p>It also means that messages would be sent using the same session.
Messages sent using different JMSContext objects in the same scope will
be therefore received in order in which they were sent (see section
6.2.9.2 “Order of message sends” for a few qualifications).</p>
</div>
<div class="paragraph">
<p>However, to avoid the possibility of code in one bean having an
unexpected effect on a different bean, the following methods which
change the public state of a JMSContext will not be permitted if the
JMSContext is injected.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>setClientID</p>
</li>
<li>
<p>setExceptionListener</p>
</li>
<li>
<p>stop</p>
</li>
<li>
<p>acknowledge</p>
</li>
<li>
<p>commit</p>
</li>
<li>
<p>rollback</p>
</li>
<li>
<p>recover</p>
</li>
<li>
<p>setAutoStart</p>
</li>
<li>
<p>start</p>
</li>
<li>
<p>close</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These methods must throw a IllegalStateRuntimeException if the
JMSContext is injected. These restrictions do not apply when the
JMSContext is managed by the application; though note that several of
these methods are in any case prohibited in a Jakarta EE web container or Enterprise Beans container.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resource-adapter"><a class="anchor" href="#resource-adapter"></a>13. Resource adapter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta Connectors specification defines a
standard architecture for connecting the Jakarta EE platform to enterprise
information systems (EISs).</p>
</div>
<div class="paragraph">
<p>A Jakarta Messaging provider (whether it forms part of a Jakarta EE application server or
not) is recommended to include a resource adapter which connects to that
Jakarta Messaging provider and which conforms to the Jakarta Connectors
specification and as further specified in this chapter.</p>
</div>
<div class="sect2">
<h3 id="mdb-activation-properties"><a class="anchor" href="#mdb-activation-properties"></a>13.1. MDB activation properties</h3>
<div class="paragraph">
<p>Message-driven beans are defined in the Jakarta Enterprise Beans
specification. Jakarta Messaging defines the following activation properties for
message-driven beans.</p>
</div>
<div class="paragraph">
<p>Table 13‑1 MDB activation properties defined by Jakarta Messaging</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Activation property</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">destinationLookup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property may be used to specify the lookup name
of an administratively-defined jakarta.jms.Queue or jakarta.jms.Topic object
which defines the Jakarta Messaging queue or topic from which the endpoint
(message-driven bean) is to receive messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connectionFactoryLookup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property may be used to specify the
lookup name of an administratively-defined jakarta.jms.ConnectionFactory,
jakarta.jms.QueueConnectionFactory or jakarta.jms.TopicConnectionFactory
object that will be used to connect to the Jakarta Messaging provider from which the
endpoint (message-driven bean) is to receive messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">acknowledgeMode</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If bean-managed transaction demarcation is used, this property may be
used to indicate whether Jakarta Messaging AUTO_ACKNOWLEDGE semantics or
DUPS_OK_ACKNOWLEDGE semantics should apply.</p>
</div>
<div class="paragraph">
<p>This property may be set to either Auto-acknowledge or
Dups-ok-acknowledge. If this property is not specified, a default of
Auto-acknowledge will be used.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">messageSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property may be used to specify a message
selector. If this property is not specified then a message selector will
not be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">destinationType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property may be used to specify whether the
specified destination is a queue or topic. The valid values are
jakarta.jms.Queue or jakarta.jms.Topic.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscriptionDurability</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This property only applies to endpoints (message-driven beans) that
receive messages published to a topic. It may be used to specify whether
the subscription is durable or non-durable.</p>
</div>
<div class="paragraph">
<p>This property may be set to either Durable or NonDurable. If this
property is not specified, a default of NonDurable will be used.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clientId</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This property may be used to specify the client identifier that will be
used when connecting to the Jakarta Messaging provider from which the endpoint
(message-driven bean) is to receive messages.</p>
</div>
<div class="paragraph">
<p>Setting this property is always optional.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscriptionName</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This property only applies to endpoints (message-driven beans) that
receive messages published to a topic. It may be used to specify the
name of the durable or non-durable subscription.</p>
</div>
<div class="paragraph">
<p>It is not defined whether a shared or unshared subscription is used.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples-of-the-classic-api"><a class="anchor" href="#examples-of-the-classic-api"></a>14. Examples of the classic API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter gives some code examples that show how a Jakarta Messaging client could
use the Jakarta Messaging classic API. It also demonstrates how to use several message
types.</p>
</div>
<div class="paragraph">
<p>It is recommended that either the classic API or the simplified API be
used in preference to the domain-specific APIs for point-to-point
messaging. See also chapter 15 “Examples of the simplified API”.</p>
</div>
<div class="paragraph">
<p>In the example program, a client application sends and receives stock
quote information. The messages the client application receives are from
a stock quote service that sends out stock quote messages. The stock
quote service is not described in the example.</p>
</div>
<div class="paragraph">
<p>To simplify the example, no exception-handling code is included.</p>
</div>
<div class="paragraph">
<p>This chapter describes the steps for creating the correct environment
for sending and receiving a message.</p>
</div>
<div class="paragraph">
<p>After describing these basic functions, this chapter describes how to
perform some other common functions, such as using message selectors.</p>
</div>
<div class="sect2">
<h3 id="preparing-to-send-and-receive-messages"><a class="anchor" href="#preparing-to-send-and-receive-messages"></a>14.1. Preparing to send and receive messages</h3>
<div class="paragraph">
<p>Here are the basic steps to establish a connection and prepare to send
and receive messages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Get a ConnectionFactory and Destination</p>
</li>
<li>
<p>Create a Connection and Session</p>
</li>
<li>
<p>Create a MessageConsumer</p>
</li>
<li>
<p>Create a MessageProducer</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="getting-a-connectionfactory"><a class="anchor" href="#getting-a-connectionfactory"></a>14.1.1. Getting a ConnectionFactory</h4>
<div class="paragraph">
<p>Both the message producer and message consumer (the sender and receiver)
need to get a ConnectionFactory and use it to set up both a Connection
and a Session.</p>
</div>
<div class="paragraph">
<p>An administrator typically has created and configured a
ConnectionFactory for the Jakarta Messaging client’s use. The client program typically
uses the JNDI API to look up the ConnectionFactory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import javax.naming.*;
import jakarta.jms.*;

Context namingContext = new InitialContext();
ConnectionFactory ConnectionFactory =
    (ConnectionFactory) namingContext.lookup("myCF");</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="getting-a-destination"><a class="anchor" href="#getting-a-destination"></a>14.1.2. Getting a Destination</h4>
<div class="paragraph">
<p>An administrator has created and configured a Queue named "StockSource"
which is where stock quote messages are sent and received. Again, the
destination can be looked up using the JNDI API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Queue stockQueue = (Queue)namingContext.lookup("StockSource");</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-connection"><a class="anchor" href="#creating-a-connection"></a>14.1.3. Creating a Connection</h4>
<div class="paragraph">
<p>Having obtained the ConnectionFactory, the client program uses it to
create a Connection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Connection connection = connectionFactory.createConnection();</pre>
</div>
</div>
<div class="paragraph">
<p>A Connection must be closed after use. This may be done explicitly using
the close method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>connection.close();</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively a connection may be closed automatically using the
try-with-resources statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>try (Connection connection=connectionFactory.createConnection()) {
    // use connection in this try block
    // it will be closed when try block completes
} catch (JMSException e) {
    // exception handling
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-session"><a class="anchor" href="#creating-a-session"></a>14.1.4. Creating a Session</h4>
<div class="paragraph">
<p>Having obtained the Connection, the client program uses it to create a
Session. The Session is used to create a MessageProducer (to send
messages) or a MessageConsumer (to receive messages).</p>
</div>
<div class="paragraph">
<p>There are three createSession methods on Connection, with different
numbers of arguments. Java SE applicatrions such as this example should
use the method with one integer argument, sessionMode. This single
argument indicates</p>
</div>
<div class="ulist">
<ul>
<li>
<p>whether the session will use a local transaction or whether it is
non-transacted and,</p>
</li>
<li>
<p>if the session is non-transacted, what mode should be used for
acknowledging the receipt of messages.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>// Session is not transacted and
// uses AUTO_ACKNOWLEDGE for message acknowledgement

Session session=connection.createSession(Session.AUTO_ACKNOWLEDGE);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-messageproducer"><a class="anchor" href="#creating-a-messageproducer"></a>14.1.5. Creating a MessageProducer</h4>
<div class="paragraph">
<p>Having obtained the Session, the client program uses the Session to
create a MessageProducer. The MessageProducer object is used to send
messages to the destination. The MessageProducer is created by using the
Session.createProducer method, supplying as a parameter the destination
to which the messages are sent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// stockQueue was previously looked up using JNDI

MessageProducer producer = session.createProducer(stockQueue);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-messageconsumer"><a class="anchor" href="#creating-a-messageconsumer"></a>14.1.6. Creating a MessageConsumer</h4>
<div class="paragraph">
<p>Messages can be consumed either synchronously or asynchronously. This
example shows how to create a message consumer that consumes messages
synchronously. See section 14.3.1 “Receiving messages asynchronously” to
learn more about consuming messages asynchronously.</p>
</div>
<div class="paragraph">
<p>A MessageConsumer is used to receive messages from the destination,
which in this example is the Queue stockQueue. A MessageConsumer is
created using the Session.createConsumer method, supplying one
parameter, the destination from which messages are received.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// stockQueue was previously looked up using JNDI

MessageConsumer consumer = session.createConsumer(stockQueue);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="starting-message-delivery-2"><a class="anchor" href="#starting-message-delivery-2"></a>14.1.7. Starting message delivery</h4>
<div class="paragraph">
<p>Up until this point, delivery of messages has been inhibited so that the
preceding setup could be done without being interrupted with
asynchronously delivered messages. Now that the setup is complete, the
Connection is told to begin the delivery of messages to its
MessageConsumer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>connection.start();</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-a-textmessage"><a class="anchor" href="#using-a-textmessage"></a>14.1.8. Using a TextMessage</h4>
<div class="paragraph">
<p>There are several Jakarta Messaging Message formats. For this example, the stock quote
information is sent as a text string that is read and displayed by the
client.</p>
</div>
<div class="paragraph">
<p>The following demonstrates how to create such a message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockData; // Stock information as a string

// Set the message's text to be the stockData string
TextMessage message = session.createTextMessage();
message.setText(stockData);</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sending-and-receiving-messages"><a class="anchor" href="#sending-and-receiving-messages"></a>14.2. Sending and receiving messages</h3>
<div class="paragraph">
<p>Now that the setup of the Session is complete, you can send and receive
messages. This section describes how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a message</p>
</li>
<li>
<p>Send a message</p>
</li>
<li>
<p>Receive a message synchronously</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="sending-a-message"><a class="anchor" href="#sending-a-message"></a>14.2.1. Sending a message</h4>
<div class="paragraph">
<p>To send a message, use the MessageProducer.send method, supplying a
Message object for the method’s parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Send the message
producer.send(message);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="receiving-a-message-synchronously"><a class="anchor" href="#receiving-a-message-synchronously"></a>14.2.2. Receiving a message synchronously</h4>
<div class="paragraph">
<p>To receive the next message in the queue, you can use the
MessageConsumer.receive method. This call blocks indefinitely until a
message arrives on the queue. The same method can be used to receive
from a topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Message stockMessage = consumer.receive();</pre>
</div>
</div>
<div class="paragraph">
<p>To limit the amount of time that the client blocks, use a timeout
parameter with the receive method. If no messages arrive by the end of
the timeout, then the receive method returns. The timeout parameter is
expressed in milliseconds.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Wait up to 4 seconds for a message
Message stockMessage = receiver.receive(4000);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unpacking-a-textmessage"><a class="anchor" href="#unpacking-a-textmessage"></a>14.2.3. Unpacking a TextMessage</h4>
<div class="paragraph">
<p>The stock quote information is sent using a TextMessage<em>.</em> There are
two ways to extract the information from the message.</p>
</div>
<div class="paragraph">
<p>The receive method returns a Message object. You can cast this to a
TextMessage and call the getText method. This returns the message
content as a string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// extract stock information from message
String newStockData = ((TextMessage)stockMessage)getText();</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can call the Message object’s getBody method. In this
case you do not need to cast the Message to a TextMessage. Instead you
need to pass in the type expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// extract stock information from message
String newStockData= stockMessage.getBody(String.class);</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="other-messaging-features"><a class="anchor" href="#other-messaging-features"></a>14.3. Other messaging features</h3>
<div class="paragraph">
<p>This section goes beyond basic messaging functions, and describes how to
perform some other common messaging functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create an asynchronous MessageListener</p>
</li>
<li>
<p>Use a message selector to filter message delivery</p>
</li>
<li>
<p>Create a durable subscription to a topic</p>
</li>
<li>
<p>Re-connect to a topic using a durable subscription</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="receiving-messages-asynchronously-2"><a class="anchor" href="#receiving-messages-asynchronously-2"></a>14.3.1. Receiving messages asynchronously</h4>
<div class="paragraph">
<p>In order to receive message asynchronously as they are delivered to the
message consumer, the client program needs to create a message listener
that implements the MessageListener interface. An implementation of the
MessageListener interface, called <code>StockListener.java</code>, might look
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import jakarta.jms.*;

public class StockListener implements MessageListener {
    public void onMessage(Message message) {
    // Unpack and handle the messages received
    ...
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>The client program registers the MessageListener object with the
MessageConsumer object in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>StockListener myListener = new StockListener();

// consumer is a MessageConsumer object
consumer.setMessageListener(myListener);</pre>
</div>
</div>
<div class="paragraph">
<p>The Connection must be started for the message delivery to begin. The
MessageListener is asynchronously notified whenever a message has been
published to the queue. This is done via the onMessage method in the
MessageListener interface. It is up to the client to process the message
there.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void onMessage(Message message) {

// Unpack and handle the messages received
    String newStockData =
        ((TextMessage)message).getText();
    if(...) {
        // Logic related to the data
    }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-message-selection"><a class="anchor" href="#using-message-selection"></a>14.3.2. Using message selection</h4>
<div class="paragraph">
<p>A client program may be interested in receiving only certain stock
quotes. A message selector can be used to achieve this goal. Message
selectors work against properties that are assigned to the message.</p>
</div>
<div class="paragraph">
<p>In this example, the client program is only interested in technology
related stocks. The sender of the messages assigns a value to a message
property called <code>StockSector</code>. The values the sender assigns include
&#8220;Technology&#8221;, &#8220;Financial&#8221;, &#8220;Manufacturing&#8221;, &#8220;Emerging&#8221;, and &#8220;Global&#8221;.
The message sender assigns these property values by using the
<code>Message.setStringProperty</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockData; // Stock information as a String

// Set the message's text to be the stockData string
TextMessage message = session.createTextMessage();
message.setText(stockData);

// Set the message property "StockSector"
message.setStringProperty("StockSector", "Technology");</pre>
</div>
</div>
<div class="paragraph">
<p>When the client program that receives the stock quote messages creates a
MessageConsumer, it can supply a message selector string which specifies
which messages it will receive.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String selector = new String("(StockSector = 'Technology')");
MessageConsumer consumer =
    session.createConsumer(stockQueue,selector);</pre>
</div>
</div>
<div class="paragraph">
<p>The client program receives only messages related to the technology
sector.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-durable-subscriptions"><a class="anchor" href="#using-durable-subscriptions"></a>14.3.3. Using durable subscriptions</h4>
<div class="paragraph">
<p>Durable subscriptions are used to receive messages from a topic. When a
Jakarta Messaging client creates a durable subscription, the client can later
disconnect from the topic. When the client program re-connects, it can
receive the messages that arrived while it was disconnected. In this
example, the topic provides information about news updates.</p>
</div>
<div class="sect4">
<h5 id="creating-a-durable-subscription"><a class="anchor" href="#creating-a-durable-subscription"></a>14.3.3.1. Creating a durable subscription</h5>
<div class="paragraph">
<p>The following example sets up a durable subscription that gets messages
from a topic.</p>
</div>
<div class="paragraph">
<p>First, the client program must perform the usual setup steps of looking
up ConnectionFactory and a Destination, and creating a Connection and
Session, as described in section 14.1 “Preparing to send and receive
messages”.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import javax.naming.*;
import jakarta.jms.*;

// Look up connection factory
Context namingContext = new InitialContext();
ConnectionFactory connectionFactory =
    (ConnectionFactory) namingContext.lookup("ConnectionFactory")

// Look up destination
Topic newsFeedTopic = namingContext.lookup("BreakingNews");

// Create connection and session
Connection connection = ConnectionFactory.createConnection();
Session session=connection.createSession(Session.AUTO_ACKNOWLEDGE);</pre>
</div>
</div>
<div class="paragraph">
<p>Having performed the normal setup, the client program can now create a
durable subscription on the destination. To do this, the client program
uses the Session method <code>createDurableConsumer</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MessageConsumer consumer =
    session.createDurableConsumer(newsFeedTopic,"mySubscription");</pre>
</div>
</div>
<div class="paragraph">
<p>The name &#8220;mySubscription&#8221; is used as an identifier of the durable
subscription.</p>
</div>
<div class="paragraph">
<p>At this point, the client program can start the connection and receive
messages.</p>
</div>
</div>
<div class="sect4">
<h5 id="creating-a-consumer-on-an-existing-durable-subscription"><a class="anchor" href="#creating-a-consumer-on-an-existing-durable-subscription"></a>14.3.3.2. Creating a consumer on an existing durable subscription</h5>
<div class="paragraph">
<p>Once a durable subscription has been created it will continue to
accumulate messages until the subscription is deleted using the Session
method unsubscribe, even if the original MessageConsumer is closed.</p>
</div>
<div class="paragraph">
<p>A client application may create a consumer on an existing durable
subscription by calling the Session method createDurableConsumer,
supplying the same parameters that were specified when the durable
subscription was first created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Create a consumer on an existing durable subscription
MessageConsumer consumer =
    session.createDurableConsumer(newsFeedTopic, "mySubscription");</pre>
</div>
</div>
<div class="paragraph">
<p>Any messages which were added to the subscription whilst it had no
consumer will be delivered.</p>
</div>
<div class="paragraph">
<p>A durable subscription created using <code>createDurableConsumer</code> may only have
one consumer at a time.</p>
</div>
<div class="paragraph">
<p>A durable subscription created using <code>createSharedDurableConsumer</code> may
have may have more than one consumer at a time. Each message from the
subscription will be delivered to only one of the consumers on that
subscription.</p>
</div>
<div class="paragraph">
<p>When creating a consumer on an existing durable subscription there are
some important restrictions to be aware of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Destination and subscription name must be the same as when the
durable subscription was first created.</p>
</li>
<li>
<p>If the connection’s client identifier was set when the durable
subscription was first created then the same client identifier must be
set when subsequently creating a consumer on it.</p>
</li>
<li>
<p>If a message selector was specified when the durable subscription was
first created then the same message selector must be specified when
subsequently creating a consumer on it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jakarta-messaging-message-types"><a class="anchor" href="#jakarta-messaging-message-types"></a>14.4. Jakarta Messaging message types</h3>
<div class="paragraph">
<p>There are five Jakarta Messaging message types. This section provides an example of
how to create and unpack each of these types. In each example, the data
sent in the message is stock-quote-related data. In all cases, the code
that creates the actual content of the messages is omitted.</p>
</div>
<div class="sect3">
<h4 id="creating-a-textmessage"><a class="anchor" href="#creating-a-textmessage"></a>14.4.1. Creating a TextMessage</h4>
<div class="paragraph">
<p>In this example, the stock quote information is sent as a
TextMessage. A TextMessage carries the message as a text string that
can be read by the client.</p>
</div>
<div class="paragraph">
<p>The following code demonstrates how to create such a message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockData; // Stock information as a string

TextMessage message = session.createTextMessage();

// Set the stockData string to the message body
message.setText(stockData);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unpacking-a-textmessage-2"><a class="anchor" href="#unpacking-a-textmessage-2"></a>14.4.2. Unpacking a TextMessage</h4>
<div class="paragraph">
<p>There are two ways to extract the text from a TextMessage. You can
call the <code>getText</code> method on TextMessage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockData = stockMessage.getText();</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can call the <code>getBody</code> method on Message, which is the
common supertype of all message types. In this case you need to pass in
the body type expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockData = stockMessage.getBody(String.class);</pre>
</div>
</div>
<div class="paragraph">
<p>The use of <code>getBody</code> avoids the need to cast a newly-received Message
object to a TextMessage.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-bytesmessage"><a class="anchor" href="#creating-a-bytesmessage"></a>14.4.3. Creating a BytesMessage</h4>
<div class="paragraph">
<p>The stock quote information could be in a binary format that the server
knows how to construct and that the client program knows how to
interpret and display as a stock quote. This is sent as a BytesMessage.</p>
</div>
<div class="paragraph">
<p>Such a message can be constructed in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Stock information as a byte array
byte[] stockData;
BytesMessage message = session.createBytesMessage();
message.writeBytes(stockData);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unpacking-a-bytesmessage"><a class="anchor" href="#unpacking-a-bytesmessage"></a>14.4.4. Unpacking a BytesMessage</h4>
<div class="paragraph">
<p>There are several ways to extract the byte array from a BytesMessage.
The simplest is to call the <code>readBytes</code> method on BytesMessage. This
copies the bytes to the specified byte array.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>int bodyLength = message.getBodyLength();
byte[] stockData = new byte[bodyLength];
int bytesCopied = message.readBytes(stockData);</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>readBytes</code> method can also be used to read bytes in increments, by
supplying a byte array whose length is less than the number of bytes
available. The <code>readBytes</code> method will fill the array and set the return
value to the number of bytes copied. A subsequent call reads the next
increment and so on.</p>
</div>
<div class="paragraph">
<p>Alternatively you can call the getBody method on Message, which is the
common supertype of all message types. In this case you need to pass in
the body type expected. This method creates a byte array of the required
size and copies all the bytes to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>byte[] stockData = message.getBody(byte[].class);</pre>
</div>
</div>
<div class="paragraph">
<p>The use of getBody avoids the need to cast a newly-received Message
object to a BytesMessage.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-mapmessage"><a class="anchor" href="#creating-a-mapmessage"></a>14.4.5. Creating a MapMessage</h4>
<div class="paragraph">
<p>Each stock message sent by the server could be a map of various stock
quote name/value pairs, using a MapMessage. For example, it could
contain entries for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stock quote name - represented as a String</p>
</li>
<li>
<p>Current value - represented as a double</p>
</li>
<li>
<p>Time of quote - represented as a long</p>
</li>
<li>
<p>Last change - represented as a double</p>
</li>
<li>
<p>Stock information - represented as a String</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To construct the MapMessage, the client program uses the various set
methods (setString, setLong, and so forth) that are associated with
MapMessage, and sets each named value in the MapMessage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockName; // Name of the stock
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated */
double stockDiff; // +/- change in the stock quote*/
String stockInfo; // Information on this stock */
MapMessage message = session.createMapMessage();</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the following can be set in any order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// First parameter is the name of the map element,
// Second parameter is the value
message.setString("Name", "ORCL");
message.setDouble("Value", stockValue);
message.setLong("Time", stockTime);
message.setDouble("Diff", stockDiff);
message.setString(
    "Info", "Recent server announcement causes market interest");</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unpacking-a-mapmessage"><a class="anchor" href="#unpacking-a-mapmessage"></a>14.4.6. Unpacking a MapMessage</h4>
<div class="paragraph">
<p>There are two ways to extract body data from a MapMessage.</p>
</div>
<div class="paragraph">
<p>You can use the various get methods associated with MapMessage to get
the values in the named MapMessage elements. In the following example,
the client program expects certain MapMessage elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockName; // Name of the stock
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated
double stockDiff; // +/- change in the stock
String stockInfo; // Information on this stock</pre>
</div>
</div>
<div class="paragraph">
<p>The data is retrieved from the message by using a get method and
providing the name of the value desired. The elements from the
MapMessage can be obtained in any order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>stockName = message.getString("Name");
stockDiff = message.getDouble("Diff");
stockValue = message.getDouble("Value");
stockTime = message.getLong("Time");</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can call the getBody method on Message, which is the
common supertype of all message types. In this case you need to pass in
the body type expected. This method returns a <code>java.util.Map</code> containing
all the keys and values in the MapMessage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Map stockData = message.getBody(Map.class);
stockName = (String)stockData.getString("Name");
stockDiff = (Double)stockData.getDouble("Diff");
stockValue = (Double)stockData.getDouble("Value");
stockTime = (Long)stockData.getLong("Time");</pre>
</div>
</div>
<div class="paragraph">
<p>The use of getBody avoids the need to cast a newly-received Message
object to a BytesMessage.</p>
</div>
<div class="paragraph">
<p>If an application needs to get a list of the elements in a MapMessage,
it can use the method MapMessage.getMapNames.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-streammessage"><a class="anchor" href="#creating-a-streammessage"></a>14.4.7. Creating a StreamMessage</h4>
<div class="paragraph">
<p>In a similar fashion to the MapMessage, an application could send a
message consisting of various fields written in sequence to the message,
each in their own primitive type. To do this, it would use a
StreamMessage. Here’s the primitive types assigned to each item in the
stock quote message.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stock quote name - String</p>
</li>
<li>
<p>Current value - double</p>
</li>
<li>
<p>Time of quote - long</p>
</li>
<li>
<p>Last change - double</p>
</li>
<li>
<p>Stock information - String</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The client program might be interested in only some of the message
fields, but in the case of a StreamMessage, the client has to read and
potentially discard each field in turn.</p>
</div>
<div class="paragraph">
<p>In the following example, the values for each of the following have
already been set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockName; // Name of the stock
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated
double stockDiff; // +/- change in the stock quote
String stockInfo; // Information on this stock

// Create message
StreamMessage message = session.createStreamMessage();</pre>
</div>
</div>
<div class="paragraph">
<p>The following elements have to be written to the StreamMessage in the
order they will be read. Notice that they are not separately named
properties, as in MapMessage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Set data for message
message.writeString(stockName);
message.writeDouble(stockValue);
message.writeLong(stockTime);
message.writeDouble(stockDiff);
message.writeString(stockInfo);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unpacking-a-streammessage"><a class="anchor" href="#unpacking-a-streammessage"></a>14.4.8. Unpacking a StreamMessage</h4>
<div class="paragraph">
<p>The elements of a StreamMessage have to be read in the order they were
written.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockName; // Name of the stock quote
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated
double stockDiff; // +/- change in the stock quote
String stockInfo; // Information on this stock

stockName = message.readString();
stockValue = message.readDouble();
stockTime = message.readLong();
stockDiff = message.readDouble();
stockInfo = message.readString();</pre>
</div>
</div>
<div class="paragraph">
<p>The getBody method cannot be used with a StreamMessage.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-an-objectmessage"><a class="anchor" href="#creating-an-objectmessage"></a>14.4.9. Creating an ObjectMessage</h4>
<div class="paragraph">
<p>The stock information could be sent in the form of a special <code>StockObject</code>
Java object. This object can then be sent as the body of a
ObjectMessage. The ObjectMessage can be used to send Java objects.</p>
</div>
<div class="paragraph">
<p>These values are set using methods that are unique to the <code>StockObject</code>
implementation. For example, <code>StockObject</code> may have methods that set the
various data values. An application using <code>StockObject</code> might look like
this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String stockName; // Name of the stock quote
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated
double stockDiff; // +/- change in the stock quote
String stockInfo; // Information on this stock

// Create a StockObject
StockObject stockObject = new StockObject();

// Establish the values for the StockObject
stockObject.setName(stockName);
stockObject.setValue(stockValue);
stockObject.setTime(stockTime);
stockObject.setDiff(stockDiff);
stockObject.setInfo(stockInfo);</pre>
</div>
</div>
<div class="paragraph">
<p>To create an ObjectMessage with the <code>StockObject</code> as the message body, you
would do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Create an ObjectMessage
ObjectMessage message = session.createObjectMessage();

// Set the body of the message to the StockObject
message.setObject(stockObject);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unpacking-an-objectmessage"><a class="anchor" href="#unpacking-an-objectmessage"></a>14.4.10. Unpacking an ObjectMessage</h4>
<div class="paragraph">
<p>There are two ways to extract the object from an ObjectMessage. You can
call the getObject method on ObjectMessage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Retrieve the StockObject from the message
StockObject stockObject = (StockObject)message.getObject();

// Extract data from the StockObject using StockObject methods
String stockName; // Name of the stock quote
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated
double stockDiff; // +/- change in the stock quote
String stockInfo; // Information on this stock

stockName = stockObject.getName();
stockValue = stockObject.getValue();
stockTime = stockObject.getTime();
stockDiff = stockObject.getDiff();
stockInfo = stockObject.getInfo();</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can call the getBody method on Message, which is the
common supertype of all message types. In this case you need to specify
the object type expected:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>StockObject stockObject = message.getBody(StockObject.class);

// Extract data from the StockObject using StockObject methods
String stockName; // Name of the stock quote
double stockValue; // Current value of the stock
long stockTime; // Time stock quote was updated
double stockDiff; // +/- change in the stock quote
String stockInfo; // Information on this stock

stockName = stockObject.getName();
stockValue = stockObject.getValue();
stockTime = stockObject.getTime();
stockDiff = stockObject.getDiff();
stockInfo = stockObject.getInfo();</pre>
</div>
</div>
<div class="paragraph">
<p>The use of getBody avoids the need to cast a newly-received Message
object to an ObjectMessage. It also avoids the need to cast the object
returned by getObject to the appropriate type.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples-of-the-simplified-api"><a class="anchor" href="#examples-of-the-simplified-api"></a>15. Examples of the simplified API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The examples in this section compare the use of the classic and
simplified Jakarta Messaging APIs for some common Jakarta Messaging operations.</p>
</div>
<div class="sect2">
<h3 id="sending-a-message-jakarta-ee"><a class="anchor" href="#sending-a-message-jakarta-ee"></a>15.1. Sending a message (Jakarta EE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
sending a TextMessage in a Jakarta EE web container or Enterprise Beans container.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api"><a class="anchor" href="#example-using-the-classic-api"></a>15.1.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/dataQueue")
Queue dataQueue;

public void sendMessageOld (String body) throws JMSException {
    try (Connection connection =
        connectionFactory.createConnection()){
        Session session = connection.createSession();
        MessageProducer producer = session.createProducer(dataQueue);
        TextMessage textMessage = session.createTextMessage(body);
        messageProducer.send(textMessage);
    }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api"><a class="anchor" href="#example-using-the-simplified-api"></a>15.1.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/dataQueue")
Queue dataQueue;

public void sendMessageNew (String body) {
    try (JMSContext context = connectionFactory.createContext();){
        context.createProducer().send(dataQueue,body);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note that sendMessageNew does not need to throw JMSException.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-and-injection"><a class="anchor" href="#example-using-the-simplified-api-and-injection"></a>15.1.3. Example using the simplified API and injection</h4>
<div class="paragraph">
<p>Here&#8217;s how you might do this using the simplified API with the
JMSContext created by injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
@JMSConnectionFactory("jms/connectionFactory")
private JMSContext context;

@Resource(mappedName = "jms/dataQueue")
private Queue dataQueue;

public void sendMessageNew(String body) {
    context.send(dataQueue, body);
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sending-a-message-java-se"><a class="anchor" href="#sending-a-message-java-se"></a>15.2. Sending a message (Java SE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for sending a TextMessage in a Java SE environment.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-2"><a class="anchor" href="#example-using-the-classic-api-2"></a>15.2.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void sendMessageOld(String body)
    throws JMSException, NamingException{

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
    namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue) namingContext.lookup("jms/dataQueue")
    try (Connection connection =
            connectionFactory.createConnection()) {
        Session session = connection.createSession();
        MessageProducer messageProducer =
        session.createProducer(dataQueue);
        TextMessage textMessage = session.createTextMessage(body);
        messageProducer.send(textMessage);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, <code>getInitialContext()</code> is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-2"><a class="anchor" href="#example-using-the-simplified-api-2"></a>15.2.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void sendMessageNew(String body) throws NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue)namingContext.lookup("jms/dataQueue");
    try (JMSContext context=connectionFactory.createContext();){
        context.createProducer().send(dataQueue,body);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, <code>getInitialContext()</code> is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
<div class="paragraph">
<p>Note that sendMessageNew does not need to throw JMSException.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sending-a-message-with-properties-java-se"><a class="anchor" href="#sending-a-message-with-properties-java-se"></a>15.3. Sending a message with properties (Java SE)</h3>
<div class="paragraph">
<p>This example is similar to the previous example in that it compares the
use of the classic and simplified Jakarta Messaging APIs for sending a TextMessage in
a Java SE environment.</p>
</div>
<div class="paragraph">
<p>However this example also configures various attributes of the message
that is sent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The message property &#8220;foo&#8221; is set to a value of &#8220;bar&#8221;.</p>
</li>
<li>
<p>The message is sent using a delivery mode of <code>NON_PERSISTENT</code>.</p>
</li>
<li>
<p>The Jakarta Messaging provider is informed that message timestamps are not required.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-3"><a class="anchor" href="#example-using-the-classic-api-3"></a>15.3.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void sendMessageOld(String body)
throws JMSException, NamingException{

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue) namingContext.lookup("jms/dataQueue");

    try (Connection connection =
            connectionFactory.createConnection()) {
        Session session = connection.createSession();
        MessageProducer producer = session.createProducer(dataQueue);
        TextMessage textMessage = session.createTextMessage(body);
        textMessage.setStringProperty("foo", "bar");
        messageProducer.setDeliveryMode(NON_PERSISTENT);
        messageProducer.setDisableMessageTimestamp(true);
        messageProducer.send(textMessage);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-3"><a class="anchor" href="#example-using-the-simplified-api-3"></a>15.3.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void sendMessageNew(String body) throws NamingException{

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
    namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue)namingContext.lookup("jms/dataQueue");

    try (JMSContext context = connectionFactory.createContext()){
        context.createProducer().
            setProperty("foo", "bar").
            setTimeToLive(10000).
            setDeliveryMode(NON_PERSISTENT).
            setDisableMessageTimestamp(true).
            send(dataQueue, body);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
<div class="paragraph">
<p>Note that sendMessageNew does not need to throw JMSException.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-a-message-synchronously-jakarta-ee"><a class="anchor" href="#receiving-a-message-synchronously-jakarta-ee"></a>15.4. Receiving a message synchronously (Jakarta EE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
synchronously receiving a TextMessage in a Jakarta EE web container or Enterprise Beans container.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-4"><a class="anchor" href="#example-using-the-classic-api-4"></a>15.4.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/dataQueue")
Queue dataQueue;

public String receiveMessageOld() throws JMSException {

    try (Connection connection =
            connectionFactory.createConnection()) {
        connection.start();
        Session session = connection.createSession();
        MessageConsumer consumer = session.createConsumer(dataQueue);
        TextMessage TextMessage =
            (TextMessage)messageConsumer.receive();
        String body = textMessage.getText();
        return body;
    }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-4"><a class="anchor" href="#example-using-the-simplified-api-4"></a>15.4.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/dataQueue")
Queue dataQueue;

public String receiveMessageNew() {

    try (JMSContext context = connectionFactory.createContext();){
    JMSConsumer consumer = context.createConsumer(demoQueue);
    return consumer.receiveBody(String.class);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note that receiveMessageNew does not need to throw JMSException.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-and-injection-2"><a class="anchor" href="#example-using-the-simplified-api-and-injection-2"></a>15.4.3. Example using the simplified API and injection</h4>
<div class="paragraph">
<p>Here&#8217;s how you might do this using the simplified API with the
JMSContext created by injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
@JMSConnectionFactory("jms/connectionFactory")
private JMSContext context;

@Resource(lookup="jms/dataQueue")
Queue dataQueue;

public String receiveMessageNew() {

    JMSConsumer consumer = context.createConsumer(dataQueue);
    return consumer.receiveBody(String.class);
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-a-message-synchronously-java-se"><a class="anchor" href="#receiving-a-message-synchronously-java-se"></a>15.5. Receiving a message synchronously (Java SE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
synchronously receiving a TextMessage in a Java SE environment.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-5"><a class="anchor" href="#example-using-the-classic-api-5"></a>15.5.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public String receiveMessageOld()
        throws JMSException, NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue inboundQueue = (Queue)
        namingContext.lookup("jms/dataQueue");

    try (Connection connection =
            connectionFactory.createConnection();){
        Session session = connection.createSession(AUTO_ACKNOWLEDGE);
        MessageConsumer consumer = session.createConsumer(dataQueue);
        connection.start();
        TextMessage TextMessage = (TextMessage) consumer.receive();
        return textMessage.getText();
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-5"><a class="anchor" href="#example-using-the-simplified-api-5"></a>15.5.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public String receiveMessageNew() throws NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue) namingContext.lookup("jms/dataQueue");

    try (JMSContext context =
            connectionFactory.createContext(AUTO_ACKNOWLEDGE);) {
        JMSConsumer consumer = context.createConsumer(dataQueue);
        return consumer.receiveBody(String.class);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
<div class="paragraph">
<p>Note that receiveMessageNew does not need to throw JMSException.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-a-message-synchronously-from-a-durable-subscription-jakarta-ee"><a class="anchor" href="#receiving-a-message-synchronously-from-a-durable-subscription-jakarta-ee"></a>15.6. Receiving a message synchronously from a durable subscription (Jakarta EE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
synchronously receiving a TextMessage from a durable topic subscription
in a Jakarta EE web container or Enterprise Beans container.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-6"><a class="anchor" href="#example-using-the-classic-api-6"></a>15.6.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup = "jms/newsFeedTopic")
Topic newsFeedTopic;

public String receiveMessageOld() throws JMSException {

    try (Connection connection =
            connectionFactory.createConnection()) {
        Session session = connection.createSession();
        MessageConsumer consumer =
            session.createDurableConsumer(newsFeedTopic, "mysub");
        connection.start();
        TextMessage textMessage = (TextMessage)consumer.receive();
        return textMessage.getText();
    }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-6"><a class="anchor" href="#example-using-the-simplified-api-6"></a>15.6.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/newsFeedTopic")
Topic newsFeedTopic;

public String receiveMessageNew() {

    try (JMSContext context = connectionFactory.createContext()){
        JMSConsumer consumer =
            context. createDurableConsumer (newsFeedTopic,"mysub");
        return consumer.receiveBody(String.class);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note that receiveMessageNew does not need to throw an exception.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-and-injection-3"><a class="anchor" href="#example-using-the-simplified-api-and-injection-3"></a>15.6.3. Example using the simplified API and injection</h4>
<div class="paragraph">
<p>Here&#8217;s how you might do this using the simplified API with the
JMSContext created by injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Inject
@JMSConnectionFactory("jms/connectionFactory")
private JMSContext context;

@Resource(lookup="jms/newsFeedTopic")
Topic newsFeedTopic;

public String receiveMessageNew() {

    JMSConsumer consumer =
        context.createDurableConsumer(newsFeedTopic, "mysub");
    return consumer.receiveBody(String.class);
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-messages-asynchronously-java-se"><a class="anchor" href="#receiving-messages-asynchronously-java-se"></a>15.7. Receiving messages asynchronously (Java SE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
asynchronously receiving TextMessage objects in a Java SE environment.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-7"><a class="anchor" href="#example-using-the-classic-api-7"></a>15.7.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API, using a message
listener class MyListener:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveMessagesOld()
throws JMSException, NamingException{

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue =
        (Queue) namingContext.lookup("jms/dataQueue");

    try (Connection connection =
            connectionFactory.createConnection();){
        Session session = connection.createSession(_AUTO_ACKNOWLEDGE_);
        MessageConsumer consumer = session.createConsumer(dataQueue);
        MessageListener messageListener = new MyListener();
        consumer.setMessageListener(messageListener);
        connection.start();

        // wait for messages to be received
        // details omitted
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-7"><a class="anchor" href="#example-using-the-simplified-api-7"></a>15.7.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveMessagesNew() throws NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue =
        (Queue) namingContext.lookup("jms/dataQueue");

    try (JMSContext context = connectionFactory.createContext();){
        JMSConsumer consumer = context.createConsumer(demoQueue);
        MessageListener messageListener = new MyListener();
        consumer.setMessageListener(messageListener);

        // wait for messages to be received
        // details omitted
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
<div class="paragraph">
<p>Note that receiveMessagesNew does not need to throw JMSException.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-a-message-asynchronously-from-a-durable-subscription-java-se"><a class="anchor" href="#receiving-a-message-asynchronously-from-a-durable-subscription-java-se"></a>15.8. Receiving a message asynchronously from a durable subscription (Java SE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
asynchronously receiving a TextMessage from a durable topic subscription
in a Java SE environment.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-8"><a class="anchor" href="#example-using-the-classic-api-8"></a>15.8.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API, using a message
listener class <code>MyListener</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveMessagesOld()
        throws JMSException, NamingException{

InitialContext namingContext = getInitialContext();
ConnectionFactory connectionFactory = (ConnectionFactory)
    namingContext.lookup("jms/connectionFactory");
Topic newsFeedTopic = (Topic)
    namingContext.lookup("jms/newsFeedTopic");

    try (Connection connection =
            connectionFactory.createConnection();) {
        Session session = connection.createSession(AUTO_ACKNOWLEDGE);
        MessageConsumer consumer =
            session.createDurableConsumer(newsFeedTopic, "mysub");
        MessageListener messageListener = new MyListener();
        consumer.setMessageListener(messageListener);
        connection.start();

        // wait for messages to be received
        //details omitted
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-8"><a class="anchor" href="#example-using-the-simplified-api-8"></a>15.8.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveMessagesNew() throws NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Topic newsfeedTopic = (Topic)
        namingContext.lookup("jms/newsfeedTopic");

    try (JMSContext context =
            connectionFactory.createContext(AUTO_ACKNOWLEDGE);){
        JMSConsumer consumer =
            context.createDurableConsumer(inboundTopic, "mysub");
        MessageListener messageListener = new MyListener();
        consumer.setMessageListener(messageListener);

        // wait for messages to be received
        // details omitted
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
<div class="paragraph">
<p>Note that receiveMessagesNew does not need to throw JMSException.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-messages-in-multiple-threads-java-se"><a class="anchor" href="#receiving-messages-in-multiple-threads-java-se"></a>15.9. Receiving messages in multiple threads (Java SE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
asynchronously receiving TextMessage objects from a queue using multiple
threads in a Java SE environment. In this example two threads are used,
which means two sessions are needed. In this example, both sessions use
the same connection.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-9"><a class="anchor" href="#example-using-the-classic-api-9"></a>15.9.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API, using a message
listener class <code>MyListener</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveMessagesOld()
        throws JMSException, NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue) namingContext.lookup("jms/dataQueue");

    try (Connection connection =
            connectionFactory.createConnection();){
        Session s1 = connection.createSession(AUTO_ACKNOWLEDGE);
        MessageConsumer consumer1 = s1.createConsumer(dataQueue);
        MyListener messageListener1 = new MyListener("One");
        messageConsumer1.setMessageListener(messageListener1);

        Session s2 = connection.createSession(AUTO_ACKNOWLEDGE);
        MessageConsumer consumer2 = s2.createConsumer(dataQueue);
        MyListener messageListener2 = new MyListener("Two");
        messageConsumer2.setMessageListener(messageListener2);

        connection.start();

        // wait for messages to be received
        // details omitted
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-9"><a class="anchor" href="#example-using-the-simplified-api-9"></a>15.9.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveMessagesNew() throws NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue) namingContext.lookup("jms/dataQueue");

    try (JMSContext context1 =
            connectionFactory.createContext(AUTO_ACKNOWLEDGE);
        JMSContext context2 =
            context1.createContext(AUTO_ACKNOWLEDGE)){

        JMSConsumer consumer1 = context1.createConsumer(dataQueue);
        MyListener messageListener1 = new MyListener("One");
        consumer1.setMessageListener(messageListener1);

        JMSConsumer consumer2 = context2.createConsumer(dataQueue);
        MyListener messageListener2 = new MyListener("Two");
        consumer2.setMessageListener(messageListener2);

        // wait for messages to be received
        // details omitted
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="receiving-synchronously-and-sending-a-message-in-the-same-local-transaction-java-se"><a class="anchor" href="#receiving-synchronously-and-sending-a-message-in-the-same-local-transaction-java-se"></a>15.10. Receiving synchronously and sending a message in the same local transaction (Java SE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
the use case in which a Java SE application repeatedly consumes a
message from one queue and forwards it to another queue in a Java SE
environment. In this example each message is received and forwarded in
the same local transaction. This means that the receiving and sending of
the message must be done using the same transacted session which is then
committed.</p>
</div>
<div class="paragraph">
<p>In this example the application consumes the incoming messages
synchronously. However since this is a Java SE application the message
could also be consumed asynchronously using a MessageListener.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-10"><a class="anchor" href="#example-using-the-classic-api-10"></a>15.10.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the classic API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveAndSendMessageOld()
        throws JMSException, NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue = (Queue) namingContext.lookup("jms/dataQueue");
    Queue outboundQueue = (Queue)
        namingContext.lookup("jms/outboundQueue");

    try (Connection connection =
            connectionFactory.createConnection()){
        Session session =
            connection.createSession(SESSION_TRANSACTED);
        MessageConsumer consumer = session.createConsumer(dataQueue);
        MessageProducer producer =
            session.createProducer(outboundQueue);
        connection.start();

        TextMessage textMessage = null;
        do {
            textMessage = (TextMessage) consumer.receive(1000);
            if (textMessage!=null){
                producer.send(textMessage);
                session.commit();
                }
        } while (textMessage!=null);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-10"><a class="anchor" href="#example-using-the-simplified-api-10"></a>15.10.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how you might do this using the simplified API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public void receiveAndSendMessageNew() throws NamingException {

    InitialContext namingContext = getInitialContext();
    ConnectionFactory connectionFactory = (ConnectionFactory)
        namingContext.lookup("jms/connectionFactory");
    Queue dataQueue =
        (Queue) namingContext.lookup("jms/dataQueue");
    Queue outboundQueue =
        (Queue) namingContext.lookup("jms/outboundQueue");

    try (JMSContext context =
            connectionFactory.createContext(SESSION_TRANSACTED);){
        JMSConsumer consumer = context.createConsumer(dataQueue);
        TextMessage textMessage = null;
        do {
            textMessage = (TextMessage) consumer.receive(1000);
            if (textMessage != null) {
                context.createProducer().send(
                outboundQueue, textMessage);
                context.commit();
            }
        } while (textMessage != null);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, getInitialContext() is an application method which
returns a suitable JNDI InitialContext.</p>
</div>
<div class="paragraph">
<p>Note that receiveAndSendMessageNew does not need to throw JMSException.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="requestreply-pattern-using-a-temporaryqueue-jakarta-ee"><a class="anchor" href="#requestreply-pattern-using-a-temporaryqueue-jakarta-ee"></a>15.11. Request/reply pattern using a TemporaryQueue (Jakarta EE)</h3>
<div class="paragraph">
<p>This example compares the use of the classic and simplified Jakarta Messaging APIs for
implementing a request/reply pattern in a Jakarta EE Enterprise Beans container.</p>
</div>
<div class="paragraph">
<p>In this example, a session bean (the requestor) sends a request message
to some queue (the request queue). The setJMSReplyTo property of the
request message is set to a TemporaryQueue, to which the reply should be
set. After sending the request, the session bean listens on the
temporary queue until it receives the reply.</p>
</div>
<div class="paragraph">
<p>Since the request message won’t actually be sent until the transaction
is committed, the request message is sent in a separate transaction from
that used to receive the reply.</p>
</div>
<div class="paragraph">
<p>A message-driven bean (the responder) listens on the request queue for
request messages. When it receives a message it creates a reply message
and sends it to the reply queue specified in the setJMSReplyTo property
of the incoming message.</p>
</div>
<div class="paragraph">
<p>When implementing this pattern, the following features of Jakarta Messaging must be
borne in mind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The same Connection object that was used to create the TemporaryQueue
must also be used to consume the response message from it. (This is a
restriction of temporary queues).</p>
</li>
<li>
<p>If the request message is sent in a transaction then the response
message must be consumed in a separate transaction. That’s why the
message is sent in a separate business which has the transactional
attribute REQUIRES_NEW.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="example-using-the-classic-api-11"><a class="anchor" href="#example-using-the-classic-api-11"></a>15.11.1. Example using the classic API</h4>
<div class="paragraph">
<p>Here’s how you might implement the requestor this using the classic API:</p>
</div>
<div class="paragraph">
<p>There are two session beans involved in sending the request message.</p>
</div>
<div class="paragraph">
<p>The first session bean <code>RequestReplyOld</code> creates the creates the temporary
reply queue, calls a second bean <code>SenderBeanOld</code> to send the request in a
separate transaction and then listens for the reply:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Stateless
@LocalBean
public class RequestReplyOld {

@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@EJB private SenderBeanOld senderBean;

@TransactionAttribute(TransactionAttributeType.REQUIRED)
public String requestReplyOld(String request) throws JMSException {

    try (Connection connection =
            connectionFactory.createConnection()) {
        Session session = connection.createSession();
        TemporaryQueue replyQueue = session.createTemporaryQueue();

        // call a second bean to
        // send the request message in a separate transaction
        senderBean.sendRequestOld(request,replyQueue);

        // now receive the reply, using the same connection
        // as was used to create the temporary reply queue
        MessageConsumer consumer= session.createConsumer(replyQueue);
        connection.start();
        TextMessage reply = (TextMessage) consumer.receive();
        return reply.getText();
    }
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>The second session bean <code>SenderBeanOld</code> simply sends the request to the
request queue in a separate transaction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Stateless
@LocalBean
public class SenderBeanOld {

@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/requestQueue")
Queue requestQueue;

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void sendRequestOld(
        String requestString, TemporaryQueue replyQueue)
        throws JMSException {

    try (Connection connection =
            connectionFactory.createConnection()) {
        Session session = connection.createSession();
        TextMessage requestMessage =
            session.createTextMessage(requestString);
        requestMessage.setJMSReplyTo(replyQueue);
        MessageProducer messageProducer =
            session.createProducer(requestQueue);
        messageProducer.send(requestMessage);
    }
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the message-driven bean <code>RequestResponderOld</code> which receives
request messages and sends responses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@MessageDriven(mappedName = "jms/requestQueue")
public class RequestResponderOld implements MessageListener {

@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

public void onMessage(Message message) {

    try (Connection connection =
        connectionFactory.createConnection()){
    Session session = connection.createSession();
    // extract request from request message
    String request = ((TextMessage)message).getText();
    // extract temporary reply destination from request message
    Destination replyDestination = message.getJMSReplyTo();
    // prepare response
    TextMessage replyMessage =
        session.createTextMessage("Reply to: "+request);
    // send response
    MessageProducer messageProducer =
        session.createProducer(replyDestination);
    messageProducer.send(replyMessage);
    } catch (JMSException ex) {
        // log an error here
    }
}
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-11"><a class="anchor" href="#example-using-the-simplified-api-11"></a>15.11.2. Example using the simplified API</h4>
<div class="paragraph">
<p>Here’s how the same example might look when using the simplified API:</p>
</div>
<div class="paragraph">
<p>There are two session beans involved in sending the request message. The
first bean</p>
</div>
<div class="paragraph">
<p>The first session bean <code>RequestReplyNew</code> creates the creates the temporary
reply queue, calls a second bean <code>SenderBeanNew</code> to send the request in a
separate transaction and then listens for the reply:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Stateless
@LocalBean
public class RequestReplyNew {

@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@EJB private SenderBeanNew senderBean;

@TransactionAttribute(TransactionAttributeType.REQUIRED)
public String requestReplyNew(String request) throws JMSException {

    try (JMSContext context = connectionFactory.createContext()) {
        TemporaryQueue replyQueue = context.createTemporaryQueue();

        // send the request message in a separate transaction
        // so use a separate bean
        // this call may throw JMSException
        senderBean.sendRequestNew(request,replyQueue);

        // now receive the reply, using the same connection
        // as was used to create the temporary reply queue
        JMSConsumer consumer = context.createConsumer(replyQueue);
        return consumer.receiveBody(String.class);
    }
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>The second session bean <code>SenderBeanNew</code> simply sends the request to the
request queue in a separate transaction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Stateless
@LocalBean
public class SenderBeanNew {

@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

@Resource(lookup="jms/requestQueue")
Queue requestQueue;

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void sendRequestNew(
        String requestString, TemporaryQueue replyQueue)
        throws JMSException {

    try (JMSContext context = connectionFactory.createContext()) {
        TextMessage requestMessage =
            context.createTextMessage(requestString);
        // this call may throw JMSException
        requestMessage.setJMSReplyTo(replyQueue);
        context.createProducer().send(
            requestQueue,requestMessage);
    }
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the message-driven bean <code>RequestResponderNew</code> which receives
request messages and sends responses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@MessageDriven(mappedName = "jms/requestQueue")
public class RequestResponderNew implements MessageListener {

@Resource(lookup = "jms/connectionFactory")
ConnectionFactory connectionFactory;

public void onMessage(Message message) {

    try (JMSContext context = connectionFactory.createContext()){

        // extract request from request message
        // this may throw a JMSException
        String request = ((TextMessage)message).getText();

        // extract temporary reply destination from request message
        // this may throw a JMSException
        Destination replyDestination = message.getJMSReplyTo();

        // prepare response
        TextMessage replyMessage =
            context.createTextMessage("Reply to: "+request);

        // send response
        context.createProducer().send(replyDestination,replyMessage);
    } catch (JMSException ex) {
        // log an error here
    }
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note that in this example it is not possible to eliminate the need to
declare to catch JMSException since it uses methods on Message and
TextMessage which throw JMSException.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-the-simplified-api-and-injection-4"><a class="anchor" href="#example-using-the-simplified-api-and-injection-4"></a>15.11.3. Example using the simplified API and injection</h4>
<div class="paragraph">
<p>Here’s how the same example might look when using the simplified API
with the JMSContext created by injection:</p>
</div>
<div class="paragraph">
<p>There are two session beans involved in sending the request message. The
first bean</p>
</div>
<div class="paragraph">
<p>The first session bean <code>RequestReplyNew</code> creates the creates the temporary
reply queue, calls a second bean <code>SenderBeanNew</code> to send the request in a
separate transaction and then listens for the reply:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Stateless
@LocalBean
public class RequestReplyNew {

@Inject
@JMSConnectionFactory("jms/connectionFactory2")
private JMSContext context;

@EJB private SenderBeanNew senderBean;

@TransactionAttribute(TransactionAttributeType.REQUIRED)
public String requestReplyNew(String request) throws JMSException {

    TemporaryQueue replyQueue = context.createTemporaryQueue();

    // send the request message in a separate transaction
    // so use a separate bean
    // this call may throw JMSException
    senderBean.sendRequestNew(request,replyQueue);

    // now receive the reply, using the same connection
    // as was used to create the temporary reply queue
    JMSConsumer consumer = context.createConsumer(replyQueue);
    return consumer.receiveBody(String.class);
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>The second session bean <code>SenderBeanNew</code> simply sends the request to the
request queue in a separate transaction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Stateless
@LocalBean
public class SenderBeanNew {

@Inject
@JMSConnectionFactory("jms/connectionFactory")
private JMSContext context;

@Resource(lookup="jms/requestQueue")
Queue requestQueue;

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void sendRequestNew(
        String requestString, TemporaryQueue replyQueue)
        throws JMSException {

    TextMessage requestMessage =
        context.createTextMessage(requestString);
    // this call may throw JMSException
    requestMessage.setJMSReplyTo(replyQueue);
    context.createProducer().send(requestQueue,requestMessage);
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the message-driven bean <code>RequestResponderNew</code> which receives
request messages and sends responses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@MessageDriven(mappedName = "jms/requestQueue")
public class RequestResponderNew implements MessageListener {

@Inject
@JMSConnectionFactory("jms/connectionFactory")
private JMSContext context;

public void onMessage(Message message) {

    try {
        // extract request from request message
        // this may throw a JMSException
        String request = ((TextMessage)message).getText();

        // extract temporary reply destination from request message
        // this may throw a JMSException
        Destination replyDestination = message.getJMSReplyTo();

        // prepare response
        TextMessage replyMessage =
            context.createTextMessage("Reply to: "+request);

        // send response
        context.createProducer().send(replyDestination,replyMessage);
    } catch (JMSException ex) {
        // log an error here
    }
}
}</pre>
</div>
</div>
<div class="paragraph">
<p>Note that in this example it is not possible to eliminate the need to
declare to catch JMSException since it uses methods on Message and
TextMessage which throw JMSException.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="change-history"><a class="anchor" href="#change-history"></a>Appendix A: Change history</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="version-2-0"><a class="anchor" href="#version-2-0"></a>A.1. Version 2.0</h3>
<div class="paragraph">
<p>All changes made for Jakarta Messaging 2.0 are represented by individual issues in the
Jakarta Messaging specification issue tracker at
<a href="http://http://java.net/jira/browse/JMS_SPEC" class="bare">http://http://java.net/jira/browse/JMS_SPEC</a>. The appropriate issue
number (e.g. JMS_SPEC-64) is given for each change below.</p>
</div>
<div class="sect3">
<h4 id="reorganisation-of-chapters"><a class="anchor" href="#reorganisation-of-chapters"></a>A.1.1. Reorganisation of chapters</h4>
<div class="paragraph">
<p>This introduction of the simplified API in Jakarta Messaging 2.0 has necessitated a
major reorganisation of this specification.</p>
</div>
<div class="paragraph">
<p>The structure of the Jakarta Messaging 1.1 specification reflected the domain-specific
APIs introduced in Jakarta Messaging 1.0, with section titles such as
“QueueConnection” and “TopicSubscriber”. This was an inappropriate
structure even in Jakarta Messaging 1.1 since these interfaces had been superseded in
Jakarta Messaging 1.1 by the “unified” API. The addition of the simplified API in Jakarta Messaging
2.0 makes that structure even more inappropriate.</p>
</div>
<div class="paragraph">
<p>This version of the specification has therefore been completely
restructured along functional lines, with chapter headings such as
“connecting to a Jakarta Messaging provider” and “receiving messages”. These describe
each area of functionality in generic terms followed by a description of
how it is implemented in the various APIs. In general these chapters
contain the same text as in the previous version.</p>
</div>
<div class="paragraph">
<p>In addition the following completely new chapters have been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>chapter 12 “Use of Jakarta Messaging API in Jakarta EE applications”</p>
</li>
<li>
<p>chapter 13 “Resource adapter”</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="jakarta-messaging-providers-must-implement-both-ptp-and-pub-sub-jms_spec-50"><a class="anchor" href="#jakarta-messaging-providers-must-implement-both-ptp-and-pub-sub-jms_spec-50"></a>A.1.2. Jakarta Messaging providers must implement both PTP and Pub-Sub (JMS_SPEC-50)</h4>
<div class="paragraph">
<p>The specification has been amended to state that a Jakarta Messaging provider must
implement both point-to-point messaging (queues) and publish-subscribe
messaging (topics). This was already required by the Jakarta EE 6
specification, section EE.2.7, but was not previously required by the
Jakarta Messaging specification itself.</p>
</div>
<div class="paragraph">
<p>The sentence that stated “Providers of Jakarta Messaging point-to-point functionality
are not required to provide publish/subscribe functionality and vice
versa” has been removed.</p>
</div>
</div>
<div class="sect3">
<h4 id="use-of-jakarta-messaging-api-in-jakarta-ee-applications-jms_spec-45-and-jms_spec-27"><a class="anchor" href="#use-of-jakarta-messaging-api-in-jakarta-ee-applications-jms_spec-45-and-jms_spec-27"></a>A.1.3. Use of Jakarta Messaging API in Jakarta EE applications (JMS_SPEC-45 and JMS_SPEC-27)</h4>
<div class="paragraph">
<p>A new chapter 12 “Use of Jakarta Messaging API in Jakarta EE applications” has been
added. This chapter incorporates and clarifies various additional
requirements which were previously only described in the Jakarta EE and Jakarta Enterprise Beans
specifications. Section 12.2 “Restrictions on the use of Jakarta Messaging API in the
Jakarta EE web container or Enterprise Beans container” includes a list of methods which may not
be used in a Jakarta EE web container or Enterprise Beans container and section 12.3 “Behaviour of
Jakarta Messaging sessions in the Jakarta EE web container or Enterprise Beans container” clarifies how the
arguments to createSession are mostly ignored when used in a Jakarta EE web container
or Enterprise Beans container.</p>
</div>
<div class="paragraph">
<p>The specification been updated to refer to Jakarta EE 7 rather than J2EE
1.3. A reference has also been added to the new chapter 12 “Use of Jakarta Messaging
API in Jakarta EE applications”.</p>
</div>
<div class="paragraph">
<p>Section 1.4.8 “Integration of Jakarta Messaging with the Jakarta Enterprise Beans components” has been
deleted. It is superseded by the new chapter 12 “Use of Jakarta Messaging API in Jakarta EE applications”.</p>
</div>
</div>
<div class="sect3">
<h4 id="resource-adapter-jms_spec-25"><a class="anchor" href="#resource-adapter-jms_spec-25"></a>A.1.4. Resource adapter (JMS_SPEC-25)</h4>
<div class="paragraph">
<p>A new chapter 13 “Resource adapter” has been added which recommends, but
does not require, that a Jakarta Messaging provider (whether it forms part of a Jakarta EE application server or not) includes a resource adapter which connects
to that Jakarta Messaging provider and which conforms to the Jakarta Connectors specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="mdb-activation-properties-jms_spec-30-jms_spec-54-jms_spec-55"><a class="anchor" href="#mdb-activation-properties-jms_spec-30-jms_spec-54-jms_spec-55"></a>A.1.5. MDB activation properties (JMS_SPEC-30, JMS_SPEC-54, JMS_SPEC-55)</h4>
<div class="paragraph">
<p>A new section 13.1 “MDB activation properties” has been added which
defines a set of activation properties for use with Jakarta Messaging message-driven
beans.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The acknowledgeMode, messageSelector, destinationType,
subscriptionDurability, clientId and subscriptionName properties were
previously defined in appendix B “Activation Configuration for Message
Inflow to Jakarta Messaging Endpoints” in the Jakarta Connectors
specification, version 1.6. Their definition has now have been moved to
the Jakarta Messaging specification.</p>
</li>
<li>
<p>The connectionFactoryLookup property is new and may be used to specify
the the lookup name of an administratively-defined connection factory
which will be used used by the MDB.</p>
</li>
<li>
<p>The destinationLookup property is new and may be used to specify the
the lookup name of an administratively-defined queue or topic from which
the MDB will receive messages.</p>
</li>
<li>
<p>The activation property clientId is now optional when using a durable
subscription on a topic. This reflects the new shared durable
subscriptions feature in Jakarta Messaging 2.0 which does not require clientId to be
set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These MDB activation properties are also defined in the Jakarta Enterprise
Beans specification, version 3.2.</p>
</div>
</div>
<div class="sect3">
<h4 id="new-methods-to-create-a-session-jms_spec-45"><a class="anchor" href="#new-methods-to-create-a-session-jms_spec-45"></a>A.1.6. New methods to create a session (JMS_SPEC-45)</h4>
<div class="paragraph">
<p>The Connection method createSession(boolean transacted, int
acknowledgeMode) has sometimes been a cause of confusion because if the
transacted argument is set to true then the acknowledgeMode argument is
ignored but must still be given a value.</p>
</div>
<div class="paragraph">
<p>To simplify application code a new Connection method createSession(int
sessionMode) has been added which provides the same functionality as the
previous method but with a single argument.</p>
</div>
<div class="paragraph">
<p>Examples 14.1.4 “Creating a Session” and 14.3.3.1 “Creating a durable
subscription” have been updated to use this new method.</p>
</div>
<div class="paragraph">
<p>In addition, a second new Connection method createSession() has been
added. This has no arguments and is intended for use in a Jakarta EE web container or
Enterprise Beans container in the case when there is an active Jakarta transaction, when
the sessionMode supplied to createSession(int sessionMode) is ignored.</p>
</div>
</div>
<div class="sect3">
<h4 id="new-createdurableconsumer-methods-jms_spec-51"><a class="anchor" href="#new-createdurableconsumer-methods-jms_spec-51"></a>A.1.7. New createDurableConsumer methods (JMS_SPEC-51)</h4>
<div class="paragraph">
<p>The Session interface has been extended to add two createDurableConsumer
methods which return a MessageConsumer.</p>
</div>
<div class="paragraph">
<p>These are intended to replace the existing createDurableSubscription
methods which return a TopicSubscriber. A TopicSubscriber is a
domain-specific interface whose use has been discouraged since the
domain-independent interfaces were introduced in Jakarta Messaging 1.1.</p>
</div>
</div>
<div class="sect3">
<h4 id="multiple-consumers-now-allowed-on-the-same-topic-subscription-jms_spec-40"><a class="anchor" href="#multiple-consumers-now-allowed-on-the-same-topic-subscription-jms_spec-40"></a>A.1.8. Multiple consumers now allowed on the same topic subscription (JMS_SPEC-40)</h4>
<div class="paragraph">
<p>In Jakarta Messaging 1.1, a durable or non-durable topic subscription was not
permitted to have more than one consumer at a time. This meant that the
work of processing messages on a subscription could not be shared
amongst multiple threads, connections or JVMs, thereby limiting
scalability. This restriction has therefore been removed in Jakarta Messaging 2.0.</p>
</div>
<div class="sect4">
<h5 id="non-durable-subscriptions"><a class="anchor" href="#non-durable-subscriptions"></a>A.1.8.1. Non-durable subscriptions</h5>
<div class="paragraph">
<p>In order to maintain backwards compatibility with Jakarta Messaging 1.1, the existing
methods for creating non-durable subscriptions remain unchanged.
Subscriptions created using the existing createConsumer methods on
Session and TopicSession and the existing createSubscriber methods on
TopicSession, as well as the new createConsumer methods on JMSContext,
will continue to be restricted to a single consumer and are now referred
to as “unshared non-durable subscriptions”. These are described in a new
section 8.3.1 “Unshared non-durable subscriptions”.</p>
</div>
<div class="paragraph">
<p>New createSharedConsumer methods have been added to Session,
TopicSession and JMSContext to create a new type of non-durable
subscription which may have more than one consumer. These are referred
to as “shared non-durable subscriptions” and are identified by name and
client identifier (if set). They are described in a new section 8.3.2
“Shared non-durable subscriptions”. The noLocal parameter is not
supported for shared non-durable subscriptions.</p>
</div>
</div>
<div class="sect4">
<h5 id="durable-subscriptions"><a class="anchor" href="#durable-subscriptions"></a>A.1.8.2. Durable subscriptions</h5>
<div class="paragraph">
<p>In order to maintain backwards compatibility with Jakarta Messaging 1.1, the existing
methods for creating durable subscriptions also remain unchanged.
Subscriptions created using the existing createDurableSubscriber methods
on Session and TopicSession, as well as the new createDurableConsumer
methods on Session, TopicSession and JMSContext) will continue to be
restricted to a single consumer and setting the client identifier will
continue to be required. These now referred to as “unshared durable
subscriptions” and are described in a new section 8.3.3 “Unshared
durable subscriptions”.</p>
</div>
<div class="paragraph">
<p>New createSharedDurableConsumer methods have been added to Session,
TopicSession and JMSContext to create a new type of durable subscription
which may have more than one consumer and which do not require the
client identifier to be set. These are referred to as “shared durable
subscriptions” and are described in a new section 8.3.4 “Shared durable
subscriptions”. The noLocal parameter is not supported for shared
durable subscriptions.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="client-id-optional-on-shared-durable-subscriptions-jms_spec-39"><a class="anchor" href="#client-id-optional-on-shared-durable-subscriptions-jms_spec-39"></a>A.1.9. Client ID optional on shared durable subscriptions (JMS_SPEC-39)</h4>
<div class="paragraph">
<p>In Jakarta Messaging 1.1 it was mandatory for the client identifier to be set when
creating or activating a durable subscription.</p>
</div>
<div class="paragraph">
<p>In Jakarta Messaging 2.0, shared durable subscriptions (see A.1.8 above) will not have
this restriction. However in order to maintain backwards compatibility
with Jakarta Messaging 1.1, unshared durable subscriptions will continue to require
the client identifier to be set.</p>
</div>
</div>
<div class="sect3">
<h4 id="delivery-delay-jms_spec-44"><a class="anchor" href="#delivery-delay-jms_spec-44"></a>A.1.10. Delivery delay (JMS_SPEC-44)</h4>
<div class="paragraph">
<p>A new feature “delivery delay” has been added which allows a producing
client to specify the earliest time when a provider may make the message
visible on the target destination and available for delivery to
consumers.</p>
</div>
<div class="paragraph">
<p>A new section 7.9 “Message delivery delay” and a corresponding new
section 3.4.13 “JMSDeliveryTime” have been added to describe this new
feature. Section 6.2.9.2 “Order of message sends” has been updated to
state that messages with a later delivery time may be delivered after
messages with an earlier delivery time.</p>
</div>
<div class="paragraph">
<p>Section 6.2.10 “Message acknowledgment” has been updated to state that
when a session’s recover method is called the messages it now delivers
may be different from those that were originally delivered due to the
delivery of messages which could not previously be delivered as they had
not reached their specified delivery time.</p>
</div>
<div class="paragraph">
<p>Section 7.1 “Producers” has been updated to mention that a client may
now define a default delivery delay for messages sent by a producer.</p>
</div>
</div>
<div class="sect3">
<h4 id="sending-messages-asynchronously-jms_spec-43"><a class="anchor" href="#sending-messages-asynchronously-jms_spec-43"></a>A.1.11. Sending messages asynchronously (JMS_SPEC-43)</h4>
<div class="paragraph">
<p>New send methods have been added to MessageProducer which allow messages
to be sent asynchronously. These methods permit the Jakarta Messaging provider to
perform part of the work involved in sending the message in a separate
thread. When the send is complete, a callback method is invoked on an
object supplied by the caller. Similar methods are available for
applications using the new JMSProducer interface.</p>
</div>
<div class="paragraph">
<p>Section 7.1 “Producers” has been extended to describe these additional
send methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="use-of-autocloseable-jms_spec-53"><a class="anchor" href="#use-of-autocloseable-jms_spec-53"></a>A.1.12. Use of AutoCloseable (JMS_SPEC-53)</h4>
<div class="paragraph">
<p>The Connection, Session, MessageProducer, MessageConsumer and
QueueBrowser interfaces have been modified to extend the
java.lang.Autocloseable interface. This means that applications can
create these objects using a Java SE 7 try-with-resources statement
which removes the need for applications to explicitly call close() when
these objects are no longer required.</p>
</div>
<div class="paragraph">
<p>The new JMSContext and JMSConsumer interfaces also extend the
java.lang.Autocloseable interface.</p>
</div>
<div class="paragraph">
<p>Sections 6.1.8 “Closing a connection” and 6.2.15 “Closing a session”
explain that the use of a try-with-resources statement makes it easier
to ensure that these objects are closed after use.</p>
</div>
<div class="paragraph">
<p>The example in section 14.1.3 “Creating a Connection” has been extended
to add a second example which uses the the try-with-resources statement.</p>
</div>
</div>
<div class="sect3">
<h4 id="jmsxdeliverycount-jms_spec-42"><a class="anchor" href="#jmsxdeliverycount-jms_spec-42"></a>A.1.13. JMSXDeliveryCount (JMS_SPEC-42)</h4>
<div class="paragraph">
<p>The existing message property JMSXDeliveryCount has been made mandatory.
It was previously optional. This means that Jakarta Messaging providers must set this
property to the number of times the message has been delivered.</p>
</div>
<div class="paragraph">
<p>A new section 3.5.11 “JMSXDeliveryCount” has been added which describes
this property and explains how it is not required to be guaranteed in
all possible cases, such as after a server failure.</p>
</div>
<div class="paragraph">
<p>Section 3.5.9 “Jakarta Messaging defined properties” has been updated accordingly.
Some of the wording in this section has been rearranged to reflect the
fact that some properties are optional but that one (JMSXDeliveryCount)
is now mandatory. A clarification has been added to state that the
effect of setting a message selector on a property (such as
JMSXDeliveryCount) which is set by the provider on receive is undefined.</p>
</div>
<div class="paragraph">
<p>Section 3.4.7 “JMSRedelivered” has been amended to mention the
JMSXDeliveryCount property as well.</p>
</div>
<div class="paragraph">
<p>Section 6.2.10 “Message acknowledgment”: A sentence which mentions the
JMSRedelivered flag has been amended to mention the JMSXDeliveryCount
property as well.</p>
</div>
<div class="paragraph">
<p>6.2.11 “Duplicate delivery of messages”: A sentence which mentions the
JMSRedelivered flag has been amended to mention the JMSXDeliveryCount
property as well..</p>
</div>
<div class="paragraph">
<p>9.1 “Reliability”: A sentence which mentions the JMSRedelivered flag has
been amended to mention the JMSXDeliveryCount property as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="simplified-api-jms_spec-64"><a class="anchor" href="#simplified-api-jms_spec-64"></a>A.1.14. Simplified API (JMS_SPEC-64)</h4>
<div class="paragraph">
<p>Three new objects JMSContext, JMSProducer and JMSConsumer have been
added which together combine the functionality of the existing
Connection, Session , MessageProducer and MessageConsumer objects. This
provides an alternative API for using Jakarta Messaging which is referred to in this
specification as the “simplified API”.</p>
</div>
<div class="paragraph">
<p>JMSContext objects may be created using new methods on
ConnectionFactory. Jakarta EE applications may alternatively create
JMSContext objects using injection.</p>
</div>
<div class="paragraph">
<p>The simplified API is described in section 2.8 “Simplified API
interfaces”.</p>
</div>
<div class="paragraph">
<p>Developers now have a choice as to whether to use the “classic” API (the
Connection, Session, MessageProducer and MessageConsumer objects) or the
“simplified API” (the JMSContext, JMSProducer and JMSConsumer objects).</p>
</div>
<div class="paragraph">
<p>The two APIs are intended to offer similar functionality. The classic
API is not deprecated and will remain part of Jakarta Messaging indefinitely.</p>
</div>
<div class="paragraph">
<p>Section 15 “Examples of the simplified API” contains a number of
examples which compare the use of the simplified and classic APIs in a
number of simple Jakarta EE and Java SE use cases.</p>
</div>
</div>
<div class="sect3">
<h4 id="new-method-to-extract-the-body-directly-from-a-message-jms_spec-101"><a class="anchor" href="#new-method-to-extract-the-body-directly-from-a-message-jms_spec-101"></a>A.1.15. New method to extract the body directly from a Message (JMS_SPEC-101)</h4>
<div class="paragraph">
<p>Two new methods have been added to Message:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;T&gt; T getBody(Class&lt;T&gt; c)</p>
</li>
<li>
<p>boolean isBodyAssignableTo(Class c)</p>
<div class="paragraph">
<p>The getBody method returns the message body as an object of the
specified type. This provides a convenient way to obtain the body from a
newly-received Message object. It can be used either</p>
</div>
</li>
<li>
<p>to return the body of a TextMessage, MapMessage or BytesMessage as a
String, Map or byte[] without the need to cast the Message first to the
appropriate subtype, or</p>
</li>
<li>
<p>to return the body of an ObjectMessage without the need to cast the
Message to ObjectMessage, extract the body as a Serializable, and cast
it to the specified type.</p>
<div class="paragraph">
<p>The isBodyAssignableTo method is a companion method which can be used to
determine whether a subsequent call to getBody would be able to return
the body of a particular Message object as a particular type.</p>
</div>
<div class="paragraph">
<p>The example in section 14.2.3 “Unpacking a TextMessage” has been updated
to demonstrate the use of the getBody method.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="subscription-name-characters-and-length-2"><a class="anchor" href="#subscription-name-characters-and-length-2"></a>A.1.16. Subscription name characters and length</h4>
<div class="paragraph">
<p>Jakarta Messaging 1.1 did not define what characters were valid in a durable
subscription name, or what length of name was supported.</p>
</div>
<div class="paragraph">
<p>Jakarta Messaging 2.0 defines a minimum set of characters that must be valid in a
durable or non-durable subscription name. It also defines that
subscription names of up to 128 characters long must be supported.</p>
</div>
<div class="paragraph">
<p>For details see section 4.2.4 “Subscription name characters and length”</p>
</div>
</div>
<div class="sect3">
<h4 id="clarification-message-may-be-sent-using-any-session-jms_spec-52"><a class="anchor" href="#clarification-message-may-be-sent-using-any-session-jms_spec-52"></a>A.1.17. Clarification: message may be sent using any session (JMS_SPEC-52)</h4>
<div class="paragraph">
<p>The specification and javadocs have been clarified to make it clear that
a message may be sent using any session, not just the session used to
create the message.</p>
</div>
<div class="paragraph">
<p>Section 6.2.4 “Optimized message implementations” has been updated
accordingly.</p>
</div>
</div>
<div class="sect3">
<h4 id="clarification-use-of-exceptionlistener-jms_spec-49"><a class="anchor" href="#clarification-use-of-exceptionlistener-jms_spec-49"></a>A.1.18. Clarification: use of ExceptionListener (JMS_SPEC-49)</h4>
<div class="paragraph">
<p>Section 6.1.7 “ExceptionListener” has been amended to clarify how an
ExceptionListener is used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The existing text which states that a connection “serializes execution
of its ExceptionListener” has been extended to explain what this means.</p>
</li>
<li>
<p>A note has been added to state that there are no restrictions on the
use of the Jakarta Messaging API by the listener’s onException method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the following changes to javadoc comments have been made:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The javadoc comments for the stop and close methods on the Connection
interface have been amended to clarify that, if an exception listener
for the connection is running when stop or close are invoked, there is
no requirement for the stop or close call to wait until the exception
listener has returned before it may return.</p>
</li>
<li>
<p>Similarly, the javadoc comment for the close method on the Session
interface has been amended to clarify that, if an exception listener for
the session’s connection is running when close is invoked, there is no
requirement for the close call to wait until the exception listener has
returned before it may return.</p>
</li>
<li>
<p>The javadoc comments for the stop and close methods on the JMSContext
interface have been amended to clarify that, if an exception listener
for the JMSContext’s connection is running when stop or close are
invoked, there is no requirement for the stop or close call to wait
until the exception listener has returned before it may return.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="clarification-use-of-stop-or-close-from-a-message-listener-jms_spec-48"><a class="anchor" href="#clarification-use-of-stop-or-close-from-a-message-listener-jms_spec-48"></a>A.1.19. Clarification: use of stop or close from a message listener (JMS_SPEC-48)</h4>
<div class="paragraph">
<p>The specification has been clarified to clarify the required behaviour
if various stop or close methods are called from within the onMessage
method of a MessageListener.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging 1.1 specification states that the stop method on Connection and
the close methods on Connection, Session and MessageConsumer must not
return until any message listeners have returned. This means that if
these methods are called from a message listener on its own Connection,
Session or MessageConsumer then deadlock would occur.</p>
</div>
<div class="paragraph">
<p>The Jakarta Messaging 2.0 specification amends the required behaviour to avoid the
possibility of deadlock.</p>
</div>
<div class="paragraph">
<p>If a MessageListener’s onMessage method calls stop or close on its own
Connection, close on its own Session, stop or close on its own
JMSContext, or stop on a JMSContext which uses the same connection, then
the stop or close method will either fail and throw a
jakarta.jms.IllegalStateException (for methods on Session and Connection)
or jakarta.jms.IllegalStateRuntimeException (for methods on JMSContext),
or it will succeed and stop or close the Connection, Session or
JMSContext as appropriate.</p>
</div>
<div class="paragraph">
<p>However a different approach has been taken for the close methods on
MessageConsumer and JMSConsumer. A MessageListener’s onMessage method is
explicitly allowed to call close on its own MessageConsumer or
JMSConsumer.</p>
</div>
<div class="paragraph">
<p>For details see the following sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Section 6.1.5 “Pausing delivery of incoming messages”</p>
</li>
<li>
<p>Section 6.1.8 “Closing a connection”</p>
</li>
<li>
<p>Section 6.2.15 “Closing a session”</p>
</li>
<li>
<p>Section 8.8 “Closing a consumer”.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Messaging 1.1 specification states that the close methods on Connection or
Session are exempt from the requirement that the resources of a session
may only be used by one thread at a time.</p>
</div>
<div class="paragraph">
<p>In Jakarta Messaging 2.0 this exemption also applies to the close method on
JMSContext, and has been extended to cover the close methods on a
MessageConsumer or JMSConsumer.</p>
</div>
<div class="paragraph">
<p>For details see the following sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Section 6.2.5 “Threading restrictions on a session”</p>
</li>
<li>
<p>Section 6.2.6 “Threading restrictions on a JMSContext”</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="clarification-use-of-nolocal-when-creating-a-durable-subscription-jms_spec-65"><a class="anchor" href="#clarification-use-of-nolocal-when-creating-a-durable-subscription-jms_spec-65"></a>A.1.20. Clarification: use of noLocal when creating a durable subscription (JMS_SPEC-65)</h4>
<div class="paragraph">
<p>The specification has been amended to clarify the effect of setting the
noLocal argument when creating a durable subscription. This was poorly
defined in Jakarta Messaging 1.1.</p>
</div>
<div class="paragraph">
<p>The new definition of noLocal is given in section 8.3.3 “Unshared
durable subscriptions”. This states that when a durable subscription is
created on a topic, the noLocal argument may be used to specify that
messages published to the topic by its own connection or any other with
the same client identifier will not be added to the durable
subscription. It also states that if the client identifier is unset then
setting noLocal to true will cause an exception to be thrown.</p>
</div>
</div>
<div class="sect3">
<h4 id="clarification-message-headers-that-are-intended-to-be-set-by-the-jakarta-messaging-provder-jms_spec-34"><a class="anchor" href="#clarification-message-headers-that-are-intended-to-be-set-by-the-jakarta-messaging-provder-jms_spec-34"></a>A.1.21. Clarification: message headers that are intended to be set by the Jakarta Messaging provder (JMS_SPEC-34)</h4>
<div class="paragraph">
<p>The specification has been clarified to state that the following methods
on Message are not for use by client applications and setting them does
not have any effect:</p>
</div>
<div class="paragraph">
<p>setJMSDeliveryMode, setJMSExpiration, setJMSPriority, setJMSMessageID,
setJMSTimestamp, setJMSRedelivered, setJMSDeliveryTime (new header
property: see section A.1.9).</p>
</div>
<div class="paragraph">
<p>Section 3.4.11 “How message header values are set” has been extended to
explain this.</p>
</div>
</div>
<div class="sect3">
<h4 id="clarification-session-methods-createqueue-and-createtopic-jms_spec-31"><a class="anchor" href="#clarification-session-methods-createqueue-and-createtopic-jms_spec-31"></a>A.1.22. Clarification: Session methods createQueue and createTopic (JMS_SPEC-31)</h4>
<div class="paragraph">
<p>The javadoc comments for the createQueue and createTopic methods on
Session and JMSContext have been reworded to clarify that these methods
simply create a Queue or Topic object which encapsulates the name of the
queue or topic and do not create the physical queue or topic in the Jakarta Messaging
provider.</p>
</div>
<div class="paragraph">
<p>In addition a note has been added to these javadoc comments to explain
that although creating a physical queue or topic is provider-specific
and is typically an administrative task performed by an administrator,
some providers may create them automatically when needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="clarification-definition-of-jmsexpiration-jms_spec-82"><a class="anchor" href="#clarification-definition-of-jmsexpiration-jms_spec-82"></a>A.1.23. Clarification: Definition of JMSExpiration (JMS_SPEC-82)</h4>
<div class="paragraph">
<p>In the Jakarta Messaging 1.1 specification, section 3.4.9 “JMSExpiration”, a message’s
expiration time was defined as “the sum of the time-to-live value
specified on the send method and the current GMT value”.</p>
</div>
<div class="paragraph">
<p>However the JMSExpiration header field is a long value and the
specification does not define how the expiration time is converted to a
long.</p>
</div>
<div class="paragraph">
<p>This has now been clarified to state that it is “the difference,
measured in milliseconds, between the expiration time and midnight,
January 1, 1970 UTC.” This definition is chosen to be consistent with
the java.lang.System method currentTimeMillis.</p>
</div>
<div class="paragraph">
<p>The updated text can be seen in section 3.4.9 “JMSExpiration” and
section 7.8 “Message time-to-live”.</p>
</div>
</div>
<div class="sect3">
<h4 id="correction-reconnecting-to-a-durable-subscription-jms_spec-80"><a class="anchor" href="#correction-reconnecting-to-a-durable-subscription-jms_spec-80"></a>A.1.24. Correction: Reconnecting to a durable subscription (JMS_SPEC-80)</h4>
<div class="paragraph">
<p>In the Jakarta Messaging 1.1 specification, section 9.3.3.2 “Reconnect to a topic
using a durable subscription” stated that “the client must be attached
to the same Connection”. This was incorrect and has now been corrected
to state that the client must use a connection with the same client
identifier.</p>
</div>
<div class="paragraph">
<p>In addition this section has been renamed 14.3.3.2 “Creating a consumer
on an existing durable subscription” and rewritten to make it clearer.</p>
</div>
</div>
<div class="sect3">
<h4 id="correction-mapmessage-when-name-is-null-jms_spec-77"><a class="anchor" href="#correction-mapmessage-when-name-is-null-jms_spec-77"></a>A.1.25. Correction: MapMessage when name is null (JMS_SPEC-77)</h4>
<div class="paragraph">
<p>In the Jakarta Messaging 1.1 API documentation for jakarta.jms.MapMessage, the method
setBytes (String name, byte[] value) is defined as throwing a
NullPointerException “if the name is null, or if the name is an empty
string.”</p>
</div>
<div class="paragraph">
<p>However there are eleven other methods on MapMessage of the form
setSomething(name,value). These all specify that a
IllegalArgumentException is thrown “if the name is null or if the name
is an empty string.”</p>
</div>
<div class="paragraph">
<p>This appears to be an error in the API documentation. This is confirmed
by the Jakarta Messaging compliance tests which already expect setBytes to throw a
IllegalArgumentException.</p>
</div>
<div class="paragraph">
<p>The API documentation for setBytes has therefore been changed to match
the other methods and specify that an IllegalArgumentException should be
thrown in this case.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Their implementation of setJMSCorrelationIDAsBytes() and getJMSCorrelationIDAsBytes() may throw java.lang.UnsupportedOperationException.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. See X/Open CAE Specification Data Management: Structured Query Language (SQL), Version 2, ISBN: 1-85912-151-9 March 1996.
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. The Java Tutorials may be found at <a href="http://docs.oracle.com/javase/tutorial/index.html" class="bare">http://docs.oracle.com/javase/tutorial/index.html</a>.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. The term ‘transacted session’ refers to the case where a session’s commit and rollback methods are used to demarcate a transaction local to the session. In the case where a session’s work is coordinated by an external transaction manager, a session’s commit and rollback methods are not used and the result of a closed session’s work is determined later by the transaction manager.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. There are no restrictions on the number of threads that can use a session or any objects it creates. The restriction is that the resources of a session should not be used concurrently by multiple threads. It is up to the user to ensure that this concurrency restriction is met. The simplest way to do this is to use one thread. In the case of asynchronous delivery, use one thread for setup in stopped mode and then start asynchronous delivery. In more complex cases the user must provide explicit synchronization.
</div>
</div>
<div id="footer">
<div id="footer-text">
 3.0<br>
Last updated 2020-10-22 08:18:32 -0700
</div>
</div>
</body>
</html>