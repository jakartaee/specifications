<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="">
<title>Jakarta NoSQL</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta NoSQL</h1>
<div class="details">
<span id="revnumber"> 1.0.0-M1,</span>
<span id="revdate">March 23, 2024</span>
<br><span id="revremark">Draft</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_goal">1.1. Goal</a></li>
<li><a href="#_non_goals">1.2. Non-Goals</a></li>
<li><a href="#_conventions">1.3. Conventions</a></li>
<li><a href="#_jakarta_nosql_project_team">1.4. Jakarta NoSQL Project Team</a>
<ul class="sectlevel3">
<li><a href="#_project_lead">1.4.1. Project Lead</a></li>
<li><a href="#_contributors">1.4.2. Contributors</a></li>
<li><a href="#_committers">1.4.3. Committers</a></li>
<li><a href="#_historical_committer">1.4.4. Historical Committer</a></li>
<li><a href="#_mentor">1.4.5. Mentor</a></li>
<li><a href="#_full_list_of_contributors">1.4.6. Full List of Contributors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#entity_definition">2. Entity Classes</a>
<ul class="sectlevel2">
<li><a href="#_programming_model_for_entity_classes">2.1. Programming Model for Entity Classes</a>
<ul class="sectlevel3">
<li><a href="#_persistent_fields">2.1.1. Persistent Fields</a></li>
<li><a href="#basic_types">2.1.2. Basic Types</a></li>
<li><a href="#embeddable_definition">2.1.3. Embedded Fields and Embeddable Classes </a></li>
<li><a href="#_entity_associations">2.1.4. Entity Associations</a></li>
<li><a href="#_collections_of_embeddable_classes_and_basic_types">2.1.5. Collections of Embeddable Classes and Basic Types</a></li>
<li><a href="#_map_collections">2.1.6. Map Collections</a></li>
<li><a href="#_entity_property_names">2.1.7. Entity Property Names</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_annotations">3. Annotations</a>
<ul class="sectlevel2">
<li><a href="#_entity">3.1. @Entity</a>
<ul class="sectlevel3">
<li><a href="#_entity_definition_reference">3.1.1. Entity Definition Reference</a></li>
<li><a href="#_associating_with_other_entities">3.1.2. Associating with Other Entities</a></li>
</ul>
</li>
<li><a href="#_embeddable">3.2. @Embeddable</a></li>
<li><a href="#_id">3.3. @Id</a></li>
<li><a href="#_column">3.4. @Column</a></li>
<li><a href="#_convert">3.5. @Convert</a></li>
<li><a href="#_inheritance">3.6. Inheritance</a>
<ul class="sectlevel3">
<li><a href="#_abstract_entity_classes">3.6.1. Abstract Entity Classes</a></li>
<li><a href="#_mappedsuperclass">3.6.2. @MappedSuperclass</a></li>
<li><a href="#inheritance_definition">3.6.3. @Inheritance</a></li>
<li><a href="#_discriminatorcolumn">3.6.4. @DiscriminatorColumn</a></li>
<li><a href="#_discriminatorvalue">3.6.5. @DiscriminatorValue</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_template_classes">4. Template Classes</a>
<ul class="sectlevel2">
<li><a href="#_template_and_inheritance_classes">4.1. Template and Inheritance classes</a></li>
<li><a href="#_fluent_api_query">4.2. Fluent API Query</a>
<ul class="sectlevel3">
<li><a href="#_importance_of_fluent_api_query">4.2.1. Importance of Fluent API Query</a></li>
<li><a href="#_limitations_in_key_value_databases">4.2.2. Limitations in Key-Value Databases</a></li>
<li><a href="#_supported_methods_in_other_nosql_databases">4.2.3. Supported Methods in Other NoSQL Databases</a></li>
<li><a href="#_query_navigation_hierarchy">4.2.4. Query Navigation Hierarchy</a></li>
</ul>
</li>
<li><a href="#_ttl_time_to_live_support">4.3. TTL (Time-To-Live) Support</a></li>
</ul>
</li>
<li><a href="#_jakarta_nosql_providers">5. Jakarta NoSQL Providers</a>
<ul class="sectlevel2">
<li><a href="#_configuration_and_credentials">5.1. Configuration and Credentials</a></li>
<li><a href="#_schema_generation">5.2. Schema Generation</a></li>
<li><a href="#_jakarta_nosql_providers_extensions">5.3. Jakarta NoSQL Providers Extensions</a></li>
<li><a href="#_persistent_fields_2">5.4. Persistent Fields</a></li>
</ul>
</li>
<li><a href="#_interoperability_with_other_jakarta_ee_specifications">6. Interoperability with other Jakarta EE Specifications</a>
<ul class="sectlevel2">
<li><a href="#_jakarta_contexts_and_dependency_injection">6.1. Jakarta Contexts and Dependency Injection</a>
<ul class="sectlevel3">
<li><a href="#_cdi_extensions_for_jakarta_data_providers">6.1.1. CDI Extensions for Jakarta Data Providers</a></li>
</ul>
</li>
<li><a href="#_jakarta_bean_validation">6.2. Jakarta Bean Validation</a></li>
<li><a href="#_jakarta_data">6.3. Jakarta Data</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta NoSQL

Version: 1.0.0-M1

Status: Draft

Release: March 23, 2024

Copyright (c) 2020, 2024 Jakarta NoSQL Contributors:


This program and the accompanying materials are made available under the
terms of the Eclipse Public License v. 2.0 which is available at
<a href="https://www.eclipse.org/legal/epl-2.0" class="bare">https://www.eclipse.org/legal/epl-2.0</a>.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the ever-evolving landscape of modern application development, NoSQL databases have emerged as a vital component for handling vast amounts of unstructured data efficiently. Jakarta NoSQL bridges the gap between Java applications and NoSQL databases by offering a comprehensive set of APIs, annotations, and SPIs. These standardized tools empower developers to seamlessly integrate their Java applications with various types of NoSQL databases, ensuring flexibility and agility in database selection without compromising application logic.</p>
</div>
<div class="paragraph">
<p>At its core, Jakarta NoSQL aims to simplify the complexity associated with NoSQL database integration, providing a unified approach for developers to interact with different database systems. By abstracting away the intricacies of database-specific operations, such as data modeling, querying, and transaction management, Jakarta NoSQL fosters a consistent development experience across diverse NoSQL technologies. This abstraction layer not only streamlines development efforts but also future-proofs applications against changes in underlying database implementations, enabling smooth transitions between different NoSQL solutions as project requirements evolve.</p>
</div>
<div class="paragraph">
<p>Furthermore, Jakarta NoSQL fosters a vibrant ecosystem by encouraging collaboration between developers, database vendors, and the wider Java community. Its extensible architecture allows for the seamless integration of custom database implementations, ensuring compatibility with both established and emerging NoSQL technologies. With Jakarta NoSQL, developers can focus on building robust, scalable applications while leveraging the strengths of NoSQL databases, confident in the knowledge that their code remains portable, adaptable, and primed for future innovation.</p>
</div>
<div class="sect2">
<h3 id="_goal"><a class="anchor" href="#_goal"></a>1.1. Goal</h3>
<div class="paragraph">
<p>The primary goal of Jakarta NoSQL is to streamline and enhance productivity in performing everyday NoSQL operations within Java applications. In the ever-expanding landscape of data management, NoSQL databases have emerged as powerful tools for handling diverse data structures and massive volumes of information. Jakarta NoSQL aims to facilitate seamless integration between Java applications and NoSQL databases, providing developers with a standardized and efficient approach to interacting with these databases.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Increasing Productivity</strong>: Jakarta NoSQL is designed to simplify the process of working with NoSQL databases, enabling developers to focus on application logic rather than the intricacies of database management. By offering standardized APIs, annotations, and query languages, Jakarta NoSQL reduces the learning curve associated with integrating and interacting with various NoSQL database systems.</p>
</li>
<li>
<p><strong>Rich Object Mapping</strong>: One of the core features of Jakarta NoSQL is its support for rich object mapping. This feature allows developers to map Java objects directly to NoSQL database structures, eliminating the need for complex data transformation code. By providing a seamless mapping mechanism, Jakarta NoSQL enables developers to work with NoSQL databases using familiar object-oriented paradigms, enhancing productivity and code readability.</p>
</li>
<li>
<p><strong>Flexibility and Adaptability</strong>: Jakarta NoSQL is designed to be flexible and adaptable, capable of working with a wide range of NoSQL database systems. Moreover, its extensible architecture allows for the easy integration of new database types and behaviors through extensions. It ensures that Jakarta NoSQL remains relevant and up-to-date in the face of evolving database technologies and requirements.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_non_goals"><a class="anchor" href="#_non_goals"></a>1.2. Non-Goals</h3>
<div class="paragraph">
<p>While Jakarta NoSQL aims to enhance productivity and simplify integration with NoSQL databases, it is essential to clarify its non-goals:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>ORM-like Features</strong>: Jakarta NoSQL does not aim to replicate all Object-Relational Mapping (ORM) framework features. While it provides rich object mapping capabilities, it may offer a different level of abstraction and functionality than traditional ORM frameworks for relational databases.</p>
</li>
<li>
<p><strong>Full Compatibility with Every NoSQL Database</strong>: Jakarta NoSQL aims to provide a standardized approach for working with NoSQL databases. However, it may offer partial compatibility with every NoSQL database on the market. Compatibility may vary based on the database type and specific features supported by each database.</p>
</li>
<li>
<p><strong>Replacing Database-specific Features</strong>: Jakarta NoSQL does not intend to remove all database-specific features provided by individual NoSQL databases. While it offers a standard set of APIs and annotations, developers may still need to leverage database-specific features directly for certain advanced use cases.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_conventions"><a class="anchor" href="#_conventions"></a>1.3. Conventions</h3>
<div class="paragraph">
<p>Throughout the Jakarta NoSQL specification, the terms "entity attribute" and "entity property" are used interchangeably to refer to the fields or properties defined within an entity class.</p>
</div>
<div class="paragraph">
<p>When demonstrating output samples, JSON format is commonly used to represent data structures. However, it&#8217;s important to note that this does not imply that a NoSQL database must serialize data in JSON format. The JSON samples provided serve to demonstrate and exemplify the structure of the data.</p>
</div>
<div class="paragraph">
<p>It&#8217;s crucial to understand that a Jakarta NoSQL provider and the underlying NoSQL database have the flexibility to define the serialization process according to their requirements. This may involve using user-defined types (UDTs), proprietary serialization formats, or other methods tailored to the specific database technology used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jakarta_nosql_project_team"><a class="anchor" href="#_jakarta_nosql_project_team"></a>1.4. Jakarta NoSQL Project Team</h3>
<div class="paragraph">
<p>This specification is being developed as part of Jakarta NoSQL project under the
Jakarta EE Specification Process. It is the result of the collaborative work
of the project committers and various contributors.</p>
</div>
<div class="sect3">
<h4 id="_project_lead"><a class="anchor" href="#_project_lead"></a>1.4.1. Project Lead</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://projects.eclipse.org/content/otavio-santana-project-lead-jakarta-nosql">Otavio Santana</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contributors"><a class="anchor" href="#_contributors"></a>1.4.2. Contributors</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://projects.eclipse.org/user/8408">Ivar Grimstad</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/user/8180">Kevin Sutter</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/user/10810">Scott Stark</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_committers"><a class="anchor" href="#_committers"></a>1.4.3. Committers</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://projects.eclipse.org/content/andres-galante-committer-jakarta-nosql">Andres Galante</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/fred-rowe-committer-jakarta-nosql">Fred Rowe</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/gaurav-gupta-committer-jakarta-nosql">Gaurav Gupta</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/ivan-junckes-filho-committer-jakarta-nosql">Ivan Junckes Filho</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/jesse-gallagher-committer-jakarta-nosql">Jesse Gallagher</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/michael-redlich-committer-jakarta-nosql">Michael Redlich</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/nathan-rauh-committer-jakarta-nosql">Nathan Rauh</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/otavio-santana-committer-jakarta-nosql">Otavio Santana</a></p>
</li>
<li>
<p><a href="https://projects.eclipse.org/content/werner-keil-committer-jakarta-nosql">Werner Keil</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_historical_committer"><a class="anchor" href="#_historical_committer"></a>1.4.4. Historical Committer</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://projects.eclipse.org/content/leonardo-lima-committer-jakarta-nosql">Leonardo Lima</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mentor"><a class="anchor" href="#_mentor"></a>1.4.5. Mentor</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://projects.eclipse.org/content/wayne-beaton-mentor-jakarta-nosql">Wayne Beaton</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_full_list_of_contributors"><a class="anchor" href="#_full_list_of_contributors"></a>1.4.6. Full List of Contributors</h4>
<div class="paragraph">
<p>The complete list of Jakarta NoSQL contributors may be found <a href="https://github.com/eclipse-ee4j/nosql/graphs/contributors">here</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entity_definition"><a class="anchor" href="#entity_definition"></a>2. Entity Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The notion of an <em>entity</em> is the fundamental building block with which a data model may be constructed.
Abstractly, an entity (or <em>entity type</em>) is a schema for data.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The schema may be as simple as a tuple of types or it might be structured, as in document data stores.</p>
</li>
<li>
<p>The schema might be explicit or it might be implicit, as is commonplace in key/value stores.</p>
</li>
<li>
<p>Either way, we assume that the entity is represented in Java as a class, which we call the <em>entity class</em>. <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When there&#8217;s no risk of confusion, we often use the word “entity” to mean the entity class, or even an instance of the entity class.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Data represented by an entity is persistent, that is, the data itself outlives any Java process which makes use of it. Thus, it is necessary to maintain an association between instances of Java entity classes and state held in a data store.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each persistent instantiation of the schema is distinguishable by a unique <em>identifier</em>.</p>
</li>
<li>
<p>Any persistent instantiation of the schema is representable by an instance of the entity class. In a given Java program, multiple entity class instances might represent the same persistent instance of the schema.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In Jakarta NoSQL, the concrete definition of an entity may be understood to encompass the following aspects:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <strong>entity class</strong> itself: An entity class is simple Java object equipped with fields or accessor methods designating each property of the entity. An entity class is identified by an annotation.</p>
</li>
<li>
<p>Its <strong>data schema</strong>: Some data storage technologies require an explicit schema defining the structure and properties of the data the entity represents.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_programming_model_for_entity_classes"><a class="anchor" href="#_programming_model_for_entity_classes"></a>2.1. Programming Model for Entity Classes</h3>
<div class="paragraph">
<p>A <em>programming model for entity classes</em> specifies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a set of restrictions on the implementation of a Java class that allows it to be used as an entity class with a given Jakarta NoSQL provider, and</p>
</li>
<li>
<p>a set of annotations allowing the identification of a Java class as an entity class, and further specification of the entity&#8217;s schema.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta NoSQL defines its programming model for entities explicitly. It relies on annotations provided by the specification. Jakarta NoSQL&#8217;s programming model allows for seamless integration with custom annotations defined by Jakarta NoSQL providers or extensions.</p>
</div>
<div class="paragraph">
<p>This approach ensures flexibility and interoperability, enabling developers to leverage Jakarta NoSQL&#8217;s standardized annotations alongside provider-specific annotations for fine-tuning entity behavior and mapping. Additionally, Jakarta NoSQL facilitates integration with other Jakarta EE specifications, fostering a cohesive Java-based NoSQL application development ecosystem.</p>
</div>
<div class="paragraph">
<p>This section lays out the core requirements that an entity programming model must satisfy to be compatible with Jakarta Data and for the defining provider to be considered a fully compliant implementation of this specification.</p>
</div>
<div class="paragraph">
<p>Every entity programming model specifies an <em>entity-defining annotation</em>, <code>jakarta.nosql.Entity</code>.</p>
</div>
<div class="paragraph">
<p>Furthermore, an entity programming model must define an annotation that identifies the field or property holding the unique identifier of an entity, the <code>Jakarta.nosql.Id</code>.</p>
</div>
<div class="paragraph">
<p>Typically, an entity programming model specifies additional annotations used to make the entity schema explicit, for example, <code>jakarta.nosql.Id</code> and <code>jakarta.nosql.Column</code>. The nature of such annotations is beyond the scope of this specification.</p>
</div>
<div class="paragraph">
<p>In a given entity programming model, entity classes are always mutable, or immutable, or the model might support a mix of mutable and immutable entity classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A programming model that supports immutable entity classes may require that every mutable entity class declare a constructor with no parameters and might limit this constructor&#8217;s visibility.</p>
</li>
<li>
<p>A programming model that supports the use of immutable entity classes&#8212;&#8203;ideally represented as Java <code>record</code> types&#8212;&#8203;would not typically require the existence of such a constructor.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In either case, an entity programming model might restrict the visibility of an entity class&#8217;s fields and property accessors.</p>
</div>
<div class="paragraph">
<p>An entity programming model might support inheritance between entities and provide support for retrieving entities in a polymorphic fashion. This specification does not require support for inheritance.</p>
</div>
<div class="paragraph">
<p>To ensure compatibility with Jakarta NoSQL, an entity programming model must adhere to the following constructor rules:
- Constructors must be <code>public</code> or <code>protected</code> with no parameters or with parameters annotated with <code>Jakarta.nosql.Column</code> or <code>Jakarta.nosql.Id</code>.
- Annotations at the constructor will build the entity and read information from the database, while field annotations are required to write information to the database.
- If both a non-args constructor and a constructor with annotated parameters exist, the constructor with annotations will be used to create the entity.
- Constructor parameters without annotations will be ignored, utilizing a non-arg constructor instead.
- Entities should not have multiple constructors using <code>jakarta.nosql.Id</code> or <code>jakarta.nosql.Column</code> annotations.</p>
</div>
<div class="sect3">
<h4 id="_persistent_fields"><a class="anchor" href="#_persistent_fields"></a>2.1.1. Persistent Fields</h4>
<div class="paragraph">
<p>A field of an entity class may or may not represent state which is persistent in the datastore.
A <em>persistent field</em> has some corresponding representation in the data schema of the entity.</p>
</div>
<div class="paragraph">
<p>Every programming model for entity classes must support <em>direct field access</em>, that is, access to the persistent fields of an entity class without triggering any intermediating user-written code such as JavaBeans-style property accessors.</p>
</div>
<div class="paragraph">
<p>A programming model might place constraints on the visibility of persistent fields.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL distinguishes three kinds of persistent field within entity classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>basic field</em> holds a value belonging to some fundamental data type supported natively by the Jakarta NoSQL Provider. Support for the set of basic types enumerated in the next section below is mandatory for all Jakarta NoSQL providers.</p>
</li>
<li>
<p>An <em>embedded field</em> allows the inclusion of the state of a finer-grained Java class within the state of an entity. The type of an embedded field is often a user-written Java class. Support for embedded fields varies depending on the Jakarta NoSQL provider and the database type.</p>
</li>
<li>
<p>An <em>association field</em> implements an association between entity types. Support for association fields varies depending on the Jakarta NoSQL provider and the database type.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="basic_types"><a class="anchor" href="#basic_types"></a>2.1.2. Basic Types</h4>
<div class="paragraph">
<p>Every Jakarta NoSQL provider must support the following basic types within its programming model:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Basic Data Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primitive types and wrapper classes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Java primitive types, such as <code>int</code>, <code>double</code>, <code>boolean</code>, etc., and their corresponding wrapper types from <code>java.lang</code> (e.g., <code>Integer</code>, <code>Double</code>, <code>Boolean</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents text data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LocalDate</code>, <code>LocalDateTime</code>, <code>LocalTime</code>, <code>Instant</code> from <code>java.time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represent date and time-related data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.util.UUID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Universally Unique IDentifier for identifying entities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BigInteger</code> and <code>BigDecimal</code> from <code>java.math</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represent large integer and decimal numbers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents binary data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User-defined <code>enum</code> types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom enumerated types defined by user-written code.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, the following entity class has five basic fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">UUID</span> id;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="type">long</span> ssn;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> LocalDate birthdate;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="type">byte</span><span class="type">[]</span> photo;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the types listed above, an entity programming model might support additional domain-specific basic types. This extended set of basic types might include types with a nontrivial internal structure. An entity programming model might even provide mechanisms to convert between user-written types and natively-supported basic types, defined at the <code>AttributeConverter</code> interface.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Many key-value, wide-column, and document databases feature native support for arrays or even associative arrays of these basic types.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="enum_type"><a class="anchor" href="#enum_type"></a>2.1.2.1. Enum Type</h5>
<div class="paragraph">
<p>Enum types in Java represent a fixed set of constants. In Jakarta NoSQL, enums are considered basic types and are commonly used to represent data with a limited number of predefined values. By default, enums are stored as strings in the database, with the enum constant name being used as the stored value. The <code>name()</code> method of the enum class is typically used to retrieve the name of the enum constant.</p>
</div>
<div class="paragraph">
<p>For example, consider the following enum representing the days of the week:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">enum</span> DayOfWeek {
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY,
    SUNDAY
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using an enum type in an entity class, it can be annotated with the <code>@Column</code> annotation to specify the storage details. Here&#8217;s an entity class <code>Meeting</code> that includes an enum field representing the day of the week:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Meeting</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> DayOfWeek day;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; attendees;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>day</code> field of the <code>Meeting</code> entity is of type <code>DayOfWeek</code>, an enum type representing the days of the week. The <code>@Column</code> annotation indicates that this enum will be stored as a string in the database using the <code>name()</code> method to retrieve the enum constant&#8217;s name.</p>
</div>
<div class="paragraph">
<p>The JSON representation of a <code>Meeting</code> entity might look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123456</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MONDAY</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">attendees</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">Alice</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Bob</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Charlie</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="embeddable_definition"><a class="anchor" href="#embeddable_definition"></a>2.1.3. Embedded Fields and Embeddable Classes </h4>
<div class="paragraph">
<p>An <em>embeddable class</em> differs from an entity class in that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the embeddable class lacks its own persistent identity and</p>
</li>
<li>
<p>the state of an instance of the embeddable class can only be stored in the database when the instance is referenced directly or indirectly by a "parent" entity class instance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An <em>embedded field</em> is a field whose type is an embeddable class.</p>
</div>
<div class="paragraph">
<p>Embeddable classes may have basic, embeddable, and association fields, but unlike entities, they do not have identifier fields.</p>
</div>
<div class="paragraph">
<p>Like entities, a programming model for entity classes might support mutable embeddable classes, immutable embeddable classes, or both.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL defines an annotation identifying a user-written class as an embeddable class: <code>jakarta.nosql.Embeddable</code>.</p>
</div>
<div class="paragraph">
<p>There are two natural ways that a Jakarta NoSQL provider might store the state of an instance of an embedded class in a database:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>by <em>flattening</em> the fields of the embeddable class into the data structure representing the parent entity or</p>
</li>
<li>
<p>by <em>grouping</em> the fields of the embedded class into a fine-grained structured type (a User-defined type,<strong>UDT</strong>, for example).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a flattened representation of an embedded field, the fields of the embeddable class occur directly alongside the basic fields of the entity class in the data schema of the entity.
There is no representation of the embeddable class itself in the data schema.</p>
</div>
<div class="paragraph">
<p>To ensure compatibility with Jakarta NoSQL, an embeddable class must adhere to the following constructor rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Constructors must be <code>public</code> or <code>protected</code> with no parameters or parameters annotated with <code>jakarta.nosql.Column</code>.</p>
</li>
<li>
<p>Annotations at the constructor will build the entity and read information from the database, while field annotations are required to write information to the database.</p>
</li>
<li>
<p>If both a non-args constructor and a constructor with annotated parameters exist, the constructor with annotations will be used to create the entity.</p>
</li>
<li>
<p>Constructor parameters without annotations will be ignored, utilizing a non-arg constructor instead.</p>
</li>
<li>
<p>Embeddable classes should not have multiple constructors using  <code>jakarta.nosql.Column</code> annotations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, consider the following Java classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Embeddable</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> street;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> postalCode;
}

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> Address address;  <span class="comment">// flat embedded field</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a document, wide-column, or graph database, the JSON representation of an instance of the <code>Person</code> entity where the <code>Address</code> class is <strong>flat</strong> might be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main St</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Sampleville</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">postalCode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">12345</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a structured representation, when the embeddable field is <strong>grouping</strong> it will be together in the data schema.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Embeddable</span>(GROUPING)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> street;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> postalCode;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a document, wide-column, or graph database, the JSON representation of an instance of the <code>Person</code> entity where the <code>Address</code> class is <strong>grouping</strong> might be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>:
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main St</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Sampleville</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">postalCode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">12345</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When an embeddable class is used within an iterable field of an entity class, both embedding strategies,
namely <strong>flattening</strong> and <strong>grouping</strong>, will function as <strong>grouping</strong>. This means that the fields of the embeddable class
will be grouped together within the data schema, regardless of whether the embeddable class is marked for flattening or grouping.</p>
</div>
<div class="paragraph">
<p>For example, consider the following entity class <code>Driver</code> containing an iterable of <code>Car</code> instances:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Driver</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">UUID</span> id;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Iterable</span>&lt;Car&gt; cars;
}

<span class="annotation">@Embeddable</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Car</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> plate;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> category;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this scenario, the <code>Car</code> embeddable class is used within the <code>cars</code> field, which is an iterable in the <code>Driver</code> entity class.
As a result, the embedding strategy will behave as <strong>grouping</strong>, regardless of whether the <code>Car</code> class is marked with the <code>@Embeddable(GROUPING)</code> annotation.</p>
</div>
<div class="paragraph">
<p>The JSON representation of an instance of the <code>Driver</code> entity might appear as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123e4567-e89b-12d3-a456-426614174000</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">plate</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ABC123</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Sedan</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">plate</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">XYZ789</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SUV</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this JSON representation, the <code>cars</code> field contains an array of <code>Car</code> objects, each with its own <code>plate</code> and <code>category</code> fields. This structure reflects the <strong>grouping</strong> embedding strategy, where the fields of the <code>Car</code> embeddable class are grouped together within the <code>Driver</code> entity&#8217;s data schema.</p>
</div>
<div class="paragraph">
<p>Additionally, it&#8217;s important to note that support for embedding with a <code>Map</code> may vary by NoSQL database and Jakarta NoSQL provider. Different providers may have different approaches or limitations regarding the embedding of data structures such as maps with embeddable classes. Developers should consult the documentation of their chosen NoSQL database and Jakarta NoSQL provider for specific details and considerations regarding map embedding.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Support for grouping embeddable classes and embedded fields is not required by this specification.
However, every Jakarta NoSQL provider is strongly encouraged to support embeddable classes within its entity programming model.
Some databases might require the use of the <code>udt</code> attribute in the <code>@Column</code> annotation for embedded fields.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_entity_associations"><a class="anchor" href="#_entity_associations"></a>2.1.4. Entity Associations</h4>
<div class="paragraph">
<p>An association field is a field of an entity class whose declared type is also an entity class.
Given an instance of the first entity class, its association field references an instance of a second entity class.</p>
</div>
<div class="paragraph">
<p>For example, consider the following Java classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Author</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">UUID</span> id;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Book</span>&gt; books;
}

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> title;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> category;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, the JSON representation of <code>Author</code> might be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">550e8400-e29b-41d4-a716-446655440000</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Smith</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Java Programming</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Programming</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Introduction to NoSQL</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Database</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this scenario, the association between <code>Author</code> and <code>Book</code> is represented by the <code>books</code> field in the <code>Author</code> entity class.
Since NoSQL databases do not support joins, the association field behaves as a <strong>grouping</strong> embedded field defined at <a href="#embeddable_definition">Embedded Fields and Embeddable Classes </a>.
It means that the <code>books</code> field groups together instances of the <code>Book</code> entity within the <code>Author</code> entity&#8217;s data schema.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This specification does not require support for entity associations.
Some databases might require the use of the udt attribute in the @Column annotation for embedded fields.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_collections_of_embeddable_classes_and_basic_types"><a class="anchor" href="#_collections_of_embeddable_classes_and_basic_types"></a>2.1.5. Collections of Embeddable Classes and Basic Types</h4>
<div class="paragraph">
<p>A persistent field or property of an entity or embeddable class may correspond to a collection of a basic type, embeddable, or entity class.</p>
</div>
<div class="paragraph">
<p>No action is required beyond including the <code>Column</code> annotation for a collection of basic types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BucketList</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; tasks;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">123</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Personal Goals</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tasks</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">Travel the world</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Learn a new language</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Write a book</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The entity class will behave as an embeddable <strong>grouping</strong> class. This support may vary among NoSQL providers and might require a UDT name presentation in the case of embeddable or entity.</p>
</div>
<div class="paragraph">
<p>For key-value databases, the serialization will occur through a unique blob, a process outside the scope of the Jakarta NoSQL specification.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Company</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>(udt= <span class="string"><span class="delimiter">&quot;</span><span class="content">headquarter</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">Set</span>&lt;Headquarter&gt; headquarters;
}

<span class="annotation">@Entity</span>
<span class="comment">// It could be Embedded, and the behavior won't change</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Headquarter</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> country;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Acme Inc.</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">headquarters</span><span class="delimiter">&quot;</span></span>: [
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">New York</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">USA</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">London</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">UK</span><span class="delimiter">&quot;</span></span>}
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Collections within entities can accommodate various types of data, including basic types and complex structures like lists of strings.
Jakarta NoSQL provides flexibility in handling such collections, ensuring seamless integration with the underlying NoSQL database.</p>
</div>
</div>
<div class="sect3">
<h4 id="_map_collections"><a class="anchor" href="#_map_collections"></a>2.1.6. Map Collections</h4>
<div class="paragraph">
<p>Java <code>Map</code> collections offer a convenient way to represent associations and key-value pairs within entities in Jakarta NoSQL. Jakarta NoSQL handles map collections, allowing developers to manage complex data structures efficiently.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Contact</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; socialMedia;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JSON representation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">socialMedia</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">twitter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">@johndoe</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">linkedin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">linkedin.com/in/johndoe</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the <code>Contact</code> entity includes a <code>socialMedia</code> field, represented as a <code>Map</code> where the key is a string representing the social media platform, and the value is the corresponding username or profile link.</p>
</div>
<div class="paragraph">
<p>The behavior of map collections remains consistent regardless of whether the map values are basic types, embeddable classes, or entity classes. However, for embeddable or entity classes used as map values, the <code>udt</code> attribute may be required in the <code>@Column</code> annotation to specify the user-defined type.</p>
</div>
<div class="paragraph">
<p>For instance, consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Computer</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, Program&gt; programs;
}

<span class="annotation">@Embedded</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Program</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; socialMedia;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JSON representation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">My Computer</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">programs</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">browser</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">socialMedia</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">twitter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">@browseruser</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">instagram</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">@browseruser</span><span class="delimiter">&quot;</span></span>
      }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">editor</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">socialMedia</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">github</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">github.com/editoruser</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">linkedin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">linkedin.com/in/editoruser</span><span class="delimiter">&quot;</span></span>
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Computer</code> entity includes a <code>programs</code> field, a map where the keys represent program names, and the values are instances of the <code>Program</code> embeddable class. Each <code>Program</code> instance contains its own <code>socialMedia</code> map, representing the social media profiles associated with that program.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that support for map collections may vary depending on the NoSQL database and Jakarta NoSQL provider used. Developers should consult the documentation of their chosen provider for specific details and considerations regarding map collections.</p>
</div>
</div>
<div class="sect3">
<h4 id="_entity_property_names"><a class="anchor" href="#_entity_property_names"></a>2.1.7. Entity Property Names</h4>
<div class="paragraph">
<p>Within an entity, property names must be unique ignoring case. For simple entity properties, the field or accessor method name serves as the entity property name. In the case of embedded classes, entity property names are computed by concatenating the field or accessor method names at each level, optionally joined by a delimiter.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_annotations"><a class="anchor" href="#_annotations"></a>3. Annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jakarta NoSQL introduces a comprehensive set of annotations tailored to streamline and simplify mapping Java entities to NoSQL databases. These annotations offer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A standardized approach for defining entity classes, marked with <code>@Entity</code>, to establish the structural blueprint of data entities within the NoSQL environment.</p>
</li>
<li>
<p>Precise specification of primary keys using the <code>@Id</code> annotation, essential for uniquely identifying entities within the database.</p>
</li>
<li>
<p>Flexible mapping of entity properties to database fields through the <code>@Column</code> annotation, ensuring seamless integration of Java objects with NoSQL data storage.</p>
</li>
<li>
<p>Conversion of non-persistent object types to database-compatible formats facilitated by the <code>@Convert</code> annotation, enhancing compatibility and data manipulation capabilities.</p>
</li>
<li>
<p>Embedding of objects within entity structures enabled by the <code>@Embeddable</code> annotation, allowing for efficient storage of complex data structures as part of owning entities.</p>
</li>
<li>
<p>Abstraction of common properties and behaviors across multiple entity classes through the <code>@MappedSuperclass</code> annotation, promoting code reusability and maintainability.</p>
</li>
<li>
<p>Specifying inheritance strategies using the <code>@Inheritance</code>, <code>@DiscriminatorValue</code>, and <code>@DiscriminatorColumn</code> annotations facilitates polymorphic data modeling within the NoSQL environment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta NoSQL has support for those nine types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>@Entity</p>
</li>
<li>
<p>@Embeddable</p>
</li>
<li>
<p>@Id</p>
</li>
<li>
<p>@Column</p>
</li>
<li>
<p>@Convert</p>
</li>
<li>
<p>@MappedSuperclass</p>
</li>
<li>
<p>@Inheritance</p>
</li>
<li>
<p>@DiscriminatorColumn</p>
</li>
<li>
<p>@DiscriminatorValue</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the realm of Jakarta NoSQL, developers wield a powerful arsenal of annotations tailored to meet diverse data modeling needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>@Entity</strong>: The <code>@Entity</code> annotation signifies that a Java class represents a persistent entity with a lifecycle managed by the underlying data store. By annotating a class with <code>@Entity</code>, developers indicate that instances of this class are subject to CRUD (Create, Read, Update, Delete) operations within the NoSQL database. This annotation not only defines the entity&#8217;s structure but also denotes its existence beyond the scope of a single Java application instance. In essence, the <code>@Entity</code> annotation encapsulates the notion of a domain object that persists beyond the lifetime of a Java process, ensuring consistency and durability in data management.</p>
</li>
<li>
<p><strong>@Embeddable</strong>: The <code>@Embeddable</code> annotation is a Java feature that identifies a class that can be embedded within another entity. It enables developers to create intricate data structures by combining reusable components. This technique makes it possible to represent finer-grained attributes of an entity by using an embeddable class, which encapsulates related data fields into a single logical unit. There are two types of embedding strategies that can be used with this annotation: flattening and grouping. In the flattening strategy, the fields of the embeddable class are directly added to the data schema of the parent entity. In contrast, in the grouping strategy, the fields are grouped within a structured type.</p>
</li>
<li>
<p><strong>@Id</strong>: Central to the entity model is the <code>@Id</code> annotation, which designates a field as the primary key. This annotation empowers developers to define the unique identifier for each entity, ensuring data integrity and facilitating efficient data retrieval operations.</p>
</li>
<li>
<p><strong>@Column</strong>: The <code>@Column</code> annotation provides fine-grained control over mapping entity properties to database fields. By annotating fields with <code>@Column</code>, developers customize the storage and retrieval of data, specifying attributes such as column names, types, and constraints.</p>
</li>
<li>
<p><strong>@Convert</strong>: With the <code>@Convert</code> annotation, developers can seamlessly transform entity attribute values between Java and database types. This annotation offers flexibility in data representation, allowing developers to adapt entity properties to suit the requirements of different database systems.</p>
</li>
<li>
<p><strong>@MappedSuperclass</strong>: The <code>@MappedSuperclass</code> annotation is used to define shared attributes and behaviors across multiple entity classes by denoting a superclass whose mappings are applied to its subclasses.</p>
</li>
<li>
<p><strong>@Inheritance</strong>: The @Inheritance annotation facilitates modeling inheritance hierarchies within entity classes. By default, Jakarta NoSQL supports a single inheritance strategy where subclass information is incorporated into the data structure as a field within the parent entity. In this default strategy, attributes of subclasses are represented as fields within the parent entity, maintaining a denormalized data structure. However, Jakarta NoSQL allows Jakarta Data providers to offer alternative inheritance strategies beyond the default specification.</p>
</li>
<li>
<p><strong>@DiscriminatorColumn</strong>: The <code>@DiscriminatorColumn</code> annotation configures the discriminator column used in single table inheritance mappings. By annotating a field with <code>@DiscriminatorColumn</code>, developers control the storage of discriminator values, ensuring accurate and efficient retrieval of entity subclasses.</p>
</li>
<li>
<p><strong>@DiscriminatorValue</strong>: When using inheritance strategies, the <code>@DiscriminatorValue</code> annotation specifies the discriminator value for entities in a single table inheritance hierarchy. This annotation enables database systems to differentiate between subclasses based on a discriminator column value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In essence, Jakarta NoSQL annotations empower developers to craft sophisticated data models that seamlessly bridge the gap between Java entities and NoSQL databases. With a rich array of annotations at their disposal, developers can unlock the full potential of NoSQL technology, building scalable, efficient, and maintainable applications within the Jakarta EE ecosystem.</p>
</div>
<div class="sect2">
<h3 id="_entity"><a class="anchor" href="#_entity"></a>3.1. @Entity</h3>
<div class="paragraph">
<p>The <code>@Entity</code> annotation is the cornerstone for defining persistent entities within Jakarta NoSQL. By annotating a Java class with <code>@Entity</code>, developers signify its role as a persistent entity, eligible for storage and retrieval in a NoSQL database. This annotation encapsulates the lifecycle management of entities, facilitating seamless integration with various NoSQL data stores.</p>
</div>
<div class="sect3">
<h4 id="_entity_definition_reference"><a class="anchor" href="#_entity_definition_reference"></a>3.1.1. Entity Definition Reference</h4>
<div class="paragraph">
<p>First, let&#8217;s establish a reference for entity definition, denoted by <a href="#entity_definition">Entity Classes</a>. In Jakarta NoSQL, an entity class is typically annotated with <code>@Entity</code> to indicate its persistent nature.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

<span class="annotation">@Id</span>
<span class="directive">private</span> <span class="predefined-type">UUID</span> id;
<span class="annotation">@Column</span>
<span class="directive">private</span> <span class="predefined-type">String</span> name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Person</code> class is defined as an entity with an <code>id</code> field annotated with <code>@Id</code>, which designates it as the primary key, and a <code>name</code> field annotated with <code>@Column</code>, indicating it as a persistent attribute.</p>
</div>
<div class="paragraph">
<p>One of the notable features of Jakarta NoSQL is its support for immutable and mutable entity classes. For immutable classes, Jakarta NoSQL provides compatibility with Java records, allowing developers to define compact and immutable entity structures concisely.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> record Person(<span class="annotation">@Id</span> <span class="directive">private</span> <span class="predefined-type">UUID</span> id, <span class="annotation">@Column</span> <span class="directive">private</span> <span class="predefined-type">String</span> name) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this sample, the <code>Person</code> class is defined as a record, capturing its immutable nature. The <code>@Id</code> and <code>@Column</code> annotations are applied directly to the constructor parameters, indicating the primary key and persistent attributes.</p>
</div>
<div class="paragraph">
<p>The serialization method of entity classes may vary depending on the NoSQL vendor and configuration. Here&#8217;s a sample JSON structure representing a <code>Person</code> entity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">550e8400-e29b-41d4-a716-446655440000</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This JSON structure captures the serialized representation of a <code>Person</code> entity with its <code>id</code> and <code>name</code> attributes. The specific serialization method may differ based on the chosen NoSQL vendor and its corresponding serialization mechanisms.</p>
</div>
</div>
<div class="sect3">
<h4 id="_associating_with_other_entities"><a class="anchor" href="#_associating_with_other_entities"></a>3.1.2. Associating with Other Entities</h4>
<div class="paragraph">
<p>One of the powerful features of Jakarta NoSQL is its ability to associate entities with each other, enabling the creation of complex data structures. When an entity is related to another entity, it is incorporated as an embeddable group within the parent entity, as defined by <a href="#embeddable_definition">Embedded Fields and Embeddable Classes </a>. Let&#8217;s consider an example where a <code>Person</code> entity is associated with an <code>Address</code> entity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> Address address;
}

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> street;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Person</code> entity includes a field <code>address</code> of type <code>Address</code>, indicating the association between the two entities. The <code>address</code> field will be represented as a nested structure within the <code>Person</code> entity when serialized.</p>
</div>
<div class="paragraph">
<p>The serialization method of entity classes may vary depending on the NoSQL vendor. Here&#8217;s a sample JSON structure representing a <code>Person</code> entity with an associated <code>Address</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">_id</span><span class="delimiter">&quot;</span></span>:<span class="integer">10</span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>:{
      <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">São Paulo</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Av Nove de Julho</span><span class="delimiter">&quot;</span></span>
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This JSON structure represents a serialized <code>Person</code> entity with <code>id</code>, <code>name</code>, and <code>address</code> attributes. The <code>address</code> field is a nested structure that includes <code>city</code> and <code>street</code> attributes from the associated <code>Address</code> entity.</p>
</div>
<div class="paragraph">
<p>Entities can also be associated using collection types like <code>Iterable</code>, such as <code>List</code> or <code>Set</code>. Let&#8217;s consider an example where an <code>Owner</code> entity is associated with multiple <code>Car</code> entities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Owner</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
   <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;Car&gt; cars;
}

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Car</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> make;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> model;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Owner</code> entity includes a field <code>cars</code> of type <code>List&lt;Car&gt;</code>, indicating an association between the two entities. The <code>cars</code> field will hold a collection of <code>Car</code> entities associated with the <code>Owner</code>.</p>
</div>
<div class="paragraph">
<p>The serialization method of entity classes may vary depending on the NoSQL vendor. Here&#8217;s a sample JSON structure representing an <code>Owner</code> entity with associated <code>Car</code> entities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">marie Curie</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">cars</span><span class="delimiter">&quot;</span></span>: [
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">make</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Toyota</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Camry</span><span class="delimiter">&quot;</span></span>
      },
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">make</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Honda</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Accord</span><span class="delimiter">&quot;</span></span>
      }
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This JSON structure represents a serialized <code>Owner</code> entity with <code>name</code> and <code>cars</code> attributes. The <code>cars</code> field is an array containing nested structures representing associated <code>Car</code> entities.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It&#8217;s important to note that not all NoSQL databases support entity associations. Developers should verify the compatibility of association features with their chosen database technology.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_embeddable"><a class="anchor" href="#_embeddable"></a>3.2. @Embeddable</h3>
<div class="paragraph">
<p>The <code>@Embeddable</code> annotation in Jakarta NoSQL marks a class as embeddable, as defined by <a href="#embeddable_definition">Embedded Fields and Embeddable Classes </a>. An embeddable class is a class whose instances are stored as an intrinsic part of an owning entity and share the identity of the entity. Each of the persistent properties or fields of the embedded object is mapped to the database table for the entity.</p>
</div>
<div class="paragraph">
<p>By default, the embedding strategy is FLAT, where the fields of the embedded class are directly mapped to columns in the owning entity&#8217;s table.</p>
</div>
<div class="paragraph">
<p>In the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Embeddable</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> street;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> postalCode;
}

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="annotation">@Column</span>
    <span class="directive">private</span> Address address;  <span class="comment">// embedded field</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s the JSON sample for <strong>FLAT</strong> embedding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">address_street</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main St</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">address_city</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Sampleville</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">address_postalCode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">12345</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to <strong>FLAT</strong>, the <strong>GROUPING</strong> embedding strategy is also available. In GROUPING embedding, the fields of the embedded class are grouped together within a structured type in the owning entity&#8217;s table.</p>
</div>
<div class="paragraph">
<p>To specify GROUPING embedding, use <code>@Embeddable(GROUPING)</code>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s the JSON sample for GROUPING embedding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123 Main St</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Sampleville</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">postalCode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">12345</span><span class="delimiter">&quot;</span></span>
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_id"><a class="anchor" href="#_id"></a>3.3. @Id</h3>
<div class="paragraph">
<p>The <code>@Id</code> annotation in Jakarta NoSQL defines the unique identifier for entities within a database. For any entity, it is mandatory to have a field annotated with <code>@Id</code> to identify each instance uniquely. According to the specification, the field annotated with <code>@Id</code> must be of a basic type defined by <a href="#basic_types">Basic Types</a>.</p>
</div>
<div class="paragraph">
<p>While the <code>@Id</code> annotation allows for a native name, it&#8217;s essential to note that some NoSQL databases have reserved keywords for their keys. In such cases, if the native name conflicts with a database keyword, the database might ignore it.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL does not provide any strategy for autoincrement when the field annotated with <code>@Id</code> is not filled up. The behavior varies with the NoSQL database. For instance, in a Key-Value NoSQL database, a null value for an ID will generate a <code>NullPointerException</code>. In other NoSQL databases, it might vary from generating a value to returning an exception error.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">User</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> userName;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; phones;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>User</code> entity includes a field <code>userName</code> annotated with <code>@Id</code>, indicating that <code>userName</code> serves as the unique identifier for instances of the <code>User</code> entity.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a generated JSON sample of this structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">userName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">john_doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">phones</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">123456789</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">987654321</span><span class="delimiter">&quot;</span></span>
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This JSON structure represents a serialized <code>User</code> entity with <code>userName</code>, <code>name</code>, and <code>phones</code> attributes. The <code>userName</code> field acts as the unique identifier for the entity.</p>
</div>
</div>
<div class="sect2">
<h3 id="_column"><a class="anchor" href="#_column"></a>3.4. @Column</h3>
<div class="paragraph">
<p>The <code>@Column</code> annotation in Jakarta NoSQL marks fields that should be mapped to database columns within an entity, similar to the <code>@Id</code> annotation.</p>
</div>
<div class="paragraph">
<p>In the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> nickname;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; phones;

    <span class="comment">// ignored for Jakarta NoSQL</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> address;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Person</code> entity includes fields <code>nickname</code>, <code>name</code>, and <code>phones</code> annotated with <code>@Column</code>. These fields are marked for persistence, indicating that they should be mapped to database columns.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that fields without the <code>@Column</code> annotation, such as <code>address</code> in the example, will be ignored for Jakarta NoSQL mapping.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a generated JSON sample of this structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">nickname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">john_doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">phones</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">123456789</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">987654321</span><span class="delimiter">&quot;</span></span>
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This JSON structure represents a serialized <code>Person</code> entity with <code>nickname</code>, <code>name</code>, and <code>phones</code> attributes. The <code>nickname</code>, <code>name</code>, and <code>phones</code> fields are mapped to corresponding database columns.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using the <code>@Column</code> annotation, it&#8217;s important to remember that Key-Value databases usually only require the <code>@Id</code> annotation to identify unique entities. The Jakarta NoSQL provider will determine how to serialize the object for storage, which can be combined with other annotations, such as Jakarta JSON Binding, to customize the serialization process. This flexibility allows developers to adapt the serialization process to the specific requirements of their database.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you use NoSQL databases that serialize information to JSON, A Jakarta NoSQL provider can integrate them with Jakarta JSON Binding annotations. The Jakarta NoSQL provider will define the integration process, ensuring a smooth and efficient serialization of data to the JSON format.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_convert"><a class="anchor" href="#_convert"></a>3.5. @Convert</h3>
<div class="paragraph">
<p>The <code>@Convert</code> annotation is used in Jakarta NoSQL to declare that a specific field in an entity class requires conversion using a specified converter. This annotation is useful for converting non-persistent object types to formats that are compatible with the database, which expands data storage and manipulation capabilities.</p>
</div>
<div class="paragraph">
<p>When you use the <code>@Convert</code> annotation, you must provide a converter class as an argument, which specifies the type of conversion to be performed. The converter class must implement the <code>AttributeConverter</code> interface and define methods for converting the object type from and to its database representation.</p>
</div>
<div class="paragraph">
<p>For example, consider the following entity class <code>Employee</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> Job job;

    <span class="annotation">@Column</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">money</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Convert</span>(MoneyConverter.class)
    <span class="directive">private</span> MonetaryAmount salary;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Employee' entity&#8217;s' salary' field is annotated with `@Convert</code>, specifying the <code>MoneyConverter</code> class as the converter. The <code>MoneyConverter</code> class implements the <code>AttributeConverter</code> interface to convert <code>MonetaryAmount</code> objects to and from their database representation.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a simplified implementation of the <code>MoneyConverter</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MoneyConverter</span> <span class="directive">implements</span> AttributeConverter&lt;MonetaryAmount, <span class="predefined-type">String</span>&gt; {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> convertToDatabaseColumn(MonetaryAmount appValue) {
        <span class="keyword">return</span> appValue.toString();
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> MonetaryAmount convertToEntityAttribute(<span class="predefined-type">String</span> dbValue) {
        <span class="keyword">return</span> MonetaryAmount.parse(dbValue);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, let&#8217;s generate a JSON format for this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">job</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Software Engineer</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">money</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">USD 5000.00</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this JSON representation, the <code>money</code> field is stored in a database-compatible format after conversion by the <code>MoneyConverter</code> class, ensuring seamless integration with the NoSQL database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inheritance"><a class="anchor" href="#_inheritance"></a>3.6. Inheritance</h3>
<div class="paragraph">
<p>In Jakarta NoSQL, entities support inheritance, enabling the creation of hierarchies of classes where subclasses inherit attributes and behaviors from their superclass. This feature allows for the modeling of complex data structures and relationships within NoSQL databases.</p>
</div>
<div class="paragraph">
<p>Entities in Jakarta NoSQL can be both abstract and concrete classes. Abstract classes can be annotated with the <code>@Entity</code> annotation and mapped as entities, allowing them to participate in entity inheritance hierarchies and be queried for as entities. Similarly, concrete classes can also be annotated with <code>@Entity</code> and serve as entities in the inheritance hierarchy.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that entities can extend both entity and non-entity classes. This flexibility allows for the construction of diverse inheritance structures, accommodating various data modeling requirements.</p>
</div>
<div class="paragraph">
<p>Inheritance in Jakarta NoSQL facilitates polymorphic associations and queries, allowing for more flexible and expressive data manipulation and retrieval operations. Subclasses inherit attributes and behaviors from their superclass, providing a mechanism for code reuse and organizational structuring within the data model.</p>
</div>
<div class="paragraph">
<p>Overall, the support for inheritance in Jakarta NoSQL contributes to the creation of robust and adaptable data models, empowering developers to effectively represent complex domain structures in NoSQL databases.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Some NoSQL databases, particularly key-value databases, might not fully support inheritance due to their schemaless nature and limited querying capabilities. Developers should carefully consider the compatibility of their chosen database with inheritance features when designing their data models.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_abstract_entity_classes"><a class="anchor" href="#_abstract_entity_classes"></a>3.6.1. Abstract Entity Classes</h4>
<div class="paragraph">
<p>In Jakarta NoSQL, an abstract class can be specified as an entity, providing a mechanism for defining common attributes and behaviors that are shared among multiple concrete subclasses. An abstract entity class is annotated with the <code>@Entity</code> annotation, indicating its role as a mapped entity within the data model.</p>
</div>
<div class="paragraph">
<p>Abstract entity classes in Jakarta NoSQL differ from concrete entities primarily in their inability to be directly instantiated. Instead, abstract entities serve as templates or blueprints for concrete subclasses, encapsulating shared functionality and defining a common interface for their subclasses to implement.</p>
</div>
<div class="paragraph">
<p>Despite being abstract, abstract entity classes are fully mapped as entities and can participate in data manipulation operations such as queries. Queries targeting abstract entity classes will operate over and/or retrieve instances of their concrete subclasses, allowing for polymorphic queries that span the entire inheritance hierarchy.</p>
</div>
<div class="paragraph">
<p>By leveraging abstract entity classes, developers can effectively organize and structure their data model, promoting code reuse, maintainability, and scalability. Abstract entities encapsulate common attributes and behaviors, fostering a modular and extensible design approach within Jakarta NoSQL applications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mappedsuperclass"><a class="anchor" href="#_mappedsuperclass"></a>3.6.2. @MappedSuperclass</h4>
<div class="paragraph">
<p>The <code>@MappedSuperclass</code> annotation designates a class whose mapping information is applied to the entities that inherit from it. Unlike regular entities, a mapped superclass does not imply the existence of a separate storage structure such as tables in relational databases.</p>
</div>
<div class="paragraph">
<p>In NoSQL databases, where data is often stored in a schema-less or schema-flexible manner, the concept of inheritance may not directly correspond to table inheritance as seen in relational databases. However, the <code>@MappedSuperclass</code> annotation serves a similar purpose by allowing common mappings to be defined in a superclass and inherited by its subclasses.</p>
</div>
<div class="paragraph">
<p>For example, consider a mapped superclass <code>Animal</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Dog</span> <span class="directive">extends</span> Animal {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
}

<span class="annotation">@MappedSuperclass</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Animal</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> breed;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Integer</span> age;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Animal</code> class serves as a mapped superclass where common attributes like <code>breed</code> and <code>age</code> are defined. Subclasses, such as <code>Dog</code>, can then inherit these mappings, enabling a consistent data model across entities while accommodating the flexibility of NoSQL database structures.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a JSON sample demonstrating the usage of <code>Animal</code> in a subclass <code>Dog</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">breed</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Golden Retriever</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Buddy</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this JSON representation, the attributes <code>breed</code> and <code>age</code> from the <code>Animal</code> superclass are inherited by the <code>Dog</code> entity, showcasing the application of mapped superclass mappings to its subclasses.</p>
</div>
</div>
<div class="sect3">
<h4 id="inheritance_definition"><a class="anchor" href="#inheritance_definition"></a>3.6.3. @Inheritance</h4>
<div class="paragraph">
<p>The <code>@Inheritance</code> annotation in Jakarta NoSQL enables the use of inheritance strategies within the data model, allowing for the creation of class hierarchies where subclasses inherit attributes and behaviors from their superclass. By applying <code>@Inheritance</code> to the superclass, developers can define the inheritance strategy to be used for mapping the class hierarchy to the underlying NoSQL database.</p>
</div>
<div class="paragraph">
<p>Consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@Inheritance</span>
<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">Notification</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> LocalDate createdOn;

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> send();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Jakarta NoSQL, a unique strategy is employed where a single data structure per class hierarchy is utilized. In this strategy, all classes in the hierarchy are mapped to a single data structure in the database. The structure includes a "discriminator column," which serves to identify the specific subclass to which each instance belongs. This approach facilitates polymorphic relationships between entities and enables queries that span the entire class hierarchy.</p>
</div>
<div class="paragraph">
<p>However, this strategy does have a drawback: it requires that fields corresponding to subclass-specific state be nullable. Despite this limitation, the <code>@Inheritance</code> annotation provides a powerful mechanism for organizing and structuring data within Jakarta NoSQL applications, supporting code reuse, maintainability, and flexibility in data modeling.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that the <code>@Inheritance</code> annotation works in conjunction with other annotations such as <code>@DiscriminatorValue</code> and <code>@DiscriminatorColumn</code>, which further refine the inheritance mapping strategy and specify how subclass instances are differentiated within the single data structure.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It&#8217;s crucial to note that the <code>@Inheritance</code> annotation may not be fully supported in all NoSQL databases, particularly in Key-value databases. Due to the schemaless nature of these databases, the concept of class inheritance and table inheritance, as seen in traditional relational databases, may not apply. Therefore, the use of <code>@Inheritance</code> in such environments might lead to unexpected behavior or errors, and the Key-value database may outright ignore this annotation.</p>
</div>
<div class="paragraph">
<p>Additionally, in cases where serialization is performed via JSON, certain NoSQL databases may not inherently support polymorphism and inheritance. However, Jakarta NoSQL providers may implement solutions using features from Jakarta JSON Binding to handle polymorphic entities effectively. Developers should be aware of these limitations and ensure compatibility with their chosen NoSQL database and serialization mechanisms when employing the <code>@Inheritance</code> annotation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_discriminatorcolumn"><a class="anchor" href="#_discriminatorcolumn"></a>3.6.4. @DiscriminatorColumn</h4>
<div class="paragraph">
<p>The <code>@DiscriminatorColumn</code> annotation is utilized to specify the discriminator column for the inheritance mapping strategy within an entity class hierarchy. This annotation is typically applied at the root of the hierarchy, although it can also be used within subhierarchies if a different inheritance strategy is applied.</p>
</div>
<div class="paragraph">
<p>When using inheritance mapping, the discriminator column serves as a means to differentiate between different subclasses of the entity. This column holds a value that identifies the specific subclass represented by each entity instance in the database.</p>
</div>
<div class="paragraph">
<p>If the <code>@DiscriminatorColumn</code> annotation is not explicitly provided, and a discriminator column is required, the default name for the column is typically "DTYPE" or "dtype", depending on the NoSQL provider. The  discriminator type is set to STRING.</p>
</div>
<div class="paragraph">
<p>It&#8217;s essential to note that the <code>@DiscriminatorColumn</code> annotation can be applied to both concrete and abstract entity classes. This flexibility allows for precise control over the inheritance mapping strategy within the entity hierarchy.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s illustrate the usage of the <code>@DiscriminatorColumn</code> annotation with an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@Inheritance</span>
<span class="annotation">@DiscriminatorColumn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">Notification</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> LocalDate createdOn;

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> send();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>Notification</code> class is marked as abstract and serves as the root of an inheritance hierarchy. The <code>@DiscriminatorColumn("type")</code> annotation specifies that the discriminator column for this hierarchy will be named "type". This column will hold values indicating the specific subclass type for each entity instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discriminatorvalue"><a class="anchor" href="#_discriminatorvalue"></a>3.6.5. @DiscriminatorValue</h4>
<div class="paragraph">
<p>This annotation specifies the value of the discriminator column for entities of the given type.</p>
</div>
<div class="paragraph">
<p>The DiscriminatorValue annotation can only be specified on a concrete entity class. If the DiscriminatorValue annotation is not specified, a provider-specific function will be used to generate a value representing the entity type. By default, the discriminator value is derived from the <code>Class.getSimpleName()</code>.</p>
</div>
<div class="paragraph">
<p>The inheritance strategy and the discriminator column are only specified in the root of an entity class hierarchy or subhierarchy in which a different inheritance strategy is applied. The discriminator value, if not defaulted, should be specified for each entity class in the hierarchy.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@DiscriminatorValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">SMS</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SmsNotification</span> <span class="directive">extends</span> <span class="predefined-type">Notification</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> phoneNumber;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> send() {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending message to sms: </span><span class="delimiter">&quot;</span></span> + phoneNumber);
    }
}

<span class="annotation">@Entity</span>
<span class="annotation">@DiscriminatorValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Email</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailNotification</span> <span class="directive">extends</span> <span class="predefined-type">Notification</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> emailAddress;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> send() {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending message to email: </span><span class="delimiter">&quot;</span></span> + emailAddress);
    }
}

<span class="annotation">@Entity</span>
<span class="comment">// the discriminator value is SocialMediaNotification</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SocialMediaNotification</span> <span class="directive">extends</span> <span class="predefined-type">Notification</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> username;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> send() {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending a post to: </span><span class="delimiter">&quot;</span></span> + username);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This JSON structure represents three different types of notifications: SMS, Email, and Social Media. Each notification has a unique ID, a name, a creation date, and type-specific attributes such as phone number or username. The discriminator value <code>"type"</code> indicates the specific subclass of the <code>Notification</code> entity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Notification 1</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">createdOn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2024-02-14</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SMS</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">phoneNumber</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">+1234567890</span><span class="delimiter">&quot;</span></span>
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Notification 2</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">createdOn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2024-02-14</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Email</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">phoneNumber</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">user@example.com</span><span class="delimiter">&quot;</span></span>
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Notification 3</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">createdOn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2024-02-14</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SocialMediaNotification</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">socialmedia_user</span><span class="delimiter">&quot;</span></span>
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of querying an entity using the <code>@Inheritance</code> annotation as defined by <a href="#inheritance_definition">@Inheritance</a>, the Jakarta NoSQL provider must automatically include the condition where the value from <code>@DiscriminatorColumn</code> equals the value of <code>@DiscriminatorValue</code>.</p>
</div>
<div class="paragraph">
<p>For example, given the sample code from <a href="#inheritance_definition">@Inheritance</a> and executing the query for <code>SmsNotification</code>, the generated query should include a condition such as <code>type = 'SMS'</code> or its equivalent in the respective NoSQL database.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_template_classes"><a class="anchor" href="#_template_classes"></a>4. Template Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The DAO (Data Access Object) pattern in Jakarta NoSQL simplifies the implementation of common database operations by providing a basic API to the underlying persistence engine. This pattern encapsulates the logic for interacting with the database, promoting a clean separation between the application&#8217;s business logic and its data access code.</p>
</div>
<div class="paragraph">
<p>In the DAO pattern, each entity in the application typically has a corresponding DAO class responsible for handling database operations related to that entity. These DAO classes abstract away the complexity of database interactions, providing a simplified interface for performing CRUD (Create, Read, Update, Delete) operations.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL&#8217;s DAO feature follows this pattern closely, offering a set of template classes that serve as the foundation for implementing DAOs. These template classes provide pre-defined methods for common database operations, such as saving, updating, querying, and deleting entities.</p>
</div>
<div class="paragraph">
<p>Developers can extend these template classes to create custom DAOs for their application entities. By doing so, they can focus on implementing the specific logic required for their application, while the underlying Jakarta NoSQL framework handles the low-level database interactions.</p>
</div>
<div class="paragraph">
<p>Overall, the DAO pattern in Jakarta NoSQL promotes modularity, reusability, and maintainability in application development by abstracting away database access details. By adhering to this pattern, developers can create robust and scalable applications with ease, without having to deal with the complexities of database interaction at the application level.</p>
</div>
<div class="paragraph">
<p>The provided code snippet demonstrates the usage of the <code>Template</code> class in Jakarta NoSQL to perform basic CRUD operations on entities in the database using the DAO pattern.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Create Book Entity</strong>: An instance of the <code>Book</code> entity is created using the builder pattern. This entity represents a book with attributes such as title, author, publication year, and edition.</p>
</li>
<li>
<p><strong>Insert Operation</strong>: The <code>insert</code> method of the <code>Template</code> class is invoked to insert the <code>Book</code> entity into the database. This method takes the entity as a parameter and stores it in the underlying database.</p>
</li>
<li>
<p><strong>Find Operation</strong>: The <code>find</code> method of the <code>Template</code> class is called to retrieve the <code>Book</code> entity from the database based on its ID (<code>id</code>). This method returns an <code>Optional</code> object containing the retrieved entity, if it exists.</p>
</li>
<li>
<p><strong>Print Result</strong>: The retrieved <code>Book</code> entity is printed to the console using <code>System.out.println</code>. If the entity exists in the database, it will be printed; otherwise, the output will indicate that the entity was not found.</p>
</li>
<li>
<p><strong>Delete Operation</strong>: Finally, the <code>delete</code> method of the <code>Template</code> class is used to delete the <code>Book</code> entity from the database based on its ID. This method removes the entity from the database.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Overall, this code snippet demonstrates how to use the <code>Template</code> class in Jakarta NoSQL to interact with the database, abstracting away the low-level details of database operations and providing a simplified interface for performing CRUD operations on entities.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
Template template;

<span class="comment">//1. Create Book Entity</span>
<span class="predefined-type">Book</span> book = <span class="predefined-type">Book</span>.builder()
        .id(id)
        .title(<span class="string"><span class="delimiter">&quot;</span><span class="content">Java Concurrency in Practice</span><span class="delimiter">&quot;</span></span>)
        .author(<span class="string"><span class="delimiter">&quot;</span><span class="content">Brian Goetz</span><span class="delimiter">&quot;</span></span>)
        .year(Year.of(<span class="integer">2006</span>))
        .edition(<span class="integer">1</span>)
        .build();
<span class="comment">//2. Insert Operation</span>
template.insert(book);
<span class="comment">//3. Find Operation</span>
Optional&lt;<span class="predefined-type">Book</span>&gt; optional = template.find(<span class="predefined-type">Book</span>.class, id);
<span class="comment">//4. Print Result</span>
<span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">The result </span><span class="delimiter">&quot;</span></span> + optional);
<span class="comment">//5. Delete Operation</span>
template.delete(<span class="predefined-type">Book</span>.class, id);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Template</code> class in Jakarta NoSQL simplifies CRUD (Create, Read, Update, Delete) operations by providing a fluent API for interacting with the underlying NoSQL database. This API allows developers to perform advanced queries and deletion operations beyond the basic ID attribute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
Template template;

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Book</span>&gt; books = template.select(<span class="predefined-type">Book</span>.class)
        .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>)
        .eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Joshua Bloch</span><span class="delimiter">&quot;</span></span>)
        .and(<span class="string"><span class="delimiter">&quot;</span><span class="content">edition</span><span class="delimiter">&quot;</span></span>)
        .gt(<span class="integer">3</span>)
        .result();

template.delete(<span class="predefined-type">Book</span>.class)
        .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>)
        .eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Joshua Bloch</span><span class="delimiter">&quot;</span></span>)
        .and(<span class="string"><span class="delimiter">&quot;</span><span class="content">edition</span><span class="delimiter">&quot;</span></span>)
        .gt(<span class="integer">3</span>)
        .execute();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The fluent API feature for searching and removing entities provided by the <code>Template</code> class in Jakarta NoSQL offers excellent flexibility and convenience for CRUD operations. However, it&#8217;s essential to note that this feature may only be fully supported for some types of NoSQL databases, as the capabilities of the underlying database technology may limit certain operations.</p>
</div>
<div class="paragraph">
<p>In cases where the underlying NoSQL database does not support advanced querying or deletion beyond the basic ID attribute, attempting to use these features with the <code>Template</code> class will result in an <code>UnsupportedOperationException</code> being thrown by Jakarta NoSQL. This exception indicates that the current database type does not support the requested operation.</p>
</div>
<div class="paragraph">
<p>Some NoSQL databases may not support all filter operations, such as logical OR operations in the fluent API. In such cases, attempting to use unsupported operations with the <code>Template</code> class will result in an <code>UnsupportedOperationException</code> being thrown by Jakarta NoSQL. This exception indicates that the current Jakarta NoSQL provider does not support the requested operation due to limitations imposed by the underlying NoSQL database technology.</p>
</div>
<div class="paragraph">
<p>Developers should be aware that while Jakarta NoSQL aims to provide a unified API across different NoSQL databases, there may be variations in support for certain operations depending on the capabilities of the specific database provider. When encountering limitations or unsupported operations, developers may need to adjust their application logic or consider alternative approaches to achieve the desired functionality within the constraints of the chosen NoSQL database technology.</p>
</div>
<div class="sect2">
<h3 id="_template_and_inheritance_classes"><a class="anchor" href="#_template_and_inheritance_classes"></a>4.1. Template and Inheritance classes</h3>
<div class="paragraph">
<p>In case of querying an entity using the <code>@Inheritance</code> annotation as defined by <a href="#inheritance_definition">@Inheritance</a>, the Jakarta NoSQL provider must automatically include the condition where the value from <code>@DiscriminatorColumn</code> equals the value of <code>@DiscriminatorValue</code>.</p>
</div>
<div class="paragraph">
<p>For example, given the sample code from <a href="#inheritance_definition">@Inheritance</a> and executing the query for <code>SmsNotification</code>, the generated query should include a condition such as <code>type = 'SMS'</code> or its equivalent in the respective NoSQL database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;SmsNotification&gt; notifications = template.select(SmsNotification.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It ensures that only entities of type <code>SmsNotification</code>, as indicated by the discriminator value, are retrieved from the database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fluent_api_query"><a class="anchor" href="#_fluent_api_query"></a>4.2. Fluent API Query</h3>
<div class="paragraph">
<p>The <code>Template</code> class in Jakarta NoSQL provides a fluent API for querying and deleting entities from the underlying NoSQL database. This fluent API offers a convenient and expressive way for Java developers to interact with their data, allowing them to construct complex queries efficiently and perform deletion operations.</p>
</div>
<div class="sect3">
<h4 id="_importance_of_fluent_api_query"><a class="anchor" href="#_importance_of_fluent_api_query"></a>4.2.1. Importance of Fluent API Query</h4>
<div class="paragraph">
<p>The fluent API query is essential for Java developers as it simplifies retrieving and manipulating data from the NoSQL database. By providing a fluent interface, Jakarta NoSQL enables developers to express their query logic concisely and readably, making it easier to understand and maintain the codebase.</p>
</div>
<div class="paragraph">
<p>The fluent API query also allows developers to build dynamic queries at runtime by chaining together various methods and conditions. This flexibility enables applications to adapt to changing requirements and user inputs, providing a more robust and responsive user experience.</p>
</div>
<div class="paragraph">
<p>Furthermore, the fluent API query promotes code reuse and modularity by encapsulating query logic within reusable components. Developers can define and combine reusable query fragments to construct more complex queries, reducing duplication and improving code maintainability.</p>
</div>
</div>
<div class="sect3">
<h4 id="_limitations_in_key_value_databases"><a class="anchor" href="#_limitations_in_key_value_databases"></a>4.2.2. Limitations in Key-Value Databases</h4>
<div class="paragraph">
<p>It is worth noting that the <code>select</code> and <code>delete</code> methods of the <code>Template</code> class may not be fully compatible with key-value databases. This limitation arises because key-value databases primarily rely on key-value pairs for data retrieval and deletion rather than complex query predicates.</p>
</div>
<div class="paragraph">
<p>The primary data access mode in key-value databases is through direct lookup by key. It is challenging to support complex query operations like those provided by the fluent API query. As a result, attempts to use the <code>select</code> and <code>delete</code> methods with key-value databases may throw an <code>UnsupportedOperationException</code> by Jakarta NoSQL, indicating that the underlying database technology does not support the operation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_supported_methods_in_other_nosql_databases"><a class="anchor" href="#_supported_methods_in_other_nosql_databases"></a>4.2.3. Supported Methods in Other NoSQL Databases</h4>
<div class="paragraph">
<p>The fluent API query offers a wide range of supported methods through the <code>QueryMapper</code> class for other types of NoSQL databases, such as document-oriented or column-family databases. These methods may include filtering, sorting, and basic querying capabilities, providing developers with flexible data retrieval and manipulation tools.</p>
</div>
<div class="paragraph">
<p>However, it&#8217;s essential to consider that the availability of certain query methods may vary depending on the specific NoSQL database being used. NoSQL databases that do not support certain operations can raise <code>UnsupportedOperationException</code>.</p>
</div>
<div class="paragraph">
<p>Attempting to use unsupported operations with the fluent API query may result in runtime exceptions or unexpected behavior. Developers should consult the documentation of their chosen NoSQL database to understand its query capabilities and limitations and adjust their application logic accordingly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_query_navigation_hierarchy"><a class="anchor" href="#_query_navigation_hierarchy"></a>4.2.4. Query Navigation Hierarchy</h4>
<div class="paragraph">
<p>In Jakarta NoSQL, the query navigation hierarchy refers to navigating through the properties of entities and their associated classes when constructing queries. Within an entity, property names must be unique, ignoring cases. For simple entity properties, the field or accessor method name serves as the entity property name. In the case of embedded and association classes, entity property names are computed by concatenating the field or accessor method names at each level, optionally joined by a dot or period, <code>.</code>, delimiter.</p>
</div>
<div class="paragraph">
<p>Within a given entity or embeddable class, names assigned to persistent fields must be unique, ignoring cases.</p>
</div>
<div class="paragraph">
<p>Furthermore, within the context of a given entity, each persistent field of an embeddable class reachable by navigation from the entity class may be assigned a compound name. The compound name is obtained by concatenating the names assigned to each field traversed by navigation from the entity class to the persistent field of the embedded class, optionally joined by a delimiter.</p>
</div>
<div class="paragraph">
<p>For example, consider the following data model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">class</span> <span class="class">Person</span> {
  <span class="directive">private</span> <span class="predefined-type">Long</span> id;
  <span class="directive">private</span> MailingAddress address;
}

<span class="type">class</span> <span class="class">MailingAddress</span> {
  <span class="directive">private</span> <span class="predefined-type">String</span> zipcode;
  <span class="directive">private</span> <span class="predefined-type">String</span> city;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this scenario, querying for records based on the zip code of the <code>MailingAddress</code> class requires accessing the <code>address</code> field of <code>Person</code> and the <code>zipcode</code> property of <code>MailingAddress</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
Template template;

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Book</span>&gt; books = template.select(Person.class)
        .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">address.zipcode</span><span class="delimiter">&quot;</span></span>)
        .eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">402-775</span><span class="delimiter">&quot;</span></span>)
        .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">address.city</span><span class="delimiter">&quot;</span></span>)
        .asc()
        .result();

template.delete(Person.class)
     .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">address.zipcode</span><span class="delimiter">&quot;</span></span>)
     .eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">402-775</span><span class="delimiter">&quot;</span></span>)
     .execute();</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, the fluent API query navigates through the properties of the <code>Person</code> entity to access the <code>zipcode</code> property of the <code>MailingAddress</code> embedded class. The <code>where</code> clause specifies the path to the <code>zipcode</code> property using dot notation (<code>address.zipcode</code>). The <code>orderBy</code> clause similarly specifies the path to the <code>city</code> property for sorting the results by city in ascending order.</p>
</div>
<div class="paragraph">
<p>This query navigation hierarchy enables developers to construct complex queries traverse multiple levels of entity properties, facilitating flexible and precise data retrieval and manipulation in Jakarta NoSQL.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ttl_time_to_live_support"><a class="anchor" href="#_ttl_time_to_live_support"></a>4.3. TTL (Time-To-Live) Support</h3>
<div class="paragraph">
<p>TTL (Time-To-Live) is a feature provided by many NoSQL databases that allows developers to set an expiration time for data stored in the database. When data reaches its TTL, it is automatically removed from the database, freeing up resources and ensuring that it remains efficient and clutter-free.</p>
</div>
<div class="paragraph">
<p>For Java developers, TTL support is essential for managing data lifecycle and optimizing resource usage. It enables developers to implement caching strategies, manage temporary data, and enforce data retention policies effectively.</p>
</div>
<div class="paragraph">
<p>While TTL support is valuable, not all NoSQL databases provide native support for TTL. In cases where TTL is not supported, attempting to set a TTL on data may result in an <code>UnsupportedOperationException</code> being thrown by the Jakarta NoSQL provider.</p>
</div>
<div class="paragraph">
<p>Additionally, some NoSQL providers may have limitations on the granularity of TTL values, such as supporting only TTL values specified in certain units (e.g., hours) or rounding TTL values to the nearest supported unit. In such cases, attempting to set a TTL value that does not align with the provider&#8217;s limitations may result in unexpected behavior or no TTL being applied.</p>
</div>
<div class="paragraph">
<p>For example, suppose a NoSQL database only supports TTL values specified in hours. If a developer attempts to set a TTL of 10 seconds, the Jakarta NoSQL provider may throw an UnsupportedOperationException. Similarly, if the developer attempts to set a TTL of 3660 seconds (which is more than one hour), the TTL value may be rounded to the nearest supported unit (i.e., one hour) by the provider.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
Template template;

<span class="comment">// UnsupportedOperationException: TTL granularity not supported</span>
template.insert(entity, <span class="predefined-type">Duration</span>.ofSeconds(<span class="integer">10L</span>));

<span class="comment">// Inserting data with a TTL of one hour</span>
template.insert(entity, <span class="predefined-type">Duration</span>.ofSeconds(<span class="integer">3600</span>));

<span class="comment">// Inserting data with a TTL of one hour (rounded from 3660 seconds)</span>
template.insert(entity, <span class="predefined-type">Duration</span>.ofSeconds(<span class="integer">3660</span>));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jakarta_nosql_providers"><a class="anchor" href="#_jakarta_nosql_providers"></a>5. Jakarta NoSQL Providers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Jakarta NoSQL provider might come as an integrated component of a Jakarta EE container or a separate component that integrates with the Jakarta EE container via standard or proprietary SPIs. For example, a Jakarta NoSQL provider might use a CDI portable extension to integrate with dependency injection.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL providers play a crucial role in the ecosystem by interpreting the annotations provided by developers and implementing the corresponding Template interfaces. These providers handle operations related to entities according to the rules outlined in the Jakarta NoSQL specification.</p>
</div>
<div class="paragraph">
<p>By adhering to these rules, Jakarta NoSQL providers ensure seamless integration with the application via dependency injection. This integration allows developers to access the functionality provided by the Template interfaces without concerning themselves with the underlying database implementation details.</p>
</div>
<div class="paragraph">
<p>The Jakarta NoSQL specification sets clear guidelines for Jakarta NoSQL providers, ensuring consistency and compatibility across different providers. These rules enable multiple Jakarta Data providers to coexist within a system without interfering or overlapping at the same injection points. This level of standardization fosters interoperability and flexibility, empowering developers to choose the provider that best suits their project requirements.</p>
</div>
<div class="sect2">
<h3 id="_configuration_and_credentials"><a class="anchor" href="#_configuration_and_credentials"></a>5.1. Configuration and Credentials</h3>
<div class="paragraph">
<p>Configuration and credentials for NoSQL databases are not standardized within the Jakarta NoSQL specification. Each Jakarta NoSQL provider is responsible for providing its own configuration mechanism, allowing developers to configure the connection to the NoSQL database according to their specific requirements.</p>
</div>
<div class="paragraph">
<p>The Jakarta NoSQL specification highly recommends following the Twelve-Factor App methodology, particularly the "Store config in the environment" principle. This approach advocates for storing configuration details such as database credentials, connection URLs, and other settings as environment variables. This practice promotes portability, scalability, and security by separating configuration from code and ensuring consistency across different environments.</p>
</div>
</div>
<div class="sect2">
<h3 id="_schema_generation"><a class="anchor" href="#_schema_generation"></a>5.2. Schema Generation</h3>
<div class="paragraph">
<p>The process of creating a schema for a database is called schema generation. This process is not included in the Jakarta NoSQL specification. While some NoSQL databases allow schema definition and enforcement, many NoSQL databases are schemaless, which means developers can store data without defining a schema beforehand.</p>
</div>
<div class="paragraph">
<p>Therefore, the ability to generate a schema may differ depending on the NoSQL database and the Jakarta NoSQL provider being used. Some Jakarta NoSQL providers offer schema generation capabilities, while others do not.</p>
</div>
<div class="paragraph">
<p>For developers working with schemaless NoSQL databases, schema generation may not be necessary. This is because the database dynamically adapts to the structure of the data being stored. In such cases, the focus should be on organizing data to suit the application&#8217;s requirements best, rather than defining a rigid schema.</p>
</div>
<div class="paragraph">
<p>In cases where schema generation is supported, developers should be aware that the process may vary between NoSQL databases and Jakarta NoSQL providers. Different databases may have unique requirements or conventions for defining schemas, and Jakarta NoSQL providers may offer different approaches or tools for schema generation.</p>
</div>
<div class="paragraph">
<p>Whether schema generation is necessary or beneficial depends on the specific use case, the NoSQL database being used, and the development team&#8217;s preferences. Developers should consult the documentation of their chosen NoSQL database and Jakarta NoSQL provider for guidance on schema generation practices and considerations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jakarta_nosql_providers_extensions"><a class="anchor" href="#_jakarta_nosql_providers_extensions"></a>5.3. Jakarta NoSQL Providers Extensions</h3>
<div class="paragraph">
<p>Jakarta NoSQL providers and NoSQL databases have the flexibility to extend the API according to their specific requirements. This extensibility allows providers to create new annotations or develop specialized versions of the Template API tailored to their unique features or functionalities.</p>
</div>
<div class="paragraph">
<p>However, it&#8217;s essential to note that these extensions are specific to the respective provider or database and may not be compatible with others. As a result, there is no guarantee of compatibility between extensions developed by different Jakarta NoSQL providers or NoSQL databases.</p>
</div>
<div class="paragraph">
<p>Despite the lack of cross-compatibility, this extensibility empowers providers to effectively innovate and address specific use cases or requirements. By leveraging extensions, developers can harness the full potential of Jakarta NoSQL while benefiting from the diverse capabilities offered by different providers and databases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_persistent_fields_2"><a class="anchor" href="#_persistent_fields_2"></a>5.4. Persistent Fields</h3>
<div class="paragraph">
<p>A Jakarta NoSQL provider can read the annotation via runtime, for example, using reflection, or via build-time, for example, Java Annotation Processor.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL provider runtime accesses the persistent state of an entity via either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>property access using style property accessors defined by the Jakarta NoSQL provider for its respective field or</p>
</li>
<li>
<p>field access, that is, direct access to instance variables.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When property access is used, the Jakarta NoSQL provider must define the conversion; the recommendation is the method signature convention for JavaBeans read/write properties, as determined by the JavaBeans <code>Introspector</code> class.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>Column</code> annotation should be at the field in both access types.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interoperability_with_other_jakarta_ee_specifications"><a class="anchor" href="#_interoperability_with_other_jakarta_ee_specifications"></a>6. Interoperability with other Jakarta EE Specifications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses Interoperability with related Jakarta EE specifications. When operating within a Jakarta EE product, the availability of other Jakarta EE technologies depends on whether the Jakarta EE Core profile, Jakarta EE Web profile, or Jakarta EE Platform is used.</p>
</div>
<div class="sect2">
<h3 id="_jakarta_contexts_and_dependency_injection"><a class="anchor" href="#_jakarta_contexts_and_dependency_injection"></a>6.1. Jakarta Contexts and Dependency Injection</h3>
<div class="paragraph">
<p>Contexts and Dependency Injection (CDI) is a foundational specification within the Jakarta EE Core profile, offering a robust dependency injection framework for Java applications. CDI facilitates the decoupling of components and manages their lifecycle through dependency injection, promoting loose coupling and enabling the creation of modular, reusable code.</p>
</div>
<div class="paragraph">
<p>CDI is crucial in integrating the Jakarta NoSQL template seamlessly into applications through the <code>@Inject</code> annotation in Jakarta EE environments. This integration allows developers to inject instances of the <code>Template</code> class directly into their application components, enabling straightforward access to its methods and functionalities.</p>
</div>
<div class="paragraph">
<p>With CDI and the <code>@Inject</code> annotation, developers can inject the <code>Template</code> instance and utilize its methods effortlessly, as illustrated in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
Template template;

<span class="comment">// ...</span>

<span class="predefined-type">List</span>&lt;Car&gt; cars = template.select(Car.class).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>).eq(CarType.SPORT).result();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Jakarta NoSQL provider should also provide CDI qualifiers to work with multiple NoSQL databases through CDI. Developers can use these qualifiers to specify which database instance they want to inject, enabling flexibility and compatibility with different NoSQL data stores. Jakarta NoSQL providers typically supply annotations like <code>@DatabaseQualifier</code> to annotate the injection points.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="annotation">@DatabaseQualifier</span>
Template template;

<span class="annotation">@Inject</span>
<span class="annotation">@DatabaseQualifier</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">another</span><span class="delimiter">&quot;</span></span>)
Template anotherTemplate;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The template implementation bean must have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>qualifier type <code>@Default</code>, and</p>
</li>
<li>
<p>the template interface as a bean type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus, the implementation is eligible for injection to unqualified injection points typed to the repository interface, as defined by section 2.4 of the CDI specification, version 4.0.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This specification does not restrict the scope of the template implementation bean.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_cdi_extensions_for_jakarta_data_providers"><a class="anchor" href="#_cdi_extensions_for_jakarta_data_providers"></a>6.1.1. CDI Extensions for Jakarta Data Providers</h4>
<div class="paragraph">
<p>In environments where CDI Full or CDI Lite is available, Jakarta NoSQL providers can leverage CDI extensions to enhance the integration and discovery of entities or implementations. While Jakarta NoSQL does not prescribe a specific type of CDI extension, it does require Jakarta NoSQL providers to ensure that template implementations are injected into appropriate injection points, typically interfaces, without additional qualifiers.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to note the distinction between CDI Full and CDI Lite: CDI Full, part of the Jakarta Web profile and Jakarta Platform, includes support for <code>jakarta.enterprise.inject.spi.Extension</code>, whereas CDI Lite (Jakarta Core profile) does not. However, both CDI Full and CDI Lite support <code>jakarta.enterprise.inject.build.compatible.spi.BuildCompatibleExtension</code>.</p>
</div>
<div class="paragraph">
<p>To avoid conflicts between the <code>BuildCompatibleExtension</code> and portable <code>Extension</code> in CDI Full environments, Jakarta NoSQL providers can utilize CDI&#8217;s <code>@SkipIfPortableExtensionPresent</code> annotation.</p>
</div>
<div class="paragraph">
<p>CDI provides a robust foundation for integrating Jakarta NoSQL repositories into Jakarta EE applications, offering flexibility and extensibility to meet diverse requirements and use cases.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jakarta_bean_validation"><a class="anchor" href="#_jakarta_bean_validation"></a>6.2. Jakarta Bean Validation</h3>
<div class="paragraph">
<p>Integrating Jakarta Bean Validation into Jakarta NoSQL ensures data consistency within the Java layer by enforcing validation rules and constraints on data objects. By applying validation rules, developers can maintain data integrity, improve data quality, and enhance the reliability of their applications.</p>
</div>
<div class="paragraph">
<p>Jakarta Validation offers several advantages for Jakarta NoSQL applications:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It helps identify and prevent invalid or inconsistent data from being processed or persisted, reducing the risk of data corruption.</p>
</li>
<li>
<p>Catching validation errors early in the Java layer allows developers to identify and resolve potential issues before further processing or persistence occurs, leading to more robust and reliable applications.</p>
</li>
<li>
<p>Jakarta Validation supports declarative validation rules, simplifying the validation logic and promoting cleaner, more maintainable code.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In Jakarta NoSQL, template implementations are subject to method validation as specified in the "Method and constructor validation" section of the Jakarta Validation specification. This validation includes checking for constraints on method parameters and results. Automatic validation using these constraints is done by delegating validation to the Bean Validation implementation when inserting, updating, or deleting data through the methods.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider an example demonstrating the usage of Jakarta Bean Validation annotations in the <code>Student</code> entity class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Student</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> id;

    <span class="annotation">@Column</span>
    <span class="annotation">@NotBlank</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Positive</span>
    <span class="annotation">@Min</span>(<span class="integer">18</span>)
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="type">int</span> age;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>name</code> field is annotated with <code>@NotBlank</code>, indicating that it must not be blank. The <code>age</code> field is annotated with both <code>@Positive</code> and <code>@Min(18)</code>, ensuring it is a positive integer greater than or equal to 18.</p>
</div>
<div class="paragraph">
<p>To execute validation before inserting data using Jakarta NoSQL templates, developers can simply invoke the <code>insert</code> and <code>update</code> methods on the template instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> Template template;
...
<span class="comment">// Execute the validation before inserting the data.</span>
template.insert(student);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jakarta_data"><a class="anchor" href="#_jakarta_data"></a>6.3. Jakarta Data</h3>
<div class="paragraph">
<p>Developers can seamlessly incorporate common data patterns, such as repositories, into their codebase by integrating Jakarta NoSQL with Jakarta Data.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL providers that support Jakarta Data typically scan interfaces marked with the <code>jakarta.data.repository.Repository</code> annotation. This annotation serves as a marker for repositories, providing a standardized way to define repository interfaces.</p>
</div>
<div class="paragraph">
<p>By embracing Jakarta Data, Jakarta NoSQL providers enable Java developers to use standardized data patterns and techniques when defining entities and repositories. This compatibility ensures interoperability with other technologies and frameworks, fostering a cohesive and streamlined development experience.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. We will not consider generic programs which work with entity data via detyped representations.
</div>
</div>
<div id="footer">
<div id="footer-text">
 1.0.0-M1<br>
Last updated 2024-03-07 05:34:38 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>