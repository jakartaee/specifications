<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Jakarta Server Pages Team, https://projects.eclipse.org/projects/ee4j.jsp">
<title>Jakarta Server Pages</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<link rel="canonical" href="https://jakarta.ee/specifications/pages/4.1/jakarta-server-pages-spec-4.1">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta Server Pages</h1>
<div class="details">
<span id="author" class="author">Jakarta Server Pages Team, https://projects.eclipse.org/projects/ee4j.jsp</span><br>
<span id="email" class="email"><a href="https://dev.eclipse.org/mailman/listinfo/jsp-dev" class="bare">https://dev.eclipse.org/mailman/listinfo/jsp-dev</a></span><br>
<span id="revnumber"> 4.1-M1,</span>
<span id="revdate">October 16, 2025</span>
<br><span id="revremark">DRAFT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#eclipse-foundation-specification-license-v1-1">Eclipse Foundation Specification License - v1.1</a>
<ul class="sectlevel1">
<li><a href="#disclaimers">Disclaimers</a></li>
<li><a href="#jakarta-server-pages-specification-version-4-1">Jakarta Server Pages Specification, Version 4.1</a>
<ul class="sectlevel2">
<li><a href="#preface">Preface</a>
<ul class="sectlevel3">
<li><a href="#who-should-read-this-document">Who Should Read This Document</a></li>
<li><a href="#organization-of-this-document">Organization of This Document</a></li>
<li><a href="#historical-note">Historical Note</a></li>
</ul>
</li>
<li><a href="#overview">Overview</a>
<ul class="sectlevel3">
<li><a href="#the-jakarta-server-pages-technology">The Jakarta Server Pages Technology</a></li>
<li><a href="#basic-concepts">Basic Concepts</a></li>
<li><a href="#users-of-jakarta-server-pages">Users of Jakarta Server Pages</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#part-i">Part I</a>
<ul class="sectlevel1">
<li><a href="#core-syntax-and-semantics">1. Core Syntax and Semantics</a>
<ul class="sectlevel2">
<li><a href="#what-is-a-jsp-page-2">1.1. What Is a JSP Page</a>
<ul class="sectlevel3">
<li><a href="#web-containers-and-web-components">1.1.1. Web Containers and Web Components</a></li>
<li><a href="#generating-html">1.1.2. Generating HTML</a></li>
<li><a href="#generating-xml">1.1.3. Generating XML</a></li>
<li><a href="#translation-and-execution-phases">1.1.4. Translation and Execution Phases</a></li>
<li><a href="#validating-jsp-pages">1.1.5. Validating JSP pages</a></li>
<li><a href="#events-in-jsp-pages">1.1.6. Events in JSP Pages</a></li>
<li><a href="#jsp-configuration-information">1.1.7. JSP Configuration Information</a></li>
<li><a href="#naming-conventions-for-jsp-files">1.1.8. Naming Conventions for JSP Files</a></li>
<li><a href="#compiling-jsp-pages">1.1.9. Compiling JSP Pages</a></li>
<li><a href="#debugging-jsp-pages">1.1.10. Debugging JSP Pages</a></li>
</ul>
</li>
<li><a href="#Web_Applications">1.2. Web Applications</a>
<ul class="sectlevel3">
<li><a href="#relative-url-specifications">1.2.1. Relative URL Specifications</a></li>
</ul>
</li>
<li><a href="#syntactic-elements-of-a-jsp-page">1.3. Syntactic Elements of a JSP Page</a>
<ul class="sectlevel3">
<li><a href="#elements-and-template-data">1.3.1. Elements and Template Data</a></li>
<li><a href="#element-syntax">1.3.2. Element Syntax</a></li>
<li><a href="#start-and-end-tags">1.3.3. Start and End Tags</a></li>
<li><a href="#empty-elements">1.3.4. Empty Elements</a></li>
<li><a href="#attribute-values">1.3.5. Attribute Values</a></li>
<li><a href="#the-jspattribute-jspbody-and-jspelement-elements">1.3.6. The jsp:attribute, jsp:body and jsp:element Elements</a></li>
<li><a href="#valid-names-for-actions-and-attributes">1.3.7. Valid Names for Actions and Attributes</a></li>
<li><a href="#white-space">1.3.8. White Space</a></li>
<li><a href="#_JSP_Documents">1.3.9. JSP Documents</a></li>
<li><a href="#jsp-syntax-grammar">1.3.10. JSP Syntax Grammar</a></li>
</ul>
</li>
<li><a href="#error-handling">1.4. Error Handling</a>
<ul class="sectlevel3">
<li><a href="#translation-time-processing-errors">1.4.1. Translation Time Processing Errors</a></li>
<li><a href="#request-time-processing-errors">1.4.2. Request Time Processing Errors</a></li>
<li><a href="#using-jsps-as-error-pages">1.4.3. Using JSPs as Error Pages</a></li>
</ul>
</li>
<li><a href="#comments">1.5. Comments</a>
<ul class="sectlevel3">
<li><a href="#comments-in-jsp-pages-in-standard-syntax">1.5.1. Comments in JSP Pages in Standard Syntax</a></li>
<li><a href="#comments-in-jsp-documents">1.5.2. Comments in JSP Documents</a></li>
</ul>
</li>
<li><a href="#quoting-and-escape-conventions">1.6. Quoting and Escape Conventions</a></li>
<li><a href="#overall-semantics-of-a-jsp-page">1.7. Overall Semantics of a JSP Page</a></li>
<li><a href="#objects">1.8. Objects</a>
<ul class="sectlevel3">
<li><a href="#objects-and-variables">1.8.1. Objects and Variables</a></li>
<li><a href="#objects-and-scopes">1.8.2. Objects and Scopes</a></li>
<li><a href="#implicit-objects">1.8.3. Implicit Objects</a></li>
<li><a href="#the-pagecontext-object">1.8.4. The pageContext Object</a></li>
</ul>
</li>
<li><a href="#template-text-semantics">1.9. Template Text Semantics</a></li>
<li><a href="#directives">1.10. Directives</a>
<ul class="sectlevel3">
<li><a href="#the-page-directive">1.10.1. The <code>page</code> Directive</a></li>
<li><a href="#the-taglib-directive">1.10.2. The <code>taglib</code> Directive</a></li>
<li><a href="#the-include-directive">1.10.3. The <code>include</code> Directive</a></li>
<li><a href="#implicit-includes">1.10.4. Implicit Includes</a></li>
<li><a href="#including-data-in-jsp-pages">1.10.5. Including Data in JSP Pages</a></li>
<li><a href="#additional-directives-for-tag-files">1.10.6. Additional Directives for Tag Files</a></li>
</ul>
</li>
<li><a href="#el-elements">1.11. EL Elements</a></li>
<li><a href="#scripting-elements">1.12. Scripting Elements</a>
<ul class="sectlevel3">
<li><a href="#declarations">1.12.1. Declarations</a></li>
<li><a href="#scriptlets">1.12.2. Scriptlets</a></li>
<li><a href="#expressions">1.12.3. Expressions</a></li>
</ul>
</li>
<li><a href="#actions">1.13. Actions</a></li>
<li><a href="#tag-attribute-interpretation-semantics">1.14. Tag Attribute Interpretation Semantics</a>
<ul class="sectlevel3">
<li><a href="#request-time-attribute-values">1.14.1. Request Time Attribute Values</a></li>
<li><a href="#type-conversions">1.14.2. Type Conversions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#expression-language">2. Expression Language</a>
<ul class="sectlevel2">
<li><a href="#syntax-of-expressions-in-jsp-pages-vs">2.1. Syntax of Expressions in JSP Pages: ${} vs #{}</a></li>
<li><a href="#expressions-and-template-text">2.2. Expressions and Template Text</a></li>
<li><a href="#expressions-and-attribute-values">2.3. Expressions and Attribute Values</a>
<ul class="sectlevel3">
<li><a href="#static-attribute">2.3.1. Static Attribute</a></li>
<li><a href="#dynamic-attribute">2.3.2. Dynamic Attribute</a></li>
<li><a href="#deferred-value">2.3.3. Deferred Value</a></li>
<li><a href="#deferred-method">2.3.4. Deferred Method</a></li>
<li><a href="#dynamic-attribute-or-deferred-expression">2.3.5. Dynamic Attribute or Deferred Expression</a></li>
<li><a href="#examples-of-using-and">2.3.6. Examples of Using ${} and #{}</a></li>
</ul>
</li>
<li><a href="#_Implicit_Objects">2.4. Implicit Objects</a></li>
<li><a href="#deactivating-el-evaluation">2.5. Deactivating EL Evaluation</a></li>
<li><a href="#disabling-scripting-elements">2.6. Disabling Scripting Elements</a></li>
<li><a href="#unknown-el-identifiers">2.7. Unknown EL Identifiers</a></li>
<li><a href="#invalid-el-expressions">2.8. Invalid EL Expressions</a></li>
<li><a href="#errors-warnings-default-values">2.9. Errors, Warnings, Default Values</a></li>
<li><a href="#resolution-of-variables-and-their-properties">2.10. Resolution of Variables and their Properties</a></li>
<li><a href="#functions">2.11. Functions</a>
<ul class="sectlevel3">
<li><a href="#invocation-syntax">2.11.1. Invocation Syntax</a></li>
<li><a href="#tag-library-descriptor-information">2.11.2. Tag Library Descriptor Information</a></li>
<li><a href="#example">2.11.3. Example</a></li>
<li><a href="#semantics">2.11.4. Semantics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#jsp-configuration">3. JSP Configuration</a>
<ul class="sectlevel2">
<li><a href="#jsp-configuration-information-in-web-xml">3.1. JSP Configuration Information in web.xml</a></li>
<li><a href="#taglib-map">3.2. Taglib Map</a></li>
<li><a href="#jsp-property-groups">3.3. JSP Property Groups</a>
<ul class="sectlevel3">
<li><a href="#_JSP_Property_Groups">3.3.1. JSP Property Groups</a></li>
<li><a href="#_Deactivating_EL_Evaluation">3.3.2. Deactivating EL Evaluation</a></li>
<li><a href="#_Disabling_Scripting_Elements">3.3.3. Disabling Scripting Elements</a></li>
<li><a href="#_Unknown_EL_Identifiers">3.3.4. Unknown EL Identifiers</a></li>
<li><a href="#declaring-page-encodings">3.3.5. Declaring Page Encodings</a></li>
<li><a href="#defining-implicit-includes">3.3.6. Defining Implicit Includes</a></li>
<li><a href="#denoting-xml-documents">3.3.7. Denoting XML Documents</a></li>
<li><a href="#Deferred_Syntax">3.3.8. Deferred Syntax (character sequence <code>#{</code>)</a></li>
<li><a href="#removing-whitespaces-from-template-text">3.3.9. Removing Whitespaces from Template Text</a></li>
<li><a href="#declaring-default-content-type">3.3.10. Declaring Default Content Type</a></li>
<li><a href="#setting-default-buffer-size">3.3.11. Setting Default Buffer Size</a></li>
<li><a href="#raising-errors-for-undeclared-namespaces">3.3.12. Raising Errors for Undeclared Namespaces</a></li>
</ul>
</li>
<li><a href="#backwards-compatibility-with-jsp-2-0">3.4. Backwards Compatibility with JSP 2.0</a></li>
</ul>
</li>
<li><a href="#internationalization-issues">4. Internationalization Issues</a>
<ul class="sectlevel2">
<li><a href="#page-character-encoding">4.1. Page Character Encoding</a>
<ul class="sectlevel3">
<li><a href="#standard-syntax">4.1.1. Standard Syntax</a></li>
<li><a href="#xml-syntax">4.1.2. XML Syntax</a></li>
</ul>
</li>
<li><a href="#response-character-encoding">4.2. Response Character Encoding</a></li>
<li><a href="#request-character-encoding">4.3. Request Character Encoding</a></li>
<li><a href="#xml-view-character-encoding">4.4. XML View Character Encoding</a></li>
<li><a href="#delivering-localized-content">4.5. Delivering Localized Content</a></li>
</ul>
</li>
<li><a href="#standard-actions">5. Standard Actions</a>
<ul class="sectlevel2">
<li><a href="#jsp:useBean">5.1. &lt;jsp:useBean&gt;</a></li>
<li><a href="#jsp:setProperty">5.2. &lt;jsp:setProperty&gt;</a></li>
<li><a href="#jspgetproperty">5.3. &lt;jsp:getProperty&gt;</a></li>
<li><a href="#jsp:include">5.4. &lt;jsp:include&gt;</a></li>
<li><a href="#jsp:forward">5.5. &lt;jsp:forward&gt;</a></li>
<li><a href="#jsp:param">5.6. &lt;jsp:param&gt;</a></li>
<li><a href="#jsp:attribute">5.7. &lt;jsp:attribute&gt;</a></li>
<li><a href="#jsp:body">5.8. &lt;jsp:body&gt;</a></li>
<li><a href="#jspinvoke">5.9. &lt;jsp:invoke&gt;</a>
<ul class="sectlevel3">
<li><a href="#basic-usage">5.9.1. Basic Usage</a></li>
<li><a href="#storing-fragment-output">5.9.2. Storing Fragment Output</a></li>
<li><a href="#providing-a-fragment-access-to-variables">5.9.3. Providing a Fragment Access to Variables</a></li>
</ul>
</li>
<li><a href="#jspdobody">5.10. &lt;jsp:doBody&gt;</a></li>
<li><a href="#jsp:element">5.11. &lt;jsp:element&gt;</a></li>
<li><a href="#jsp:text">5.12. &lt;jsp:text&gt;</a></li>
<li><a href="#jsp:output">5.13. &lt;jsp:output&gt;</a></li>
<li><a href="#other-standard-actions">5.14. Other Standard Actions</a></li>
</ul>
</li>
<li><a href="#JSP_Documents">6. JSP Documents</a>
<ul class="sectlevel2">
<li><a href="#overview-of-jsp-documents-and-of-xml-views">6.1. Overview of JSP Documents and of XML Views</a></li>
<li><a href="#jsp-documents">6.2. JSP Documents</a>
<ul class="sectlevel3">
<li><a href="#identifying-jsp-documents">6.2.1. Identifying JSP Documents</a></li>
<li><a href="#overview-of-syntax-of-jsp-documents">6.2.2. Overview of Syntax of JSP Documents</a></li>
<li><a href="#semantic-model">6.2.3. Semantic Model</a></li>
<li><a href="#jsp-document-validation">6.2.4. JSP Document Validation</a></li>
</ul>
</li>
<li><a href="#syntactic-elements-in-jsp-documents">6.3. Syntactic Elements in JSP Documents</a>
<ul class="sectlevel3">
<li><a href="#Namespaces_Standard_Actions_and_Tag_Libraries">6.3.1. Namespaces, Standard Actions, and Tag Libraries</a></li>
<li><a href="#the-jsproot-element">6.3.2. The jsp:root Element</a></li>
<li><a href="#the-jspoutput-element">6.3.3. The jsp:output Element</a></li>
<li><a href="#the-jspdirective-page-element">6.3.4. The jsp:directive.page Element</a></li>
<li><a href="#the-jspdirective-include-element">6.3.5. The jsp:directive.include Element</a></li>
<li><a href="#additional-directive-elements-in-tag-files">6.3.6. Additional Directive Elements in Tag Files</a></li>
<li><a href="#_Scripting_Elements">6.3.7. Scripting Elements</a></li>
<li><a href="#other-standard-actions-2">6.3.8. Other Standard Actions</a></li>
<li><a href="#template-content">6.3.9. Template Content</a></li>
<li><a href="#dynamic-template-content">6.3.10. Dynamic Template Content</a></li>
</ul>
</li>
<li><a href="#examples-of-jsp-documents">6.4. Examples of JSP Documents</a>
<ul class="sectlevel3">
<li><a href="#example-a-simple-jsp-document">6.4.1. Example: A Simple JSP Document</a></li>
<li><a href="#example-generating-namespace-aware-documents">6.4.2. Example: Generating Namespace-aware Documents</a></li>
<li><a href="#example-generating-non-xml-documents">6.4.3. Example: Generating non-XML documents</a></li>
<li><a href="#example-using-custom-actions-and-tag-files">6.4.4. Example: Using Custom Actions and Tag Files</a></li>
</ul>
</li>
<li><a href="#possible-future-directions-for-jsp-documents">6.5. Possible Future Directions for JSP documents</a>
<ul class="sectlevel3">
<li><a href="#generating-xml-content-natively">6.5.1. Generating XML Content Natively</a></li>
<li><a href="#schema-and-xinclude-support">6.5.2. Schema and XInclude Support</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tag-extensions">7. Tag Extensions</a>
<ul class="sectlevel2">
<li><a href="#introduction">7.1. Introduction</a>
<ul class="sectlevel3">
<li><a href="#goals">7.1.1. Goals</a></li>
<li><a href="#_Overview">7.1.2. Overview</a></li>
<li><a href="#classic-tag-handlers">7.1.3. Classic Tag Handlers</a></li>
<li><a href="#simple-examples-of-classic-tag-handlers">7.1.4. Simple Examples of Classic Tag Handlers</a></li>
<li><a href="#simple-tag-handlers">7.1.5. Simple Tag Handlers</a></li>
<li><a href="#jsp-fragments">7.1.6. JSP Fragments</a></li>
<li><a href="#simple-examples-of-simple-tag-handlers">7.1.7. Simple Examples of Simple Tag Handlers</a></li>
<li><a href="#attributes-with-dynamic-names">7.1.8. Attributes With Dynamic Names</a></li>
<li><a href="#event-listeners">7.1.9. Event Listeners</a></li>
<li><a href="#jspid-attribute">7.1.10. JspId Attribute</a></li>
<li><a href="#resource-injection">7.1.11. Resource Injection</a></li>
</ul>
</li>
<li><a href="#tag-libraries">7.2. Tag Libraries</a>
<ul class="sectlevel3">
<li><a href="#packaged-tag-libraries">7.2.1. Packaged Tag Libraries</a></li>
<li><a href="#location-of-java-classes">7.2.2. Location of Java Classes</a></li>
<li><a href="#tag-library-directive">7.2.3. Tag Library Directive</a></li>
</ul>
</li>
<li><a href="#the-tag-library-descriptor">7.3. The Tag Library Descriptor</a>
<ul class="sectlevel3">
<li><a href="#identifying-tag-library-descriptors">7.3.1. Identifying Tag Library Descriptors</a></li>
<li><a href="#tld-resource-path">7.3.2. TLD Resource Path</a></li>
<li><a href="#taglib-map-in-web-xml">7.3.3. Taglib Map in web.xml</a></li>
<li><a href="#implicit-map-entries-from-tlds">7.3.4. Implicit Map Entries from TLDs</a></li>
<li><a href="#implicit-map-entries-from-the-container">7.3.5. Implicit Map Entries from the Container</a></li>
<li><a href="#determining-the-tld-resource-path">7.3.6. Determining the TLD Resource Path</a></li>
<li><a href="#translation-time-class-loader">7.3.7. Translation-Time Class Loader</a></li>
<li><a href="#assembling-a-web-application">7.3.8. Assembling a Web Application</a></li>
<li><a href="#well-known-uris">7.3.9. Well-Known URIs</a></li>
<li><a href="#tag-and-tag-library-extension-elements">7.3.10. Tag and Tag Library Extension Elements</a></li>
</ul>
</li>
<li><a href="#validation">7.4. Validation</a>
<ul class="sectlevel3">
<li><a href="#translation-time-mechanisms">7.4.1. Translation-Time Mechanisms</a></li>
<li><a href="#request-time-errors">7.4.2. Request-Time Errors</a></li>
</ul>
</li>
<li><a href="#conventions-and-other-issues">7.5. Conventions and Other Issues</a>
<ul class="sectlevel3">
<li><a href="#how-to-define-new-implicit-objects">7.5.1. How to Define New Implicit Objects</a></li>
<li><a href="#access-to-vendor-specific-information">7.5.2. Access to Vendor-Specific information</a></li>
<li><a href="#customizing-a-tag-library">7.5.3. Customizing a Tag Library</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tag-files">8. Tag Files</a>
<ul class="sectlevel2">
<li><a href="#overview-2">8.1. Overview</a></li>
<li><a href="#syntax-of-tag-files">8.2. Syntax of Tag Files</a></li>
<li><a href="#semantics-of-tag-files">8.3. Semantics of Tag Files</a></li>
<li><a href="#packaging-tag-files">8.4. Packaging Tag Files</a>
<ul class="sectlevel3">
<li><a href="#location-of-tag-files">8.4.1. Location of Tag Files</a></li>
<li><a href="#packaging-in-a-jar">8.4.2. Packaging in a JAR</a></li>
<li><a href="#packaging-directly-in-a-web-application">8.4.3. Packaging Directly in a Web Application</a></li>
<li><a href="#packaging-as-precompiled-tag-handlers">8.4.4. Packaging as Precompiled Tag Handlers</a></li>
</ul>
</li>
<li><a href="#tag-file-directives">8.5. Tag File Directives</a>
<ul class="sectlevel3">
<li><a href="#the-tag-directive">8.5.1. The tag Directive</a></li>
<li><a href="#the-attribute-directive">8.5.2. The attribute Directive</a></li>
<li><a href="#the-variable-directive">8.5.3. The variable Directive</a></li>
</ul>
</li>
<li><a href="#tag-files-in-xml-syntax">8.6. Tag Files in XML Syntax</a></li>
<li><a href="#xml-view-of-a-tag-file">8.7. XML View of a Tag File</a></li>
<li><a href="#implicit-objects-2">8.8. Implicit Objects</a></li>
<li><a href="#variable-synchronization">8.9. Variable Synchronization</a>
<ul class="sectlevel3">
<li><a href="#synchronization-points">8.9.1. Synchronization Points</a></li>
<li><a href="#synchronization-examples">8.9.2. Synchronization Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#scripting">9. Scripting</a>
<ul class="sectlevel2">
<li><a href="#overall-structure">9.1. Overall Structure</a>
<ul class="sectlevel3">
<li><a href="#valid-jsp-page">9.1.1. Valid JSP Page</a></li>
<li><a href="#reserved-names">9.1.2. Reserved Names</a></li>
<li><a href="#implementation-flexibility">9.1.3. Implementation Flexibility</a></li>
</ul>
</li>
<li><a href="#declarations-section">9.2. Declarations Section</a></li>
<li><a href="#initialization-section">9.3. Initialization Section</a></li>
<li><a href="#main-section">9.4. Main Section</a>
<ul class="sectlevel3">
<li><a href="#template-data">9.4.1. Template Data</a></li>
<li><a href="#scriptlets-2">9.4.2. Scriptlets</a></li>
<li><a href="#expressions-2">9.4.3. Expressions</a></li>
<li><a href="#actions-2">9.4.4. Actions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#xml-view">10. XML View</a>
<ul class="sectlevel2">
<li><a href="#xml-view-of-a-jsp-document-jsp-page-or-tag-file">10.1. XML View of a JSP Document, JSP Page or Tag File</a>
<ul class="sectlevel3">
<li><a href="#jsp-documents-and-tag-files-in-xml-syntax">10.1.1. JSP Documents and Tag Files in XML Syntax</a></li>
<li><a href="#jsp-pages-or-tag-files-in-jsp-syntax">10.1.2. JSP Pages or Tag Files in JSP Syntax</a></li>
<li><a href="#jsp-comments-2">10.1.3. JSP Comments</a></li>
<li><a href="#the-page-directive-2">10.1.4. The page Directive</a></li>
<li><a href="#the-taglib-directive-2">10.1.5. The taglib Directive</a></li>
<li><a href="#the-include-directive-2">10.1.6. The include Directive</a></li>
<li><a href="#declarations-2">10.1.7. Declarations</a></li>
<li><a href="#scriptlets-3">10.1.8. Scriptlets</a></li>
<li><a href="#expressions-3">10.1.9. Expressions</a></li>
<li><a href="#standard-and-custom-actions">10.1.10. Standard and Custom Actions</a></li>
<li><a href="#request-time-attribute-expressions">10.1.11. Request-Time Attribute Expressions</a></li>
<li><a href="#template-text-and-xml-elements">10.1.12. Template Text and XML Elements</a></li>
<li><a href="#the-jspid-attribute">10.1.13. The jsp:id Attribute</a></li>
<li><a href="#_The_tag_Directive">10.1.14. The tag Directive</a></li>
<li><a href="#_The_attribute_Directive">10.1.15. The attribute Directive</a></li>
<li><a href="#_The_variable_Directive">10.1.16. The variable Directive</a></li>
</ul>
</li>
<li><a href="#validating-an-xml-view-of-a-jsp-page">10.2. Validating an XML View of a JSP page</a></li>
<li><a href="#examples">10.3. Examples</a>
<ul class="sectlevel3">
<li><a href="#a-jsp-document">10.3.1. A JSP Document</a></li>
<li><a href="#a-jsp-page-and-its-corresponding-xml-view">10.3.2. A JSP Page and its Corresponding XML View</a></li>
<li><a href="#clearing-out-default-namespace-on-include">10.3.3. Clearing Out Default Namespace on Include</a></li>
<li><a href="#taglib-direcive-adds-to-global-namespace">10.3.4. Taglib Direcive Adds to Global Namespace</a></li>
<li><a href="#collective-application-of-inclusion-semantics">10.3.5. Collective Application of Inclusion Semantics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#part-ii">Part II</a>
<ul class="sectlevel1">
<li><a href="#jsp-container">11. JSP Container</a>
<ul class="sectlevel2">
<li><a href="#jsp-page-model">11.1. JSP Page Model</a>
<ul class="sectlevel3">
<li><a href="#protocol-seen-by-the-web-server">11.1.1. Protocol Seen by the Web Server</a></li>
</ul>
</li>
<li><a href="#jsp-page-implementation-class">11.2. JSP Page Implementation Class</a>
<ul class="sectlevel3">
<li><a href="#api-contracts">11.2.1. API Contracts</a></li>
<li><a href="#request-and-response-parameters">11.2.2. Request and Response Parameters</a></li>
<li><a href="#omitting-the-extends-attribute">11.2.3. Omitting the extends Attribute</a></li>
<li><a href="#using-the-extends-attribute">11.2.4. Using the extends Attribute</a></li>
</ul>
</li>
<li><a href="#buffering">11.3. Buffering</a></li>
<li><a href="#precompilation">11.4. Precompilation</a>
<ul class="sectlevel3">
<li><a href="#request-parameter-names">11.4.1. Request Parameter Names</a></li>
<li><a href="#precompilation-protocol">11.4.2. Precompilation Protocol</a></li>
</ul>
</li>
<li><a href="#debugging-requirements">11.5. Debugging Requirements</a>
<ul class="sectlevel3">
<li><a href="#line-number-mapping-guidelines">11.5.1. Line Number Mapping Guidelines</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#part-iii">Part III</a>
<ul class="sectlevel1">
<li><a href="#packaging-jsp-pages">Appendix A: Packaging JSP Pages</a>
<ul class="sectlevel2">
<li><a href="#a-very-simple-jsp-page">A.1. A Very Simple JSP Page</a></li>
<li><a href="#the-jsp-page-packaged-as-source-in-a-war-file">A.2. The JSP Page Packaged as Source in a WAR File</a></li>
<li><a href="#the-servlet-for-the-compiled-jsp-page">A.3. The Servlet for the Compiled JSP Page</a></li>
<li><a href="#the-web-application-descriptor">A.4. The Web Application Descriptor</a></li>
<li><a href="#the-war-for-the-compiled-jsp-page">A.5. The WAR for the Compiled JSP Page</a></li>
</ul>
</li>
<li><a href="#page-encoding-detection">Appendix B: Page Encoding Detection</a>
<ul class="sectlevel2">
<li><a href="#detection-algorithm-for-jsp-pages">B.1. Detection Algorithm for JSP pages</a></li>
<li><a href="#detection-algorithm-for-tag-files">B.2. Detection Algorithm for Tag Files</a></li>
</ul>
</li>
<li><a href="#changes">Appendix C: Changes</a>
<ul class="sectlevel2">
<li><a href="#changes-between-jsp-4-1-and-jsp-4-0">C.1. Changes between JSP 4.1 and JSP 4.0</a></li>
<li><a href="#changes-between-jsp-4-0-and-jsp-3-1">C.2. Changes between JSP 4.0 and JSP 3.1</a></li>
<li><a href="#changes-between-jsp-3-1-and-jsp-3-0">C.3. Changes between JSP 3.1 and JSP 3.0</a></li>
<li><a href="#changes-between-jsp-3-0-and-jsr-245">C.4. Changes between JSP 3.0 and JSR 245</a></li>
</ul>
</li>
<li><a href="#glossary">Appendix D: Glossary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta Server Pages

Version: 4.1-M1

Status: DRAFT

Release: October 16, 2025</pre>
</div>
</div>
<div class="paragraph">
<p>Copyright (c) 2018, 2025 Eclipse Foundation.</p>
</div>
</div>
</div>
<h1 id="eclipse-foundation-specification-license-v1-1" class="sect0"><a class="anchor" href="#eclipse-foundation-specification-license-v1-1"></a>Eclipse Foundation Specification License - v1.1</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>By using and/or copying this document, or the Eclipse Foundation document from which this statement is linked or incorporated by reference, you (the licensee) agree that you have read, understood, and will comply with the following terms and conditions:</p>
</div>
<div class="paragraph">
<p>Permission to copy, and distribute the contents of this document, or the Eclipse Foundation document from which this statement is linked, in any medium for any purpose and without fee or royalty is hereby granted, provided that you include the following on ALL copies of the document, or portions thereof, that you use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>link or URL to the original Eclipse Foundation document.</p>
</li>
<li>
<p>All existing copyright notices, or if one does not exist, a notice (hypertext is preferred, but a textual representation is permitted) of the form: "Copyright (c) [$date-of-document] Eclipse Foundation AISBL <a href="#url to this license">[url to this license]</a> "</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inclusion of the full text of this NOTICE must be provided. We request that authorship attribution be provided in any software, documents, or other items or products that you create pursuant to the implementation of the contents of this document, or any portion thereof.</p>
</div>
<div class="paragraph">
<p>No right to create modifications or derivatives of Eclipse Foundation documents is granted pursuant to this license, except anyone may prepare and distribute derivative works and portions of this document in software that implements the specification, in supporting materials accompanying such software, and in documentation of such software, PROVIDED that all such works include the notice below. HOWEVER, the publication of derivative works of this document for use as a technical specification is expressly prohibited.</p>
</div>
<div class="paragraph">
<p>The notice is:</p>
</div>
<div class="paragraph">
<p>"Copyright (c) [$date-of-document] Eclipse Foundation AISBL. This software or document includes material copied from or derived from [title and URI of the Eclipse Foundation specification document]."</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disclaimers"><a class="anchor" href="#disclaimers"></a>Disclaimers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>THIS DOCUMENT IS PROVIDED "AS IS," AND TO THE EXTENT PERMITTED BY APPLICABLE LAW THE COPYRIGHT HOLDERS AND THE ECLIPSE FOUNDATION AISBL MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE DOCUMENT ARE SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF SUCH CONTENTS WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.</p>
</div>
<div class="paragraph">
<p>TO THE EXTENT PERMITTED BY APPLICABLE LAW THE COPYRIGHT HOLDERS AND THE ECLIPSE FOUNDATION AISBL WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE CONTENTS THEREOF.</p>
</div>
<div class="paragraph">
<p>The name and trademarks of the copyright holders or the Eclipse Foundation AISBL may NOT be used in advertising or publicity pertaining to this document or its contents without specific, written prior permission. Title to copyright in this document will at all times remain with copyright holders.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jakarta-server-pages-specification-version-4-1"><a class="anchor" href="#jakarta-server-pages-specification-version-4-1"></a>Jakarta Server Pages Specification, Version 4.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2013, 2025 Oracle and/or its affiliates and others.
All rights reserved.</p>
</div>
<div class="paragraph">
<p>Eclipse is a registered trademark of the Eclipse Foundation. Jakarta
is a trademark of the Eclipse Foundation. Oracle and Java are
registered trademarks of Oracle and/or its affiliates. Other names
may be trademarks of their respective owners.</p>
</div>
<div class="paragraph">
<p>The Jakarta Server Pages Team - October 16, 2025</p>
</div>
<div class="paragraph">
<p>Comments to: <a href="mailto:jsp-dev@eclipse.org">jsp-dev@eclipse.org</a></p>
</div>
<div class="sect2">
<h3 id="preface"><a class="anchor" href="#preface"></a>Preface</h3>
<div class="paragraph">
<p>This is the Jakarta Server Pages specification
version 4.1, developed by the Jakarta Server Pages Team under the Eclipse
Foundation Specification Process. References in this document to JSP refer
to Jakarta Server Pages unless otherwise noted.</p>
</div>
<div class="sect3">
<h4 id="who-should-read-this-document"><a class="anchor" href="#who-should-read-this-document"></a>Who Should Read This Document</h4>
<div class="paragraph">
<p>This document is the authoritative JSP 4.1
specification. It is intended to provide requirements for
implementations of JSP page processing, and support by web containers in
web servers and application servers. As an authoritative document, it
covers material pertaining to a wide audience, including <em>Page Authors</em>,
<em>Tag Library Developers</em>, <em>Deployers</em>, <em>Container Vendors</em>, and
<em>Tool Vendors</em>.</p>
</div>
<div class="paragraph">
<p>This document is not intended to be a user’s
guide. We expect other documents will be created that will cater to
different readerships.</p>
</div>
</div>
<div class="sect3">
<h4 id="organization-of-this-document"><a class="anchor" href="#organization-of-this-document"></a>Organization of This Document</h4>
<div class="paragraph">
<p>This document comprises of a number of
Chapters and Appendices that are organized into 3 parts. In addition,
the document contains a <a href="#preface">Preface</a> (this section) and an <a href="#overview">Overview</a>.</p>
</div>
<div class="paragraph">
<p><a href="#part-i">Part I</a>
contains several chapters intended for all JSP Page Authors. These
chapters describe the general structure of the language, including the
expression language, fragments, and scripting.</p>
</div>
<div class="paragraph">
<p><a href="#part-ii">Part II</a>
contains detailed chapters on the JSP container engine and API in full
detail. The information in this part is intended for advanced JSP users.</p>
</div>
<div class="paragraph">
<p>Finally, <a href="#part-iii">Part III</a> contains all the appendices.</p>
</div>
</div>
<div class="sect3">
<h4 id="historical-note"><a class="anchor" href="#historical-note"></a>Historical Note</h4>
<div class="paragraph">
<p>Prior to version 3.0, this specification was developed under the Java
Community Process as part of JSR 245.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>Overview</h3>
<div class="sect3">
<h4 id="the-jakarta-server-pages-technology"><a class="anchor" href="#the-jakarta-server-pages-technology"></a>The Jakarta Server Pages Technology</h4>
<div class="paragraph">
<p>Jakarta Server Pages (JSP) is the Jakarta EE technology for building
applications for generating dynamic web content, such as HTML, DHTML,
XHTML, and XML. JSP technology enables the easy authoring of web pages
that create dynamic content with maximum power and flexibility.</p>
</div>
<div class="sect4">
<h5 id="general-concepts"><a class="anchor" href="#general-concepts"></a>General Concepts</h5>
<div class="paragraph">
<p>JSP technology provides the means for textual
specification of the creation of a dynamic <em>response</em> to a <em>request</em>. The
technology builds on the following concepts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Template Data</em><br>
A substantial portion of most dynamic content
is fixed or <em>template</em> content. Text or XML fragments are typical
template data. JSP technology supports natural manipulation of template
data.</p>
</li>
<li>
<p><em>Addition of Dynamic Data</em><br>
JSP technology provides a simple, yet
powerful, way to add dynamic data to template data.</p>
</li>
<li>
<p><em>Encapsulation of Functionality</em><br>
JSP technology provides two related
mechanisms for the encapsulation of functionality: JavaBeans™ component
architecture, and tag libraries delivering custom actions, functions,
listener classes, and validation.</p>
</li>
<li>
<p><em>Good Tool Support</em><br>
Good tool support leads to significantly
improved productivity. Accordingly, JSP technology has features that
enable the creation of good authoring tools.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Careful development of these concepts yields a flexible and powerful
server-side technology.</p>
</div>
</div>
<div class="sect4">
<h5 id="benefits-of-jakarta-server-pages-technology"><a class="anchor" href="#benefits-of-jakarta-server-pages-technology"></a>Benefits of Jakarta Server Pages Technology</h5>
<div class="paragraph">
<p>JSP technology offers the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Write Once, Run Anywhere properties</em><br>
JSP technology is platform independent in its
dynamic web pages, its web servers, and its underlying server
components. JSP pages may be authored on any platform, run on any web
server or web enabled application server, and accessed from any web
browser. Server components can be built on any platform and run on any
server.</p>
</li>
<li>
<p><em>High quality tool support</em><br>
Platform independence allows the JSP user to
choose best-of-breed tools. Additionally, an explicit goal of the
Jakarta Server Pages design is to enable the creation of high quality
portable tools.</p>
</li>
<li>
<p><em>Separation of Roles</em><br>
JSP supports the separation of developer and
author roles. <em>Developers</em> write components that interact with server-side
objects. <em>Authors</em> put static data and dynamic content together to create
presentations suited for their intended audience.<br>
Each group may do their job without knowing
the job of the other. Each role emphasizes different abilities and,
although these abilities may be present in the same individual, they
most commonly will not be. Separation allows a natural division of
labor.<br>
A subset of the developer community may be
engaged in developing reusable components intended to be used by
authors.</p>
</li>
<li>
<p><em>Reuse of components and tag libraries</em><br>
Jakarta Server Pages technology emphasizes the
use of reusable components such as JavaBeans components, Enterprise
JavaBeans™ components, and tag libraries. These components can be used
with interactive tools for component development and page composition,
yielding considerable development time savings. In addition, they
provide the cross-platform power and flexibility of the Java programming
language or other scripting languages.</p>
</li>
<li>
<p><em>Separation of dynamic and static content</em><br>
Jakarta Server Pages technology enables the
separation of static content in a template from dynamic content that is
inserted into the static template. This greatly simplifies the creation
of content. The separation is supported by beans specifically designed
for the interaction with server-side objects, and by the tag extension
mechanism.</p>
</li>
<li>
<p><em>Support for actions, expressions, and scripting</em><br>
Jakarta Server Pages technology supports
scripting elements as well as actions. Actions encapsulate useful
functionality in a convenient form that can be manipulated by tools.
Expressions are used to access data. Scripts can be used to glue
together this functionality in a per-page manner.<br>
Expressions in the EL
directly express page author concepts like properties in beans and
provide more controlled access to the Web Application data. Functions
defined through the tag library mechanism can be accessed in the EL.<br>
Page authors can write actions using the JSP
technology directly. This greatly increases the ease with which action
abstractions can be created.</p>
</li>
<li>
<p><em>Web access layer for N-tier enterprise
application architecture(s)</em><br>
Jakarta Server Pages technology is an integral
part of Jakarta EE. The Jakarta EE platform brings Java technology to
enterprise computing. One can now develop powerful middle-tier server
applications that include a web site using Jakarta Server Pages technology
as a front end to Enterprise JavaBeans components in a Jakarta EE compliant
environment.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="basic-concepts"><a class="anchor" href="#basic-concepts"></a>Basic Concepts</h4>
<div class="paragraph">
<p>This section introduces basic concepts that
will be defined formally later in the specification.</p>
</div>
<div class="sect4">
<h5 id="what-is-a-jsp-page"><a class="anchor" href="#what-is-a-jsp-page"></a>What Is a JSP Page?</h5>
<div class="paragraph">
<p>A JSP page is a text-based document that
describes how to process a <em>request</em> to create a <em>response</em>. The description
intermixes template data with dynamic actions and leverages the Java
Platform. JSP technology supports a number of different paradigms for
authoring dynamic content. The key features of Jakarta Server Pages are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standard directives</p>
</li>
<li>
<p>Standard actions</p>
</li>
<li>
<p>Scripting elements</p>
</li>
<li>
<p>Tag Extension mechanism</p>
</li>
<li>
<p>Template content</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="web-applications"><a class="anchor" href="#web-applications"></a>Web Applications</h5>
<div class="paragraph">
<p>The concept of a web application is inherited
from the servlet specification. A web application can be composed of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java Runtime Environment(s) running on the
server (required)</p>
</li>
<li>
<p>JSP page(s) that handle requests and
generate dynamic content</p>
</li>
<li>
<p>Servlet(s) that handle requests and
generate dynamic content</p>
</li>
<li>
<p>Server-side JavaBeans components that
encapsulate behavior and state</p>
</li>
<li>
<p>Static HTML, DHTML, XHTML, XML, and similar
pages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Jakarta Server Pages specification inherits
from the servlet specification the concepts of web applications,
servlet contexts, sessions, and requests and responses. See the Jakarta
Servlet 6.2 specification for more details.</p>
</div>
</div>
<div class="sect4">
<h5 id="components-and-containers"><a class="anchor" href="#components-and-containers"></a>Components and Containers</h5>
<div class="paragraph">
<p>JSP pages and servlet classes are
collectively referred to as <em>web components</em>. JSP pages are delivered to a
<em>container</em> that provides the services indicated in the <em>JSP Component
Contract</em>.</p>
</div>
<div class="paragraph">
<p>The separation of components from containers
allows the reuse of components, with quality-of-service features
provided by the container.</p>
</div>
</div>
<div class="sect4">
<h5 id="translation-and-execution-steps"><a class="anchor" href="#translation-and-execution-steps"></a>Translation and Execution Steps</h5>
<div class="paragraph">
<p>JSP pages are textual components. They go
through two phases: a <em>translation</em> phase, and a <em>request</em> phase.
Translation is performed once per page. The request phase is performed once per
request.</p>
</div>
<div class="paragraph">
<p>The JSP page is translated to create a
servlet class, the JSP page implementation class, that is instantiated
at request time. The instantiated JSP page object handles requests and
creates responses.</p>
</div>
<div class="paragraph">
<p>JSP pages may be translated prior to their
use, providing the web application with a servlet class that can serve
as the textual representation of the JSP page.</p>
</div>
<div class="paragraph">
<p>The translation may also be done by the JSP
container at deployment time, or on-demand as the requests reach an
untranslated JSP page.</p>
</div>
</div>
<div class="sect4">
<h5 id="deployment-descriptor-and-global-information"><a class="anchor" href="#deployment-descriptor-and-global-information"></a>Deployment Descriptor and Global Information</h5>
<div class="paragraph">
<p>The JSP pages delivered in a web application
may require some JSP configuration information. This information is
delivered through JSP-specific elements in the <code>web.xml</code> deployment
descriptor, rooted on the <code>&lt;jsp-config&gt;</code> element. Configuration
information includes <code>&lt;taglib&gt;</code> elements for mapping of tag libraries and
<code>&lt;jsp-property-group&gt;</code> elements used to provide properties of
collections of JSP files. The properties that can be indicated this way
include page encoding information, EL evaluation activation, automatic
includes before and after pages, and whether scripting is enabled in a
given page.</p>
</div>
</div>
<div class="sect4">
<h5 id="role-in-jakarta-ee"><a class="anchor" href="#role-in-jakarta-ee"></a>Role in Jakarta EE</h5>
<div class="paragraph">
<p>With a few exceptions, integration of JSP pages within Jakarta EE is inherited
from the Servlet specification since translation turns JSPs into servlets.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="users-of-jakarta-server-pages"><a class="anchor" href="#users-of-jakarta-server-pages"></a>Users of Jakarta Server Pages</h4>
<div class="paragraph">
<p>There are six classes of users that interact
with Jakarta Server Pages technology. This section describes each class of
user, enumerates the technologies each must be familiar with, and
identifies which sections of this specification are most relevant to
each user class. The intent is to ensure that Jakarta Server Pages remains a
practical and easy-to-use technology for each class of user, even as the
language continues to grow.</p>
</div>
<div class="sect4">
<h5 id="page-authors"><a class="anchor" href="#page-authors"></a>Page Authors</h5>
<div class="paragraph">
<p>Page Authors are application component
providers that use Jakarta Server Pages to develop the presentation
component of a web application. It is expected that they will not make
use of the scripting capabilities of Jakarta Server Pages, but rather limit
their use to standard and custom actions. Therefore, it is assumed that
they know the target language, such as HTML or XML, and basic XML
concepts, but they need not know Java at all.</p>
</div>
<div class="paragraph">
<p>The following sections are most relevant to
this class of user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#core-syntax-and-semantics">Chapter 1, <em>Core Syntax and Semantics</em></a>, except for <a href="#scripting-elements">Section 1.12, &#8220;Scripting Elements&#8221;</a> and
<a href="#tag-attribute-interpretation-semantics">Section 1.14, &#8220;Tag Attribute Interpretation Semantics&#8221;</a>, which both talk about scripting</p>
</li>
<li>
<p><a href="#expression-language">Chapter 2, <em>Expression Language</em></a></p>
</li>
<li>
<p><a href="#jsp-configuration">Chapter 3, <em>JSP Configuration</em></a></p>
</li>
<li>
<p><a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a></p>
</li>
<li>
<p><a href="#standard-actions">Chapter 5, <em>Standard Actions</em></a></p>
</li>
<li>
<p><a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a>, except for sections that discuss declarations, scriptlets, expressions, and request-time attributes</p>
</li>
<li>
<p><a href="#goals">Section 7.1.1, &#8220;Goals&#8221;</a> and <a href="#overview">Overview</a> of <a href="#tag-extensions">Chapter 7, <em>Tag Extensions</em></a></p>
</li>
<li>
<p><a href="#tag-files">Chapter 8, <em>Tag Files</em></a></p>
</li>
<li>
<p>Appendices <a href="#packaging-jsp-pages">Appendix A, <em>Packaging JSP Pages</em></a>, <a href="#changes">Appendix C, <em>Changes</em></a>, and <a href="#glossary">Appendix D, <em>Glossary</em></a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="advanced-page-authors"><a class="anchor" href="#advanced-page-authors"></a>Advanced Page Authors</h5>
<div class="paragraph">
<p>Like Page Authors, Advanced Page Authors are
also application component providers that use Jakarta Server Pages to
develop the presentation component of a web application. These authors
have a better understanding of XML and also know Java. Though they are
recommended to avoid it where possible, these authors do have scripting
at their disposal and should be able to read and understand JSPs that
make use of scripting.</p>
</div>
<div class="paragraph">
<p>The following sections are most relevant to
this class of user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Chapters <a href="#core-syntax-and-semantics">Chapter 1, <em>Core Syntax and Semantics</em></a>, <a href="#expression-language">Chapter 2, <em>Expression Language</em></a>, <a href="#jsp-configuration">Chapter 3, <em>JSP Configuration</em></a>, <a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a> and <a href="#standard-actions">Chapter 5, <em>Standard Actions</em></a></p>
</li>
<li>
<p><a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a></p>
</li>
<li>
<p><a href="#valid-jsp-page">Section 9.1.1, &#8220;Valid JSP Page&#8221;</a> and <a href="#reserved-names">Section 9.1.2, &#8220;Reserved Names&#8221;</a> of <a href="#scripting">Chapter 9, <em>Scripting</em></a></p>
</li>
<li>
<p><a href="#goals">Section 7.1.1, &#8220;Goals&#8221;</a> and <a href="#_Overview">Section 7.1.2, &#8220;Overview&#8221;</a> of <a href="#tag-extensions">Chapter 7, <em>Tag Extensions</em></a></p>
</li>
<li>
<p><a href="#tag-files">Chapter 8, <em>Tag Files</em></a></p>
</li>
<li>
<p><a href="#precompilation">Section 11.4, &#8220;Precompilation&#8221;</a> of <a href="#jsp-container">Chapter 11, <em>JSP Container</em></a></p>
</li>
<li>
<p>Appendices <a href="#packaging-jsp-pages">Appendix A, <em>Packaging JSP Pages</em></a>, <a href="#changes">Appendix C, <em>Changes</em></a>, and <a href="#glossary">Appendix D, <em>Glossary</em></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Advanced page authors may also wish to look at the Javadoc for the
<code>jakarta.servlet.jsp</code> package and the XML schema for the JSP 4.1
deployment descriptor.</p>
</div>
</div>
<div class="sect4">
<h5 id="tag-library-developers"><a class="anchor" href="#tag-library-developers"></a>Tag Library Developers</h5>
<div class="paragraph">
<p>Tag Library Developers are application
component providers who write tag libraries that provide increased
functionality to Page Authors and Advanced Page Authors. They have an
advanced understanding of the target language, XML, and Java.</p>
</div>
<div class="paragraph">
<p>The following sections are most relevant to
this class of user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Chapters <a href="#core-syntax-and-semantics">Chapter 1, <em>Core Syntax and Semantics</em></a>, <a href="#expression-language">Chapter 2, <em>Expression Language</em></a>, <a href="#jsp-configuration">Chapter 3, <em>JSP Configuration</em></a>, <a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a> and
<a href="#standard-actions">Chapter 5, <em>Standard Actions</em></a></p>
</li>
<li>
<p><a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a></p>
</li>
<li>
<p><a href="#valid-jsp-page">Section 9.1.1, &#8220;Valid JSP Page&#8221;</a> and <a href="#reserved-names">Section 9.1.2, &#8220;Reserved Names&#8221;</a> of <a href="#scripting">Chapter 9, <em>Scripting</em></a></p>
</li>
<li>
<p><a href="#tag-extensions">Chapter 7, <em>Tag Extensions</em></a></p>
</li>
<li>
<p><a href="#tag-files">Chapter 8, <em>Tag Files</em></a></p>
</li>
<li>
<p><a href="#precompilation">Section 11.4, &#8220;Precompilation&#8221;</a> of <a href="#jsp-container">Chapter 11, <em>JSP Container</em></a></p>
</li>
<li>
<p>All Appendices</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tag library developers may also wish to look at the Javadoc for the
<code>jakarta.servlet.jsp</code> and <code>jakarta.servlet.jsp.tagext</code> packages.</p>
</div>
</div>
<div class="sect4">
<h5 id="deployers"><a class="anchor" href="#deployers"></a>Deployers</h5>
<div class="paragraph">
<p>A deployer is an expert in a specific
operational environment who is responsible for configuring a web
application for, and deploying the web application to, that environment.
The deployer does not need to understand the target language or Java,
but must have an understanding of XML or use tools that provide the
ability to read deployment descriptors.</p>
</div>
<div class="paragraph">
<p>The following sections are most relevant to
this class of user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#what-is-a-jsp-page-2">Section 1.1, &#8220;What Is a JSP Page&#8221;</a> and <a href="#Web_Applications">Section 1.2, &#8220;Web Applications&#8221;</a> of
<a href="#core-syntax-and-semantics">Chapter 1, <em>Core Syntax and Semantics</em></a></p>
</li>
<li>
<p><a href="#jsp-configuration">Chapter 3, <em>JSP Configuration</em></a></p>
</li>
<li>
<p><a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a></p>
</li>
<li>
<p><a href="#jsp-container">Chapter 11, <em>JSP Container</em></a></p>
</li>
<li>
<p>All Appendices</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="container-developers-and-tool-vendors"><a class="anchor" href="#container-developers-and-tool-vendors"></a>Container Developers and Tool Vendors</h5>
<div class="paragraph">
<p>Container Developers develop containers that
host Jakarta Server Pages. Tool Vendors write development tools to assist
Page Authors, Advanced Page Authors, Tag Library Developers, and
Deployers. Both Container Developers and Tool Vendors must know XML and
Java, and must know all the requirements and technical details of
Jakarta Server Pages. Therefore, this entire specification is relevant to
both classes of user.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="part-i" class="sect0"><a class="anchor" href="#part-i"></a>Part I</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>The next chapters form the core of the
JSP specification. These chapters provide information for Page authors,
Tag Library developers, deployers and Container and Tool vendors.</p>
</div>
<div class="paragraph">
<p>The chapters of this part are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Core Syntax and Semantics</p>
</li>
<li>
<p>Expression Language</p>
</li>
<li>
<p>Configuration Information</p>
</li>
<li>
<p>Internationalization Issues</p>
</li>
<li>
<p>Standard Actions</p>
</li>
<li>
<p>JSP Documents</p>
</li>
<li>
<p>Tag Extensions</p>
</li>
<li>
<p>Tag Files</p>
</li>
<li>
<p>Scripting</p>
</li>
<li>
<p>XML Views</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="core-syntax-and-semantics"><a class="anchor" href="#core-syntax-and-semantics"></a>1. Core Syntax and Semantics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the core syntax
and semantics for the Jakarta Server Pages 4.1 specification (JSP 4.1).</p>
</div>
<div class="sect2">
<h3 id="what-is-a-jsp-page-2"><a class="anchor" href="#what-is-a-jsp-page-2"></a>1.1. What Is a JSP Page</h3>
<div class="paragraph">
<p>A JSP page is a textual document that
describes how to create a response object from a request object for a
given protocol. The processing of the JSP page may involve creating
and/or using other objects.</p>
</div>
<div class="paragraph">
<p>A JSP page defines a JSP page implementation
class that implements the semantics of the JSP page. This class
implements the <code>jakarta.servlet.Servlet</code> interface (see
<a href="#jsp-container">Chapter 11, <em>JSP Container</em></a> for details). At request time a
request intended for the JSP page is delivered to the JSP page
implementation object for processing.</p>
</div>
<div class="paragraph">
<p>HTTP is the default protocol for requests and
responses. Additional request/response protocols may be supported by JSP
containers. The default <code>request</code> and <code>response</code> objects are of type
<code>HttpServletRequest</code> and <code>HttpServletResponse</code> respectively.</p>
</div>
<div class="sect3">
<h4 id="web-containers-and-web-components"><a class="anchor" href="#web-containers-and-web-components"></a>1.1.1. Web Containers and Web Components</h4>
<div class="paragraph">
<p>A JSP container is a system-level entity that
provides life-cycle management and runtime support for JSP pages and
servlet components. Requests sent to a JSP page are delivered by the JSP
container to the appropriate JSP page implementation object. The term
web container is synonymous with JSP container.</p>
</div>
<div class="paragraph">
<p>A web component is either a servlet or a JSP
page. The <code>servlet</code> element in a <code>web.xml</code> deployment descriptor is used
to describe both types of web components. JSP page components are
defined implicitly in the deployment descriptor through the use of an
implicit <code>.jsp</code> extension mapping, or explicitly through the use of a
<code>jsp-group</code> element.</p>
</div>
</div>
<div class="sect3">
<h4 id="generating-html"><a class="anchor" href="#generating-html"></a>1.1.2. Generating HTML</h4>
<div class="paragraph">
<p>A traditional application domain of the JSP
technology is HTML content. The JSP specification supports well this use
through a syntax that is friendly to HTML and XML although it is not
HTML-specific; for instance, HTML comments are treated no differently
than other HTML content. The JSP Standard Tag Library has specific
support for HTML though some specific custom actions.</p>
</div>
</div>
<div class="sect3">
<h4 id="generating-xml"><a class="anchor" href="#generating-xml"></a>1.1.3. Generating XML</h4>
<div class="paragraph">
<p>An increasingly important application domain
for JSP technology is dynamic XML content using formats like XHTML, SVG
and the Open Office format, and in applications like content publishing,
data representation and Web Services. The basic JSP machinery (JSP
syntax) can be used to generate XML content, but it is also possible to
tag a JSP page as a JSP document and get additional benefits.</p>
</div>
<div class="paragraph">
<p>A JSP document is an XML document; this means
that a JSP document is a well-formed, structured document and that this
will be validated by the JSP container. Additionally, this structure
will be available to the JSP validation machinery, the
TagLibraryValidators. A JSP document is a namespace-aware XML document,
with namespaces reflecting the structure of both content and custom
actions and with some additional care, a JSP page can reflect quite
accurately the structure of the resulting content. A JSP document can
also use machinery like entity definitions.</p>
</div>
<div class="paragraph">
<p>The JSP 1.2 specification made a stronger
distinction between JSP documents and non-XML JSP pages. For instance
standard actions like &lt;jsp:expression&gt; were only available in JSP
documents. The difference proved to be confusing and distracting and the
distinction was relaxed in JSP 2.0 to facilitate the transition
from the JSP syntax to XML syntax.</p>
</div>
</div>
<div class="sect3">
<h4 id="translation-and-execution-phases"><a class="anchor" href="#translation-and-execution-phases"></a>1.1.4. Translation and Execution Phases</h4>
<div class="paragraph">
<p>A JSP container manages two phases of a JSP
page’s lifecycle. In the translation phase, the container validates the
syntactic correctness of the JSP pages and tag files and determines a
JSP page implementation class that corresponds to the JSP page. In the
execution phase the container manages one or more instances of this
class in response to requests and other events.</p>
</div>
<div class="paragraph">
<p>During the translation phase the container
locates or creates the JSP page implementation class that corresponds to
a given JSP page. This process is determined by the semantics of the JSP
page. The container interprets the standard directives and actions, and
the custom actions referencing tag libraries used in the page. A tag
library may optionally provide a validation method acting on the XML
View of a JSP page, see below, to validate that a JSP page is correctly
using the library.</p>
</div>
<div class="paragraph">
<p>A JSP container has flexibility in the
details of the JSP page implementation class that can be used to address
quality-of-service&#8212;&#8203;most notably performance-- issues.</p>
</div>
<div class="paragraph">
<p>During the execution phase the JSP container
delivers events to the JSP page implementation object. The container is
responsible for instantiating request and response objects and invoking
the appropriate JSP page implementation object. Upon completion of
processing, the response object is received by the container for
communication to the client. The details of the contract between the JSP
page implementation class and the JSP container are described in
<a href="#jsp-container">Chapter 11, <em>JSP Container</em></a>.</p>
</div>
<div class="paragraph">
<p>The translation of a JSP source page into its
implementation class can occur at any time between initial deployment of
the JSP page into the JSP container and the receipt and processing of a
client request for the target JSP page. <a href="#compiling-jsp-pages">Section 1.1.9, &#8220;Compiling JSP Pages&#8221;</a> describes
how to perform the translation phase ahead of deployment.</p>
</div>
</div>
<div class="sect3">
<h4 id="validating-jsp-pages"><a class="anchor" href="#validating-jsp-pages"></a>1.1.5. Validating JSP pages</h4>
<div class="paragraph">
<p>All JSP pages, regardless of whether they are
written in the traditional JSP syntax or the XML syntax of JSP documents,
have an equivalent XML document, the XML view of a JSP page, that is
presented to tag library validators in the translation phase for
validation.</p>
</div>
<div class="paragraph">
<p>The structure of the custom actions in a JSP
page is always exposed in the XML view. This means that a tag library
validator can check that, for instance, some custom actions are only
used within others.</p>
</div>
<div class="paragraph">
<p>The structure of the content used in a JSP
page is exposed in greater or lesser detail depending on whether the XML
syntax or the traditional JSP syntax is used. When using XML syntax a
tag library validator can use that extra structure to, for example,
check that some actions are only used with some content, or within some
content, and, using knowledge of the semantics of the custom actions,
make assertions on the generated dynamic content.</p>
</div>
</div>
<div class="sect3">
<h4 id="events-in-jsp-pages"><a class="anchor" href="#events-in-jsp-pages"></a>1.1.6. Events in JSP Pages</h4>
<div class="paragraph">
<p>A JSP page may indicate how some events are
to be handled.</p>
</div>
<div class="paragraph">
<p>As of JSP 1.2 only <code>init</code> and <code>destroy</code>
events can be described in the JSP page. When the first request is
delivered to a JSP page, a <code>jspInit()</code> method, if present, will be
called to prepare the page. Similarly, a JSP container invokes a JSP’s
<code>jspDestroy()</code> method to reclaim the resources used by the JSP page at
any time when a request is not being serviced. This is the same
life-cycle as for servlets.</p>
</div>
</div>
<div class="sect3">
<h4 id="jsp-configuration-information"><a class="anchor" href="#jsp-configuration-information"></a>1.1.7. JSP Configuration Information</h4>
<div class="paragraph">
<p>JSP pages may be extended with configuration
information that is delivered in the JSP configuration portion of the
<code>web.xml</code> deployment descriptor of the web application. The JSP
configuration information includes interpretation for the tag libraries
used in the JSP files and different property information for groups of
JSP files. The property information includes: page encoding information,
whether the EL evaluation and the scripting machinery is enabled, and
prelude and coda automatic inclusions. The JSP configuration information
can also be used to indicate that some resources in the web application
are JSP files even if they do not conform to the default <code>.jsp</code>
extension, and to modify the default interpretation for <code>.jspx</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="naming-conventions-for-jsp-files"><a class="anchor" href="#naming-conventions-for-jsp-files"></a>1.1.8. Naming Conventions for JSP Files</h4>
<div class="paragraph">
<p>A JSP page is packaged as one or more JSP
files, often in a web application, and delivered to a tool like a JSP
container, a Jakarta EE container, or an IDE. A complete JSP page may be
contained in a single file. In other cases, the top file will include
other files that contain complete JSP pages, or included segments of
pages.</p>
</div>
<div class="paragraph">
<p>It is common for tools to need to
differentiate JSP files from other files. In some cases, the tools also
need to differentiate between top JSP files and included segments. For
example, a segment may not be a legal JSP page and may not compile
properly. Determining the type of file is also very useful from a
documentation and maintenance point of view, as people familiar with the
<code>.c</code> and <code>.h</code> convention in the C language know.</p>
</div>
<div class="paragraph">
<p>By default the extension <code>.jsp</code> means a
top-level JSP file. We recommend, but do not mandate, to differentiate
between top-level JSP files (invoked directly by the client or
dynamically included by another page or servlet) and statically included
segments so that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>.jsp</code> extension is used only for
files corresponding to top level JSP files, forming a JSP page when
processed.</p>
</li>
<li>
<p>Statically included segments use any other
extension. As included segments were called ‘JSP fragments’ in past
versions of this specification, the extension <code>.jspf</code> was offered as a
suggestion. This extension is still suggested for consistency reasons,
despite that they are now called ‘JSP segments’.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JSP documents, that is, JSP pages that are
delivered as XML documents, use the extension <code>.jspx</code> by default.</p>
</div>
<div class="paragraph">
<p>The <code>jsp-property-group</code> element of <code>web.xml</code>
can be used to indicate that some group of files, perhaps not using
either of the extensions above, are JSP pages, and can also be used to
indicate which ones are delivered as XML documents.</p>
</div>
</div>
<div class="sect3">
<h4 id="compiling-jsp-pages"><a class="anchor" href="#compiling-jsp-pages"></a>1.1.9. Compiling JSP Pages</h4>
<div class="paragraph">
<p>A JSP page may be compiled into its
implementation class plus deployment information during development (a
JSP page can also be compiled at deployment time). In this way JSP page
authoring tools and JSP tag libraries may be used for authoring
servlets. The benefits of this approach include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Removal of the start-up lag that occurs
when a container must translate a JSP page upon receipt of the first
request.</p>
</li>
<li>
<p>Reduction of the footprint needed to run a
JSP container, as the Java compiler is not needed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Compilation of a JSP page in the context of a
web application provides resolution of relative URL specifications in
include directives and elsewhere, tag library references, and
translation-time actions used in custom actions.</p>
</div>
<div class="paragraph">
<p>A JSP page can also be compiled at deployment
time.</p>
</div>
<div class="sect4">
<h5 id="jsp-page-packaging"><a class="anchor" href="#jsp-page-packaging"></a>1.1.9.1. JSP Page Packaging</h5>
<div class="paragraph">
<p>When a JSP page implementation class depends
on support classes in addition to the JSP 4.1 and Servlet 6.2 classes,
the support classes are included in the packaged WAR, as defined in the
Servlet 6.2 specification, for portability across JSP containers.</p>
</div>
<div class="paragraph">
<p><a href="#packaging-jsp-pages">Appendix A, <em>Packaging JSP Pages</em></a> contains two examples of JSP pages packaged in
WARs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A JSP page delivered in source form (the
most common case).</p>
</li>
<li>
<p>A JSP page translated into an
implementation class plus deployment information. The deployment
information indicates support classes needed and the mapping between the
original URL path to the JSP page and the URL for the JSP page
implementation class for that page.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="debugging-jsp-pages"><a class="anchor" href="#debugging-jsp-pages"></a>1.1.10. Debugging JSP Pages</h4>
<div class="paragraph">
<p>In the past debugging tools provided by
development environments have lacked a standard format for conveying
source map information allowing the debugger of one vendor to be used
with the JSP container of another. JSP 4.1 containers must
support the Jakarta Debugging Support for Other Languages Specification.
Details can be found in <a href="#debugging-requirements">Section 11.5, &#8220;Debugging Requirements&#8221;</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Web_Applications"><a class="anchor" href="#Web_Applications"></a>1.2. Web Applications</h3>
<div class="paragraph">
<p>A web application is a collection of
resources that are available at designated URLs. A web application is
made up of some of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java runtime environment(s) running in the
server (required)</p>
</li>
<li>
<p>JSP page(s) that handle requests and
generate dynamic content</p>
</li>
<li>
<p>Servlet(s) that handle requests and
generate dynamic content</p>
</li>
<li>
<p>Server-side JavaBeans components that
encapsulate behavior and state</p>
</li>
<li>
<p>Static HTML, DHTML, XHTML, XML and similar
pages.</p>
</li>
<li>
<p>Resource files used by Java classes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Web applications are described in more detail
in the Servlet 6.2 specification.</p>
</div>
<div class="paragraph">
<p>A web application contains a deployment
descriptor <code>web.xml</code> that contains information about the JSP pages,
servlets, and other resources used in the web application. The
deployment descriptor is described in detail in the Servlet 6.2
specification.</p>
</div>
<div class="paragraph">
<p>JSP 4.1 requires that these resources be
implicitly associated with and accessible through a unique
<code>ServletContext</code> instance available as the implicit <code>application</code> object
(see <a href="#objects">Section 1.8, &#8220;Objects&#8221;</a>).</p>
</div>
<div class="paragraph">
<p>The application to which a JSP page belongs
is reflected in the <code>application</code> object, and has impact on the
semantics of the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>include</code> directive (see <a href="#the-include-directive">Section 1.10.3, &#8220;The <code>include</code> Directive&#8221;</a>).</p>
</li>
<li>
<p>The <code>taglib</code> directive (see <a href="#the-taglib-directive">Section 1.10.2, &#8220;The <code>taglib</code> Directive&#8221;</a>).</p>
</li>
<li>
<p>The <code>jsp:include</code> action element (see <a href="#jsp:include">Section 5.4, &#8220;&lt;jsp:include&gt;&#8221;</a>).</p>
</li>
<li>
<p>The <code>jsp:forward</code> action (see<a href="#jsp:forward">Section 5.5, &#8220;&lt;jsp:forward&gt;&#8221;</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JSP 4.1 supports portable packaging and
deployment of web applications through the Servlet 6.2 specification.
The Jakarta Server Pages specification inherits from the servlet
specification the concepts of applications, <code>ServletContexts</code>,
<code>Sessions</code>, <code>Requests</code> and <code>Responses</code>.</p>
</div>
<div class="sect3">
<h4 id="relative-url-specifications"><a class="anchor" href="#relative-url-specifications"></a>1.2.1. Relative URL Specifications</h4>
<div class="paragraph">
<p>Elements may use relative URL specifications,
called URI paths in the Servlet 6.2 specification. These paths are as
described in RFC 3986. We refer to the path part of that specification,
not the scheme, nor authority parts. Some examples are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A context-relative path is a path that
starts with a slash (/). It is to be interpreted as relative to the
application to which the JSP page or tag file belongs. That is, its
<code>ServletContext</code> object provides the base context URL.</p>
</li>
<li>
<p>A page relative path is a path that does
not start with a slash (/). It is to be interpreted as relative to the
current JSP page, or the current JSP file or tag file, depending on
where the path is being used. For an <code>include</code> directive (see
<a href="#the-include-directive">Section 1.10.3, &#8220;The <code>include</code> Directive&#8221;</a>) where the path
is used in a <code>file</code> attribute, the interpretation is relative to the JSP
file or tag file. For a <code>jsp:include</code> action (see <a href="#jsp:include">Section 5.4, &#8220;&lt;jsp:include&gt;&#8221;</a>)
where the path is used in a
<code>page</code> attribute, the interpretation is relative to the JSP page. In
both cases the current page or file is denoted by some path starting
with <code>/</code> that is then modified by the new specification to produce a
path starting with <code>/</code>. The new path is interpreted through the
<code>ServletContext</code> object. See <a href="#including-data-in-jsp-pages">Section 1.10.5, &#8220;Including Data in JSP Pages&#8221;</a> for exact
details on this interpretation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The JSP specification uniformly interprets
paths in the context of the web container where the JSP page is
deployed. The specification goes through a mapping translation. The
semantics outlined here apply to the translation-time phase and to the
request-time phase.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntactic-elements-of-a-jsp-page"><a class="anchor" href="#syntactic-elements-of-a-jsp-page"></a>1.3. Syntactic Elements of a JSP Page</h3>
<div class="paragraph">
<p>This section describes the basic syntax rules
of JSP pages.</p>
</div>
<div class="sect3">
<h4 id="elements-and-template-data"><a class="anchor" href="#elements-and-template-data"></a>1.3.1. Elements and Template Data</h4>
<div class="paragraph">
<p>A JSP page has elements and template data. An
element is an instance of an element type known to the JSP container.
Template data is everything else; that is, anything that the JSP
translator does not know about.</p>
</div>
<div class="paragraph">
<p>The type of an element describes its syntax
and its semantics. If the element has attributes, the type describes the
attribute names, their valid types, and their interpretation. If the
element defines objects, the semantics includes what objects it defines
and their types.</p>
</div>
</div>
<div class="sect3">
<h4 id="element-syntax"><a class="anchor" href="#element-syntax"></a>1.3.2. Element Syntax</h4>
<div class="paragraph">
<p>There are three types of elements: directive
elements, scripting elements, and action elements.</p>
</div>
<div class="paragraph">
<p><em>Directives</em><br>
Directives provide global information that is
conceptually valid independent of any specific request received by the
JSP page. They provide information for the translation phase.</p>
</div>
<div class="paragraph">
<p>Directive elements have a syntax of the form
<code>&lt;%@ directive...%&gt;</code>.</p>
</div>
<div class="paragraph">
<p><em>Actions</em><br>
Actions provide information for the request
processing phase. The interpretation of an action may, and often will,
depend on the details of the specific request received by the JSP page.
An Action can either be standard (that is, defined in this
specification), or custom (that is, provided via the portable tag
extension mechanism).</p>
</div>
<div class="paragraph">
<p>Action elements follow the syntax of an XML
element. They have a start tag including the element name and may have
attributes, an optional body, and a matching end tag, or may be an empty
tag, possibly with attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag attr1=&quot;attribute value&quot;...&gt;body&lt;/mytag&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag attr1=&quot;attribute value&quot;.../&gt;
 &lt;mytag attr1=&quot;attribute value&quot;...&gt;&lt;/mytag&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>An element has an element type describing its
tag name, its valid attributes and its semantics. We refer to the type
by its tag name.</p>
</div>
<div class="paragraph">
<p>JSP tags are case-sensitive, as in XML and
XHTML.</p>
</div>
<div class="paragraph">
<p>An action may create objects and may make
them available to the scripting elements through scripting-specific
variables.</p>
</div>
<div class="paragraph">
<p><em>Scripting Elements</em><br>
Scripting elements provide “glue” around
template text and actions.</p>
</div>
<div class="paragraph">
<p>The Expression Language (EL) can be used to
simplify accessing data from different sources. EL expressions can be
used in JSP standard and custom actions and template data. EL
expressions use the syntax <code>${expr}</code> and <code>#{expr}</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag attr1=&quot;${bean.property}&quot;.../&gt;
 ${map[entry]}
 &lt;lib:myAction&gt;${3+counter}&lt;/lib:myAction&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#expression-language">Chapter 2, <em>Expression Language</em></a> provides more details on the EL.</p>
</div>
<div class="paragraph">
<p>There are three language-based types of
scripting elements: declarations, scriptlets, and expressions.
Declarations follow the syntax <code>&lt;%! ... %&gt;</code>. Scriptlets follow the
syntax <code>&lt;% ... %&gt;</code>. Expressions follow the syntax <code>&lt;%= ... %&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="start-and-end-tags"><a class="anchor" href="#start-and-end-tags"></a>1.3.3. Start and End Tags</h4>
<div class="paragraph">
<p>Elements that have distinct start and end
tags (with enclosed body) must start and end in the same file. The start
tag cannot be on one file while the end tag is in another.</p>
</div>
<div class="paragraph">
<p>The same rule applies to elements in the
alternate syntax. For example, a scriptlet has the syntax <code>&lt;% scriptlet
%&gt;</code>. Both the opening <code>&lt;%</code> characters and the closing <code>%&gt;</code>
characters must be in the same physical file.</p>
</div>
<div class="paragraph">
<p>A scripting language may also impose
constraints on the placement of start and end tags relative to specific
scripting constructs. For example, <a href="#scripting">Chapter 9, <em>Scripting</em></a>
shows that Java language blocks cannot separate a start and an end tag.
See <a href="#main-section">Section 9.4, &#8220;Main Section&#8221;</a> for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="empty-elements"><a class="anchor" href="#empty-elements"></a>1.3.4. Empty Elements</h4>
<div class="paragraph">
<p>Following the XML specification, an element
described using an empty tag is indistinguishable from one using a start
tag, an empty body, and an end tag</p>
</div>
<div class="paragraph">
<p>As examples, the following are all empty
tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:foo&gt;&lt;/x:foo&gt;
 &lt;x:foo /&gt;
 &lt;x:foo/&gt;
 &lt;x:foo&gt;&lt;%-- any comment --%&gt;&lt;/x:foo&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>While the following are all non-empty tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;foo&gt; &lt;/foo&gt;
 &lt;foo&gt;&lt;%= expression %&gt;&lt;/foo&gt;
 &lt;foo&gt;&lt;% scriptlet %&gt;&lt;/foo&gt;
 &lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;
 &lt;foo&gt;&lt;!-- a comment --&gt;&lt;/foo&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="attribute-values"><a class="anchor" href="#attribute-values"></a>1.3.5. Attribute Values</h4>
<div class="paragraph">
<p>Following the XML specification, attribute
values always appear quoted. Either single or double quotes can be used
to reduce the need for escaping quotes; the quotation conventions
available are described in <a href="#quoting-and-escape-conventions">Section 1.6, &#8220;Quoting and Escape Conventions&#8221;</a>. There are two types of attribute values, literals
and request-time expressions (<a href="#request-time-attribute-values">Section 1.14.1, &#8220;Request Time Attribute Values&#8221;</a>), but the quotation rules are the same.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-jspattribute-jspbody-and-jspelement-elements"><a class="anchor" href="#the-jspattribute-jspbody-and-jspelement-elements"></a>1.3.6. The jsp:attribute, jsp:body and jsp:element Elements</h4>
<div class="paragraph">
<p>Until JSP 2.0, tag handlers could be passed
input two ways: through attribute values and through the element body.
Attribute values were always evaluated once (if they were specified as
an expression) and the result was passed to the tag handler. The body
could contain scripting elements and action elements and be evaluated
zero or more times on demand by the tag handler.</p>
</div>
<div class="paragraph">
<p>As of JSP 2.0, page authors can provide input
in new ways using the <code>&lt;jsp:attribute&gt;</code> standard action element.
Based on the configuration of the action being invoked, the body of the
element either specifies a value that is evaluated once, or it specifies
a “JSP fragment”, which represents the body in a form that makes it
possible for a tag handler to evaluate it as many times as needed. The
<code>&lt;jsp:attribute&gt;</code> action must only be used to specify an attribute value
for standard or custom actions. A translation error must occur if it is
used in any other context, for example to specify the value of template
text that looks like an XML element.</p>
</div>
<div class="paragraph">
<p>It is illegal JSP syntax, which must result
in a translation error, to use both an XML element attribute and a
<code>&lt;jsp:attribute&gt;</code> standard action to pass the value of the same
attribute. See <a href="#jsp:attribute">Section 5.7, &#8220;&lt;jsp:attribute&gt;&#8221;</a> for more
details on the <code>&lt;jsp:attribute&gt;</code> standard action.</p>
</div>
<div class="paragraph">
<p>The following example uses an XML element
attribute to define the value of the <code>param1</code> attribute, and uses an
attribute standard action to define the value of the <code>param2</code> attribute.
In this example, the value of <code>param2</code> comes from the result of a custom
action invocation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag:paramTag param1=&quot;value1&quot;&gt;
   &lt;jsp:attribute name=&quot;param2&quot;&gt;
     &lt;mymath:add x=&quot;2&quot; y=&quot;2&quot;/&gt;
   &lt;/jsp:attribute&gt;
 &lt;/mytag:paramTag&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a page author wishes to pass both an
attribute standard action and a tag body, the <code>&lt;jsp:body&gt;</code> standard
action must be used to specify the body. A translation error will result
if the custom action invocation has <code>&lt;jsp:attribute&gt;</code> elements but does
not define the body using a <code>&lt;jsp:body&gt;</code> element. See <a href="#jsp:body">Section 5.8, &#8220;&lt;jsp:body&gt;&#8221;</a> for
more details on the <code>&lt;jsp:body&gt;</code> standard action.</p>
</div>
<div class="paragraph">
<p>The following example shows two equivalent
tag invocations to the hypothetical <code>&lt;mytag:formatBody&gt;</code> custom action.
The first invocation uses an XML element attribute to pass the values of
the <code>color</code> and <code>size</code> attributes. The second example uses an attribute
standard action to pass the value of the <code>color</code> attribute. Both
examples have tag body containing simply the words “Template Text”.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag:tagWithBody color=&quot;blue&quot; size=&quot;12&quot;&gt;
   Template Text
 &lt;/mytag:tagWithBody&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag:tagWithBody size=&quot;12&quot;&gt;
   &lt;jsp:attribute name=&quot;color&quot;&gt;blue&lt;/jsp:attribute&gt;
   &lt;jsp:body&gt;
     Template Text
   &lt;/jsp:body&gt;
 &lt;/mytag:tagWithBody&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;jsp:attribute&gt;</code> can be used with the
<code>&lt;jsp:element&gt;</code> standard action to generate dynamic content in a well
structured way. The example below generates an HTML head of some type
unknown at page authoring time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element name=&quot;H${headLevel}&quot;&gt;
   &lt;jsp:attribute name=&quot;size&quot;&gt;${headSize}&lt;/jsp:attribute&gt;
   &lt;jsp:body&gt;${headText}&lt;jsp:body&gt;
 &lt;/jsp:element&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="valid-names-for-actions-and-attributes"><a class="anchor" href="#valid-names-for-actions-and-attributes"></a>1.3.7. Valid Names for Actions and Attributes</h4>
<div class="paragraph">
<p>The names for actions must follow the XML
convention (i.e. must be an <code>NMTOKEN</code> as indicated in the XML 1.0
specification). The names for attributes must follow the conventions
described in the JavaBeans specification.</p>
</div>
<div class="paragraph">
<p>Attribute names that start with <code>jsp</code>, <code>_jsp</code>, <code>java</code> and <code>jakarta</code> are
reserved in this specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="white-space"><a class="anchor" href="#white-space"></a>1.3.8. White Space</h4>
<div class="paragraph">
<p>In HTML and XML white space is usually not
significant, but there are exceptions. For example, an XML file may
start with the characters <code>&lt;?xml</code>, and, when it does, it must do so
with no leading whitespace characters.</p>
</div>
<div class="paragraph">
<p>This specification follows the whitespace
behavior defined for XML. White space within the body text of a document
is not significant, but is preserved. This default behavior can be
modified for JSP pages in standard syntax as described in
<a href="#removing-whitespaces-from-template-text">Section 3.3.9, &#8220;Removing Whitespaces from Template Text&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>Next are two examples of JSP code with their
associated output. Note that directives generate no data and apply
globally to the JSP page.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-1</strong> Example 1 - Input</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LineNo</th>
<th class="tableblock halign-left valign-top">Source Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;?xml version="1.0" ?&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ page buffer="8kb" %&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The rest of the document goes here</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The result is:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-2</strong> Example 1 - Output</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LineNo</th>
<th class="tableblock halign-left valign-top">Output Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;?xml version="1.0" ?&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The rest of the document goes here</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The next two tables show another example,
with input and output.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-3</strong> Example 2 - Input</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LineNo</th>
<th class="tableblock halign-left valign-top">Source Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;% response.setContentType("...");</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>whatever... %&gt;&lt;?xml version="1.0" ?&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ page buffer="8kb" %&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The rest of the document goes here</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The result is:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-4</strong> Example 2 - Output</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LineNo</th>
<th class="tableblock halign-left valign-top">Output Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;?xml version="1.0" ?&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The rest of the document goes here</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It is possible to have
extraneous whitespaces removed from template text through element
<code>trim-directive-whitespaces</code> of JSP Property Groups (See
<a href="#removing-whitespaces-from-template-text">Section 3.3.9, &#8220;Removing Whitespaces from Template Text&#8221;</a>), or the page and tag file
directive attribute <code>trimDirectiveWhitespaces</code> (See
<a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>, <a href="#the-tag-directive">Section 8.5.1, &#8220;The tag Directive&#8221;</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_JSP_Documents"><a class="anchor" href="#_JSP_Documents"></a>1.3.9. JSP Documents</h4>
<div class="paragraph">
<p>A JSP page is usually passed directly to a
JSP container. A JSP document is a JSP page that is also an XML
document. When a JSP document is encountered by the JSP container, it is
interpreted as an XML document first and after that as a JSP page. Among
the consequences of this are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The document must be well-formed</p>
</li>
<li>
<p>Validation, if indicated</p>
</li>
<li>
<p>Entity resolution will apply, if indicated</p>
</li>
<li>
<p><code>&lt;%</code> style syntax cannot be used</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JSP documents are often a good match for the
generation of dynamic XML content as they can preserve much of the
structure of the generated document.</p>
</div>
<div class="paragraph">
<p>The default convention for JSP documents is
<code>.jspx</code>. There are configuration elements that can be used to indicate
that a specific file is a JSP document.</p>
</div>
<div class="paragraph">
<p>See <a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a> for
more details on JSP documents, and
<a href="#jsp-configuration">Chapter 3, <em>JSP Configuration</em></a> for more details on
configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="jsp-syntax-grammar"><a class="anchor" href="#jsp-syntax-grammar"></a>1.3.10. JSP Syntax Grammar</h4>
<div class="paragraph">
<p>This section presents a simple EBNF grammar
for the JSP syntax. The grammar is intended to provide a concise syntax
overview and to resolve any syntax ambiguities present in this
specification. Other sections may apply further restrictions to this
syntax, for example to restrict what represents a valid attribute value
for a page directive. In all other cases the grammar takes precedence in
resolving syntax questions.</p>
</div>
<div class="paragraph">
<p>The notation for this grammar is identical to
that described by Chapter 6 of the XML 1.0 specification, available at
the following URL:</p>
</div>
<div class="paragraph">
<p><a href="https://www.w3.org/TR/xml/#sec-notation" class="bare">https://www.w3.org/TR/xml/#sec-notation</a></p>
</div>
<div class="paragraph">
<p>In addition, the following notes and rules
apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The root production for a JSP page is
<code>JSPPage</code>.</p>
</li>
<li>
<p>The prefix <code>XML::</code> is used to refer to an
EBNF definition in the XML 1.0 specification. Refer to
<code><a href="http://www.w3.org/TR/REC-xml" class="bare">http://www.w3.org/TR/REC-xml</a></code>.</p>
</li>
<li>
<p>Where applicable, to resolve grammar
ambiguities, the first matching production must always be followed. This
is commonly known as the “greedy” algorithm.</p>
</li>
<li>
<p>If the <code>&lt;TRANSLATION_ERROR&gt;</code> production is
followed, the page is invalid, and the result will be a translation
error.</p>
</li>
<li>
<p>Many productions make use of XML-style
attributes. These attributes can appear in any order, separated from
each other by whitespace, but no attribute can be repeated more than
once. To make these XML-style attribute specifications more concise and
easier to read, the syntax <code>ATTR[attrset]</code> is used in the EBNF to
define a set of XML attributes that are recognized in a particular
production.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Within the square brackets (<code>attrset</code>) is
listed a comma-separated list of case-sensitive attribute names that are
valid. Each attribute name represents a single XML attribute. If the
attribute name is prefixed with an <code>=</code>, the production <code>Attribute</code>
(defined below) must be matched (either a <code>rtexprvalue</code> or a static
value is accepted). If not, the production <code>NonRTAttribute</code> must be
matched (only static values are accepted). If the attribute name is
prefixed with a <code>!</code>, the attribute is required and must appear in order
for this production to be matched. If an attribute that matches the
<code>Attribute</code> production with a name not listed appears adjacent to any of
the other attributes, the production is not matched.</p>
</div>
<div class="paragraph">
<p>For example, consider a production that
contains <code>ATTR[!name, =value, =!repeat]</code>. This production is matched
if and only if all of the following hold true:</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The <code>name</code> attribute appears exactly once
and matches the <code>NonRTAttribute</code> production.</p>
</li>
<li>
<p>The <code>value</code> attribute appears at most once.
If it appears, the <code>Attribute</code> production must be matched.</p>
</li>
<li>
<p>The <code>repeat</code> attribute appears exactly once
and matches the <code>Attribute</code> production.</p>
</li>
<li>
<p>There must be no other attributes aside from <code>name</code>, <code>value</code>, or <code>repeat</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>For example, the following sample strings
match the above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name="somename" value="somevalue" repeat="2"</code></p>
</li>
<li>
<p><code>repeat="${ x + y }" name="othername"</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="ebnf-grammar-for-jsp-syntax"><a class="anchor" href="#ebnf-grammar-for-jsp-syntax"></a>1.3.10.1. EBNF Grammar for JSP Syntax</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>JSPPage                    ::= Body

JSPTagDef                  ::= Body

Body                       ::= AllBody | ScriptlessBody
                               [ vc: ScriptingEnabled ]
                               [ vc: ScriptlessBody ]

AllBody                    ::= (   ( '&lt;%--'             JSPCommentBody      )
                                 | ( '&lt;%@'              DirectiveBody       )
                                 | ( '&lt;jsp:directive.'  XMLDirectiveBody    )
                                 | ( '&lt;%!'              DeclarationBody     )
                                 | ( '&lt;jsp:declaration' XMLDeclarationBody  )
                                 | ( '&lt;%='              ExpressionBody      )
                                 | ( '&lt;jsp:expression'  XMLExpressionBody   )
                                 | ( '&lt;%'               ScriptletBody       )
                                 | ( '&lt;jsp:scriptlet'   XMLScriptletBody    )
                                 | ( '${'               ELExpressionBody    )
                                 | ( '#{'               ELExpressionBody    )
                                 | ( '&lt;jsp:text'        XMLTemplateText     )
                                 | ( '&lt;jsp:'            StandardAction      )
                                 | ( '&lt;/'               ExtraClosingTag     )
                                 | ( '&lt;'                CustomAction
                                                        CustomActionBody    )
                                 |  TemplateText
                               )*

ScriptlessBody             ::= (   ( '&lt;%--'             JSPCommentBody      )
                                 | ( '&lt;%@'              DirectiveBody       )
                                 | ( '&lt;jsp:directive.'  XMLDirectiveBody    )
                                 | ( '&lt;%!'              &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:declaration' &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;%='              &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:expression'  &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;%'               &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:scriptlet'   &lt;TRANSLATION_ERROR&gt; )
                                 | ( '${'               ELExpressionBody    )
                                 | ( '#{'               ELExpressionBody    )
                                 | ( '&lt;jsp:text'        XMLTemplateText     )
                                 | ( '&lt;jsp:'            StandardAction      )
                                 ( ( '&lt;/'               ExtraClosingTag     )
                                 | ( '&lt;'                CustomAction
                                                        CustomActionBody    )
                                 | TemplateText
                               )*
                               [ vc: ELEnabled ]

TemplateTextBody           ::= (   ( '&lt;%--'             JSPCommentBody      )
                                 | ( '&lt;%@'              DirectiveBody       )
                                 | ( '&lt;jsp:directive.'  XMLDirectiveBody    )
                                 | ( '&lt;%!'              &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:declaration' &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;%='              &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:expression'  &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;%'               &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:scriptlet'   &lt;TRANSLATION_ERROR&gt; )
                                 | ( '${'               &lt;TRANSLATION_ERROR&gt; )
                                 | ( '#{'               &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:text'        &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;jsp:'            &lt;TRANSLATION_ERROR&gt; )
                                 | ( '&lt;' CustomAction   &lt;TRANSLATION_ERROR&gt; )
                                 | TemplateText
                               )*
                               [ vc: ELEnabled ]

JSPCommentBody             ::=   ( Char* - ( Char* '--%&gt;' ) ) '--%&gt;'
                               | &lt;TRANSLATION_ERROR&gt;

DirectiveBody              ::= JSPDirectiveBody | TagDefDirectiveBody
                               [ vc: TagFileSpecificDirectives ]

XMLDirectiveBody           ::= XMLJSPDirectiveBody | XMLTagDefDirectiveBody
                               [ vc: TagFileSpecificXMLDirectives ]

JSPDirectiveBody           ::=   S?
                                 (   ( 'page' S PageDirectiveAttrList )
                                   | ( 'taglib' S TagLibDirectiveAttrList )
                                   | ( 'include' S IncludeDirectiveAttrList )
                                 )
                                 S? '%&gt;'
                               | &lt;TRANSLATION_ERROR&gt;

XMLJSPDirectiveBody        ::=   S?
                                 (   ( 'page' S PageDirectiveAttrList S?
                                        ( '/&gt;' | ( '&gt;' S? ETag ) )
                                     )
                                   | ( 'include' S IncludeDirectiveAttrList S?
                                       ( '/&gt;' | ( '&gt;' S? ETag ) )
                                     )
                                 )
                               | &lt;TRANSLATION_ERROR&gt;

TagDefDirectiveBody        ::=   S?
                                 (   ( 'tag'       S TagDirectiveAttrList )
                                   | ( 'taglib'    S TagLibDirectiveAttrList )
                                   | ( 'include'   S IncludeDirectiveAttrList )
                                   | ( 'attribute' S AttributeDirectiveAttrList )
                                   | ( 'variable'  S VariableDirectiveAttrList )
                                 )
                                 S? '%&gt;'
                               | &lt;TRANSLATION_ERROR&gt;

XMLTagDefDirectiveBody     ::=   (   ( 'tag' S TagDirectiveAttrList S?
                                       ( '/&gt;' | ( '&gt;' S? ETag ) )
                                     )
                                   | ( 'include' S IncludeDirectiveAttrList S?
                                       ( '/&gt;' | ( '&gt;' S? ETag ) )
                                     )
                                   | ( 'attribute' S AttributeDirectiveAttrList S?
                                       ( '/&gt;' | ( '&gt;' S? ETag ) )
                                     )
                                   | ( 'variable' S VariableDirectiveAttrList S?
                                       ( '/&gt;' | ( '&gt;' S? ETag ) )
                                     )
                                 )
                               | &lt;TRANSLATION_ERROR&gt;

PageDirectiveAttrList      ::= ATTR[ language, extends, import, session, buffer,
                                     autoFlush, info, errorPage, isErrorPage,
                                     contentType, pageEncoding, isELIgnored,
                                     errorOnELNotFound ]
                               [ vc: PageDirectiveUniqueAttr ]

TagLibDirectiveAttrList    ::=   ATTR[ !uri, !prefix ]
                               | ATTR[ !tagdir, !prefix ]
                               [ vc: TagLibDirectiveUniquePrefix ]

IncludeDirectiveAttrList   ::= ATTR[ !file ]

TagDirectiveAttrList       ::= ATTR[ display-name, body-content, dynamic-attributes,
                                     small-icon, large-icon, description, example,
                                     language, import, pageEncoding, isELIgnored,
                                     errorOnELNotFound ]
                               [ vc: TagDirectiveUniqueAttr ]

AttributeDirectiveAttrList ::= ATTR[ !name, required, fragment, rtexprvalue,
                                     type, description ]
                               [ vc: UniqueAttributeName ]

VariableDirectiveAttrList  ::=   ATTR[ !name-given, variable-class,
                                       scope, declare, description ]
                               | ATTR[ !name-from-attribute, !alias, variable-class,
                                       scope, declare, description ]
                               [ vc: UniqueVariableName ]

DeclarationBody            ::= ( Char* - ( Char* '%&gt;' ) ) '%&gt;'
                               | &lt;TRANSLATION_ERROR&gt;

XMLDeclarationBody         ::=   ( S? '/&gt;' )
                               | ( S? '&gt;'
                                   ( ( Char* - ( Char* '&lt;' ) ) CDSect? )*
                                   ETag
                                 )
                               | &lt;TRANSLATION_ERROR&gt;

ExpressionBody             ::=   ( Char* - ( Char* '%&gt;' ) ) '%&gt;'
                               | &lt;TRANSLATION_ERROR&gt;
                               [ vc: ExpressionBodyContent ]

XMLExpressionBody          ::=   ( S? '/&gt;' )
                               | ( S? '&gt;'
                                   ( ( Char* - ( Char* '&lt;' ) ) CDSect? )*
                                   ETag
                                 )
                               | &lt;TRANSLATION_ERROR&gt;
                               [ vc: ExpressionBodyContent ]

ELExpressionBody           ::=   ELExpression '}'
                               | &lt;TRANSLATION_ERROR&gt;

ELExpression               ::= [See EL spec document, production Expression]

ScriptletBody              ::=   ( Char* - ( Char* '%&gt;' ) ) '%&gt;'
                               | &lt;TRANSLATION_ERROR&gt;`

XMLScriptletBody           ::=   ( S? '/&gt;' )
                               | ( S? '&gt;'
                                   ( ( Char* - ( Char* '&lt;' ) ) CDSect? )*
                                   ETag
                                 )
                               | &lt;TRANSLATION_ERROR&gt;

StandardAction             ::=   ( 'useBean'     StdActionContent )
                               | ( 'setProperty' StdActionContent )
                               | ( 'getProperty' StdActionContent )
                               | ( 'include'     StdActionContent )
                               | ( 'forward'     StdActionContent )
                               | ( 'invoke'      StdActionContent )
                               | ( 'doBody'      StdActionContent )
                               | ( 'element'     StdActionContent )
                               | ( 'output'      StdActionContent )
                               | &lt;TRANSLATION_ERROR&gt;
                               [ vc: TagFileSpecificActions ]

StdActionContent           ::= Attributes StdActionBody
                               [ vc: StdActionAttributesValid ]

StdActionBody              ::=   EmptyBody
                               | OptionalBody
                               | ParamBody
                               [ vc: StdActionBodyMatch ]

EmptyBody                  ::=   '/&gt;'
                               | ( '&gt;' ETag )
                               | ( '&gt;' S? '&lt;jsp:attribute' NamedAttributes ETag )

TagDependentActionBody     ::=   JspAttributeAndBody
                               | ( '&gt;' TagDependentBody ETag )

TagDependentBody           ::= Char* - ( Char* ETag )

JspAttributeAndBody        ::= ( '&gt;' S? ( '&lt;jsp:attribute' NamedAttributes )?
                                 '&lt;jsp:body'
                                 ( JspBodyBody | &lt;TRANSLATION_ERROR&gt; )
                                 S? ETag
                               )

ActionBody                 ::=   JspAttributeAndBody
                               | ( '&gt;' Body ETag )

ScriptlessActionBody       ::=   JspAttributeAndBody
                               | ( '&gt;' ScriptlessBody ETag )

OptionalBody               ::= EmptyBody | ActionBody

ScriptlessOptionalBody     ::= EmptyBody | ScriptlessActionBody

TagDependentOptionalBody   ::= EmptyBody | TagDependentActionBody

ParamBody                  ::=   EmptyBody
                               | ( '&gt;' S? ( '&lt;jsp:attribute' NamedAttributes )?
                                   '&lt;jsp:body'
                                   (JspBodyParam | &lt;TRANSLATION_ERROR&gt;)
                                   S? ETag
                                 )
                               | ( S? '&gt;' Param* ETag )

NamedAttributes            ::= AttributeBody S? ( '&lt;jsp:attribute' AttributeBody S? )*

AttributeBody              ::=   ATTR[ !name, trim, omit ] S?
                               (   '/&gt;'
                                 | '&gt;&lt;/jsp:attribute&gt;'
                                 | '&gt;' AttributeBodyBody '&lt;/jsp:attribute&gt;'
                                 | &lt;TRANSLATION_ERROR&gt;
                               )

AttributeBodyBody          ::=   AllBody
                               | ScriptlessBody
                               | TemplateTextBody
                               [ vc: AttributeBodyMatch ]

JspBodyBody                ::=   ( S? JspBodyEmptyBody )
                               | ( S? '&gt;' ( JspBodyBodyContent - '' ) '&lt;/jsp:body&gt;' )

JspBodyBodyContent         ::= ScriptlessBody | Body | TagDependentBody
                               [ vc: JspBodyBodyContent ]

JspBodyEmptyBody           ::=   '/&gt;'
                               | '&gt;&lt;/jsp:body&gt;'
                               | &lt;TRANSLATION_ERROR&gt;

JspBodyParam               ::= S? '&gt;' S? Param* '&lt;/jsp:body&gt;'

Param                      ::= '&lt;jsp:param' StdActionContent

Attributes                 ::= ( S Attribute )* S?
                               [ vc: UniqueAttSpec ]

CustomAction               ::= TagPrefix ':' CustomActionName
                               [vc: CustomActionMatchesAndValid]

TagPrefix                  ::= Name

CustomActionName           ::= Name

CustomActionBody           ::=   ( Attributes CustomActionEnd )
                               | &lt;TRANSLATION_ERROR&gt;

CustomActionEnd            ::=   CustomActionTagDependent
                               | CustomActionJSPContent
                               | CustomActionScriptlessContent

CustomActionTagDependent   ::= TagDependentOptionalBody
                               [vc: CustomActionTagDependentMatch]

CustomActionJSPContent     ::= OptionalBody
                               [ vc: CustomActionJSPContentMatch ]

CustomActionScriptlessContent ::= ScriptlessOptionalBody
                                  [ vc: CustomActionScriptlessContentMatch ]

TemplateText               ::=   ( '&lt;' | '${' | '#{' )
                               | ( TemplateChar* -
                                       ( TemplateChar* ( '&lt;' | '${' | '#{' ) ) )

TemplateChar               ::=   '\$'
                               | '\#'
                               | '&lt;\%'
                               | Char
                               [ vc : QuotedDollarMatched ]

XMLTemplateText            ::=   ( S? '/&gt;' )
                               | ( S? '&gt;'
                                   ( ( Char* - ( Char* ( '&lt;' | '${' | '#{' ) ) )
                                     (   ( '${' ELExpressionBody )?
                                       | ( '#{' ELExpressionBody )?
                                     )
                                     CDSect?
                                   )* ETag
                                 )
                               | &lt;TRANSLATION_ERROR&gt;
                               [ vc: ELEnabled ]

ExtraClosingTag            ::= ETag
                               [ vc: ExtraClosingTagMatch ]`

ETag                       ::= '&lt;/' TagPrefix ':' Name S? '&gt;'
                               [ vc: ETagMatch ]`

Attribute                  ::= Name Eq
                               (   ( '&quot;&lt;%=' RTAttributeValueDouble )
                                 | ( &quot;'&lt;%=&quot; RTAttributeValueSingle )
                                 | ( '&quot;' AttributeValueDouble      )
                                 | ( &quot;'&quot; AttributeValueSingle      )
                               )

NonRTAttribute             ::= Name Eq
                               (   ( '&quot;' AttributeValueDouble )
                                 | ( &quot;'&quot; AttributeValueSingle )
                               )

AnyAttributeValue          ::= AttributeValue | RTAttributeValue

AttributeValue             ::= AttributeValueDouble | AttributeValueSingle

RTAttributeValue           ::= RTAttributeValueDouble | RTAttributeValueSingle

AttributeValueDouble       ::= ( QuotedChar - '&quot;' )*
                               ( '&quot;' | &lt;TRANSLATION_ERROR&gt; )

AttributeValueSingle       ::= ( QuotedChar - &quot;'&quot; )*
                               ( &quot;'&quot; | &lt;TRANSLATION_ERROR&gt; )

RTAttributeValueDouble     ::= ( ( QuotedChar - '&quot;' )* -
                                     ( ( QuotedChar - '&quot;' )* '%&gt;' )
                               )
                               ( '%&gt;&quot;' | &lt;TRANSLATION_ERROR&gt; )
                               [ vc: RTAttributeScriptingEnabled ]
                               [ vc: ExpressionBodyContent ]

RTAttributeValueSingle     ::= ( ( QuotedChar - &quot;'&quot; )* -
                                   ( ( QuotedChar - &quot;'&quot; )* '%&gt;' )
                               )
                               ( &quot;%&gt;'&quot; | &lt;TRANSLATION_ERROR&gt; )
                               [ vc: RTAttributeScriptingEnabled ]
                               [ vc: ExpressionBodyContent ]

Name                       ::= XML::Name

Char                       ::= XML::Char

QuotedChar                 ::=   '&amp;apos;'
                               | '&amp;quot;'
                               | '\\'
                               | '\&quot;'
                               | &quot;\'&quot;
                               | '\$'
                               | '\#'
                               | ( '${' ELExpressionBody )
                               | ( '#{' ELExpressionBody )
                               | Char
                               [ vc: QuotedDollarMatched ]

S                          ::= XML::S

Eq                         ::= XML::Eq

CDSect                     ::= XML::CDSect</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="validity-constraints"><a class="anchor" href="#validity-constraints"></a>1.3.10.2. Validity Constraints</h5>
<div class="paragraph">
<p>The following validity constraints are referenced in the above grammar
using the syntax <code>[vc: ValidityConstraint]</code>, and must be followed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ScriptingEnabled</code> - The <code>ScriptlessBody</code>
production must be followed if scripting is disabled for this
translation unit. See the <code>scripting-invalid</code> JSP Configuration element
(<a href="#_Disabling_Scripting_Elements">Section 3.3.3, &#8220;Disabling Scripting Elements&#8221;</a>).</p>
</li>
<li>
<p><code>ScriptlessBody</code> - The <code>AllBody</code>
production cannot be followed if one of the parent nodes in the parse
tree is a <code>ScriptlessBody</code> production. That is, once we have followed
the <code>ScriptlessBody</code> production, until that production is complete we
cannot choose the <code>AllBody</code> production.</p>
</li>
<li>
<p><code>ELEnabled</code> - The token <code>${</code> or <code>#{</code> is
not followed if expressions are disabled for this translation unit. See
the <code>isELIgnored</code> page and tag directive
(See <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>) and
<a href="#the-tag-directive">Section 8.5.1, &#8220;The tag Directive&#8221;</a> respectively) and the <code>el-ignored</code>
JSP Configuration element (<a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>).</p>
</li>
<li>
<p><code>TagFileSpecificDirectives</code> - The
<code>JSPDirectiveBody</code> production must be followed if the root production is
<code>JSPPage</code> (i.e. this is a JSP page). The <code>TagDefDirectiveBody</code>
production must be followed if the root production is <code>JSPTagDef</code> (i.e.
this is a tag file).</p>
</li>
<li>
<p><code>TagFileSpecificXMLDirectives</code> - The
<code>XMLJSPDirectiveBody</code> production must be followed if the root production
is <code>JSPPage</code> (i.e. this is a JSP page). The <code>XMLTagDefDirectiveBody</code>
production must be followed if the root production is <code>JSPTagDef</code> (i.e.
this is a tag file).</p>
</li>
<li>
<p><code>PageDirectiveUniqueAttr</code> - A translation
error will result if there is more than one occurrence of any attribute
defined by this directive in a given translation unit, and if the value
of the attribute is different than the previous occurrence. No
translation error results if the value is identical to the previous
occurrence. In addition, the <code>import</code> and <code>pageEncoding</code> attributes are
excluded from this constraint (see <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>).</p>
</li>
<li>
<p><code>TagLibDirectiveUniquePrefix</code> - A
translation error will result if the prefix <code>AttributeValue</code> has already
previously been encountered as a potential <code>TagPrefix</code> in this
translation unit.</p>
</li>
<li>
<p><code>TagDirectiveUniqueAttr</code> - A translation
error will result if the prefix of this tag directive is already defined
in the current scope, and if that prefix is bound to a namespace other
than that specified by the <code>uri</code> or <code>tagdir</code> attribute.</p>
</li>
<li>
<p><code>UniqueAttributeName</code> - A translation
error will result if there are two or more <code>attribute</code> directives with
the same value for the <code>name</code> attribute in the same translation unit. A
translation error will result if there is a <code>variable</code> directive with a
<code>name-given</code> attribute equal to the value of the <code>name</code> attribute of an
<code>attribute</code> directive in the same translation unit.</p>
</li>
<li>
<p><code>UniqueVariableName</code> - A translation error
must occur if more than one <code>variable</code> directive appears in the same
translation unit with the same value for the <code>name-given</code> attribute or
the same value for the <code>name-from-attribute</code> attribute. A translation
error must occur if there is a <code>variable</code> directive with a <code>name-given</code>
attribute equal to the value of the <code>name</code> attribute of an <code>attribute</code>
directive in the same translation unit. A translation error must occur
if there is a <code>variable</code> directive with a <code>name-from-attribute</code>
attribute whose value is not equal to the <code>name</code> attribute of an
<code>attribute</code> directive in the same translation unit that is also of type
<code>java.lang.String</code>, that is <code>required</code> and that is not an <code>rtexprvalue</code>.
A translation error must occur if the value of the <code>alias</code> attribute
is equal to the value of a <code>name-given</code> attribute of a <code>variable</code>
directive, or the value of the <code>name</code> attribute of an <code>attribute</code>
directive in the same translation unit.</p>
</li>
<li>
<p><code>TagFileSpecificActions</code> - The <code>invoke</code>
and <code>doBody</code> standard actions are only matched if the <code>JSPTagDef</code>
production was followed (i.e. if this is a tag file instead of a JSP
page).</p>
</li>
<li>
<p><code>RTAttributeScriptingEnabled</code> - If the
<code>RTAttributeValueDouble</code> or <code>RTAttributeValueSingle</code> productions are
visited during parsing and scripting is disabled for this page, a
translation error must be produced. See the <code>scripting-invalid</code> JSP
Configuration element (<a href="#_Disabling_Scripting_Elements">Section 3.3.3, &#8220;Disabling Scripting Elements&#8221;</a>).</p>
</li>
<li>
<p><code>ExpressionBodyContent</code> - A translation
error will result if the body content minus the closing delimiter (<code>%&gt;</code>
, or <code>&lt;/jsp:expression&gt;</code>, depending on how the expression started) does
not represent a well-formed expression in the scripting language
selected for the JSP page.</p>
</li>
<li>
<p><code>StdActionAttributesValid</code> - An attribute
is considered “provided” for this standard action if either the
<code>Attribute</code> production or the <code>AttributeBody</code> production is followed in
the context of the enclosing <code>StandardAction</code> production. A translation
error will result if any of the following conditions is true:</p>
<div class="ulist">
<ul>
<li>
<p>The set of attributes “provided” for this
standard action does not match one of the valid attribute combinations
specified in <a href="#_Valid_Body_Content_And_Attributes_For_Standard_Actions"><strong>Table JSP.1-5</strong> , &#8220;Valid body content and attributes for Standard Actions&#8221;</a>.</p>
</li>
<li>
<p>The same attribute is “provided” more than
once, as determined by the attribute name.</p>
</li>
<li>
<p>An attribute is “provided” using the
AttributeBody production that does not accept a request-time expression
value, as indicated by the = prefix in <a href="#_Valid_Body_Content_And_Attributes_For_Standard_Actions"><strong>Table JSP.1-5</strong> , &#8220;Valid body content and attributes for Standard Actions&#8221;</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>StdActionBodyMatch</code> - The <code>StdActionBody</code>
production will only be matched if the production listed for this
standard action in the “Body Production” column in
<a href="#_Valid_Body_Content_And_Attributes_For_Standard_Actions"><strong>Table JSP.1-5</strong> , &#8220;Valid body content and attributes for Standard Actions&#8221;</a> is followed.</p>
</li>
<li>
<p><code>AttributeBodyMatch</code> - The type of element
being specified determines which production is followed (see
<a href="#jsp:attribute">Section 5.7, &#8220;&lt;jsp:attribute&gt;&#8221;</a> for details):</p>
<div class="ulist">
<ul>
<li>
<p>If a custom action that specifies an
attribute of type <code>JspFragment</code>, <code>ScriptlessBody</code> must be followed.</p>
</li>
<li>
<p>If a standard or custom action that accepts
a request-time expression value, <code>AllJspBody</code> must be followed.</p>
</li>
<li>
<p>If a standard or custom action that does
not accept a request-time expression value, <code>TemplateTextBody</code> must be
followed.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>JspBodyBodyContent</code> - The
<code>ScriptlessBody</code> production must be followed if the body content for
this tag is <code>scriptless</code>. The <code>Body</code> production must be followed if the
body content for this tag is <code>JSP</code>. The TagDependentBody production
must be followed if the body content for this tag is <code>tagdependent</code>.</p>
</li>
<li>
<p><code>UniqueAttSpec</code> - A translation error will
result if the same attribute name appears more than once.</p>
</li>
<li>
<p><code>CustomActionMatchesAndValid</code> - Following
the rules in <a href="#the-tag-library-descriptor">Section 7.3, &#8220;The Tag Library Descriptor&#8221;</a> for determining
the relevant set of tags and tag libraries, assume the following:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Let <code>U</code> be the URI indicated by the <code>uri</code>
<code>AttributeValue</code> of the previously encountered <code>TagLibDirectiveAttrList</code>
with <code>prefix</code> matching the <code>TagPrefix</code> for this potential custom action,
or <code>nil</code> if no such <code>TagLibDirectiveAttrList</code> was encountered in this
translation unit.</p>
</li>
<li>
<p>If <code>U</code> is not <code>nil</code>, let <code>L</code> be the
<code>&lt;taglib&gt;</code> element in the relevant TLD entry such that <code>L.uri</code> is equal
to <code>U</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Then:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>If, after being parsed, the <code>CustomAction</code>
production is matched (not yet taking into account the following rules),
<code>TagPrefix</code> is considered a potential <code>TagPrefix</code> in this translation
unit for the purposes of the <code>TagLibDirectiveUniquePrefix</code> validity
constraint.</p>
</li>
<li>
<p>The <code>CustomAction</code> production will not be
matched if <code>U</code> is <code>nil</code> or if the <code>TagPrefix</code> does not match the
<code>prefix</code> <code>AttributeValue</code> of a <code>TagLibDirectiveAttrList</code> previously
encountered in this translation unit.</p>
</li>
<li>
<p>Otherwise, if the <code>CustomAction</code> production
is matched, a translation error will result if there does not exist a
<code>&lt;tag&gt;</code> element <code>T</code> in a relevant TLD such that <code>L.T.name</code> is equal to
<code>CustomActionName.</code></p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p><code>CustomActionTagDependentMatch</code> - Assume
the definition of <code>L</code> from the <code>CustomActionMatchesAndValid</code> validity
constraint above. The <code>CustomActionTagDependent</code> production is not
matched if there does not exist a <code>&lt;tag&gt;</code> element <code>T</code> in a relevant TLD
such that <code>L.T.body-content</code> contains the value <code>tagdependent</code>.</p>
</li>
<li>
<p><code>CustomActionJSPContentMatch</code> - Assume the
definition of <code>L</code> from the <code>CustomActionMatchesAndValid</code> validity
constraint above. The <code>CustomActionJSPContent</code> production is not matched
if there exists a <code>&lt;tag&gt;</code> element <code>T</code> in a relevant TLD such that
<code>L.T.body-content</code> does not contain the value <code>JSP</code>.</p>
</li>
<li>
<p><code>CustomActionScriptlessContentMatch</code> -
Assume the definition of <code>L</code> from the <code>CustomActionMatchesAndValid</code>
validity constraint above. The <code>CustomActionScriptlessContent</code>
production is not matched if there does not exist a <code>&lt;tag&gt;</code> element <code>T</code>
in a relevant TLD such that <code>L.T.body-content</code> contains the value
<code>scriptless</code>.</p>
</li>
<li>
<p><code>QuotedDollarMatch -</code> The <code>\$</code> or <code>\#</code>
token is only matched if EL is enabled for this translation unit. See
<a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>.</p>
</li>
<li>
<p><code>ETagMatch</code> - Assume the definition of <code>U</code>
from the <code>CustomActionMatchesAndValid</code> validity constraint. If
<code>TagPrefix</code> is not ‘<code>jsp</code>’ and <code>U</code> is <code>nil</code>, the <code>ETag</code> production is
not matched. Otherwise, the <code>ETag</code> production is matched and a
translation error will result if the prefix and name of this closing tag
does not match the prefix and name of the starting tag at the
corresponding nesting level, or if there is no corresponding nesting
level (i.e. too many closing tags). This is similar to the way XML is
defined, except that template text that looks like a closing element
with an unrecognized prefix is allowed in the body of a custom or
standard action. In the following example, assuming ‘my’ is a valid
prefix and ‘indent’ is a valid tag, the <code>&lt;/ul&gt;</code> tag is considered
template text, and no translation error is produced:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;my:indent level=&quot;2&quot;&gt;
   &lt;/ul&gt;
 &lt;/my:indent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example, however, would
produce a translation error, assuming ‘my’ is a valid prefix and
‘indent’ is a valid tag, and regardless of whether ‘othertag’ is a valid
tag or not.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;my:indent level=&quot;2&quot;&gt;
   &lt;/my:othertag&gt;
 &lt;/my:indent&gt;</code></pre>
</div>
</div>
</li>
<li>
<p><code>ExtraClosingTagMatch</code> - The
<code>ExtraClosingTag</code> production is not matched if encountered within two or
more nested <code>Body</code> productions (e.g. if encountered inside the body of a
standard or custom action).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="standard-action-attributes"><a class="anchor" href="#standard-action-attributes"></a>1.3.10.3. Standard Action Attributes</h5>
<div class="paragraph">
<p><a href="#_Valid_Body_Content_And_Attributes_For_Standard_Actions"><strong>Table JSP.1-5</strong> , &#8220;Valid body content and attributes for Standard Actions&#8221;</a> specifies, for each
standard action element, the bodies and the attribute combinations that
are valid. The value in the “Body Production” column specifies a
production name that must be matched for the body of the standard action
to be considered valid. The value in the “Valid Attribute Combinations”
column uses the same syntax as the <code>attrset</code> notation described at the
start of <a href="#jsp-syntax-grammar">Section 1.3.10, &#8220;JSP Syntax Grammar&#8221;</a>, and
indicates which attributes can be provided.</p>
</div>
<table id="_Valid_Body_Content_And_Attributes_For_Standard_Actions" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-5</strong> Valid body content and attributes for Standard Actions</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Body Production</th>
<th class="tableblock halign-left valign-top">Valid Attribute Combinations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:useBean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionalBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( !id, scope, !class )</code><br>
<code>( !id, scope, !type )</code><br>
<code>( !id, scope, !class, !type )</code><br>
<code>( !id, scope, =!beanName, !type )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:setProperty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( !name, !property, param )</code><br>
<code>( !name, !property, =!value )</code><br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:getProperty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( !name, !property )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:include</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParamBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( =!page, flush )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:forward</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParamBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( =!page )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:invoke</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( !fragment, !var, scope )</code><br>
<code>( !fragment, !varReader, scope )</code><br>
<code>( !fragment )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:doBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( !var, scope )</code><br>
<code>( !varReader, scope )</code><br>
<code>()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:element</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionalBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( =!name )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:output</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( omit-xml-declaration )</code><br>
<code>( omit-xml-declaration, !doctype-root-element,</code><br>
<code>&#160; !doctype-system, doctype-public )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:param</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyBody</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>( !name, =!value )</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="error-handling"><a class="anchor" href="#error-handling"></a>1.4. Error Handling</h3>
<div class="paragraph">
<p>Errors may occur at translation time or at
request time. This section describes how errors are treated by a
compliant implementation.</p>
</div>
<div class="sect3">
<h4 id="translation-time-processing-errors"><a class="anchor" href="#translation-time-processing-errors"></a>1.4.1. Translation Time Processing Errors</h4>
<div class="paragraph">
<p>The translation of a JSP page source into a
corresponding JSP page implementation class by a JSP container can occur
at any time between initial deployment of the JSP page into the JSP
container and the receipt and processing of a client request for the
target JSP page. If translation occurs prior to the receipt of a client
request for the target JSP page, error processing and notification is
implementation dependent and not covered by this specification. In all
cases, fatal translation failures shall result in the failure of
subsequent client requests for the translation target with the
appropriate error specification: For HTTP protocols the error status
code <code>500 (Server Error)</code> is returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="request-time-processing-errors"><a class="anchor" href="#request-time-processing-errors"></a>1.4.2. Request Time Processing Errors</h4>
<div class="paragraph">
<p>During the processing of client requests,
errors can occur in either the body of the JSP page implementation
class, or in some other code (Java or other implementation programming
language) called from the body of the JSP page implementation class.
Runtime errors occurring are realized in the page implementation, using
the Java programming language exception mechanism to signal their
occurrence to caller(s) of the offending behavior.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is independent of scripting language. This specification
requires that unhandled errors occurring in a scripting language
environment used in a JSP container implementation to be signalled to the
JSP page implementation class via the Java programming language exception
mechanism.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These exceptions may be caught and handled
(as appropriate) in the body of the JSP page implementation class.</p>
</div>
<div class="paragraph">
<p>Any uncaught exceptions thrown in the body of
the JSP page implementation class result in the forwarding of the client
request and uncaught exception to the errorPage URL specified by the JSP
page (or the implementation default behavior, if none is specified).</p>
</div>
<div class="paragraph">
<p>Information about the error is passed as
<code>jakarta.servlet.ServletRequest</code> attributes to the error handler, with the
same attributes as specified by the Servlet specification. Names
starting with the prefixe <code>jakarta</code> are reserved by the
different specifications of the Jakarta EE platform. The <code>jakarta.servlet</code>
prefix is reserved and used by the servlet and JSP specifications.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-jsps-as-error-pages"><a class="anchor" href="#using-jsps-as-error-pages"></a>1.4.3. Using JSPs as Error Pages</h4>
<div class="paragraph">
<p>A JSP is considered an Error Page if it sets
the <code>page</code> directive’s <code>isErrorPage</code> attribute to <code>true</code>. If a page has
<code>isErrorPage</code> set to <code>true</code>, then the “exception” implicit scripting
language variable (see <a href="#_Implicit_Objects_Available_in_Error_Pages"><strong>Table JSP.1-7</strong> , &#8220;Implicit Objects Available in Error Pages&#8221;</a>) of that page is initialized. The variable is
set to the value of the <code>jakarta.servlet.error.exception request</code>
attribute value if present, otherwise to the value of the
<code>jakarta.servlet.jsp.jspException</code> request attribute value (for backwards
compatibility for JSP pages pre-compiled with a JSP 1.2 compiler).</p>
</div>
<div class="paragraph">
<p>In addition, an <code>ErrorData</code> instance must be
initialized based on the error handler <code>ServletRequest</code> attributes
defined by the Servlet specification, and made available through the
<code>PageContext</code> to the page. This has the effect of providing easy access
to the error information via the Expression Language. For example, an
Error Page can access the status code using the syntax
<code>${pageContext.errorData.statusCode}</code>. See the Javadoc for details.</p>
</div>
<div class="paragraph">
<p>By default, a JSP error page sets the status
code of the response to the value of
<code>${pageContext.errorData.statusCode}</code> (which is equal to 500 by
default), but may set it to a different value (including 200) as it sees
fit.</p>
</div>
<div class="paragraph">
<p>A JSP container must detect if a JSP error
page is self-referencing and throw a translation error.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="comments"><a class="anchor" href="#comments"></a>1.5. Comments</h3>
<div class="paragraph">
<p>There are different types of comments
available in JSP pages in standard syntax and JSP documents (in XML
syntax).</p>
</div>
<div class="sect3">
<h4 id="comments-in-jsp-pages-in-standard-syntax"><a class="anchor" href="#comments-in-jsp-pages-in-standard-syntax"></a>1.5.1. Comments in JSP Pages in Standard Syntax</h4>
<div class="paragraph">
<p>There are two types of comments in a JSP
page: comments to the JSP page itself, documenting what the page is
doing; and comments that are intended to appear in the generated
document sent to the client.</p>
</div>
<div class="sect4">
<h5 id="generating-comments-in-output-to-client"><a class="anchor" href="#generating-comments-in-output-to-client"></a>1.5.1.1. Generating Comments in Output to Client</h5>
<div class="paragraph">
<p>In order to generate comments that appear in
the response output stream to the requesting client, the HTML and XML
comment syntax is used, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;!-- comments ... --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>These comments are treated as uninterpreted
template text by the JSP container. Dynamic content that appears within
HTML/XML comments, such as actions, scriptlets and expressions, is still
processed by the container. If the generated comment is to have dynamic
data, this can be obtained through an expression syntax, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;!-- comments &lt;%= expression %&gt; more comments ... --&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="jsp-comments"><a class="anchor" href="#jsp-comments"></a>1.5.1.2. JSP Comments</h5>
<div class="paragraph">
<p>A JSP comment is of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%-- anything but a closing --%&gt; ... --%&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The body of the content is ignored
completely. Comments are useful for documentation but also are used to
“comment out” some portions of a JSP page. Note that JSP comments do not
nest.</p>
</div>
<div class="paragraph">
<p>An alternative way to place a comment in JSP
is to use the comment mechanism of the scripting language. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;% /** this is a comment ... **/ %&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comments-in-jsp-documents"><a class="anchor" href="#comments-in-jsp-documents"></a>1.5.2. Comments in JSP Documents</h4>
<div class="paragraph">
<p>Comments in JSP documents use the XML syntax,
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;!-- comments ... --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The body of the content is ignored
completely. Comments in JSP documents may be used for documentation
purposes and for “commenting out” portions of a JSP page.</p>
</div>
<div class="paragraph">
<p>Comments in JSP documents do not nest.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="quoting-and-escape-conventions"><a class="anchor" href="#quoting-and-escape-conventions"></a>1.6. Quoting and Escape Conventions</h3>
<div class="paragraph">
<p>The following quoting conventions apply to
JSP pages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current quoting rules do not allow for quoting special characters
such as <code>\n</code> - the only current way to do this in a JSP is with a Java expression.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Quoting in EL Expressions</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is no special quoting mechanism
within EL expressions; use a literal <code>'${'</code> if the literal <code>${</code> is
desired and expressions are enabled for the page (similarly, use a
literal <code>'#{'</code> if the literal <code>#{</code> is desired). For example, the
evaluation of <code>${'${'}</code> is <code>'${'</code>. Note that <code>${'}'}</code> is legal, and
simply evaluates to <code>'}'</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Quoting in Scripting Elements</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A literal <code>%&gt;</code> is quoted by <code>%\&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Quoting in Template Text</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A literal <code>&lt;%</code> is quoted by <code>&lt;\%</code></p>
</li>
<li>
<p>Only when the EL is enabled for a page (see
<a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>), a literal <code>$</code> can be quoted
by <code>\$</code>, and a literal <code>#</code> can be quoted by <code>\#</code>. This is not required but
is useful for quoting EL expressions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Quoting in Attributes</em></p>
</div>
<div class="paragraph">
<p>Quotation is done consistently regardless of
whether the attribute value is a literal or a request-time attribute
expression. Quoting can be used in attribute values regardless of
whether they are delimited using single or double quotes. It is only
required as described below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>'</code> is quoted as <code>\'</code>. This is required
within a single quote-delimited attribute value.</p>
</li>
<li>
<p>A <code>"</code> is quoted as <code>\"</code>. This is required
within a double quote-delimited attribute value.</p>
</li>
<li>
<p>A <code>\</code> is quoted as <code>\\</code></p>
</li>
<li>
<p>Only when the EL is enabled for a page (see
<a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>), a literal <code>$</code> can be quoted
by <code>\$</code>. Similarly, a literal <code>#</code> can be quoted by <code>\#</code>. This is not
required but is useful for quoting EL expressions.</p>
</li>
<li>
<p>A <code>%&gt;</code> is quoted as <code>%\&gt;</code></p>
</li>
<li>
<p>A <code>&lt;%</code> is quoted as <code>&lt;\%</code></p>
</li>
<li>
<p>The entities <code>&apos;</code> and <code>&quot;</code> are
available to describe single and double quotes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following line shows an illegal attribute value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytags:tag value=&quot;&lt;%= &quot;hi!&quot; %&gt;&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following line shows a legal scriptlet,
but perhaps with an unintended value. The result is <code>Joe said %\&gt;</code> not
<code>Joe said %&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%= &quot;Joe said %\\&gt;&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next lines are all legal quotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%= &quot;Joe said %/&gt;&quot; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%= &quot;Joe said %\&gt;&quot; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;% String joes_statement = &quot;hi!&quot;; %&gt;
    &lt;%= &quot;Joe said \&quot;&quot; + joes_statement + &quot;\&quot;.&quot; %&gt;
    &lt;x:tag value='&lt;%=&quot;Joe said \\&quot;&quot; + joes_statement + &quot;\\&quot;.&quot;%&gt;'/&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:tag value='&lt;%= &quot;hi!&quot; %&gt;' /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:tag value=&quot;&lt;%= \&quot;hi!\&quot; %&gt;&quot; /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:tag value='&lt;%= \&quot;name\&quot; %&gt;' /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:tag value=&quot;&lt;%= \&quot;Joe said 'hello'\&quot; %&gt;&quot;/&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:tag value=&quot;&lt;%= \&quot;Joe said \\\&quot;hello\\\&quot; \&quot; %&gt;&quot;/&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;x:tag value=&quot;end expression %\&gt;&quot;/&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;% String s=&quot;abc&quot;; %&gt;
    &lt;x:tag value=&quot;&lt;%= s + \&quot;def\&quot; + \&quot;jkl\&quot; + 'm' + \'n\' %&gt;&quot; /&gt;
    &lt;x:tag value='&lt;%= s + \&quot;def\&quot; + &quot;jkl&quot; + \'m\' + \'n\' %&gt;' /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>XML Documents</em></p>
</div>
<div class="paragraph">
<p>The quoting conventions are different from
those of XML. See <a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="overall-semantics-of-a-jsp-page"><a class="anchor" href="#overall-semantics-of-a-jsp-page"></a>1.7. Overall Semantics of a JSP Page</h3>
<div class="paragraph">
<p>A JSP page implementation class defines a
<code>_jspService()</code> method mapping from the request to the response object.
Some details of this transformation are specific to the scripting
language used (see <a href="#scripting">Chapter 9, <em>Scripting</em></a>). Most details
are not language specific and are described in this chapter.</p>
</div>
<div class="paragraph">
<p>The content of a JSP page is devoted largely
to describing the data that is written into the output stream of the
response. (The JSP container usually sends this data back to the
client.) The description is based on a <code>JspWriter</code> object that is
exposed through the implicit object <code>out</code> (see <a href="#implicit-objects">Section 1.8.3, &#8220;Implicit Objects&#8221;</a>).
Its value varies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initially, <code>out</code> is a new <code>JspWriter</code>
object. This object may be different from the stream object returned
from <code>response.getWriter()</code>, and may be considered to be interposed on
the latter in order to implement buffering (see <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>).
This is the
initial <code>out</code> object. JSP page authors are prohibited from writing
directly to either the <code>PrintWriter</code> or <code>OutputStream</code> associated with
the <code>ServletResponse</code>.</p>
</li>
<li>
<p>The JSP container should not invoke
<code>response.getWriter()</code> until the time when the first portion of the
content is to be sent to the client. This enables a number of uses of
JSP, including using JSP as a language to “glue” actions that deliver
binary content, or reliably forwarding to a servlet, or change
dynamically the content type of the response before generating content.
See <a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a>.</p>
</li>
<li>
<p>Within the body of some actions, <code>out</code> may
be temporarily re-assigned to a different (nested) instance of a
<code>JspWriter</code> object. Whether this is the case depends on the details of
the action’s semantics. Typically the content of these temporary streams
is appended to the stream previously referred to by <code>out</code>, and <code>out</code> is
subsequently re-assigned to refer to the previous (nesting) stream. Such
nested streams are always buffered, and require explicit flushing to a
nesting stream or their contents will be discarded.</p>
</li>
<li>
<p>If the initial <code>out</code> <code>JspWriter</code> object is
buffered, then depending upon the value of the <code>autoFlush</code> attribute of
the <code>page</code> directive, the content of that buffer will either be
automatically flushed out to the <code>ServletResponse</code> output stream to
obviate overflow, or an exception shall be thrown to signal buffer
overflow. If the initial <code>out</code> <code>JspWriter</code> is unbuffered, then content
written to it will be passed directly through to the <code>ServletResponse</code>
output stream.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A JSP page can also describe what should
happen when some specific events occur. In JSP 4.1, the only events that
can be described are the initialization and the destruction of the page.
These events are described using “well-known method names” in
declaration elements. (See <a href="#jsp-container">Chapter 11, <em>JSP Container</em></a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="objects"><a class="anchor" href="#objects"></a>1.8. Objects</h3>
<div class="paragraph">
<p>A JSP page can access, create, and modify
server-side objects. Objects can be made visible to actions, EL
expressions and to scripting elements. An object has a scope describing
what entities can access the object.</p>
</div>
<div class="paragraph">
<p>Actions can access objects using a name in
the <code>PageContext</code> object.</p>
</div>
<div class="paragraph">
<p>An object exposed through a scripting
variable has a scope within the page. Scripting elements can access some
objects directly via a scripting variable. Some implicit objects are
visible via scripting variables and EL expressions in any JSP page.</p>
</div>
<div class="sect3">
<h4 id="objects-and-variables"><a class="anchor" href="#objects-and-variables"></a>1.8.1. Objects and Variables</h4>
<div class="paragraph">
<p>An object may be made accessible to code in
the scripting elements through a scripting language variable. An element
can define scripting variables that will contain, at process
request-time, a reference to the object defined by the element, although
other references may exist depending on the scope of the object.</p>
</div>
<div class="paragraph">
<p>An element type indicates the name and type
of such variables although details on the name of the variable may
depend on the Scripting Language. The scripting language may also affect
how different features of the object are exposed. For example, in the
JavaBeans specification, properties are exposed via getter and setter
methods, while these properties are available directly as variables in
the JavaScript™ programming language.</p>
</div>
<div class="paragraph">
<p>The exact rules for the visibility of the
variables are scripting language specific.
<a href="#what-is-a-jsp-page-2">Section 1.1, &#8220;What Is a JSP Page&#8221;</a> defines the rules for when the
<code>language</code> attribute of the <code>page</code> directive is <code>java</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="objects-and-scopes"><a class="anchor" href="#objects-and-scopes"></a>1.8.2. Objects and Scopes</h4>
<div class="paragraph">
<p>A JSP page can create and/or access some Java
objects when processing a request. The JSP specification indicates that
some objects are created implicitly, perhaps as a result of a directive
(see <a href="#implicit-objects">Section 1.8.3, &#8220;Implicit Objects&#8221;</a>). Other objects
are created explicitly through actions, or created directly using
scripting code. Created objects have a scope attribute defining where
there is a reference to the object and when that reference is removed.</p>
</div>
<div class="paragraph">
<p>The created objects may also be visible
directly to scripting elements through scripting-level variables (see <a href="#implicit-objects">Section 1.8.3, &#8220;Implicit Objects&#8221;</a>).</p>
</div>
<div class="paragraph">
<p>Each action and declaration defines, as part
of its semantics, what objects it creates, with what scope attribute,
and whether they are available to the scripting elements.</p>
</div>
<div class="paragraph">
<p>Objects are created within a JSP page
instance that is responding to a request object. There are several
scopes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>page</code> - Objects with <code>page</code> scope are
accessible only within the page where they are created. All references
to such an object shall be released after the response is sent back to
the client from the JSP page or the request is forwarded somewhere else.
References to objects with <code>page</code> scope are stored in the <code>pageContext</code>
object.</p>
</li>
<li>
<p><code>request</code> - Objects with <code>request</code> scope
are accessible from pages processing the same request where they were
created. References to the object shall be released after the request is
processed. In particular, if the request is forwarded to a resource in
the same runtime, the object is still reachable. References to objects
with <code>request</code> scope are stored in the <code>request</code> object.</p>
</li>
<li>
<p><code>session</code> - Objects with <code>session</code> scope
are accessible from pages processing requests that are in the same
session as the one in which they were created. It is not legal to define
an object with session scope from within a page that is not
session-aware (see <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>). All references to the object shall be released after the
associated session ends. References to objects with <code>session</code> scope are
stored in the <code>session</code> object associated with the page activation.</p>
</li>
<li>
<p><code>application</code> - Objects with <code>application</code>
scope are accessible from pages processing requests that are in the same
application as they one in which they were created. Objects with
application scope can be defined (and reached) from pages that are not
session-aware. References to objects with <code>application</code> scope are stored
in the <code>application</code> object associated with a page activation. The
<code>application</code> object is the <code>ServletContext</code> obtained from the <code>ServletConfig</code>
object. All references to the object shall be released
when the runtime environment reclaims the <code>ServletContext</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>name</code> should refer to a unique object at
all points in the execution; that is, all the different scopes really
should behave as a single name space. A JSP container implementation may
or may not enforce this rule explicitly for performance reasons.</p>
</div>
</div>
<div class="sect3">
<h4 id="implicit-objects"><a class="anchor" href="#implicit-objects"></a>1.8.3. Implicit Objects</h4>
<div class="paragraph">
<p>JSP page authors have access to certain
implicit objects that are always available for use within scriptlets and
scriptlet expressions through scripting variables that are declared
implicitly at the beginning of the page. All scripting languages are
required to provide access to these objects. See
<a href="#_Implicit_Objects">Section 2.4, &#8220;Implicit Objects&#8221;</a> for the implicit objects
available within EL expressions. Implicit objects are available to tag
handlers through the pageContext object, see below.</p>
</div>
<div class="paragraph">
<p>Each implicit object has a class or interface
type defined in a core Java technology or Jakarta Servlet API package, as
shown in <a href="#_Implicit_Objects_Available_in_JSP_Pages"><strong>Table JSP.1-6</strong> , &#8220;Implicit Objects Available in JSP Pages&#8221;</a>.</p>
</div>
<table id="_Implicit_Objects_Available_in_JSP_Pages" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-6</strong> Implicit Objects Available in JSP Pages</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Semantics &amp; Scope</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">protocol dependent subtype of:
<code>jakarta.servlet.ServletRequest</code>
e.g:
<code>jakarta.servlet.http.HttpServletRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request triggering the service invocation.<br>
<code>request</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>response</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">protocol dependent subtype of:
<code>jakarta.servlet.ServletResponse,</code> e.g:
<code>jakarta.servlet.http.HttpServletResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to the request.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pageContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.jsp.PageContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The page context for this JSP page.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>session</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.http.HttpSession</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The session object created for the requesting
client (if any).<br>
This variable is only valid for HTTP
protocols.<br>
<code>session</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.ServletContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The servlet context obtained from the servlet
configuration object (as in the call
<code>getServletConfig().getContext()</code>).<br>
<code>application</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>out</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.jsp.JspWriter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An object that writes into the output stream.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.ServletConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>ServletConfig</code> for this JSP page.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The instance of this page’s
implementation class processing the current
request.<br>
<code>page</code> scope.<br>
<em>When the scripting
language is <code>java</code> then <code>page</code> is a synonym for <code>this</code> in the body of
the page.</em><br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, the <code>exception</code> implicit object
can be accessed in an error page, as described in
<a href="#_Implicit_Objects_Available_in_Error_Pages"><strong>Table JSP.1-7</strong> , &#8220;Implicit Objects Available in Error Pages&#8221;</a>.</p>
</div>
<table id="_Implicit_Objects_Available_in_Error_Pages" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-7</strong> Implicit Objects Available in Error Pages</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Semantics &amp; Scope</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exception</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.lang.Throwable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The uncaught <code>Throwable</code> that resulted in the
error page being invoked.<br>
 <code>page</code> scope.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Object names with prefixes <code>jsp</code>, <code>jsp</code>,
<code>jspx</code> and <code>jspx</code>, in any combination of upper and lower case, are
reserved by the JSP specification.</p>
</div>
<div class="paragraph">
<p>See
<a href="#how-to-define-new-implicit-objects">Section 7.5.1, &#8220;How to Define New Implicit Objects&#8221;</a> for some non-normative
conventions for the introduction of new implicit objects.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-pagecontext-object"><a class="anchor" href="#the-pagecontext-object"></a>1.8.4. The pageContext Object</h4>
<div class="paragraph">
<p>A <code>PageContext</code> is an object that provides a
context to store references to objects used by the page, encapsulates
implementation-dependent features, and provides convenience methods. A
JSP page implementation class can use a <code>PageContext</code> to run unmodified
in any compliant JSP container while taking advantage of
implementation-specific improvements like high performance <code>JspWriters</code>
.</p>
</div>
<div class="paragraph">
<p>See the <code>jakarta.servlet.jsp</code> Javadocs for more details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="template-text-semantics"><a class="anchor" href="#template-text-semantics"></a>1.9. Template Text Semantics</h3>
<div class="paragraph">
<p>The semantics of template (or uninterpreted)
Text is very simple: the template text is passed through to the current
<code>out</code> <code>JspWriter</code> implicit object, after applying the substitutions of
<a href="#quoting-and-escape-conventions">Section 1.6, &#8220;Quoting and Escape Conventions&#8221;</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="directives"><a class="anchor" href="#directives"></a>1.10. Directives</h3>
<div class="paragraph">
<p>Directives are messages to the JSP container.
Directives have this syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ directive { attr=&quot;value&quot; }* %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There may be optional white space after the
<code>&lt;%@</code> and before <code>%&gt;</code>.</p>
</div>
<div class="paragraph">
<p>This syntax is easy to type and concise but
it is not XML-compatible. <a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a>
describes equivalent alternative mechanisms that are consistent with XML
syntax.</p>
</div>
<div class="paragraph">
<p>Directives do not produce any output into the
current <code>out</code> stream.</p>
</div>
<div class="paragraph">
<p>There are three directives: the <code>page</code>, the <code>taglib</code> and the <code>include</code>
directive which are described next.</p>
</div>
<div class="sect3">
<h4 id="the-page-directive"><a class="anchor" href="#the-page-directive"></a>1.10.1. The <code>page</code> Directive</h4>
<div class="paragraph">
<p>The <code>page</code> directive defines a number of page
dependent properties and communicates these to the JSP container.</p>
</div>
<div class="paragraph">
<p>This <code>&lt;jsp:directive.page&gt;</code> element
(<a href="#the-jspdirective-page-element">Section 6.3.4, &#8220;The jsp:directive.page Element&#8221;</a>) describes the same information
following the XML syntax.</p>
</div>
<div class="paragraph">
<p>A translation unit (JSP source file and any
files included via the <code>include</code> directive) can contain more than one
instance of the <code>page</code> directive, all the attributes will apply to the
complete translation unit (i.e. page directives are position
independent). An exception to this position independence is the use of
the <code>pageEncoding</code> and <code>contentType</code> attributes in the determination of
the page character encoding; for this purpose, they should appear at the
beginning of the page (see <a href="#page-character-encoding">Section 4.1, &#8220;Page Character Encoding&#8221;</a>). There
shall be only one occurrence of any attribute/value pair defined by this
directive in a given translation unit, unless the values for the
duplicate attributes are identical for all occurrences. The <code>import</code> and
<code>pageEncoding</code> attributes are exempt from this rule and can appear
multiple times. Multiple uses of the <code>import</code> attribute are cumulative
(with ordered set union semantics). The <code>pageEncoding</code> attribute can
occur at most once per file (or a translation error will result), and
applies only to the file in which it appears. Other such multiple
attribute/value (re)definitions result in a fatal translation error if
the values do not match.</p>
</div>
<div class="paragraph">
<p>The attribute/value namespace is reserved for
use by this, and subsequent, JSP specification(s).</p>
</div>
<div class="paragraph">
<p>Unrecognized attributes or values result in
fatal translation errors.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following directive provides some
user-visible information on this JSP page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ page info=&quot;my latest JSP Example&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following directive requests no
buffering, and provides an error page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ page buffer=&quot;none&quot; errorPage=&quot;/oops.jsp&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following directive indicates that the
scripting language is based on Java, that the types declared in the
package <code>com.myco</code> are directly available to the scripting code and EL
environment, and that a buffering of 16KB should be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ page language=&quot;java&quot; import=&quot;com.myco.*&quot; buffer=&quot;16kb” %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%@ page page_directive_attr_list %&gt;

page_directive_attr_list ::= { language=&quot;scriptingLanguage&quot;                }
                             { extends=&quot;className&quot;                         }
                             { import=&quot;importList&quot;                         }
                             { session=&quot;true|false&quot;                        }
                             { buffer=&quot;none|sizekb&quot;                        }
                             { autoFlush=&quot;true|false&quot;                      }
                             { info=&quot;info_text&quot;                            }
                             { errorPage=&quot;error_url&quot;                       }
                             { isErrorPage=&quot;true|false&quot;                    }
                             { contentType=&quot;ctinfo&quot;                        }
                             { pageEncoding=&quot;peinfo&quot;                       }
                             { isELIgnored=&quot;true|false&quot;                    }
                             { errorOnELNotFound=&quot;true|false&quot;              }
                             { deferredSyntaxAllowedAsLiteral=&quot;true|false&quot; }
                             { trimDirectiveWhitespaces=&quot;true|false&quot;       }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The details of the attributes are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-8</strong> Page Directive Attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>language</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the scripting language to be used in
the scriptlets, expression scriptlets, and declarations within the body
of the translation unit (the JSP page and any files included using the
<code>include</code> directive below).<br>
In JSP 4.1, the only defined and required
scripting language value for this attribute is <code>java</code> (all lowercase,
case-sensitive).<br>
This specification only describes the
semantics of scripts for when the value of the language attribute is
<code>java</code>.<br>
When <code>java</code> is the value of the scripting
language, the Java Programming Language source code fragments used
within the translation unit are required to conform to the Java
Programming Language Specification in the way indicated in
<a href="#scripting">Chapter 9, <em>Scripting</em></a>.<br>
All scripting languages must provide some
implicit objects that a JSP page author can use in declarations,
scriptlets, and expressions. The specific objects that can be used are
defined in <a href="#implicit-objects">Section 1.8.3, &#8220;Implicit Objects&#8221;</a>.<br>
All scripting languages must support the Java
Runtime Environment (JRE). All scripting languages must expose the Java
technology object model to the script environment, especially implicit
variables, JavaBeans component properties, and public methods.<br>
Future versions of the JSP specification may
define additional values for the language attribute and all such values
are reserved.<br>
It is a fatal translation error for a
directive with a non- <code>java</code> language attribute to appear after the
first scripting element has been encountered.<br>
Default is <code>java</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>extends</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value is a fully qualified Java
programming language class name, that names the superclass of the class
to which this JSP page is transformed (see <a href="#jsp-container">Chapter 11, <em>JSP Container</em></a>).<br>
This attribute should not be used without
careful consideration as it restricts the ability of the JSP container
to provide specialized superclasses that may improve on the quality of
rendered service. See <a href="#how-to-define-new-implicit-objects">Section 7.5.1, &#8220;How to Define New Implicit Objects&#8221;</a> for an
alternate way to introduce objects into a JSP page that does not have
this drawback.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <code>import</code> attribute describes the types
that are available to the scripting and EL environments. The value is as in an
import declaration in the Java programming language, a (comma separated)
list of either a fully qualified Java programming language type name
denoting that type, or of a package name followed by the <code>.*</code> string,
denoting all the public types declared in that package. The import list
shall be imported by the translated JSP page implementation and is thus
available to the scripting and EL environments.<br>
Packages <code>java.lang.*</code>, <code>jakarta.servlet.*</code>,
<code>jakarta.servlet.jsp.*</code>, and <code>jakarta.servlet.http.*</code> are imported implicitly
by the JSP container. No other packages may be part of this implicitly
imported list. Page authors may use the include-prelude feature (see <a href="#defining-implicit-includes">Section 3.3.6, &#8220;Defining Implicit Includes&#8221;</a>) in order
to have additional packages imported transparently into their pages.<br>
This attribute is currently only defined when
the value of the <code>language</code> directive is <code>java</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>session</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the page requires
participation in an (HTTP) session.<br>
If <code>true</code> then the implicit script language
variable named <code>session</code> of type <code>jakarta.servlet.http.HttpSession</code>
references the current/new session for the page.<br>
If <code>false</code> then the page does not participate
in a session; the <code>session</code> implicit variable is unavailable, and any
reference to it within the body of the JSP page is illegal and shall
result in a fatal translation error.<br>
Default is <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the buffering model for the initial
<code>out</code> <code>JspWriter</code> to handle content output from the page.<br>
If <code>none</code>, then there is no buffering and
all output is written directly through to the <code>ServletResponse</code>
<code>PrintWriter</code>.<br>
The size can only be specified in kilobytes.
The suffix <code>kb</code> is mandatory or a translation error must occur.<br>
If a buffer size is specified then output is
buffered with a buffer size not less than that specified.<br>
Depending upon the value of the <code>autoFlush</code>
attribute, the contents of this buffer is either automatically flushed,
or an exception is raised, when overflow would occur.<br>
The default is buffered with an
implementation buffer size of not less than <code>8kb</code>.<br>
The corresponding JSP configuration element
is buffer (see <a href="#setting-default-buffer-size">Section 3.3.11, &#8220;Setting Default Buffer Size&#8221;</a>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>autoFlush</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether the buffered output should
be flushed automatically (<code>true</code> value) when the buffer is filled, or
whether an exception should be raised (<code>false</code> value) to indicate
buffer overflow. It is illegal, resulting in a translation error, to set
<code>autoFlush</code> to <code>false</code> when <code>buffer=none</code>. The default value is <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines an arbitrary string that is
incorporated into the translated page, that can subsequently be obtained
from the page’s implementation of <code>Servlet.getServletInfo</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isErrorPage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the current JSP page is intended
to be the URL target of another JSP page’s <code>errorPage</code>.<br>
If <code>true</code>, then the implicit script language
variable <code>exception</code> is defined and its value is a reference to the
offending Throwable from the source JSP page in error.<br>
If <code>false</code> then the <code>exception</code> implicit
variable is unavailable, and any reference to it within the body of the
JSP page is illegal and shall result in a fatal translation error.<br>
Default is <code>false.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>errorPage</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a URL to a resource to which any Java
programming language <code>Throwable</code> object(s) thrown but not caught by the
page implementation are forwarded for error processing.<br>
The provided URL spec is as in
<a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>.<br>
If the URL names another JSP page then, when
invoked that JSP page’s <code>exception</code> implicit script variable shall
contain a reference to the originating uncaught <code>Throwable</code>.<br>
The default URL is implementation dependent.<br>
Note the <code>Throwable</code> object is transferred by
the throwing page implementation to the error page implementation by
saving the object reference on the common <code>ServletRequest</code> object using
the <code>setAttribute</code> method, with a name of
<code>jakarta.servlet.jsp.jspException</code> (for
backwards-compatibility) and also <code>jakarta.servlet.error.exception</code> (for
compatibility with the servlet specification). See
<a href="#using-jsps-as-error-pages">Section 1.4.3, &#8220;Using JSPs as Error Pages&#8221;</a> for more
details).<br>
Note: if <code>autoFlush=true</code> then if the
contents of the initial <code>JspWriter</code> has been flushed to the
<code>ServletResponse</code> output stream then any subsequent attempt to dispatch
an uncaught exception from the offending page to an <code>errorPage</code> may
fail.<br>
If the page defines an error page via the
<code>page</code> directive, any error pages defined in <code>web.xml</code> will not be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>contentType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the MIME type and the character
encoding for the response of the JSP page, and is also used in
determining the character encoding of the JSP page.<br>
Values are either of the form “<code>TYPE</code>” or “<code>TYPE;charset=CHARSET</code>” with an
optional white space after the “<code>;</code>”.
“<code>TYPE</code>” is a MIME type, see the IANA registry at
<code><a href="http://www.iana.org/assignments/media-types/index.html" class="bare">http://www.iana.org/assignments/media-types/index.html</a></code> for useful
values. “<code>CHARSET</code>”, if present, must be the IANA name for a character
encoding.<br>
The default value for “<code>TYPE</code>” is “<code>text/html</code>” for JSP pages in standard
syntax, or “<code>text/xml</code>” for
JSP documents in XML syntax. If “<code>CHARSET</code>” is not specified, the
response character encoding is determined as described in
<a href="#response-character-encoding">Section 4.2, &#8220;Response Character Encoding&#8221;</a>.<br>
The corresponding JSP configuration element
is default-content-type (see <a href="#declaring-default-content-type">Section 3.3.10, &#8220;Declaring Default Content Type&#8221;</a>). See
<a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a> for complete details on
character encodings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pageEncoding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the character encoding for the JSP
page. The value is of the form “<code>CHARSET</code>”, which must be the IANA
name for a character encoding. For JSP pages in standard syntax, the
character encoding for the JSP page is the charset given by the
<code>pageEncoding</code> attriute if it is present, otherwise the charset given by
the <code>contentType</code> attribute if it is present, otherwise “<code>ISO-8859-1</code>”.<br>
For JSP documents in XML syntax, the
character encoding for the JSP page is determined as described in
section 4.3.3 and appendix F.1 of the XML specification. The
<code>pageEncoding</code> attribute is not needed for such documents. It is a
translation-time error if a document names different encodings in its
XML prolog / text declaration and in the <code>pageEncoding</code> attribute. The
corresponding JSP configuration element is <code>page-encoding</code> (see
<a href="#declaring-page-encodings">Section 3.3.5, &#8220;Declaring Page Encodings&#8221;</a>).<br>
See <a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a> for
complete details on character encodings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isELIgnored</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines whether EL expressions are ignored or
recognized for this page and translation unit. If <code>true</code>, EL
expressions (of the form <code>${...}</code> and <code>#{...}</code>) are ignored by the
container. If <code>false</code>, EL expressions (of the form <code>${...}</code> and
<code>#{...}</code>) are recognized when they appear in template text or action
attributes. The corresponding JSP configuration element is <code>el-ignored</code>
(see <a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>). The default value
varies depending on the <code>web.xml</code> version - see
<a href="#deactivating-el-evaluation">Section 2.5, &#8220;Deactivating EL Evaluation&#8221;</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>errorOnELNotFound</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines whether a <code>PropertyNotFoundException</code> is thrown when an EL expression
contains an identifier that the EL machinery cannot resolve. The corresponding
JSP configuration element is <code>error-on-el-not-found</code>
(see <a href="#_Unknown_EL_Identifiers">Section 3.3.4, &#8220;Unknown EL Identifiers&#8221;</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deferredSyntax-</code><br>
<code>AllowedAsLiteral</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the character sequence #{ is
allowed or not when used as a String literal in this page and
translation unit. If false (the default value), a translation error
occurs when the character sequence is used as a String literal. The
corresponding JSP configuration element is
<code>deferred-syntax-allowed-as-literal</code> (see
<a href="#Deferred_Syntax">Section 3.3.8, &#8220;Deferred Syntax (character sequence <code>#{</code>)&#8221;</a>). See
<a href="#backwards-compatibility-with-jsp-2-0">Section 3.4, &#8220;Backwards Compatibility with JSP 2.0&#8221;</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trimDirective-</code><br>
<code>Whitespaces</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates how whitespaces in template text
should be handled. If true, template text that contains only whitespaces
is removed from the output. The default is not to trim whitespaces. This
attribute is useful to remove the extraneous whitespaces from the end of
a directive that is not followed by template text. The corresponding JSP
configuration element is <code>trim-directive-whitespaces</code> (see
<a href="#removing-whitespaces-from-template-text">Section 3.3.9, &#8220;Removing Whitespaces from Template Text&#8221;</a>). The attribute is ignored by
JSP documents (XML syntax).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="the-taglib-directive"><a class="anchor" href="#the-taglib-directive"></a>1.10.2. The <code>taglib</code> Directive</h4>
<div class="paragraph">
<p>The set of significant tags a JSP container
interprets can be extended through a tag library.</p>
</div>
<div class="paragraph">
<p>The <code>taglib</code> directive in a JSP page declares
that the page uses a tag library, uniquely identifies the tag library
using a URI and associates a tag prefix that will distinguish usage of
the actions in the library.</p>
</div>
<div class="paragraph">
<p>If a JSP container implementation cannot
locate a tag library description, a fatal translation error shall
result.</p>
</div>
<div class="paragraph">
<p>It is a fatal translation error for the
<code>taglib</code> directive to appear after actions or functions using the
prefix.</p>
</div>
<div class="paragraph">
<p>A tag library may include a validation method
that will be consulted to determine if a JSP page is correctly using the
tag library functionality.</p>
</div>
<div class="paragraph">
<p>See <a href="#tag-extensions">Chapter 7, <em>Tag Extensions</em></a> for more specification details. And see
<a href="#tag-library-directive">Section 7.2.3, &#8220;Tag Library Directive&#8221;</a> for an implementation note.</p>
</div>
<div class="paragraph">
<p><a href="#Namespaces_Standard_Actions_and_Tag_Libraries">Section 6.3.1, &#8220;Namespaces, Standard Actions, and Tag Libraries&#8221;</a>
describes how the functionality of this directive can be exposed using
XML syntax.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>In the following example, a tag library is
introduced and made available to this page using the <code>super</code> prefix; no
other tag libraries should be introduced in this page using this prefix.
In this particular case, we assume the tag library includes a <code>doMagic</code>
element type, which is used within the page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib uri=&quot;http://www.mycorp/supertags&quot; prefix=&quot;super&quot; %&gt;
 ...
 &lt;super:doMagic&gt;
 ...
 &lt;/super:doMagic&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib ( uri=&quot;tagLibraryURI&quot; | tagdir=&quot;tagDir&quot; ) prefix=&quot;tagPrefix&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where the attributes are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-9</strong> </caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Either an absolute URI or a relative URI
specification that uniquely identifies the tag library descriptor
associated with this prefix.<br>
The URI is used to locate a description of
the tag library as indicated in <a href="#tag-extensions">Chapter 7, <em>Tag Extensions</em></a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tagdir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates this prefix is to be used to
identify tag extensions installed in the <code>/WEB-INF/tags/</code> directory or a
subdirectory. An implicit tag library descriptor is used (see
<a href="#packaging-tag-files">Section 8.4, &#8220;Packaging Tag Files&#8221;</a> for details). A translation error
must occur if the value does not start with <code>/WEB-INF/tags</code>. A
translation error must occur if the value does not point to a directory
that exists. A translation error must occur if used in conjunction with
the <code>uri</code> attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the prefix string in
<code>&lt;prefix&gt;:&lt;tagname&gt;</code> that is used to distinguish a custom action, e.g
<code>&lt;myPrefix:myTag&gt;</code>.<br>
Prefixes starting with <code>jsp:</code>, <code>jspx:</code>,
<code>java:</code>, <code>jakarta:</code> and <code>servlet:</code>  are reserved.<br>
A prefix must follow the naming convention
specified in the XML namespaces specification.<br>
Empty prefixes are illegal in this version of
the specification, and must result in a translation error.<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A fatal translation-time error will result if
the JSP page translator encounters a tag with name <code>prefix: Name</code> using
a prefix that is introduced using the taglib directive, and <code>Name</code> is
not recognized by the corresponding tag library.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-include-directive"><a class="anchor" href="#the-include-directive"></a>1.10.3. The <code>include</code> Directive</h4>
<div class="paragraph">
<p>The <code>include</code> directive is used to substitute
text and/or code at JSP page translation-time. The <code>&lt;%@ include
file="relativeURLspec" %&gt;</code> directive inserts the text of the specified
resource into the page or tag file. The included file is subject to the
access control available to the JSP container. The <code>file</code> attribute is
as in <a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>With respect to the standard and XML
syntaxes, a file included via the <code>include</code> directive can use either the
same syntax as the including page, or a different syntax. the semantics
for mixed syntax includes are described in
<a href="#including-data-in-jsp-pages">Section 1.10.5, &#8220;Including Data in JSP Pages&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>A JSP container can include a mechanism for
being notified if an included file changes, so the container can
recompile the JSP page. However, the JSP 4.1 specification does not have
a way of directing the JSP container that included files have changed.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:directive.include&gt;</code> element (<a href="#the-jspdirective-include-element">Section 6.3.5, &#8220;The jsp:directive.include Element&#8221;</a>)
describes the same information following the XML syntax.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following example requests the inclusion,
at translation time, of a copyright file. The file may have elements
which will be processed too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ include file=&quot;copyright.html&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ include file=&quot;relativeURLspec&quot; %&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="implicit-includes"><a class="anchor" href="#implicit-includes"></a>1.10.4. Implicit Includes</h4>
<div class="paragraph">
<p>Many JSP pages start with a list of taglib
directives that activate the use of tag libraries within the page. In
some cases, these are the only tag libraries that are supposed to be
used by the JSP page authors. These, and other common conventions are
greately facilitated by two JSP configuration elements:
<code>include-prelude</code> and <code>include-coda</code>. A full description of the
mechanism is in <a href="#defining-implicit-includes">Section 3.3.6, &#8220;Defining Implicit Includes&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>With respect to the standard and XML
syntaxes, just as with the <code>include</code> directive, implicit includes can
use either the same syntax as the including page, or a different syntax.
The semantics for mixed syntax includes are described in
<a href="#including-data-in-jsp-pages">Section 1.10.5, &#8220;Including Data in JSP Pages&#8221;</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="including-data-in-jsp-pages"><a class="anchor" href="#including-data-in-jsp-pages"></a>1.10.5. Including Data in JSP Pages</h4>
<div class="paragraph">
<p>Including data is a significant part of the
tasks in a JSP page. Accordingly, the JSP 4.1 specification has two
include mechanisms suited to different tasks. A summary of their
semantics is shown in <a href="#_Summary_of_Include_Mechanisms_in_JSP_4.1"><strong>Table JSP.1-10</strong> , &#8220;Summary of Include Mechanisms in JSP 4.1&#8221;</a>.</p>
</div>
<table id="_Summary_of_Include_Mechanisms_in_JSP_4.1" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-10</strong> Summary of Include Mechanisms in JSP 4.1</caption>
<colgroup>
<col style="width: 28%;">
<col style="width: 15%;">
<col style="width: 12%;">
<col style="width: 25%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Spec</th>
<th class="tableblock halign-left valign-top">Object</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Section</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock"><strong>Include Directive - Translation-time</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ include file=... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">file-relative</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content is parsed by JSP container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#the-include-directive">Section 1.10.3, &#8220;The <code>include</code> Directive&#8221;</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock"><strong>Include Action - Request-time</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:include page=... /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">page-relative</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">static and dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content is not parsed; it is included in place.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#jsp:include">Section 5.4, &#8220;&lt;jsp:include&gt;&#8221;</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Spec column describes what type of
specification is valid to appear in the given element. The JSP
specification requires a relative URL spec. The reference is resolved by
the web/application server and its URL map is involved. Include
directives are interpreted relative to the current JSP file;
<code>jsp:include</code> actions are interpreted relative to the current JSP page.</p>
</div>
<div class="paragraph">
<p>An include directive regards a resource like
a JSP page as a static object; i.e. the text in the JSP page is
included. An include action regards a resource like a JSP page as a
dynamic object; i.e. the request is sent to that object and the result
of processing it is included.</p>
</div>
<div class="paragraph">
<p>Implicit include directives can also be
requested for a collection of pages through the use of the
<code>&lt;include-prelude&gt;</code> and <code>&lt;include-coda&gt;</code> elements of the JSP
configuration section of <code>web.xml</code>.</p>
</div>
<div class="paragraph">
<p>For translation-time includes, included
content can use either the same syntax as the including page, or a
different syntax. For example, a JSP file written in the standard JSP
syntax can include a JSP file written using the XML syntax. The
following semantics for translation-time includes apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The JSP container must detect the syntax
for each JSP file individually and parse each JSP file according to the
syntax in which it is written.</p>
</li>
<li>
<p>A JSP file written using the XML syntax
must be well-formed according to the "XML" and "Namespaces in XML"
specifications, otherwise a translation error must occur.</p>
</li>
<li>
<p>When including a JSP document (written in
the XML syntax), in the resulting XML View of the translation unit the
root element of the included segment must have the default namespace
reset to "". This is so that any namespaces associated with the empty
prefix in the including document are not carried over to the included
document.</p>
</li>
<li>
<p>When a <code>taglib</code> directive is encountered in
a standard syntax page, the namespace is applied globally, and is added
to the <code>&lt;jsp:root&gt;</code> element of the resulting XML View of the translation
unit.</p>
</li>
<li>
<p>If a <code>taglib</code> directive is encountered in a
standard syntax page that attempts to redefine a prefix that is already
defined in the current scope (by a JSP segment in either syntax), a
translation error must occur unless that prefix is being redefined to
the same namespace URI.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#examples">Section 10.3, &#8220;Examples&#8221;</a> for
examples of how these semantics are applied to actual JSP pages and
documents.</p>
</div>
</div>
<div class="sect3">
<h4 id="additional-directives-for-tag-files"><a class="anchor" href="#additional-directives-for-tag-files"></a>1.10.6. Additional Directives for Tag Files</h4>
<div class="paragraph">
<p>Additional directives are available when
editing a tag file. See <a href="#tag-file-directives">Section 8.5, &#8220;Tag File Directives&#8221;</a> for
details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="el-elements"><a class="anchor" href="#el-elements"></a>1.11. EL Elements</h3>
<div class="paragraph">
<p>EL expressions can appear in template data
and in attribute values. EL expressions are defined in more detail in
<a href="#expression-language">Chapter 2, <em>Expression Language</em></a>.</p>
</div>
<div class="paragraph">
<p>EL expressions can be disabled through the
use of JSP configuration elements and page directives; see
<a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a> and
<a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>EL expressions, when not disabled, can be
used anywhere within template data.</p>
</div>
<div class="paragraph">
<p>EL expressions can be used in any attribute
of a standard action that this specification indicates can accept a
run-time expression value, and in any attribute of a custom action that
has been indicated to accept run-time expressions (i.e. their associated
<code>&lt;rtexprvalue&gt;</code> in the TLD is <code>true</code> ; see the XML schema for TLDs).</p>
</div>
</div>
<div class="sect2">
<h3 id="scripting-elements"><a class="anchor" href="#scripting-elements"></a>1.12. Scripting Elements</h3>
<div class="paragraph">
<p>Scripting elements are commonly used to
manipulate objects and to perform computation that affects the content
generated.</p>
</div>
<div class="paragraph">
<p>JSP 2.0 added EL expressions as an alternative
to scripting elements. These are described in more detail in
<a href="#expression-language">Chapter 2, <em>Expression Language</em></a>. Note that scripting
elements can be disabled through the use of the <code>scripting-invalid</code>
element in the web.xml deployment descriptor (see
<a href="#_Disabling_Scripting_Elements">Section 3.3.3, &#8220;Disabling Scripting Elements&#8221;</a>).</p>
</div>
<div class="paragraph">
<p>There are three other classes of scripting
elements: declarations, scriptlets and expressions. The scripting
language used in the current page is given by the value of the
<code>language</code> directive (see <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>). In JSP 4.1, the only
value defined is <code>java</code>.</p>
</div>
<div class="paragraph">
<p>Declarations are used to declare scripting
language constructs that are available to all other scripting elements.
Scriptlets are used to describe actions to be performed in response to
some request. Scriptlets that are program fragments can also be used to
do things like iterations and conditional execution of other elements in
the JSP page. Expressions are complete expressions in the scripting
language that get evaluated at response time; commonly, the result is
converted into a string and inserted into the output stream.</p>
</div>
<div class="paragraph">
<p>All JSP containers must support scripting
elements based on the Java programming language. Additionally, JSP
containers may also support other scripting languages. All such
scripting languages must support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manipulation of Java objects.</p>
</li>
<li>
<p>Invocation of methods on Java objects.</p>
</li>
<li>
<p>Catching of Java language exceptions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The precise definition of the semantics for
scripting done using elements based on the Java programming language is
given in <a href="#scripting">Chapter 9, <em>Scripting</em></a>.</p>
</div>
<div class="paragraph">
<p>The semantics for other scripting languages
are not precisely defined in this version of the specification, which
means that portability across implementations cannot be guaranteed.
Precise definitions may be given for other languages in the future.</p>
</div>
<div class="paragraph">
<p>Each scripting element has a <code>&lt;%</code> -based
syntax as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%! this is a declaration %&gt;
 &lt;% this is a scriptlet %&gt;
 &lt;%= this is an expression %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>White space is optional after <code>&lt;%!</code>, <code>&lt;%</code>,
and <code>&lt;%=</code>, and before <code>%&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The equivalent XML elements for these
scripting elements are described in
<a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>.</p>
</div>
<div class="sect3">
<h4 id="declarations"><a class="anchor" href="#declarations"></a>1.12.1. Declarations</h4>
<div class="paragraph">
<p>Declarations are used to declare variables
and methods in the scripting language used in a JSP page. A declaration
must be a complete declarative statement, or sequence thereof, according
to the syntax of the scripting language specified.</p>
</div>
<div class="paragraph">
<p>Declarations do not produce any output into
the current <code>out</code> stream.</p>
</div>
<div class="paragraph">
<p>Declarations are initialized when the JSP
page is initialized and are made available to other declarations,
scriptlets, and expressions.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:declaration&gt;</code> element
(<a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>) describes the same information
following the XML syntax.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>For example, the first declaration below
declares an integer, global to the page. The second declaration does the
same and initializes it to zero. This type of initialization should be
done with care in the presence of multiple requests on the page. The
third declaration declares a method global to the page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%! int i; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%! int i = 0; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%! public String f(int i) { if (i&lt;3) return(&quot;...&quot;); ... } %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%! declaration(s) %&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="scriptlets"><a class="anchor" href="#scriptlets"></a>1.12.2. Scriptlets</h4>
<div class="paragraph">
<p>Scriptlets can contain any code fragments
that are valid for the scripting language specified in the <code>language</code>
attribute of the <code>page</code> directive. Whether the code fragment is legal
depends on the details of the scripting language (see
<a href="#scripting">Chapter 9, <em>Scripting</em></a>).</p>
</div>
<div class="paragraph">
<p>Scriptlets are executed at request-processing
time. Whether or not they produce any output into the <code>out</code> stream
depends on the code in the scriptlet. Scriptlets can have side-effects,
modifying the objects visible to them.</p>
</div>
<div class="paragraph">
<p>When all scriptlet fragments in a given
translation unit are combined in the order they appear in the JSP page,
they must yield a valid statement, or sequence of statements, in the
specified scripting language.</p>
</div>
<div class="paragraph">
<p>To use the <code>%&gt;</code> character sequence as literal
characters in a scriptlet, rather than to end the scriptlet, escape them
by typing <code>%\&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:scriptlet&gt;</code> element
(<a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>) describes the same information
following the XML syntax.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>Here is a simple example where the page
changed dynamically depending on the time of day.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;% if
 (Calendar.getInstance().get(Calendar.AM_PM) == Calendar.AM) {%&gt;
 Good Morning
 &lt;% } else { %&gt;
 Good Afternoon
 &lt;% } %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A scriptlet can also have a local variable
declaration, for example the following scriptlet just declares and
initializes an integer, and later increments it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;% int i; i= 0; %&gt;
 About to increment i...
 &lt;% i++; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;% scriptlet %&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="expressions"><a class="anchor" href="#expressions"></a>1.12.3. Expressions</h4>
<div class="paragraph">
<p>An expression element in a JSP page is a
scripting language expression that is evaluated and the result is
coerced to a <code>String</code>. The result is subsequently emitted into the
current <code>out</code> <code>JspWriter</code> object.</p>
</div>
<div class="paragraph">
<p>If the result of the expression cannot be
coerced to a <code>String</code> the following must happen: If the problem is
detected at translation time, a translation time error shall occur. If
the coercion cannot be detected during translation, a
<code>ClassCastException</code> shall be raised at request time.</p>
</div>
<div class="paragraph">
<p>A scripting language may support side-effects
in expressions when the expression is evaluated. Expressions are
evaluated left-to-right in the JSP page. If an expression appears in
more than one run-time attribute, they are evaluated left-to-right in
the tag. An expression might change the value of the <code>out</code> object,
although this is not something to be done lightly.</p>
</div>
<div class="paragraph">
<p>The expression must be a complete expression
in the scripting language in which it is written, or a translation error
must occur.</p>
</div>
<div class="paragraph">
<p>Expressions are evaluated at request
processing time. The value of an expression is converted to a String and
inserted at the proper position in the <code>.jsp</code> file.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:expression&gt;</code> element
(<a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>) describes the same information
following the XML syntax.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>This example inserts the current date.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%= (new java.util.Date()).toLocaleString() %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%= expression %&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="actions"><a class="anchor" href="#actions"></a>1.13. Actions</h3>
<div class="paragraph">
<p>Actions may affect the current <code>out</code> stream
and use, modify and/or create objects. Actions may depend on the details
of the specific request object received by the JSP page.</p>
</div>
<div class="paragraph">
<p>The JSP specification includes some actions
that are standard and must be implemented by all conforming JSP
containers; these actions are described in
<a href="#standard-actions">Chapter 5, <em>Standard Actions</em></a>.</p>
</div>
<div class="paragraph">
<p>New actions are defined according to the
mechanisms described in <a href="#tag-extensions">Chapter 7, <em>Tag Extensions</em></a> and
the <code>jakarta.servlet.jsp.tagext</code> Javadoc and are introduced
using the <code>taglib</code> directive.</p>
</div>
<div class="paragraph">
<p>The syntax for action elements is based on
XML. Actions can be empty or non-empty.</p>
</div>
</div>
<div class="sect2">
<h3 id="tag-attribute-interpretation-semantics"><a class="anchor" href="#tag-attribute-interpretation-semantics"></a>1.14. Tag Attribute Interpretation Semantics</h3>
<div class="paragraph">
<p>The interpretation of all actions start by
evaluating the values given to its attributes left to right, and
assigning the values to the attributes. In the process some conversions
may be applicable; the rules for them are described in
<a href="#type-conversions">Section 1.14.2, &#8220;Type Conversions&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>Many values are fixed translation-time
values, but JSP 4.1 also provides a mechanism for describing values that
are computed at request time, the rules are described in
<a href="#request-time-attribute-values">Section 1.14.1, &#8220;Request Time Attribute Values&#8221;</a>.</p>
</div>
<div class="sect3">
<h4 id="request-time-attribute-values"><a class="anchor" href="#request-time-attribute-values"></a>1.14.1. Request Time Attribute Values</h4>
<div class="paragraph">
<p>An attribute value of the form <code>"&lt;%=
scriptlet_expr %&gt;"</code> or <code>'&lt;%= scriptlet_expr %&gt;'</code> denotes a request-time
attribute value. The value denoted is that of the scriptlet expression
involved. If Expression Language evaluation is not deactivated for the
translation unit (see <a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>) then
request-time attribute values can also be specified using the EL through
the syntax <code>'${el_expr}'</code> or <code>"${el_expr}"</code> (as well as
<code>'#{el_expr}'</code> or <code>"#{el_expr}"</code>). Containers must also recognize
multiple EL expressions mixed with optional string constants. For
example, <code>"Version ${major}.${minor} Installed"</code> is a valid request-time
attribute value.</p>
</div>
<div class="paragraph">
<p>Request-time attribute values can only be
used in actions. If a request-time attribute value is used in a
directive, a translation error must occur. If there are more than one
such attribute in a tag, the expressions are evaluated left-to-right.</p>
</div>
<div class="paragraph">
<p>Quotation is done as in any other attribute
value (<a href="#quoting-and-escape-conventions">Section 1.6, &#8220;Quoting and Escape Conventions&#8221;</a>).</p>
</div>
<div class="paragraph">
<p>Only attribute values can be denoted this way
(the name of the attribute is always an explicit name). When using
scriptlet expressions, the expression must appear by itself (multiple
expressions, and mixing of expressions and string constants are not
permitted). Multiple operations must be performed within the expression.
Type conversions are described in <a href="#type-conversions">Section 1.14.2, &#8220;Type Conversions&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>By default, except in tag files, all
attributes have page translation-time semantics. Attempting to specify a
scriptlet expression or EL expression as the value for an attribute that
(by default or otherwise) has page translation time semantics is
illegal, and will result in a fatal translation error. The type of an
action element indicates whether a given attribute will accept
request-time attribute values.</p>
</div>
<div class="paragraph">
<p>Most attributes in the standard actions from
<a href="#standard-actions">Chapter 5, <em>Standard Actions</em></a> have page translation-time
semantics, but the following attributes accept request-time attribute
expressions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>value</code> attribute of <code>jsp:setProperty</code>
(<a href="#jsp:setProperty">Section 5.2, &#8220;&lt;jsp:setProperty&gt;&#8221;</a>).</p>
</li>
<li>
<p>The <code>beanName</code> attribute of <code>jsp:useBean</code>
(<a href="#jsp:useBean">Section 5.1, &#8220;&lt;jsp:useBean&gt;&#8221;</a>).</p>
</li>
<li>
<p>The <code>page</code> attribute of <code>jsp:include</code>
(<a href="#jsp:include">Section 5.4, &#8220;&lt;jsp:include&gt;&#8221;</a>).</p>
</li>
<li>
<p>The <code>page</code> attribute of <code>jsp:forward</code>
(<a href="#jsp:forward">Section 5.5, &#8220;&lt;jsp:forward&gt;&#8221;</a>).</p>
</li>
<li>
<p>The <code>value</code> attribute of <code>jsp:param</code>
(<a href="#jsp:param">Section 5.6, &#8220;&lt;jsp:param&gt;&#8221;</a>).</p>
</li>
<li>
<p>The <code>name</code> attribute of <code>jsp:element</code>
(<a href="#jsp:element">Section 5.11, &#8220;&lt;jsp:element&gt;&#8221;</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="type-conversions"><a class="anchor" href="#type-conversions"></a>1.14.2. Type Conversions</h4>
<div class="paragraph">
<p>We describe two cases for type conversions.</p>
</div>
<div class="sect4">
<h5 id="conversions-from-string-values"><a class="anchor" href="#conversions-from-string-values"></a>1.14.2.1. Conversions from String values</h5>
<div class="paragraph">
<p>A string value can be used to describe a
value of a non-String type through a conversion. Whether the conversion
is possible, and, if so, what is it, depends on a target type.</p>
</div>
<div class="paragraph">
<p>String values can be used to assign values to
a type that has a <code>PropertyEditor</code> class as indicated in the JavaBeans
specification. When that is the case, the <code>setAsText(String)</code> method is
used. A conversion failure arises if the method throws an
<code>IllegalArgumentException</code>.</p>
</div>
<div class="paragraph">
<p>String values can also be used to assign to
the types as listed in <a href="#_Conversion_from_string_values_to_target_type"><strong>Table JSP.1-11</strong> , &#8220;Conversions from string values to target type&#8221;</a>. The conversion applied is that shown
in the table.</p>
</div>
<div class="paragraph">
<p>A conversion failure leads to an error,
whether at translation time or request-time.</p>
</div>
<table id="_Conversion_from_string_values_to_target_type" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.1-11</strong> Conversions from string values to target type</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target Type</th>
<th class="tableblock halign-left valign-top">Source String Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean Property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As converted by the corresponding
PropertyEditor, if any, using PropertyEditor. <code>setAsText(string-literal)
and PropertyEditor.getValue().</code> If there is no corresponding
<code>PropertyEditor</code> or the <code>PropertyEditor</code> throws an exception, ‘<code>null</code>’
if the string is empty, otherwise error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean or Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Boolean.valueOf(String)</code>. This results in <code>false</code> if the
String is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte or Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Byte.valueOf(String)</code> or <code>(byte) 0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">char or Character</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in <code>String.charAt(0)</code>, or <code>(char) 0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double or Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Double.valueOf(String)</code>, or <code>0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int or Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Integer.valueOf(String)</code>, or <code>0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float or Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Float.valueOf(String)</code>, or <code>0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long or Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Long.valueOf(String)</code>, or <code>0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short or Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As indicated in
<code>java.lang.Short.valueOf(String)</code>, or <code>0</code> if the string is empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As if new <code>String(string-literal)</code>. This
results in <code>new String("")</code> if the string is empty.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These conversions are part of the generic
mechanism used to assign values to attributes of actions: when an
attribute value that is not a request-time attribute is assigned to a
given attribute, the conversion described here is used, using the type
of the attribute as the target type. The type of each attribute of the
standard actions is described in this specification, while the types of
the attributes of a custom action are described in its associated Tag
Library Descriptor.</p>
</div>
<div class="paragraph">
<p>A given action may also define additional
ways where type/value conversions are used. In particular,
<a href="#jsp:setProperty">Section 5.2, &#8220;&lt;jsp:setProperty&gt;&#8221;</a> describes the mechanism used
for the setProperty standard action.</p>
</div>
</div>
<div class="sect4">
<h5 id="conversions-from-request-time-expressions"><a class="anchor" href="#conversions-from-request-time-expressions"></a>1.14.2.2. Conversions from request-time expressions</h5>
<div class="paragraph">
<p>Request-time expressions can be assigned to
properties of any type. In the case of scriptlet expressions, no
automatic conversions will be performed. In the case of EL expressions,
the rules in section 1.23, "Type Conversion" of the EL 6.1 specification
document must be followed.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expression-language"><a class="anchor" href="#expression-language"></a>2. Expression Language</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please consult the Jakarta Expression Language 6.1 specification document
for details on the Expression Language supported by JSP 4.1.</p>
</div>
<div class="paragraph">
<p>The addition of the EL to the JSP technology
facilitates the writing of scriptless JSP pages. These pages can
use EL expressions but can’t use Java scriptlets, Java expressions, or
Java declaration elements. This usage pattern can be enforced through
the <code>scripting-invalid</code> JSP configuration element.</p>
</div>
<div class="paragraph">
<p>The EL is available in attribute values for
standard and custom actions and within template text.</p>
</div>
<div class="paragraph">
<p>This chapter describes how the expression
language is integrated within the JSP 4.1 environment.</p>
</div>
<div class="sect2">
<h3 id="syntax-of-expressions-in-jsp-pages-vs"><a class="anchor" href="#syntax-of-expressions-in-jsp-pages-vs"></a>2.1. Syntax of Expressions in JSP Pages: ${} vs #{}</h3>
<div class="paragraph">
<p>There are two constructs to represent EL
expressions: <code>${expr}</code> and <code>#{expr}</code>. While the EL parses and
evaluates <code>${}</code> and <code>#{}</code> the same way, additional restrictions are
placed on the usage of these delimiters in JSP pages.</p>
</div>
<div class="paragraph">
<p>An EL expression that is evaluated
immediately is represented in JSP with the syntax <code>${}</code>, while an EL
expression whose evaluation is deferred is represented with the syntax
<code>#{}</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="expressions-and-template-text"><a class="anchor" href="#expressions-and-template-text"></a>2.2. Expressions and Template Text</h3>
<div class="paragraph">
<p>The EL can be used directly in template text,
be it inside the body of a custom or standard actions or in template
text outside of any action.Exceptions are if the body of the tag is
<code>tagdependent</code>, or if EL is turned off (usually for compatibility
issues) explicitly through a directive or implicitly; see below.</p>
</div>
<div class="paragraph">
<p>Only the <code>${}</code> syntax is allowed for
expressions in template text. A translation error will result if <code>#{}</code>
is used in template text unless <code>#{}</code> is turned off via a backwards
compatibility mechanism.</p>
</div>
<div class="paragraph">
<p>All EL expressions in JSP template text are
evaluated as Strings, and are evaluated by the JSP engine immediately
when the page response is rendered.</p>
</div>
<div class="paragraph">
<p>The semantics of an EL expression are the
same as with Java expressions: the value is computed and inserted into
the current output. In cases where escaping is desired (for example, to
help prevent cross-site scripting attacks), the JSTL core tag <code>&lt;c:out&gt;</code>
can be used. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;c:out value=&quot;${anELexpression}&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following shows a custom action where two
EL expressions are used to access bean properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;c:wombat&gt;
 One value is ${bean1.a} and another is ${bean2.a.c}
 &lt;/c:wombat&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="expressions-and-attribute-values"><a class="anchor" href="#expressions-and-attribute-values"></a>2.3. Expressions and Attribute Values</h3>
<div class="paragraph">
<p>EL expressions can be used in any attribute
that can accept a run-time expression, be it a standard action or a
custom action. For more details, see the sections on backward
compatibility issues, specifically <a href="#deactivating-el-evaluation">Section 2.5, &#8220;Deactivating EL Evaluation&#8221;</a> and <a href="#disabling-scripting-elements">Section 2.6, &#8220;Disabling Scripting Elements&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>For example, the following shows a
conditional action that uses the EL to test whether a property of a bean
is less than 3.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;c:if test=&quot;${bean1.a &lt; 3}&quot;&gt;
 ...
 &lt;/c:if&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the normal JSP coercion mechanism
already allows for:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytags:if test=&quot;true&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>An EL expression that appears in an attribute
value is processed differently depending on the attribute’s type
category defined in the TLD. Details are provided in the sections below.</p>
</div>
<div class="sect3">
<h4 id="static-attribute"><a class="anchor" href="#static-attribute"></a>2.3.1. Static Attribute</h4>
<div class="ulist">
<ul>
<li>
<p>Defined in the TLD through element
<code>&lt;rtexprvalue&gt;</code> set to <code>false</code>.</p>
</li>
<li>
<p>Type is always <code>java.lang.String</code>.</p>
</li>
<li>
<p>Value must be a String literal (since it is
determined at translation time). It is illegal to specify an expression.</p>
</li>
<li>
<p>Type in the TLD is ignored. The String
value is converted to the attribute’s target type (as defined in the tag
handler) using the conversions defined in
<a href="#_Conversion_from_string_values_to_target_type"><strong>Table JSP.1-11</strong> , &#8220;Conversions from string values to target type&#8221;</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dynamic-attribute"><a class="anchor" href="#dynamic-attribute"></a>2.3.2. Dynamic Attribute</h4>
<div class="ulist">
<ul>
<li>
<p>Defined in the TLD through element
<code>&lt;rtexprvalue&gt;</code> set to <code>true</code>.</p>
</li>
<li>
<p>If type is not specified in the TLD,
defaults to <code>java.lang.Object</code>.</p>
</li>
<li>
<p>Value can be a String literal, a scriptlet
expression, or an EL expression using the <code>${}</code> syntax.</p>
</li>
<li>
<p>An EL expression is parsed using
<code>ExpressionFactory.createValueExpression()</code> (with an expected type
equal to the type specified in the TLD) and the evaluation of the
expression takes place immediately by calling method <code>getValue()</code> on the
<code>ValueExpression</code>. After evaluation of the expression, the value is
coerced to the expected type. The resulting value is passed in to the
setter method for the tag attribute.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="deferred-value"><a class="anchor" href="#deferred-value"></a>2.3.3. Deferred Value</h4>
<div class="ulist">
<ul>
<li>
<p>Defined in the TLD through element
<code>&lt;deferred-value&gt;</code>.</p>
</li>
<li>
<p>If type is not specified in the TLD,
defaults to <code>java.lang.Object</code>.</p>
</li>
<li>
<p>Value can be a String literal or an EL
expression using the <code>#{}</code> syntax.</p>
</li>
<li>
<p>An EL expression is parsed using
<code>ExpressionFactory.createValueExpression()</code> (with an expected type
equal to the type specified in the TLD). The expression is not
evaluated. The result of parsing the expression is passed directly to
the setter method of the tag attribute, whose argument type must be
<code>jakarta.el.ValueExpression</code>. This allows for deferred evaluation of EL
expressions. When the expression is evaluated by the tag handler, the
value is coerced to the expected type. If a static value is provided, it
is converted to a <code>ValueExpression</code> where <code>isLiteralText()</code> returns
<code>true</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="deferred-method"><a class="anchor" href="#deferred-method"></a>2.3.4. Deferred Method</h4>
<div class="ulist">
<ul>
<li>
<p>Defined in the TLD through element
<code>&lt;deferred-method&gt;</code>.</p>
</li>
<li>
<p>If the method signature is not defined in
the TLD, it defaults to <code>void method()</code>.</p>
</li>
<li>
<p>Value can be a String literal or an EL
expression using the <code>#{}</code> syntax.</p>
</li>
<li>
<p>An EL expression is parsed using
<code>ExpressionFactory.createMethodExpression()</code> (with a method signature
equal to the method signature specified in the TLD). The result of
parsing the expression is passed directly to the setter method of the
tag attribute, whose argument type must be <code>jakarta.el.MethodExpression</code>.
This allows for deferred processing of EL expressions that identify a
method to be invoked on an Object.</p>
</li>
<li>
<p>A String literal can be provided, as long
as the return type of the deferred method signature is not void. A
<code>MethodExpression</code> is created, which when invoked, returns the String
literal coerced to expected return type (the standard EL coercion rules -
see section 1.23, "Type Conversion" of the EL 6.1 specification) apply. A
translation error occurs if the return type is void or if the string
literal cannot be coerced to the return type of the deferred method
signature.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dynamic-attribute-or-deferred-expression"><a class="anchor" href="#dynamic-attribute-or-deferred-expression"></a>2.3.5. Dynamic Attribute or Deferred Expression</h4>
<div class="ulist">
<ul>
<li>
<p>Defined in the TLD through elements
<code>&lt;rtexprvalue&gt;</code> (see <a href="#dynamic-attribute">Section 2.3.2, &#8220;Dynamic Attribute&#8221;</a>) specified together with <code>&lt;deferred-value&gt;</code> (see <a href="#deferred-value">Section 2.3.3, &#8220;Deferred Value&#8221;</a>) or <code>&lt;deferred-method&gt;</code>
(see <a href="#deferred-method">Section 2.3.4, &#8220;Deferred Method&#8221;</a>).</p>
</li>
<li>
<p>Value can be a String literal, a scriptlet
expression, or an EL expression using the <code>${}</code> or <code>#{}</code> syntax. The
attribute value is considered a deferred value or a deferred method if
the value is an EL expression using the <code>#{}</code> syntax. It is considered
a dynamic attribute otherwise.</p>
</li>
<li>
<p>The attribute value is processed according
to its type category as described above. The only difference is that the
setter method argument must be of type <code>java.lang.Object</code>. The setter
method will normally use <code>instanceof</code> to discriminate whether the
attribute value is a dynamic attribute or a deferred value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="examples-of-using-and"><a class="anchor" href="#examples-of-using-and"></a>2.3.6. Examples of Using ${} and #{}</h4>
<div class="paragraph">
<p>As an example, assume a tag with the
following three attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>static - <code>rtexprvalue=false,
type=java.lang.String</code></p>
</li>
<li>
<p>dynamic - <code>rtexprvalue=true,
type=java.lang.String</code></p>
</li>
<li>
<p>deferred - <code>rtexprvalue=true,
type=java.lang.ValueExpression</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following tags would yield the following
results:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.2-1</strong> Examples of Using ${} and #{}</caption>
<colgroup>
<col style="width: 90.909%;">
<col style="width: 9.091%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Expression</th>
<th class="tableblock halign-left valign-top">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag static="xyz" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag static="${x[y]}" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag static="#{x[y]}" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag dynamic="xyz" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag dynamic="${x[y]}" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag dynamic="#{x[y]}" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag deferred="xyz" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag deferred="${x[y]}" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ERROR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my:tag deferred="#{x[y]}" /&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_Implicit_Objects"><a class="anchor" href="#_Implicit_Objects"></a>2.4. Implicit Objects</h3>
<div class="paragraph">
<p>There are several implicit objects that are
available to EL expressions used in JSP pages. These objects are always
available under these names:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pageContext</code> - the <code>PageContext</code> object</p>
</li>
<li>
<p><code>pageScope</code> - a <code>Map</code> that maps
page-scoped attribute names to their values</p>
</li>
<li>
<p><code>requestScope</code> - a <code>Map</code> that maps
request-scoped attribute names to their values</p>
</li>
<li>
<p><code>sessionScope</code> - a <code>Map</code> that maps
session-scoped attribute names to their values</p>
</li>
<li>
<p><code>applicationScope</code> - a <code>Map</code> that maps
application-scoped attribute names to their values</p>
</li>
<li>
<p><code>param</code> - a <code>Map</code> that maps parameter
names to a single String parameter value (obtained by calling
<code>ServletRequest.getParameter(String name)</code>)</p>
</li>
<li>
<p><code>paramValues</code> - a <code>Map</code> that maps
parameter names to a <code>String[]</code> of all values for that parameter
(obtained by calling <code>ServletRequest.getParameterValues(String name)</code>)</p>
</li>
<li>
<p><code>header</code> - a <code>Map</code> that maps header names
to a single String header value (obtained by calling
<code>HttpServletRequest.getHeader(String name)</code>)</p>
</li>
<li>
<p><code>headerValues</code> - a <code>Map</code> that maps header
names to a <code>String[]</code> of all values for that header (obtained by calling
<code>HttpervletRequest.getHeaders(String)</code>)</p>
</li>
<li>
<p><code>cookie</code> - a <code>Map</code> that maps cookie names
to a single <code>Cookie</code> object. Cookies are retrieved according to the
semantics of <code>HttpServletRequest.getCookies()</code>. If the same name is
shared by multiple cookies, an implementation must use the first one
encountered in the array of <code>Cookie</code> objects returned by the
<code>getCookies()</code> method. However, users of the cookie implicit object must
be aware that the ordering of cookies is currently unspecified in the
servlet specification.</p>
</li>
<li>
<p><code>initParam</code> - a <code>Map</code> that maps context
initialization parameter names to their <code>String</code> parameter value
(obtained by calling <code>ServletContext.getInitParameter(String name)</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table shows some examples of
using these implicit objects:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.2-2</strong> Examples of Using Implicit Objects</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Expression</th>
<th class="tableblock halign-left valign-top">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${pageContext.request.requestURI}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request&#8217;s URI (obtained from
<code>HttpServletRequest</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${sessionScope.profile}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The session-scoped attribute named <code>profile</code>
(<code>null</code> if not found)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${param.productId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>String</code> value of the <code>productId</code>
parameter, or <code>null</code> if not found</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${paramValues.productId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>String[]</code> containing all values of the
<code>productId</code> parameter, or <code>null</code> if not found</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="deactivating-el-evaluation"><a class="anchor" href="#deactivating-el-evaluation"></a>2.5. Deactivating EL Evaluation</h3>
<div class="paragraph">
<p>Since the syntactic patterns <code>${ expr }</code>
and <code>#{ expr }</code> were not reserved in the JSP specifications before
JSP 2.0, there may be situations where such patterns appear but the
intention is not to activate EL expression evaluation but rather to pass
through the pattern verbatim. To address this, the EL evaluation
machinery can be deactivated as indicated in
<a href="#_Deactivating_EL_Evaluation">Section 3.3.2, &#8220;Deactivating EL Evaluation&#8221;</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="disabling-scripting-elements"><a class="anchor" href="#disabling-scripting-elements"></a>2.6. Disabling Scripting Elements</h3>
<div class="paragraph">
<p>With the addition of the EL, some JSP page
authors, or page authoring groups, may want to follow a methodology
where scripting elements are not allowed. See
<a href="#_Disabling_Scripting_Elements">Section 3.3.3, &#8220;Disabling Scripting Elements&#8221;</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="unknown-el-identifiers"><a class="anchor" href="#unknown-el-identifiers"></a>2.7. Unknown EL Identifiers</h3>
<div class="paragraph">
<p>The default behaviour of the <code>NotFoundELResolver</code> is to return null when
attempting to resolve an unknown identifier. This can mask bugs and therefore
may not always be the desired behaviour. To address this, the default behaviour
can be changed as indicated in
<a href="#_Unknown_EL_Identifiers">Section 3.3.4, &#8220;Unknown EL Identifiers&#8221;</a></p>
</div>
</div>
<div class="sect2">
<h3 id="invalid-el-expressions"><a class="anchor" href="#invalid-el-expressions"></a>2.8. Invalid EL Expressions</h3>
<div class="paragraph">
<p>JSP containers are required to produce a
translation error when a syntactically invalid EL expression is
encountered in an attribute value or within template text. The syntax of
an EL expression is described in detail in the EL specification
document.</p>
</div>
</div>
<div class="sect2">
<h3 id="errors-warnings-default-values"><a class="anchor" href="#errors-warnings-default-values"></a>2.9. Errors, Warnings, Default Values</h3>
<div class="paragraph">
<p>JSP pages are mostly used in presentation,
and in that usage, experience suggests that it is most important to be
able to provide as good a presentation as possible, even when there are
simple errors in the page. To meet this requirement, the EL does not
provide warnings, just default values and errors. Default values are
type-correct values that are assigned to a subexpression when there is
some problem. An error is an exception thrown (to be handled by the
standard JSP machinery).</p>
</div>
</div>
<div class="sect2">
<h3 id="resolution-of-variables-and-their-properties"><a class="anchor" href="#resolution-of-variables-and-their-properties"></a>2.10. Resolution of Variables and their Properties</h3>
<div class="paragraph">
<p>The EL API provides a generalized mechanism,
an <code>ELResolver</code>, implemented by the JSP container and which defines the
rules that govern the resolution of variables and object properties.</p>
</div>
<div class="paragraph">
<p>The <code>ELResolver</code> shown in <a href="#_JSP_Resolver_Hierarchy"><strong>Figure JSP.2-1</strong> JSP Resolver Hierarchy</a> is passed to
all EL expressions that appear in a JSP page or tag file. It is an
instance of <code>jakarta.el.CompositeELResolver</code> that contains the following
component <code>ELResolver</code>s, in order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>jsp.ImplicitObjectELResolver</code><br>
Resolves the implicit objects mentioned in <a href="#_Implicit_Objects">Section 2.4, &#8220;Implicit Objects&#8221;</a>.</p>
</li>
<li>
<p>All <code>ELResolver</code>s added via
<code>JspApplicationContext.addELResolver()</code>, in the same order in which
they were registered.<br>
This itself can take the form of a <code>el.CompositeELResolver</code>. This will
include the <code>ELResolver</code> registered by Faces.</p>
</li>
<li>
<p>The <code>ELResolver</code> returned
by <code>ExpressionFactory.getStreamELResolver()</code>.</p>
</li>
<li>
<p><code>jakarta.el.StaticFieldResolver</code></p>
</li>
<li>
<p><code>jakarta.el.MapELResolver</code> - constructed in read/write mode.</p>
</li>
<li>
<p><code>jakarta.el.ResourceBundleELResolver</code></p>
</li>
<li>
<p><code>jakarta.el.ListELResolver</code> - constructed in read/write mode.</p>
</li>
<li>
<p><code>jakarta.el.ArrayELResolver</code> - constructed in read/write mode.</p>
</li>
<li>
<p><code>jakarta.el.RecordELResolver</code> - always read only.</p>
</li>
<li>
<p><code>jakarta.el.BeanELResolver</code> - constructed in read/write mode.<br>
Handles all cases where <code>base != null</code></p>
</li>
<li>
<p><code>jsp.ScopedAttributeELResolver</code><br>
Handles cases where <code>base == null</code>.<br>
Provides a map for other identifiers by looking up its value as an
attribute, according to the behavior of
<code>PageContext.findAttribute(String)</code> on the <code>pageContext</code> object. For
example:<br>
<br>
<code>${product}</code><br>
<br>
This expression will look for the attribute named <code>product</code>, searching
the page, request, session, and application scopes, and will return its
value if the attribute is found.</p>
</li>
<li>
<p><code>jsp.ImportELResolver</code>
Handles cases where <code>base == null</code> and <code>property</code> represents and imported class
or static import.</p>
</li>
<li>
<p><code>jsp.NotFoundELResolver</code><br>
Always resolves the requested value, returning <code>null</code></p>
</li>
</ol>
</div>
<div id="_JSP_Resolver_Hierarchy" class="paragraph">
<div class="title"><strong>Figure JSP.2-1</strong> JSP Resolver Hierarchy</div>
<p><span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gR2VuZXJhdGVkIGJ5IE1pY3Jvc29mdCBWaXNpbywgU1ZHIEV4cG9ydCBzcC0yLnN2ZyBQYWdpbmEgMSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpldj0iaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzIgoJCXhtbG5zOnY9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vdmlzaW8vMjAwMy9TVkdFeHRlbnNpb25zLyIgd2lkdGg9IjUuNDMxMjZpbiIgaGVpZ2h0PSI5LjAwODg2aW4iCgkJdmlld0JveD0iMCAwIDM5MS4wNTEgNjQ4LjYzOCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBjbGFzcz0ic3QxMiI+Cgk8djpkb2N1bWVudFByb3BlcnRpZXMgdjpsYW5nSUQ9IjIwNTciPgoJCTx2OnVzZXJEZWZzPgoJCQk8djp1ZCB2Om5hbWVVPSJNQlNBQWRkaW5PdXRsaW5lVmlzaWJsZSIgdjpwcm9tcHQ9IiIgdjp2YWw9IlZUMCgxKToyNiIvPgoJCTwvdjp1c2VyRGVmcz4KCTwvdjpkb2N1bWVudFByb3BlcnRpZXM+CgoJPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCTwhW0NEQVRBWwoJCS5zdDEge2ZpbGw6I2ZmZmZmZjtzdHJva2U6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzE5OTk4fQoJCS5zdDIge2ZpbGw6I2JmYmZiZjtzdHJva2U6I2JmYmZiZjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzE5OTk4fQoJCS5zdDMge2ZpbGw6I2ZmZmZmZjtzdHJva2U6IzAwMDAwMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzE5OTk4fQoJCS5zdDQge2ZpbGw6bm9uZTtzdHJva2U6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzE5OTk4fQoJCS5zdDUge2ZpbGw6IzAwMDAwMDtmb250LWZhbWlseTpBcmlhbDtmb250LXNpemU6MC42NjY2NjRlbX0KCQkuc3Q2IHtmaWxsOm5vbmU7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjAuOTk5OTk5fQoJCS5zdDcge2ZpbGw6bm9uZX0KCQkuc3Q4IHtzdHJva2U6IzAwMDAwMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzE5OTk4fQoJCS5zdDkge2ZpbGw6IzAwMDAwMDtmb250LWZhbWlseTpBcmlhbDtmb250LXNpemU6MC42NjY2NjRlbTtmb250LXN0eWxlOml0YWxpY30KCQkuc3QxMCB7Zm9udC1zaXplOjFlbTtmb250LXN0eWxlOml0YWxpY30KCQkuc3QxMSB7Zm9udC1zaXplOjFlbX0KCQkuc3QxMiB7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO2ZvbnQtc2l6ZToxMnB4O292ZXJmbG93OnZpc2libGU7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3N0cm9rZS1taXRlcmxpbWl0OjN9CgldXT4KCTwvc3R5bGU+CgoJPGcgdjptSUQ9IjAiIHY6aW5kZXg9IjEiIHY6Z3JvdXBDb250ZXh0PSJmb3JlZ3JvdW5kUGFnZSI+CgkJPHRpdGxlPlBhZ2luYSAxPC90aXRsZT4KCQk8djpwYWdlUHJvcGVydGllcyB2OmRyYXdpbmdTY2FsZT0iMC4wMzkzNzAxIiB2OnBhZ2VTY2FsZT0iMC4wMzkzNzAxIiB2OmRyYXdpbmdVbml0cz0iMjQiIHY6c2hhZG93T2Zmc2V0WD0iOC41MDM5MiIKCQkJCXY6c2hhZG93T2Zmc2V0WT0iLTguNTAzOTIiLz4KCQk8djpsYXllciB2Om5hbWU9IkNvbm5lY3RvciIgdjppbmRleD0iMCIvPgoJCTxnIGlkPSJzaGFwZTEtMSIgdjptSUQ9IjEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTguMzYsLTE4LjM2KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTM5PC90aXRsZT4KCQkJPHJlY3QgeD0iMCIgeT0iMzYuNzIiIHdpZHRoPSIzNTQuMzMxIiBoZWlnaHQ9IjYxMS45MTgiIGNsYXNzPSJzdDEiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMi0zIiB2Om1JRD0iMiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMjkzLC02MDEuOTMpIj4KCQkJPHRpdGxlPkZvZ2xpby4yPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTQ3LjA2IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE1NS41NiA2NDAuMTMgTDE1NS41NgoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTQ3LjA2IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUzLTUiIHY6bUlEPSIzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxLjAzMjcsLTYwNS41NjgpIj4KCQkJPHRpdGxlPkZvZ2xpby4zPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTQ1LjgxIDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE1NC4zMSA2NDAuMTMgTDE1NC4zMQoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTQ1LjgxIDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU0LTciIHY6bUlEPSI0IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4LjM0NjUsLTYwNi4wNDIpIj4KCQkJPHRpdGxlPkZvZ2xpby4xMzg8L3RpdGxlPgoJCQk8ZGVzYz5lbC5Db21wb3NpdGVFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjUzLjAxNTciIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTA2LjA0IiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjEwNi4wMzEiIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmVsLkNvbXBvc2l0ZUVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9Imdyb3VwNS0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYxMy4yNjUsNjExLjAwMikgcm90YXRlKC05MCkiIHY6bUlEPSI1IiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjU5ODwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTYtMTEiIHY6bUlEPSI2IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjY8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEw1NjcuOTQgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q2Ii8+CgkJCTwvZz4KCQkJPGcgaWQ9InNoYXBlNy0xMyIgdjptSUQ9IjciIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuNzwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDU2Ny45NCA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDciLz4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMNTY3Ljk0IDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJncm91cDgtMTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjkwOTgsNzA5LjUxMykgcm90YXRlKDE4MCkiIHY6bUlEPSI4IiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjU5OTwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTktMTciIHY6bUlEPSI5IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0Ljk8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDYiLz4KCQkJPC9nPgoJCQk8ZyBpZD0ic2hhcGUxMC0xOSIgdjptSUQ9IjEwIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjEwPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTExLTIyIiB2Om1JRD0iMTEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjYuNTQ5LC01NzMuNTgzKSI+CgkJCTx0aXRsZT5Gb2dsaW8uNDwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE0Ny40MyA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNTUuOTMgNjQwLjEzIEwxNTUuOTMKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE0Ny40MyA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAtMCA2MzguMjUgTDAgNjQwLjEzCgkJCQkJCSBaIiBjbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEyLTI0IiB2Om1JRD0iMTIiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMTE5MywtNTc3LjM2MykiPgoJCQk8dGl0bGU+Rm9nbGlvLjU8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNDYuMTggNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU0LjY4IDY0MC4xMyBMMTU0LjY4CgkJCQkJCSA2MzguMjUgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNDYuMTggNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMCA2MzguMjUgTDAgNjQwLjEzCgkJCQkJCSBaIiBjbGFzcz0ic3QzIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEzLTI2IiB2Om1JRD0iMTMiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzIuNTY2OSwtNTc3LjgzNykiPgoJCQk8dGl0bGU+Rm9nbGlvLjY8L3RpdGxlPgoJCQk8ZGVzYz5qc3AuSW1wbGljaXRPYmplY3RFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjYwLjgwMyIgY3k9IjYzOS40MjQiIHdpZHRoPSIxMjEuNjIiIGhlaWdodD0iMTguNDI1MiIvPgoJCQk8cmVjdCB4PSIwIiB5PSI2MzAuMjEzIiB3aWR0aD0iMTIxLjYwNiIgaGVpZ2h0PSIxOC40MjUyIiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjQiIHk9IjY0MS44MiIgY2xhc3M9InN0NSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+anNwLkltcGxpY2l0T2JqZWN0RUxSZXNvbHZlcjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNC0yOSIgdjptSUQ9IjE0IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY2LjU0OSwtNTQ1LjMwOCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjc8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNDYuOSA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNTUuNCA2NDAuMTMgTDE1NS40IDYzOC4yNQoJCQkJCQkgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNDYuOSA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAtMCA2MzguMjUgTDAgNjQwLjEzIFoiCgkJCQkJY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNS0zMSIgdjptSUQ9IjE1IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjU4OCwtNTQ4Ljk0NSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjg8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNDUuNjUgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU0LjE2IDY0MC4xMyBMMTU0LjE2CgkJCQkJCSA2MzguMjUgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNDUuNjUgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgLTAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNi0zMyIgdjptSUQ9IjE2IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjEzMzksLTU0OS40MikiPgoJCQk8dGl0bGU+Rm9nbGlvLjk8L3RpdGxlPgoJCQk8ZGVzYz5lbC5Db21wb3NpdGVFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjUxLjc4MDYiIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTAzLjU3IiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjEwMy41NjEiIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmVsLkNvbXBvc2l0ZUVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMTctMzYiIHY6bUlEPSIxNyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NS42Mzc5LC01MTcuMDMyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTA8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNTggNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTY2LjUgNjQwLjEzIEwxNjYuNSA2MzguMjUKCQkJCQkJIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU4IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE4LTM4IiB2Om1JRD0iMTgiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTIuMDYwNiwtNTIwLjY3KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTE8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNTYuNjYgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTY1LjE3IDY0MC4xMyBMMTY1LjE3CgkJCQkJCSA2MzguMjUgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNTYuNjYgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgLTAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxOS00MCIgdjptSUQ9IjE5IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk5LjIxMjYsLTUyMS4xNDQpIj4KCQkJPHRpdGxlPkZvZ2xpby4xMjwvdGl0bGU+CgkJCTxkZXNjPkpTRuKAmXMgZWwuQ29tcG9zaXRlRUxSZXNvbHZlcjwvZGVzYz4KCQkJPHY6dXNlckRlZnMvPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI2OC4wMzEzIiBjeT0iNjM5LjQyNCIgd2lkdGg9IjEzNi4wOCIgaGVpZ2h0PSIxOC40MjUyIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjYzMC4yMTMiIHdpZHRoPSIxMzYuMDYzIiBoZWlnaHQ9IjE4LjQyNTIiIGNsYXNzPSJzdDQiLz4KCQkJPHRleHQgeD0iMy45OSIgeT0iNjQxLjgyIiBjbGFzcz0ic3Q1IiB2OmxhbmdJRD0iMjA1NyI+PHY6cGFyYWdyYXBoLz48djp0YWJMaXN0Lz5KU0bigJlzIGVsLkNvbXBvc2l0ZUVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjAtNDMiIHY6bUlEPSIyMCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjMuOTg1LC00ODguNjg2KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTM8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNTggNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTY2LjUgNjQwLjEzIEwxNjYuNSA2MzguMjUKCQkJCQkJIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU4IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTIxLTQ1IiB2Om1JRD0iMjEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIwLjQwNywtNDkyLjMyMykiPgoJCQk8dGl0bGU+Rm9nbGlvLjE0PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTU2LjY2IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2NS4xNyA2NDAuMTMgTDE2NS4xNwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU2LjY2IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMjItNDciIHY6bUlEPSIyMiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjcuNTU5LC00OTIuNzk4KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTU8L3RpdGxlPgoJCQk8ZGVzYz5qc2YuSW1wbGljaXRPYmplY3RFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjcyLjQ3NTEiIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTQ0Ljk2IiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjE0NC45NTEiIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmpzZi5JbXBsaWNpdE9iamVjdEVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjMtNTAiIHY6bUlEPSIyMyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjMuOTg1LC00NjAuMzM5KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTY8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNTggNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTY2LjUgNjQwLjEzIEwxNjYuNSA2MzguMjUKCQkJCQkJIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU4IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTI0LTUyIiB2Om1JRD0iMjQiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIwLjQwNywtNDYzLjk3NykiPgoJCQk8dGl0bGU+Rm9nbGlvLjE3PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTU2LjY2IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2NS4xNyA2NDAuMTMgTDE2NS4xNwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTU2LjY2IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMjUtNTQiIHY6bUlEPSIyNSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjcuNTU5LC00NjQuNDUxKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTg8L3RpdGxlPgoJCQk8ZGVzYz5qc2YuTWFuYWdlZEJlYW5FTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjcyLjQ3NTEiIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTQ0Ljk2IiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjE0NC45NTEiIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmpzZi5NYW5hZ2VkQmVhbkVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjYtNTciIHY6bUlEPSIyNiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjQuOTk4LC00MzEuOTkzKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTk8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwyMDUuMTcgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjEzLjY4IDY0MC4xMyBMMjEzLjY4CgkJCQkJCSA2MzguMjUgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMDUuMTcgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMCA2MzguMjUgTDAgNjQwLjEzCgkJCQkJCSBaIiBjbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTI3LTU5IiB2Om1JRD0iMjciIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIwLjQwNywtNDM1LjYzMSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjIwPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMjAzLjQ2IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDIxMS45NyA2NDAuMTMgTDIxMS45NwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjAzLjQ2IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMjgtNjEiIHY6bUlEPSIyOCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjcuNTU5LC00MzYuMTA1KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjE8L3RpdGxlPgoJCQk8ZGVzYz5FTFJlc29sdmVycyBpbiBmYWNlcy1jb25maWcueG1sPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9Ijc4Ljg1OSIgY3k9IjYzOS40MjQiIHdpZHRoPSIxNTcuNzMiIGhlaWdodD0iMTguNDI1MiIvPgoJCQk8cmVjdCB4PSIwIiB5PSI2MzAuMjEzIiB3aWR0aD0iMTU3LjcxOCIgaGVpZ2h0PSIxOC40MjUyIiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjQiIHk9IjY0MS44MiIgY2xhc3M9InN0OSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+RUxSZXNvbHZlcnMgaW4gZmFjZXMtY29uZmlnLnhtbDwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUyOS02NCIgdjptSUQ9IjI5IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyNC45OTgsLTM5MC42MDgpIj4KCQkJPHRpdGxlPkZvZ2xpby4yMjwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDIwNS4xNyA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMTMuNjggNjQwLjEzIEwyMTMuNjgKCQkJCQkJIDYyNC40IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjA1LjE3IDYxNS45IEw4LjUgNjE1LjkgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYyNC40IEwwIDY0MC4xMyBaIgoJCQkJCWNsYXNzPSJzdDIiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMzAtNjYiIHY6bUlEPSIzMCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAuNDA3LC0zOTQuODYpIj4KCQkJPHRpdGxlPkZvZ2xpby4yMzwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDIwMy40NiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMTEuOTcgNjQwLjEzIEwyMTEuOTcKCQkJCQkJIDYyNS44MiBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDIwMy40NiA2MTcuMzIgTDguNSA2MTcuMzIgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYyNS44MiBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMzEtNjgiIHY6bUlEPSIzMSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjcuNTU5LC0zOTQuODYxKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjQ8L3RpdGxlPgoJCQk8ZGVzYz5qc2YuVmFyaWFibGVSZXNvbHZlckNoYWluV3JhcHBlciAoU3VwcG9ydHMgbGVnYWN5IGpzZi5WYXJpYWJsLi4uPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjgxLjk1MTQiIGN5PSI2MzIuOTc3IiB3aWR0aD0iMTYzLjkxIiBoZWlnaHQ9IjMxLjMyMjgiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjE3LjMxNSIgd2lkdGg9IjE2My45MDMiIGhlaWdodD0iMzEuMzIyOCIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2MzAuNTgiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmpzZi5WYXJpYWJsZVJlc29sdmVyQ2hhaW5XcmFwcGVyPHY6bmV3bGluZUNoYXIvPjx0c3BhbgoJCQkJCQl4PSI0IiBkeT0iMS4yZW0iIGNsYXNzPSJzdDEwIj4oU3VwcG9ydHMgbGVnYWN5IGpzZi5WYXJpYWJsZVJlc29sdmVycyk8L3RzcGFuPjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUzMi03MiIgdjptSUQ9IjMyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyNC45OTgsLTM1MC4yODUpIj4KCQkJPHRpdGxlPkZvZ2xpby4yNTwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDIwNS4xNyA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMTMuNjggNjQwLjEzIEwyMTMuNjgKCQkJCQkJIDYyNi42IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjA1LjE3IDYxOC4xIEw4LjUgNjE4LjEgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYyNi42IEwwIDY0MC4xMyBaIgoJCQkJCWNsYXNzPSJzdDIiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMzMtNzQiIHY6bUlEPSIzMyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAuNDA3LC0zNTQuNTM3KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjY8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwyMDMuNDYgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjExLjk3IDY0MC4xMyBMMjExLjk3CgkJCQkJCSA2MjguMDIgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMDMuNDYgNjE5LjUxIEw4LjUgNjE5LjUxIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMCA2MjguMDIgTDAgNjQwLjEzCgkJCQkJCSBaIiBjbGFzcz0ic3QzIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTM0LTc2IiB2Om1JRD0iMzQiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI3LjU1OSwtMzU0LjUzOCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjI3PC90aXRsZT4KCQkJPGRlc2M+anNmLlByb3BlcnR5UmVzb2x2ZXJDaGFpbldyYXBwZXIgKFN1cHBvcnRzIGxlZ2FjeSBqc2YuUHJvcGVydC4uLjwvZGVzYz4KCQkJPHY6dXNlckRlZnMvPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI4MS45NTE0IiBjeT0iNjM0LjA3NSIgd2lkdGg9IjE2My45MSIgaGVpZ2h0PSIyOS4xMjYiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjE5LjUxMiIgd2lkdGg9IjE2My45MDMiIGhlaWdodD0iMjkuMTI2IiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjQiIHk9IjYzMS42NyIgY2xhc3M9InN0NSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+anNmLlByb3BlcnR5UmVzb2x2ZXJDaGFpbldyYXBwZXI8djpuZXdsaW5lQ2hhci8+PHRzcGFuCgkJCQkJCXg9IjQiIGR5PSIxLjJlbSIgY2xhc3M9InN0MTAiPihTdXBwb3J0cyBsZWdhY3kganNmLlByb3BlcnR5UmVzb2x2ZXJzKTwvdHNwYW4+PC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTM1LTgwIiB2Om1JRD0iMzUiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI1LjYyNiwtMzIyLjA4KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjg8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwyMzIuODkgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjQxLjM5IDY0MC4xMyBMMjQxLjM5CgkJCQkJCSA2MzguMjUgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMzIuODkgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgLTAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUzNi04MiIgdjptSUQ9IjM2IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMC40MDcsLTMyNS43MTgpIj4KCQkJPHRpdGxlPkZvZ2xpby4yOTwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDIzMi40NiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyNDAuOTYgNjQwLjEzIEwyNDAuOTYKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDIzMi40NiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMzctODQiIHY6bUlEPSIzNyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjcuNTU5LC0zMjYuMTkyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMzA8L3RpdGxlPgoJCQk8ZGVzYz5FTFJlc29sdmVycyBmcm9tIEFwcGxpY2F0aW9uLmFkZEVMUmVzb2x2ZXIoKTwvZGVzYz4KCQkJPHY6dXNlckRlZnMvPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI5NS42NjkiIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTkxLjM1IiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjE5MS4zMzkiIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPkVMUmVzb2x2ZXJzIGZyb20gQXBwbGljYXRpb24uYWRkRUxSZXNvbHZlcigpPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTM4LTg3IiB2Om1JRD0iMzgiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTYuNjUxNCwtMjgwLjE5OCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjMxPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMjA1LjE3IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDIxMy42OCA2NDAuMTMgTDIxMy42OAoJCQkJCQkgNjI3LjM4IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMjA1LjE3IDYxOC44OCBMOC41IDYxOC44OCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjI3LjM4IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUzOS04OSIgdjptSUQ9IjM5IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkyLjA2MDYsLTI4NC40NSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjMyPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMjAzLjQ2IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDIxMS45NyA2NDAuMTMgTDIxMS45NwoJCQkJCQkgNjI4LjggQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAyMDMuNDYgNjIwLjI5IEw4LjUgNjIwLjI5IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMCA2MjguOCBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QzIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTQwLTkxIiB2Om1JRD0iNDAiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTkuMjEyNiwtMjg0LjQ1MikiPgoJCQk8dGl0bGU+Rm9nbGlvLjMzPC90aXRsZT4KCQkJPGRlc2M+T3RoZXIgRUxSZXNvbHZlcnMgYWRkZWQgdmlhIEpzcEFwcGxpY2F0aW9uQ29udGV4dC5hZGRFTFJlc29sdi4uLjwvZGVzYz4KCQkJPHY6dXNlckRlZnMvPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI3Ny45NTI4IiBjeT0iNjM0LjQ2NCIgd2lkdGg9IjE1NS45MSIgaGVpZ2h0PSIyOC4zNDY1Ii8+CgkJCTxyZWN0IHg9IjAiIHk9IjYyMC4yOTIiIHdpZHRoPSIxNTUuOTA2IiBoZWlnaHQ9IjI4LjM0NjUiIGNsYXNzPSJzdDQiLz4KCQkJPHRleHQgeD0iNCIgeT0iNjMyLjA2IiBjbGFzcz0ic3Q1IiB2OmxhbmdJRD0iMjA1NyI+PHY6cGFyYWdyYXBoLz48djp0YWJMaXN0Lz5PdGhlciBFTFJlc29sdmVycyBhZGRlZCB2aWEgPHRzcGFuIHg9IjQiCgkJCQkJCWR5PSIxLjJlbSIgY2xhc3M9InN0MTEiPkpzcEFwcGxpY2F0aW9uQ29udGV4dC5hZGRFTFJlc29sdmVyKCk8L3RzcGFuPjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGU0MS05NSIgdjptSUQ9IjQxIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY3LjM1NzgsLTI1MC41NzYpIj4KCQkJPHRpdGxlPkZvZ2xpby4zNDwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2My42IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3Mi4xIDY0MC4xMyBMMTcyLjEgNjM4LjI1CgkJCQkJCSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2My42IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTQyLTk3IiB2Om1JRD0iNDIiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjE4NSwtMjU0LjIxNCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjM1PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYyLjIyIDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3MC43MyA2NDAuMTMgTDE3MC43MwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYyLjIyIDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU0My05OSIgdjptSUQ9IjQzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjcwMDgsLTI1NC42ODgpIj4KCQkJPHRpdGxlPkZvZ2xpby4zNjwvdGl0bGU+CgkJCTxkZXNjPmVsLk1hcEVMUmVzb2x2ZXI8L2Rlc2M+CgkJCTx2OnVzZXJEZWZzLz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iNzIuNTgzOSIgY3k9IjYzOS40MjQiIHdpZHRoPSIxNDUuMTgiIGhlaWdodD0iMTguNDI1MiIvPgoJCQk8cmVjdCB4PSIwIiB5PSI2MzAuMjEzIiB3aWR0aD0iMTQ1LjE2NyIgaGVpZ2h0PSIxOC40MjUyIiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjMuOTkiIHk9IjY0MS44MiIgY2xhc3M9InN0NSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+ZWwuTWFwRUxSZXNvbHZlcjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGU0NC0xMDIiIHY6bUlEPSI0NCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2Ny4zNTc4LC0yMjIuMjMpIj4KCQkJPHRpdGxlPkZvZ2xpby4zNzwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2My42IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3Mi4xIDY0MC4xMyBMMTcyLjEgNjM4LjI1CgkJCQkJCSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2My42IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTQ1LTEwNCIgdjptSUQ9IjQ1IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjIxODUsLTIyNS44NjgpIj4KCQkJPHRpdGxlPkZvZ2xpby4zODwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2Mi4yMiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzAuNzMgNjQwLjEzIEwxNzAuNzMKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2Mi4yMiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNDYtMTA2IiB2Om1JRD0iNDYiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMuNzAwOCwtMjI2LjM0MSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjM5PC90aXRsZT4KCQkJPGRlc2M+ZWwuUmVzb3VyY2VCdW5kbGVFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9Ijc1Ljk1MzciIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTUxLjkyIiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjE1MS45MDciIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSIzLjk5IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmVsLlJlc291cmNlQnVuZGxlRUxSZXNvbHZlcjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGU0Ny0xMDkiIHY6bUlEPSI0NyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2Ny4xMDU3LC0xOTMuODEyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uNDA8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNjMuNiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzIuMSA2NDAuMTMgTDE3Mi4xIDYzOC4yNQoJCQkJCQkgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNjMuNiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAtMCA2MzguMjUgTDAgNjQwLjEzIFoiCgkJCQkJY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU0OC0xMTEiIHY6bUlEPSI0OCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2My45NjY0LC0xOTcuNDUpIj4KCQkJPHRpdGxlPkZvZ2xpby40MTwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2Mi4yMiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzAuNzMgNjQwLjEzIEwxNzAuNzMKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2Mi4yMiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAtMCA2MzguMjUgTDAgNjQwLjEzCgkJCQkJCSBaIiBjbGFzcz0ic3QzIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTQ5LTExMyIgdjptSUQ9IjQ5IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjcwMDgsLTE5Ny42NjMpIj4KCQkJPHRpdGxlPkZvZ2xpby40MjwvdGl0bGU+CgkJCTxkZXNjPmVsLkxpc3RFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjY1LjA2NiIgY3k9IjYzOS40MjQiIHdpZHRoPSIxMzAuMTUiIGhlaWdodD0iMTguNDI1MiIvPgoJCQk8cmVjdCB4PSIwIiB5PSI2MzAuMjEzIiB3aWR0aD0iMTMwLjEzMiIgaGVpZ2h0PSIxOC40MjUyIiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjQiIHk9IjY0MS44MiIgY2xhc3M9InN0NSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+ZWwuTGlzdEVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlNTAtMTE2IiB2Om1JRD0iNTAiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjcuMzU3OCwtMTY1LjUzNykiPgoJCQk8dGl0bGU+Rm9nbGlvLjQzPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYzLjYgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTcyLjEgNjQwLjEzIEwxNzIuMSA2MzguMjUKCQkJCQkJIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYzLjYgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgLTAgNjM4LjI1IEwwIDY0MC4xMyBaIgoJCQkJCWNsYXNzPSJzdDIiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNTEtMTE4IiB2Om1JRD0iNTEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjE4NSwtMTY5LjE3NCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjQ0PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYyLjIyIDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3MC43MyA2NDAuMTMgTDE3MC43MwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYyLjIyIDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIC0wIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNTItMTIwIiB2Om1JRD0iNTIiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMuNzAwOCwtMTY5LjMxNikiPgoJCQk8dGl0bGU+Rm9nbGlvLjQ1PC90aXRsZT4KCQkJPGRlc2M+ZWwuQXJyYXlFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjY1LjA2NiIgY3k9IjYzOS40MjQiIHdpZHRoPSIxMzAuMTUiIGhlaWdodD0iMTguNDI1MiIvPgoJCQk8cmVjdCB4PSIwIiB5PSI2MzAuMjEzIiB3aWR0aD0iMTMwLjEzMiIgaGVpZ2h0PSIxOC40MjUyIiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjQiIHk9IjY0MS44MiIgY2xhc3M9InN0NSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+ZWwuQXJyYXlFTFJlc29sdmVyPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTUzLTEyMyIgdjptSUQ9IjUzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY2Ljg0NiwtMTA4LjgzMykiPgoJCQk8dGl0bGU+Rm9nbGlvLjQ2PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYzLjYgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTcyLjEgNjQwLjEzIEwxNzIuMSA2MzguMjUKCQkJCQkJIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYzLjYgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMCA2MzguMjUgTDAgNjQwLjEzIFoiCgkJCQkJY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU1NC0xMjUiIHY6bUlEPSI1NCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NC40NzUsLTExMi40NzEpIj4KCQkJPHRpdGxlPkZvZ2xpby40NzwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2Mi4yMiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzAuNzMgNjQwLjEzIEwxNzAuNzMKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2Mi4yMiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNTUtMTI3IiB2Om1JRD0iNTUiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMuNzAwOCwtMTEyLjYxMykiPgoJCQk8dGl0bGU+Rm9nbGlvLjQ4PC90aXRsZT4KCQkJPGRlc2M+ZWwuQmVhbkVMUmVzb2x2ZXI8L2Rlc2M+CgkJCTx2OnVzZXJEZWZzLz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iNjUuMDY2IiBjeT0iNjM5LjQyNCIgd2lkdGg9IjEzMC4xNSIgaGVpZ2h0PSIxOC40MjUyIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjYzMC4yMTMiIHdpZHRoPSIxMzAuMTMyIiBoZWlnaHQ9IjE4LjQyNTIiIGNsYXNzPSJzdDQiLz4KCQkJPHRleHQgeD0iNCIgeT0iNjQxLjgyIiBjbGFzcz0ic3Q1IiB2OmxhbmdJRD0iMjA1NyI+PHY6cGFyYWdyYXBoLz48djp0YWJMaXN0Lz5lbC5CZWFuRUxSZXNvbHZlcjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGU1Ni0xMzAiIHY6bUlEPSI1NiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2Ni44NDYsLTgwLjQxNjIpIj4KCQkJPHRpdGxlPkZvZ2xpby40OTwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2My42IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3Mi4xIDY0MC4xMyBMMTcyLjEgNjM4LjI1CgkJCQkJCSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2My42IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMyBaIgoJCQkJCWNsYXNzPSJzdDIiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNTctMTMyIiB2Om1JRD0iNTciIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuNDc1LC04NC4wNTQpIj4KCQkJPHRpdGxlPkZvZ2xpby41MDwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2Mi4yMiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzAuNzMgNjQwLjEzIEwxNzAuNzMKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2Mi4yMiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNTgtMTM0IiB2Om1JRD0iNTgiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzMuNzAwOCwtODQuNTI3NikiPgoJCQk8dGl0bGU+Rm9nbGlvLjUxPC90aXRsZT4KCQkJPGRlc2M+anNwLlNjb3BlZEF0dHJpYnV0ZUVMUmVzb2x2ZXI8L2Rlc2M+CgkJCTx2OnVzZXJEZWZzLz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iNzYuNTM1NiIgY3k9IjYzOS40MjQiIHdpZHRoPSIxNTMuMDgiIGhlaWdodD0iMTguNDI1MiIvPgoJCQk8cmVjdCB4PSIwIiB5PSI2MzAuMjEzIiB3aWR0aD0iMTUzLjA3MSIgaGVpZ2h0PSIxOC40MjUyIiBjbGFzcz0ic3Q0Ii8+CgkJCTx0ZXh0IHg9IjQiIHk9IjY0MS44MiIgY2xhc3M9InN0NSIgdjpsYW5nSUQ9IjIwNTciPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+anNwLlNjb3BlZEF0dHJpYnV0ZUVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9Imdyb3VwNTktMTM3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NC40MDEsNzM5LjI3Nykgcm90YXRlKDE4MCkiIHY6bUlEPSI1OSIgdjpncm91cENvbnRleHQ9Imdyb3VwIj4KCQkJPHRpdGxlPkZvZ2xpby42MDA8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGU2MC0xMzgiIHY6bUlEPSI2MCIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC42MDwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTYxLTE0MCIgdjptSUQ9IjYxIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjYxPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJncm91cDYyLTE0MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMzEyMSwxMDMzLjM3KSByb3RhdGUoMTgwKSIgdjptSUQ9IjYyIiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYwMTwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTYzLTE0NCIgdjptSUQ9IjYzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjYzPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q2Ii8+CgkJCTwvZz4KCQkJPGcgaWQ9InNoYXBlNjQtMTQ2IiB2Om1JRD0iNjQiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuNjQ8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDciLz4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9Imdyb3VwNjUtMTQ5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NC4yMTg1LDEwNjIuNDMpIHJvdGF0ZSgxODApIiB2Om1JRD0iNjUiIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uNjAyPC90aXRsZT4KCQkJPGcgaWQ9InNoYXBlNjYtMTUwIiB2Om1JRD0iNjYiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuNjY8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDYiLz4KCQkJPC9nPgoJCQk8ZyBpZD0ic2hhcGU2Ny0xNTIiIHY6bUlEPSI2NyIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC42NzwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQiIGNsYXNzPSJzdDgiLz4KCQkJPC9nPgoJCTwvZz4KCQk8ZyBpZD0iZ3JvdXA2OC0xNTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjEwNDUsMTA5MC40Mikgcm90YXRlKDE4MCkiIHY6bUlEPSI2OCIgdjpncm91cENvbnRleHQ9Imdyb3VwIj4KCQkJPHRpdGxlPkZvZ2xpby42MDM8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGU2OS0xNTYiIHY6bUlEPSI2OSIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC42OTwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTcwLTE1OCIgdjptSUQ9IjcwIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjcwPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJncm91cDcxLTE2MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjE4NSwxMTE5LjEyKSByb3RhdGUoMTgwKSIgdjptSUQ9IjcxIiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYwNDwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTcyLTE2MiIgdjptSUQ9IjcyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjcyPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q2Ii8+CgkJCTwvZz4KCQkJPGcgaWQ9InNoYXBlNzMtMTY0IiB2Om1JRD0iNzMiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuNzM8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDciLz4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9Imdyb3VwNzQtMTY3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NC40MDEsMTE0Ny4xMSkgcm90YXRlKDE4MCkiIHY6bUlEPSI3NCIgdjpncm91cENvbnRleHQ9Imdyb3VwIj4KCQkJPHRpdGxlPkZvZ2xpby42MDU8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGU3NS0xNjgiIHY6bUlEPSI3NSIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC43NTwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTc2LTE3MCIgdjptSUQ9Ijc2IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0Ljc2PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJncm91cDc3LTE3MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuNTE1LDExNzUuODIpIHJvdGF0ZSgxODApIiB2Om1JRD0iNzciIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uNjA2PC90aXRsZT4KCQkJPGcgaWQ9InNoYXBlNzgtMTc0IiB2Om1JRD0iNzgiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuNzg8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDYiLz4KCQkJPC9nPgoJCQk8ZyBpZD0ic2hhcGU3OS0xNzYiIHY6bUlEPSI3OSIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC43OTwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyOS4wMyA2NDguNjQiIGNsYXNzPSJzdDgiLz4KCQkJPC9nPgoJCTwvZz4KCQk8ZyBpZD0iZ3JvdXA4MC0xNzkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01NzMuNTgsMzUwLjU4KSByb3RhdGUoLTkwKSIgdjptSUQ9IjgwIiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYwNzwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTgxLTE4MCIgdjptSUQ9IjgxIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjgxPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjUxLjM2IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTgyLTE4MiIgdjptSUQ9IjgyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjgyPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjUxLjM2IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwyNTEuMzYgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9Imdyb3VwODMtMTg1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTQyLjM5OSwzMTMuNTAzKSByb3RhdGUoLTkwKSIgdjptSUQ9IjgzIiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYwODwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTg0LTE4NiIgdjptSUQ9Ijg0IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0Ljg0PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTg1LjczIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTg1LTE4OCIgdjptSUQ9Ijg1IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0Ljg1PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTg1LjczIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxODUuNzMgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9Imdyb3VwODYtMTkxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MS43Mjc4LDc2OC4wOTYpIHJvdGF0ZSgxODApIiB2Om1JRD0iODYiIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uNjA5PC90aXRsZT4KCQkJPGcgaWQ9InNoYXBlODctMTkyIiB2Om1JRD0iODciIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuODc8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNi42OCA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDYiLz4KCQkJPC9nPgoJCQk8ZyBpZD0ic2hhcGU4OC0xOTQiIHY6bUlEPSI4OCIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC44ODwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE2LjY4IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNi42OCA2NDguNjQiIGNsYXNzPSJzdDgiLz4KCQkJPC9nPgoJCTwvZz4KCQk8ZyBpZD0iZ3JvdXA4OS0xOTciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMC40MDcsNzk1LjY4Nikgcm90YXRlKDE4MCkiIHY6bUlEPSI4OSIgdjpncm91cENvbnRleHQ9Imdyb3VwIj4KCQkJPHRpdGxlPkZvZ2xpby42MTA8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGU5MC0xOTgiIHY6bUlEPSI5MCIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC45MDwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE0LjE3IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTkxLTIwMCIgdjptSUQ9IjkxIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjkxPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTQuMTcgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE0LjE3IDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJncm91cDkyLTIwMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIwLjQwNyw4MjQuMDMzKSByb3RhdGUoMTgwKSIgdjptSUQ9IjkyIiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYxMTwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTkzLTIwNCIgdjptSUQ9IjkzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjkzPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTQuMTcgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q2Ii8+CgkJCTwvZz4KCQkJPGcgaWQ9InNoYXBlOTQtMjA2IiB2Om1JRD0iOTQiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuOTQ8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNC4xNyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDciLz4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTQuMTcgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9Imdyb3VwOTUtMjA5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAuNDA3LDg1Mi45NDYpIHJvdGF0ZSgxODApIiB2Om1JRD0iOTUiIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uNjEyPC90aXRsZT4KCQkJPGcgaWQ9InNoYXBlOTYtMjEwIiB2Om1JRD0iOTYiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuOTY8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNC4xNyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDYiLz4KCQkJPC9nPgoJCQk8ZyBpZD0ic2hhcGU5Ny0yMTIiIHY6bUlEPSI5NyIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC45NzwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE0LjE3IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNC4xNyA2NDguNjQiIGNsYXNzPSJzdDgiLz4KCQkJPC9nPgoJCTwvZz4KCQk8ZyBpZD0iZ3JvdXA5OC0yMTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMC40MDcsODg2LjM5NSkgcm90YXRlKDE4MCkiIHY6bUlEPSI5OCIgdjpncm91cENvbnRleHQ9Imdyb3VwIj4KCQkJPHRpdGxlPkZvZ2xpby42MTM8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGU5OS0yMTYiIHY6bUlEPSI5OSIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC45OTwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE0LjE3IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTEwMC0yMTgiIHY6bUlEPSIxMDAiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuMTAwPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTQuMTcgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE0LjE3IDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJncm91cDEwMS0yMjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMC40MDcsOTI3Ljc4MSkgcm90YXRlKDE4MCkiIHY6bUlEPSIxMDEiIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uNjE0PC90aXRsZT4KCQkJPGcgaWQ9InNoYXBlMTAyLTIyMiIgdjptSUQ9IjEwMiIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC4xMDI8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNC4xNyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDYiLz4KCQkJPC9nPgoJCQk8ZyBpZD0ic2hhcGUxMDMtMjI0IiB2Om1JRD0iMTAzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjEwMzwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDE0LjE3IDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NyIvPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNC4xNyA2NDguNjQiIGNsYXNzPSJzdDgiLz4KCQkJPC9nPgoJCTwvZz4KCQk8ZyBpZD0iZ3JvdXAxMDQtMjI3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAuNDA3LDk2Mi4xMzcpIHJvdGF0ZSgxODApIiB2Om1JRD0iMTA0IiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYxNTwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTEwNS0yMjgiIHY6bUlEPSIxMDUiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuMTA1PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTQuMTcgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q2Ii8+CgkJCTwvZz4KCQkJPGcgaWQ9InNoYXBlMTA2LTIzMCIgdjptSUQ9IjEwNiIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC4xMDY8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNC4xNyA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDciLz4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTQuMTcgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9Imdyb3VwMTA3LTIzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTEuOTU3LDk5OS4yMTQpIHJvdGF0ZSgxODApIiB2Om1JRD0iMTA3IiB2Omdyb3VwQ29udGV4dD0iZ3JvdXAiPgoJCQk8dGl0bGU+Rm9nbGlvLjYxNjwvdGl0bGU+CgkJCTxnIGlkPSJzaGFwZTEwOC0yMzQiIHY6bUlEPSIxMDgiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuMTA4PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTYuNzYgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q2Ii8+CgkJCTwvZz4KCQkJPGcgaWQ9InNoYXBlMTA5LTIzNiIgdjptSUQ9IjEwOSIgdjpncm91cENvbnRleHQ9InNoYXBlIj4KCQkJCTx0aXRsZT5TaGVldC4xMDk8L3RpdGxlPgoJCQkJPHBhdGggZD0iTTAgNjQ4LjY0IEwxNi43NiA2NDguNjQgTDAgNjQ4LjY0IFoiIGNsYXNzPSJzdDciLz4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMTYuNzYgNjQ4LjY0IiBjbGFzcz0ic3Q4Ii8+CgkJCTwvZz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTEwLTIzOSIgdjptSUQ9IjExMCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2Ni42Mjk4LC01MS42NjY5KSI+CgkJCTx0aXRsZT5Gb2dsaW8uNzY8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCA2NDAuMTMgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCA4LjUgNjQ4LjY0IEwxNjMuNiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzIuMSA2NDAuMTMgTDE3Mi4xIDYzOC4yNQoJCQkJCQkgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNjMuNiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYzOC4yNSBMMCA2NDAuMTMgWiIKCQkJCQljbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTExMS0yNDEiIHY6bUlEPSIxMTEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjQuMjU4OCwtNTUuMzA0NykiPgoJCQk8dGl0bGU+Rm9nbGlvLjc3PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYyLjIyIDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3MC43MyA2NDAuMTMgTDE3MC43MwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYyLjIyIDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxMTItMjQzIiB2Om1JRD0iMTEyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjcwMDgsLTU1LjkxOTcpIj4KCQkJPHRpdGxlPkZvZ2xpby43ODwvdGl0bGU+CgkJCTxkZXNjPmpzcC5TY29wZWRBdHRyaWJ1dGVFTFJlc29sdmVyPC9kZXNjPgoJCQk8djp1c2VyRGVmcy8+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9Ijc2LjUzNTYiIGN5PSI2MzkuNDI0IiB3aWR0aD0iMTUzLjA4IiBoZWlnaHQ9IjE4LjQyNTIiLz4KCQkJPHJlY3QgeD0iMCIgeT0iNjMwLjIxMyIgd2lkdGg9IjE1My4wNzEiIGhlaWdodD0iMTguNDI1MiIgY2xhc3M9InN0NCIvPgoJCQk8dGV4dCB4PSI0IiB5PSI2NDEuODIiIGNsYXNzPSJzdDUiIHY6bGFuZ0lEPSIyMDU3Ij48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPmpzcC5JbXBvcnRFTFJlc29sdmVyPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJncm91cDExMy0yNDYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjI5ODgsMTIwNC41Nykgcm90YXRlKDE4MCkiIHY6bUlEPSIxMTMiIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uNzk8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGUxMTQtMjQ3IiB2Om1JRD0iMTE0IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjExNDwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTExNS0yNDkiIHY6bUlEPSIxMTUiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuMTE1PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTExNi0yNTIiIHY6bUlEPSIxMTYiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjYuNjI5OCwtMjMuNDYyNCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjgwPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYzLjYgNjQ4LjY0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTcyLjEgNjQwLjEzIEwxNzIuMSA2MzguMjUKCQkJCQkJIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYzLjYgNjI5Ljc0IEw4LjUgNjI5Ljc0IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMCA2MzguMjUgTDAgNjQwLjEzIFoiCgkJCQkJY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxMTctMjU0IiB2Om1JRD0iMTE3IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjI1ODgsLTI3LjEwMDIpIj4KCQkJPHRpdGxlPkZvZ2xpby44MTwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2Mi4yMiA2NDguNjQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAxNzAuNzMgNjQwLjEzIEwxNzAuNzMKCQkJCQkJIDYzOC4yNSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2Mi4yMiA2MjkuNzQgTDguNSA2MjkuNzQgQTguNTA0MTIgOC41MDQxMiAtMTgwIDAgMCAwIDYzOC4yNSBMMCA2NDAuMTMKCQkJCQkJIFoiIGNsYXNzPSJzdDMiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTE4LTI1NiIgdjptSUQ9IjExOCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3My43MDA4LC0yNy41NzM0KSI+CgkJCTx0aXRsZT5Gb2dsaW8uODI8L3RpdGxlPgoJCQk8ZGVzYz5qc3AuU2NvcGVkQXR0cmlidXRlRUxSZXNvbHZlcjwvZGVzYz4KCQkJPHY6dXNlckRlZnMvPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI3Ni41MzU2IiBjeT0iNjM5LjQyNCIgd2lkdGg9IjE1My4wOCIgaGVpZ2h0PSIxOC40MjUyIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjYzMC4yMTMiIHdpZHRoPSIxNTMuMDcxIiBoZWlnaHQ9IjE4LjQyNTIiIGNsYXNzPSJzdDQiLz4KCQkJPHRleHQgeD0iNCIgeT0iNjQxLjgyIiBjbGFzcz0ic3Q1IiB2OmxhbmdJRD0iMjA1NyI+PHY6cGFyYWdyYXBoLz48djp0YWJMaXN0Lz5qc3AuTm90Rm91bmRFTFJlc29sdmVyPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJncm91cDExOS0yNTkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjI5ODgsMTIzMi43Nykgcm90YXRlKDE4MCkiIHY6bUlEPSIxMTkiIHY6Z3JvdXBDb250ZXh0PSJncm91cCI+CgkJCTx0aXRsZT5Gb2dsaW8uODM8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGUxMjAtMjYwIiB2Om1JRD0iMTIwIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjEyMDwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTEyMS0yNjIiIHY6bUlEPSIxMjEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuMTIxPC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEyMi0yNjUiIHY6bUlEPSIxMjIiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjcuMzMwNiwtMTM2Ljg0OCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjEyMjwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDY0MC4xMyBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDguNSA2NDguNjQgTDE2My42IDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3Mi4xIDY0MC4xMyBMMTcyLjEgNjM4LjI1CgkJCQkJCSBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE2My42IDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMyBaIgoJCQkJCWNsYXNzPSJzdDIiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTIzLTI2NyIgdjptSUQ9IjEyMyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NC45NTk2LC0xNDAuNDg2KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTIzPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgNjQwLjEzIEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgOC41IDY0OC42NCBMMTYyLjIyIDY0OC42NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDE3MC43MyA2NDAuMTMgTDE3MC43MwoJCQkJCQkgNjM4LjI1IEE4LjUwNDEyIDguNTA0MTIgLTE4MCAwIDAgMTYyLjIyIDYyOS43NCBMOC41IDYyOS43NCBBOC41MDQxMiA4LjUwNDEyIC0xODAgMCAwIDAgNjM4LjI1IEwwIDY0MC4xMwoJCQkJCQkgWiIgY2xhc3M9InN0MyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxMjQtMjY5IiB2Om1JRD0iMTI0IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjcwMDgsLTE0MC42MjgpIj4KCQkJPHRpdGxlPkZvZ2xpby4xMjQ8L3RpdGxlPgoJCQk8ZGVzYz5lbC5CZWFuRUxSZXNvbHZlcjwvZGVzYz4KCQkJPHY6dXNlckRlZnMvPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI2OC4zNDgyIiBjeT0iNjM5LjQyNCIgd2lkdGg9IjEzNi43MSIgaGVpZ2h0PSIxOC40MjUyIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjYzMC4yMTMiIHdpZHRoPSIxMzYuNjk2IiBoZWlnaHQ9IjE4LjQyNTIiIGNsYXNzPSJzdDQiLz4KCQkJPHRleHQgeD0iMy45OSIgeT0iNjQxLjgyIiBjbGFzcz0ic3Q1IiB2OmxhbmdJRD0iMjA1NyI+PHY6cGFyYWdyYXBoLz48djp0YWJMaXN0Lz5lbC48dHNwYW4gY2xhc3M9InN0MTEiIHY6bGFuZ0lEPSIxMDMzIj5SZWNvcmQ8L3RzcGFuPkVMUmVzb2x2ZXI8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9Imdyb3VwMTI1LTI3MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjMuNzc5NSwxMjU5LjY0KSByb3RhdGUoMTgwKSIgdjptSUQ9IjEyNSIgdjpncm91cENvbnRleHQ9Imdyb3VwIj4KCQkJPHRpdGxlPkZvZ2xpby4xMjU8L3RpdGxlPgoJCQk8ZyBpZD0ic2hhcGUxMjYtMjc0IiB2Om1JRD0iMTI2IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiPgoJCQkJPHRpdGxlPlNoZWV0LjEyNjwvdGl0bGU+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCBMMCA2NDguNjQgWiIgY2xhc3M9InN0NiIvPgoJCQk8L2c+CgkJCTxnIGlkPSJzaGFwZTEyNy0yNzYiIHY6bUlEPSIxMjciIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSI+CgkJCQk8dGl0bGU+U2hlZXQuMTI3PC90aXRsZT4KCQkJCTxwYXRoIGQ9Ik0wIDY0OC42NCBMMjkuMDMgNjQ4LjY0IEwwIDY0OC42NCBaIiBjbGFzcz0ic3Q3Ii8+CgkJCQk8cGF0aCBkPSJNMCA2NDguNjQgTDI5LjAzIDY0OC42NCIgY2xhc3M9InN0OCIvPgoJCQk8L2c+CgkJPC9nPgoJPC9nPgo8L3N2Zz4K" alt="image"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="functions"><a class="anchor" href="#functions"></a>2.11. Functions</h3>
<div class="paragraph">
<p>The EL has qualified functions, reusing the
notion of qualification from XML namespaces (and attributes), XSL
functions, and JSP custom actions. Functions are mapped to public static
methods in Java classes. In JSP, the map is specified in the TLD.</p>
</div>
<div class="paragraph">
<p>Function mapping information is bound into
the <code>ValueExpression</code> or <code>MethodExpression</code> at parse-time and is
serialized along with the state of the expression. No function mapper
needs to be provided at evaluation time.</p>
</div>
<div class="sect3">
<h4 id="invocation-syntax"><a class="anchor" href="#invocation-syntax"></a>2.11.1. Invocation Syntax</h4>
<div class="paragraph">
<p>The full syntax is that of qualified n-ary
functions:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>ns:f(a1,a2, ..., an)</pre>
</div>
</div>
<div class="paragraph">
<p>As with the rest of EL, this element can
appear in attributes and directly in template text.</p>
</div>
<div class="paragraph">
<p>The prefix <code>ns</code> must match the prefix of a
tag library that contains a function whose name and signature matches
the function being invoked (<code>f</code>), or a translation error must occur.
If the prefix is omitted, the tag library associated with the default
namespace is used (this is only possible in JSP documents).</p>
</div>
<div class="paragraph">
<p>In the following standard syntax example,
<code>func1</code> is associated with <code>some-taglib</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib prefix=&quot;some&quot; uri=&quot;http://acme.com/some-taglib&quot; %&gt;
 ${some:func1(true)}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following JSP document example, both
<code>func2</code> and <code>func3</code> are associated with <code>default-taglib</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;some:tag xmlns=&quot;http://acme.com/default-taglib&quot;
           xmlns:some=&quot;http://acme.com/some-taglib&quot;
           xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;&gt;
   &lt;some:other value=&quot;${func2(true)}&quot;&gt;
       ${func3(true)}
   &lt;/some:other&gt;
 &lt;/some:tag&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tag-library-descriptor-information"><a class="anchor" href="#tag-library-descriptor-information"></a>2.11.2. Tag Library Descriptor Information</h4>
<div class="paragraph">
<p>Each tag library may include zero or more <code>n</code>-ary (static) functions. The
Tag Library Descriptor (TLD) associated with a tag library lists the functions.</p>
</div>
<div class="paragraph">
<p>Each such function is given a name (as seen
in the EL), and a static method in a specific class that will implement
the function. The class specified in the TLD must be a public class, and
must be specified using a fully-qualified class name (including
packages). The specified method must be a public static method in the
specified class, and must be specified using a fully-qualified return
type followed by the method name, followed by the fully-qualified
argument types in parenthesis, separated by commas (see the XML Schema
for Tag Library Descriptors for a full description of this
syntax). Failure to satisfy these requirements shall result in a
translation-time error.</p>
</div>
<div class="paragraph">
<p>A tag library can have only one <code>function</code>
element in the same tag library with the same value for their <code>name</code>
element. If two functions have the same name, a translation-time error
shall be generated.</p>
</div>
<div class="paragraph">
<p>Reference the <code>function</code> element in the XML Schema for Tag Library
Descriptors for how to specify a function in the TLD.</p>
</div>
</div>
<div class="sect3">
<h4 id="example"><a class="anchor" href="#example"></a>2.11.3. Example</h4>
<div class="paragraph">
<p>The following TLD fragment describes a
function with name <code>nickname</code> that is intended to fetch the nickname of
the user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;taglib&gt;
   ...
   &lt;function&gt;
     &lt;name&gt;nickname&lt;/name&gt;
     &lt;function-class&gt;mypkg.MyFunctions&lt;/function-class&gt;
     &lt;function-signature&gt;
         java.lang.String nickName(java.lang.String)
     &lt;/function-signature&gt;
   &lt;/function&gt;
 &lt;/taglib&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following EL fragment shows the
invocation of the function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;h2&gt;Dear ${my:nickname(user)}&lt;/h2&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="semantics"><a class="anchor" href="#semantics"></a>2.11.4. Semantics</h4>
<div class="ulist">
<ul>
<li>
<p>If the function has no prefix, the default namespace is used and the function
is not validated. If the function has a prefix, assume the namespace as
that associated with the prefix.</p>
<div class="paragraph">
<p>Let <code>ns</code> be the namespace associated with
the function, and <code>f</code> be the name of the function.</p>
</div>
</li>
<li>
<p>Locate the TLD associated with <code>ns</code>. If
none can be found, this shall be a translation-time error.</p>
</li>
<li>
<p>Locate the <code>function</code> element with a <code>name</code>
subelement with value <code>f</code> in that TLD. If none can be found, this shall
be a translation-time error.</p>
</li>
<li>
<p>Locate the public class with name equal to
the value of the <code>function-class</code> element. Locate the public static
method with name and signature equal to the value of the
<code>function-signature</code> element. If any of these don’t exist, a
translation-time error shall occur.</p>
</li>
<li>
<p>Evaluate each argument to the corresponding
type indicated in the signature.</p>
</li>
<li>
<p>Evaluate the public static Java method. The
resulting value is the value returned by the method evaluation, or
<code>null</code> if the Java method is declared to return <code>void</code>. If an exception
is thrown during the method evaluation, the exception must be wrapped in
an <code>ELException</code> and the <code>ELException</code> must be thrown.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The introduction in Expression Language 3.0 of Lambdas and the ability to
import methods at runtime via an <code>ImportHandler</code>, mean it is no longer possible
to validate functions without a prefix at translation time.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jsp-configuration"><a class="anchor" href="#jsp-configuration"></a>3. JSP Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the JSP
configuration information, which is specified in the Web Application
Deployment Descriptor in <code>WEB-INF/web.xml</code>. For Servlet 6.2, the Web
Application Deployment Descriptor is defined using XML Schema, and
imports the elements described in the XML Schema for JSP 4.1 Deployment
Descriptor. See the XML Schema for the details on how to specify JSP
configuration information in a Web Application.</p>
</div>
<div class="sect2">
<h3 id="jsp-configuration-information-in-web-xml"><a class="anchor" href="#jsp-configuration-information-in-web-xml"></a>3.1. JSP Configuration Information in web.xml</h3>
<div class="paragraph">
<p>A Web Application can include general JSP
configuration information in its <code>web.xml</code> file that is to be used by
the JSP container. The information is described through the <code>jsp-config</code>
element and its subelements.</p>
</div>
<div class="paragraph">
<p>The <code>jsp-config</code> element is a subelement of
<code>web-app</code> that is used to provide global configuration information
for the JSP files in a Web Application. A <code>jsp-config</code> has two
subelements: <code>taglib</code> and <code>jsp-property-group</code>, defining the taglib
mapping and groups of JSP files respectively.</p>
</div>
</div>
<div class="sect2">
<h3 id="taglib-map"><a class="anchor" href="#taglib-map"></a>3.2. Taglib Map</h3>
<div class="paragraph">
<p>The <code>web.xml</code> file can include an explicit
taglib map between URIs and TLD resource paths described using <code>taglib</code>
elements in the Web Application Deployment descriptor.</p>
</div>
<div class="paragraph">
<p>The <code>taglib</code> element is a subelement of
<code>jsp-config</code> that can be used to provide information on a tag library
that is used by a JSP page within the Web Application. The <code>taglib</code>
element has two subelements: <code>taglib-uri</code> and <code>taglib-location</code>.</p>
</div>
<div class="paragraph">
<p>A <code>taglib-uri</code> element describes a URI
identifying a tag library used in the web application. The body of the
<code>taglib-uri</code> element may be either an absolute URI specification, or a
relative URI as in <a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>. There should be no
entries in <code>web.xml</code> with the same <code>taglib-uri</code> value.</p>
</div>
<div class="paragraph">
<p>A <code>taglib-location</code> element contains a
resource location (as indicated in <a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>) of
the Tag Library Description File for
the tag library.</p>
</div>
</div>
<div class="sect2">
<h3 id="jsp-property-groups"><a class="anchor" href="#jsp-property-groups"></a>3.3. JSP Property Groups</h3>
<div class="paragraph">
<p>A JSP property group is a collection of
properties that apply to a set of files that represent JSP pages. These
properties are defined in one or more <code>jsp-property-group</code> elements in
the Web Application deployment descriptor.</p>
</div>
<div class="paragraph">
<p>Most properties defined in a JSP property
group apply to an entire translation unit, that is, the requested JSP
file that is matched by its URL pattern and all the files it includes
via the include directive. The exceptions are the <code>page-encoding</code> and
<code>is-xml</code> properties, which apply separately to each JSP file matched by
the URL pattern.</p>
</div>
<div class="paragraph">
<p>The applicability of a JSP property group is
defined through one or more URL patterns. URL patterns use the same
syntax as defined in Chapter SRV.12 of the Servlet 6.2 specification,
but are bound at translation time. All the properties in the group apply
to the resources in the Web Application that match any of the URL
patterns. There is an implicit property: that of being a JSP file. JSP
Property Groups do not affect tag files.</p>
</div>
<div class="paragraph">
<p>If a resource matches a URL pattern in both a
<code>&lt;servlet-mapping&gt;</code> and a <code>&lt;jsp-property-group&gt;</code>, the pattern that is
most specific applies (following the same rules as in the Servlet
specification). If the URL patterns are identical, the
<code>&lt;jsp-property-group&gt;</code> takes precedence over the <code>&lt;servlet-mapping&gt;</code>.
If at least one <code>&lt;jsp-property-group&gt;</code> contains the most specific
matching URL pattern, the resource is considered to be a JSP file, and
the properties in that <code>&lt;jsp-property-group&gt;</code> apply. In addition, if a
resource is considered to be a JSP file, all <code>include-prelude</code> and
<code>include-coda</code> properties apply from all the <code>&lt;jsp-property-group&gt;</code>
elements with matching URL patterns (see <a href="#defining-implicit-includes">Section 3.3.6, &#8220;Defining Implicit Includes&#8221;</a>).</p>
</div>
<div class="sect3">
<h4 id="_JSP_Property_Groups"><a class="anchor" href="#_JSP_Property_Groups"></a>3.3.1. JSP Property Groups</h4>
<div class="paragraph">
<p>A <code>jsp-property-group</code> is a subelement of
<code>jsp-config</code>. The properties that can currently be described in a
<code>jsp-property-group</code> include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Indicate that a resource is a JSP file
(implicit).</p>
</li>
<li>
<p>Control disabling of EL evaluation.</p>
</li>
<li>
<p>Control disabling of Scripting elements.</p>
</li>
<li>
<p>Indicate page Encoding information.</p>
</li>
<li>
<p>Prelude and Coda automatic includes.</p>
</li>
<li>
<p>Indicate that a resource is a JSP document.</p>
</li>
<li>
<p>Indicate that the deferred syntax
(initiated by the character sequence <code>#{</code>) is allowed as a String
literal.</p>
</li>
<li>
<p>Control handling of whitespaces in template
text.</p>
</li>
<li>
<p>Indicate response ContentType information.</p>
</li>
<li>
<p>Indicate response buffer size.</p>
</li>
<li>
<p>Control handling of undeclared namespaces
in a JSP page.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_Deactivating_EL_Evaluation"><a class="anchor" href="#_Deactivating_EL_Evaluation"></a>3.3.2. Deactivating EL Evaluation</h4>
<div class="paragraph">
<p>Since the syntactic pattern <code>${expr}</code> was
not reserved in the JSP specifications before JSP 2.0, and the syntactic
pattern <code>#{expr}</code> was not reserved before JSP 2.1, there may be
situations where such patterns appear but the intention is not to
activate EL expression evaluation but rather to pass through the pattern
verbatim. To address this, the EL evaluation machinery can be
deactivated as indicated in this section.</p>
</div>
<div class="paragraph">
<p>Each JSP page has a default setting as to
whether to ignore EL expressions. When ignored, the expression is passed
through verbatim. The default setting does not apply to tag files, which
always default to evaluating expressions.</p>
</div>
<div class="paragraph">
<p>The default mode for JSP pages in a Web
Application delivered using a <code>web.xml</code> using the Servlet 2.3 or earlier
format is to ignore EL expressions; this provides for backward
compatibility.</p>
</div>
<div class="paragraph">
<p>The default mode for JSP pages in a Web
Application delivered using a <code>web.xml</code> using the Servlet 2.4 or later format is
to evaluate EL expressions with the ${} syntax. Expressions using the
#{} are evaluated starting with JSP 2.1. See
<a href="#backwards-compatibility-with-jsp-2-0">Section 3.4, &#8220;Backwards Compatibility with JSP 2.0&#8221;</a>
for more details on the evaluation of #{} expressions.</p>
</div>
<div class="paragraph">
<p>The default mode can be explicitly changed by
setting the value of the <code>el-ignored</code> element. The <code>el-ignored</code> element
is a subelement of <code>jsp-property-group</code> (see <a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>)
It has no subelements. Its valid values are <code>true</code> and <code>false</code>.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>web.xml</code> fragment
defines a group that deactivates EL evaluation for all JSP pages
delivered using the <code>.jsp</code> extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>*.jsp<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;el-ignored&gt;</span>true<span class="tag">&lt;/el-ignored&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Page authors can override the default mode
through the <code>isELIgnored</code> attribute of the page directive. For tag
files, there is no default, but the <code>isELIgnored</code> attribute of the tag
directive can be used to control the EL evaluation settings.</p>
</div>
<div class="paragraph">
<p><a href="#_EL_Evaluation_Settings_for_JSP_Pages"><strong>Table JSP.3-1</strong> , &#8220;EL Evaluation Settings for JSP Pages&#8221;</a> summarizes the EL evaluation settings for JSP
pages, and their meanings:</p>
</div>
<table id="_EL_Evaluation_Settings_for_JSP_Pages" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.3-1</strong> EL Evaluation Settings for JSP Pages</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JSP Configuration &lt;el-ignored&gt;</th>
<th class="tableblock halign-left valign-top">Page Directive isELIgnored</th>
<th class="tableblock halign-left valign-top">EL Encountered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignored if web.xml &lt;= 2.3 Evaluated otherwise.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignored</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">don’t care</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">don’t care</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignored</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#_EL_Evaluation_Settings_for_Tag_Files"><strong>Table JSP.3-2</strong> , &#8220;EL Evaluation Settings for Tag Files&#8221;</a> summarizes the EL evaluation settings for tag files, and their meanings:</p>
</div>
<table id="_EL_Evaluation_Settings_for_Tag_Files" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.3-2</strong> EL Evaluation Settings for Tag Files</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag Directive isELIgnored</th>
<th class="tableblock halign-left valign-top">EL Encountered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignored</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The EL evaluation setting for a translation
unit also affects whether the <code>\$</code> and <code>\#</code> quote sequences are enabled
for template text and attribute values in a JSP page, document, or tag
file. When EL evaluation is disabled, <code>\$</code> and <code>\#</code> will not be
recognized as quotes, whereas when EL evaluation is enabled, <code>\$</code> and
<code>\#</code> will be recognized as quotes for <code>$</code> and <code>#</code> respectively. See
<a href="#quoting-and-escape-conventions">Section 1.6, &#8220;Quoting and Escape Conventions&#8221;</a> and <a href="#overview-of-syntax-of-jsp-documents">Section 6.2.2, &#8220;Overview of Syntax of JSP Documents&#8221;</a>
for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_Disabling_Scripting_Elements"><a class="anchor" href="#_Disabling_Scripting_Elements"></a>3.3.3. Disabling Scripting Elements</h4>
<div class="paragraph">
<p>With the addition of the EL, some JSP page
authors, or page authoring groups, may want to follow a methodology
where scripting elements are not allowed. Previous versions of JSP
enabled this through the notion of a <code>TagLibraryValidator</code> that would
verify that the elements are not present. JSP 2.0 made this slightly
easier through a JSP configuration element.</p>
</div>
<div class="paragraph">
<p>The <code>scripting-invalid</code> element is a
subelement of <code>jsp-property-group</code> (see <a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>). It
has no subelements. Its valid values are
<code>true</code> and <code>false</code>. Scripting is enabled by default. Disabling
scripting elements can be done by setting the <code>scripting-invalid</code>
element to <code>true</code> in the JSP configuration.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>web.xml</code> fragment
defines a group that disables scripting elements for all JSP pages
delivered using the <code>.jsp</code> extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>*.jsp<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;script</span><span class="attribute-name">ing-invalid</span><span class="tag">&gt;</span><span class="inline"><span class="predefined-constant">true</span>&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">scripting-invalid&gt;
 &lt;</span><span class="delimiter">/</span></span>jsp-property-group&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#_Scripting_Settings"><strong>Table JSP.3-3</strong> , &#8220;Scripting Settings&#8221;</a> summarizes the scripting settings and their meanings:</p>
</div>
<table id="_Scripting_Settings" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.3-3</strong> Scripting Settings</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JSP Configuration &lt;scripting-invalid&gt;</th>
<th class="tableblock halign-left valign-top">Scripting Encountered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Translation Error</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_Unknown_EL_Identifiers"><a class="anchor" href="#_Unknown_EL_Identifiers"></a>3.3.4. Unknown EL Identifiers</h4>
<div class="paragraph">
<p>The default behaviour of the <code>NotFoundELResolver</code> is to return <code>null</code> when
attempting to resolve an unknown identifier. This can mask bugs and therefore
may not always be the desired behaviour. To address this, the default behaviour
can be changed as indicated in this section.</p>
</div>
<div class="paragraph">
<p>The default behaviour can be explicitly changed by setting the value of the
<code>error-on-el-not-found</code> element. The <code>error-on-el-not-found</code> element is a
subelement of <code>jsp-property-group</code> (see <a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>)
It has no subelements. Its valid values are <code>true</code> and <code>false</code>.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>web.xml</code> fragment defines a group that configures
all JSP pages delivered using the <code>.jsp</code> extension to throw a
<code>PropertyNotFoundException</code> if an EL expression contains an unknown identifier.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>*.jsp<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;error-on-el-not-found&gt;</span>true<span class="tag">&lt;/error-on-el-not-found&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Page authors can override the default mode through the <code>errorOnELNotFound</code>
attribute of the page directive and the <code>errorOnELNotFound</code> attribute of the tag
directive can.</p>
</div>
<div class="paragraph">
<p><a href="#_EL_Unknown_Identifier_Settings_for_JSP_Pages"><strong>Table JSP.3-4</strong> , &#8220;EL Evaluation Unknown Identifier for JSP Pages&#8221;</a> summarizes the EL unknown
identifier settings for JSP pages, and their meanings:</p>
</div>
<table id="_EL_Unknown_Identifier_Settings_for_JSP_Pages" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.3-4</strong> EL Evaluation Unknown Identifier for JSP Pages</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JSP Configuration &lt;error-on-el-not-found&gt;</th>
<th class="tableblock halign-left valign-top">Page Directive errorOnELNotFound</th>
<th class="tableblock halign-left valign-top">Unknown Identifier Encountered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> is returned by <code>ELResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> is returned by <code>ELResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyNotFoundException</code> thrown by <code>ELResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">don’t care</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> is returned by <code>ELResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">don’t care</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyNotFoundException</code> thrown by <code>ELResolver</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#_EL_Unknown_Identifier_Settings_for_Tag_Files"><strong>Table JSP.3-5</strong> , &#8220;EL Unknown Identifier Settings for Tag Files&#8221;</a> summarizes the EL unknown
identifier settings for tag files, and their meanings:</p>
</div>
<table id="_EL_Unknown_Identifier_Settings_for_Tag_Files" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.3-5</strong> EL Unknown Identifier Settings for Tag Files</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag Directive errorOnELNotFound</th>
<th class="tableblock halign-left valign-top">Unknown Identifier Encountered</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unspecified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> is returned by <code>ELResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code> is returned by <code>ELResolver</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PropertyNotFoundException</code> thrown by <code>ELResolver</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="declaring-page-encodings"><a class="anchor" href="#declaring-page-encodings"></a>3.3.5. Declaring Page Encodings</h4>
<div class="paragraph">
<p>The JSP configuration element <code>page-encoding</code>
can be used to easily set the <code>pageEncoding</code> property of a group of JSP
pages defined using the <code>jsp-property-group</code> element. This is only
needed for pages in standard syntax, since for documents in XML syntax
the page encoding is determined as described in section 4.3.3 and
appendix F.1 of the XML specification.</p>
</div>
<div class="paragraph">
<p>The <code>page-encoding</code> element is a subelement
of <code>jsp-property-group</code> (see <a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>). It has no subelements. Its valid values are those of
the <code>pageEncoding</code> page directive. It is a translation-time error to
name different encodings in the <code>pageEncoding</code> attribute of the page
directive of a JSP page and in a JSP configuration element matching the
page. It is also a translation-time error to name different encodings in
the prolog / text declaration of the document in XML syntax and in a JSP
configuration element matching the document. It is legal to name the
same encoding through multiple mechanisms.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>web.xml</code> fragment
defines a group that explicitly assigns <code>Shift_JIS</code> to all JSP pages and
included JSP segments in the <code>/ja</code> subdirectory of the web application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>/ja/*<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;page-encoding&gt;</span>Shift_JIS<span class="tag">&lt;/page-encoding&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="defining-implicit-includes"><a class="anchor" href="#defining-implicit-includes"></a>3.3.6. Defining Implicit Includes</h4>
<div class="paragraph">
<p>The <code>include-prelude</code> element is an optional
subelement of <code>jsp-property-group</code>. It has no subelements. Its value is
a context-relative path that must correspond to an element in the Web
Application. When the element is present, the given path will be
automatically included (as in an <code>include</code> directive) at the beginning
of the JSP page in the <code>jsp-property-group</code>. When there is more than
one <code>include-prelude</code> element in a group, they are to be included in the
order they appear. When more than one <code>jsp-property-group</code> applies to a
JSP page, the corresponding include-prelude elements will be processed
in the same order as they appear in the JSP configuration section of
<code>web.xml</code>.</p>
</div>
<div class="paragraph">
<p>The <code>include-coda</code> element is an optional
subelement of <code>jsp-property-group</code>. It has no subelements. Its value is
a context-relative path that must correspond to an element in the Web
Application. When the element is present, the given path will be
automatically included (as in an <code>include</code> directive) at the end of the
JSP page in the <code>jsp-property-group</code>. When there is more than one
<code>include-coda</code> element in a group, they are to be included in the order
they appear. When more than one <code>jsp-property-group</code> applies to a JSP
page, the corresponding <code>include-coda</code> elements will be processed in the
same order as they appear in the JSP configuration section of <code>web.xml</code>
. Note that these semantics are in contrast to the way <code>url-pattern</code> s
are matched for other configuration elements.</p>
</div>
<div class="paragraph">
<p>Preludes and codas follow the same rules as
statically included JSP segments. In particular, start tags and end tags
must appear in the same file (see <a href="#start-and-end-tags">Section 1.3.3, &#8220;Start and End Tags&#8221;</a>).</p>
</div>
<div class="paragraph">
<p>For example, the following <code>web.xml</code> fragment
defines two groups. Together they indicate that everything in directory
<code>/two/</code> has <code>/WEB-INF/jspf/prelude1.jspf</code> and
<code>/WEB-INF/jspf/prelude2.jspf</code> at the beginning and
<code>/WEB-INF/jspf/coda1.jspf</code> and <code>/WEB-INF/jspf/coda2.jspf</code> at the end, in
that order, while other <code>.jsp</code> files only have
<code>/WEB-INF/jspf/prelude1.jspf</code> at the beginning and
<code>/WEB-INF/jspf/coda1.jspf</code> at the end.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>*.jsp<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;include-prelude&gt;</span>/WEB-INF/jspf/prelude1.jspf<span class="tag">&lt;/include-prelude&gt;</span>
   <span class="tag">&lt;include-coda&gt;</span>/WEB-INF/jspf/coda1.jspf<span class="tag">&lt;/include-coda&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span>
 <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>/two/*<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;include-prelude&gt;</span>/WEB-INF/jspf/prelude2.jspf<span class="tag">&lt;/include-prelude&gt;</span>
   <span class="tag">&lt;include-coda&gt;</span>/WEB-INF/jspf/coda2.jspf<span class="tag">&lt;/include-coda&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="denoting-xml-documents"><a class="anchor" href="#denoting-xml-documents"></a>3.3.7. Denoting XML Documents</h4>
<div class="paragraph">
<p>The JSP configuration element <code>is-xml</code> can be
used to denote that a group of files are JSP documents, and thus must be
interpreted as XML documents.</p>
</div>
<div class="paragraph">
<p>The <code>is-xml</code> element is a subelement of
<code>jsp-property-group</code> (see <a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>). It has no subelements.
Its valid values are <code>true</code> and
<code>false</code>. When <code>false</code>, the files in the associated property group are
assumed to not be JSP documents, unless there is another property group
that indicates otherwise. The files are still considered to be JSP pages
due to the implicit property given by the <code>&lt;jsp-property-group&gt;</code>
element.</p>
</div>
<div class="paragraph">
<p>For example, the following <code>web.xml</code> fragment
defines two groups. The first one indicates that those files with
extension <code>.jspx</code>, which is the default extension for JSP documents,
are instead just plain JSP pages. The last group indicates that files
with extension <code>.svg</code> are actually JSP documents (which most likely are
generating SVG files).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>*.jspx<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;is-xml&gt;</span>false<span class="tag">&lt;/is-xml&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span>
 <span class="tag">&lt;jsp-property-group&gt;</span>
   <span class="tag">&lt;url-pattern&gt;</span>*.svg<span class="tag">&lt;/url-pattern&gt;</span>
   <span class="tag">&lt;is-xml&gt;</span>true<span class="tag">&lt;/is-xml&gt;</span>
 <span class="tag">&lt;/jsp-property-group&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Deferred_Syntax"><a class="anchor" href="#Deferred_Syntax"></a>3.3.8. Deferred Syntax (character sequence <code>#{</code>)</h4>
<div class="paragraph">
<p>As of JSP 2.1, the character sequence <code>#{</code>
is reserved for EL expressions. Consequently, a translation error occurs
if the <code>#{</code> character sequence is used as a String literal (in template
text of a JSP 2.1+ container or as an attribute value for a tag-library
where jsp-version is 2.1+).</p>
</div>
<div class="paragraph">
<p>The <code>deferred-syntax-allowed-as-literal</code>
element is a subelement of <code>jsp-property-group</code> (See
<a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>). It has no
subelements. Its valid values are <code>true</code> and <code>false</code>, and it is
disabled (<code>false</code>) by default. Allowing the character sequence <code>#{</code>
when used as a String literal can be done by setting the
<code>deferred-syntax-allowed-as-literal</code> element to <code>true</code> in the JSP
configuration.</p>
</div>
<div class="paragraph">
<p>Page authors can override the default value
through the <code>deferredSyntaxAllowedAsLiteral</code> attribute of the page
directive (see <a href="#directives">Section 1.10, &#8220;Directives&#8221;</a>). See also
<a href="#backwards-compatibility-with-jsp-2-0">Section 3.4, &#8220;Backwards Compatibility with JSP 2.0&#8221;</a>
for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="removing-whitespaces-from-template-text"><a class="anchor" href="#removing-whitespaces-from-template-text"></a>3.3.9. Removing Whitespaces from Template Text</h4>
<div class="paragraph">
<p>Whitespaces in template text of a JSP page
are preserved by default (See <a href="#white-space">Section 1.3.8, &#8220;White Space&#8221;</a>). Unfortunately, this means that unwanted extraneous whitespaces
often make it into the response output.</p>
</div>
<div class="paragraph">
<p>For example, the following code snippet
(where <code>&lt;EOL&gt;</code> represents the end-of-line character(s))</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;&lt;EOL&gt;
 &lt;%@ taglib prefix=&quot;x&quot; uri=&quot;http://java.sun.com/jsp/jstl/xml&quot; %&gt;&lt;EOL&gt;
 Hello World!&lt;EOL&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>would generate the following output:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;EOL&gt;
&lt;EOL&gt;
Hello World!&lt;EOL&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For JSP pages (standard syntax), the JSP
configuration element <code>trim-directive-whitespaces</code> can be used to
indicate that template text containing only whitespaces must be removed
from the response output. It has no effect on JSP documents (XML
syntax). In the example above, the first <code>&lt;EOL&gt;</code> represents template text
that contains only whitespaces and would therefore be removed. <code>&lt;EOL&gt;</code>
HelloWorld! <code>&lt;EOL&gt;</code> represents template text that does not contain only
whitespaces and would therefore be preserved as-is.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;EOL&gt;
Hello World!&lt;EOL&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>trim-directive-whitespaces</code> element is a
subelement of <code>jsp-property-group</code> (See <a href="#_JSP_Property_Groups">Section 3.3.1, &#8220;JSP Property Groups&#8221;</a>). It has
no subelements. Its valid values are
<code>true</code> and <code>false</code>, and it is disabled (<code>false</code>) by default. Enabling
the trimming of whitespaces can be done by setting the
<code>trim-directive-whitespaces</code> element to <code>true</code> in the JSP configuration.</p>
</div>
<div class="paragraph">
<p>Page authors can override the default value
through the <code>trimDirectiveWhitespaces</code> attribute of the page directive
(see <a href="#directives">Section 1.10, &#8220;Directives&#8221;</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="declaring-default-content-type"><a class="anchor" href="#declaring-default-content-type"></a>3.3.10. Declaring Default Content Type</h4>
<div class="paragraph">
<p>The JSP configuration element
<code>default-content-type</code> can be used to specify the default <code>contentType</code>
property of a group of JSP pages defined using the <code>jsp-property-group</code>
element.</p>
</div>
<div class="paragraph">
<p>The valid values for the <code>default-content-type</code>
element are those of the <code>contentType</code> attribute of the <code>page</code> directive. It
specifies the default response <code>contentType</code> if the <code>page</code> directive does
not include a <code>contentType</code> attribute.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-default-buffer-size"><a class="anchor" href="#setting-default-buffer-size"></a>3.3.11. Setting Default Buffer Size</h4>
<div class="paragraph">
<p>The JSP configuration element buffer can be
used to specify the default buffering model for the initial out
JspWriter for a group of JSP pages defined using the the
jsp-property-group element.</p>
</div>
<div class="paragraph">
<p>The valid values for the buffer element are
those of the buffer attribute of the page directive. It can be used to
specify if buffering should be used for the output to Response, and if
so, the size of the buffer to use.</p>
</div>
</div>
<div class="sect3">
<h4 id="raising-errors-for-undeclared-namespaces"><a class="anchor" href="#raising-errors-for-undeclared-namespaces"></a>3.3.12. Raising Errors for Undeclared Namespaces</h4>
<div class="paragraph">
<p>The default behavior when a tag with unknown
namespace is used in a JSP page is to silently ignore it. For most page
authors, this is often a source of errors. To make the mistakes obvious,
this JSP configuration element can be used to force an error when an
unknown namespace is used in a JSP page, as is already the case for JSP
documents (XML syntax).</p>
</div>
<div class="paragraph">
<p>The <code>error-on-undeclared-namespace</code> element is
a subelement of <code>jsp-property-group</code>. It has no subelements. Its valid
values are <code>true</code> and <code>false</code>, with false being the default.</p>
</div>
<div class="paragraph">
<p>If it is set to <code>true</code>, then an error must be
raised during the translation time, when an undeclared tag is used in a
JSP page.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="backwards-compatibility-with-jsp-2-0"><a class="anchor" href="#backwards-compatibility-with-jsp-2-0"></a>3.4. Backwards Compatibility with JSP 2.0</h3>
<div class="paragraph">
<p>As of JSP 2.1, the character sequence <code>#{</code> was reserved for EL expressions.</p>
</div>
<div class="paragraph">
<p>When used as a tag attribute value, the <code>#{expr}</code> syntax is evaluated by the
container only if the the jsp-version element specified in the TLD has the value
2.1 or higher. If the version specified is less than 2.1, then the <code>#{expr}</code>
syntax is simply processed as a String literal.</p>
</div>
<div class="paragraph">
<p>When used in template text in a JSP page, the <code>#{</code> character sequence triggers a
translation error, unless specifically allowed through a configuration setup. This
is because the <code>#{}</code> syntax is associated exclusively with deferred-evaluation in JSP
2.1 and does not make sense in the context of template text (only immediate
evaluation using the <code>${expr}</code> syntax makes sense in template text).</p>
</div>
<div class="paragraph">
<p>In a tag file, <code>#{expr}</code> in template text is handled according to the tag file’s
JSP version. If the tag file’s JSP version is 2.0 or less, <code>#{expr}</code> in template
text will not cause any error. If the tag file’s JSP version is equal to or greater
than 2.1, <code>#{expr}</code> in template text must cause an error, unless it has been
escaped or the tag file contains a <code>deferredSyntaxAllowedAsLiteral</code> tag directive
attribute set to <code>TRUE</code>.
See <a href="#packaging-in-a-jar">Section 8.4.2, &#8220;Packaging in a JAR&#8221;</a>, and <a href="#packaging-directly-in-a-web-application">Section 8.4.3, &#8220;Packaging Directly in a Web Application&#8221;</a>,
for how the JSP version of a tag file is determined.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="internationalization-issues"><a class="anchor" href="#internationalization-issues"></a>4. Internationalization Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes requirements for
internationalization with Jakarta Server Pages.</p>
</div>
<div class="paragraph">
<p>The JSP specification by itself does not
provide a complete platform for internationalization. It is complemented
by functionality provided by the underlying Java
platform, the Servlet APIs, and by tag libraries such as the JSP
Standard Tag Library (JSTL) with its collection of internationalization
and formatting actions. For complete information, see the respective
specifications.</p>
</div>
<div class="paragraph">
<p>Primarily, this specification addresses the
issues of character encodings.</p>
</div>
<div class="paragraph">
<p>The Java programming language represents
characters internally using the Unicode character encoding, which
provides support for most languages. As of Java 8, the Unicode 6.2
character set is supported. For storage and transmission over networks,
however, many other character encodings are used. The Java SE platform
therefore also supports character conversion to and from other character
encodings. Any Java runtime must support the Unicode transformations
UTF-8, UTF-16BE, and UTF-16LE as well as the ISO-8859-1 (Latin-1) and
US-ASCII character encodings, but most implementations support many more.</p>
</div>
<div class="paragraph">
<p>In JSP pages and in JSP configuration
elements, character encodings are named using the names defined in the
IANA charset registry:</p>
</div>
<div class="paragraph">
<p><a href="http://www.iana.org/assignments/character-sets" class="bare">http://www.iana.org/assignments/character-sets</a></p>
</div>
<div class="sect2">
<h3 id="page-character-encoding"><a class="anchor" href="#page-character-encoding"></a>4.1. Page Character Encoding</h3>
<div class="paragraph">
<p>The page character encoding is the character
encoding in which the JSP page or tag file itself is encoded. The
character encoding is determined for each file separately, even if one
file includes another using the include directive
(<a href="#the-include-directive">Section 1.10.3, &#8220;The <code>include</code> Directive&#8221;</a>). A detailed
algorithm for determining the page character encoding of a JSP page or
tag file can be found in <a href="#page-encoding-detection">Appendix B, <em>Page Encoding Detection</em></a>.</p>
</div>
<div class="sect3">
<h4 id="standard-syntax"><a class="anchor" href="#standard-syntax"></a>4.1.1. Standard Syntax</h4>
<div class="paragraph">
<p>For JSP pages in standard syntax, the page
character encoding is determined from the following sources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A byte order mark (BOM)</p>
</li>
<li>
<p>A JSP configuration element <code>page-encoding</code>
value whose URL pattern matches the page.</p>
</li>
<li>
<p>The <code>pageEncoding</code> attribute of the <code>page</code>
directive of the page. It is a translation-time error to name different
encodings in the <code>pageEncoding</code> attribute of the page directive of a JSP
page and in a JSP configuration element whose URL pattern matches the
page.</p>
</li>
<li>
<p>The charset value of the <code>contentType</code>
attribute of the page directive. This is used to determine the page
character encoding if neither a JSP configuration element
<code>page-encoding</code> nor the <code>pageEncoding</code> attribute are provided.</p>
</li>
<li>
<p>If none of the above is provided,
ISO-8859-1 is used as the default character encoding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For tag files in standard syntax, the page
character encoding is determined from a BOM or the <code>pageEncoding</code>
attribute of the <code>tag</code> directive of the tag file (in this precedence
order), or is <code>ISO-8859-1</code> if neither is specified.</p>
</div>
<div class="paragraph">
<p>A BOM consists of the Unicode character code
<code>U+FEFF</code> at the beginning of a data stream, where it is used to define the
byte order and encoding form of unmarked plaintext files.</p>
</div>
<div class="paragraph">
<p>The exact byte representation of the BOM
depends on the particular encoding of the text file, as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.4-1</strong> Byte representations of the BOM</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bytes</th>
<th class="tableblock halign-left valign-top">Encoding Form</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FE FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-16, big-endian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FF FE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-16, little-endian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00 00 FE FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-32, big-endian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FF FE 00 00</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-32, little-endian</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EF BB BF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-8</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The above byte sequences have been reserved
to identify a BOM at the beginning of JSP pages in standard syntax, and
will not appear in the page&#8217;s output.</p>
</div>
<div class="paragraph">
<p>The <code>pageEncoding</code> and <code>contentType</code>
attributes determine the page character encoding of only the file that
physically contains them. Parsers are only required to take these
attributes into consideration for character encoding detection if the
directive appears at the beginning of the page or tag file and if the
character encoding is an extension of ASCII, that is, if byte values 0
to 127 have the same meaning as in ASCII, at least until the attributes
are found. For character encodings where this is not the case (including
<code>UTF-16</code> and <code>EBCDIC</code> -based encodings), the JSP configuration element
<code>page-encoding</code> or a BOM should be used.</p>
</div>
<div class="paragraph">
<p>When using a BOM, it is legal to describe the
character encoding in a JSP configuration element page-encoding or a
pageEncoding attribute of the page directive of the page, as long as
they are consistent.</p>
</div>
</div>
<div class="sect3">
<h4 id="xml-syntax"><a class="anchor" href="#xml-syntax"></a>4.1.2. XML Syntax</h4>
<div class="paragraph">
<p>For JSP documents and tag files in XML
syntax, the page character encoding is determined as described in
section 4.3.3 and appendix F.1 of the XML specification.</p>
</div>
<div class="paragraph">
<p>For JSP documents in XML syntax, it is legal
to also describe the character encoding in a JSP configuration element
<code>page-encoding</code> or a <code>pageEncoding</code> attribute of the page directive of
the document, as long as they are consistent. It is a translation-time
error to name different encodings in two or more of the following: the
XML prolog / text declaration of a JSP document, the <code>pageEncoding</code>
attribute of the page directive of the JSP document, and in a JSP
configuration element whose URL pattern matches the document.</p>
</div>
<div class="paragraph">
<p>Note that for tag files in XML syntax, it is
illegal for the tag directive to include a pageEncoding attribute: the
encoding is inferred solely by using the conventions for XML documents.</p>
</div>
<div class="paragraph">
<p>A JSP container must raise a translation-time
error if an unsupported page character encoding is requested.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-character-encoding"><a class="anchor" href="#response-character-encoding"></a>4.2. Response Character Encoding</h3>
<div class="paragraph">
<p>The response character encoding is the
character encoding of the response generated from a JSP page, if that
response is in the form of text. It is primarily managed as the
<code>jakarta.servlet.ServletResponse</code> object’s <code>characterEncoding</code> property.</p>
</div>
<div class="paragraph">
<p>The JSP container determines an
initial response character encoding along with the initial content type
for a JSP page and calls <code>ServletResponse.setContentType()</code> with this
information before processing the page. JSP pages can set initial
content type and initial response character encoding using the
<code>contentType</code> attribute of the page directive. The JSP configuration
element default-content-type can also be used to set the default initial
content type and default initial response chrarcter encoding of a group
of JSP pages using the jsp-property-group element. See
<a href="#declaring-default-content-type">Section 3.3.10, &#8220;Declaring Default Content Type&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The initial response content type is set to
the <code>TYPE</code> value of the <code>contentType</code> attribute of the page directive.
If the page doesn’t provide this attribute, the initial content type is
“<code>text/html</code>” for JSP pages in standard syntax and “<code>text/xml</code>” for
JSP documents in XML syntax.</p>
</div>
<div class="paragraph">
<p>The initial response character encoding is
set to the <code>CHARSET</code> value of the <code>contentType</code> attribute of the page
directive. If the page doesn’t provide this attribute or the attribute
doesn’t have a <code>CHARSET</code> value, the initial response character encoding
is determined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For documents in XML syntax, it is <code>UTF-8</code>
.</p>
</li>
<li>
<p>For JSP pages in standard syntax, it is the
character encoding specified by the BOM, by the <code>pageEncoding</code> attribute
of the page directive, or by a JSP configuration element <code>page-encoding</code>
whose URL pattern matches the page. Only the character encoding
specified for the requested page is used; the encodings of files
included via the include directive are not taken into consideration. If
there’s no such specification, no initial response character encoding is
passed to <code>ServletResponse.setContentType()</code> - the <code>ServletResponse</code>
object’s default, <code>ISO-8859-1</code>, is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the initial response character encoding
has been set, the JSP page’s content can dynamically modify it by
calling the <code>ServletResponse</code> object’s <code>setCharacterEncoding</code> and
<code>setLocale</code> methods directly or indirectly. A number of JSTL
internationalization and formatting actions call
<code>ServletResponse.setLocale()</code>, which may affect the response character
encoding. See the Servlet and JSTL specifications for more information.</p>
</div>
<div class="paragraph">
<p>Note that the response character encoding can
only be changed until the response is committed. Data is sent to the
response stream on buffer flushes for buffered pages, or on encountering
the first content (beware of whitespace) on unbuffered pages. Whitespace
is notoriously tricky for JSP Pages in JSP syntax, but much more
manageable for JSP documents in XML syntax.</p>
</div>
</div>
<div class="sect2">
<h3 id="request-character-encoding"><a class="anchor" href="#request-character-encoding"></a>4.3. Request Character Encoding</h3>
<div class="paragraph">
<p>The request character encoding is the
character encoding in which parameters in an incoming request are
interpreted. It is primarily managed as the <code>ServletRequest</code> object’s
<code>characterEncoding</code> property.</p>
</div>
<div class="paragraph">
<p>The JSP specification doesn’t provide
functionality to handle the request character encoding directly. To
control the request character encoding from JSP pages without embedded
Java code, the JSTL <code>&lt;fmt:requestEncoding&gt;</code> can be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="xml-view-character-encoding"><a class="anchor" href="#xml-view-character-encoding"></a>4.4. XML View Character Encoding</h3>
<div class="paragraph">
<p>The XML view character encoding is the
character encoding used for externalizing the XML view of a JSP page or
tag file.</p>
</div>
<div class="paragraph">
<p>The XML view character encoding is always
<code>UTF-8</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="delivering-localized-content"><a class="anchor" href="#delivering-localized-content"></a>4.5. Delivering Localized Content</h3>
<div class="paragraph">
<p>The JSP specification does not mandate any
specific approach for structuring localized content, and different
approaches are possible. Two common approaches are to use a template
taglib and pull localized strings from a resource repository, or to
use-per-locale JSP pages. Each approach has benefits and drawbacks. The
JSTL internationalization and formatting actions provide support for
retrieving localized content from resource bundles and thus support the
first approach. Some users have been using transformations on JSP
documents to do simple replacement of elements by localized strings,
thus maintaining JSP syntax with no performance cost at run-time.
Combinations of these approaches also make sense.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="standard-actions"><a class="anchor" href="#standard-actions"></a>5. Standard Actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the standard
actions of Jakarta Server Pages 4.1 (JSP 4.1). Standard actions are
represented using XML elements with a prefix of <code>jsp</code> (though that
prefix can be redefined in the XML syntax). A translation error will
result if the JSP prefix is used for an element that is not a standard
action.</p>
</div>
<div class="sect2">
<h3 id="jsp:useBean"><a class="anchor" href="#jsp:useBean"></a>5.1. &lt;jsp:useBean&gt;</h3>
<div class="paragraph">
<p>A <code>jsp:useBean</code> action associates an
instance of a Java programming language object defined within a given
scope and available with a given <code>id</code> with a newly declared scripting
variable of the same <code>id</code>.</p>
</div>
<div class="paragraph">
<p>When a <code>&lt;jsp:useBean&gt;</code> action is used in an
scriptless page, or in an scriptless context (as in the body of an
action so indicated), there are no Java scripting variables created but
instead an EL variable is created.</p>
</div>
<div class="paragraph">
<p>The <code>jsp:useBean</code> action is quite flexible;
its exact semantics depends on the attributes given. The basic semantic
tries to find an existing object using <code>id</code> and <code>scope</code>. If the object
is not found it will attempt to create the object using the other
attributes.</p>
</div>
<div class="paragraph">
<p>It is also possible to use this action to
give a local name to an object defined elsewhere, as in another JSP page
or in a servlet. This can be done by using the <code>type</code> attribute and not
providing <code>class</code> or <code>beanName</code> attributes.</p>
</div>
<div class="paragraph">
<p>At least one of <code>type</code> and <code>class</code> must be
present, and it is not valid to provide both <code>class</code> and <code>beanName</code>. If
<code>type</code> and <code>class</code> are present, <code>class</code> must be assignable to <code>type</code>
(in the Java platform sense). For it not to be assignable is a
translation-time error.</p>
</div>
<div class="paragraph">
<p>The attribute <code>beanName</code> specifies the name
of a Bean, as specified in the JavaBeans specification. It is used as an
argument to the <code>instantiate</code> method in the <code>java.beans.Beans</code> class.
It must be of the form <code>a.b.c</code>, which may be either a class, or the
name of a resource of the form <code>a/b/c.ser</code> that will be resolved in the
current <code>ClassLoader</code>. If this is not true, a request-time exception,
as indicated in the semantics of the <code>instantiate</code> method will be
raised. The value of this attribute can be a request-time attribute
expression.</p>
</div>
<div class="paragraph">
<p><em>The id Attribute</em></p>
</div>
<div class="paragraph">
<p>The <code>id="name"</code> attribute/value tuple in a
<code>jsp:useBean</code> action has special meaning to a JSP container, at page
translation time and at client request processing time. In particular:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>name</code> must be unique within the
translation unit, and identifies the particular element in which it
appears to the JSP container and page.</p>
<div class="paragraph">
<p>Duplicate <code>id</code> ’s found in the same
translation unit shall result in a fatal translation error.</p>
</div>
</li>
<li>
<p>The JSP container will associate an object
(a JavaBean component) with the named value and accessed via that name
in various contexts through the <code>pagecontext</code> object described later in
this specification.</p>
<div class="paragraph">
<p>The <code>name</code> is also used to expose a variable
(<code>name</code>) in the page’s scripting language environment. The scope of
the scripting language variable is dependent upon the scoping rules and
capabilities of the scripting language used in the page.</p>
</div>
<div class="paragraph">
<p>Note that this implies the <code>name</code> value
syntax must comply with the variable naming syntax rules of the
scripting language used in the page. <a href="#scripting">Chapter 9, <em>Scripting</em></a> provides details for the case where the language attribute
is <code>java</code>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>An example of the scope rules just mentioned
is shown next:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;% { // introduce a new block %&gt;
  ...
&lt;jsp:useBean id=&quot;customer&quot; class=&quot;com.myco.Customer&quot; /&gt;

&lt;%
/*
* the tag above creates or obtains the Customer Bean
* reference, associates it with the name “customer” in the
* PageContext, and declares a Java programming language
* variable of the same name initialized to the object reference
* in this block’s scope.
*/
%&gt;
...
&lt;%= customer.getName(); %&gt;
...
&lt;% } // close the block %&gt;

&lt;%
// the variable customer is out of scope now but
// the object is still valid (and accessible via pageContext)
%&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>The scope Attribute</em></p>
</div>
<div class="paragraph">
<p>The
<code>scope="page|request|session|application"</code> attribute/value tuple is
associated with, and modifies the behavior of, the <code>id</code> attribute
described above (it has both translation time and client request
processing time semantics). In particular it describes the namespace,
the implicit lifecycle of the object reference associated with the
<code>name</code>, and the APIs used to access this association. For all scopes,
it is illegal to change the instance object so associated, such that its
new runtime type is a subset of the type(s) of the object previously so
associated. See <a href="#objects-and-scopes">Section 1.8.2, &#8220;Objects and Scopes&#8221;</a> for
details on the available scopes.</p>
</div>
<div class="paragraph">
<p><em>Semantics</em></p>
</div>
<div class="paragraph">
<p>The actions performed in a <code>jsp:useBean</code>
action are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>An attempt to locate an object based on the
attribute values <code>id</code> <code>and</code> <code>scope</code>. For application and session scope,
the inspection is done synchronized per scope namespace to avoid
non-deterministic behavior.</p>
</li>
<li>
<p>A scripting language variable of the
specified type (if given) or <code>class</code> (if <code>type</code> is not given) is defined
with the given <code>id</code> in the current lexical scope of the scripting
language. The <code>type</code> attribute should be used to specify a Java type
that cannot be instantiated as a JavaBean (i.e. a Java type that is an
abstract class, interface, or a class with no public no-args
constructor). If the <code>class</code> attribute is used for a Java type that
cannot be instantiated as a JavaBean, the container may consider the
page invalid, and is recommended to (but not required to) produce a
fatal translation error at translation time, or a
<code>java.lang.InstantiationException</code> at request time. Similarly, if
either <code>type</code> or <code>class</code> specify a type that can not be found, the
container may consider the page invalid, and is recommended to (but not
required to) produce a fatal translation error at translation time, or a
<code>java.lang.ClassNotFoundException</code> at request time.</p>
</li>
<li>
<p>If the object is found, the variable’s
value is initialized with a reference to the located object, cast to the
specified <code>type</code>. If the cast fails, a <code>java.lang.ClassCastException</code>
shall occur. This completes the processing of this <code>jsp:useBean</code> action.</p>
</li>
<li>
<p>If the <code>jsp:useBean</code> action had a non-empty
body it is ignored. This completes the processing of this <code>jsp:useBean</code>
action.</p>
</li>
<li>
<p>If the object is not found in the specified
scope and neither class nor beanName are given, a
<code>java.lang.InstantiationException</code> shall occur. This completes the
processing of this <code>jsp:useBean</code> action.</p>
</li>
<li>
<p>If the object is not found in the specified
<code>scope</code>, and the <code>class</code> specified names a non-abstract class that
defines a public no-args constructor, then the class is instantiated.
The new object reference is associated with the scripting variable and
with the specified name in the specified scope using the appropriate
scope dependent association mechanism (see <code>PageContext</code>). After this,
step 8 is performed.<br>
If the object is not found, and the <code>class</code>
is either abstract, an <code>interface</code>, or no public no-args constructor is
defined therein, then a <code>java.lang.InstantiationException</code> shall occur.
This completes the processing of this <code>jsp:useBean</code> action.</p>
</li>
<li>
<p>If the object is not found in the specified
<code>scope</code> ; and <code>beanName</code> is given, then the method <code>instantiate</code> of
<code>java.beans.Beans</code> will be invoked with the <code>ClassLoader</code> of the servlet
object and the <code>beanName</code> as arguments. If the method succeeds, the new
object reference is associated the with the scripting variable and with
the specified name in the specified scope using the appropriate scope
dependent association mechanism (see <code>PageContext</code>). After this, step 8
is performed.</p>
</li>
<li>
<p>If the <code>jsp:useBean</code> action has a non-empty
body, the body is processed. The variable is initialized and available
within the scope of the body. The text of the body is treated as
elsewhere. Any template text will be passed through to the out stream.
Scriptlets and action tags will be evaluated.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A common use of a non-empty body is to
complete initializing the created instance. In that case the body will
likely contain <code>jsp:setProperty</code> actions and scriptlets that are
evaluated. This completes the processing of this <code>useBean</code> action.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>In the following example, a Bean with name
<code>connection</code> of type <code>com.myco.myapp.Connection</code> is available after
actions on this element, either because it was already created and
found, or because it is newly created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:useBean id=&quot;connection&quot; class=&quot;com.myco.myapp.Connection&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the next example, the <code>timeout</code> property
is set to 33 if the Bean was instantiated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:useBean id=&quot;connection&quot; class=&quot;com.myco.myapp.Connection&quot;&gt; +
   &lt;jsp:setProperty name=&quot;connection&quot; property=&quot;timeout&quot; value=&quot;33&quot;&gt; +
 &lt;/jsp:useBean&gt;`</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the final example, the object should have
been present in the session. If so, it is given the local name <code>wombat</code>
with <code>WombatType</code>. A <code>ClassCastException</code> may be raised if the
object is of the wrong class, and an <code>InstantiationException</code> may be
raised if the object is not defined.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:useBean id=&quot;wombat&quot; type=&quot;my.WombatType&quot; scope=&quot;session&quot;/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="paragraph">
<p>This action may or not have a body. If the
action has no body, it is of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:useBean id=&quot;name&quot; scope=&quot;page|request|session|application&quot; typeSpec /&gt;</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>typeSpec ::=   class="className"
             | class="className" type="typeName"
             | type="typeName" class="className"
             | beanName="beanName" type="typeName"
             | type="typeName" beanName="beanName"
             | type="typeName"</pre>
</div>
</div>
<div class="paragraph">
<p>If the action has a body, it is of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:useBean id=&quot;name&quot; scope=&quot;page|request|session|application&quot; typeSpec &gt;
   body
 &lt;/jsp:useBean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the body will be invoked if the
Bean denoted by the action is created. Typically, the body will contain
either scriptlets or <code>jsp:setProperty</code> tags that will be used to modify
the newly created object, but the contents of the body are not
restricted.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:useBean&gt;</code> tag has the following
attributes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-1</strong> jsp:useBean Attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name used to identify the object instance
in the specified scope’s namespace, and also the scripting variable name
declared and initialized with that object reference. The name specified
is case sensitive and shall conform to the current scripting language
variable-naming conventions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The scope within which the reference is
available. The default value is <code>page</code>. See the description of the
<code>scope</code> attribute defined earlier herein. A translation error must occur
if scope is not one of “<code>page</code>”, “<code>request</code>”, “<code>session</code>” or
“<code>application</code>”.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified name of the class that
defines the implementation of the object. The class name is case
sensitive.<br>
If the <code>class</code> and <code>beanName</code> attributes are
not specified the object must be present in the given scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>beanName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a bean, as expected by the
<code>instantiate</code> method of the <code>java.beans.Beans</code> class.<br>
This attribute can accept a request-time
attribute expression as a value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If specified, it defines the type of the
scripting variable defined.<br>
This allows the type of the scripting
variable to be distinct from, but related to, the type of the
implementation class specified.<br>
The type is required to be either the class
itself, a superclass of the class, or an interface implemented by the
class specified.<br>
The object referenced is required to be of
this type, otherwise a <code>java.lang.ClassCastException</code> shall occur at
request time when the assignment of the object referenced to the
scripting variable is attempted.<br>
If unspecified, the value is the same as the
value of the <code>class</code> attribute.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:setProperty"><a class="anchor" href="#jsp:setProperty"></a>5.2. &lt;jsp:setProperty&gt;</h3>
<div class="paragraph">
<p>The <code>jsp:setProperty</code> action sets the values
of properties in a bean. The <code>name</code> attribute that denotes the bean must
be defined before this action appears.</p>
</div>
<div class="paragraph">
<p>There are two variants of the
<code>jsp:setProperty</code> action. Both variants set the values of one or more
properties in the bean based on the type of the properties. The usual
bean introspection is done to discover what properties are present, and,
for each, its name, whether it is simple or indexed, its type, and the
<code>setter</code> and <code>getter</code> methods. Introspection also indicates if a given
property type has a <code>PropertyEditor</code> class.</p>
</div>
<div class="paragraph">
<p>Properties in a Bean can be set from one or
more parameters in the request object, from a <code>String</code> constant, or from
a computed request-time expression. Simple and indexed properties can be
set using <code>jsp:setProperty</code>.</p>
</div>
<div class="paragraph">
<p>When assigning from a parameter in the
request object, the conversions described in
<a href="#conversions-from-string-values">Section 1.14.2.1, &#8220;Conversions from String values&#8221;</a> are
applied, using the target property to determine the target type.</p>
</div>
<div class="paragraph">
<p>When assigning from a value given as a String
constant, the conversions described in <a href="#conversions-from-string-values">Section 1.14.2.1, &#8220;Conversions from String values&#8221;</a>
are applied, using the target property
to determine the target type.</p>
</div>
<div class="paragraph">
<p>When assigning from a value given as a
request-time attribute, no type conversions are applied if a scripting
expression is used, as indicated in
<a href="#conversions-from-request-time-expressions">Section 1.14.2.2, &#8220;Conversions from request-time expressions&#8221;</a>. If an EL expression is
used, the type conversions described in Section 1.23 “Type Conversion”
of the EL specification document are performed.</p>
</div>
<div class="paragraph">
<p>When assigning values to indexed properties
the value must be an array; the rules described in the previous
paragraph apply to the actions.</p>
</div>
<div class="paragraph">
<p>A conversion failure leads to an error,
whether at translation time or request-time.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following two actions set a value from
the request parameter values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:setProperty name=&quot;request&quot; property=&quot;*&quot; /&gt;
 &lt;jsp:setProperty name=&quot;user&quot; property=&quot;user&quot; param=&quot;username&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following two elements set a property
from a value</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:setProperty name=&quot;results&quot; property=&quot;col&quot; value=&quot;${i mod 4}&quot;/&gt;
 &lt;jsp:setProperty name=&quot;results&quot; property=&quot;row&quot; value=&quot;&lt;%= i/4 %&gt;&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:setProperty name=&quot;beanName&quot; prop_expr /&gt;</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>prop_expr ::=   property="*"
              | property="propertyName"
              | property="propertyName" param="parameterName"
              | property="propertyName" value="propertyValue"

propertyValue ::= string</pre>
</div>
</div>
<div class="paragraph">
<p>The value <code>propertyValue</code> can also be a
request-time attribute value, as described in
<a href="#request-time-attribute-values">Section 1.14.1, &#8220;Request Time Attribute Values&#8221;</a>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>propertyValue ::= expr_scriptlet</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:setProperty&gt;</code> action has the
following attributes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-2</strong> jsp:setProperty Attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a bean instance defined by a
<code>&lt;jsp:useBean&gt;</code> action or some other action. The bean instance must
contain the property to be set. The <code>defining action</code> must appear before
the <code>&lt;jsp:setProperty&gt;</code> action in the same file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the property whose value will be
set. If <code>propertyName</code> is set to <code>*</code> then the tag will iterate
over the current <code>ServletRequest</code> parameters, matching parameter
names and value type(s) to property names and setter method type(s),
setting each matched property to the value of the matching parameter. If
a parameter has a value of <code>""</code>, the corresponding property is not
modified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>param</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the request parameter whose value
is given to a bean property. The name of the request parameter usually
comes from a web form.<br>
If <code>param</code> is omitted, the request parameter
name is assumed to be the same as the bean property name.<br>
If the <code>param</code> is not set in the Request
object, or if it has the value of <code>""</code>, the <code>jsp:setProperty</code> action
has no effect (a noop).<br>
An action may not have both <code>param</code> and
<code>value</code> attributes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value to assign to the given property.<br>
This attribute can accept a request-time
attribute expression as a value.<br>
An action may not have both <code>param</code> and
<code>value</code> attributes.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jspgetproperty"><a class="anchor" href="#jspgetproperty"></a>5.3. &lt;jsp:getProperty&gt;</h3>
<div class="paragraph">
<p>The <code>&lt;jsp:getProperty&gt;</code> action places
the value of a bean instance property, converted to a <code>String</code>, into
the implicit <code>out</code> object, from which the value can be displayed as
output. The bean instance must be defined as indicated in the <code>name</code>
attribute before this point in the page (usually via a <code>jsp:useBean</code>
action).</p>
</div>
<div class="paragraph">
<p>The conversion to String is done as in the
<code>println</code> methods, i.e. the <code>toString</code> method of the object is used for
Object instances, and the primitive types are converted directly.</p>
</div>
<div class="paragraph">
<p>If the object is not found, a request-time
exception is raised.</p>
</div>
<div class="paragraph">
<p>The value of the name attribute in
<code>jsp:setProperty</code> and <code>jsp:getProperty</code> will refer to an object that is
obtained from the <code>pageContext</code> object through its <code>findAttribute</code>
method.</p>
</div>
<div class="paragraph">
<p>The object named by the name must have been
“introduced” to the JSP processor using either the <code>jsp:useBean</code> action
or a custom action with an associated <code>VariableInfo</code> entry for this
name. If the object was not introduced in this manner, the container
implementation is recommended (but not required) to raise a translation
error, since the page implementation is in violation of the
specification.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A consequence of the previous paragraph is that objects that are stored
in, say, the session by a front component are not automatically visible to
jsp:setProperty and jsp:getProperty actions in that page unless a
jsp:useBean action, or some other action, makes them visible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the JSP processor can ascertain that there
is an alternate way guaranteed to access the same object, it can use
that information. For example it may use a scripting variable, but it
must guarantee that no intervening code has invalidated the copy held by
the scripting variable. The truth is always the value held by the
<code>pageContext</code> object.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:getProperty name=&quot;user&quot; property=&quot;name&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:getProperty name=&quot;name&quot; property=&quot;propertyName&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attributes are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-3</strong> jsp:getProperty Attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the object instance from which
the property is obtained.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Names the property to get.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:include"><a class="anchor" href="#jsp:include"></a>5.4. &lt;jsp:include&gt;</h3>
<div class="paragraph">
<p>A <code>&lt;jsp:include .../&gt;</code> action provides for
the inclusion of static and dynamic resources in the same context as the
current page. See <a href="#_Summary_of_Include_Mechanisms_in_JSP_4.1"><strong>Table JSP.1-10</strong> , &#8220;Summary of Include Mechanisms in JSP 4.1&#8221;</a> for a summary of include facilities.</p>
</div>
<div class="paragraph">
<p>Inclusion is into the current value of <code>out</code>. The resource is specified
using a <code>relativeURLspec</code> that is
interpreted in the context of the web application (i.e. it is mapped).</p>
</div>
<div class="paragraph">
<p>The <code>page</code> attribute of both the
<code>jsp:include</code> and the <code>jsp:forward</code> actions are interpreted relative to
the current JSP page, while the <code>file</code> attribute in an include directive
is interpreted relative to the current JSP file. See below for some
examples of combinations of this.</p>
</div>
<div class="paragraph">
<p>An included page cannot change the response
status code or set headers. This precludes invoking methods like
<code>setCookie</code>. Attempts to invoke these methods will be ignored. The
constraint is equivalent to the one imposed on the <code>include</code> method of
the <code>RequestDispatcher</code> class.</p>
</div>
<div class="paragraph">
<p>A <code>jsp:include</code> action may have <code>jsp:param</code>
subelements that can provide values for some parameters in the request
to be used for the inclusion.</p>
</div>
<div class="paragraph">
<p>Request processing resumes in the calling JSP
page, once the inclusion is completed.</p>
</div>
<div class="paragraph">
<p>The <code>flush</code> attribute controls flushing. If
true, then, if the page output is buffered and the flush attribute is
given a true value, then the buffer is flushed prior to the inclusion,
otherwise the buffer is not flushed. The default value for the flush
attribute is <code>false</code>.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:include page=&quot;/templates/copyright.html&quot;/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above example is a simple inclusion of an
object. The path is interpreted in the context of the Web Application.
It is likely a static object, but it could be mapped into, for instance,
a servlet via <code>web.xml</code>.</p>
</div>
<div class="paragraph">
<p>For an example of a more complex set of
inclusions, consider the following four situations built using four JSP
files: <code>A.jsp</code>, <code>C.jsp</code>, <code>dir/B.jsp</code> and <code>dir/C.jsp</code> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>A.jsp</code> says <code>&lt;%@ include file="dir/B.jsp"%&gt;</code> and <code>dir/B.jsp</code>
says <code>&lt;%@ include file="C.jsp"%&gt;</code>. In this case the relative
specification <code>C.jsp</code> resolves to <code>dir/C.jsp</code>.</p>
</li>
<li>
<p><code>A.jsp</code> says <code>&lt;jsp:include
page="dir/B.jsp"/&gt;</code> and <code>dir/B.jsp</code> says <code>&lt;jsp:include page="C.jsp" /&gt;</code>.
In this case the relative specification <code>C.jsp</code> resolves to
<code>dir/C.jsp</code>.</p>
</li>
<li>
<p><code>A.jsp</code> says <code>&lt;jsp:include
page="dir/B.jsp"/&gt;</code> and <code>dir/B.jsp</code> says <code>&lt;%@ include file="C.jsp" %&gt;</code>.
In this case the relative specification <code>C.jsp</code> resolves to <code>dir/C.jsp</code>.</p>
</li>
<li>
<p><code>A.jsp</code> says <code>&lt;%@ include
file="dir/B.jsp"%&gt;</code> and <code>dir/B.jsp</code> says <code>&lt;jsp:include page="C.jsp"/&gt;</code>.
In this case the relative specification <code>C.jsp</code> resolves to <code>C.jsp</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:include page=&quot;urlSpec&quot; flush=&quot;true|false&quot;/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:include page=&quot;urlSpec&quot; flush=&quot;true|false&quot;&gt;
   { &lt;jsp:param ... /&gt; }*
 &lt;/jsp:include&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first syntax just does a request-time
inclusion. In the second case, the values in the <code>param</code> subelements are
used to augment the request for the purposes of the inclusion.</p>
</div>
<div class="paragraph">
<p>The valid attributes are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-4</strong> jsp:include Atrributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL is a relative <code>urlSpec</code> as in
<a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>. Relative
paths are interpreted relative to the current JSP page.<br>
Accepts a request-time attribute value (which
must evaluate to a String that is a relative URL specification).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flush</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional boolean attribute. If the value is
<code>true</code>, the buffer is flushed now. The default value is <code>false</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:forward"><a class="anchor" href="#jsp:forward"></a>5.5. &lt;jsp:forward&gt;</h3>
<div class="paragraph">
<p>A <code>&lt;jsp:forward page="urlSpec" /&gt;</code> action
allows the runtime dispatch of the current request to a static resource,
a JSP page or a servlet in the same context as the current
page. A <code>jsp:forward</code> effectively terminates the execution of the
current page. The relative <code>urlSpec</code> is as in
<a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The request object will be adjusted according
to the value of the page attribute.</p>
</div>
<div class="paragraph">
<p>A <code>jsp:forward</code> action may have <code>jsp:param</code>
subelements that can provide values for some parameters in the request
to be used for the forwarding.</p>
</div>
<div class="paragraph">
<p>If the page output is buffered, the buffer is
cleared prior to forwarding.</p>
</div>
<div class="paragraph">
<p>If the page output is buffered and the buffer
was flushed, an attempt to forward the request will result in an
<code>IllegalStateException.</code></p>
</div>
<div class="paragraph">
<p>If the page output was unbuffered and
anything has been written to it, an attempt to forward the request will
result in an <code>IllegalStateException</code>.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following action might be used to forward
to a static page based on some dynamic condition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;% String whereTo = &quot;/templates/&quot;+someValue; %&gt;
 &lt;jsp:forward page='&lt;%= whereTo %&gt;' /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:forward page=&quot;relativeURLspec&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:forward page=&quot;urlSpec&quot;&gt;
   { &lt;jsp:param ... /&gt; }*
 &lt;/jsp:forward&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This tag allows the page author to cause the
current request processing to be affected by the specified attributes as
follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-5</strong> jsp:forward Attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL is a relative <code>urlSpec</code> as in
<a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>.
Relative paths are interpreted relative to the current JSP page.<br>
Accepts a request-time attribute value
(which must evaluate to a String that is a relative URL specification).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:param"><a class="anchor" href="#jsp:param"></a>5.6. &lt;jsp:param&gt;</h3>
<div class="paragraph">
<p>The <code>jsp:param</code> element is used to provide
key/value information. This element is used in the <code>jsp:include</code>,
<code>jsp:forward</code>, and <code>jsp:params</code> elements. A translation error shall
occur if the element is used elsewhere.</p>
</div>
<div class="paragraph">
<p>When doing <code>jsp:include</code> or <code>jsp:forward</code>,
the included page or forwarded page will see the original request
object, with the original parameters augmented with the new parameters,
in the order of appearance, with new values taking precedence over
existing values when applicable. The scope of the new parameters is the
<code>jsp:include</code> or <code>jsp:forward</code> call; i.e. in the case of an
<code>jsp:include</code> the new parameters (and values) will not apply after the
include. This is the same behavior as in the <code>ServletRequest</code> <code>include</code>
and <code>forward</code> methods (see Section 9.1.1 in the Servlet 6.2
specification).</p>
</div>
<div class="paragraph">
<p>For example, if the request has a parameter
<code>A=foo</code> and a parameter <code>A=bar</code> is specified for forward, the forwarded
request shall have <code>A=bar,foo</code>. Note that the new <code>param</code> has
precedence.</p>
</div>
<div class="paragraph">
<p>The parameter names and values specified
should be left unencoded by the page author. The JSP container must
encode the parameter names and values using the character encoding from
the request object when necessary. For example, if the container chooses
to append the parameters to the URL in the dispatched request, both the
names and values must be encoded as per the content type
<code>application/x-www-form-urlencoded</code> in the HTML specification.</p>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:param name=&quot;name&quot; value=&quot;value&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This action has two mandatory attributes:
<code>name</code> and <code>value</code>. <code>name</code> indicates the name of the parameter, and
<code>value</code>, which may be a request-time expression, indicates its value.</p>
</div>
</div>
<div class="sect2">
<h3 id="jsp:attribute"><a class="anchor" href="#jsp:attribute"></a>5.7. &lt;jsp:attribute&gt;</h3>
<div class="paragraph">
<p>The <code>&lt;jsp:attribute&gt;</code> standard action has two
uses. It allows the page author to define the value of an action
attribute in the body of an XML element instead of in the value of an
XML attribute. It also allows the page author to specify the attributes
of the element being output, when used inside a <code>&lt;jsp:element&gt;</code> action.
The action must only appear as a subelement of a standard or custom
action. An attempt to use it otherwise must result in a translation
error. For example, it cannot be used to specify the value of an
attribute for XML elements that are template text. For custom action
invocations, JSP containers must support the use of <code>&lt;jsp:attribute&gt;</code>
for both Classic and Simple Tag Handlers.</p>
</div>
<div class="paragraph">
<p>The behavior of the <code>&lt;jsp:attribute&gt;</code>
standard action varies depending on the type of attribute being
specified, as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A translation error must occur if
<code>&lt;jsp:attribute&gt;</code> is used to define the value of an attribute of
<code>&lt;jsp:attribute&gt;</code>.</p>
</li>
<li>
<p>If the enclosing action is <code>&lt;jsp:element&gt;</code>
, the value of the name attribute and the body of the action will be
used as attribute name/value pairs in the dynamically constructed
element. See <a href="#jsp:element">Section 5.11, &#8220;&lt;jsp:element&gt;&#8221;</a> for more
details on <code>&lt;jsp:element&gt;</code>. Note that in this context, the attribute
does not apply to the <code>&lt;jsp:element&gt;</code> action itself, but rather to the
output of the element. That is, <code>&lt;jsp:attribute&gt;</code> cannot be used to
specify the <code>name</code> attribute of the <code>&lt;jsp:element&gt;</code> action.</p>
</li>
<li>
<p>For custom action attributes of type
<code>jakarta.servlet.jsp.tagext.JspFragment</code>, the container must create a
<code>JspFragment</code> out of the body of the <code>&lt;jsp:attribute&gt;</code> action and pass
it to the tag handler. This applies for both Classic Tag Handlers and
Simple Tag Handlers. A translation error must result if the body of the
<code>&lt;jsp:attribute&gt;</code> action is not scriptless in this case.</p>
</li>
<li>
<p>If the custom action accepts dynamic
attributes (<a href="#attributes-with-dynamic-names">Section 7.1.8, &#8220;Attributes With Dynamic Names&#8221;</a>), and the name of the attribute is not one explicitly indicated
for the tag, then the container will evaluate the body of
<code>&lt;jsp:attribute&gt;</code> and assign the computed value to the attribute using
the dynamic attribute machinery. Since the type of the attribute is
unknown and the body of <code>&lt;jsp:attribute&gt;</code> evaluates to a <code>String</code>, the
container must pass in an instance of <code>String</code>.</p>
</li>
<li>
<p>For standard or custom action attributes
that accept a request-time expression value, the Container must evaluate
the body of the <code>&lt;jsp:attribute&gt;</code> action and use the result of this
evaluation as the value of the attribute. The body of the attribute
action can be any JSP content in this case. If the type of the attribute
is not <code>String</code>, the standard type conversion rules are applied, as per
<a href="#conversions-from-string-values">Section 1.14.2.1, &#8220;Conversions from String values&#8221;</a>.</p>
</li>
<li>
<p>For standard or custom action attributes
that do not accept a request-time expression value, the Container must
use the body of the <code>&lt;jsp:attribute&gt;</code> action as the value of the
attribute. A translation error must result if the body of the
<code>&lt;jsp:attribute&gt;</code> action contains anything but template text.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the body of the <code>&lt;jsp:attribute&gt;</code> action
is empty, it is the equivalent of specifying <code>""</code> as the value of the
attribute. Note that after being trimmed, non-empty bodies can result in
a value of <code>""</code> as well.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:attribute&gt;</code> action accepts a <code>name</code>
attribute, a <code>trim</code> attribute, and a omit attribute. The <code>name</code>
attribute associates the action with one of the attributes the tag
handler is declared to accept, or in the case of <code>&lt;jsp:element&gt;</code> it
associates the action with one of the attributes in the element being
output. The optional <code>trim</code> attribute determines whether the whitespace
appearning at the beginning and at the end of the element body should be
discarded or not. By default, the leading and trailing whitespace is
discarded. The Container must trim at translation time only. The
Container must not trim at runtime. For example, if a body contains a
custom action that produces leading or trailing whitespace, that
whitespace is preserved regardless of the value of the <code>trim</code> attribute.
The optional omit attribute, when used with &lt;jsp:element&gt;, determines
whether the attribute in the element being output should be omitted.</p>
</div>
<div class="paragraph">
<p>The following is an example of using the
<code>&lt;jsp:attribute&gt;</code> standard action to define an attribute that is
evaluated by the container prior to the custom action invocation. This
example assumes the name attribute is declared with type
<code>java.lang.String</code> in the TLD.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;mytag:highlight&gt;
   &lt;jsp:attribute name=&quot;text&quot;&gt;
       Inline definition.
   &lt;/jsp:attribute&gt;
 &lt;/mytag:highlight&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of using the
<code>&lt;jsp:attribute&gt;</code> standard action within <code>&lt;jsp:element&gt;</code>, to define
which attributes are to be output with that element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element name=&quot;firstname&quot;&gt;
     &lt;jsp:attribute name=&quot;name&quot;&gt;Susan&lt;/jsp:attribute&gt;
 &lt;/jsp:element&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would produce the following output:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;firstname name="Susan"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#jsp-syntax-grammar">Section 1.3.10, &#8220;JSP Syntax Grammar&#8221;</a> for the formal syntax definition of the
<code>&lt;jsp:attribute&gt;</code> standard action.</p>
</div>
<div class="paragraph">
<p>The attributes are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-6</strong> Attributes for the <code>&lt;jsp:attribute&gt;</code> standard action</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(required) If not being used with
<code>&lt;jsp:element&gt;</code>, then if the action does not accept dynamic attributes,
the name must match the name of an attribute for the action being
invoked, as declared in the Tag Library Descriptor for a custom action,
or as specified for a standard action, or a translation error will
result. Except for when used with <code>&lt;jsp:element&gt;</code>, a translation error
will result if both an XML element attribute and a <code>&lt;jsp:attribute&gt;</code>
element are used to specify the value for the same attribute.<br>
The value of name can be a QName. If so, a
translation error must occur if the prefix does not match that of the
action it applies to, unless the action supports dynamic attributes, or
unless the action is <code>&lt;jsp:element&gt;</code>.<br>
When used with <code>&lt;jsp:element&gt;</code>, this
attribute specifies the name of the attribute to be included in the
generated element.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trim</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Valid values are <code>true</code> and
<code>false</code>. If <code>true</code>, the whitespace, including spaces, carriage
returns, line feeds, and tabs, that appears at the beginning and at the
end of the body of the <code>&lt;jsp:attribute&gt;</code> action will be ignored by the
JSP compiler. If <code>false</code> the whitespace is not ignored. Defaults to
<code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>omit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Valid values are <code>true</code> and
<code>false</code>. If <code>true</code>, and when used with &lt;jsp:element&gt;, the attribute in
the element being ouput is omitted. Ignored when used with a standard or
custom action. Defaults to <code>false</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:body"><a class="anchor" href="#jsp:body"></a>5.8. &lt;jsp:body&gt;</h3>
<div class="paragraph">
<p>Normally, the body of a standard or custom
action invocation is defined implicitly as the body of the XML element
used to represent the invocation. The body of a standard or custom
action can also be defined explicitly using the <code>&lt;jsp:body&gt;</code> standard
action. This is required if one or more <code>&lt;jsp:attribute&gt;</code> elements
appear in the body of the tag.</p>
</div>
<div class="paragraph">
<p>If one or more <code>&lt;jsp:attribute&gt;</code> elements
appear in the body of a tag invocation but no <code>&lt;jsp:body&gt;</code> element
appears or an empty <code>&lt;jsp:body&gt;</code> element appears, it is the equivalent
of the tag having an empty body.</p>
</div>
<div class="paragraph">
<p>It is also legal to use the <code>&lt;jsp:body&gt;</code>
standard action to supply bodies to standard actions, for any standard
action that accepts a body (except for <code>&lt;jsp:body&gt;</code>, <code>&lt;jsp:attribute&gt;</code>,
<code>&lt;jsp:scriptlet&gt;</code>, <code>&lt;jsp:expression&gt;</code> and <code>&lt;jsp:declaration&gt;</code>).</p>
</div>
<div class="paragraph">
<p>The body standard action accepts no attributes.</p>
</div>
</div>
<div class="sect2">
<h3 id="jspinvoke"><a class="anchor" href="#jspinvoke"></a>5.9. &lt;jsp:invoke&gt;</h3>
<div class="paragraph">
<p>The <code>&lt;jsp:invoke&gt;</code> standard action can only
be used in tag files (see <a href="#tag-files">Chapter 8, <em>Tag Files</em></a>),
and must result in a translation error if used in a JSP. It takes the
name of an attribute that is a fragment, and invokes the fragment,
sending the output of the result to the <code>JspWriter</code>, or to a scoped
attribute that can be examined and manipulated. If the fragment
identified by the given name is <code>null</code>, <code>&lt;jsp:invoke&gt;</code> will behave as
though a fragment was passed in that produces no output.</p>
</div>
<div class="sect3">
<h4 id="basic-usage"><a class="anchor" href="#basic-usage"></a>5.9.1. Basic Usage</h4>
<div class="paragraph">
<p>The most basic usage of this standard action
will invoke a fragment with the given name with no parameters. The
fragment will be invoked using the <code>JspFragment.invoke</code> method, passing
in null for the <code>Writer</code> parameter so that the results will be sent to
the <code>JspWriter</code> of the <code>JspContext</code> associated with the <code>JspFragment</code>.
The following is an example of such a basic fragment invocation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:invoke fragment=&quot;frag1&quot;/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="storing-fragment-output"><a class="anchor" href="#storing-fragment-output"></a>5.9.2. Storing Fragment Output</h4>
<div class="paragraph">
<p>It is also possible to invoke the fragment
and send the results to a scoped attribute for further examination and
manipulation. This can be accomplished by specifying the <code>var</code> or
<code>varReader</code> attribute in the action. In this usage, the fragment is
invoked using the <code>JspFragment.invoke</code> method, but a custom
<code>java.io.Writer</code> is passed in instead of <code>null</code>.</p>
</div>
<div class="paragraph">
<p>If <code>var</code> is specified, the container must
ensure that a <code>java.lang.String</code> object is made available in a scoped
attribute with the name specified by <code>var</code>. The <code>String</code> must contain
the content sent by the fragment to the <code>Writer</code> provided in the
<code>JspFragment.invoke</code> call.</p>
</div>
<div class="paragraph">
<p>If <code>varReader</code> is specified, the container
must ensure that a <code>java.io.Reader</code> object is constructed and is made
available in a scoped attribute with the name specified by <code>varReader</code>.
The <code>Reader</code> object can then be passed to a custom action for further
processing. The <code>Reader</code> object must produce the content sent by the
fragment to the provided <code>Writer</code>. The <code>Reader</code> must also be
resettable. That is, if its <code>reset</code> method is called, the result of the
invoked fragment must be able to be read again without re-executing the
fragment.</p>
</div>
<div class="paragraph">
<p>An optional <code>scope</code> attribute indicates the
scope of the resulting scoped variable.</p>
</div>
<div class="paragraph">
<p>The following is an example of using <code>var</code> or
<code>varReader</code> and the <code>scope</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:invoke fragment=&quot;frag2&quot; var=&quot;resultString&quot; scope=&quot;session&quot;/&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:invoke fragment=&quot;frag3&quot; varReader=&quot;resultReader&quot; scope=&quot;page&quot;/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="providing-a-fragment-access-to-variables"><a class="anchor" href="#providing-a-fragment-access-to-variables"></a>5.9.3. Providing a Fragment Access to Variables</h4>
<div class="paragraph">
<p>JSP fragments have access to the same page
scope variables as the page or tag file in which they were defined (in
addition to variables in the request, session, and application scopes).
Tag files have access to a local page scope, separate from the page
scope of the calling page. When a tag file invokes a fragment that
appears in the calling page, the JSP container provides a way to
synchronize variables between the local page scope in the tag file and
the page scope of the calling page. For each variable that is to be
synchronized, the tag file author must declare the variable with a scope
of either <code>AT_BEGIN</code> or <code>NESTED</code>. The container must then generate code
to synchronize the page scope values for the variable in the tag file
with the page scope equivalent in the calling page or tag file. The
details of how variables are synchronized can be found in
<a href="#variable-synchronization">Section 8.9, &#8220;Variable Synchronization&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The following is an example of a tag file
providing a fragment access to a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ variable name-given=&quot;x&quot; scope=&quot;NESTED&quot; %&gt;
 ...
 &lt;c:set var=&quot;x&quot; value=&quot;1&quot;/&gt;
 &lt;jsp:invoke fragment=&quot;frag4&quot;/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A translation error shall result if the
<code>&lt;jsp:invoke&gt;</code> action contains a non-empty body.</p>
</div>
<div class="paragraph">
<p>See <a href="#jsp-syntax-grammar">Section 1.3.10, &#8220;JSP Syntax Grammar&#8221;</a> for the formal syntax definition of the <code>&lt;jsp:invoke&gt;</code>
standard action.</p>
</div>
<div class="paragraph">
<p>The attributes are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-7</strong> Attributes for the <code>&lt;jsp:invoke&gt;</code> standard action</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fragment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(required) The name used to identify this
fragment during this tag invocation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The name of a scoped attribute to
store the result of the fragment invocation in, as a <code>java.lang.String</code>
object. A translation error must occur if both <code>var</code> and <code>varReader</code> are
specified. If neither <code>var</code> nor <code>varReader</code> are specified, the result of
the fragment goes directly to the <code>JspWriter</code>, as described above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>varReader</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The name of a scoped attribute to
store the result of the fragment invocation in, as a <code>java.io.Reader</code>
object. A translation error must occur if both <code>var</code> and <code>varReader</code> are
specified. If neither <code>var</code> nor <code>varReader</code> is specified, the result of
the fragment invocation goes directly to the <code>JspWriter</code>, as described
above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The scope in which to store the
resulting variable. A translation error must result if the value is not
one of <code>page</code>, <code>request</code>, <code>session</code>, or <code>application</code>. A translation
error will result if this attribute appears without specifying either
the <code>var</code> or <code>varReader</code> attribute as well. Note that a value of
<code>session</code> should be used with caution since not all calling pages may be
participating in a session. A container must throw an
<code>IllegalStateException</code> at runtime if <code>scope</code> is <code>session</code> and the
calling page does not participate in a session. Defaults to <code>page</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jspdobody"><a class="anchor" href="#jspdobody"></a>5.10. &lt;jsp:doBody&gt;</h3>
<div class="paragraph">
<p>The <code>&lt;jsp:doBody&gt;</code> standard action can
only be used in tag files (see <a href="#tag-files">Chapter 8, <em>Tag Files</em></a>), and must result in a translation error if used in a JSP. It
invokes the body of the tag, sending the output of the result to the
<code>JspWriter</code>, or to a scoped attribute that can be examined and
manipulated.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:doBody&gt;</code> standard action behaves
exactly like <code>&lt;jsp:invoke&gt;</code>, except that it operates on the body of the
tag instead of on a specific fragment passed as an attribute. Because it
always operates on the body of the tag, there is no <code>name</code> attribute for
this standard action. The <code>var</code>, <code>varReader</code>, and <code>scope</code> attributes
are all supported with the same semantics as for <code>&lt;jsp:invoke&gt;</code>.
Fragments are provided access to variables the same way for
<code>&lt;jsp:doBody&gt;</code> as they are for <code>&lt;jsp:invoke&gt;</code>. If no body was passed to
the tag, <code>&lt;jsp:doBody&gt;</code> will behave as though a body was passed in that
produces no output.</p>
</div>
<div class="paragraph">
<p>The body of a tag is passed to the simple tag
handler as a <code>JspFragment</code> object.</p>
</div>
<div class="paragraph">
<p>A translation error shall result if the
<code>&lt;jsp:doBody&gt;</code> action contains a non-empty body.</p>
</div>
<div class="paragraph">
<p>See <a href="#jsp-syntax-grammar">Section 1.3.10, &#8220;JSP Syntax Grammar&#8221;</a> for the formal syntax definition of the <code>&lt;jsp:doBody&gt;</code>
standard action.</p>
</div>
<div class="paragraph">
<p>The attributes are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-8</strong> Attributes for the <code>&lt;jsp:doBody&gt;</code> standard action</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The name of a scoped attribute to
store the result of the body invocation in, as a <code>java.lang.String</code>
object. A translation error must occur if both <code>var</code> and <code>varReader</code> are
specified. If neither <code>var</code> nor <code>varReader</code> are specified, the result of
the body goes directly to the <code>JspWriter</code>, as described above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>varReader</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The name of a scoped attribute to
store the result of the body invocation in, as a <code>java.io.Reader</code>
object. A translation error must occur if both <code>var</code> and <code>varReader</code> are
specified. If neither <code>var</code> nor <code>varReader</code> is specified, the result of
the body invocation goes directly to the <code>JspWriter</code>, as described
above.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The scope in which to store the
resulting variable. A translation error must result if the value is not
one of <code>page</code>, <code>request</code>, <code>session</code>, or <code>application</code>. A translation
error will result if this attribute appears without specifying either
the <code>var</code> or <code>varReader</code> attribute as well. Note that a value of
<code>session</code> should be used with caution since not all calling pages may be
participating in a session. A container must throw an
<code>IllegalStateException</code> at runtime if <code>scope</code> is <code>session</code> and the
calling page does not participate in a session. Defaults to <code>page</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:element"><a class="anchor" href="#jsp:element"></a>5.11. &lt;jsp:element&gt;</h3>
<div class="paragraph">
<p>The <code>jsp:element</code> action is used to
dynamically define the value of the tag of an XML element. This action
can be used in JSP pages, tag files and JSP documents. This action has
an optional body; the body can use the <code>jsp:attribute and jsp:body
actions.</code></p>
</div>
<div class="paragraph">
<p>A <code>jsp:element</code> action has one mandatory
attribute, name, of type <code>String</code>. The value of the attribute is used
as that of the tag of the element generated.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following example generates an XML
element whose name depends on the result of an EL expression,
content.headerName. The element has an attribute, lang, and the value of
the attribute is that of the expression content.lang. The body of the
element is the value of the expression content.body.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element
       name=&quot;${content.headerName}&quot;
       xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; &gt;
   &lt;jsp:attribute name=&quot;lang&quot;&gt;${content.lang}&lt;/jsp:attribute&gt;
   &lt;jsp:body&gt;${content.body}&lt;/jsp:body&gt;
 &lt;/jsp:element&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next example fragment shows that
<code>jsp:element</code> needs no children. The example generates an empty element
with name that of the value of the expression myName.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element name=&quot;${myName}&quot;/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="paragraph">
<p>The <code>jsp:element</code> action may have a body. Two
forms are valid, depending on whether the element is to have attributes
or not. In the first form, no attributes are present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element name=&quot;name&quot;&gt;
   optional body
 &lt;/jsp:element&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the second form, zero or more attributes
are requested, using <code>jsp:attribute</code> and <code>jsp:body</code>, as appropriate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element name=&quot;name&quot;&gt;
   jsp:attribute*
   jsp:body?
 &lt;/jsp:element&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The one valid, mandatory, attribute of
<code>jsp:element</code> is its name. Unlike other standard actions, the value of
the <code>name</code> attribute must be given as an XML-style attribute and cannot
be specified using <code>&lt;jsp:attribute&gt;</code> This is because <code>&lt;jsp:attribute&gt;</code>
has a special meaning when used in the body of <code>&lt;jsp:element&gt;</code>. See
<a href="#jsp:attribute">Section 5.7, &#8220;&lt;jsp:attribute&gt;&#8221;</a> for more details..</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-9</strong> Attributes for the <code>&lt;jsp:element&gt;</code> standard action</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(required) The value of name is that of the
element generated. The name can be a QName; JSP 4.1 places no
constraints on this value: it is accepted as is. A request-time
attribute value may be used for this attribute.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jsp:text"><a class="anchor" href="#jsp:text"></a>5.12. &lt;jsp:text&gt;</h3>
<div class="paragraph">
<p>A <code>jsp:text</code> action can be used to enclose
template data in a JSP page, a JSP document, or a tag file. A <code>jsp:text</code>
action has no attributes and can appear anywhere that template data can.
Its syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt; template data &lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interpretation of a <code>jsp:text</code> element is to pass its content through
to the current value of <code>out</code>. This is very similar to the XSLT <code>xsl:text</code>
element.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following example is a fragment that
could be in both a JSP page or a JSP document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;
   This is some content
 &lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expressions may appear within <code>jsp:text</code>, as
in the next example, where the expression <em>foo.content</em> is evaluated and
the result is inserted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;
   This is some content: ${foo.content}
 &lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>No subelements may appear within <code>jsp:text</code> ;
for example the following fragment is invalid and must generate a
translation error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;
  This is some content: &lt;jsp:text&gt;foo&lt;/jsp:text&gt;
 &lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When within a JSP document, of course, the
body content needs to additionally conform to the constraints of being a
well-formed XML document, so the following example, although valid in a
JSP page is invalid in a JSP document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;
   This is some content: ${foo.content &gt; 3}
 &lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same example can be made legal, with no
semantic changes, by using <code>gt</code> instead of <code>&gt;</code> in the expression; i.e.
<code>${foo.content gt 3}</code>.</p>
</div>
<div class="paragraph">
<p>In an JSP document, CDATA sections can also
be used to quote, uninterpreted, content, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;
   &lt;![CDATA[&lt;mumble&gt;&lt;/foobar&gt;]]&gt;
 &lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="paragraph">
<p>The <code>jsp:text</code> action has no attributes. The
action may have a body. The body may not have nested actions nor
scripting elements. The body may have EL expressions. The syntax is of
the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;
   optional body
 &lt;/jsp:text&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jsp:output"><a class="anchor" href="#jsp:output"></a>5.13. &lt;jsp:output&gt;</h3>
<div class="paragraph">
<p>The <code>jsp:output</code> action can only be used in
JSP documents and in tag files in XML syntax, and a translation error
must result if used in a standard syntax JSP or tag file. This action is
used to modify some properties of the output of a JSP document or a tag
file. In JSP 4.1 there are four properties that can be specified, all of
which affect the output of the XML prolog.</p>
</div>
<div class="paragraph">
<p>The <code>omit-xml-declaration</code> property allows
the page author to adjust whether an XML declaration is to be inserted
at the beginning of the output. Since XML declarations only make sense
for when the generated content is XML, the default value of this
property is defined so that it is unnecessary in most cases.</p>
</div>
<div class="paragraph">
<p>The <code>omit-xml-declaration</code> property is of
type <code>String</code> and the valid values are "yes", "no", "true" and "false".
The name, values and semantics mimic that of the <code>xsl:output</code> element in
the XSLT specification: if a value of "yes" or "true" is given, the
container will not add an XML declaration; if a value of "no" or "false"
is given, the container will add an XML declaration.</p>
</div>
<div class="paragraph">
<p>The default value for a JSP document that has
a <code>jsp:root</code> element is "yes". The default value for JSP documents
without a <code>jsp:root</code> element is "no".</p>
</div>
<div class="paragraph">
<p>The default value for a tag file in XML
syntax is always "yes". If the value is "false" or "no" the tag file
will emit an XML declaration as its first content.</p>
</div>
<div class="paragraph">
<p>The generated XML declaration is of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;encodingValue&quot; ?&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>encodingValue</code> is the response character
encoding, as determined in <a href="#response-character-encoding">Section 4.2, &#8220;Response Character Encoding&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The <code>doctype-root-element</code>, <code>doctype-system</code>
and <code>doctype-public</code> properties allow the page author to specify that a
DOCTYPE be automatically generated in the XML prolog of the output.
Without these properties, the DOCTYPE would need to be output manually
via a <code>&lt;jsp:text&gt;</code> element before the root element of the JSP document,
which is inconvenient.</p>
</div>
<div class="paragraph">
<p>A DOCTYPE must be automatically output if and
only if the <code>doctype-system</code> element appears in the translation unit as
part of a <code>&lt;jsp:output&gt;</code> action. The <code>doctype-root-element</code> must appear
and must only appear if the <code>doctype-system</code> property appears, or a
translation error must occur. The <code>doctype-public</code> property is optional,
but must not appear unless the <code>doctype-system</code> property appears, or a
translation error must occur.</p>
</div>
<div class="paragraph">
<p>The DOCTYPE to be automatically output, if
any, is statically determined at translation time. Multiple occurrences
of the <code>doctype-root-element</code>, <code>doctype-system</code> or <code>doctype-public</code>
properties will cause a translation error if the values for the
properties differ from the previous occurrence.</p>
</div>
<div class="paragraph">
<p>The DOCTYPE that is automatically output, if
any, must appear immediately before the first element of the output
document. The name following &lt;!DOCTYPE must be the value of the
<code>doctype-root-element</code> property. If a <code>doctype-public</code> property appears,
then the format of the generated DOCTYPE is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;!DOCTYPE nameOfRootElement PUBLIC "doctypePublic" "doctypeSystem"&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If a <code>doctype-public</code> property does not
appear, then the format of the generated DOCTYPE is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;!DOCTYPE nameOfRootElement SYSTEM "doctypeSystem"&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>nameOfRootElement</code> is the value of the
<code>doctype-root-element</code> property, <code>doctypePublic</code> is the value of the
<code>doctype-public</code> attribute, and <code>doctypeSystem</code> is the value of the
<code>doctype-system</code> property.</p>
</div>
<div class="paragraph">
<p>The values for <code>doctypePublic</code> and
<code>doctypeSystem</code> must be enclosed in either single or double quotes,
depending on the value provided by the page author. It is the
responsibility of the page author to provide a syntactically-valid URI
as per the XML specification (see
<code><a href="http://www.w3.org/TR/REC-xml#dt-sysid" class="bare">http://www.w3.org/TR/REC-xml#dt-sysid</a></code>).</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following JSP document (with an extension
of <code>.jspx</code> or with <code>&lt;is-xml&gt;</code> set to <code>true</code> in the JSP configuration):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;EUC-JP&quot; ?&gt;
 &lt;hello&gt;&lt;/hello&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>generates an XML document as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
 <span class="tag">&lt;hello&gt;</span><span class="tag">&lt;/hello&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following JSP document is like the
previous one, except that the XML declaration is omited. A typical use
would be where the XML fragment is to be included within another
document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;EUC-JP&quot; ?&gt;
 &lt;hello&gt;
   &lt;jsp:output
       xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;
       omit-xml-declaration=&quot;true&quot;/&gt;
 &lt;/hello&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following JSP document is equivalent but
uses <code>jsp:root</code> instead of <code>jsp:output</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;EUC-JP&quot; ?&gt;
 &lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;2.0&quot; &gt;
   &lt;hello&gt;&lt;/hello&gt;
 &lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following JSP document specifies both a
<code>doctype-public</code> and a <code>doctype-system</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
 &lt;html xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;&gt;
   &lt;jsp:output doctype-root-element=&quot;html&quot;
       doctype-public=&quot;-//W3C//DTD XHTML Basic 1.0//EN&quot;
       doctype-system=&quot;http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd&quot; /&gt;
   &lt;body&gt;
     &lt;h1&gt;Example XHTML Document&lt;/h1&gt;
   &lt;/body&gt;
 &lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and generates and XML document as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
 <span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML Basic 1.0//EN&quot;
 &quot;http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd&quot;&gt;</span>
 <span class="tag">&lt;html&gt;</span><span class="tag">&lt;body&gt;</span><span class="tag">&lt;h1&gt;</span>Example XHTML Document<span class="tag">&lt;/h1&gt;</span><span class="tag">&lt;/body&gt;</span><span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following JSP document omits the
<code>doctype-public</code> and explicitly omits the XML declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
 &lt;elementA&gt;
   &lt;jsp:output omit-xml-declaration=&quot;true&quot;
       doctype-root-element=&quot;elementA&quot;
       doctype-system=&quot;test.dtd&quot; /&gt;
   Element body goes here.
 &lt;/elementA&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and generates an XML document as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="doctype">&lt;!DOCTYPE elementA SYSTEM &quot;test.dtd&quot;&gt;</span>
 <span class="tag">&lt;elementA&gt;</span>Element body goes here.<span class="tag">&lt;/elementA&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="paragraph">
<p>The <code>jsp:output</code> action cannot have a body.
The &lt;jsp:output&gt; action has the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;jsp:output ( omit-xml-declaration=&quot;yes|no|true|false&quot; ) { doctypeDecl } /&gt;

doctypeDecl ::=   ( doctype-root-element=&quot;rootElement&quot;
                    doctype-public=&quot;PubidLiteral&quot;
                    doctype-system=&quot;SystemLiteral&quot; )
                | ( doctype-root-element=&quot;rootElement&quot;
                    doctype-system=&quot;SystemLiteral&quot; )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are the valid attributes of
jsp:output:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.5-10</strong> Attribute for the <code>&lt;jsp:output&gt;</code> standard action</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>omit-xml-declaration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Indicates whether to omit the
generation of an XML declaration. Acceptable values are "true", "yes",
"false" and "no".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>doctype-root-element</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Must be specified if and only if
<code>doctype-system</code> is specified or a translation error must occur.
Indicates the name that is to be output in the generated DOCTYPE
declaration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>doctype-system</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Specifies that a DOCTYPE
declaration is to be generated and gives the value for the System
Literal.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>doctype-public</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Must not be specified unless
<code>doctype-system</code> is specified. Gives the value for the Public ID for the
generated DOCTYPE.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="other-standard-actions"><a class="anchor" href="#other-standard-actions"></a>5.14. Other Standard Actions</h3>
<div class="paragraph">
<p><a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a> defines several other standard actions that are either
convenient or needed to describe JSP pages with an XML document, some of
which are available in all JSP pages. They are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;jsp:root&gt;</code>, defined in <a href="#the-jsproot-element">Section 6.3.2, &#8220;The jsp:root Element&#8221;</a>.</p>
</li>
<li>
<p><code>&lt;jsp:declaration&gt;</code>, defined in <a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>.</p>
</li>
<li>
<p><code>&lt;jsp:scriptlet&gt;</code>, defined in <a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>.</p>
</li>
<li>
<p><code>&lt;jsp:expression&gt;</code>, defined in <a href="#_Scripting_Elements">Section 6.3.7, &#8220;Scripting Elements&#8221;</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="JSP_Documents"><a class="anchor" href="#JSP_Documents"></a>6. JSP Documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter introduces two concepts
related to XML and JSP: JSP documents and XML views. This chapter
provides a brief overview of the two concepts and their relationship and
also provides the details of JSP documents. The details of the XML view
of a JSP document are described in <a href="#xml-view">Chapter 10, <em>XML View</em></a>.</p>
</div>
<div class="sect2">
<h3 id="overview-of-jsp-documents-and-of-xml-views"><a class="anchor" href="#overview-of-jsp-documents-and-of-xml-views"></a>6.1. Overview of JSP Documents and of XML Views</h3>
<div class="paragraph">
<p>A <em>JSP document</em> is a JSP page written using
XML syntax. JSP documents need to be described as such, either
implicitly or explicitly, to the JSP container, which will then process
them as XML documents, checking for well-formedness and applying
requests like entity declarations, if present. JSP documents are used to
generate dynamic content using the standard JSP semantics.</p>
</div>
<div class="paragraph">
<p>Here is a simple JSP document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;table&gt;
   &lt;c:forEach
       xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;3&quot;&gt;
     &lt;row&gt;${counter}&lt;/row&gt;
   &lt;/c:forEach&gt;
 &lt;/table&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This well-formed, namespace-aware XML
document generates, using the JSP standard tag library, an XML document
that has <code>&lt;table&gt;</code> as the root element. That element has 3 <code>&lt;row&gt;</code>
subelements containing values <code>1</code>, <code>2</code> and <code>3</code>. See
<a href="#examples-of-jsp-documents">Section 6.4, &#8220;Examples of JSP Documents&#8221;</a> for more
details of this and other examples.</p>
</div>
<div class="paragraph">
<p>The design of JSP documents is focused on the
generation of dynamic XML content, in any of its many uses, but JSP
documents can be used to generate any dynamic content.</p>
</div>
<div class="paragraph">
<p>Some of the syntactic elements described in
<a href="#core-syntax-and-semantics">Chapter 1, <em>Core Syntax and Semantics</em></a> are not
legal XML; this chapter describes alternative syntaxes for those
elements that are aligned with the XML syntax. The alternative syntaxes
can be used in JSP documents; most of them (<code>jsp:output</code> and <code>jsp:root</code>
are exceptions) can also be used in JSP pages in JSP syntax. As it will
be described later, the alternative syntax is also used in the XML view
of JSP pages.</p>
</div>
<div class="paragraph">
<p>JSP documents can be used in a number of
ways, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JSP documents can be passed directly to the
JSP container; this is becoming more important as more and more content
is authored as XML, be it in an XML-based languages like XHTML or SVG,
or for the exchange of documents in applications like Web Services. The
generated content may be sent directly to a client, or it may be part of
some XML processing pipeline.</p>
</li>
<li>
<p>JSP documents can be manipulated by
XML-aware tools.</p>
</li>
<li>
<p>A JSP document can be generated from a
textual representation by applying an XML transformation, like XSLT.</p>
</li>
<li>
<p>A JSP document can be generated
automatically, say by serializing some objects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tag files can also be authored using XML
syntax. The rules are very similar to that of JSP documents; see
<a href="#tag-files-in-xml-syntax">Section 8.6, &#8220;Tag Files in XML Syntax&#8221;</a> for more details.</p>
</div>
<div class="paragraph">
<p>The <em>XML view of a JSP page</em> is an XML
document that is derived from the JSP page following a mapping defined
later in this chapter. The XML view of a JSP page is intended to be used
for validating the JSP page against some description of the set of valid
pages. Validation of the JSP page is supported in the JSP 4.1
specification through a <code>TagLibraryValidator</code> class associated with a
tag library. The validator class acts on a PageData object that
represents the XML view of the JSP page (see, for example,
<a href="#validator-classes">Section 7.4.1.2, &#8220;Validator Classes&#8221;</a>)</p>
</div>
<div class="paragraph">
<p><a href="#_Relationship_between_JSP_Pages_and_XML_views_of_JSP_pages"><strong>Figure JSP.6-1</strong> Relationship between JSP Pages and XML views of JSP pages</a> below depicts the relationship between the concepts of JSP pages, JSP documents and XML
views. Two phases are involved: the Translation phase, where JSP pages,
in either syntax, are exposed to Tag Library Validators, via their XML
view, and the Request Processing phase, where requests are processed to
produce responses.</p>
</div>
<div id="_Relationship_between_JSP_Pages_and_XML_views_of_JSP_pages" class="paragraph">
<div class="title"><strong>Figure JSP.6-1</strong> Relationship between JSP Pages and XML views of JSP pages</div>
<p><span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4wLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDEvUkVDLVNWRy0yMDAxMDkwNC9EVEQvc3ZnMTAuZHRkIj4KPCEtLSBHZW5lcmF0byBkYSBNaWNyb3NvZnQgVmlzaW8gMTEuMCwgU1ZHIEV4cG9ydCwgdjEuMCBzcC00LnN2ZyBQYWdpbmEgMSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnY9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vdmlzaW8vMjAwMy9TVkdFeHRlbnNpb25zLyIgd2lkdGg9IjUuNjQ5OTJpbiIKCQloZWlnaHQ9IjMuNDY0ODhpbiIgdmlld0JveD0iMCAwIDQwNi43OTQgMjQ5LjQ3MSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBjbGFzcz0ic3QxMyIKCQl4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+Cgk8djpkb2N1bWVudFByb3BlcnRpZXMgdjpsYW5nSUQ9IjEwNDAiIHY6bWV0cmljPSJ0cnVlIiB2OnZpZXdNYXJrdXA9ImZhbHNlIj4KCQk8djp1c2VyRGVmcz4KCQkJPHY6dWQgdjpuYW1lVT0iTUJTQUFkZGluT3V0bGluZVZpc2libGUiIHY6cHJvbXB0PSIiIHY6dmFsPSJWVDAoMSk6MjYiLz4KCQk8L3Y6dXNlckRlZnM+Cgk8L3Y6ZG9jdW1lbnRQcm9wZXJ0aWVzPgoKCTxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgk8IVtDREFUQVsKCQkuc3QxIHtmaWxsOiNmZmZmZmY7c3Ryb2tlOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDIge21hcmtlci1lbmQ6dXJsKCNtcmtyMTMtOCk7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDMge2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjIyMjIyMjIyMjIyMjIyfQoJCS5zdDQge2ZpbGw6IzAwMDAwMDtzdHJva2U6IzAwMDAwMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzJ9CgkJLnN0NSB7ZmlsbDojZmZmZmZmO3N0cm9rZTojMDAwMDAwO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MC43Mn0KCQkuc3Q2IHtmaWxsOm5vbmU7c3Ryb2tlOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDcge2ZpbGw6IzAwMDAwMDtmb250LWZhbWlseTpBcmlhbDtmb250LXNpemU6MC44MzMzMzZlbTtmb250LXdlaWdodDpib2xkfQoJCS5zdDgge2ZvbnQtc2l6ZToxZW19CgkJLnN0OSB7YmFzZWxpbmUtc2hpZnQ6LTMyLjQ5NDclO2ZvbnQtc2l6ZTowLjY0OTg5NGVtfQoJCS5zdDEwIHtmb250LXNpemU6MWVtO2ZvbnQtd2VpZ2h0Om5vcm1hbH0KCQkuc3QxMSB7bWFya2VyLWVuZDp1cmwoI21ya3IxMy03Nyk7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoyLjE2fQoJCS5zdDEyIHtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC40NjE1Mzg0NjE1Mzg0Nn0KCQkuc3QxMyB7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO2ZvbnQtc2l6ZToxMjtvdmVyZmxvdzp2aXNpYmxlO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbWl0ZXJsaW1pdDozfQoJXV0+Cgk8L3N0eWxlPgoKCTxkZWZzIGlkPSJNYXJrZXJzIj4KCQk8ZyBpZD0ibGVuZDEzIj4KCQkJPHBhdGggZD0iTSAzIDEgTCAtMCAwIEwgMyAtMSBMIDMgMSAiIHN0eWxlPSJzdHJva2U6bm9uZSIvPgoJCTwvZz4KCQk8bWFya2VyIGlkPSJtcmtyMTMtOCIgY2xhc3M9InN0MyIgdjphcnJvd1R5cGU9IjEzIiB2OmFycm93U2l6ZT0iMiIgdjpzZXRiYWNrPSIxMy41IiByZWZYPSItMTMuNSIgb3JpZW50PSJhdXRvIgoJCQkJbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIj4KCQkJPHVzZSB4bGluazpocmVmPSIjbGVuZDEzIiB0cmFuc2Zvcm09InNjYWxlKC00LjUsLTQuNSkgIi8+CgkJPC9tYXJrZXI+CgkJPG1hcmtlciBpZD0ibXJrcjEzLTc3IiBjbGFzcz0ic3QxMiIgdjphcnJvd1R5cGU9IjEzIiB2OmFycm93U2l6ZT0iMiIgdjpzZXRiYWNrPSI2LjUiIHJlZlg9Ii02LjUiIG9yaWVudD0iYXV0byIKCQkJCW1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCI+CgkJCTx1c2UgeGxpbms6aHJlZj0iI2xlbmQxMyIgdHJhbnNmb3JtPSJzY2FsZSgtMi4xNjY2NjY2NjY2NjY3LC0yLjE2NjY2NjY2NjY2NjcpICIvPgoJCTwvbWFya2VyPgoJPC9kZWZzPgoJPGcgdjptSUQ9IjAiIHY6aW5kZXg9IjEiIHY6Z3JvdXBDb250ZXh0PSJmb3JlZ3JvdW5kUGFnZSI+CgkJPHRpdGxlPlBhZ2luYSAxPC90aXRsZT4KCQk8djpwYWdlUHJvcGVydGllcyB2OmRyYXdpbmdTY2FsZT0iMC4wMzkzNzAxIiB2OnBhZ2VTY2FsZT0iMC4wMzkzNzAxIiB2OmRyYXdpbmdVbml0cz0iMjQiIHY6c2hhZG93T2Zmc2V0WD0iOC41MDM5NCIKCQkJCXY6c2hhZG93T2Zmc2V0WT0iLTguNTAzOTQiLz4KCQk8ZyBpZD0ic2hhcGUxMzktMSIgdjptSUQ9IjEzOSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcyLC0wLjcyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTM5PC90aXRsZT4KCQkJPHJlY3QgeD0iMCIgeT0iMS40NCIgd2lkdGg9IjQwNS4zNTQiIGhlaWdodD0iMjQ4LjAzMSIgY2xhc3M9InN0MSIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxMTAtMyIgdjptSUQ9IjExMCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTMuNTgyNCwyNTYuMzIyKSByb3RhdGUoMzkuNzQzMykgc2NhbGUoMSwtMSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjExMDwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDI0OS40NyBMNDQuNzQgMjQ5LjQ3IiBjbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEyOC05IiB2Om1JRD0iMTI4IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI5My40MTUsMjUxLjM1Nikgcm90YXRlKDEzMCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjEyODwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik01LjY3IDI0OS40NyBMMCAyNDkuNDcgTDIuODMgMjM5LjgzIEw1LjY3IDI0OS40NyBaIiBjbGFzcz0ic3Q0Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEtMTEiIHY6bUlEPSIxIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMjIzOTQsLTE1Ni42MjYpIj4KCQkJPHRpdGxlPkZvZ2xpby4xPC90aXRsZT4KCQkJPHJlY3QgeD0iMCIgeT0iMTkyLjc3OSIgd2lkdGg9IjU2LjY5MjkiIGhlaWdodD0iNTYuNjkyOSIgY2xhc3M9InN0NSIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUyLTEzIiB2Om1JRD0iMiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjIyMzk0LC0xNzYuNDY4KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjwvdGl0bGU+CgkJCTxkZXNjPkpTUCBTeW50YXg8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjIxLjI1OTgiIGN5PSIyMzUuMjk4IiB3aWR0aD0iNDIuNTIiIGhlaWdodD0iMjguMzQ2NSIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyMjEuMTI1IiB3aWR0aD0iNDIuNTE5NyIgaGVpZ2h0PSIyOC4zNDY1IiBjbGFzcz0ic3Q2Ii8+CgkJCTx0ZXh0IHg9IjExLjgxIiB5PSIyMzIuMyIgY2xhc3M9InN0NyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5KU1A8djpuZXdsaW5lQ2hhci8+PHRzcGFuCgkJCQkJCXg9IjQuODYiIGR5PSIxLjJlbSIgY2xhc3M9InN0OCI+U3ludGF4PC90c3Bhbj48L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMy0xNyIgdjptSUQ9IjMiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4yMjM5NCwtODUuNzU5NCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjM8L3RpdGxlPgoJCQk8cmVjdCB4PSIwIiB5PSIxOTIuNzc5IiB3aWR0aD0iNTYuNjkyOSIgaGVpZ2h0PSI1Ni42OTI5IiBjbGFzcz0ic3Q1Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTYtMTkiIHY6bUlEPSI2IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMjIzOTQsLTEwNS42MDIpIj4KCQkJPHRpdGxlPkZvZ2xpby42PC90aXRsZT4KCQkJPGRlc2M+WE1MIFN5bnRheDwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iMjEuMjU5OCIgY3k9IjIzNS4yOTgiIHdpZHRoPSI0Mi41MiIgaGVpZ2h0PSIyOC4zNDY1Ii8+CgkJCTxyZWN0IHg9IjAiIHk9IjIyMS4xMjUiIHdpZHRoPSI0Mi41MTk3IiBoZWlnaHQ9IjI4LjM0NjUiIGNsYXNzPSJzdDYiLz4KCQkJPHRleHQgeD0iMTAuNzEiIHk9IjIzMi4zIiBjbGFzcz0ic3Q3IiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPlhNTDx2Om5ld2xpbmVDaGFyLz48dHNwYW4KCQkJCQkJeD0iNC44NiIgZHk9IjEuMmVtIiBjbGFzcz0ic3Q4Ij5TeW50YXg8L3RzcGFuPjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGU3LTIzIiB2Om1JRD0iNyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDguNDM3LC0xMjIuNjEpIj4KCQkJPHRpdGxlPkZvZ2xpby43PC90aXRsZT4KCQkJPHJlY3QgeD0iMCIgeT0iMTkyLjc3OSIgd2lkdGg9IjU2LjY5MjkiIGhlaWdodD0iNTYuNjkyOSIgY2xhc3M9InN0NSIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU4LTI1IiB2Om1JRD0iOCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDguNDM3LC0xNDIuNDUyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uODwvdGl0bGU+CgkJCTxkZXNjPlhNTCBWaWV3PC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSIyMS4yNTk4IiBjeT0iMjM1LjI5OCIgd2lkdGg9IjQyLjUyIiBoZWlnaHQ9IjI4LjM0NjUiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjIxLjEyNSIgd2lkdGg9IjQyLjUxOTciIGhlaWdodD0iMjguMzQ2NSIgY2xhc3M9InN0NiIvPgoJCQk8dGV4dCB4PSIxMC43MSIgeT0iMjMyLjMiIGNsYXNzPSJzdDciIHY6bGFuZ0lEPSIxMDQwIj48djpwYXJhZ3JhcGggdjpob3JpekFsaWduPSIxIi8+PHY6dGFiTGlzdC8+WE1MPHY6bmV3bGluZUNoYXIvPjx0c3BhbgoJCQkJCQl4PSI5Ljg3IiBkeT0iMS4yZW0iIGNsYXNzPSJzdDgiPlZpZXc8L3RzcGFuPjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGU5LTI5IiB2Om1JRD0iOSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjUuMDEsMzI3LjUyNSkgcm90YXRlKC0zOS42MjIyKSBzY2FsZSgxLC0xKSI+CgkJCTx0aXRsZT5Gb2dsaW8uOTwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDI0OS40NyBMNDUuMzMgMjQ5LjQ3IiBjbGFzcz0ic3QyIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEwLTM0IiB2Om1JRD0iMTAiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjg5LjkwNSwtNTUuOTgwMSkgcm90YXRlKDUwKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTA8L3RpdGxlPgoJCQk8cGF0aCBkPSJNNS42NyAyNDkuNDcgTDAgMjQ5LjQ3IEwyLjgzIDIzOS44MyBMNS42NyAyNDkuNDcgWiIgY2xhc3M9InN0NCIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxMS0zNiIgdjptSUQ9IjExIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYuMzg5MjksLTIyNC40MDIpIj4KCQkJPHRpdGxlPkZvZ2xpby4xMTwvdGl0bGU+CgkJCTxkZXNjPkpTUCBQYWdlczwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iMzEuMzA4NyIgY3k9IjI0MC44NCIgd2lkdGg9IjYyLjYyIiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyMzIuMjA5IiB3aWR0aD0iNjIuNjE3MyIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDYiLz4KCQkJPHRleHQgeD0iNS43NCIgeT0iMjQzLjg0IiBjbGFzcz0ic3Q3IiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPkpTUCBQYWdlczwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUxMi0zOSIgdjptSUQ9IjEyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk5LjkzMjYsLTIxMC4zNTYpIj4KCQkJPHRpdGxlPkZvZ2xpby4xMjwvdGl0bGU+CgkJCTxkZXNjPlRSQU5TTEFUSU9OIFBIQVNFPC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI2Mi40ODk4IiBjeT0iMjQwLjg0IiB3aWR0aD0iMTI0Ljk4IiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyMzIuMjA5IiB3aWR0aD0iMTI0Ljk4IiBoZWlnaHQ9IjE3LjI2MyIgY2xhc3M9InN0NiIvPgoJCQk8dGV4dCB4PSI4LjA0IiB5PSIyNDMuODQiIGNsYXNzPSJzdDciIHY6bGFuZ0lEPSIxMDQwIj48djpwYXJhZ3JhcGggdjpob3JpekFsaWduPSIxIi8+PHY6dGFiTGlzdC8+VFJBTlNMQVRJT04gUEhBU0U8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMTMtNDIiIHY6bUlEPSIxMyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzYuMjEzLC0xODIuMTM3KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTM8L3RpdGxlPgoJCQk8ZGVzYz5UTFYxIOKAkyBFUlJPUlMgT1IgT0s8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjYyLjQ4OTgiIGN5PSIyNDAuODQiIHdpZHRoPSIxMjQuOTgiIGhlaWdodD0iMTcuMjYzIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjIzMi4yMDkiIHdpZHRoPSIxMjQuOTgiIGhlaWdodD0iMTcuMjYzIiBjbGFzcz0ic3Q2Ii8+CgkJCTx0ZXh0IHg9IjYuNzkiIHk9IjI0My44NCIgY2xhc3M9InN0NyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5UTFY8dHNwYW4KCQkJCQkJZHk9Ii0wLjI4N2VtIiBjbGFzcz0ic3Q5IiB2OmJhc2VGb250U2l6ZT0iMTAiPjE8L3RzcGFuPjx0c3BhbiBkeT0iMC4xODZlbSIgY2xhc3M9InN0OCI+IDwvdHNwYW4+4oCTIDx0c3BhbgoJCQkJCQljbGFzcz0ic3QxMCI+RVJST1JTIE9SIE9LPC90c3Bhbj48L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMTQtNDgiIHY6bUlEPSIxNCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzYuMzQsLTE2NS4wMDIpIj4KCQkJPHRpdGxlPkZvZ2xpby4xNDwvdGl0bGU+CgkJCTxkZXNjPlRMVjIg4oCTIEVSUk9SUyBPUiBPSzwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iNjIuNDg5OCIgY3k9IjI0MC44NCIgd2lkdGg9IjEyNC45OCIgaGVpZ2h0PSIxNy4yNjMiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjMyLjIwOSIgd2lkdGg9IjEyNC45OCIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDYiLz4KCQkJPHRleHQgeD0iNi43OSIgeT0iMjQzLjg0IiBjbGFzcz0ic3Q3IiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPlRMVjx0c3BhbgoJCQkJCQlkeT0iLTAuMjg3ZW0iIGNsYXNzPSJzdDkiIHY6YmFzZUZvbnRTaXplPSIxMCI+MjwvdHNwYW4+PHRzcGFuIGR5PSIwLjE4NmVtIiBjbGFzcz0ic3Q4Ij4gPC90c3Bhbj7igJMgPHRzcGFuCgkJCQkJCWNsYXNzPSJzdDEwIj5FUlJPUlMgT1IgT0s8L3RzcGFuPjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNDAtNTQiIHY6bUlEPSIxNDAiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyLjE1NjksMzI1LjQ0Mikgcm90YXRlKDM3LjI0OTgpIHNjYWxlKDEsLTEpIj4KCQkJPHRpdGxlPkZvZ2xpby4xNDA8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCAyNDkuNDcgTDI1Ljc5IDI0OS40NyIgY2xhc3M9InN0MiIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNDEtNTkiIHY6bUlEPSIxNDEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQyLjczOCwzMDAuMzk2KSByb3RhdGUoMTMwKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTQxPC90aXRsZT4KCQkJPHBhdGggZD0iTTUuNjcgMjQ5LjQ3IEwwIDI0OS40NyBMMi44MyAyMzkuODMgTDUuNjcgMjQ5LjQ3IFoiIGNsYXNzPSJzdDQiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTQyLTYxIiB2Om1JRD0iMTQyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Mi40NTIsLTQzLjIzOTcpIj4KCQkJPHRpdGxlPkZvZ2xpby4xNDI8L3RpdGxlPgoJCQk8cmVjdCB4PSIwIiB5PSIxOTIuNzc5IiB3aWR0aD0iMTUwLjIzNiIgaGVpZ2h0PSI1Ni42OTI5IiBjbGFzcz0ic3Q1Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE0My02MyIgdjptSUQ9IjE0MyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTMuNzkxLC01NC41NzgzKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTQzPC90aXRsZT4KCQkJPGRlc2M+SlNQIEltcGxlbWVudGF0aW9uIENsYXNzPC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI0Mi41MTk3IiBjeT0iMjMyLjQ2NCIgd2lkdGg9Ijg1LjA0IiBoZWlnaHQ9IjM0LjAxNTciLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjE1LjQ1NiIgd2lkdGg9Ijg1LjAzOTQiIGhlaWdodD0iMzQuMDE1NyIgY2xhc3M9InN0NiIvPgoJCQk8dGV4dCB4PSI0IiB5PSIyMjMuNDYiIGNsYXNzPSJzdDciIHY6bGFuZ0lEPSIxMDQwIj48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPkpTUCA8dHNwYW4geD0iNCIgZHk9IjEuMmVtIiBjbGFzcz0ic3Q4Ij5JbXBsZW1lbnRhdGlvbiA8L3RzcGFuPjx0c3BhbgoJCQkJCQl4PSI0IiBkeT0iMS4yZW0iIGNsYXNzPSJzdDgiPkNsYXNzPC90c3Bhbj48L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMTQ0LTY4IiB2Om1JRD0iMTQ0IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5Ny43MjgsLTkuMjIzOTQpIj4KCQkJPHRpdGxlPkZvZ2xpby4xNDQ8L3RpdGxlPgoJCQk8ZGVzYz5SRVFVRVNUIFBST0NFU1NJTkcgUEhBU0U8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjYzLjc3OTUiIGN5PSIyMzcuOTQyIiB3aWR0aD0iMTI3LjU2IiBoZWlnaHQ9IjIzLjA1OTgiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjI2LjQxMiIgd2lkdGg9IjEyNy41NTkiIGhlaWdodD0iMjMuMDU5OCIgY2xhc3M9InN0NiIvPgoJCQk8dGV4dCB4PSI0Ljg4IiB5PSIyMzQuOTQiIGNsYXNzPSJzdDciIHY6bGFuZ0lEPSIxMDQwIj48djpwYXJhZ3JhcGggdjpob3JpekFsaWduPSIxIi8+PHY6dGFiTGlzdC8+UkVRVUVTVCBQUk9DRVNTSU5HIDx2Om5ld2xpbmVDaGFyLz48dHNwYW4KCQkJCQkJeD0iNDYuNTUiIGR5PSIxLjJlbSIgY2xhc3M9InN0OCI+UEhBU0U8L3RzcGFuPjwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNDUtNzIiIHY6bUlEPSIxNDUiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkyLjY4OSw0NDEuNzA2KSBzY2FsZSgxLC0xKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTQ1PC90aXRsZT4KCQkJPHBhdGggZD0iTTAgMjQ5LjQ3IEw4Mi40OCAyNDkuNDciIGNsYXNzPSJzdDExIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE0Ni03OCIgdjptSUQ9IjE0NiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MjQuOTMyLDE4Ny42NjUpIHJvdGF0ZSg5MCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjE0NjwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik04Ljc5IDI0OS40NyBMMCAyNDkuNDcgTDQuMzkgMjM1LjU2IEw4Ljc5IDI0OS40NyBaIiBjbGFzcz0ic3Q0Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE0Ny04MCIgdjptSUQ9IjE0NyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzODkuMDY2LDQxMS44MDEpIHJvdGF0ZSgxODApIj4KCQkJPHRpdGxlPkZvZ2xpby4xNDc8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCAyNDkuNDcgTDgyLjQ4IDI0OS40NyIgY2xhc3M9InN0MTEiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTQ4LTg1IiB2Om1JRD0iMTQ4IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU2LjgyMzMsMTU3Ljc1OSkgcm90YXRlKC05MCkgc2NhbGUoLTEsMSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjE0ODwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik04Ljc5IDI0OS40NyBMMCAyNDkuNDcgTDQuMzkgMjM1LjU2IEw4Ljc5IDI0OS40NyBaIiBjbGFzcz0ic3Q0Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE0OS04NyIgdjptSUQ9IjE0OSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTUuMzY2LC04OC4zMzg5KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTQ5PC90aXRsZT4KCQkJPGRlc2M+UmVxdWVzdDwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iMjguNDc0IiBjeT0iMjQwLjg0IiB3aWR0aD0iNTYuOTUiIGhlaWdodD0iMTcuMjYzIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjIzMi4yMDkiIHdpZHRoPSI1Ni45NDgiIGhlaWdodD0iMTcuMjYzIiBjbGFzcz0ic3Q2Ii8+CgkJCTx0ZXh0IHg9IjguNzUiIHk9IjI0My44NCIgY2xhc3M9InN0NyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5SZXF1ZXN0PC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE1MC05MCIgdjptSUQ9IjE1MCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTkuNjE4LC01Ny40MTI5KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTUwPC90aXRsZT4KCQkJPGRlc2M+UmVzcG9uc2U8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjI4LjQ3NCIgY3k9IjI0MC44NCIgd2lkdGg9IjU2Ljk1IiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyMzIuMjA5IiB3aWR0aD0iNTYuOTQ4IiBoZWlnaHQ9IjE3LjI2MyIgY2xhc3M9InN0NiIvPgoJCQk8dGV4dCB4PSI0LjU4IiB5PSIyNDMuODQiIGNsYXNzPSJzdDciIHY6bGFuZ0lEPSIxMDQwIj48djpwYXJhZ3JhcGggdjpob3JpekFsaWduPSIxIi8+PHY6dGFiTGlzdC8+UmVzcG9uc2U8L3RleHQ+CQk8L2c+Cgk8L2c+Cjwvc3ZnPgo=" alt="image"></span></p>
</div>
<div class="paragraph">
<p>JSP documents are used by JSP page authors.
They can be authored directly, using a text editor, through an XML
editing tool, or through a JSP page authoring tool that is aware of the
XML syntax. Any JSP page author that is generating XML content should
consider the use of JSP documents. In contrast, the XML view of a JSP
page is a concept internal to the JSP container and is of interest only
to Tag Library Authors and to implementors of JSP containers.</p>
</div>
</div>
<div class="sect2">
<h3 id="jsp-documents"><a class="anchor" href="#jsp-documents"></a>6.2. JSP Documents</h3>
<div class="paragraph">
<p>A JSP document is a JSP page that is a
namespace-aware XML document and that is identified as a JSP document to
the JSP container.</p>
</div>
<div class="sect3">
<h4 id="identifying-jsp-documents"><a class="anchor" href="#identifying-jsp-documents"></a>6.2.1. Identifying JSP Documents</h4>
<div class="paragraph">
<p>A JSP document can be identified as such in
three ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If there is a <code>&lt;jsp-property-group&gt;</code> that
explicitly indicates, through the <code>&lt;is-xml&gt;</code> element, whether a given
file is a JSP document, then that indication overrides any other
determination. Otherwise,</p>
</li>
<li>
<p>If this web application is using a version
2.4 web.xml, and if the extension is . <code>jspx</code>, then the file is a JSP
document. Otherwise,</p>
</li>
<li>
<p>If the file is explicitly or implicitly
identified as a JSP page and the top element is a <code>jsp:root</code> element
then the file is identified as a JSP document. This behavior provides
backwards compatibility with JSP 1.2.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is a translation-time error for a file
that is identified as a JSP document to not be a well-formed,
namespace-aware, XML document.</p>
</div>
<div class="paragraph">
<p>See <a href="#tag-files-in-xml-syntax">Section 8.6, &#8220;Tag Files in XML Syntax&#8221;</a> for details on identifying tag files in XML syntax.</p>
</div>
</div>
<div class="sect3">
<h4 id="overview-of-syntax-of-jsp-documents"><a class="anchor" href="#overview-of-syntax-of-jsp-documents"></a>6.2.2. Overview of Syntax of JSP Documents</h4>
<div class="paragraph">
<p>A JSP document may or not have a <code>&lt;jsp:root&gt;</code>
as its top element; <code>&lt;jsp:root&gt;</code> was mandatory in JSP 1.2, but we expect
most JSP documents in JSP 4.1 not to use it.</p>
</div>
<div class="paragraph">
<p>JSP documents identify standard actions
through the use of a well-defined URI in its namespace; although in this
chapter the prefix <code>jsp</code> is used for the standard actions, any prefix is
valid as long as the correct URI identifying JSP 4.1 standard actions is
used. Custom actions are identified using the URI that identifies their
tag library; <code>taglib</code> directives are not required and cannot appear in a
JSP document.</p>
</div>
<div class="paragraph">
<p>A JSP document can use XML elements as
template data; these elements may have qualified names (and thus be in a
namespace), or be unqualified.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;jsp:text&gt;</code> element can be used to
define some template data verbatim.</p>
</div>
<div class="paragraph">
<p>Since a JSP document must be a valid XML
document, there are some JSP elements that can’t be used in a JSP
document. The elements that can be used are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JSP directives and scripting elements in
XML syntax.</p>
</li>
<li>
<p>EL expressions in the body of elements and
in attribute values.</p>
</li>
<li>
<p>All JSP standard actions described in
<a href="#core-syntax-and-semantics">Chapter 1, <em>Core Syntax and Semantics</em></a>.</p>
</li>
<li>
<p>The jsp:root, jsp:text, and jsp:output
elements.</p>
</li>
<li>
<p>Custom action elements.</p>
</li>
<li>
<p>Template data described using <code>jsp:text</code>
elements.</p>
</li>
<li>
<p>Template data described through XML
fragments.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Scriptlet expressions used to specify
request-time attribute values use a slightly different syntax in JSP
documents than in non JSP documents; rather than using <code>&lt;%= expr %&gt;</code>,
they use <code>%= expr %</code>. The white space around <code>expr</code> is not needed, and
note the missing <code>&lt;</code> and <code>&gt;</code>. The <code>expr</code>, after any applicable quoting
as in any other XML document, is an expression to be evaluated as in
<a href="#request-time-attribute-values">Section 1.14.1, &#8220;Request Time Attribute Values&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The mechanisms that enable scripting and EL
evaluation in a JSP page apply also when the page is a JSP document.
Just as in the standard syntax, the <code>$</code> in an EL expression can be
quoted using <code>\$</code> in both attribute values and template text. Recall,
however, that <code>\\</code> is not an escape sequence in XML attributes so
whereas within an attribute in standard syntax <code>\\${1+1}</code> would result
in <code>\2</code> (assuming EL is enabled) or <code>\${1+1}</code> (assuming EL is ignored),
in XML syntax <code>\\${1+1}</code> always results in <code>\${1+1}</code>.</p>
</div>
<div class="paragraph">
<p>It should be noted that the equivalent JSP
document form of<br>
<code>&lt;a href="&lt;%= url %&gt;"&gt;</code>, where ’a’ is not a custom action, is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:text&gt;&lt;![CDATA[&lt;a href=&quot;]]&gt;&lt;/jsp:text&gt;&lt;jsp:expression&gt;url&lt;/jsp:expression&gt;
 &lt;jsp:text&gt;&lt;![CDATA[&quot;&gt;]]&gt;&lt;/jsp:text&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the JSP document element <code>&lt;a href="%= url
%"&gt;</code>, <code>"%= url %"</code> does not represent a request-time attribute value.
That syntax only applies for custom action elements. This is in contrast
to <code>&lt;a href="${url}"&gt;</code>, where &#8220;${url}&#8221; represents an EL
expression in both JSP pages and JSP documents.</p>
</div>
</div>
<div class="sect3">
<h4 id="semantic-model"><a class="anchor" href="#semantic-model"></a>6.2.3. Semantic Model</h4>
<div class="paragraph">
<p>The semantic model of a JSP document is
unchanged from that of a JSP page in JSP syntax: JSP pages generate a
response stream of characters from template data and dynamic elements.
Template data can be described explicitly through a <code>jsp:text</code> element,
or implicitly through an XML fragment. Dynamic elements are EL
expressions, scripting elements, standard actions or custom actions.
Scripting elements are represented as XML elements with the exception of
request-time attribute expressions, which are represented through
special attribute syntax.</p>
</div>
<div class="paragraph">
<p>The first step in processing a JSP document
is to process it as an XML document, checking for well-formedness,
processing entity resolution and, if applicable, performing validation
as described in <a href="#jsp-document-validation">Section 6.2.4, &#8220;JSP Document Validation&#8221;</a>. As part of the processing XML quoting will be performed,
and JSP quoting will not be performed later.</p>
</div>
<div class="paragraph">
<p>After these steps, the JSP document will be
passed to the JSP container which will then interpret it as a JSP page.</p>
</div>
<div class="paragraph">
<p>The JSP processing step for a JSP document is
as for any other JSP page except that namespaces are used to identify
standard actions and custom action tag libraries and that run time
expressions in attributes use the slightly different syntax. Note that
all the JSP elements that are described in this chapter are valid in all
JSP pages, be they identified as JSP documents or not. This is a
backward compatible change from the behavior in JSP 1.2 to enable
gradual introduction of XML syntax in existing JSP pages.</p>
</div>
<div class="paragraph">
<p>To clearly explain the processing of
whitespace, we follow the structure of the XSLT specification. The first
step in processing a JSP document is to identify the nodes of the
document. Then, all textual nodes that have only white space are dropped
from the document; the only exception are nodes in a <code>jsp:text</code> element,
which are kept verbatim. The resulting nodes are interpreted as
described in the following sections. Template data is either passed
directly to the response or it is mediated through (standard or custom)
actions.</p>
</div>
<div class="paragraph">
<p>Following the XML specification (and the XSLT
specification), whitespace characters are <code>#x20</code>, <code>#x9</code>, <code>#xD</code>, or
<code>#xA</code>.</p>
</div>
<div class="paragraph">
<p>The container will add, in some conditions,
an XML declaration to the output; the rules for this depend on the use
of jsp:root and jsp:output; see <a href="#the-jspoutput-element">Section 6.3.3, &#8220;The jsp:output Element&#8221;</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="jsp-document-validation"><a class="anchor" href="#jsp-document-validation"></a>6.2.4. JSP Document Validation</h4>
<div class="paragraph">
<p>A JSP document with a DOCTYPE declaration
must be validated by the container in the translation phase. Validation
errors must be handled the same way as any other translation phase
errors, as described in <a href="#translation-time-processing-errors">Section 1.4.1, &#8220;Translation Time Processing Errors&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>JSP 4.1 requires only DTD validation for JSP
Documents; containers should not perform validation based on other types
of schemas, such as XML schema.</p>
</div>
<div class="paragraph">
<p>If an author wishes to have the JSP document
framed by the root element of a vocabulary outside the
<a href="http://java.sun.com/JSP/Page" class="bare">http://java.sun.com/JSP/Page</a> namespace, and they wish to be able to
validate the JSP document according to a DTD, then they should be aware
that the DTD must make explicit provision for elements from the JSP
namespace, and the namespace prefix to which they are bound.</p>
</div>
<div class="paragraph">
<p>For example, the following XML document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="preprocessor">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
 <span class="doctype">&lt;!DOCTYPE root PUBLIC &quot;-//My Org//My DTD//EN&quot;
     &quot;http://www.my.org/dtd/my.dtd&quot;&gt;</span>
 <span class="tag">&lt;root</span> <span class="attribute-name">xmlns:jsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/JSP/Page</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>can only be validated against its DTD if the
DTD makes special provision for both the attribute "xmlns:jsp"
on the root element, and also for elements with a "jsp" namespace
prefix. Even if the DTD provides for this, you must bind the
namespace to the prefix that the DTD has chosen.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntactic-elements-in-jsp-documents"><a class="anchor" href="#syntactic-elements-in-jsp-documents"></a>6.3. Syntactic Elements in JSP Documents</h3>
<div class="paragraph">
<p>This section describes the elements in a JSP
document.</p>
</div>
<div class="sect3">
<h4 id="Namespaces_Standard_Actions_and_Tag_Libraries"><a class="anchor" href="#Namespaces_Standard_Actions_and_Tag_Libraries"></a>6.3.1. Namespaces, Standard Actions, and Tag Libraries</h4>
<div class="paragraph">
<p>JSP documents and tag files in XML syntax use
XML namespaces to identify the standard actions, the directives, and the
custom actions. JSP pages and tags in the JSP syntax cannot use XML
namespaces and instead must use the taglib directive.</p>
</div>
<div class="paragraph">
<p>Though the prefix &#8220;jsp&#8221; is used
throughout this specification, it is the namespace
<code><a href="http://java.sun.com/JSP/Page" class="bare">http://java.sun.com/JSP/Page</a></code> and not the prefix &#8220;jsp&#8221; that
identifies the JSP standard actions.</p>
</div>
<div class="paragraph">
<p>An <code>xmlns</code> attribute for a custom tag library
of the form <em>xml:prefix='uri'</em> identifies the tag library through the
<code>uri</code> value. The <code>uri</code> value may be of one of three forms, either a URN
of the form <code>urn:jsptagdir:tagdir</code>, a URN of the form <code>urn:jsptld:path</code>,
or a plain URI.</p>
</div>
<div class="paragraph">
<p>If the <code>uri</code> value is a URN of the form
<code>urn:jsptld:path</code>, then the TLD is determined following the
mechanism described in <a href="#tld-resource-path">Section 7.3.2, &#8220;TLD Resource Path&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>If the <code>uri</code> value is a URN of the form
<code>urn:jsptagdir:tagdir</code>, then the TLD is determined following the
mechanism described in <a href="#packaging-tag-files">Section 8.4, &#8220;Packaging Tag Files&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>If the <code>uri</code> value is a plain URI, then a
path is determined by consulting the mapping indicated in <code>web.xml</code>
extended using the implicit maps in the packaged tag libraries (Sections
<a href="#taglib-map-in-web-xml">Section 7.3.3, &#8220;Taglib Map in web.xml&#8221;</a> and
<a href="#implicit-map-entries-from-tlds">Section 7.3.4, &#8220;Implicit Map Entries from TLDs&#8221;</a>), as
indicated in <a href="#determining-the-tld-resource-path">Section 7.3.6, &#8220;Determining the TLD Resource Path&#8221;</a>. In contrast to <a href="#computing-the-tld-resource-path">Section 7.3.6.2, &#8220;Computing the TLD Resource Path&#8221;</a>, however, a translation error must not
be generated if the given <code>uri</code> is not found in the taglib map. Instead,
any actions in the namespace defined by the uri value must be treated as
uninterpreted.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-jsproot-element"><a class="anchor" href="#the-jsproot-element"></a>6.3.2. The jsp:root Element</h4>
<div class="paragraph">
<p>The <code>jsp:root</code> element can only appear as the
root element in a JSP document or in a tag file in XML syntax; otherwise
a translation error shall occur. JSP documents and tag files in XML
syntax need not have a <code>jsp:root</code> element as its root element.</p>
</div>
<div class="paragraph">
<p>The <code>jsp:root</code> element has two main uses. One
is to indicate that the JSP file is in XML syntax, without having to use
configuration group elements nor using the .jspx extension. The other
use of the <code>jsp:root</code> element is to accomodate the generation of content
that is not a single XML document: either a sequence of XML documents or
some non-XML content.</p>
</div>
<div class="paragraph">
<p>A <code>jsp:root</code> element can be used to provide
zero or more <code>xmlns</code> attributes that correspond to namespaces for the
standard actions, for custom actions or for generated template text.
Unlike in JSP 1.2, not all tag libraries used within the JSP document
need to be introduced on the root; tag libraries can be incorporated as
needed inside the document using additional <code>xmlns</code> attributes.</p>
</div>
<div class="paragraph">
<p>The jsp:root element has one mandatory
element, the version of the JSP spec that the page is using.</p>
</div>
<div class="paragraph">
<p>When <code>jsp:root</code> is used, the container will,
by default, not insert an XML declaration; the default can be changed
using the <code>jsp:output</code> element.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="paragraph">
<p>The following example generates a sequence of
two XML documents. No XML declaration is generated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;2.0&quot;&gt;
   &lt;table&gt;foo&lt;/table&gt;
   &lt;table&gt;bar&lt;/table&gt;
 &lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example generates one XML
document. An XML declaration is generated because of the use of
<code>jsp:output</code>. The example is mostly instructional, as the same content
could be generated dropping the <code>jsp:root</code> element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;2.0&quot;&gt;
   &lt;jsp:output omit-xml-declaration=&quot;no&quot;/&gt;
   &lt;table&gt;foo&lt;/table&gt;
 &lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="paragraph">
<p>No other attributes are defined in this
element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; body...
 &lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The one valid, mandatory, attribute of
jsp:root is the version of the JSP specification used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.6-1</strong> Attributes for the <code>&lt;jsp:root&gt;</code> standard action</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(required) The version of the JSP specification used in this page.
Valid values are "1.2", "2.0", "2.1", "2.2", "2.3", "3.0", "3.1", "4.0" and "4.1".
It is a translation error if the container does not support the specified version.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="the-jspoutput-element"><a class="anchor" href="#the-jspoutput-element"></a>6.3.3. The jsp:output Element</h4>
<div class="paragraph">
<p>The jsp:output element can be used in JSP
documents and in tag files in XML syntax. The jsp:output element is
described in detail in <a href="#jsp:output">Section 5.13, &#8220;&lt;jsp:output&gt;&#8221;</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-jspdirective-page-element"><a class="anchor" href="#the-jspdirective-page-element"></a>6.3.4. The jsp:directive.page Element</h4>
<div class="paragraph">
<p>The <code>jsp:directive.page</code> element defines a
number of page dependent properties and communicates these to the JSP
container. This element must be a child of the root element. Its syntax
is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:directive.page page_directive_attr_list /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>page_directive_attr_list</code> is as
described in <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The interpretation of a <code>jsp:directive.page</code>
element is as described in <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>, and its scope is the
JSP document and any fragments included through an include directive.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-jspdirective-include-element"><a class="anchor" href="#the-jspdirective-include-element"></a>6.3.5. The jsp:directive.include Element</h4>
<div class="paragraph">
<p>The <code>jsp:directive.include</code> element is used to
substitute text and/or code at JSP page translation-time. This element
can appear anywhere within a JSP document. Its syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:directive.include file=&quot;relativeURLspec&quot; /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interpretation of a
<code>jsp:directive.include</code> element is as in <a href="#the-include-directive">Section 1.10.3, &#8220;The <code>include</code> Directive&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>The XML view of a JSP page does not contain
<code>jsp:directive.include</code> elements, rather the included file is expanded
in-place. This is done to simplify validation.</p>
</div>
</div>
<div class="sect3">
<h4 id="additional-directive-elements-in-tag-files"><a class="anchor" href="#additional-directive-elements-in-tag-files"></a>6.3.6. Additional Directive Elements in Tag Files</h4>
<div class="paragraph">
<p><a href="#tag-files">Chapter 8, <em>Tag Files</em></a>
describes the tag, attribute and variable directives, which can be used
in tag files. The XML syntax for these directives is the same as in the
XML view (see <a href="#_The_tag_Directive">Section 10.1.14, &#8220;The tag Directive&#8221;</a>,
<a href="#_The_attribute_Directive">Section 10.1.15, &#8220;The attribute Directive&#8221;</a>, and
<a href="#_The_variable_Directive">Section 10.1.16, &#8220;The variable Directive&#8221;</a> for details).</p>
</div>
</div>
<div class="sect3">
<h4 id="_Scripting_Elements"><a class="anchor" href="#_Scripting_Elements"></a>6.3.7. Scripting Elements</h4>
<div class="paragraph">
<p>The usual scripting elements: declarations,
scriptlets and expressions, can be used in JSP documents, but the only
valid forms for these elements in a JSP document are the XML syntaxes;
i.e. those using the elements <code>jsp:declaration</code>, <code>jsp:scriptlet</code> and
<code>jsp:expression</code>.</p>
</div>
<div class="paragraph">
<p>The <code>jsp:declaration</code> element is used to
declare scripting language constructs that are available to all other
scripting elements. A <code>jsp:declaration</code> element has no attributes and
its body is the declaration itself. The interpretation of a
<code>jsp:declaration</code> element is as in <a href="#declarations">Section 1.12.1, &#8220;Declarations&#8221;</a>. Its syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:declaration&gt; declaration goes here &lt;/jsp:declaration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>jsp:scriptlet</code> element is used to
describe actions to be performed in response to some request. Scriptlets
are program fragments. A <code>jsp:scriptlet</code> element has no attributes and
its body is the program fragment that comprises the scriptlet. The
interpretation of a <code>jsp:scriptlet</code> element is as in
<a href="#scriptlets">Section 1.12.2, &#8220;Scriptlets&#8221;</a>. Its syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:scriptlet&gt; code fragment goes here &lt;/jsp:scriptlet&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>jsp:expression</code> element is used to
describe complete expressions in the scripting language that get
evaluated at response time. A <code>jsp:expression</code> element has no attributes
and its body is the expression. The interpretation of a <code>jsp:expression</code>
element is as in <a href="#expressions">Section 1.12.3, &#8220;Expressions&#8221;</a>. Its
syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:expression&gt; expression goes here &lt;/jsp:expression&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="other-standard-actions-2"><a class="anchor" href="#other-standard-actions-2"></a>6.3.8. Other Standard Actions</h4>
<div class="paragraph">
<p>The standard actions of
<a href="#standard-actions">Chapter 5, <em>Standard Actions</em></a> use a syntax that is
consistent with XML syntax and they can be used in JSP documents and in
tag files in XML syntax.</p>
</div>
</div>
<div class="sect3">
<h4 id="template-content"><a class="anchor" href="#template-content"></a>6.3.9. Template Content</h4>
<div class="paragraph">
<p>A JSP page has no structure on its template
content, and, correspondingly, imposes no constraints on that content.
On the other hand, JSP documents have structure and some constraints are
needed.</p>
</div>
<div class="paragraph">
<p>JSP documents can generate unconstrained
content using <code>jsp:text</code>, as defined in <a href="#jsp:text">Section 5.12, &#8220;&lt;jsp:text&gt;&#8221;</a>. <code>jsp:text</code> can be used to generate totally fixed content but
it can also be used to generate some dynamic content, as described in
<a href="#dynamic-template-content">Section 6.3.10, &#8220;Dynamic Template Content&#8221;</a> below.</p>
</div>
<div class="paragraph">
<p>Fixed structured content can be generated
using XML fragments. A template XML element, an element that represents
neither a standard action nor a custom action, can appear anywhere where
a <code>jsp:text</code> may appear in a JSP document. The interpretation of such an
XML element is to pass its textual representation to the current value
of <code>out</code>, after the whitespace processing described in
<a href="#semantic-model">Section 6.2.3, &#8220;Semantic Model&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>For example, if the variable i has the value
3, and the JSP document is of the form. :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.6-2</strong> Example 1 - Input</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LineNo</th>
<th class="tableblock halign-left valign-top">Source Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;hello&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&nbsp; &lt;hi&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&nbsp; &lt;jsp:text&gt; hi you all</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&nbsp; &lt;/jsp:text&gt;${i}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&nbsp; &lt;/hi&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;/hello&gt;</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The result is:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.6-3</strong> Example 1 - Output</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LineNo</th>
<th class="tableblock halign-left valign-top">Output Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;hello&gt;&lt;hi&gt; hi you all</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3&lt;/hi&gt;&lt;/hello&gt;</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="dynamic-template-content"><a class="anchor" href="#dynamic-template-content"></a>6.3.10. Dynamic Template Content</h4>
<div class="paragraph">
<p>Custom actions can be used to generate any
content, both structured and unstructured. Future versions of the JSP
specification may allow for custom actions to check constraints on the
generated content (see <a href="#generating-xml-content-natively">Section 6.5.1, &#8220;Generating XML Content Natively&#8221;</a>) but the current specification has no standards
support for any such constraints.</p>
</div>
<div class="paragraph">
<p>The most flexible standard mechanism for
dynamic content is <code>jsp:element</code>. <code>jsp:element</code>, together with
<code>jsp:attribute</code> and <code>jsp:body</code> can be used to generate any element.
Further details of jsp:element, jsp:attribute and jsp:body are given in
<a href="#jsp:element">Section 5.11, &#8220;&lt;jsp:element&gt;&#8221;</a>, in <a href="#jsp:attribute">Section 5.7, &#8220;&lt;jsp:attribute&gt;&#8221;</a> and in <a href="#jsp:body">Section 5.8, &#8220;&lt;jsp:body&gt;&#8221;</a>. The following example is from that section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:element
     name=&quot;${content.headerName}&quot;
     xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; &gt;
   &lt;jsp:attribute name=&quot;lang&quot;&gt;${content.lang}&lt;/jsp:attribute&gt;
   &lt;jsp:body&gt;${content.body}&lt;/jsp:body&gt;
 &lt;/jsp:element&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In some cases, the dynamic content that is
generated can be described as simple substitutions on otherwise static
templates. JSP documents can have XML templates where EL expressions are
used as the values of the body or of attributes. For instance, the next
example uses the expression <code>table.indent</code> as the value of an attribute,
and the expression <code>table.value</code> as that for the body of an element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;table indent=&quot;${table.indent}&quot;&gt;
   &lt;row&gt;${table.value}&lt;/row&gt;
 &lt;/table&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examples-of-jsp-documents"><a class="anchor" href="#examples-of-jsp-documents"></a>6.4. Examples of JSP Documents</h3>
<div class="paragraph">
<p>The following sections provide several
annotated examples of JSP documents.</p>
</div>
<div class="sect3">
<h4 id="example-a-simple-jsp-document"><a class="anchor" href="#example-a-simple-jsp-document"></a>6.4.1. Example: A Simple JSP Document</h4>
<div class="paragraph">
<p>This simple JSP document generates a table
with 3 rows with numeric values 1, 2, 3. The JSP document uses template
XML elements intermixed with actions from the JSP Standard Tag Library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;table size=&quot;${3}&quot;&gt;
   &lt;c:forEach
       xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;${3}&quot;&gt;
     &lt;row&gt;${counter}&lt;/row&gt;
   &lt;/c:forEach&gt;
 &lt;/table&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some comments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The XML template elements are &lt;table&gt; and
&lt;row&gt;. The custom action element is &lt;c:forEach&gt;</p>
</li>
<li>
<p>The JSP standard tag library is introduced
through the use of its URI namespace and the specific prefix used, c in
this case, is irrelevant. The prefix is introduced in a non-root
element, and the top element of the document is still &lt;table&gt;.</p>
</li>
<li>
<p>The expression ${counter} is used within
the &lt;row&gt; template element.</p>
</li>
<li>
<p>The expression ${3} (3 would have been
equally good, but an expression is used for expository reasons) is used
within the value of an attribute in both the XML template element
&lt;table&gt; and in the custom action element &lt;c:forEach&gt;.</p>
</li>
<li>
<p>The JSP document does not have an xml
declaration - we are assuming the encoding of the file did not require
it, e.g. it used UTF-8, - but the output will include an xml declaration
due to the defaulting rules and to the absence of jsp:output element
directing the container to do otherwise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The JSP document above does not generate an
XML document that uses namespaces, but the next example does.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-generating-namespace-aware-documents"><a class="anchor" href="#example-generating-namespace-aware-documents"></a>6.4.2. Example: Generating Namespace-aware Documents</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;table
     xmlns=&quot;http://table.com/Table1&quot;
     size=&quot;${3}&quot;&gt;
   &lt;c:forEach
       xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;${3}&quot;&gt;
     &lt;row&gt;${counter}&lt;/row&gt;
   &lt;/c:forEach&gt;
 &lt;/table&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example is essentially the same as the
one above, except that a default namespace is introduced in the top
element The namespace applies to the unqualified elements: &lt;table&gt; and
&lt;row&gt;. Also note that if the default namespace were to correspond to a
custom action, then the elements so effected would be interpreted as
invocations on custom actions or tags.</p>
</div>
<div class="paragraph">
<p>Although the JSP container understands that
this document is a namespace-aware document, the JSP 4.1 container does
not really understand that the generated content is a well-formed XML
document and, as the next example shows, a JSP document can generate
other types of content.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-generating-non-xml-documents"><a class="anchor" href="#example-generating-non-xml-documents"></a>6.4.3. Example: Generating non-XML documents</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:root
     xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
     xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;
     version=&quot;2.0&quot;&gt;
   &lt;c:forEach
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;${3}&quot;&gt;
     &lt;jsp:text&gt;${counter}&lt;/jsp:text&gt;
   &lt;/c:forEach&gt;
 &lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example just generates 123. There is no
xml declaration generated because there is no &lt;jsp:output&gt; element to
modify the default rule for when a JSP document has &lt;jsp:root&gt;. No
additional whitespace is introduced because there is none within the
&lt;jsp:text&gt; element.</p>
</div>
<div class="paragraph">
<p>The previous example used elements in the JSP
namespace. That example used the jsp prefix, but, unlike with JSP pages
in JSP syntax, the name of the prefix is irrelevant (although highly
convenient) in JSP documents: the JSP URI is the only important
indicative and the corrent URI should be used, and introduced via a
namespace attribute.</p>
</div>
<div class="paragraph">
<p>For example, the same output would be
generated with the following modification of the previous example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;wombat:root
     xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
     xmlns:wombat=&quot;http://java.sun.com/JSP/Page&quot;
     version=&quot;2.0&quot;&gt;
   &lt;c:forEach
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;${3}&quot;&gt;
     &lt;wombat:text&gt;${counter}&lt;/wombat:text&gt;
   &lt;/c:forEach&gt;
 &lt;/wombat:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the other hand, although the following
example uses the jsp prefix the URI used in the namespace attribute is
not the JSP URI and the JSP document will generate as output an XML
document with root &lt;jsp:root&gt; using the URI
<code><a href="http://johnsonshippingproducts.com" class="bare">http://johnsonshippingproducts.com</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:root
     xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
     xmlns:jsp=&quot;http://johnsonshippingproducts.com&quot;
     version=&quot;2.0&quot;&gt;
   &lt;c:forEach
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;${3}&quot;&gt;
     &lt;jsp:text&gt;${counter}&lt;/jsp:text&gt;
   &lt;/c:forEach&gt;
 &lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, note that, since a JSP document is a
well-formed, namespace-aware document, prefixes, including jsp cannot be
used without being introduced through a namespace attribute.</p>
</div>
</div>
<div class="sect3">
<h4 id="example-using-custom-actions-and-tag-files"><a class="anchor" href="#example-using-custom-actions-and-tag-files"></a>6.4.4. Example: Using Custom Actions and Tag Files</h4>
<div class="paragraph">
<p>Custom actions are frequently used within a
JSP document to generate portions of XML content. The JSP specification
treats this content as plain text, with no intepretation nor constraints
imposed on it. Good practice, though, suggests abstractions that
organize the content along well-formed fragments.</p>
</div>
<div class="paragraph">
<p>The following example generates an XHTML
document using tag library abstractions for presentation and data
access, made available through the prefixes u and data respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
       xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;
       xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
       xmlns:u=&quot;urn:jsptagdir:/WEB-INF/tags/mylib/&quot;
       xmlns:data=&quot;http://acme.com/functions&quot;&gt;
   &lt;c:set var=&quot;title&quot; value=&quot;Best Movies&quot; /&gt;
   &lt;u:headInfo title=&quot;${title}&quot;/&gt;
   &lt;body&gt;
     &lt;h1&gt;${title}&lt;/h1&gt;
     &lt;h2&gt;List of Best Movies&lt;/h2&gt;
     &lt;ul&gt;
       &lt;c:forEach var=&quot;m&quot; varStatus=&quot;s&quot; items=&quot;data:movieItems()&quot;&gt;
         &lt;li&gt;&lt;a href=&quot;#EL${s.index}&quot;&gt;${s.index}&lt;/a&gt;${m.title}&lt;/li&gt;
       &lt;/c:forEach&gt;
     &lt;/ul&gt;
   &lt;/body&gt;
 &lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For convenience we use the &lt;c:set&gt; JSTL
action, which defines variables and associates values with them. This
allows grouping in a single place of definitions used elsewhere.</p>
</div>
<div class="paragraph">
<p>Notice that if the above example included a
DOCTYPE declaration for XHTML documents, it would not validate according
to the DTD for XHTML documents, because that DTD does not list any of
the namespaces declared on the &lt;html&gt; root element as valid attributes
on the &lt;html&gt; element type.</p>
</div>
<div class="paragraph">
<p>However, to output a DOCTYPE, the
&lt;jsp:output&gt; standard action specified in <a href="#jsp:output">Section 5.13, &#8220;&lt;jsp:output&gt;&#8221;</a> could be used.</p>
</div>
<div class="paragraph">
<p>The action &lt;u:headInfo&gt; could be implemented
either through a custom action or through a tag. For example, as a tag
it could be defined by the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; version=&quot;2.0&quot;&gt;
  &lt;jsp:directive.tag /&gt;
  &lt;jsp:directive.attribute name=&quot;title&quot; required=&quot;true&quot; /&gt;
  &lt;head&gt;
    &lt;meta http-equiv=&quot;content-type&quot;
          content=&quot;text/html;charset=${pageCharSet}&quot; /&gt;
    &lt;title&gt;${title}&lt;/title&gt;
  &lt;/head&gt;
&lt;/jsp:root&gt;

where pageCharSet is a variable with a value as iso-8859-1.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this tag is a JSP document (because
of the jsp:root declaration), and, as such, it is validated by the
container. Also note that the content that is generated in this case is
not using QNames, which means that the interpretation of the generated
elements can be ’captured’ based on the invocation context. That is the
case here, as there is a default namespace active (that of XHTML) where
the tag is being invoked.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="possible-future-directions-for-jsp-documents"><a class="anchor" href="#possible-future-directions-for-jsp-documents"></a>6.5. Possible Future Directions for JSP documents</h3>
<div class="paragraph">
<p>This section is non-normative. Two features
are sketched briefly here to elicit input that could be used on future
versions of the JSP specification.</p>
</div>
<div class="sect3">
<h4 id="generating-xml-content-natively"><a class="anchor" href="#generating-xml-content-natively"></a>6.5.1. Generating XML Content Natively</h4>
<div class="paragraph">
<p>All JSP 4.1 content is textual, even when
using JSP documents to generate XML content. This is quite acceptable,
and even ideal, for some applications, but in some other applications
XML documents are the main data type being manipulated. For example, the
data source may be an XML document repository, perhaps queried using
XQuery, some of the manipulation on this data internal to the JSP page
will use XML concepts (XPath, XSTL operations), and the generated XML
document may be part of some XML pipeline.</p>
</div>
<div class="paragraph">
<p>In one such application, it is appealing not
to transform back and forth between a stream of characters (text) and a
parsed representation of the XML document. The JSP expert group has
explored different approaches on how such XML-awareness could be added,
and a future version of JSP could support this functionality.</p>
</div>
</div>
<div class="sect3">
<h4 id="schema-and-xinclude-support"><a class="anchor" href="#schema-and-xinclude-support"></a>6.5.2. Schema and XInclude Support</h4>
<div class="paragraph">
<p>The current specification only requires DTD
validation support for JSP documents. A more flexible schema language,
like XML Schema, could be useful and could be explored by a future
version of the JSP specification.</p>
</div>
<div class="paragraph">
<p>Similarly, future versions of the
specification may also consider support for XInclude.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tag-extensions"><a class="anchor" href="#tag-extensions"></a>7. Tag Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the tag library
facility for introducing new actions into a JSP page. The tag library
facility includes portable run-time support, a validation mechanism, and
authoring tool support. Both the classic JSP 1.2 style tag extension
mechanism and the newer JSP 2.0 onwards simple tag extension mechanism are
described. In <a href="#tag-files">Chapter 8, <em>Tag Files</em></a>, a mechanism
for authoring tag extensions using only JSP syntax is described. This
brings the power of tag extensions to page authors that may not know the
Java programming language.</p>
</div>
<div class="paragraph">
<p>This chapter also provides an overview of the
tag library concept. It describes the Tag Library Descriptor, and the
<code>taglib</code> directive. A detailed description of the APIs involved may be
found in the <code>jakarta.servlet.jsp.tagext</code> Javadoc.</p>
</div>
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a>7.1. Introduction</h3>
<div class="paragraph">
<p>A Tag Library abstracts functionality used by
a JSP page by defining a specialized (sub)language that enables a more
natural use of that functionality within JSP pages.</p>
</div>
<div class="paragraph">
<p>The actions introduced by the Tag Library can
be used by the JSP page author in JSP pages explicitly, when authoring
the page manually, or implicitly, when using an authoring tool. Tag
Libraries are particularly useful to authoring tools because they make
intent explicit and the parameters expressed in the action instance
provide information to the tool.</p>
</div>
<div class="paragraph">
<p>Actions that are delivered as tag libraries
are imported into a JSP page using the <code>taglib</code> directive. They are
available for use in the page using the prefix given by the directive.
An action can create new objects that can be passed to other actions, or
can be manipulated programmatically through a scripting element in the
JSP page.</p>
</div>
<div class="paragraph">
<p>The semantics of a specific custom action in
a tag library is described via a tag handler class which is usually
instantiated at runtime by the JSP page implementation class. When the
tag library is well known to the JSP container
(<a href="#well-known-uris">Section 7.3.9, &#8220;Well-Known URIs&#8221;</a>), the Container can
use alternative implementations as long as the semantics are preserved.</p>
</div>
<div class="paragraph">
<p>Tag libraries are portable: they can be used
in any legal JSP page regardless of the scripting language used in that
page.</p>
</div>
<div class="paragraph">
<p>The tag extension mechanism includes
information to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execute a JSP page that uses the tag
library.</p>
</li>
<li>
<p>Author or modify a JSP page.</p>
</li>
<li>
<p>Validate the JSP page.</p>
</li>
<li>
<p>Present the JSP page to the end user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Tag Library is described via the Tag
Library Descriptor ( TLD), an XML document that is described below.</p>
</div>
<div class="sect3">
<h4 id="goals"><a class="anchor" href="#goals"></a>7.1.1. Goals</h4>
<div class="paragraph">
<p>The tag extension mechanism described in this
chapter addresses the following goals. It is designed to be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Portable</em> - An action described in a tag
library must be usable in any JSP container.</p>
</li>
<li>
<p><em>Simple</em> - Unsophisticated users must be
able to understand and use this mechanism. Vendors of JSP functionality
must find it easy to make it available to users as actions.</p>
</li>
<li>
<p><em>Expressive</em> - The mechanism must support
a wide range of actions, including nested actions, scripting elements
inside action bodies, and creation, use, and updating of scripting
variables.</p>
</li>
<li>
<p><em>Usable from different scripting
languages</em> - Although the JSP specification currently only defines the
semantics for scripts in the Java programming language, we want to leave
open the possibility of other scripting languages.</p>
</li>
<li>
<p><em>Built upon existing concepts and
machinery</em> - We do not want to reinvent what exists elsewhere. Also, we
want to avoid future conflicts whenever we can predict them.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_Overview"><a class="anchor" href="#_Overview"></a>7.1.2. Overview</h4>
<div class="paragraph">
<p>The processing of a JSP page conceptually
follows these steps:</p>
</div>
<div class="paragraph">
<p><em>Parsing</em></p>
</div>
<div class="paragraph">
<p>JSP pages can be authored using two different
syntaxes: a JSP syntax and an XML syntax. The semantics and validation
of a JSP syntax page is described with reference to the semantics and
validation of an equivalent document in the XML syntax.</p>
</div>
<div class="paragraph">
<p>The first step is to parse the JSP page. The
page that is parsed is as expanded by the processing of include
directives. Information in the TLD is used in this step, including the
identification of custom tags, so there is some processing of the taglib
directives in the JSP page.</p>
</div>
<div class="paragraph">
<p><em>Validation</em></p>
</div>
<div class="paragraph">
<p>The tag libraries in the XML document are
processed in the order in which they appear in the page.</p>
</div>
<div class="paragraph">
<p>Each library is checked for a validator
class. If one is present, the whole document is made available to its
<code>validate</code> method as a <code>PageData</code> object. As of JSP 2.0, the Container
must provide a <code>jsp:id</code> attribute. This information can be used to
provide location information on errors.</p>
</div>
<div class="paragraph">
<p>Each custom tag in the library is checked for
a <code>TagExtraInfo</code> class. If one is present, its <code>validate</code> method is
invoked. The default implementation of <code>validate</code> is to call <code>isValid</code>.
See the APIs for more details.</p>
</div>
<div class="paragraph">
<p><em>Translation</em></p>
</div>
<div class="paragraph">
<p>Finally, the XML document is processed to
create a JSP page implementation class. This process may involve
creating scripting variables. Each custom action will provide
information about variables, either statically in the TLD, or more
flexibly by using the <code>getVariableInfo</code> method of a <code>TagExtraInfo</code>
class.</p>
</div>
<div class="paragraph">
<p><em>Execution</em></p>
</div>
<div class="paragraph">
<p>Once a JSP page implementation class has been
associated with a JSP page, the class will be treated as any other
servlet class: requests will be directed to instances of the class. At
run-time, tag handler instances will be created and methods will be
invoked in them.</p>
</div>
</div>
<div class="sect3">
<h4 id="classic-tag-handlers"><a class="anchor" href="#classic-tag-handlers"></a>7.1.3. Classic Tag Handlers</h4>
<div class="paragraph">
<p>A classic tag handler is a Java class that
implements the <code>Tag</code>, <code>IterationTag</code>, or <code>BodyTag</code> interface, and is
the run-time representation of a custom action.</p>
</div>
<div class="paragraph">
<p>The JSP page implementation class
instantiates a tag handler object, or reuses an existing tag handler
object, for each action in the JSP page. The handler object is a Java
object that implements the <code>jakarta.servlet.jsp.tagext.Tag</code> interface. The
handler object is responsible for the interaction between the JSP page
and additional server-side objects.</p>
</div>
<div class="paragraph">
<p>There are three main interfaces: <code>Tag</code>,
<code>IterationTag</code>, and <code>BodyTag</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Tag</code> interface defines the basic
methods needed in all tag handlers. These methods include setter methods
to initialize a tag handler with context data and attribute values of
the action, and the <code>doStartTag</code> and <code>doEndTag</code> methods.</p>
</li>
<li>
<p>The <code>IterationTag</code> <code>interface</code> is an
extension to <code>Tag</code> that provides the additional method, <code>doAfterBody</code>,
invoked for the reevaluation of the body of the tag.</p>
</li>
<li>
<p>The <code>BodyTag</code> interface is an extension
of <code>IterationTag</code> with two new methods for when the tag handler wants to
manipulate the tag body: <code>setBodyContent</code> passes a buffer, the
<code>BodyContent</code> object, and <code>doInitBody</code> provides an opportunity to
process the buffer before the first evaluation of the body into the
buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The use of interfaces simplifies making an
existing Java object a tag handler. There are also two support classes
that can be used as base classes: <code>TagSupport</code> and <code>BodyTagSupport</code>.</p>
</div>
<div class="paragraph">
<p>JSP 1.2 introduced a new interface designed
to help maintain data integrity and resource management in the presence
of exceptions. The <code>TryCatchFinally</code> interface is a “mix-in” interface
that can be added to a class implementing any of <code>Tag</code>, <code>IterationTag</code>
, or <code>BodyTag</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="simple-examples-of-classic-tag-handlers"><a class="anchor" href="#simple-examples-of-classic-tag-handlers"></a>7.1.4. Simple Examples of Classic Tag Handlers</h4>
<div class="paragraph">
<p>As examples, we describe prototypical uses of
tag extensions, briefly sketching how they take advantage of these
mechanisms.</p>
</div>
<div class="sect4">
<h5 id="plain-actions"><a class="anchor" href="#plain-actions"></a>7.1.4.1. Plain Actions</h5>
<div class="paragraph">
<p>The simplest type of action just does
something, perhaps with parameters to modify what the “something” is,
and improve reusability.</p>
</div>
<div class="paragraph">
<p>This type of action can be implemented with a
tag handler that implements the <code>Tag</code> interface. The tag handler needs
to use only the <code>doStartTag</code> method which is invoked when the start tag
is encountered. It can access the attributes of the tag and information
about the state of the JSP page. The information is passed to the <code>Tag</code>
object through setter method calls, prior to the call to <code>doStartTag</code>.</p>
</div>
<div class="paragraph">
<p>Since simple actions with empty tag bodies
are common, the Tag Library Descriptor can be used to indicate that the
tag is always intended to be empty. This indication leads to better
error checking at translation time, and to better code quality in the
JSP page implementation class.</p>
</div>
</div>
<div class="sect4">
<h5 id="actions-with-a-body"><a class="anchor" href="#actions-with-a-body"></a>7.1.4.2. Actions with a Body</h5>
<div class="paragraph">
<p>Another set of simple actions require
something to happen when the start tag is found, and when the end tag is
found. The <code>Tag</code> interface can also be used for these actions. The
<code>doEndTag</code> is similar to the <code>doStartTag</code> method except that it is
invoked when the end tag of the action is encountered. The result of the
<code>doEndTag</code> invocation indicates whether the remainder of the page is to
be evaluated or not.</p>
</div>
</div>
<div class="sect4">
<h5 id="conditionals"><a class="anchor" href="#conditionals"></a>7.1.4.3. Conditionals</h5>
<div class="paragraph">
<p>In some cases, a body needs to be invoked
only when some (possibly complex) condition happens. Again, this type of
action is supported by the basic <code>Tag</code> interface through the use of
return values in the <code>doStartTag</code> method.</p>
</div>
</div>
<div class="sect4">
<h5 id="iterations"><a class="anchor" href="#iterations"></a>7.1.4.4. Iterations</h5>
<div class="paragraph">
<p>For iteration the <code>IterationTag</code> interface is
needed. The <code>doAfterBody</code> method is invoked to determine whether to
reevaluate the body or not.</p>
</div>
</div>
<div class="sect4">
<h5 id="actions-that-process-their-body"><a class="anchor" href="#actions-that-process-their-body"></a>7.1.4.5. Actions that Process their Body</h5>
<div class="paragraph">
<p>Consider an action that evaluates its body
many times, creating a stream of response data. The <code>IterationTag</code>
protocol is used for this.</p>
</div>
<div class="paragraph">
<p>If the result of the reinterpretation is to
be further manipulated for whatever reason, including just discarding
it, we need a way to divert the output of reevaluations. This is done
through the creation of a <code>BodyContent</code> object and use of the
<code>setBodyContent</code> method, which is part of the <code>BodyTag</code> interface.
<code>BodyTag</code> also provides the <code>doInitBody</code> method which is invoked
after <code>setBodyContent</code> and before the first body evaluation provides an
opportunity to interact with the body.</p>
</div>
</div>
<div class="sect4">
<h5 id="cooperating-actions"><a class="anchor" href="#cooperating-actions"></a>7.1.4.6. Cooperating Actions</h5>
<div class="paragraph">
<p>Cooperating actions may offer the best way to
describe a desired functionality. For example, one action may be used to
describe information leading to the creation of a server-side object,
while another action may use that object elsewhere in the page. These
actions may cooperate explicitly, via scoped variables: one action
creates an object and gives it a name; the other refers to the object
through the name.</p>
</div>
<div class="paragraph">
<p>Two actions can also cooperate implicitly. A
flexible and convenient mechanism for action cooperation uses the nested
structure of the actions to describe scoping. This is supported in the
specification by providing each tag handler with its parent tag handler
(if any) through the <code>setParent</code> method. The <code>findAncestorWithClass</code>
static method in <code>TagSupport</code> can then be used to locate a tag handler,
and, once located, to perform valid operations on the tag handler.</p>
</div>
</div>
<div class="sect4">
<h5 id="actions-defining-scripting-variables"><a class="anchor" href="#actions-defining-scripting-variables"></a>7.1.4.7. Actions Defining Scripting Variables</h5>
<div class="paragraph">
<p>A custom action may create server-side
objects and make them available to scripting elements by creating or
updating the scripting variables. The variables thus affected are part
of the semantics of the custom action and are the responsibility of the
tag library author.</p>
</div>
<div class="paragraph">
<p>This information is used at JSP page
translation time and can be described in one of two ways: directly in
the TLD for simple cases, or through subclasses of <code>TagExtraInfo</code>.
Either mechanism will indicate the names and types of the scripting
variables.</p>
</div>
<div class="paragraph">
<p>At request time the tag handler will
associate objects with the scripting variables through the <code>pageContext</code>
object.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the JSP page
translator to automatically supply the code required to do the
“synchronization” between the <code>pageContext</code> values and the scripting
variables.</p>
</div>
<div class="paragraph">
<p>There are some sections of JSP where
scripting is not allowed. For example, this is the case in a tag body
where the <code>body-content</code> is declared as ‘<code>scriptless</code>’, or in a page
where <code>&lt;scripting-invalid&gt;</code> is true. In these sections, it is not
possible to access scripting variables directly via scriptlets or
expressions, and therefore the container need not synchronize them.
Instead, the page author can use the EL to access the <code>pageContext</code>
values.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="simple-tag-handlers"><a class="anchor" href="#simple-tag-handlers"></a>7.1.5. Simple Tag Handlers</h4>
<div class="paragraph">
<p>The API and invocation protocol for classic
tag handlers is necessarily somewhat complex because scriptlets and
scriptlet expressions in tag bodies can rely on surrounding context
defined using scriptlets in the enclosing page.</p>
</div>
<div class="paragraph">
<p>With the advent of the Expression Language
(EL) and JSP Standard Tag Library (JSTL), it is now feasible to develop
JSP pages that do not need scriptlets or scriptlet expressions. This
allows us to define a tag invocation protocol that is easier to use for
many use cases.</p>
</div>
<div class="paragraph">
<p>In that interest, JSP 2.0 introduced a new
type of tag extension called a Simple Tag Extension. Simple Tag
Extensions can be written in one of two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In Java, by defining a class that
implements the <code>jakarta.servlet.jsp.tagext.SimpleTag</code> interface. This
class is intended for use by advanced page authors and tag library
developers who need the flexibility of the Java language in order to
write their tag handlers. The
<code>jakarta.servlet.jsp.tagext.SimpleTagSupport</code> class provides a default
implementation for all methods in <code>SimpleTag</code>.</p>
</li>
<li>
<p>In JSP, using tag files. This method can be
used by page authors who do not know Java. It can also be used by
advanced page authors or tag library developers who know Java but are
producing tag libraries that are presentation-centric or can take
advantage of existing tag libraries. See <a href="#tag-files">Chapter 8, <em>Tag Files</em></a> for more details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The lifecycle of a Simple Tag Handler is
straightforward and is not complicated by caching semantics. Once a
Simple Tag Handler is instantiated by the Container, it is executed and
then discarded. The same instance must not be cached and reused. Initial
performance metrics show that caching a tag handler instance does not
necessarily lead to greater performance, and to accommodate such caching
makes writing portable tag handlers difficult and makes the tag handler
prone to error.</p>
</div>
<div class="paragraph">
<p>In addition to being simpler to work with,
Simple Tag Extensions do not directly rely on any servlet APIs, which
allows for potential future integration with other technologies. This is
facilitated by the <code>JspContext</code> class, which <code>PageContext</code> now extends.
<code>JspContext</code> provides generic services such as storing the <code>JspWriter</code>
and keeping track of scoped attributes, whereas <code>PageContext</code> has
functionality specific to serving JSPs in the context of servlets.
Whereas the <code>Tag</code> interface relies on <code>PageContext</code>, <code>SimpleTag</code> only
relies on <code>JspContext</code>.</p>
</div>
<div class="paragraph">
<p>The body of a Simple Tag, if present, is
translated into a JSP Fragment and passed to the <code>setJspBody</code> method.
The tag can then execute the fragment as many times as needed. See
<a href="#jsp-fragments">Section 7.1.6, &#8220;JSP Fragments&#8221;</a> for more details on JSP
Fragments.</p>
</div>
<div class="paragraph">
<p>Because JSP Fragments do not support
scriptlets, the &lt;body-content&gt; of a SimpleTag cannot be "JSP". A JSP
page is invalid if it references a custom tag whose tag handler
implements the SimpleTag interface and whose &lt;body-content&gt; is equal to
"JSP" as per the supporting TLD.</p>
</div>
</div>
<div class="sect3">
<h4 id="jsp-fragments"><a class="anchor" href="#jsp-fragments"></a>7.1.6. JSP Fragments</h4>
<div class="paragraph">
<p>During the translation phase, various pieces
of the page are translated into implementations of the
<code>jakarta.servlet.jsp.tagext.JspFragment</code> abstract class, before being
passed to a tag handler. This is done automatically for any JSP code in
the body of a named attribute (one that is defined by <code>&lt;jsp:attribute&gt;</code>
) that is declared to be a fragment, or of type <code>JspFragment</code>, in the
TLD. This is also automatically done for the body of any tag handled by
a Simple Tag handler. Once passed in, the tag handler can then evaluate
and re-evaluate the fragment as many times as needed, or even pass it
along to other tag handlers, in the case of Tag Files.</p>
</div>
<div class="paragraph">
<p>A JSP fragment can be parameterized by a tag
handler by setting page-scoped attributes in the <code>JspContext</code> associated
with the fragment. These attributes can then be accessed via the EL.</p>
</div>
<div class="paragraph">
<p>A translation error must occur if a piece of
JSP code that is to be translated into a JSP Fragment contains
scriptlets or scriptlet expressions.</p>
</div>
<div class="paragraph">
<p>See the <code>jakarta.servlet.jsp.tagext</code> Javadoc
for more details on the <code>JspFragment</code> abstract class.</p>
</div>
</div>
<div class="sect3">
<h4 id="simple-examples-of-simple-tag-handlers"><a class="anchor" href="#simple-examples-of-simple-tag-handlers"></a>7.1.7. Simple Examples of Simple Tag Handlers</h4>
<div class="paragraph">
<p>In this section, we revisit the prototypical
uses of classic tag extensions, as was presented in
<a href="#simple-examples-of-classic-tag-handlers">Section 7.1.4, &#8220;Simple Examples of Classic Tag Handlers&#8221;</a>, and briefly describe how they
are implemented using simple tag handlers.</p>
</div>
<div class="sect4">
<h5 id="plain-actions-2"><a class="anchor" href="#plain-actions-2"></a>7.1.7.1. Plain Actions</h5>
<div class="paragraph">
<p>To implement plain actions, the tag library
developer creates a class that extends <code>SimpleTagSupport</code> and implements
the <code>doTag</code> method. The details on accessing attributes and enforcing an
empty body are the same as with classic tag handlers. By default, the
rest of the page will be evaluated after invoking <code>doTag</code>. To signal
that the page is to be skipped, <code>doTag</code> throws <code>SkipPageException</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="actions-with-a-body-2"><a class="anchor" href="#actions-with-a-body-2"></a>7.1.7.2. Actions with a Body</h5>
<div class="paragraph">
<p>To implement actions with a body, the tag
library developer implements <code>doTag</code> and invokes the body at any point
by calling <code>invoke</code> on the <code>JspFragment</code> object passed in via the
<code>setJspBody</code> method. The tag handler can provide the fragment access to
variables through the <code>JspContext</code> object.</p>
</div>
</div>
<div class="sect4">
<h5 id="conditionals-2"><a class="anchor" href="#conditionals-2"></a>7.1.7.3. Conditionals</h5>
<div class="paragraph">
<p>All conditional logic is handled in the
<code>doTag</code> method. If the body is not to be invoked, the tag library
developer simply does not call <code>invoke</code> on the <code>JspFragment</code> object
passed in via <code>setJspBody</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="iterations-2"><a class="anchor" href="#iterations-2"></a>7.1.7.4. Iterations</h5>
<div class="paragraph">
<p>All iteration logic is handled in the <code>doTag</code>
method. The tag library developer simply calls <code>invoke</code> on the
<code>JspFragment</code> object passed in via <code>setJspBody</code> as many times as needed.</p>
</div>
</div>
<div class="sect4">
<h5 id="actions-that-process-their-body-2"><a class="anchor" href="#actions-that-process-their-body-2"></a>7.1.7.5. Actions that Process their Body</h5>
<div class="paragraph">
<p>To divert the result of the body invocation,
the tag library developer passes a <code>java.io.Writer</code> object to the
<code>invoke</code> method on the body <code>JspFragment</code>. Unlike the standard tag
handler’s <code>BodyContent</code> solution, the result of the invocation does not
need to be buffered.</p>
</div>
</div>
<div class="sect4">
<h5 id="cooperating-actions-2"><a class="anchor" href="#cooperating-actions-2"></a>7.1.7.6. Cooperating Actions</h5>
<div class="paragraph">
<p>Cooperating actions work the same way as with
classic tag handlers. A <code>setParent</code> method is available in the
<code>SimpleTag</code> interface and is called by the container before calling
<code>doTag</code> if one tag invocation is nested within another. A
<code>findAncestorWithClass</code> method is available on <code>SimpleTagSupport</code>. This
should be used, instead of <code>TagSupport.findAncestorWithClass(),</code> in all
cases where the desired return value may implement <code>SimpleTag</code>.</p>
</div>
<div class="paragraph">
<p>Note that <code>SimpleTag</code> does not extend <code>Tag</code>.
Because of this, the <code>JspTag</code> common base is used in these new APIs
instead of <code>Tag</code>. Furthermore, because <code>Tag.setParent</code> only accepts an
object of type <code>Tag</code>, tag collaboration becomes more difficult when
classic tag handlers are nested inside <code>SimpleTag</code> custom actions.</p>
</div>
<div class="paragraph">
<p>To make things easier, the
<code>jakarta.servlet.jsp.tagext.TagAdapter</code> class can wrap any <code>SimpleTag</code> and
expose it as if it were a <code>Tag</code> instace. The original <code>JspTag</code> can be
retrieved through its <code>getAdaptee</code> method. Whenever calling the
<code>setParent</code> method on a classic <code>Tag</code> in a case where the outer tag does
not implement <code>Tag</code>, the JSP Container must construct a new
<code>TagAdapter</code> and call <code>setParent</code> on the classic <code>Tag</code> passing in the
adapter.</p>
</div>
<div class="paragraph">
<p>See the <code>jakarta.servlet.jsp.tagext</code> Javadoc
for more details on these APIs.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="attributes-with-dynamic-names"><a class="anchor" href="#attributes-with-dynamic-names"></a>7.1.8. Attributes With Dynamic Names</h4>
<div class="paragraph">
<p>Prior to JSP 2.0, the name of every attribute
that a tag handler accepted was predetermined at the time the tag
handler was developed. It is sometimes useful, however, to be able to
define a tag handler that accepts attributes with dynamic names that are
not known until the page author uses the tag. For example, it is time
consuming and error-prone to anticipate what attributes a user may wish
to pass to a tag that mimics an HTML element.</p>
</div>
<div class="paragraph">
<p>Available since JSP 2.0 is the ability to declare that
a tag handler accepts additional attributes with dynamic names. This is
done by having the tag handler implement the
<code>jakarta.servlet.jsp.tagext.DynamicAttributes</code> interface. See
the <code>jakarta.servlet.jsp.tagext</code> Javadoc for more details on this
interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="event-listeners"><a class="anchor" href="#event-listeners"></a>7.1.9. Event Listeners</h4>
<div class="paragraph">
<p>A tag library may include classes that are
event listeners (see the Servlet 6.2 specification). The listeners
classes are listed in the tag library descriptor and the JSP container
automatically instantiates them and registers them. A Container is
required to locate all TLD files (see <a href="#identifying-tag-library-descriptors">Section 7.3.1, &#8220;Identifying Tag Library Descriptors&#8221;</a> for details on how they are
identified), read their <code>listener</code> elements, and treat the event
listeners as extensions of those listed in <code>web.xml</code>.</p>
</div>
<div class="paragraph">
<p>The order in which the listeners are
registered is undefined, but they are registered before application
start.</p>
</div>
</div>
<div class="sect3">
<h4 id="jspid-attribute"><a class="anchor" href="#jspid-attribute"></a>7.1.10. JspId Attribute</h4>
<div class="paragraph">
<p>Sometimes it may be useful to provide unique
identifications for tag handlers. A tag handler can implement the
interface <code>jakarta.servlet.jsp.tagext.JspIdConsumer</code> for such
functionality. See <code>jakarta.servlet.jsp.tagext</code> Javadoc for more
details.</p>
</div>
</div>
<div class="sect3">
<h4 id="resource-injection"><a class="anchor" href="#resource-injection"></a>7.1.11. Resource Injection</h4>
<div class="paragraph">
<p>The Java Metadata specification (JSR-175),
which is part of Java SE 5.0 and greater, provides a means of specifying
configuration data in Java code. Metadata in Java code is also referred
to as annotations. In Jakarta EE, annotations are used to declare
dependencies on external resources and configuration data in Java code
without the need to define that data in a configuration file.</p>
</div>
<div class="paragraph">
<p>Section SRV.15.5 of the Servlet Specification
describes the behavior of annotations and resource injection in Jakarta EE
technology compliant web containers.</p>
</div>
<div class="paragraph">
<p>In the JSP specification, tag handlers which
implement interfaces <code>jakarta.servlet.jsp.tagext.Tag</code> and
<code>jakarta.servlet.jsp.tagext.SimpleTag</code> may be annotated for injection. In
both cases, injection occurs immediately after an instance of the tag
handler is constructed, and before any of the tag properties are
initialized.</p>
</div>
<div class="paragraph">
<p>Event Listeners (See <a href="#event-listeners">Section 7.1.9, &#8220;Event Listeners&#8221;</a>) can also be annotated
for resource injection. Injection occurs immediately after an instance
of the event handler is constructed, and before it is registered.</p>
</div>
<div class="paragraph">
<p>The annotations supported are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@EJB</code>, <code>@EJBs</code></p>
</li>
<li>
<p><code>@PersistenceContext</code>, <code>@PersistenceContexts</code></p>
</li>
<li>
<p><code>@PersistenceUnit</code>, <code>@PersistenceUnits</code></p>
</li>
<li>
<p><code>@PostConstruct</code>, <code>@PreDestroy</code></p>
</li>
<li>
<p><code>@Resource</code>, <code>@Resources</code></p>
</li>
<li>
<p><code>@WebServiceRef</code>, <code>@WebServiceRefs</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please see Section SRV.15.5 of the servlet
specification for more details on these annotations.</p>
</div>
<div class="paragraph">
<p>A JSP container that is not part of a Jakarta EE
technology-compliant implementation is encouraged, but not required, to
support resource injection.</p>
</div>
<div class="paragraph">
<p>Resource injection is not supported for JSP
pages or tag files.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tag-libraries"><a class="anchor" href="#tag-libraries"></a>7.2. Tag Libraries</h3>
<div class="paragraph">
<p>A tag library is a collection of actions that
encapsulate some functionality to be used from within a JSP page. A tag
library is made available to a JSP page through a <code>taglib</code> directive
that identifies the tag library via a URI (Universal Resource
Identifier).</p>
</div>
<div class="paragraph">
<p>The URI identifying a tag library may be any
valid URI as long as it can be used to uniquely identify the semantics
of the tag library.</p>
</div>
<div class="paragraph">
<p>The URI identifying the tag library is
associated with a Tag Library Description (TLD) file and with tag
handler classes as indicated in <a href="#the-tag-library-descriptor">Section 7.3, &#8220;The Tag Library Descriptor&#8221;</a> below.</p>
</div>
<div class="sect3">
<h4 id="packaged-tag-libraries"><a class="anchor" href="#packaged-tag-libraries"></a>7.2.1. Packaged Tag Libraries</h4>
<div class="paragraph">
<p>JSP page authoring tools and JSP containers
are required to accept a tag library that is packaged as a JAR file.
When deployed in a JSP container, the standard JAR conventions described
in the Servlet 6.2 specification apply, including the conventions for
dependencies on extensions.</p>
</div>
<div class="paragraph">
<p>Packaged tag libraries must have at least one
tag library descriptor file. The JSP 1.1 specification allowed only a
single TLD, in <code>META-INF/taglib.tld</code>, but as of JSP 1.2 multiple tag
libraries are allowed. See <a href="#identifying-tag-library-descriptors">Section 7.3.1, &#8220;Identifying Tag Library Descriptors&#8221;</a> for
how TLDs are identified.</p>
</div>
<div class="paragraph">
<p>Both Classic and Simple Tag Handlers
(implemented either in Java or as tag files) can be packaged together.</p>
</div>
</div>
<div class="sect3">
<h4 id="location-of-java-classes"><a class="anchor" href="#location-of-java-classes"></a>7.2.2. Location of Java Classes</h4>
<div class="paragraph">
<p>A tag library contains classes for
instantiation at translation time and classes for instantiation at
request time. The former includes classes such as <code>TagLibraryValidator</code>
and <code>TagExtraInfo</code>. The latter includes tag handler classes.</p>
</div>
<div class="paragraph">
<p>The usual conventions for Java classes apply:
as part of a web application, they must reside either in a JAR file in
the <code>WEB-INF/lib</code> directory, or in a directory in the <code>WEB-INF/classes</code>
directory.</p>
</div>
<div class="paragraph">
<p>A JAR containing packaged tag libraries must
be dropped into the <code>WEB-INF/lib</code> directory to make its classes
available at request time (and also at translation time, see
<a href="#translation-time-class-loader">Section 7.3.7, &#8220;Translation-Time Class Loader&#8221;</a>). The
mapping between the URI and the TLD is explained further below.</p>
</div>
</div>
<div class="sect3">
<h4 id="tag-library-directive"><a class="anchor" href="#tag-library-directive"></a>7.2.3. Tag Library Directive</h4>
<div class="paragraph">
<p>The <code>taglib</code> directive in a JSP page declares
that the page uses a tag library, uniquely identifies the tag library
using a URI, and associates a tag prefix with usage of the actions in
the library.</p>
</div>
<div class="paragraph">
<p>A JSP container maps the URI used in the
<code>taglib</code> directive into a Tag Library Descriptor in two steps: it
resolves the URI into a TLD resource path, and then derives the TLD
object from the TLD resource path.</p>
</div>
<div class="paragraph">
<p>If the JSP container cannot locate a TLD
resource path for a given URI, a fatal translation error shall result.
Similarly, it is a fatal translation error for a URI attribute value to
resolve to two different TLD resource paths.</p>
</div>
<div class="paragraph">
<p>It is a fatal translation error for the
<code>taglib</code> directive to appear after actions using the prefix introduced
by it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-tag-library-descriptor"><a class="anchor" href="#the-tag-library-descriptor"></a>7.3. The Tag Library Descriptor</h3>
<div class="paragraph">
<p>The Tag Library Descriptor (TLD) is an XML
document that describes a tag library. The TLD for a tag library is used
by a JSP container to interpret pages that include <code>taglib</code> directives
referring to that tag library. The TLD is also used by JSP page
authoring tools that will generate JSP pages that use a library, and by
authors who do the same manually.</p>
</div>
<div class="paragraph">
<p>The TLD includes documentation on the library
as a whole and on its individual tags, version information on the JSP
container and on the tag library, and information on each of the actions
defined in the tag library.</p>
</div>
<div class="paragraph">
<p>The TLD may name a <code>TagLibraryValidator</code>
class that can validate that a JSP page conforms to a set of constraints
expected by the tag library.</p>
</div>
<div class="paragraph">
<p>Each action in the library is described by
giving its name, the class of its tag handler, information on any
scripting variables created by the action, and information on attributes
of the action. Scripting variable information can be given directly in
the TLD or through a <code>TagExtraInfo</code> class. For each valid attribute
there is an indication about whether it is mandatory, whether it can
accept request-time expressions, and additional information.</p>
</div>
<div class="paragraph">
<p>A TLD file is useful for providing
information on a tag library. It can be read by tools without
instantiating objects or loader classes. Our approach conforms to the
conventions used in other Jakarta EE technologies.</p>
</div>
<div class="paragraph">
<p>As of JSP 2.0, the format for the Tag Library
Descriptor is represented in XML Schema. This allows for a more
extensible TLD that can be used as a true single-source document.</p>
</div>
<div class="sect3">
<h4 id="identifying-tag-library-descriptors"><a class="anchor" href="#identifying-tag-library-descriptors"></a>7.3.1. Identifying Tag Library Descriptors</h4>
<div class="paragraph">
<p>Tag library descriptor files have names that
use the extension <code>.tld</code>, and the extension indicates a tag library
descriptor file. When deployed inside a JAR file, the tag library
descriptor files must be in the <code>META-INF</code> directory, or a subdirectory
of it. When deployed directly into a web application, the tag library
descriptor files must always be in the <code>WEB-INF</code> directory, or some
subdirectory of it. TLD files should not be placed in <code>/WEB-INF/classes</code>
or <code>/WEB-INF/lib</code>, and must not be placed inside <code>/WEB-INF/tags</code> or a
subdirectory of it, unless named <code>implicit.tld</code> and intended to configure
an implicit tag library with its JSP version and <code>tlib-version</code>.</p>
</div>
<div class="paragraph">
<p>The XML Schema for a TLD document is
<code><a href="http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_1.xsd" class="bare">http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_1.xsd</a></code>.</p>
</div>
<div class="paragraph">
<p>Note that tag files, which collectively form
tag libraries, may or may not have an explicitly defined TLD. In the
case that they do not, the container generates an implicit TLD that can
be referenced using the <code>tagdir</code> attribute of the <code>taglib</code> directive.
More details about identifying this implicit Tag Library Descriptor can
be found in <a href="#tag-files">Chapter 8, <em>Tag Files</em></a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="tld-resource-path"><a class="anchor" href="#tld-resource-path"></a>7.3.2. TLD Resource Path</h4>
<div class="paragraph">
<p>A URI in a <code>taglib</code> directive is mapped into
a context relative path (as discussed in <a href="#relative-url-specifications">Section 1.2.1, &#8220;Relative URL Specifications&#8221;</a>). The
context relative path is a URL without a protocol and host components that
starts with <code>/</code> and is called the TLD resource path.</p>
</div>
<div class="paragraph">
<p>The TLD resource path is interpreted relative
to the root of the web application and should resolve to a TLD file
directly, or to a JAR file that has a TLD file at location
<code>META-INF/taglib.tld</code>. If the TLD resource path is not one of these two
cases, a fatal translation error will occur.</p>
</div>
<div class="paragraph">
<p>The URI describing a tag library is mapped to
a TLD resource path though a taglib map, and a fallback interpretation
that is to be used if the map does not contain the URI. The taglib map
is built from an explicit taglib map in <code>web.xml</code> (described in
<a href="#taglib-map-in-web-xml">Section 7.3.3, &#8220;Taglib Map in web.xml&#8221;</a>) that is
extended with implicit entries deduced from packaged tag libraries in
the web application (described in <a href="#implicit-map-entries-from-tlds">Section 7.3.4, &#8220;Implicit Map Entries from TLDs&#8221;</a>), and
implicit entries known to the
JSP container. The fallback interpretation is targetted to a casual use
of the mechanism, as in the development cycle of the Web Application; in
that case the URI is interpreted as a direct path to the TLD (see
<a href="#computing-the-tld-resource-path">Section 7.3.6.2, &#8220;Computing the TLD Resource Path&#8221;</a>).</p>
</div>
<div class="paragraph">
<p>The following order of precedence applies
(from highest to lowest) when building the taglib map (see the following
sections for details):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the container is Jakarta EE platform
compliant, the Map Entries for the tag libraries that are part of the
Jakarta EE platform. This currently includes the Jakarta Server Pages Standard
Tag Library libraries and the Jakarta Server Faces libraries.</p>
</li>
<li>
<p>Taglib Map in web.xml</p>
</li>
<li>
<p>Implicit Map Entries from TLDs</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>TLDs in JAR files in WEB-INF/lib</p>
</li>
<li>
<p>TLDs under WEB-INF</p>
</li>
</ol>
</div>
</li>
<li>
<p>Implicit Map Entries from the Container</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="taglib-map-in-web-xml"><a class="anchor" href="#taglib-map-in-web-xml"></a>7.3.3. Taglib Map in web.xml</h4>
<div class="paragraph">
<p>The <code>web.xml</code> file can include an explicit
taglib map between URIs and TLD resource paths described using the
<code>taglib</code> elements of the Web Application Deployment descriptor in
<code>WEB-INF/web.xml</code>. See <a href="#taglib-map">Section 3.2, &#8220;Taglib Map&#8221;</a> for more details.</p>
</div>
</div>
<div class="sect3">
<h4 id="implicit-map-entries-from-tlds"><a class="anchor" href="#implicit-map-entries-from-tlds"></a>7.3.4. Implicit Map Entries from TLDs</h4>
<div class="paragraph">
<p>The taglib map described in <code>web.xml</code> is
extended with new entries extracted from TLD files in the Web
Application. The new entries are computed as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The container searches for all files with a
<code>.tld</code> extension under <code>/WEB-INF</code> or a subdirectory, and inside JAR
files that are in <code>/WEB-INF/lib</code>. When examining a JAR file, only
resources under <code>/META-INF</code> or a subdirectory are considered. The order
in which these files are searched for is implementation-specific and
should not be relied on by web applications.</p>
</li>
<li>
<p>Each TLD file is examined. If it has a
<code>&lt;uri&gt;</code> element, then a new <code>&lt;taglib&gt;</code> element is created, with a
<code>&lt;taglib-uri&gt;</code> subelement whose value is that of the <code>&lt;uri&gt;</code> element,
and with a <code>&lt;taglib-location&gt;</code> subelement that refers to the TLD file.</p>
</li>
<li>
<p>If the created <code>&lt;taglib&gt;</code> element has a
different <code>&lt;taglib-uri&gt;</code> to any in the taglib map, it is added.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This mechanism provides an automatic URI to
TLD mapping as well as supporting multiple TLDs within a packaged JAR.
Note that this functionality does not require explicitly naming the
location of the TLD file, which would require a mechanism like the
<code>jar:protocol</code>.</p>
</div>
<div class="paragraph">
<p>Note also that the mechanism does not add
duplicated entries.</p>
</div>
</div>
<div class="sect3">
<h4 id="implicit-map-entries-from-the-container"><a class="anchor" href="#implicit-map-entries-from-the-container"></a>7.3.5. Implicit Map Entries from the Container</h4>
<div class="paragraph">
<p>The Container may also add additional entries
to the taglib map. As in the previous case, the entries are only added
for URIs that are not present in the map. Conceptually the entries
correspond to TLD describing these tag libraries.</p>
</div>
<div class="paragraph">
<p>These implicit map entries correspond to
libraries that are known to the Container, who is responsible for
providing their implementation, either through tag handlers, or via the
mechanism described in <a href="#well-known-uris">Section 7.3.9, &#8220;Well-Known URIs&#8221;</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="determining-the-tld-resource-path"><a class="anchor" href="#determining-the-tld-resource-path"></a>7.3.6. Determining the TLD Resource Path</h4>
<div class="paragraph">
<p>The TLD resource path can be determined from
the <code>uri</code> attribute of a <code>taglib</code> directive as described below. In the
explanation below an absolute URI is one that starts with a protocol and
host, while a relative URI specification is as in section 2.5.2, i.e.
one without the protocol and host part.</p>
</div>
<div class="paragraph">
<p>All steps are described as if they were
taken, but an implementation can use a different implementation strategy
as long as the result is preserved.</p>
</div>
<div class="sect4">
<h5 id="computing-tld-locations"><a class="anchor" href="#computing-tld-locations"></a>7.3.6.1. Computing TLD Locations</h5>
<div class="paragraph">
<p>The taglib map generated in Sections
<a href="#taglib-map-in-web-xml">Section 7.3.3, &#8220;Taglib Map in web.xml&#8221;</a>, <a href="#implicit-map-entries-from-tlds">Section 7.3.4, &#8220;Implicit Map Entries from TLDs&#8221;</a> and
<a href="#implicit-map-entries-from-the-container">Section 7.3.5, &#8220;Implicit Map Entries from the Container&#8221;</a> may contain one or more
<code>&lt;taglib&gt;&lt;/taglib&gt;</code> entries. Each entry is identified by a <code>taglib_uri</code>,
which is the value of the <code>&lt;taglib-uri&gt;</code> subelement. This <code>taglib_uri</code>
may be an absolute URI, or a relative URI spec starting with <code>/</code> or one
not starting with <code>/</code>. Each entry also defines a <code>taglib_location</code> as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code>&lt;taglib-location&gt;</code> subelement is
some relative URI specification that starts with a <code>/</code> the
<code>taglib_location</code> is this URI.</p>
</li>
<li>
<p>If the <code>&lt;taglib-location&gt;</code> subelement is
some relative URI specification that does not start with <code>/</code>, the
<code>taglib_location</code> is the resolution of the URI relative to
<code>/WEB-INF/web.xml</code> (the result of this resolution is a relative URI
specification that starts with <code>/</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="computing-the-tld-resource-path"><a class="anchor" href="#computing-the-tld-resource-path"></a>7.3.6.2. Computing the TLD Resource Path</h5>
<div class="paragraph">
<p>The following describes how to resolve a
<code>taglib</code> directive to compute the TLD resource path. It is based on the
value of the <code>uri</code> attribute of the <code>taglib</code> directive.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>uri</code> is <code>abs_uri</code>, an absolute URI<br></p>
<div class="paragraph">
<p>Look in the taglib map for an entry whose
<code>taglib_uri</code> is <code>abs_uri</code>. If found, the corresponding
<code>taglib_location</code> is the TLD resource path. If not found, a translation
error is raised.</p>
</div>
</li>
<li>
<p>If <code>uri</code> is <code>root_rel_uri</code>, a relative URI
that starts with <code>/</code><br></p>
<div class="paragraph">
<p>Look in the taglib map for an entry whose
<code>taglib_uri</code> is <code>root_rel_uri</code>. If found, the corresponding
<code>taglib_location</code> is the TLD resource path. If no such entry is found,
<code>root_rel_uri</code> is the TLD resource path.</p>
</div>
</li>
<li>
<p>If <code>uri</code> is <code>noroot_rel_uri</code>, a relative
URI that does not start with <code>/</code><br></p>
<div class="paragraph">
<p>Look in the <code>taglib map</code> for an entry whose
<code>taglib_uri</code> is <code>noroot_rel_uri</code>. If found, the corresponding
<code>taglib_location</code> is the TLD resource path. If no such entry is found,
resolve <code>noroot_rel_uri</code> relative to the current JSP page where the
directive appears; that value (by definition, this is a relative URI
specification that starts with <code>/</code>) is the TLD resource path. For
example, if <code>/a/b/c.jsp</code> references<br>
<code>../../WEB-INF/my.tld</code>, then if there is no <code>taglib_location</code> that
matches<br>
<code>../../WEB-INF/my.tld</code>, the TLD resource path would be
<code>/WEB-INF/my.tld</code>.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="usage-considerations"><a class="anchor" href="#usage-considerations"></a>7.3.6.3. Usage Considerations</h5>
<div class="paragraph">
<p>The explicit <code>web.xml</code> map provides a
explicit description of the tag libraries that are being used in a web
application.</p>
</div>
<div class="paragraph">
<p>The implicit map from TLDs means that a JAR
file implementing a tag library can be dropped in and used immediatedly
through its stable URIs.</p>
</div>
<div class="paragraph">
<p>The use of relative URI specifications in the
taglib map enables very short names in the <code>taglib</code> directive. For
example, if the map is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;taglib&gt;
   &lt;taglib-uri&gt;/myPRlibrary&lt;/taglib-uri&gt;
   &lt;taglib-location&gt;/WEB-INF/tlds/PRlibrary_1_4.tld&lt;/taglib-location&gt;
 &lt;/taglib&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>then it can be used as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib uri=&quot;/myPRlibrary&quot; prefix=&quot;x&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the fallback rule allows a <code>taglib</code>
directive to refer directly to the TLD. This arrangement is very
convenient for quick development at the expense of less flexibility and
accountability. For example, in the case above, it enables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib uri=&quot;/WEB-INF/tlds/PRlibrary_1_4.tld&quot; prefix=&quot;x&quot; %&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="translation-time-class-loader"><a class="anchor" href="#translation-time-class-loader"></a>7.3.7. Translation-Time Class Loader</h4>
<div class="paragraph">
<p>The set of classes available at translation
time is the same as that available at runtime: the classes in the
underlying Java platform, those in the JSP container, and those in the
class files in <code>WEB-INF/classes</code>, in the JAR files in <code>WEB-INF/lib</code>,
and, indirectly those indicated through the use of the <code>class-path</code>
attribute in the <code>META-INF/MANIFEST</code> file of these JAR files.</p>
</div>
</div>
<div class="sect3">
<h4 id="assembling-a-web-application"><a class="anchor" href="#assembling-a-web-application"></a>7.3.8. Assembling a Web Application</h4>
<div class="paragraph">
<p>As part of the process of assembling a web
application, the Application Assembler will create a <code>WEB-INF/</code>
directory, with appropriate <code>lib/</code> and <code>classes/</code> subdirectories, place
JSP pages, servlet classes, auxiliary classes, and tag libraries in the
proper places, and create a <code>WEB-INF/web.xml</code> that ties everything
together.</p>
</div>
<div class="paragraph">
<p>Tag libraries that have been delivered in the
standard JAR format can be dropped directly into <code>WEB-INF/lib</code>. This
automatically adds all the TLDs inside the JAR, making their URIs
advertised in their <code>&lt;uri&gt;</code> elements visible to the URI to TLD map. The
assembler may create <code>taglib</code> entries in <code>web.xml</code> for each of the
libraries that are to be used.</p>
</div>
<div class="paragraph">
<p>Part of the assembly (and later the
deployment) may create and/or change information that customizes a tag
library; see <a href="#customizing-a-tag-library">Section 7.5.3, &#8220;Customizing a Tag Library&#8221;</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="well-known-uris"><a class="anchor" href="#well-known-uris"></a>7.3.9. Well-Known URIs</h4>
<div class="paragraph">
<p>A JSP container may “know of” some specific
URIs and may provide alternate implementations for the tag libraries
described by these URIs, but the user must see the behavior as that
described by the required, portable tag library description described by
the URI.</p>
</div>
<div class="paragraph">
<p>A JSP container must always use the mapping
specified for a URI in the <code>web.xml</code> deployment descriptor if present.
If the deployer wants to use the platform-specific implementation of the
well-known URI, the mapping for that URI should be removed at deployment
time.</p>
</div>
</div>
<div class="sect3">
<h4 id="tag-and-tag-library-extension-elements"><a class="anchor" href="#tag-and-tag-library-extension-elements"></a>7.3.10. Tag and Tag Library Extension Elements</h4>
<div class="paragraph">
<p>The JSP 2.0 Tag Library Descriptor supports
the notion of Tag Extension Elements and Tag Library Extension Elements.
These are elements added to the TLD by the tag library developer that
provide additional information about the tag, using a schema defined
outside of the JSP specification.</p>
</div>
<div class="paragraph">
<p>The information contained in these extensions
is intended to be used by tools only, and is not accessible at
compile-time, deployment-time, or run-time. JSP containers must not
alter their behavior based on the content, the presence, or the absence
of a particular Tag or Tag Library Extension Element. In addition, JSP
containers must consider invalid any tag library that specifies
<code>mustUnderstand="true"</code> for any Tag or Tag Library Extension element.
Any attempt to use an invalid tag library must produce a translation
error. This is to preserve application compatibility across containers.</p>
</div>
<div class="paragraph">
<p>The JSP container may use schema to validate
the structure of the Tag Library Descriptor. If it does so, any new
content injected into Tag or Tag Library Extension elements must not be
validated by the JSP Container.</p>
</div>
<div class="paragraph">
<p>Tag Library Extension Elements provide
extension information at the tag library level, and are specified by
adding a <code>&lt;taglib-extension&gt;</code> element as a child of <code>&lt;taglib&gt;</code>. Tag
Extension Elements provide extension information at the tag level, and
are specified by adding a <code>&lt;tag-extension&gt;</code> element as a child of
<code>&lt;tag&gt;</code>. To use these elements, an XML namespace must first be defined
and the namespace must be imported into the TLD.</p>
</div>
<div class="sect4">
<h5 id="example-2"><a class="anchor" href="#example-2"></a>7.3.10.1. Example</h5>
<div class="paragraph">
<p>In the following non-normative example, a
fictitious company called ACME has decided to enhance the page author’s
experience by defining a set of Tag and Tag Library Extension elements
that cause sounds to be played when inserting tags in a document.</p>
</div>
<div class="paragraph">
<p>In this hypothetical example, ACME has
published an XML Schema at <code><a href="http://www.acme.com/acme.xsd" class="bare">http://www.acme.com/acme.xsd</a></code> that defines
the extensions, and has provided plug-ins for various JSP-capable IDEs
to recognize these extension elements.</p>
</div>
<div class="paragraph">
<p>The following example tag library uses ACME’s
extensions to provide helpful voice annotations that describe how to use
each tag in the tag library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;taglib xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xmlns:acme=&quot;http://acme.com/&quot;
        xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
            http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_1.xsd
            http://acme.com/ http://acme.com/acme.xsd&quot;
        version=&quot;2.1&quot;&gt;
  &lt;description&gt;
    Simple Math Tag Library.
    Contains ACME sound extensions with helpful voice annotations
    that describe how to use the tags in this library.
  &lt;/description&gt;
  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;
  &lt;short-name&gt;math&lt;/short-name&gt;
  &lt;tag&gt;
    &lt;description&gt;Adds two numbers&lt;/description&gt;
    &lt;display-name&gt;add&lt;/display-name&gt;
    &lt;name&gt;add&lt;/name&gt;
    &lt;tag-class&gt;com.foobar.tags.AddTag&lt;/tag-class&gt;
    &lt;body-content&gt;empty&lt;/body-content&gt;
    &lt;attribute&gt;
      &lt;name&gt;x&lt;/name&gt;
      &lt;type&gt;java.lang.Double&lt;/type&gt;
    &lt;/attribute&gt;
    &lt;attribute&gt;
    &lt;name&gt;y&lt;/name&gt;
     &lt;type&gt;java.lang.Double&lt;/type&gt;
    &lt;/attribute&gt;
    &lt;tag-extension namespace=&quot;http://acme.com/&quot;&gt;
      &lt;!-- Extensions for tag sounds --&gt;
      &lt;extension-element xsi:type=&quot;acme:acme-soundsType&quot;&gt;
        &lt;acme:version&gt;1.5&lt;/acme:version&gt;
        &lt;!-- Sound played for help on the add tag --&gt;
        &lt;acme:tag-sound&gt;sounds/add.au&lt;/acme:tag-sound&gt;
        &lt;!-- Sound played for help on the x attribute --&gt;
        &lt;acme:attribute-sound name=&quot;x&quot;&gt;
          sounds/add-x.au
        &lt;/acme:attribute-sound&gt;
        &lt;!-- Sound that’s played for help on the yattribute --&gt;
        &lt;acme:attribute-sound name=&quot;y&quot;&gt;
          sounds/add-y.au
        &lt;/acme:attribute-sound&gt;
      &lt;/extension-element&gt;
    &lt;/tag-extension&gt;
  &lt;/tag&gt;
  &lt;taglib-extension namespace=&quot;http://acme.com/&quot;&gt;
    &lt;!-- Extensions for taglibrary sounds--&gt;
    &lt;extension-element xsi:type=&quot;acme:acme-soundsType&quot;&gt;
      &lt;acme:version&gt;1.5&lt;/acme:version&gt;
      &lt;!-- Sound played when author imports this taglib --&gt;
      &lt;acme:import-sound&gt;sounds/intro.au&lt;/acme:import-sound&gt;
    &lt;/extension-element&gt;
  &lt;/taglib-extension&gt;
&lt;/taglib&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The corresponding <code>acme.xsd</code> file would look something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xsd">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xsd:schema targetNamespace=&quot;http://acme.com/&quot;
            xmlns:j2ee=&quot;http://java.sun.com/xml/ns/j2ee&quot;
            xmlns:acme=&quot;http://acme.com/&quot;
            xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;
            xmlns:xml=&quot;http://www.w3.org/XML/1998/namespace&quot;
            elementFormDefault=&quot;qualified&quot;
            attributeFormDefault=&quot;unqualified&quot;
            version=&quot;1.0&quot;&gt;
  &lt;xsd:annotation&gt;
    &lt;xsd:documentation&gt;
      This an XML Schema for sample Acme taglib extensibility
       elements, used to test TLD extensibility.
    &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;

  &lt;!-- **************************************************** --&gt;

  &lt;xsd:import namespace=&quot;http://java.sun.com/xml/ns/j2ee&quot;
              schemaLocation=&quot;../web-jsptaglibrary_2_0.xsd&quot; /&gt;

  &lt;!-- **************************************************** --&gt;

  &lt;xsd:complexType name=&quot;acme-soundsType&quot;&gt;
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
        Extension for sounds associated with a tag
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
    &lt;xsd:complexContent&gt;
      &lt;xsd:extension base=&quot;j2ee:extensibleType&quot;&gt;
        &lt;xsd:sequence&gt;
          &lt;xsd:element name=&quot;version&quot; type=&quot;xsd:string&quot;/&gt;
          &lt;xsd:element name=&quot;tag-sound&quot; type=&quot;xsd:string&quot;
                       minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
          &lt;xsd:element name=&quot;attribute-sound&quot;
                       minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;&gt;
            &lt;xsd:complexType&gt;
              &lt;xsd:simpleContent&gt;
                &lt;xsd:extension base=&quot;xsd:string&quot;&gt;
                  &lt;xsd:attribute name=&quot;name&quot; use=&quot;required&quot; type=&quot;xsd:string&quot; /&gt;
                &lt;/xsd:extension&gt;
              &lt;/xsd:simpleContent&gt;
            &lt;/xsd:complexType&gt;
          &lt;/xsd:element&gt;
          &lt;xsd:element name=&quot;import-sound&quot; type=&quot;xsd:string&quot;
                       minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
        &lt;/xsd:sequence&gt;
      &lt;/xsd:extension&gt;
    &lt;/xsd:complexContent&gt;
  &lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validation"><a class="anchor" href="#validation"></a>7.4. Validation</h3>
<div class="paragraph">
<p>There are a number of reasons why the
structure of a JSP page should conform to some validation rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Request-time semantics; e.g. a subelement
may require the information from some enclosing element at request-time.</p>
</li>
<li>
<p>Authoring-tool support; e.g. a tool may
require an ordering in the actions.</p>
</li>
<li>
<p>Methodological constraints; e.g. a
development group may want to constrain the way some features are used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Validation can be done either at
translation-time or at request-time. In general translation-time
validation provides a better user experience, and the JSP 4.1
specification provides a very flexible translation-time validation
mechanism.</p>
</div>
<div class="sect3">
<h4 id="translation-time-mechanisms"><a class="anchor" href="#translation-time-mechanisms"></a>7.4.1. Translation-Time Mechanisms</h4>
<div class="paragraph">
<p>Some translation-time validation is
represented in the Tag Library Descriptor. In some cases a
<code>TagExtraInfo</code> class needs to be provided to supplement this
information.</p>
</div>
<div class="sect4">
<h5 id="attribute-information"><a class="anchor" href="#attribute-information"></a>7.4.1.1. Attribute Information</h5>
<div class="paragraph">
<p>The Tag Library Descriptor contains the basic
syntactic information. In particular, the attributes are described
including their name, whether they are optional or mandatory, and
whether they accept request-time expressions. Additionally the
<code>body-content</code> element can be used to indicate that an action must be
empty.</p>
</div>
<div class="paragraph">
<p>All constraints described in the TLD must be
enforced. A tag library author can assume that the tag handler instance
corresponds to an action that satisfies all constraints indicated in the
TLD.</p>
</div>
</div>
<div class="sect4">
<h5 id="validator-classes"><a class="anchor" href="#validator-classes"></a>7.4.1.2. Validator Classes</h5>
<div class="paragraph">
<p>A <code>TagLibraryValidator</code> class may be listed
in the TLD for a tag library to request that a JSP page be validated.
The XML view of a JSP page is exposed through a <code>PageData</code> class, and
the validator class can do any checks the tag library author may have
found appropriate.</p>
</div>
<div class="paragraph">
<p>The JSP container must uniquely identify all
XML elements in the XML view of a JSP page through a <code>jsp:id</code> attribute.
This attribute can be used to provide better information on the location
of an error.</p>
</div>
<div class="paragraph">
<p>A <code>TagLibraryValidator</code> can be passed some
initialization parameters in the TLD. This eases the reuse of validator
classes. We expect that validator classes will be written based on
different XML schema mechanisms (DTDs, XSchema, Relaxx, others).
Standard validator classes may be incorporated into a later version of
the JSP specification if a clear schema standard appears at some point.</p>
</div>
</div>
<div class="sect4">
<h5 id="tagextrainfo-class-validation"><a class="anchor" href="#tagextrainfo-class-validation"></a>7.4.1.3. TagExtraInfo Class Validation</h5>
<div class="paragraph">
<p>Additional translation-time validation can be
done using the <code>validate</code> method in the <code>TagExtraInfo</code> class. The
<code>validate</code> method is invoked at translation-time and is passed a
<code>TagData</code> instance as its argument. As of JSP 2.0, the default behavior
of <code>validate</code> is to call the <code>isValid</code> method.</p>
</div>
<div class="paragraph">
<p>The <code>isValid</code> mechanism was the original
validation mechanism introduced in JSP 1.1 with the rest of the Tag
Extension machinery. Tag libraries that are designed to run in JSP 1.2
containers or higher should use the validator class mechanism. Tag
libraries that are designed to run in JSP 2.0 containers or higher that
wish to use the <code>TagExtraInfo</code> validation mechanism are encouraged to
implement the <code>validate</code> method in favor of the <code>isValid</code> method due to
the ability to provide better validation messages. Either method will
work, though implementing both is not recommended.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="request-time-errors"><a class="anchor" href="#request-time-errors"></a>7.4.2. Request-Time Errors</h4>
<div class="paragraph">
<p>In some cases, additional request-time
validation will be done dynamically within the methods in the tag
handler. If an error is discovered, an instance of <code>JspException</code> can be
thrown. If uncaught, this object will invoke the errorpage mechanism of
the JSP specification.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="conventions-and-other-issues"><a class="anchor" href="#conventions-and-other-issues"></a>7.5. Conventions and Other Issues</h3>
<div class="paragraph">
<p>This section is not normative, although it
reflects good design practices.</p>
</div>
<div class="sect3">
<h4 id="how-to-define-new-implicit-objects"><a class="anchor" href="#how-to-define-new-implicit-objects"></a>7.5.1. How to Define New Implicit Objects</h4>
<div class="paragraph">
<p>We advocate the following style for the
introduction of implicit objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define a tag library.</p>
</li>
<li>
<p>Add an action called <code>defineObjects</code> to
define the desired objects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The JSP page can make these objects available
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib prefix=&quot;me&quot; uri=&quot;...&quot; %&gt;
 &lt;me:defineObjects /&gt;
 ... start using the objects...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach has the advantage of requiring
no new machinery and of making very explicit the dependency.</p>
</div>
<div class="paragraph">
<p>In some cases there may be an implementation
dependency in making these objects available. For example, they may be
providing access to some functionality that exists only in a particular
implementation. This can be done by having the tag extension class test
at run-time for the existence of some implementation dependent feature
and raise a run-time error (this, of course, makes the page not Jakarta EE
compliant).</p>
</div>
<div class="paragraph">
<p>This mechanism, together with the access to
metadata information allows for vendors to innovate within the standard.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a feature is added to a JSP specification, and a vendor also provides
that feature through its vendor-specific mechanism, the standard mechanism, as
indicated in the JSP specification will “win”. This means that vendor-specific
mechanisms can slowly migrate into the specification as they prove their
usefulness.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="access-to-vendor-specific-information"><a class="anchor" href="#access-to-vendor-specific-information"></a>7.5.2. Access to Vendor-Specific information</h4>
<div class="paragraph">
<p>If a vendor wants to associate some
information that is not described in the current version of the TLD with
some tag library, it can do so by inserting the information in a
document it controls, inserting the document in the <code>WEB-INF</code> portion of
the Web Application where the Tag Library resides, and using the
standard Servlet 6.2 mechanisms to access that information.</p>
</div>
</div>
<div class="sect3">
<h4 id="customizing-a-tag-library"><a class="anchor" href="#customizing-a-tag-library"></a>7.5.3. Customizing a Tag Library</h4>
<div class="paragraph">
<p>A tag library can be customized at assembly
and deployment time. For example, a tag library that provides access to
databases may be customized with login and password information.</p>
</div>
<div class="paragraph">
<p>There is no convenient place in <code>web.xml</code> in
the Servlet 6.2 spec for customization information. A standardized
mechanism is probably going to be part of a forthcoming JSP
specification, but in the meantime the suggestion is that a tag library
author place this information in a well-known location at some resource
in the <code>WEB-INF/</code> portion of the Web Application and access it via
the <code>getResource</code> call on the <code>ServletContext</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tag-files"><a class="anchor" href="#tag-files"></a>8. Tag Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the details of tag
files, a JSP 2.0 onwards facility that allows page authors to author tag
extensions using only JSP syntax. In the past, the ability to
encapsulate presentation logic into reusable, full-featured tag
libraries was only available to developers that had a reasonable amount
of Java experience. Tag files bring the power of reuse to the basic page
author, who are not required to know Java. When used together with JSP
Fragments and Simple Tag Handlers, these concepts have the ability to
simplify JSP development substantially, even for developers who do know
Java.</p>
</div>
<div class="sect2">
<h3 id="overview-2"><a class="anchor" href="#overview-2"></a>8.1. Overview</h3>
<div class="paragraph">
<p>As of JSP version 2.0, the JSP Compiler is
required to recognize tag files. A tag file is a source file that
provides a way for a page author to abstract a segment of JSP code and
make it reusable via a custom action.</p>
</div>
<div class="paragraph">
<p>Tag files allow a JSP page author to create
tag libraries using JSP syntax. This means that page authors no longer
need to know Java or ask someone who knows Java to write a tag
extension. Even for page authors or tag library developers who know
Java, writing tag files is more convenient when developing tags that
primarily output template text.</p>
</div>
<div class="paragraph">
<p>The required file extension for a tag file
are <code>.tag</code> or <code>.tagx.</code> As is the case with JSP files, the actual tag may
be composed of a top file that includes other files that contain either
a complete tag or a segment of a tag file. Just as the recommended
extension for a segment of a JSP file is <code>.jspf</code>, the recommended
extension for a segment of a tag file is <code>.tagf</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-of-tag-files"><a class="anchor" href="#syntax-of-tag-files"></a>8.2. Syntax of Tag Files</h3>
<div class="paragraph">
<p>The syntax of a tag file is similar to that
of a JSP page, with the following exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Directives - Some directives are not
available or have limited availability, and some tag file specific
directives are available. See <a href="#tag-file-directives">Section 8.5, &#8220;Tag File Directives&#8221;</a> for a discussion
on tag file directives.</p>
</li>
<li>
<p>The <code>&lt;jsp:invoke&gt;</code> and <code>&lt;jsp:doBody&gt;</code>
standard actions can only be used in Tag Files.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The EBNF grammar in <a href="#jsp-syntax-grammar">Section 1.3.10, &#8220;JSP Syntax Grammar&#8221;</a> describes the syntax of tag
files. The root production for a tag files is <code>JSPTagDef</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="#tag-files-in-xml-syntax">Section 8.6, &#8220;Tag Files in XML Syntax&#8221;</a> for details on tag files in XML syntax.</p>
</div>
</div>
<div class="sect2">
<h3 id="semantics-of-tag-files"><a class="anchor" href="#semantics-of-tag-files"></a>8.3. Semantics of Tag Files</h3>
<div class="paragraph">
<p>For each tag file in the web application, a
tag handler is made available to JSP pages and other tag files. The
specifics of how this is done are left up to the Container
implementation. For example, some Containers may choose to compile tag
files into Java tag handlers, whereas others may decide to interpret the
tag handlers.</p>
</div>
<div class="paragraph">
<p>However the Container chooses to prepare the
tag handler, the following conditions must hold true for all tag
handlers defined as tag files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The tag file implementation must keep a
copy of the <code>JspContext</code> instance passed to it by the invoking page
via the <code>setJspContext</code> method. This is called the <em>Invoking JSP Context</em>.</p>
</li>
<li>
<p>The tag file implementation must create and
maintain a second instance of <code>JspContext</code> called a <em>JSP Context Wrapper</em>.
If the Invoking JSP Context is an instance of <code>PageContext</code>,
the JSP Context Wrapper must also be an instance of <code>PageContext</code>. This
wrapper must be returned when <code>getJspContext()</code> is called.</p>
</li>
<li>
<p>For each invocation to the tag, the JSP
Context Wrapper must present a clean page scope containing no initial
elements. All scopes other than the page scope must be identical to
those in the Invoking JSP Context and must be modified accordingly when
updates are made to those scopes in the JSP Context Wrapper. Any
modifications to the page scope, however, must not affect the Invoking
JSP Context.</p>
</li>
<li>
<p>For each attribute declared and specified,
a page-scoped variable must be created in the page scope of the JSP
Context Wrapper, unless the attribute is a deferred value or a deferred
method, in which case the VariableMapper obtained from the ELContext in
the current pageContext is used to map the deferred expression to the
attribute name. The name of the variable must be the same as the
declared attribute name. The value of the variable must be the value of
the attribute passed in during invocation. For each attribute declared
as optional and not specified, no variable is created. If the tag
accepts dynamic attributes, then the names and values of those dynamic
attributes must be exposed to the tag file as specified in
<a href="#_Details_of_tag_directive_attribute"><strong>Table JSP.8-2</strong> , &#8220;Details of <code>tag</code> directive attributes&#8221;</a>.<br></p>
<div class="paragraph">
<p>If the attribute is a deferred-value, it is directly mapped. If the
attribute is a deferred-method, it is wrapped in a <code>ValueExpression</code>,
and the resulting <code>ValueExpression</code> is mapped.<br></p>
</div>
<div class="paragraph">
<p>There are two implications here. They are best illustrated by examples.
Suppose we have a tag file tagf.tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%@ attribute name="attr1" deferredValue="true"/&gt;
&lt;%@ attribute name="attr2" deferredMethod="true"/&gt;
&lt;c:out value="${attr1.bar}"/&gt;
&lt;h:commandButton value="#{attr1.foo}" action="#{attr2}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>used in test.jsp:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%@ taglib prefix="my" tagdir="/WEB-INF/tags"%&gt;
&lt;my:tagf attr1="#{someExpr}" attr2="#{someMethod}"/&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>First, in <code>tagf.tag</code>, <code>${attr1.bar}</code> will cause the immediate
evaluation of the deferred expression. Secondly, since the
<code>VariableMapper</code> is used to resolve variables at EL parse time, a
deferred expression such as <code>#{attr1.foo}</code> is not dependent on <code>attr1</code>
anymore, so that it can be evaluated long after the end of life of the
tag file&#8217;s pageContext. This is very useful for Jakarta Server Faces
applications.<br></p>
</div>
<div class="paragraph">
<p>Since the EL syntax does not allow for invocation of the method in a
<code>MethodExpression</code>, the only allowable use of <code>attr2</code> is to pass it to
another tag that has a deferred-method attribute, in the form of
&#8220;#{attr2}&#8221;.</p>
</div>
</li>
<li>
<p>For all intents and purposes other than for
synchronizing the <code>AT_BEGIN</code>, <code>NESTED</code>, and <code>AT_END</code> scripting
variables, the effective <code>JspContext</code> for the tag file is the JSP
Context Wrapper. For example, the <code>jspContext</code> scripting variable must
point to the JSP Context Wrapper instead of the invoking JSP Context.</p>
</li>
<li>
<p>The tag handler must behave as though a tag
library descriptor entry was defined for it, in accordance with the
<code>tag</code>, <code>attribute</code>, and <code>variable</code> directives that appear in the tag
file translation unit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is legal for a tag file to forward to a
page via the <code>&lt;jsp:forward&gt;</code> standard action. Just as for JSP pages, the
forward is handled through the request dispatcher. Upon return from the
<code>RequestDispatcher.forward</code> method, the generated tag handler must stop
processing of the tag file and throw
<code>jakarta.servlet.jsp.SkipPageException</code>. Similarly, if a tag file invokes
a Classic Tag Handler which returns <code>SKIP_PAGE</code> from the <code>doEndTag</code>
method, or if it invokes a Simple Tag Handler which throws
<code>SkipPageException</code> in the <code>doTag</code> method, the generated tag handler
must terminate and <code>SkipPageException</code> must be thrown. In either of
these two cases, the <code>doCatch</code> and <code>doFinally</code> methods must be called on
enclosing tags that implement the <code>TryCatchFinally</code> interface before
returning. The <code>doEndTag</code> methods of enclosing classic tags must not be
called.</p>
</div>
<div class="paragraph">
<p>Care should be taken when invoking a classic
tag handler from a tag file. In general, SimpleTag Extensions can be
used in environments other than servlet environments. However, because
the <code>Tag</code> interface relies on <code>PageContext</code>, which in turn assumes a
servlet environment, using classic tag handlers indirectly binds the use
of the tag file to servlet environments. Nonetheless, the JSP container
must allow such an invocation to occur. When a tag file attempts to
invoke a classic tag handler (i.e. one that implements the <code>Tag</code>
interface), it must cast the <code>JspContext</code> passed to the <code>SimpleTag</code> into
a <code>PageContext</code>. In the event that the class cast fails, the invocation
of the classic tag fails, and a <code>JspException</code> must be thrown.</p>
</div>
<div class="paragraph">
<p>If a tag file in XML syntax contains a
jsp:root element, the value of that element’s version attribute must
match the tag file’s JSP version. See <a href="#packaging-in-a-jar">Section 8.4.2, &#8220;Packaging in a JAR&#8221;</a>, and
<a href="#packaging-directly-in-a-web-application">Section 8.4.3, &#8220;Packaging Directly in a Web Application&#8221;</a>, for how the JSP version
of a tag file is determined.</p>
</div>
</div>
<div class="sect2">
<h3 id="packaging-tag-files"><a class="anchor" href="#packaging-tag-files"></a>8.4. Packaging Tag Files</h3>
<div class="paragraph">
<p>One of the goals of tag files as a technology
is to make it as easy to write a tag handler as it is to write a JSP.
Traditionally, writing tag handlers has been a tedious task, with a lot
of time spent compiling and packaging the tag handlers and writing a TLD
to provide information to tools and page authors about the custom
actions. The rules for packaging tag files are designed to make it very
simple and fast to write simple tags, while still providing as much
power and flexibility as classic tag handlers have.</p>
</div>
<div class="sect3">
<h4 id="location-of-tag-files"><a class="anchor" href="#location-of-tag-files"></a>8.4.1. Location of Tag Files</h4>
<div class="paragraph">
<p>Tag extensions written in JSP using tag files
can be placed in one of two locations. The first possibility is in the
<code>/META-INF/tags/</code> directory (or a subdirectory of <code>/META-INF/tags/</code>) in
a <code>JAR</code> file installed in the <code>/WEB-INF/lib/</code> directory of the web
application. Tags placed here are typically part of a reusable library
of tags that can be easily dropped into any web application.</p>
</div>
<div class="paragraph">
<p>The second possibility is in the
<code>/WEB-INF/tags/</code> directory (or a subdirectory of <code>/WEB-INF/tags/</code>) of
the web application. Tags placed here are within easy reach and require
little packaging. Only files with a <code>.tag</code> or <code>.tagx</code> extension are
recognized by the container to be tag files.</p>
</div>
<div class="paragraph">
<p>Tag files that appear in any other location
are not considered tag extensions and must be ignored by the JSP
container. For example, a tag file that appears in the root of a web
application would be treated as content to be served.</p>
</div>
</div>
<div class="sect3">
<h4 id="packaging-in-a-jar"><a class="anchor" href="#packaging-in-a-jar"></a>8.4.2. Packaging in a JAR</h4>
<div class="paragraph">
<p>To be accessible, tag files bundled in a
<code>JAR</code> require a Tag Library Descriptor. Tag files that appear in a JAR
but are not defined in a TLD must be ignored by the JSP container.</p>
</div>
<div class="paragraph">
<p>JSP 2.0 added an additional TLD element to
describe tags within a tag library, namely <code>&lt;tag-file&gt;</code>. The
<code>&lt;tag-file&gt;</code> element requires <code>&lt;name&gt;</code> and <code>&lt;path&gt;</code> subelements, which
define the tag name and the full path of the tag file from the root of
the JAR, respectively. In a JAR file, the <code>&lt;path&gt;</code> element must always
begin with <code>/META-INF/tags</code>. The values for the other subelements of
<code>&lt;tag-file&gt;</code> override the defaults specified in the tag directive. Tag
files packaged in a JAR inherit the JSP version of the TLD that
references them.</p>
</div>
<div class="paragraph">
<p>Note that it is possible to combine both
classic tag handlers and tag handlers implemented using tag files in the
same tag library by combining the use of <code>&lt;tag&gt;</code> and <code>&lt;tag-file&gt;</code>
elements under the <code>&lt;taglib&gt;</code> element. This means that in most instances
the client is unaware of how the tag extension was implemented. Given
that <code>&lt;tag&gt;</code> and <code>&lt;tag-file&gt;</code> share a namespace, a tag library is
considered invalid and must be rejected by the container if a
<code>&lt;tag-file&gt;</code> element has a <code>&lt;name&gt;</code> subelement with the same content as
a <code>&lt;name&gt;</code> subelement in a <code>&lt;tag&gt;</code> element. Any attempt to use an
invalid tag library must trigger a translation error.</p>
</div>
</div>
<div class="sect3">
<h4 id="packaging-directly-in-a-web-application"><a class="anchor" href="#packaging-directly-in-a-web-application"></a>8.4.3. Packaging Directly in a Web Application</h4>
<div class="paragraph">
<p>Tag files placed in the <code>/WEB-INF/tags/</code>
directory of the web application, or a subdirectory, are made easily
accessible to JSPs without the need to explicitly write a Tag Library
Descriptor. This makes it convenient for page authors to quickly
abstract reusable JSP code by simply creating a new file and placing the
code inside of it.</p>
</div>
<div class="paragraph">
<p>The JSP container must interpret the
<code>/WEB-INF/tags/</code> directory and each subdirectory under it, as another
implicitly defined tag library containing tag handlers defined by the
tag files that appear in that directory. There are no special
relationships between subdirectories - they are allowed simply for
organizational purposes. For example, the following web application
contains three tag libraries:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/WEB-INF/tags/
/WEB-INF/tags/a.tag
/WEB-INF/tags/b.tag
/WEB-INF/tags/foo/
/WEB-INF/tags/foo/c.tagx
/WEB-INF/tags/bar/baz/
/WEB-INF/tags/bar/baz/d.tag</pre>
</div>
</div>
<div class="paragraph">
<p>The JSP container must generate an implicit
tag library for each directory under and including <code>/WEB-INF/tags/</code>.
This tag library can be imported only via the <code>tagdir</code> attribute of the
<code>taglib</code> directive (see <a href="#the-taglib-directive">Section 1.10.2, &#8220;The <code>taglib</code> Directive&#8221;</a>), and has the following
hard-wired values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;tlib-version&gt;</code> for the tag library
defaults to 1.0</p>
</li>
<li>
<p><code>&lt;short-name&gt;</code> is derived from the
directory name. If the directory is <code>/WEB-INF/tags/</code>, the short name is
simply <code>tags</code>. Otherwise, the full directory path (relative to the web
application) is taken, minus the <code>/WEB-INF/tags/</code> prefix. Then, all <code>/</code>
characters are replaced with <code>-</code>, which yields the short name. Note
that short names are not guaranteed to be unique (as in <code>/WEB-INF/tags/</code>
versus <code>/WEB-INF/tags/tags/</code> or <code>/WEB-INF/tags/a-b/</code> versus
<code>/WEB-INF/tags/a/b/</code>)</p>
</li>
<li>
<p>A <code>&lt;tag-file&gt;</code> element is considered to
exist for each tag file in this directory, with the following
sub-elements:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>&lt;name&gt;</code> for each is the filename of
the tag file, without the <code>.tag</code> or <code>.tagx</code> extension.</p>
</li>
<li>
<p>The <code>&lt;path&gt;</code> for each is the path of the
tag file, relative to the root of the web application.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the above example, the implicit Tag
Library Descriptor for the <code>/WEB-INF/tags/bar/baz/</code> directory would be:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;taglib&gt;
  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;
  &lt;short-name&gt;bar-baz&lt;/short-name&gt;
  &lt;tag-file&gt;
    &lt;name&gt;d&lt;/name&gt;
    &lt;path&gt;/WEB-INF/tags/bar/baz/d.tag&lt;/path&gt;
  &lt;/tag-file&gt;
&lt;/taglib&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The JSP version of an implicit tag library
defaults to 2.0.</p>
</div>
<div class="paragraph">
<p>The JSP version and tlib-version of an
implicit tag library may be configured by placing a TLD with the
reserved name implicit.tld in the same directory as the implicit tag
library’s constituent tag files. A JSP 2.1 onwards container must consider only
the JSP version and tlib-version specified by an implicit.tld file, and
ignore its short-name element. Any additional elements in an
implicit.tld file must cause a translation error. The JSP version
specified in an implicit.tld file must be equal to or greater than 2.0,
or else a translation error must be reported.</p>
</div>
<div class="paragraph">
<p>Upon deployment, the JSP container must
search for and process all tag files appearing in these directories and
subdirectories. In processing a tag file, the container makes the custom
actions defined in these tags available to JSP files.</p>
</div>
<div class="paragraph">
<p>If a directory contains two files with the
same tag name (e.g. <code>a.tag</code> and <code>a.tagx</code>), it is considered to be the
same as having a TLD file with two <code>&lt;tag&gt;</code> elements whose <code>&lt;name&gt;</code>
sub-elements are identical. The tag library is therefore considered
invalid.</p>
</div>
<div class="paragraph">
<p>Despite the existence of an implicit tag
library, a Tag Library Descriptor in the web application can still
create additional tags from the same tag files. This is accomplished by
adding a <code>&lt;tag-file&gt;</code> element with a <code>&lt;path&gt;</code> that points to the tag
file. In this case, the value of <code>&lt;path&gt;</code> must start with
<code>/WEB-INF/tags</code>. It a tag file is referenced by both a TLD as well as
an implicit TLD, the JSP versions of the TLD and implicit TLD do not
need to match.</p>
</div>
</div>
<div class="sect3">
<h4 id="packaging-as-precompiled-tag-handlers"><a class="anchor" href="#packaging-as-precompiled-tag-handlers"></a>8.4.4. Packaging as Precompiled Tag Handlers</h4>
<div class="paragraph">
<p>Tag files can also be compiled into Java
classes and bundled as a tag library. This is useful for the situation
where a tag library developer wishes to distribute a binary version of
the tag library without the original source. Tag library developers that
choose this form of packaging must use a tool that produces portable JSP
code that uses only standard APIs. Containers are not required to
provide such a tool.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tag-file-directives"><a class="anchor" href="#tag-file-directives"></a>8.5. Tag File Directives</h3>
<div class="paragraph">
<p>This section describes the directives
available within tag files, which define Simple Tag Handlers.
<a href="#_Directives_available_to_tag_files"><strong>Table JSP.8-1</strong> , &#8220;Directives available to tag files&#8221;</a>
outlines which directives are available in tag files:</p>
</div>
<table id="_Directives_available_to_tag_files" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.8-1</strong> Directives available to tag files</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directive</th>
<th class="tableblock halign-left valign-top">Available?</th>
<th class="tableblock halign-left valign-top">Interpretation/Restrictions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A tag file is not a <code>page</code>. The <code>tag</code>
directive must be used instead. If this directive is used in a tag file,
a translation error must result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taglib</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identical to JSP pages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>include</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identical to JSP pages. Note that if the
included file contains syntax unsuitable for tag files, a translation
error must occur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only applicable to tag files. An attempt to
use this directive in JSP pages will result in a translation error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only applicable to tag files. An attempt to
use this directive in JSP pages will result in a translation error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only applicable to tag files. An attempt to
use this directive in JSP pages will result in a translation error.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="the-tag-directive"><a class="anchor" href="#the-tag-directive"></a>8.5.1. The tag Directive</h4>
<div class="paragraph">
<p>The <code>tag</code> directive is similar to the <code>page</code>
directive, but applies to tag files instead of JSPs. Like the <code>page</code>
directive, a translation unit can contain more than one instance of the
<code>tag</code> directive, all the attributes will apply to the complete
translation unit (i.e. <code>tag</code> directives are position independent). There
shall be only one occurrence of any attribute/value defined by this
directive in a given translation unit, unless the values for the
duplicate attributes are identical for all occurrences. The <code>import</code> and
<code>pageEncoding</code> attributes are exempt from this rule and can appear
multiple times. Multiple uses of the <code>import</code> attribute are cumulative
(with ordered set union semantics). Other such multiple attribute/value
(re)definitions result in a fatal translation error if the values do not
match.</p>
</div>
<div class="paragraph">
<p>The attribute/value namespace is reserved for
use by this, and subsequent, JSP specifications.</p>
</div>
<div class="paragraph">
<p>Unrecognized attributes or values result in
fatal translation errors.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ tag display-name=&quot;Addition&quot;
         body-content=&quot;scriptless&quot;
         dynamic-attributes=&quot;dyn&quot;
         small-icon=&quot;/WEB-INF/sample-small.jpg&quot;
         large-icon=&quot;/WEB-INF/sample-large.jpg&quot;
         description=&quot;Sample usage of tag directive&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%@ tag tag_directive_attr_list %&gt;

tag_directive_attr_list ::= { display-name=&quot;display-name&quot;                  }
                            { body-content=&quot;scriptless|tagdependent|empty&quot; }
                            { dynamic-attributes=&quot;name&quot;                    }
                            { small-icon=&quot;small-icon&quot;                      }
                            { large-icon=&quot;large-icon&quot;                      }
                            { description=&quot;description&quot;                    }
                            { example=&quot;example&quot;                            }
                            { language=&quot;scriptingLanguage&quot;                 }
                            { import=&quot;importList&quot;                          }
                            { pageEncoding=&quot;peinfo&quot;                        }
                            { isELIgnored=&quot;true|false&quot;                     }
                            { errorOnELNotFound=&quot;true|false&quot;               }
                            { deferredSyntaxAllowedAsLiteral=&quot;true|false&quot;  }
                            { trimDirectiveWhitespaces=&quot;true|false&quot;        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The details of the attributes are as follows:</p>
</div>
<table id="_Details_of_tag_directive_attribute" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.8-2</strong> Details of <code>tag</code> directive attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>display-name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) A short name that is intended to
be displayed by tools. Defaults to the name of the tag file, without the
<code>.tag</code> extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>body-content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Provides information on the
content of the body of this tag. Can be either <code>empty</code>, <code>tagdependent</code>
, or <code>scriptless</code>. A translation error will result if <code>JSP</code> or any
other value is used. Defaults to <code>scriptless</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dynamic-attributes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The presence of this attribute
indicates this tag supports additional attributes with dynamic names. If
present, the generated tag handler must implement the
<code>jakarta.servlet.jsp.tagext.DynamicAttributes</code> interface, and the
container must treat the tag as if its corresponding TLD entry contained
<code>&lt;dynamic-attributes&gt;true&lt;/dynamic-attributes&gt;</code>. The implementation
must not reject any attribute names. The value identifies a page scoped
attribute in which to place a <code>Map</code> containing the names and values of
the dynamic attributes passed during this invocation. The <code>Map</code> must
contain each dynamic attribute name as the key and the dynamic attribute
value as the corresponding value. Only dynamic attributes with no <code>uri</code>
are to be present in the <code>Map</code> ; all other dynamic attributes are
ignored. A translation error will result if there is a tag directive
with a <code>dynamic-attributes</code> attribute equal to the value of a
<code>name-given</code> attribute of a <code>variable</code> directive or equal to the value
of a <code>name</code> attribute of an <code>attribute</code> directive in this translation
unit.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>small-icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Either a context-relative path, or
a path relative to the tag source file, of an image file containing a
small icon that can be used by tools. Defaults to no small icon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>large-icon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Either a context-relative path, or
a path relative to the tag source file, of an image file containing a
large icon that can be used by tools. Defaults to no large icon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Defines an arbitrary string that
describes this tag. Defaults to no description.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Defines an arbitrary string that
presents an informal description of an example of a use of this action.
Defaults to no example.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>language</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the language attribute of the page directive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the import attribute of the page directive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pageEncoding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the <code>pageEncoding</code> attribute in the <code>page</code> directive.
However, there is no corresponding global configuration element in
<code>web.xml</code>. The <code>pageEncoding</code> attribute cannot be used in tag files in
XML syntax.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isELIgnored</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the <code>isELIgnored</code> attribute of the <code>page</code> directive.
However, there is no corresponding global configuration element in
<code>web.xml</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>errorOnELNotFound</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the <code>errorOnELNotFound</code> attribute of the <code>page</code> directive.
However, there is no corresponding global configuration element in
<code>web.xml</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deferredSyntax-</code><br>
<code>AllowedAsLiteral</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the deferredSyntaxAllowedAsLiteral attribute of the <code>page</code>
directive. However, there is no corresponding global configuration
element in <code>web.xml</code>. Causes a translation error if specified in a tag
file with a JSP version less than 2.1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trimDirective-</code><br>
<code>Whitespaces</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Carries the same syntax and
semantics of the trimDirectiveWhitespaces attribute of the <code>page</code>
directive. However, there is no corresponding global configuration
element in <code>web.xml</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="the-attribute-directive"><a class="anchor" href="#the-attribute-directive"></a>8.5.2. The attribute Directive</h4>
<div class="paragraph">
<p>The <code>attribute</code> directive is analogous to the
<code>&lt;attribute&gt;</code> element in the Tag Library Descriptor, and allows for the
declaration of custom action attributes.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ attribute name=&quot;x&quot; required=&quot;true&quot; fragment=&quot;false&quot;
               rtexprvalue=&quot;false&quot; type=&quot;java.lang.Integer&quot;
               description=&quot;The first operand&quot; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ attribute name=&quot;y&quot; type=&quot;java.lang.Integer&quot; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ attribute name=&quot;prompt&quot; fragment=&quot;true&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%@ attribute attribute_directive_attr_list %&gt;

attribute_directive_attr_list ::= name=&quot;attribute-name&quot;
                                  { required=&quot;true|false&quot;               }
                                  { fragment=&quot;true|false&quot;               }
                                  { rtexprvalue=&quot;true|false&quot;            }
                                  { type=&quot;type&quot;                         }
                                  { description=&quot;description&quot;           }
                                  { deferredValue=&quot;true|false&quot;          }
                                  { deferredValueType=&quot;type&quot;            }
                                  { deferredMethod=&quot;true|false&quot;         }
                                  { deferredMethodSignature=&quot;signature&quot; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The details of the attributes are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.8-3</strong> Details of <code>attribute</code> directive attributes</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(required) The unique name of the attribute
being declared. A translation error must result if more than one
<code>attribute</code> directive appears in the same translation unit with the same
<code>name</code>. A translation error will result if there is an <code>attribute</code>
directive with a <code>name</code> attribute equal to the value of the <code>name-given</code>
attribute of a <code>variable</code> directive or the <code>dynamic-attributes</code>
attribute of a <code>tag</code> directive in this translation unit.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>required</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Whether this attribute is required
(<code>true</code>) or optional (<code>false</code>). Defaults to <code>false</code> if not
specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fragment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Whether this attribute is a
fragment to be evaluated by the tag handler (<code>true</code>) or a normal
attribute to be evaluated by the container prior to being passed to the
tag handler. If this attribute is <code>true</code>, the type attribute is fixed
at <code>jakarta.servlet.jsp.tagext.JspFragment</code> and a translation error
will result if the <code>type</code> attribute is specified. Also, if this
attribute is <code>true</code>, the <code>rtexprvalue</code> attribute is fixed at <code>true</code> and
a translation error will result if the <code>rtexprvalue</code> attribute is
specified. Defaults to <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rtexprvalue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Whether the attribute’s value may
be dynamically calculated at runtime by a scriptlet expression. Unlike
the corresponding TLD element, this attribute defaults to <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The runtime type of the
attribute’s value. Defaults to <code>java.lang.String</code> if not specified. It
is a translation error to specify a primitive type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Description of the attribute.
Defaults to no description.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deferredValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Whether the attribute&#8217;s value
represents a deferred value expression. Only one of <code>deferredValue</code> or
<code>deferredMethod</code> may be true. If <code>deferredValueType</code> is specified,
default is true, otherwise default is false. Causes a translation error
if specified in a tag file with a JSP version less than 2.1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deferredValueType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The expected type resulting from
the evaluation of the attribute&#8217;s value expression. If both
<code>deferredValueType</code> and <code>deferredValue</code> are specified, <code>deferredValue</code>
must be true. If <code>deferredValue</code> is true, default is <code>java.lang.Object</code>
. Causes a translation error if specified in a tag file with a JSP
version less than 2.1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deferredMethod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Whether the attribute&#8217;s value
represents a deferred method expression. Only one of <code>deferredValue</code> or
<code>deferredMethod</code> may be true. If <code>deferredMethodSignature</code> is specified,
default is true, otherwise default is false. Causes a translation error
if specified in a tag file with a JSP version less than 2.1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deferredMethod-</code><br>
<code>Signature</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The signature, as defined in the
Java Language Specification, of the method to be invoked in the
attribute&#8217;s method expression. If both <code>deferredMethod</code> and
<code>deferredMethodSignature</code> are specified, <code>deferredMethod</code> must be true.
If <code>deferredMethod</code> is true and <code>deferredMethodSignature</code> is not
specified, it defaults to <code>void methodname()</code>. Causes a translation
error if specified in a tag file with a JSP version less than 2.1.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="the-variable-directive"><a class="anchor" href="#the-variable-directive"></a>8.5.3. The variable Directive</h4>
<div class="paragraph">
<p>The <code>variable</code> directive is analogous to the
<code>&lt;variable&gt;</code> element in the Tag Library descriptor, and defines the
details of a variable exposed by the tag handler to the calling page.</p>
</div>
<div class="paragraph">
<p>See <a href="#actions-defining-scripting-variables">Section 7.1.4.7, &#8220;Actions Defining Scripting Variables&#8221;</a> for more details.</p>
</div>
<div class="paragraph">
<p><em>Examples</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ variable name-given=&quot;sum&quot;
              variable-class=&quot;java.lang.Integer&quot;
              scope=&quot;NESTED&quot;
              declare=&quot;true&quot;
              description=&quot;The sum of the two operands&quot; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ variable name-given=&quot;op1&quot;
              variable-class=&quot;java.lang.Integer&quot;
              description=&quot;The first operand&quot; %&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ variable name-from-attribute=&quot;var&quot; alias=&quot;result&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Syntax</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%@ variable variable_directive_attr_list %&gt;

variable_directive_attr_list ::= (   name-given=&quot;output-name&quot;
                                   | ( name-from-attribute=&quot;attr-name&quot;
                                       alias=&quot;local-name&quot;
                                     )
                                 )
                                 { variable-class=&quot;output-type&quot;   }
                                 { declare=&quot;true|false&quot;           }
                                 { scope=&quot;AT_BEGIN|AT_END|NESTED&quot; }
                                 { description=&quot;description&quot;      }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The details of the attributes are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.8-4</strong> Details of <code>variable</code> directive attributes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name-given</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a scripting variable to be defined in
the page invoking this tag. Either the <code>name-given</code> attribute or the
<code>name-from-attribute</code> attribute must be specified. Specifying neither or
both will result in a translation error. A translation error will result
if two <code>variable</code> directives have the same <code>name-given</code>. A translation
error will result if there is a <code>variable</code> directive with a <code>name-given</code>
attribute equal to the value of the <code>name</code> attribute of an <code>attribute</code>
directive or the <code>dynamic-attributes</code> attribute of a <code>tag</code> directive in
this translation unit.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name-from-attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a scripting variable to be defined in
the page invoking this tag. The specified name is the <code>name</code> of an
attribute whose (translation-time) value at of the start of the tag
invocation will give the name of the variable. A translation error will
result if there is no <code>attribute</code> directive with a <code>name</code> attribute
equal to the value of this attribute that is of type <code>java.lang.String</code>
, is <code>required</code> and not an <code>rtexprvalue</code>. Either the <code>name-given</code>
attribute or the <code>name-from-attribute</code> attribute must be specified.
Specifying neither or both will result in a translation error. A
translation error will result if two variable directives have the same
<code>name-from-attribute</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alias</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines a locally scoped attribute to hold
the value of this variable. The container will synchronize this value
with the variable whose name is given in <code>name-from-attribute</code>.
Required when <code>name-from-attribute</code> is specified. A translation error
must occur if used without <code>name-from-attribute</code>. A translation error
must occur if the value of <code>alias</code> is the same as the value of a <code>name</code>
attribute of an <code>attribute</code> directive or the <code>alias or name-given</code>
attribute of a <code>variable</code> directive in the same translation unit.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>variable-class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The name of the class of the
variable. The default is <code>java.lang.String</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>declare</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) Whether the variable is declared
or not in the calling page/tag file, after this tag invocation. <code>true</code>
is the default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) The scope of the scripting
variable defined. Can be either <code>AT_BEGIN</code>, <code>AT_END</code>, or <code>NESTED</code>.
Defaults to <code>NESTED</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) An optional description of this
variable. Defaults to no description.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="tag-files-in-xml-syntax"><a class="anchor" href="#tag-files-in-xml-syntax"></a>8.6. Tag Files in XML Syntax</h3>
<div class="paragraph">
<p>Tag files can be authored using the XML
syntax, as described in <a href="#JSP_Documents">Chapter 6, <em>JSP Documents</em></a>.
This section describes the few distinctions from the case of JSP
documents.</p>
</div>
<div class="paragraph">
<p>Tag files in XML syntax must have the
extension <code>.tagx</code>. All files with extension <code>.tagx</code> according to the
rules in <a href="#location-of-tag-files">Section 8.4.1, &#8220;Location of Tag Files&#8221;</a> are tag
files in XML syntax. Conversely, files with extension <code>.tag</code> are not in
XML syntax.</p>
</div>
<div class="paragraph">
<p>The <code>jsp:root</code> element can, but needs not,
appear in tag files in XML syntax. A <code>jsp:root</code> element cannot appear in
a tag file in JSP syntax.</p>
</div>
<div class="paragraph">
<p>As indicated in <a href="#jsp:output">Section 5.13, &#8220;&lt;jsp:output&gt;&#8221;</a>, the default for tag
files, in either syntax, is not to generate the xml declaration. The
element <code>jsp:output</code> can be used to change that default for tag files in
XML syntax.</p>
</div>
<div class="paragraph">
<p>Finally, the <code>tag</code> directive in a tag file in
XML syntax cannot include a <code>pageEncoding</code> attribute; the encoding is
inferred using the conventions for XML documents. Using the
<code>pageEncoding</code> attribute shall result in a translation-time error.</p>
</div>
</div>
<div class="sect2">
<h3 id="xml-view-of-a-tag-file"><a class="anchor" href="#xml-view-of-a-tag-file"></a>8.7. XML View of a Tag File</h3>
<div class="paragraph">
<p>Similar to JSP pages, tag files have an
equivalent XML document, the XML view of a tag file, that is exposed to
the translation phase for validation. During the translation phase for a
tag file, a tag XML view is created and passed to all tag library validators declared in
all tag libraries declared in the tag file.</p>
</div>
<div class="paragraph">
<p>The XML view of a tag file is identical to
the XML view of a JSP, except that there are additional XML elements
defined to handle tag file specific features. The XML view of a tag file
is obtained in the same way that the XML view of a JSP page is obtained
(see <a href="#xml-view">Chapter 10, <em>XML View</em></a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="implicit-objects-2"><a class="anchor" href="#implicit-objects-2"></a>8.8. Implicit Objects</h3>
<div class="paragraph">
<p>Tag library developers writing tag files have
access to certain implicit objects that are always available for use
within scriptlets and expressions through scripting variables that are
declared implicitly at the beginning of the tag handler implementation.
All scripting languages are required to provide access to these objects.</p>
</div>
<div class="paragraph">
<p>Each implicit object has a class or interface
type defined in a core Java technology or Jakarta Servlet API package, as
shown in <a href="#_Implicit_Objects_Available_in_Tag_Files"><strong>Table JSP.8-5</strong> , &#8220;Implicit Objects Available in Tag Files&#8221;</a>.</p>
</div>
<table id="_Implicit_Objects_Available_in_Tag_Files" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.8-5</strong> Implicit Objects Available in Tag Files</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Semantics &amp; Scope</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>request</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">protocol dependent subtype of: <code>jakarta.servlet.ServletRequest</code><br>
e.g:<br>
<code>jakarta.servlet.http.HttpServletRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request triggering the service
invocation.<br>
<code>request</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>response</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">protocol dependent subtype of:
<code>jakarta.servlet.ServletResponse</code><br>
e.g:<br>
<code>jakarta.servlet.http.HttpServletResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to the request.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jspContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.jsp.JspContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>JspContext</code> for this tag file.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>session</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.http.HttpSession</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The session object created for the requesting
client (if any).<br>
This variable is only valid for HTTP
protocols.<br>
<code>session</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>application</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.ServletContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The servlet context obtained from the servlet
configuration object (as in the call
<code>getServletConfig().getContext()</code>).<br>
<code>application</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>out</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.jsp.JspWriter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An object that writes into the output stream.<br>
<code>page</code> scope.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jakarta.servlet.ServletConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>ServletConfig</code> for this JSP page.<br>
<code>page</code> scope.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Object names with prefixes <code>jsp</code>, <code>jsp</code>,
<code>jspx</code> and <code>jspx</code>, in any combination of upper and lower case, are
reserved by the JSP specification.</p>
</div>
</div>
<div class="sect2">
<h3 id="variable-synchronization"><a class="anchor" href="#variable-synchronization"></a>8.9. Variable Synchronization</h3>
<div class="paragraph">
<p>Just as is the case for all tag handlers, a
tag file is able to communicate with its calling page via variables. As
mentioned earlier, in tag files, variables are declared using the
<code>variable</code> directive. Though the scopes of variables are similar to
those in classic tag handlers, the semantics are slightly different. The
intent is to be able to emulate IN and OUT parameters using attributes
and variables, which appear as page-scoped attributes local to the tag
file, and are synchronized with the calling page’s <code>JspContext</code> at
various points.</p>
</div>
<div class="paragraph">
<p>The <code>name-from-attribute</code> and <code>alias</code>
attributes of the <code>variable</code> directive can be used to allow the caller
to customize the name of the variable in the calling page while
referring to a constant name in the tag file. When using these
attributes, the name of the variable in the calling page is derived from
the value of <code>name-from-attribute</code> at the time the tag was called. The
name of the corresponding variable in the tag file is the value of
<code>alias</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>IN parameters - Use attributes. For each
attribute, a page-scoped attribute is made available in the <code>JspContext</code>
of the tag file. The page-scoped attribute is initialized to the value
of the attribute when the tag is called. No further synchronization is
performed.</p>
</li>
<li>
<p>OUT parameters - Use variables with scope
<code>AT_BEGIN</code> or <code>AT_END</code>. For each <code>AT_BEGIN</code> or <code>AT_END</code> variable, a
page-scoped attribute is made available in the <code>JspContext</code> of the tag
file. The scoped attribute is not initialized. Synchronization is
performed at the end of the tag for <code>AT_BEGIN</code> and <code>AT_END</code> and also
before the invocation of a fragment for <code>AT_BEGIN</code>. See
<a href="#_Variable_synchronization_behavior"><strong>Table JSP.8-6</strong> , &#8220;Variable synchronization behavior&#8221;</a> for
details.</p>
</li>
<li>
<p>Nested parameters - Use variables with
scope <code>AT_BEGIN</code> or <code>NESTED</code>. For each <code>AT_BEGIN</code> or <code>NESTED</code> variable,
a page-scoped attribute is made available in the <code>JspContext</code> of the tag
file. The scoped attribute is not initialized. Synchronization is
performed before each fragment invocation for <code>AT_BEGIN</code> and <code>NESTED</code>,
and also after the end of the tag for <code>AT_BEGIN</code>. See
<a href="#_Variable_synchronization_behavior"><strong>Table JSP.8-6</strong> , &#8220;Variable synchronization behavior&#8221;</a> for
details.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="synchronization-points"><a class="anchor" href="#synchronization-points"></a>8.9.1. Synchronization Points</h4>
<div class="paragraph">
<p>The JSP container is required to generate
code to handle the synchronization of each declared variable. The
details of how and when each variable is synchronized varies by the
variable’s scope, as per <a href="#_Variable_synchronization_behavior"><strong>Table JSP.8-6</strong> , &#8220;Variable synchronization behavior&#8221;</a>.</p>
</div>
<table id="_Variable_synchronization_behavior" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.8-6</strong> Variable synchronization behavior</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">AT_BEGIN</th>
<th class="tableblock halign-left valign-top">NESTED</th>
<th class="tableblock halign-left valign-top">AT_END</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beginning of tag file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do nothing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">save</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do nothing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before any fragment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tag → page</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tag → page</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do nothing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">After any fragment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do nothing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do nothing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do nothing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">End of tag file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tag → page</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">restore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>tag → page</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following list describes what each
synchronization action means. If <code>name-given</code> is used, the name of the
variable in the calling page (referred to as P) and the name of the
variable in the tag file (referred to as T) are the same and are equal
to the value of <code>name-given</code>. If <code>name-from-attribute</code> is used, the
name of P is equal to the value of the attribute (at the time the page
was called) specified by the value of <code>name-from-attribute</code> and the name
of T is equal to the value of the <code>alias</code> attribute.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>tag → page</em> - For this variable, if T exists in the tag file, create/update P in
the calling page. If a T does not exist in the tag file, and P does exist in the
calling page, P is removed from the calling page’s page scope. If the declare
attribute for this variable is set to true , a corresponding scripting variable is
declared in the calling page or tag file, as with any other tag handler. If this
scripting variable would not be accessible in the context in which it is defined,
the container need not declare the scripting variable (for example in a scriptless
body).</p>
</li>
<li>
<p>save - For this variable, save the value of
P, for later restoration. If P did not exist, remember that fact.</p>
</li>
<li>
<p>restore - For this variable, restore the
value of P in the calling page, from the value saved earlier. If P did
not exist before, ensure it does not exist now.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All variable synchronization and restoration
that occurs at the end of a tag file must occur regardless of whether an
exception is thrown inside the tag file. All variable synchronization
that occurs after the invocation of a fragment must occur regardless of
whether an exception occured while invoking the fragment.</p>
</div>
</div>
<div class="sect3">
<h4 id="synchronization-examples"><a class="anchor" href="#synchronization-examples"></a>8.9.2. Synchronization Examples</h4>
<div class="paragraph">
<p>The following examples help illustrate how
variable synchronization works between a tag file and its calling page.</p>
</div>
<div class="sect4">
<h5 id="example-of-at_begin"><a class="anchor" href="#example-of-at_begin"></a>8.9.2.1. Example of AT_BEGIN</h5>
<div class="paragraph">
<p>In this example, the <code>AT_BEGIN</code> scope is used
to pass a variable to the tag’s body, and make it available to the
calling page at the end of the tag invocation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%-- page.jsp --%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;%@ taglib prefix=&quot;my&quot; tagdir=&quot;/WEB-INF/tags&quot; %&gt;
&lt;c:set var=&quot;x&quot; value=&quot;1&quot;/&gt;
${x} &lt;%-- (x == 1) --%&gt;
&lt;my:example&gt;
  ${x} &lt;%-- (x == 2) --%&gt;
  &lt;c:set var=&quot;x&quot; value=&quot;3&quot;/&gt;
&lt;/my:example&gt;
${x} &lt;%-- (x == 4) --%&gt;

&lt;%-- /WEB-INF/tags/example.tag --%&gt;
&lt;%@ variable name-given=&quot;x&quot; scope=&quot;AT_BEGIN&quot; %&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
${x} &lt;%-- (x == null) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;2&quot;/&gt;
&lt;jsp:doBody/&gt;
${x} &lt;%-- (x == 2) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;4&quot;/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="example-of-at_begin-and-name-from-attribute"><a class="anchor" href="#example-of-at_begin-and-name-from-attribute"></a>8.9.2.2. Example of AT_BEGIN and name-from-attribute</h5>
<div class="paragraph">
<p>Like the previous example, in this example
the <code>AT_BEGIN</code> scope is used to pass a variable to the tag’s body, and
make it available to the calling page at the end of the tag invocation.
The name of the attribute is customized via <code>name-from-attribute</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%-- page.jsp --%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;%@ taglib prefix=&quot;my&quot; tagdir=&quot;/WEB-INF/tags&quot; %&gt;
&lt;c:set var=&quot;x&quot; value=&quot;1&quot;/&gt;
${x} &lt;%-- (x == 1) --%&gt;
&lt;my:example var=&quot;x&quot;&gt;
  ${x} &lt;%-- (x == 2) --%&gt;
  ${result} &lt;%-- (result == null) --%&gt;
  &lt;c:set var=&quot;x&quot; value=&quot;3&quot;/&gt;
  &lt;c:set var=&quot;result&quot; value=&quot;invisible&quot;/&gt;
&lt;/my:example&gt;
${x} &lt;%-- (x == 4) --%&gt;
${result} &lt;%-- (result == 'invisible') --%&gt;

&lt;%-- /WEB-INF/tags/example.tag --%&gt;
&lt;%@ attribute name=&quot;var&quot; required=&quot;true&quot; rtexprvalue=&quot;false&quot; %&gt;
&lt;%@ variable alias=&quot;result&quot; name-from-attribute=&quot;var&quot; scope=&quot;AT_BEGIN&quot;
%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
${x} &lt;%-- (x == null) --%&gt;
${result} &lt;%-- (result == null) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;ignored&quot;/&gt;
&lt;c:set var=&quot;result&quot; value=&quot;2&quot;/&gt;
&lt;jsp:doBody/&gt;
${x} &lt;%-- (x == 'ignored') --%&gt;
${result} &lt;%-- (result == 2) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;still`ignored&quot;/&gt;
&lt;c:set var=&quot;result&quot; value=&quot;4&quot;/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="example-of-nested"><a class="anchor" href="#example-of-nested"></a>8.9.2.3. Example of NESTED</h5>
<div class="paragraph">
<p>In this example, the <code>NESTED</code> scope is used
to make a private variable available to the calling page. The original
value is restored when the tag is done.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%-- page.jsp --%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;%@ taglib prefix=&quot;my&quot; tagdir=&quot;/WEB-INF/tags&quot; %&gt;
&lt;c:set var=&quot;x&quot; value=&quot;1&quot;/&gt;
${x} &lt;%-- (x == 1) --%&gt;
&lt;my:example&gt;
  ${x} &lt;%-- (x == 2) --%&gt;
  &lt;c:set var=&quot;x&quot; value=&quot;3&quot;/&gt;
&lt;/my:example&gt;
${x} &lt;%-- (x == 1) --%&gt;

&lt;%-- /WEB-INF/tags/example.tag --%&gt;
&lt;%@ variable name-given=&quot;x&quot; scope=&quot;NESTED&quot; %&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
${x} &lt;%-- (x == null) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;2&quot;/&gt;
&lt;jsp:doBody/&gt;
${x} &lt;%-- (x == 2) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;4&quot;/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="example-of-at_end"><a class="anchor" href="#example-of-at_end"></a>8.9.2.4. Example of AT_END</h5>
<div class="paragraph">
<p>In this example, the AT_END scope is used to
return a value to the page. The body of the tag is not affected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%-- page.jsp --%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;%@ taglib prefix=&quot;my&quot; tagdir=&quot;/WEB-INF/tags&quot; %&gt;
&lt;c:set var=&quot;x&quot; value=&quot;1&quot;/&gt;
${x} &lt;%-- (x == 1) --%&gt;
&lt;my:example&gt;
  ${x} &lt;%-- (x == 1) --%&gt;
  &lt;c:set var=&quot;x&quot; value=&quot;3&quot;/&gt;
&lt;/my:example&gt;
${x} &lt;%-- (x == 4) --%&gt;

&lt;%-- /WEB-INF/tags/example.tag --%&gt;
&lt;%@ variable name-given=&quot;x&quot; scope=&quot;AT_END&quot; %&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
${x} &lt;%-- (x == null) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;2&quot;/&gt;
&lt;jsp:doBody/&gt;
${x} &lt;%-- (x == 2) --%&gt;
&lt;c:set var=&quot;x&quot; value=&quot;4&quot;/&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="example-of-removing-parameters"><a class="anchor" href="#example-of-removing-parameters"></a>8.9.2.5. Example of Removing Parameters</h5>
<div class="paragraph">
<p>This example illustrates how the tag file can
remove objects from the page scope of the calling page during
synchronization.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%-- page.jsp --%&gt;
&lt;%@ taglib prefix=&quot;my&quot; tagdir=&quot;/WEB-INF/tags&quot; %&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;c:set var=&quot;x&quot; value=&quot;2&quot;/&gt;
${x}
&lt;my:tag1&gt;
  '${x}'
&lt;/my:tag1&gt;
${x}

&lt;%-- /WEB-INF/tags/example.tag --%&gt;
&lt;%@ variable name-given=&quot;x&quot; scope=&quot;NESTED&quot; %&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;c:set var=&quot;x&quot; value=&quot;1&quot;/&gt;
&lt;jsp:doBody/&gt;
&lt;c:remove var=&quot;x&quot;/&gt;
&lt;jsp:doBody/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The expected output of this example is: 2 '1' '' 2</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scripting"><a class="anchor" href="#scripting"></a>9. Scripting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the details of the
Scripting Elements when the language directive value is <code>java</code>.</p>
</div>
<div class="paragraph">
<p>The scripting language is based on the Java
programming language (as specified by “The Java Language
Specification”), but note that there is no valid JSP page, or a subset
of a page, that is a valid Java program.</p>
</div>
<div class="paragraph">
<p>The following sections describe the details
of the relationship between the scripting declarations, scriptlets, and
scripting expressions, and the Java programming language. The
description is in terms of the structure of the JSP page implementation
class. A JSP Container need not generate the JSP page implementation
class, but it must behave as if one exists.</p>
</div>
<div class="sect2">
<h3 id="overall-structure"><a class="anchor" href="#overall-structure"></a>9.1. Overall Structure</h3>
<div class="paragraph">
<p>Some details of what makes a JSP page legal
are very specific to the scripting language used in the page. This is
especially complex since scriptlets are language fragments, not
complete language statements.</p>
</div>
<div class="sect3">
<h4 id="valid-jsp-page"><a class="anchor" href="#valid-jsp-page"></a>9.1.1. Valid JSP Page</h4>
<div class="paragraph">
<p>A JSP page is valid for a Java Platform if and
only if the JSP page implementation class defined by
<a href="#_Structure_of_the_Java_Programming_Language_Class"><strong>Table JSP.9-1</strong> , &#8220;Structure of the Java Programming Language Class&#8221;</a> (after applying all
include directives), together with any other classes defined by the JSP
container, is a valid program for the given Java Platform, and if it passes
the validation methods for all the tag libraries associated with the JSP page.</p>
</div>
</div>
<div class="sect3">
<h4 id="reserved-names"><a class="anchor" href="#reserved-names"></a>9.1.2. Reserved Names</h4>
<div class="paragraph">
<p>All names of the form <code>{_}jsp_*</code> and <code>{_}jspx_*</code>, in any combination
of upper and lower case, are reserved for the JSP specification. Names
of this form that are not defined in this specification are reserved
for future expansion.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation-flexibility"><a class="anchor" href="#implementation-flexibility"></a>9.1.3. Implementation Flexibility</h4>
<div class="paragraph">
<p>The transformations described in this chapter
need not be performed literally. An implementation may implement things
differently to provide better performance, lower memory footprint, or
other implementation attributes.</p>
</div>
<table id="_Structure_of_the_Java_Programming_Language_Class" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.9-1</strong> Structure of the Java Programming Language Class</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional imports clause as indicated via
<code>jsp</code> directive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>import name1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SuperClass</code> is either selected by the JSP
container or by the JSP author via the <code>jsp</code> directive.<br>
Name of class (<code>jspXXX</code>) is implementation
dependent.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>class jspXXX extends SuperClass</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start of the body of a JSP page
implementation class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(1) Declaration Section</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>// declarations...</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">signature for generated method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>public void
_jspService(&lt;ServletRequestSubtype&gt; request,
&lt;ServletResponseSubtype&gt; response)
throws ServletException, IOException {</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(2) Implicit Objects Section</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>// code that defines and initializes
request, response, page, pageContext etc.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(3) Main Section</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>// code that defines request/response mapping</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">close of <code>_jspService</code> method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">close of <code>jspXXX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>}</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="declarations-section"><a class="anchor" href="#declarations-section"></a>9.2. Declarations Section</h3>
<div class="paragraph">
<p>The declarations section corresponds to the
declaration elements.</p>
</div>
<div class="paragraph">
<p>The contents of this section is determined by
concatenating all the declarations in the page in the order in which
they appear.</p>
</div>
</div>
<div class="sect2">
<h3 id="initialization-section"><a class="anchor" href="#initialization-section"></a>9.3. Initialization Section</h3>
<div class="paragraph">
<p>This section defines and initializes the
implicit objects available to the JSP page. See <a href="#implicit-objects">Section 1.8.3, &#8220;Implicit Objects&#8221;</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="main-section"><a class="anchor" href="#main-section"></a>9.4. Main Section</h3>
<div class="paragraph">
<p>This section provides the main mapping between
a request and a response object.</p>
</div>
<div class="paragraph">
<p>The content of the main section is determined
from scriptlets, expressions, and the text body of the JSP page. The
elements are processed sequentially in the order in which they appear in
the page. The translation for each one is determined as indicated below,
and its translation is inserted into this section. The translation
depends on the element type.</p>
</div>
<div class="sect3">
<h4 id="template-data"><a class="anchor" href="#template-data"></a>9.4.1. Template Data</h4>
<div class="paragraph">
<p>Template data is transformed into code that
will place the template data into the stream named by the implicit
variable <code>out</code> when the code is executed. White space is preserved.</p>
</div>
<div class="paragraph">
<p>Ignoring quotation issues and performance
issues, this corresponds to a statement of the form:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Original</th>
<th class="tableblock halign-left valign-top">Equivalent Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>template</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>out.print(template)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="scriptlets-2"><a class="anchor" href="#scriptlets-2"></a>9.4.2. Scriptlets</h4>
<div class="paragraph">
<p>A scriptlet is transformed into its code
fragment.:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Original</th>
<th class="tableblock halign-left valign-top">Equivalent Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;% fragment %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fragment</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="expressions-2"><a class="anchor" href="#expressions-2"></a>9.4.3. Expressions</h4>
<div class="paragraph">
<p>An expression is transformed into a Java
statement to insert the value of the expression, converted to
<code>java.lang.String</code> if needed, into the stream named by the implicit
variable <code>out</code>. No additional newlines or space is included.</p>
</div>
<div class="paragraph">
<p>Ignoring quotation and performance issues,
this corresponds to a statement of the form:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Original</th>
<th class="tableblock halign-left valign-top">Equivalent Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%= expression %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>out.print(expression)</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="actions-2"><a class="anchor" href="#actions-2"></a>9.4.4. Actions</h4>
<div class="paragraph">
<p>An action defining one or more objects is
transformed into one or more variable declarations for those objects,
together with code that initializes the variables. Their visibility may be
affected by other constructs, for example scriptlets.</p>
</div>
<div class="paragraph">
<p>The semantics of the action type determines
the names of the variables (usually the name of an <code>id</code> attribute, if
present) and their type. The only standard action in the JSP
specification that defines objects is the <code>jsp:useBean</code> action. The name
of the variable introduced is the name of the <code>id</code> attribute and its
type is the type of the <code>class</code> attribute.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Original</th>
<th class="tableblock halign-left valign-top">Equivalent Text</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;x:tag&gt;</code><br>
<code>&#160; foo</code><br>
<code>&lt;/x:tag&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>declare AT_BEGIN variables</code><br>
<code>{</code><br>
<code>&#160; declare NESTED variables</code><br>
<code>&#160; transformation of foo</code><br>
<code>}</code><br>
<code>declare AT_END variables</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that as per <a href="#implementation-flexibility">Section 9.1.3, &#8220;Implementation Flexibility&#8221;</a>, implementations may opt to take
a different approach to the location of variable declarations. The value of the
<code>scope</code> attribute does not affect the visibility of the variables within the
generated program. It affects where and thus for how long there will be
additional references to the object denoted by the variable. Developers wishing
to have more precise control over variable declarations may configure the
variables with <code>declare=false</code> and explicitly declare the variables themselves.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xml-view"><a class="anchor" href="#xml-view"></a>10. XML View</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides details on the XML
view of a JSP page and tag files. The XML views are used to enable
validation of JSP pages and tag files.</p>
</div>
<div class="sect2">
<h3 id="xml-view-of-a-jsp-document-jsp-page-or-tag-file"><a class="anchor" href="#xml-view-of-a-jsp-document-jsp-page-or-tag-file"></a>10.1. XML View of a JSP Document, JSP Page or Tag File</h3>
<div class="paragraph">
<p>This section describes the XML view of a JSP
page or tag file: the mapping between a JSP page, JSP document or tag
file, and an XML document describing it.</p>
</div>
<div class="sect3">
<h4 id="jsp-documents-and-tag-files-in-xml-syntax"><a class="anchor" href="#jsp-documents-and-tag-files-in-xml-syntax"></a>10.1.1. JSP Documents and Tag Files in XML Syntax</h4>
<div class="paragraph">
<p>The XML view of a JSP document or of a tag
file written in XML syntax is very close to the original JSP page. Only
five transformations are performed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Expand all include directives into the JSP
content they include. See <a href="#including-data-in-jsp-pages">Section 1.10.5, &#8220;Including Data in JSP Pages&#8221;</a> for the
semantics of mixing XML and standard syntax content.</p>
</li>
<li>
<p>Add a <code>jsp:root</code> element as the root
element if the JSP document or tag file in XML syntax does not have it.</p>
</li>
<li>
<p>Set the value of the <code>pageEncoding</code>
attribute of the page directive to &#8220;UTF-8&#8221;. The <code>page</code> directive and
the <code>pageEncoding</code> attribute are added if they don’t exist already.</p>
</li>
<li>
<p>Set the value of the <code>contentType</code>
attribute of the <code>page</code> directive to the value that the container will
pass to <code>ServletResponse.setContentType()</code>, determined as described in
<a href="#response-character-encoding">Section 4.2, &#8220;Response Character Encoding&#8221;</a>. The <code>page</code> directive and the
<code>contentType</code> attribute are added if they don’t exist already.</p>
</li>
<li>
<p>Add the <code>jsp:id</code> attribute (see
<a href="#the-jspid-attribute">Section 10.1.13, &#8220;The jsp:id Attribute&#8221;</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="jsp-pages-or-tag-files-in-jsp-syntax"><a class="anchor" href="#jsp-pages-or-tag-files-in-jsp-syntax"></a>10.1.2. JSP Pages or Tag Files in JSP Syntax</h4>
<div class="paragraph">
<p>The XML view of a JSP page or tag file
written in standard syntax is defined by the following transformation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Expand all include directives into the JSP
content they include. See <a href="#including-data-in-jsp-pages">Section 1.10.5, &#8220;Including Data in JSP Pages&#8221;</a> for the
semantics of mixing XML and standard syntax content.</p>
</li>
<li>
<p>Add a <code>jsp:root</code> element as the root, with
appropriate <code>xmlns:jsp</code> attribute, and convert the <code>taglib</code> directive
into <code>xmlns:</code> attributes of the <code>jsp:root</code> element.</p>
</li>
<li>
<p>Convert declarations, scriptlets, and
expressions into valid XML elements as described in
<a href="#the-jsproot-element">Section 6.3.2, &#8220;The jsp:root Element&#8221;</a> and the following sections.</p>
</li>
<li>
<p>Convert request-time attribute expressions
as in <a href="#request-time-attribute-expressions">Section 10.1.11, &#8220;Request-Time Attribute Expressions&#8221;</a>.</p>
</li>
<li>
<p>Convert JSP quotations to XML quotations.</p>
</li>
<li>
<p>Create <code>jsp:text</code> elements for all template
text.</p>
</li>
<li>
<p>Add the <code>jsp:id</code> attribute (see <a href="#the-jspid-attribute">Section 10.1.13, &#8220;The jsp:id Attribute&#8221;</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the XML view of a JSP page or tag
file has no <code>DOCTYPE</code> information; see <a href="#validating-an-xml-view-of-a-jsp-page">Section 10.2, &#8220;Validating an XML View of a JSP page&#8221;</a>.</p>
</div>
<div class="paragraph">
<p>A quick overview of the transformation is
shown in <a href="#_XML_View_Transformations"><strong>Table JSP.10-1</strong> , &#8220;XML View Transformations&#8221;</a>:</p>
</div>
<table id="_XML_View_Transformations" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.10-1</strong> XML View Transformations</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JSP element</th>
<th class="tableblock halign-left valign-top">XML view</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%-- comment --%&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">removed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ page ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:directive.page ... /&gt;</code>. Add <code>jsp:id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ taglib ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jsp:root</code> element is annotated with
namespace information. Add <code>jsp:id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ include ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expanded in place</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%! ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:declaration&gt; ... &lt;/jsp:declaration&gt;</code>.
Add <code>jsp:id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;% ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:scriptlet&gt; ... &lt;/jsp:scriptlet&gt;</code>.
Add <code>jsp:id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%= ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:expression&gt; ... &lt;/jsp:expression&gt;</code>.
Add <code>jsp:id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace with XML syntax (adjust request-time
expressions; add <code>jsp:id</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As is (adjust request-time expressions; add
<code>jsp:id</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace with <code>jsp:text</code>. Add <code>jsp:id</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ tag ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:directive.tag ... /&gt;</code>. Add
<code>jsp:id.</code> [tag files only]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ attribute ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:directive.attribute ... /&gt;</code>.
Add <code>jsp:id.</code> [tag files only]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;%@ variable ... %&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;jsp:directive.variable ... /&gt;</code>.
Add <code>jsp:id.</code> [tag files only]</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In more detail:</p>
</div>
</div>
<div class="sect3">
<h4 id="jsp-comments-2"><a class="anchor" href="#jsp-comments-2"></a>10.1.3. JSP Comments</h4>
<div class="paragraph">
<p>JSP comments (of the form <code>&lt;%-- comment --%&gt;</code>) are not
passed through to the XML view of a JSP page.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-page-directive-2"><a class="anchor" href="#the-page-directive-2"></a>10.1.4. The page Directive</h4>
<div class="paragraph">
<p>A <code>page</code> directive of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ page { attr=&quot;value&quot; }* %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into an element of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:directive.page { attr=&quot;value&quot; }* /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of the <code>pageEncoding</code> attribute is
set to &#8220;UTF-8&#8221;. The value of the <code>contentType</code> attribute is set to
the value that the container will pass to
ServletResponse.setContentType(), determined as described in
<a href="#response-character-encoding">Section 4.2, &#8220;Response Character Encoding&#8221;</a>. The <code>page</code> directive and both
attributes are added if they don’t exist already.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-taglib-directive-2"><a class="anchor" href="#the-taglib-directive-2"></a>10.1.5. The taglib Directive</h4>
<div class="paragraph">
<p>A taglib directive of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib uri=&quot;uriValue&quot; prefix=&quot;prefix&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into an <code>xmlns:prefix</code>
attribute on the root of the JSP document, with a value that depends on
<code>uriValue</code>. If <code>uriValue</code> is a relative path, then the value used is
<code>urn:jsptld:</code> <code>uriValue</code> ; otherwise, the <code>uriValue</code> is used directly.</p>
</div>
<div class="paragraph">
<p>A taglib directive of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ taglib tagdir=&quot;tagDirValue&quot; prefix=&quot;prefix&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into an <code>xmlns:prefix</code>
attribute on the root of the JSP document, with a value of the form
<code>urn:jsptagdir:</code> <code>tagDirValue</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-include-directive-2"><a class="anchor" href="#the-include-directive-2"></a>10.1.6. The include Directive</h4>
<div class="paragraph">
<p>An include directive of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ include file=&quot;value&quot; %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is expanded into the JSP content indicated by
<code>value</code>. This is done to allow for validation of the page.</p>
</div>
</div>
<div class="sect3">
<h4 id="declarations-2"><a class="anchor" href="#declarations-2"></a>10.1.7. Declarations</h4>
<div class="paragraph">
<p>Declarations are translated into a <code>jsp:declaration</code> element.
For example, the second example from <a href="#declarations">Section 1.12.1, &#8220;Declarations&#8221;</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%! public String f(int i) { if (i&lt;3) return(&quot;...&quot;); ... } %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:declaration&gt; &lt;![CDATA[ public String f(int i) { if (i&lt;3) return(&quot;...&quot;); } ]]&gt;
 &lt;/jsp:declaration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, we could use an <code>&amp;lt;</code> and
instead say:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:declaration&gt; public String f(int i) {if (i&amp;lt;3) return(&quot;...&quot;); }
 &lt;/jsp:declaration&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="scriptlets-3"><a class="anchor" href="#scriptlets-3"></a>10.1.8. Scriptlets</h4>
<div class="paragraph">
<p>Scriptlets are translated into a
<code>jsp:scriptlet</code> element. In the XML document corresponding to JSP pages,
directives are represented using the syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:scriptlet&gt; code fragment goes here &lt;/jsp:scriptlet&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="expressions-3"><a class="anchor" href="#expressions-3"></a>10.1.9. Expressions</h4>
<div class="paragraph">
<p>In the XML document corresponding to JSP
pages, directives are represented using the <code>jsp:expression</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:expression&gt; expression goes here &lt;/jsp:expression&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="standard-and-custom-actions"><a class="anchor" href="#standard-and-custom-actions"></a>10.1.10. Standard and Custom Actions</h4>
<div class="paragraph">
<p>The syntax for both standard and action
elements is based on XML. The transformations needed are due to quoting
conventions and the syntax of request-time attribute expressions.</p>
</div>
</div>
<div class="sect3">
<h4 id="request-time-attribute-expressions"><a class="anchor" href="#request-time-attribute-expressions"></a>10.1.11. Request-Time Attribute Expressions</h4>
<div class="paragraph">
<p>Request-time attribute expressions are of the
form <code>&lt;%= expression %&gt;</code>. Although this syntax is consistent with the
syntax used elsewhere in a JSP page, it is not a legal XML syntax. The
XML mapping for these expressions is into values of the form <code>%=
expression %</code>, where the JSP specification quoting convention has been
converted to the XML quoting convention.</p>
</div>
<div class="paragraph">
<p>Request-time attribute values can also be
specified using EL expressions of the form <code>${expression}</code>.
Expressions of this form are represented verbatim in the XML view.</p>
</div>
<div class="paragraph">
<p>The XML view of an escaped EL expression
using the ${expr} syntax can be obtained as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The XML view of an unescaped expression
<code>${foo}</code> is <code>${foo}</code>.</p>
</li>
<li>
<p>The XML view of an escaped expression
<code>\${foo}</code> is <code>\${foo}</code>.</p>
</li>
<li>
<p>For each escaped <code>\</code> preceeding an
unescaped expression <code>${foo}</code>, a <code>${'\\'}</code> must be generated in the
XML view, and neighboring generated <code>${'\\'}</code> expressions must be
combined.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#_XML_View_of_an_Escaped_EL_Expression_in_a_Request_time_Attribute_Value"><strong>Table JSP.10-2</strong> , &#8220;XML View of an Escaped EL Expression in a Request-time Attribute Value&#8221;</a>
illustrates these rules. Assume the EL expression <code>${foo}</code> evaluates to <code>[bar]</code>
and that EL is enabled for this translation unit.</p>
</div>
<table id="_XML_View_of_an_Escaped_EL_Expression_in_a_Request_time_Attribute_Value" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.10-2</strong> XML View of an Escaped EL Expression in a Request-time Attribute Value</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Value</th>
<th class="tableblock halign-left valign-top">XML View</th>
<th class="tableblock halign-left valign-top">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[bar]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${foo}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${'\\'}${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\[bar]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\${foo}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${'\\\\'}${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\[bar]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\${foo}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${'\\\\\\'}${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\[bar]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The XML view of an escaped EL expression
using the <code>#{expr}</code> syntax follows the same rules as the <code>${expr}</code>
syntax, where <code>${</code> is simply substituted with <code>#{</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="template-text-and-xml-elements"><a class="anchor" href="#template-text-and-xml-elements"></a>10.1.12. Template Text and XML Elements</h4>
<div class="paragraph">
<p>All text that is uninterpreted by the JSP
translator is converted into the body for a <code>jsp:text</code> element. As a
consequence no XML elements of the form described in
<a href="#template-content">Section 6.3.9, &#8220;Template Content&#8221;</a> will appear in the XML view of a
JSP page written in JSP syntax.</p>
</div>
<div class="paragraph">
<p>Because <code>\\</code> is not an escape sequence within
template text in the standard syntax, no special transformation needs to
be done to obtain the XML view of an escaped EL expression that appears
in template text.</p>
</div>
<div class="paragraph">
<p><a href="#_XML_View_of_an_Escaped_EL_Expression_in_Template_Text"><strong>Table JSP.10-3</strong> , &#8220;XML View of an Escaped EL Expression in Template Text&#8221;</a> illustrates
how the XML view of an escaped EL expression is obtained. Assume the EL
expression <code>${foo}</code> evaluates to <code>[bar]</code> and that EL is enabled for this
translation unit. The same rules apply for the <code>#{expr}</code> syntax, where <code>${</code>
is simply substituted with <code>\#{</code>.</p>
</div>
<table id="_XML_View_of_an_Escaped_EL_Expression_in_Template_Text" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.10-3</strong> XML View of an Escaped EL Expression in Template Text</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute Value</th>
<th class="tableblock halign-left valign-top">XML View</th>
<th class="tableblock halign-left valign-top">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[bar]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${foo}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\${foo}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\\${foo}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\${foo}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="the-jspid-attribute"><a class="anchor" href="#the-jspid-attribute"></a>10.1.13. The jsp:id Attribute</h4>
<div class="paragraph">
<p>A JSP container must support a <code>jsp:id</code>
attribute. This attribute can only be present in the XML view of a JSP
page and can be used to improve the quality of translation time error
messages.</p>
</div>
<div class="paragraph">
<p>The XML view of any JSP page will have an
additional <code>jsp:id</code> attribute added to all XML elements. This attribute
is given a value that is unique over all elements in the XML view. The
prefix for the <code>id</code> attribute need not be &#8220;jsp&#8221; but it must map to
the namespace <code><a href="http://java.sun.com/JSP/Page" class="bare">http://java.sun.com/JSP/Page</a></code>. In the case where the
page author has redefined the <code>jsp</code> prefix, an alternative prefix must
be used by the container. See
the <code>jakarta.servlet.jsp.tagext</code> Javadoc for more details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_The_tag_Directive"><a class="anchor" href="#_The_tag_Directive"></a>10.1.14. The tag Directive</h4>
<div class="paragraph">
<p>The <code>tag</code> directive is applicable to tag
files only. A <code>tag</code> directive of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ tag { attr=&quot;value&quot; }* %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into an element of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:directive.tag { attr=&quot;value&quot; }* /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of the <code>pageEncoding</code> attribute is
set to &#8220;UTF-8&#8221;. A <code>tag</code> directive and the <code>pageEncoding</code> attribute
are added if they don’t exist already.</p>
</div>
</div>
<div class="sect3">
<h4 id="_The_attribute_Directive"><a class="anchor" href="#_The_attribute_Directive"></a>10.1.15. The attribute Directive</h4>
<div class="paragraph">
<p>The <code>attribute</code> directive is applicable to
tag files only. An <code>attribute</code> directive of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ attribute { attr=&quot;value&quot; }* %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into an element of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:directive.attribute { attr=&quot;value&quot; }* /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_The_variable_Directive"><a class="anchor" href="#_The_variable_Directive"></a>10.1.16. The variable Directive</h4>
<div class="paragraph">
<p>The <code>variable</code> directive is applicable to tag
files only. A <code>variable</code> directive of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ variable { attr=&quot;value&quot; }* %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated into an element of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;jsp:directive.variable { attr=&quot;value&quot; }* /&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validating-an-xml-view-of-a-jsp-page"><a class="anchor" href="#validating-an-xml-view-of-a-jsp-page"></a>10.2. Validating an XML View of a JSP page</h3>
<div class="paragraph">
<p>The XML view of a JSP page is a
namespace-aware document and it cannot be validated against a DTD except
in the most simple cases. To reduce confusion and possible unintended
performance consequences, the XML view of a JSP page will not include a
<code>DOCTYPE</code>.</p>
</div>
<div class="paragraph">
<p>There are several mechanisms that are aware
of namespaces that can be used to do validation of XML views of JSP
pages. The most popular mechanism is the W3C XML Schema language, but
others are also suited, including some very simple ones that may check,
for example, that only some elements are being used, or, inversely, that
they are not used. The <code>TagLibraryValidator</code> for a tag library permits
encapsulating this knowledge with a tag library.</p>
</div>
<div class="paragraph">
<p>The <code>TagLibraryValidator</code> acts on the XML
view of the JSP page. If the page was authored in JSP syntax, that view
does not provide any detail on template data (all being grouped inside
jsp:text elements), but fine detail can be described when using JSP
documents. Similarly, when applying an XSLT transformation to a JSP document,
XML fragments will be plainly visible, while the content of <code>jsp:text</code>
elements will not.</p>
</div>
</div>
<div class="sect2">
<h3 id="examples"><a class="anchor" href="#examples"></a>10.3. Examples</h3>
<div class="paragraph">
<p>This section presents various examples of XML
Views. The first shows a JSP page in XML syntax that includes XML
fragments. The second shows a JSP page in JSP syntax and its mapping to
XML syntax. The three following examples illustrate the semantics of
cross-syntax translation-time includes and the effect on the XML View.</p>
</div>
<div class="sect3">
<h4 id="a-jsp-document"><a class="anchor" href="#a-jsp-document"></a>10.3.1. A JSP Document</h4>
<div class="paragraph">
<p>This is an example of a very simple JSP
document that has some template XML elements. This particular example
describes a table that is a collection of 3 rows, with numeric values 1,
2, 3. The JSP Standard Tag Library is being used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;?xml version=&quot;1.0&quot;?&gt;
 &lt;table&gt;
   &lt;c:forEach
       xmlns:c=&quot;http://java.sun.com/jsp/jstl/core&quot;
       var=&quot;counter&quot; begin=&quot;1&quot; end=&quot;3&quot;&gt;
     &lt;row&gt;${counter}&lt;/row&gt;
   &lt;/c:forEach&gt;
 &lt;/table&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="a-jsp-page-and-its-corresponding-xml-view"><a class="anchor" href="#a-jsp-page-and-its-corresponding-xml-view"></a>10.3.2. A JSP Page and its Corresponding XML View</h4>
<div class="paragraph">
<p>Here is an example of mapping between JSP and
XML syntax.</p>
</div>
<div class="paragraph">
<p>For this JSP page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;html&gt;
&lt;title&gt;positiveTagLib&lt;/title&gt;
&lt;body&gt;

&lt;%@ taglib uri=&quot;http://java.apache.org/tomcat/examples-taglib&quot; prefix=&quot;eg&quot; %&gt;
&lt;%@ taglib uri=&quot;/tomcat/taglib&quot; prefix=&quot;test&quot; %&gt;
&lt;%@ taglib uri=&quot;WEB-INF/tlds/my.tld&quot; prefix=&quot;temp&quot; %&gt;

&lt;eg:test toBrowser=&quot;true&quot; att1=&quot;Working&quot;&gt;
Positive Test taglib directive &lt;/eg:test&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The XML View of the previous page is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;jsp:root</span>
<span class="attribute-name">xmlns:jsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/JSP/Page</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">xmlns:eg</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.apache.org/tomcat/examples-taglib</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">xmlns:test</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:jsptld:/tomcat/taglib</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">xmlns:temp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:jsptld:/WEB-INF/tlds/my.tld</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

<span class="tag">&lt;jsp:text&gt;</span><span class="inline-delimiter">&lt;![CDATA[</span>&lt;html&gt;
&lt;title&gt;positiveTagLib&lt;/title&gt;
&lt;body&gt;





<span class="inline-delimiter">]]&gt;</span><span class="tag">&lt;/jsp:text&gt;</span>
<span class="tag">&lt;eg:test</span> <span class="attribute-name">toBrowser</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">att1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Working</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;jsp:text&gt;</span>Positive test taglib directive<span class="tag">&lt;/jsp:text&gt;</span>
<span class="tag">&lt;/eg:test&gt;</span>
<span class="tag">&lt;jsp:text&gt;</span><span class="inline-delimiter">&lt;![CDATA[</span>
&lt;/body&gt;
&lt;/html&gt;
<span class="inline-delimiter">]]&gt;</span><span class="tag">&lt;/jsp:text&gt;</span>
<span class="tag">&lt;/jsp:root&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="clearing-out-default-namespace-on-include"><a class="anchor" href="#clearing-out-default-namespace-on-include"></a>10.3.3. Clearing Out Default Namespace on Include</h4>
<div class="paragraph">
<p>This example illustrates the need to clear
out the default namespace when doing a translation-time include of a JSP
document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;!-- a.jspx --&gt;
&lt;elementA&gt;
  &lt;tagB xmlns=&quot;http://namespace1&quot;&gt;
    &lt;jsp:directive.include file=&quot;b.jspx&quot;
        xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; /&gt;
  &lt;/tagB&gt;
&lt;/elementA&gt;

&lt;!-- b.jspx --&gt;
&lt;elementC /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting XML View for these two JSP
documents is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;jsp:root</span> <span class="attribute-name">xmlns:jsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/JSP/Page</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;elementA&gt;</span>
    <span class="tag">&lt;tagB</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;elementC</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/tagB&gt;</span>
  <span class="tag">&lt;/elementA&gt;</span>
<span class="tag">&lt;/jsp:root&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="taglib-direcive-adds-to-global-namespace"><a class="anchor" href="#taglib-direcive-adds-to-global-namespace"></a>10.3.4. Taglib Direcive Adds to Global Namespace</h4>
<div class="paragraph">
<p>This example illustrates the effect of the
taglib directive on the XML View. Notice how the taglib directive always
affects the <code>&lt;jsp:root&gt;</code> element, independent of where it is
encountered.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;!-- c.jspx --&gt;
&lt;elementD xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;&gt;
  &lt;jsp:directive.include file=&quot;d.jsp&quot; /&gt;
  &lt;jsp:directive.include file=&quot;e.jsp&quot; /&gt;
&lt;/elementD&gt;

&lt;%-- d.jsp --%&gt;
&lt;%@ taglib prefix=&quot;x&quot; uri=&quot;http://namespace2&quot; %&gt;
&lt;x:tagE /&gt;

&lt;%-- e.jsp --%&gt;
&lt;x:tagE /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting XML View of these documents and
pages is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;jsp:root</span> <span class="attribute-name">xmlns:x</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace2</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">xmlns:jsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/JSP/Page</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
  <span class="tag">&lt;elementD&gt;</span>
    <span class="tag">&lt;x:tagE</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;x:tagE</span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/elementD&gt;</span>
<span class="tag">&lt;/jsp:root&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="collective-application-of-inclusion-semantics"><a class="anchor" href="#collective-application-of-inclusion-semantics"></a>10.3.5. Collective Application of Inclusion Semantics</h4>
<div class="paragraph">
<p>This example illustrates how the various
translation-time include semantics are collectively applied:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%-- f.jsp --%&gt;
&lt;%@ taglib prefix=&quot;m&quot; uri=&quot;http://namespace3&quot; %&gt;
&lt;%@ include file=&quot;g.jspx&quot; %&gt;

&lt;!-- g.jspx --&gt;
&lt;tagF xmlns=&quot;http://namespace4&quot; &gt;
  &lt;y:tagG xmlns:y=&quot;http://namespace5&quot;&gt;
    &lt;tagH /&gt;
    &lt;jsp:directive.include file=&quot;i.jspx&quot;
        xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; /&gt;
  &lt;/y:tagG&gt;
  &lt;jsp:directive.include file=&quot;h.jsp&quot;
      xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot; /&gt;
  &lt;tagI /&gt;
&lt;/tagF&gt;

&lt;%-- h.jsp --%&gt;
&lt;%@ taglib prefix=&quot;n&quot; uri=&quot;http://namespace6&quot; %&gt;
&lt;m:tagJ /&gt;
&lt;n:tagK /&gt;

&lt;!-- i.jspx --&gt;
&lt;jsp:root xmlns:jsp=&quot;http://java.sun.com/JSP/Page&quot;&gt;
  &lt;y:tagL xmlns:y=&quot;http://namespace7&quot;&gt;
    &lt;elementM /&gt;
    &lt;jsp:directive.include file=&quot;h.jsp&quot; /&gt;
  &lt;/y:tagL&gt;
&lt;/jsp:root&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting XML View of these documents and
pages is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;jsp:root</span> <span class="attribute-name">xmlns:m</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace3</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">xmlns:n</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace6</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">xmlns:jsp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/JSP/Page</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
  <span class="tag">&lt;tagF</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;y:tagG</span> <span class="attribute-name">xmlns:y</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;tagH</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;y:tagL</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:y</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://namespace7</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;elementM</span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;m:tagJ</span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;n:tagK</span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;/y:tagL&gt;</span>
    <span class="tag">&lt;/y:tagG&gt;</span>
    <span class="tag">&lt;m:tagJ</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;n:tagK</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;tagI</span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/tagF&gt;</span>
<span class="tag">&lt;/jsp:root&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="part-ii" class="sect0"><a class="anchor" href="#part-ii"></a>Part II</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>The next chapter provides detail specification information on some portions of the JSP specification that
are intended for JSP Container Vendors, JSP Page authors, and JSP Tag Library authors.</p>
</div>
<div class="paragraph">
<p>The chapters is normative.</p>
</div>
<div class="paragraph">
<p>The chapter is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JSP Container</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JSP Container Vendors, JSP Page authors, and JSP Tag
Library authors should also read:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.servlet.jsp</code> Javadoc</p>
</li>
<li>
<p><code>jakarta.servlet.jsp.tagext</code> Javadoc</p>
</li>
<li>
<p>Expression Language Specification</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These external resources are considered normative within the context of this specification.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jsp-container"><a class="anchor" href="#jsp-container"></a>11. JSP Container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the contracts
between a JSP container and a JSP page, including the precompilation
protocol and debugging support requirements.</p>
</div>
<div class="paragraph">
<p>The information in this chapter is
independent of the Scripting Language used in the JSP page.
<a href="#scripting">Chapter 9, <em>Scripting</em></a> describes information specific to when the <code>language</code>
attribute of the <code>page</code> directive has <code>java</code> as its value.</p>
</div>
<div class="paragraph">
<p>JSP page implementation classes should use
the <code>JspFactory</code> and <code>PageContext</code> classes to take advantage of
platform-specific implementations.</p>
</div>
<div class="sect2">
<h3 id="jsp-page-model"><a class="anchor" href="#jsp-page-model"></a>11.1. JSP Page Model</h3>
<div class="paragraph">
<p>A JSP page is represented at execution time by
a JSP page implementation object and is executed by a JSP container. The
JSP page implementation object is a servlet. The JSP container delivers
requests from a client to a JSP page implementation object and responses
from the JSP page implementation object to the client.</p>
</div>
<div class="paragraph">
<p>The JSP page describes how to create a
response object from a request object for a given protocol, possibly
creating and/or using some other objects in the process . A JSP page may
also indicate how some events are to be handled. In JSP 4.1 only <code>init</code>
and <code>destroy</code> events are allowed events.</p>
</div>
<div class="paragraph">
<p>The JSP container must render a JSP page for the HTTP methods GET and POST
with identical responses.
The response for a HEAD request to a JSP page must be identical to the response
for a GET request minus the response body.
The behavior of the JSP container is undefined for other methods.</p>
</div>
<div class="sect3">
<h4 id="protocol-seen-by-the-web-server"><a class="anchor" href="#protocol-seen-by-the-web-server"></a>11.1.1. Protocol Seen by the Web Server</h4>
<div class="paragraph">
<p>The JSP container locates the appropriate
instance of the JSP page implementation class and delivers requests to
it using the servlet protocol. A JSP container may need to create such a
class dynamically from the JSP page source before delivering request and
response objects to it.</p>
</div>
<div class="paragraph">
<p>The <code>Servlet</code> class defines the contract
between the JSP container and the JSP page implementation class. When
the HTTP protocol is used, the contract is described by the
<code>HttpServlet</code> class. Most JSP pages use the HTTP protocol, but other
protocols are allowed by this specification.</p>
</div>
<div class="paragraph">
<p>The JSP container automatically makes a
number of server-side objects available to the JSP page implementation
object . See <a href="#implicit-objects">Section 1.8.3, &#8220;Implicit Objects&#8221;</a>.</p>
</div>
<div class="sect4">
<h5 id="protocol-seen-by-the-jsp-page-author"><a class="anchor" href="#protocol-seen-by-the-jsp-page-author"></a>11.1.1.1. Protocol Seen by the JSP Page Author</h5>
<div class="paragraph">
<p>The JSP specification defines the contract
between the JSP container and the JSP page author. This contract defines
the assumptions an author can make for the actions described in the JSP
page.</p>
</div>
<div class="paragraph">
<p>The main portion of this contract is the
<code>_jspService</code> method that is generated automatically by the JSP
container from the JSP page. The details of this contract are provided
in <a href="#scripting">Chapter 9, <em>Scripting</em></a>.</p>
</div>
<div class="paragraph">
<p>The contract also describes how a JSP author
can indicate what actions will be taken when the <code>init</code> and <code>destroy</code>
methods of the page implementation occur. In JSP 4.1 this is done by
defining methods with the names <code>jspInit</code> and <code>jspDestroy</code> in a
declaration scripting element in the JSP page. The <code>jspInit</code> method, if
present, will be called to prepare the page before the first request is
delivered. Similarly a JSP container can reclaim resources used by a JSP
page when a request is not being serviced by the JSP page by invoking
its <code>jspDestroy</code> method, if present.</p>
</div>
<div class="paragraph">
<p>A JSP page author may not (re)define servlet
methods through a declaration scripting element.</p>
</div>
<div class="paragraph">
<p>The JSP specification reserves names for
methods and variables starting with <code>jsp</code>, <code>jsp</code>, <code>jspx</code>, and
<code>jspx</code>, in any combination of upper and lower case.</p>
</div>
</div>
<div class="sect4">
<h5 id="the-httpjsppage-interface"><a class="anchor" href="#the-httpjsppage-interface"></a>11.1.1.2. The HttpJspPage Interface</h5>
<div class="paragraph">
<p>The enforcement of the contract between the
JSP container and the JSP page author is aided by the requirement that
the <code>Servlet</code> class corresponding to the JSP page must implement the
<code>jakarta.servlet.jsp.HttpJspPage</code> interface (or the
<code>jakarta.servlet.jsp.JspPage</code> interface if the protocol is not HTTP).</p>
</div>
<div id="Contracts_between_a_JSP_Page_and_a_JSP_Container" class="paragraph">
<div class="title"><strong>Figure JSP.11-1</strong> Contracts between a JSP Page and a JSP Container</div>
<p><span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4wLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDEvUkVDLVNWRy0yMDAxMDkwNC9EVEQvc3ZnMTAuZHRkIj4KPCEtLSBHZW5lcmF0byBkYSBNaWNyb3NvZnQgVmlzaW8gMTEuMCwgU1ZHIEV4cG9ydCwgdjEuMCBzcC0xMS5zdmcgUGFnaW5hIDEgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp2PSJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3Zpc2lvLzIwMDMvU1ZHRXh0ZW5zaW9ucy8iIHdpZHRoPSI2LjUxNjA2aW4iCgkJaGVpZ2h0PSIzLjgzODlpbiIgdmlld0JveD0iMCAwIDQ2OS4xNTcgMjc2LjQwMSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBjbGFzcz0ic3QxMiIKCQl4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+Cgk8djpkb2N1bWVudFByb3BlcnRpZXMgdjpsYW5nSUQ9IjEwNDAiIHY6bWV0cmljPSJ0cnVlIiB2OnZpZXdNYXJrdXA9ImZhbHNlIj4KCQk8djp1c2VyRGVmcz4KCQkJPHY6dWQgdjpuYW1lVT0iTUJTQUFkZGluT3V0bGluZVZpc2libGUiIHY6cHJvbXB0PSIiIHY6dmFsPSJWVDAoMSk6MjYiLz4KCQk8L3Y6dXNlckRlZnM+Cgk8L3Y6ZG9jdW1lbnRQcm9wZXJ0aWVzPgoKCTxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgk8IVtDREFUQVsKCQkuc3QxIHtmaWxsOiNmZmZmZmY7c3Ryb2tlOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDIge2ZpbGw6bm9uZTtzdHJva2U6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjAuNzJ9CgkJLnN0MyB7ZmlsbDojMDAwMDAwO2ZvbnQtZmFtaWx5OkFyaWFsO2ZvbnQtc2l6ZTowLjgzMzMzNmVtO2ZvbnQtd2VpZ2h0OmJvbGR9CgkJLnN0NCB7Zm9udC1zaXplOjFlbX0KCQkuc3Q1IHtzdHJva2U6IzAwMDAwMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjQuMDh9CgkJLnN0NiB7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDcge21hcmtlci1lbmQ6dXJsKCNtcmtyMTMtMzApO3N0cm9rZTojMDAwMDAwO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MC43Mn0KCQkuc3Q4IHtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC4yMjIyMjIyMjIyMjIyMn0KCQkuc3Q5IHtmaWxsOiMwMDAwMDA7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDEwIHtmaWxsOiNmZmZmZmY7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDowLjcyfQoJCS5zdDExIHtmaWxsOiMwMDAwMDA7Zm9udC1mYW1pbHk6QXJpYWw7Zm9udC1zaXplOjAuNjY2NjY0ZW19CgkJLnN0MTIge2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtmb250LXNpemU6MTI7b3ZlcmZsb3c6dmlzaWJsZTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLW1pdGVybGltaXQ6M30KCV1dPgoJPC9zdHlsZT4KCgk8ZGVmcyBpZD0iTWFya2VycyI+CgkJPGcgaWQ9ImxlbmQxMyI+CgkJCTxwYXRoIGQ9Ik0gMyAxIEwgLTAgMCBMIDMgLTEgTCAzIDEgIiBzdHlsZT0ic3Ryb2tlOm5vbmUiLz4KCQk8L2c+CgkJPG1hcmtlciBpZD0ibXJrcjEzLTMwIiBjbGFzcz0ic3Q4IiB2OmFycm93VHlwZT0iMTMiIHY6YXJyb3dTaXplPSIyIiB2OnNldGJhY2s9IjEzLjUiIHJlZlg9Ii0xMy41IiBvcmllbnQ9ImF1dG8iCgkJCQltYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiPgoJCQk8dXNlIHhsaW5rOmhyZWY9IiNsZW5kMTMiIHRyYW5zZm9ybT0ic2NhbGUoLTQuNSwtNC41KSAiLz4KCQk8L21hcmtlcj4KCTwvZGVmcz4KCTxnIHY6bUlEPSIwIiB2OmluZGV4PSIxIiB2Omdyb3VwQ29udGV4dD0iZm9yZWdyb3VuZFBhZ2UiPgoJCTx0aXRsZT5QYWdpbmEgMTwvdGl0bGU+CgkJPHY6cGFnZVByb3BlcnRpZXMgdjpkcmF3aW5nU2NhbGU9IjAuMDM5MzcwMSIgdjpwYWdlU2NhbGU9IjAuMDM5MzcwMSIgdjpkcmF3aW5nVW5pdHM9IjI0IiB2OnNoYWRvd09mZnNldFg9IjguNTAzOTQiCgkJCQl2OnNoYWRvd09mZnNldFk9Ii04LjUwMzk0Ii8+CgkJPGcgaWQ9InNoYXBlMTM5LTEiIHY6bUlEPSIxMzkiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43MiwtMC43MikiPgoJCQk8dGl0bGU+Rm9nbGlvLjEzOTwvdGl0bGU+CgkJCTxyZWN0IHg9IjAiIHk9IjEuNDQiIHdpZHRoPSI0NjcuNzE3IiBoZWlnaHQ9IjI3NC45NjEiIGNsYXNzPSJzdDEiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTEtMyIgdjptSUQ9IjExIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMxOC4wNzMsLTI1Mi44NzYpIj4KCQkJPHRpdGxlPkZvZ2xpby4xMTwvdGl0bGU+CgkJCTxkZXNjPkpTUCBQYWdlPC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSIzMS4zMDg3IiBjeT0iMjY3Ljc2OSIgd2lkdGg9IjYyLjYyIiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyNTkuMTM4IiB3aWR0aD0iNjIuNjE3MyIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iOC41MiIgeT0iMjcwLjc3IiBjbGFzcz0ic3QzIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPkpTUCBQYWdlPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEyLTYiIHY6bUlEPSIxMiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNTguNDE4LC0xMC42MDk0KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTI8L3RpdGxlPgoJCQk8ZGVzYz5UUkFOU0xBVElPTiBQSEFTRTwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iNjIuNDg5OCIgY3k9IjI2Ny43NjkiIHdpZHRoPSIxMjQuOTgiIGhlaWdodD0iMTcuMjYzIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjI1OS4xMzgiIHdpZHRoPSIxMjQuOTgiIGhlaWdodD0iMTcuMjYzIiBjbGFzcz0ic3QyIi8+CgkJCTx0ZXh0IHg9IjguMDQiIHk9IjI3MC43NyIgY2xhc3M9InN0MyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5UUkFOU0xBVElPTiBQSEFTRTwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUxNDQtOSIgdjptSUQ9IjE0NCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OC43NTE1LC0xLjkxNDA5KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTQ0PC90aXRsZT4KCQkJPGRlc2M+UkVRVUVTVCBQUk9DRVNTSU5HIFBIQVNFPC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI2My43Nzk1IiBjeT0iMjY0Ljg3MSIgd2lkdGg9IjEyNy41NiIgaGVpZ2h0PSIyMy4wNTk4Ii8+CgkJCTxyZWN0IHg9IjAiIHk9IjI1My4zNDEiIHdpZHRoPSIxMjcuNTU5IiBoZWlnaHQ9IjIzLjA1OTgiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iNC44OCIgeT0iMjYxLjg3IiBjbGFzcz0ic3QzIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPlJFUVVFU1QgUFJPQ0VTU0lORyA8djpuZXdsaW5lQ2hhci8+PHRzcGFuCgkJCQkJCXg9IjQ2LjU1IiBkeT0iMS4yZW0iIGNsYXNzPSJzdDQiPlBIQVNFPC90c3Bhbj48L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMS0xMyIgdjptSUQ9IjEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDI3LjQ5NiwyMzUuOTk2KSByb3RhdGUoOTApIHNjYWxlKC0xLDEpIj4KCQkJPHRpdGxlPkZvZ2xpby4xPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgMjc2LjQgTDIwOS43NiAyNzYuNCIgY2xhc3M9InN0NSIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGUyLTE2IiB2Om1JRD0iMiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzLjU1NDY1LC0yNTMuMDAzKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjwvdGl0bGU+CgkJCTxkZXNjPkpTUCBDb250YWluZXI8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjU0LjExMzQiIGN5PSIyNjcuNzY5IiB3aWR0aD0iMTA4LjIzIiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyNTkuMTM4IiB3aWR0aD0iMTA4LjIyNyIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iMTkuOTQiIHk9IjI3MC43NyIgY2xhc3M9InN0MyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5KU1AgQ29udGFpbmVyPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTMtMTkiIHY6bUlEPSIzIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU3MS45MjQsMjM1Ljk5Nikgcm90YXRlKDkwKSBzY2FsZSgtMSwxKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMzwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDI3Ni40IEwyMDkuNzYgMjc2LjQiIGNsYXNzPSJzdDYiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlNC0yMiIgdjptSUQ9IjQiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy41NTQ2NSwtMjA3LjY0OSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjQ8L3RpdGxlPgoJCQk8ZGVzYz5pbml0IGV2ZW50PC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSIyOC40NzQiIGN5PSIyNjcuNzY5IiB3aWR0aD0iNTYuOTUiIGhlaWdodD0iMTcuMjYzIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjI1OS4xMzgiIHdpZHRoPSI1Ni45NDgiIGhlaWdodD0iMTcuMjYzIiBjbGFzcz0ic3QyIi8+CgkJCTx0ZXh0IHg9IjYuNTMiIHk9IjI3MC43NyIgY2xhc3M9InN0MyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5pbml0IGV2ZW50PC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTUtMjUiIHY6bUlEPSI1IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNS41MjYsMzk1LjA3Nikgc2NhbGUoMSwtMSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjU8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCAyNzYuNCBMNTguMyAyNzYuNCIgY2xhc3M9InN0NyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU2LTMxIiB2Om1JRD0iNiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MzYuMTk5LDExNC4xMDYpIHJvdGF0ZSg5MCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjY8L3RpdGxlPgoJCQk8cGF0aCBkPSJNOC43OSAyNzYuNCBMMCAyNzYuNCBMNC4zOSAyNjIuNDkgTDguNzkgMjc2LjQgWiIgY2xhc3M9InN0OSIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU5LTMzIiB2Om1JRD0iOSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzLjU1NDY1LC0xNDcuODY2KSI+CgkJCTx0aXRsZT5Gb2dsaW8uOTwvdGl0bGU+CgkJCTxkZXNjPnJlcXVlc3Q8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjI4LjQ3NCIgY3k9IjI2Ny43NjkiIHdpZHRoPSI1Ni45NSIgaGVpZ2h0PSIxNy4yNjMiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjU5LjEzOCIgd2lkdGg9IjU2Ljk0OCIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iMTAuNDEiIHk9IjI3MC43NyIgY2xhc3M9InN0MyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5yZXF1ZXN0PC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEwLTM2IiB2Om1JRD0iMTAiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC45MjIzNiwtMTI1LjQ0NCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjEwPC90aXRsZT4KCQkJPGRlc2M+cmVzcG9uc2U8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjI4LjQ3NCIgY3k9IjI2Ny43NjkiIHdpZHRoPSI1Ni45NSIgaGVpZ2h0PSIxNy4yNjMiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjU5LjEzOCIgd2lkdGg9IjU2Ljk0OCIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iNi4yNCIgeT0iMjcwLjc3IiBjbGFzcz0ic3QzIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPnJlc3BvbnNlPC90ZXh0PgkJPC9nPgoJCTxnIGlkPSJzaGFwZTctMzkiIHY6bUlEPSI3IiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3Ni41NDQsNDE3Ljc1Mykgcm90YXRlKDE4MCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjc8L3RpdGxlPgoJCQk8cGF0aCBkPSJNMCAyNzYuNCBMNTguMyAyNzYuNCIgY2xhc3M9InN0NyIvPgoJCTwvZz4KCQk8ZyBpZD0ic2hhcGU4LTQ0IiB2Om1JRD0iOCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTU0LjEyOSwxMzYuNzgzKSByb3RhdGUoLTkwKSBzY2FsZSgtMSwxKSI+CgkJCTx0aXRsZT5Gb2dsaW8uODwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik04Ljc5IDI3Ni40IEwwIDI3Ni40IEw0LjM5IDI2Mi40OSBMOC43OSAyNzYuNCBaIiBjbGFzcz0ic3Q5Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTEzLTQ2IiB2Om1JRD0iMTMiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA1LjUyNiwzMzguMSkgc2NhbGUoMSwtMSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjEzPC90aXRsZT4KCQkJPHBhdGggZD0iTTAgMjc2LjQgTDU4LjMgMjc2LjQiIGNsYXNzPSJzdDciLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTQtNTEiIHY6bUlEPSIxNCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MzYuMTk5LDU3LjEyOTQpIHJvdGF0ZSg5MCkiPgoJCQk8dGl0bGU+Rm9nbGlvLjE0PC90aXRsZT4KCQkJPHBhdGggZD0iTTguNzkgMjc2LjQgTDAgMjc2LjQgTDQuMzkgMjYyLjQ5IEw4Ljc5IDI3Ni40IFoiIGNsYXNzPSJzdDkiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMTUtNTMiIHY6bUlEPSIxNSIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzLjY0NDExLC03MS41ODYxKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTU8L3RpdGxlPgoJCQk8ZGVzYz5kZXN0cm95IGV2ZW50PC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSIzOS43Njc5IiBjeT0iMjY3Ljc2OSIgd2lkdGg9Ijc5LjU0IiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyNTkuMTM4IiB3aWR0aD0iNzkuNTM1NyIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iNy4yNiIgeT0iMjcwLjc3IiBjbGFzcz0ic3QzIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPmRlc3Ryb3kgZXZlbnQ8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMTYtNTYiIHY6bUlEPSIxNiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDUuNjE1LDQ3MS41ODMpIHNjYWxlKDEsLTEpIj4KCQkJPHRpdGxlPkZvZ2xpby4xNjwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik0wIDI3Ni40IEw1OC4zIDI3Ni40IiBjbGFzcz0ic3Q3Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE3LTYxIiB2Om1JRD0iMTciIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDM2LjI4OSwxOTAuNjEzKSByb3RhdGUoOTApIj4KCQkJPHRpdGxlPkZvZ2xpby4xNzwvdGl0bGU+CgkJCTxwYXRoIGQ9Ik04Ljc5IDI3Ni40IEwwIDI3Ni40IEw0LjM5IDI2Mi40OSBMOC43OSAyNzYuNCBaIiBjbGFzcz0ic3Q5Ii8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE4LTYzIiB2Om1JRD0iMTgiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg2LjM4OSwtMjAxLjk4KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMTg8L3RpdGxlPgoJCQk8cmVjdCB4PSIwIiB5PSIyNDguMDU0IiB3aWR0aD0iODYuNDU2NyIgaGVpZ2h0PSIyOC4zNDY1IiByeD0iOC41MDM5NCIgcnk9IjguNTAzOTQiIGNsYXNzPSJzdDEwIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTE5LTY1IiB2Om1JRD0iMTkiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTk2LjMxMSwtMjA3LjY0OSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjE5PC90aXRsZT4KCQkJPGRlc2M+anNwSW5pdDwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iMjQuMDk0NSIgY3k9IjI2Ny43NjkiIHdpZHRoPSI0OC4xOSIgaGVpZ2h0PSIxNy4yNjMiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjU5LjEzOCIgd2lkdGg9IjQ4LjE4OSIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iOS4zNyIgeT0iMjcwLjc3IiBjbGFzcz0ic3QzIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPmpzcEluaXQ8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjAtNjgiIHY6bUlEPSIyMCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODYuMzg5LC0xMjYuODYyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjA8L3RpdGxlPgoJCQk8cmVjdCB4PSIwIiB5PSIyMzMuODgxIiB3aWR0aD0iODYuNDU2NyIgaGVpZ2h0PSI0Mi41MTk3IiByeD0iOC41MDM5NCIgcnk9IjguNTAzOTQiIGNsYXNzPSJzdDEwIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTIxLTcwIiB2Om1JRD0iMjEiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg3LjgwNywtMTM1LjM2NikiPgoJCQk8dGl0bGU+Rm9nbGlvLjIxPC90aXRsZT4KCQkJPGRlc2M+X2pzcFNlcnZpY2U8L2Rlc2M+CgkJCTx2OnRleHRCbG9jayB2Om1hcmdpbnM9InJlY3QoNCw0LDQsNCkiIHY6dGFiU3BhY2U9IjQyLjUxOTciLz4KCQkJPHY6dGV4dFJlY3QgY3g9IjM0LjAxNTciIGN5PSIyNjMuNDUzIiB3aWR0aD0iNjguMDQiIGhlaWdodD0iMjUuODk0NSIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyNTAuNTA2IiB3aWR0aD0iNjguMDMxNSIgaGVpZ2h0PSIyNS44OTQ1IiBjbGFzcz0ic3QyIi8+CgkJCTx0ZXh0IHg9IjYuMjIiIHk9IjI2Ni40NSIgY2xhc3M9InN0MyIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaCB2Omhvcml6QWxpZ249IjEiLz48djp0YWJMaXN0Lz5fanNwU2VydmljZTwvdGV4dD4JCTwvZz4KCQk8ZyBpZD0ic2hhcGUyMi03MyIgdjptSUQ9IjIyIiB2Omdyb3VwQ29udGV4dD0ic2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4Ni4zODksLTY1LjkxNjkpIj4KCQkJPHRpdGxlPkZvZ2xpby4yMjwvdGl0bGU+CgkJCTxyZWN0IHg9IjAiIHk9IjI0OC4wNTQiIHdpZHRoPSI4Ni40NTY3IiBoZWlnaHQ9IjI4LjM0NjUiIHJ4PSI4LjUwMzk0IiByeT0iOC41MDM5NCIgY2xhc3M9InN0MTAiLz4KCQk8L2c+CgkJPGcgaWQ9InNoYXBlMjMtNzUiIHY6bUlEPSIyMyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTAuNjQxLC03MS41ODYxKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjM8L3RpdGxlPgoJCQk8ZGVzYz5qc3BEZXN0cm95PC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSIzMS4xODExIiBjeT0iMjY3Ljc2OSIgd2lkdGg9IjYyLjM3IiBoZWlnaHQ9IjE3LjI2MyIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyNTkuMTM4IiB3aWR0aD0iNjIuMzYyMiIgaGVpZ2h0PSIxNy4yNjMiIGNsYXNzPSJzdDIiLz4KCQkJPHRleHQgeD0iNS4zNCIgeT0iMjcwLjc3IiBjbGFzcz0ic3QzIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoIHY6aG9yaXpBbGlnbj0iMSIvPjx2OnRhYkxpc3QvPmpzcERlc3Ryb3k8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjQtNzgiIHY6bUlEPSIyNCIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMDQuMDI3LC02OC43NTE1KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjQ8L3RpdGxlPgoJCQk8cmVjdCB4PSIwIiB5PSIxMTQuODI2IiB3aWR0aD0iMTU4Ljc0IiBoZWlnaHQ9IjE2MS41NzUiIGNsYXNzPSJzdDEwIi8+CgkJPC9nPgoJCTxnIGlkPSJzaGFwZTI1LTgwIiB2Om1JRD0iMjUiIHY6Z3JvdXBDb250ZXh0PSJzaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzEyLjUzMSwtMTk2LjMxMSkiPgoJCQk8dGl0bGU+Rm9nbGlvLjI1PC90aXRsZT4KCQkJPGRlc2M+JiM2MDslISBwdWJsaWMgdm9pZCBqc3BJbml0KCkgLi4uPC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI2NS4yNjA2IiBjeT0iMjYyLjEiIHdpZHRoPSIxMzAuNTMiIGhlaWdodD0iMjguNjAxNiIvPgoJCQk8cmVjdCB4PSIwIiB5PSIyNDcuNzk5IiB3aWR0aD0iMTMwLjUyMSIgaGVpZ2h0PSIyOC42MDE2IiBjbGFzcz0ic3QyIi8+CgkJCTx0ZXh0IHg9IjQiIHk9IjI1OS43IiBjbGFzcz0ic3QxMSIgdjpsYW5nSUQ9IjEwNDAiPjx2OnBhcmFncmFwaC8+PHY6dGFiTGlzdC8+JiM2MDslITx2Om5ld2xpbmVDaGFyLz48dHNwYW4geD0iNCIKCQkJCQkJZHk9IjEuMmVtIiBjbGFzcz0ic3Q0Ij5wdWJsaWMgdm9pZCBqc3BJbml0PC90c3Bhbj4oKSAuLi48L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjYtODQiIHY6bUlEPSIyNiIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTIuNTMxLC0xNDIuMTk3KSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjY8L3RpdGxlPgoJCQk8ZGVzYz5wdWJsaWMgdm9pZCBqc3BEZXN0cm95KCkg4oCmICUmIzYyOzwvZGVzYz4KCQkJPHY6dGV4dEJsb2NrIHY6bWFyZ2lucz0icmVjdCg0LDQsNCw0KSIgdjp0YWJTcGFjZT0iNDIuNTE5NyIvPgoJCQk8djp0ZXh0UmVjdCBjeD0iNjUuMjYwNiIgY3k9IjI2Mi4xIiB3aWR0aD0iMTMwLjUzIiBoZWlnaHQ9IjI4LjYwMTYiLz4KCQkJPHJlY3QgeD0iMCIgeT0iMjQ3Ljc5OSIgd2lkdGg9IjEzMC41MjEiIGhlaWdodD0iMjguNjAxNiIgY2xhc3M9InN0MiIvPgoJCQk8dGV4dCB4PSI0IiB5PSIyNTkuNyIgY2xhc3M9InN0MTEiIHY6bGFuZ0lEPSIxMDQwIj48djpwYXJhZ3JhcGgvPjx2OnRhYkxpc3QvPnB1YmxpYyB2b2lkIGpzcERlc3Ryb3koKSDigKY8djpuZXdsaW5lQ2hhci8+PHRzcGFuCgkJCQkJCXg9IjQiIGR5PSIxLjJlbSIgY2xhc3M9InN0NCI+JTwvdHNwYW4+JiM2Mjs8L3RleHQ+CQk8L2c+CgkJPGcgaWQ9InNoYXBlMjctODgiIHY6bUlEPSIyNyIgdjpncm91cENvbnRleHQ9InNoYXBlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTIuNTMxLC0xMDIuNTEyKSI+CgkJCTx0aXRsZT5Gb2dsaW8uMjc8L3RpdGxlPgoJCQk8ZGVzYz4mIzYwO2h0bWwmIzYyOyBUaGlzIGlzIHRoZSByZXNwb25zZSAuLi4gJiM2MDsvaHRtbCYjNjI7PC9kZXNjPgoJCQk8djp0ZXh0QmxvY2sgdjptYXJnaW5zPSJyZWN0KDQsNCw0LDQpIiB2OnRhYlNwYWNlPSI0Mi41MTk3Ii8+CgkJCTx2OnRleHRSZWN0IGN4PSI2NS4yNjA2IiBjeT0iMjU2LjQzMSIgd2lkdGg9IjEzMC41MyIgaGVpZ2h0PSIzOS45NDAyIi8+CgkJCTxyZWN0IHg9IjAiIHk9IjIzNi40NiIgd2lkdGg9IjEzMC41MjEiIGhlaWdodD0iMzkuOTQwMiIgY2xhc3M9InN0MiIvPgoJCQk8dGV4dCB4PSI0IiB5PSIyNDkuMjMiIGNsYXNzPSJzdDExIiB2OmxhbmdJRD0iMTA0MCI+PHY6cGFyYWdyYXBoLz48djp0YWJMaXN0Lz4mIzYwO2h0bWwmIzYyOzx2Om5ld2xpbmVDaGFyLz48dHNwYW4KCQkJCQkJeD0iNCIgZHk9IjEuMmVtIiBjbGFzcz0ic3Q0Ij5UaGlzIGlzIHRoZSByZXNwb25zZSA8L3RzcGFuPi4uLjx2Om5ld2xpbmVDaGFyLz48dHNwYW4geD0iNCIgZHk9IjEuMmVtIgoJCQkJCQljbGFzcz0ic3Q0Ij4mIzYwOzwvdHNwYW4+L2h0bWwmIzYyOzwvdGV4dD4JCTwvZz4KCTwvZz4KPC9zdmc+Cg==" alt="image"></span></p>
</div>
<div class="paragraph">
<p>The involved contracts are shown in
<a href="#Contracts_between_a_JSP_Page_and_a_JSP_Container"><strong>Figure JSP.11-1</strong> Contracts between a JSP Page and a JSP Container</a>. We now revisit
this whole process in more detail.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jsp-page-implementation-class"><a class="anchor" href="#jsp-page-implementation-class"></a>11.2. JSP Page Implementation Class</h3>
<div class="paragraph">
<p>The JSP container creates a JSP page
implementation class for each JSP page.</p>
</div>
<div class="paragraph">
<p>The name of the JSP page implementation class
is implementation dependent.</p>
</div>
<div class="paragraph">
<p>The JSP Page implementation object belongs to
an implementation-dependent named package. The package used may vary
between one JSP and another, so minimal assumptions should be made.</p>
</div>
<div class="paragraph">
<p>As of JSP 2.0, it is illegal to refer to any
classes from the unnamed (a.k.a. default) package. This will result in a
translation error. This restriction also applies for all other
cases where classes are referenced, such as when specifying the class
name for a tag in a TLD.</p>
</div>
<div class="paragraph">
<p>The JSP container may create the
implementation class for a JSP page, or a superclass may be provided by
the JSP page author through the use of the <code>extends</code> attribute in the
<code>page</code> directive.</p>
</div>
<div class="paragraph">
<p>The extends mechanism is available for
sophisticated users. It should be used with extreme care as it restricts
decisions that a JSP container can make. It may restrict efforts to
improve performance, for example.</p>
</div>
<div class="paragraph">
<p>The JSP page implementation class will
implement <code>jakarta.servlet.Servlet</code> and requests are delivered to the
class as per the rules in the Servlet 6.2 specification.</p>
</div>
<div class="paragraph">
<p>A JSP page implementation class may depend on
support classes. If the JSP page implementation class is packaged into a
WAR, any dependent classes will have to be included so it will be
portable across all JSP containers.</p>
</div>
<div class="paragraph">
<p>A JSP page author writes a JSP page expecting
that the client and the server will communicate using a certain
protocol. The JSP container must guarantee that requests to and
responses from the page use that protocol. Most JSP pages use HTTP, and
their implementation classes must implement the <code>HttpJspPage</code> interface,
which extends <code>JspPage</code>. If the protocol is not HTTP, then the class
will implement an interface that extends <code>JspPage</code>.</p>
</div>
<div class="sect3">
<h4 id="api-contracts"><a class="anchor" href="#api-contracts"></a>11.2.1. API Contracts</h4>
<div class="paragraph">
<p>The contract between the JSP container and a
Java class implementing a JSP page corresponds to the <code>Servlet</code>
interface. Refer to the Servlet 6.2 specification for details.</p>
</div>
<div class="paragraph">
<p>The responsibility for adhering to this
contract rests on the JSP container implementation if the JSP page does
not use the <code>extends</code> attribute of the <code>jsp</code> directive. If the <code>extends</code>
attribute of the <code>jsp</code> directive is used, the JSP page author must
guarantee that the superclass given in the extends attribute supports
this contract.<a id="a2917"></a></p>
</div>
<table id="How_the_JSP_Container_Processes_JSP_Pages" class="tableblock frame-all grid-all stretch">
<caption class="title"><strong>Table JSP.11-1</strong> How the JSP Container Processes JSP Pages</caption>
<colgroup>
<col style="width: 55%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Methods the JSP Container Invokes</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void jspInit()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method is optionally defined in JSP page.<br>
Method is invoked when the JSP page is
initialized.<br>
When method is called all the methods in
<code>servlet</code>, including <code>getServletConfig</code> are available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void jspDestroy()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method is optionally defined in JSP page.<br>
Method is invoked before destroying the page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void _jspService(&lt;ServletRequestSubtype&gt;,
&lt;ServletResponseSubtype&gt;) throws
IOException, ServletException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method may <strong>not</strong> be defined in JSP page.<br>
The JSP container automatically generates
this method, based on the contents of the JSP page.<br>
Method invoked at each client request.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="request-and-response-parameters"><a class="anchor" href="#request-and-response-parameters"></a>11.2.2. Request and Response Parameters</h4>
<div class="paragraph">
<p>As shown in <a href="#How_the_JSP_Container_Processes_JSP_Pages"><strong>Table JSP.11-1</strong> , &#8220;How the JSP Container Processes JSP Pages&#8221;</a>  the methods
in the contract between the JSP container and the JSP page require
request and response parameters.</p>
</div>
<div class="paragraph">
<p>The formal type of the request parameter
(which this specification calls <code>&lt;ServletRequestSubtype&gt;</code>) is an
interface that extends <code>jakarta.servlet.ServletRequest</code>. The interface
must define a protocol-dependent request contract between the JSP
container and the class that implements the JSP page.</p>
</div>
<div class="paragraph">
<p>Likewise, the formal type of the response
parameter (which this specification calls <code>&lt;ServletResponseSubtype&gt;</code>)
is an interface that extends <code>jakarta.servlet.ServletResponse</code>. The
interface must define a protocol-dependent response contract between the
JSP container and the class that implements the JSP page.</p>
</div>
<div class="paragraph">
<p>The request and response interfaces together
describe a protocol-dependent contract between the JSP container and the
class that implements the JSP page. The HTTP contract is defined by the
<code>jakarta.servlet.http.HttpServletRequest</code> and
<code>jakarta.servlet.http.HttpServletResponse</code> interfaces.</p>
</div>
<div class="paragraph">
<p>The <code>JspPage</code> interface refers to these
methods, but cannot describe syntactically the methods involving the
<code>Servlet(Request,Response)</code> subtypes. However, interfaces for specific
protocols that extend <code>JspPage</code> can, just as <code>HttpJspPage</code> describes
them for the HTTP protocol.</p>
</div>
<div class="paragraph">
<p>JSP containers that conform to this
specification (in both JSP page implementation classes and JSP container
runtime) must support the <code>request</code> and <code>response</code> interfaces for the
HTTP protocol as described in this section.</p>
</div>
</div>
<div class="sect3">
<h4 id="omitting-the-extends-attribute"><a class="anchor" href="#omitting-the-extends-attribute"></a>11.2.3. Omitting the extends Attribute</h4>
<div class="paragraph">
<p>If the <code>extends</code> attribute of the <code>page</code>
directive (see Section <a href="#the-page-directive">Section 1.10.1, &#8220;The <code>page</code> Directive&#8221;</a>) in a JSP page is not
used, the JSP container can generate any class that satisfies the
contract described in <a href="#How_the_JSP_Container_Processes_JSP_Pages"><strong>Table JSP.11-1</strong> , &#8220;How the JSP Container Processes JSP Pages&#8221;</a>
when it transforms the JSP page.</p>
</div>
<div class="paragraph">
<p>In the following code examples, <a href="#A_Generic_HTTP_Superclass"><strong>Code Example JSP.11-1</strong> A Generic HTTP Superclass</a>
illustrates a generic HTTP superclass named <code>ExampleHttpSuper</code>.
<a href="#The_Java_Class_Generated_From_a_JSP_Page"><strong>Code Example JSP.11-2</strong> The Java Class Generated From a JSP Page</a> shows a subclass named
<code>_jsp1344</code> that extends <code>ExampleHttpSuper</code> and is the class generated
from the JSP page. By using separate <code>_jsp1344</code> and <code>ExampleHttpSuper</code>
classes, the JSP page translator does not need to discover whether the
JSP page includes a declaration with <code>jspInit</code> or <code>jspDestroy</code>. This
significantly simplifies the implementation.</p>
</div>
<div id="A_Generic_HTTP_Superclass" class="listingblock">
<div class="title"><strong>Code Example JSP.11-1</strong> A Generic HTTP Superclass</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">imports jakarta.servlet.*;
imports jakarta.servlet.http.*;
imports jakarta.servlet.jsp.*;

<span class="comment">/**
 * An example of a superclass for an HTTP JSP class
 */</span>

<span class="directive">abstract</span> <span class="type">class</span> <span class="class">ExampleHttpSuper</span> <span class="directive">implements</span> HttpJspPage {
  <span class="directive">private</span> ServletConfig config;

  <span class="directive">final</span> <span class="directive">public</span> <span class="type">void</span> init(ServletConfig config) <span class="directive">throws</span> ServletException {
    <span class="local-variable">this</span>.config = config;
    jspInit();
  }

  <span class="directive">public</span> <span class="type">void</span> jspInit() {
  }

  <span class="directive">public</span> <span class="type">void</span> jspDestroy() {
  }

  <span class="directive">final</span> <span class="directive">public</span> ServletConfig getServletConfig() {
    <span class="keyword">return</span> config;
  }

  <span class="comment">// This one is not final so it can be overridden by a more precise method</span>
  <span class="directive">public</span> <span class="predefined-type">String</span> getServletInfo() {
    <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">A Superclass for an HTTP JSP</span><span class="delimiter">&quot;</span></span>; <span class="comment">// maybe better?</span>
  }

  <span class="directive">final</span> <span class="directive">public</span> <span class="type">void</span> destroy() {
    jspDestroy();
  }

  <span class="comment">/**
   * The entry point into service.
   */</span>
  <span class="directive">final</span> <span class="directive">public</span> <span class="type">void</span> service(ServletRequest req, ServletResponse res)
      <span class="directive">throws</span> ServletException, <span class="exception">IOException</span> {

    <span class="comment">// casting exceptions will be raised if an internal error.</span>
    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;

    _jspService(request, response);
  }

  <span class="comment">/**
   * abstract method to be provided by the JSP processor in the subclass
   * Must be defined in subclass.
   */</span>
  <span class="directive">abstract</span> <span class="directive">public</span> <span class="type">void</span> _jspService(HttpServletRequest request,
      HttpServletResponse response) <span class="directive">throws</span> ServletException, <span class="exception">IOException</span>;
  }</code></pre>
</div>
</div>
<div id="The_Java_Class_Generated_From_a_JSP_Page" class="listingblock">
<div class="title"><strong>Code Example JSP.11-2</strong> The Java Class Generated From a JSP Page</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">imports jakarta.servlet.*;
imports jakarta.servlet.http.*;
imports jakarta.servlet.jsp.*;

<span class="comment">/**
 * An example of a class generated for a JSP.
 *
 * The name of the class is unpredictable.
 * We are assuming that this is an HTTP JSP page (like almost all are)
 */</span>
<span class="type">class</span> <span class="class">_jsp1344</span> <span class="directive">extends</span> ExampleHttpSuper {

  <span class="comment">// Next code inserted directly via declarations.</span>
  <span class="comment">// Any of the following pieces may or not be present</span>
  <span class="comment">// if they are not defined here the superclass methods</span>
  <span class="comment">// will be used.</span>

  <span class="directive">public</span> <span class="type">void</span> jspInit() {...}
  <span class="directive">public</span> <span class="type">void</span> jspDestroy() {...}

  <span class="comment">// The next method is generated automatically by the</span>
  <span class="comment">// JSP processor.</span>
  <span class="comment">// body of JSP page</span>

  <span class="directive">public</span> <span class="type">void</span> _jspService(HttpServletRequest request,
      HttpServletResponse response)
      <span class="directive">throws</span> ServletException, <span class="exception">IOException</span> {

    <span class="comment">// initialization of the implicit variables</span>
    <span class="comment">// ...</span>

    <span class="comment">// next is code from scriptlets, expressions, and static text.</span>

  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-the-extends-attribute"><a class="anchor" href="#using-the-extends-attribute"></a>11.2.4. Using the extends Attribute</h4>
<div class="paragraph">
<p>If the JSP page author uses <code>extends</code>, the
generated class is identical to the one shown in
<a href="#The_Java_Class_Generated_From_a_JSP_Page"><strong>Code Example JSP.11-2</strong> The Java Class Generated From a JSP Page</a>, except that the class
name is the one specified in the <code>extends</code> attribute.</p>
</div>
<div class="paragraph">
<p>The contract on the JSP page implementation
class does not change. The JSP container should check (usually through
reflection) that the provided superclass:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Implements <code>HttpJspPage</code> if the protocol is
HTTP, or <code>JspPage</code> otherwise.</p>
</li>
<li>
<p>All of the methods in the <code>Servlet</code>
interface are declared final.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, it is the responsibility of the
JSP page author that the provided superclass satisfies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>service</code> method of the servlet API
invokes the <code>_jspService</code> method.</p>
</li>
<li>
<p>The <code>init(ServletConfig)</code> method stores the
configuration, makes it available via <code>getServletConfig</code>, then invokes
<code>jspInit</code>.</p>
</li>
<li>
<p>The <code>destroy</code> method invokes <code>jspDestroy</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A JSP container may give a fatal translation
error if it detects that the provided superclass does not satisfy these
requirements, but most JSP containers will not check them.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="buffering"><a class="anchor" href="#buffering"></a>11.3. Buffering</h3>
<div class="paragraph">
<p>The JSP container buffers data (if the jsp
directive specifies it using the buffer attribute) as it is sent from
the server to the client. Headers are not sent to the client until the
first flush method is invoked. Therefore, it is possible to call methods
that modify the response header, such as <code>setContentType</code>,
<code>sendRedirect</code>, or error methods, up until the flush method is executed
and the headers are sent. After that point, these methods become
invalid, as per the Servlet specification.</p>
</div>
<div class="paragraph">
<p>The <code>jakarta.servlet.jsp.JspWriter</code> class
buffers and sends output. The <code>JspWriter</code> class is used in the
<code>_jspService</code> method as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">jakarta.servlet.jsp.JspWriter</span>;

<span class="directive">static</span> JspFactory jspFactory = JspFactory.getDefaultFactory();

_jspService(&lt;SRequest&gt; request, &lt;SResponse&gt; response) {

  <span class="comment">// initialization of implicit variables...</span>
  PageContext pageContext = jspFactory.createPageContext(
      <span class="local-variable">this</span>,
      request,
      response,
      <span class="predefined-constant">false</span>,
      PageContext.DEFAULT<span class="error">`</span>BUFFER,
      <span class="predefined-constant">false</span>);
  JSPWriter out = pageContext.getOut();
  <span class="comment">// ...</span>
  <span class="comment">// ... the body goes here using &quot;out&quot;</span>
  <span class="comment">// ...</span>
  out.flush();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The complete listing of
<code>jakarta.servlet.jsp.JspWriter</code> can be found in
the <code>jakarta.servlet.jsp</code> Javadoc.</p>
</div>
<div class="paragraph">
<p>With buffering turned on, a redirect method
can still be used in a scriptlet in a <code>.jsp</code> file, by invoking
<code>response.redirect(someURL)</code> directly.</p>
</div>
</div>
<div class="sect2">
<h3 id="precompilation"><a class="anchor" href="#precompilation"></a>11.4. Precompilation</h3>
<div class="paragraph">
<p>A JSP page that is using the HTTP protocol
will receive HTTP requests. JSP 4.1 compliant containers must support a
simple precompilation protocol, as well as some basic reserved parameter
names. Note that the precompilation protocol is related but not the same
as the notion of compiling a JSP page into a <code>Servlet</code> class
(<a href="#packaging-jsp-pages">Appendix A, <em>Packaging JSP Pages</em></a>).</p>
</div>
<div class="sect3">
<h4 id="request-parameter-names"><a class="anchor" href="#request-parameter-names"></a>11.4.1. Request Parameter Names</h4>
<div class="paragraph">
<p>All request parameter names that start with
the prefix <code>jsp</code> are reserved by the JSP specification and should not be
used by any user or implementation except as indicated by the
specification.</p>
</div>
<div class="paragraph">
<p>All JSPs pages should ignore (not depend on)
any parameter that starts with <code>jsp_</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="precompilation-protocol"><a class="anchor" href="#precompilation-protocol"></a>11.4.2. Precompilation Protocol</h4>
<div class="paragraph">
<p>A request to a JSP page that has a request
parameter with name <code>jsp_precompile</code> is a precompilation request. The
<code>jsp_precompile</code> parameter may have no value, or may have values <code>true</code>
or <code>false</code>. In all cases, the request should not be delivered to the
JSP page.</p>
</div>
<div class="paragraph">
<p>The intention of the precompilation request
is that of a suggestion to the JSP container to precompile the JSP page
into its JSP page implementation class. The suggestion is conveyed by
giving the parameter the value <code>true</code> or no value, but note that the
request can be ignored.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>?jsp_precompile</code></p>
</li>
<li>
<p><code>?jsp_precompile=true</code></p>
</li>
<li>
<p><code>?jsp_precompile=false</code></p>
</li>
<li>
<p><code>?foobar=foobaz&amp;jsp_precompile=true</code></p>
</li>
<li>
<p><code>?foobar=foobaz&amp;jsp_precompile=false</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1, 2, and 4 are legal; the request will not
be delivered to the page. 3 and 5 are legal; the request will not be
delivered to the page.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><code>?jsp_precompile=foo</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This is illegal and will generate an HTTP
error; 500 (Server error).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="debugging-requirements"><a class="anchor" href="#debugging-requirements"></a>11.5. Debugging Requirements</h3>
<div class="paragraph">
<p>The Jakarta Debugging Support for Other Languages specification provides
the JSP Compiler with a standard format to convey source map debugging
information to tools such as debuggers. See
<code><a href="https://jakarta.ee/specifications/debugging/2.0/" class="bare">https://jakarta.ee/specifications/debugging/2.0/</a></code> for details.</p>
</div>
<div class="paragraph">
<p>JSP 4.1 containers are required to provide debugging support for JSP pages
and tag files written in either standard or XML syntax.</p>
</div>
<div class="paragraph">
<p>The JSP compiler must produce <code>.class</code> files
with a <code>SourceDebugExtension</code> attribute, mapping each line or lines of
JSP code to the corresponding generated line or lines of Java code. For
both pages and tag files, the stratum that maps to the original source
should be named <code>JSP</code> in the Source Debug Extension (this stratum name
is reserved for use by the JSP specification). This stratum should be
specified as the default, unless the page or tag file was generated from
some other source.</p>
</div>
<div class="paragraph">
<p>The exact mechanism for causing the JSP
compiler to produce source map debugging information is
implementation-dependent.</p>
</div>
<div class="sect3">
<h4 id="line-number-mapping-guidelines"><a class="anchor" href="#line-number-mapping-guidelines"></a>11.5.1. Line Number Mapping Guidelines</h4>
<div class="paragraph">
<p>The following is a set of non-normative
guidelines for generating high quality line number mappings. The
guidelines are presented to help produce a consistent debugging
experience for page authors across containers. Where possible the JSP
container should generate line number mappings as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A breakpoint on a JSP
line causes execution to stop before any Java code which amounts to a
translation of the JSP line is executed (for one possible exception, see
(5). Note that
given the LineInfo Composition Algorithm (see Jakarta Debugging Support
for Other Languages specification), it
is acceptable for the mappings to include one or more Java lines which
are never translated into executable byte code, as long as at least one
of them does.</p>
</li>
<li>
<p>It is permitted for two or more lines of
JSP to include the same Java lines in their mappings.</p>
</li>
<li>
<p>If a line of JSP has no manifestation in
the Java source other than white-space preserving source, it should not
be mapped.</p>
<div class="ulist">
<ul>
<li>
<p>The following standard syntax JSP entities
should not be mapped to generated code. These entities either have no
manifestation in the generated Java code (e.g. comments), or are not
manifest in such a way that it allows the debugged process to stop (e.g.
the page directive import):</p>
<div class="ulist">
<ul>
<li>
<p>JSP comments</p>
</li>
<li>
<p>Directives</p>
</li>
</ul>
</div>
</li>
<li>
<p>The following XML syntax JSP entities
should not be mapped to generated code. These entities frequently have
no manifestation in the generated Java code.</p>
<div class="ulist">
<ul>
<li>
<p><code>&lt;jsp:root&gt;</code></p>
</li>
<li>
<p><code>&lt;jsp:output&gt;</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Declarations and scriptlets (standard or
XML JSP). Lines in these constructs should preserve a one-to-one mapping
with the corresponding generated code lines. Empty lines and comment
lines are not mapped.</p>
</li>
<li>
<p>For scriptlets,
scriptlet expressions, EL expressions, standard actions and custom
actions in template text, a line containing one or more of these
entities should be mapped to Java source lines which include the
corresponding Java code.</p>
<div class="paragraph">
<p>If the line starts with template text, the
Java code which handles it may be excluded from the mappings if this
would cause the debugger to stop before the apparent execution of JSP
lines preceding the line in question. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>100 &lt;p&gt;This is a line with template text.&lt;/p&gt;
101 &lt;h1&gt;&lt;fmt:message key="company" bundle="${bundle}"/&gt;&lt;/h1&gt;

200 out.write( "&lt;p&gt;This is a line with template text.&lt;/p&gt;\r\n" );
201 out.write( "&lt;h1&gt;" );
202 org.apache.taglibs.standard.tag.el.fmt.MessageTag taghandler =
203 new org.apache.taglibs.standard.tag.el.fmt.MessageTag();
204 taghandler.setPageContext( pageContext );
205 ...</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, given that <code>&lt;h1&gt;</code> has its
own call to <code>write()</code>, it makes sense to map 101 to 201, 202 etc.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>200 out.write( "&lt;p&gt;This is a line with template text.&lt;/p&gt;\r\n&lt;h1&gt;" );
201 org.apache.taglibs.standard.tag.el.fmt.MessageTag taghandler =
202 new org.apache.taglibs.standard.tag.el.fmt.MessageTag();
203 taghandler.setPageContext( pageContext );
204 ...</pre>
</div>
</div>
<div class="paragraph">
<p>In this second example, given that <code>&lt;h1&gt;</code> is
output using the same call to <code>write()</code> that was used for line 100,
mapping 101 to 202, 203 etc. may result in more intuitive behavior of
the debugger.<br>
<br>
For scriptlets that contain more than one line, there should be a
one-to-one mapping from JSP to Java lines, and the mapping should start
at the first Java code that is not whitespace or comments. Therefore, a
line that contains only the open scriptlet delimeter is not mapped.</p>
</div>
</li>
<li>
<p>Scriptlet expressions
and EL expressions in attribute values. The source line mappings should
include any Java source lines that deal with the evaluation of the
rtexpr value as well as source that deals with the JSP action.</p>
</li>
<li>
<p>Standard or custom actions.</p>
<div class="ulist">
<ul>
<li>
<p>Empty tags and start tags special case: The
<code>jsp:params</code> action typically has no manifestation and should not be
mapped.</p>
</li>
<li>
<p>Empty tags and start tags: The Java line
mappings should include as much of the corresponding Java code as
possible, including any separate lines that deal with rtexpr evaluation
as described in (6). If it
is not possible to include all the Java code in the mappings, the mapped
lines should include the first sequential line which deals with either
the tag or the attribute evaluation in order to meet
(1)</p>
</li>
<li>
<p>Closing tags frequently do not have a
manifestation in the Java source, but sometimes do. In case a JSP line
contains only a closing tag, the line may be mapped to whitespace
preserving Java source if it has no semantic translation. This will
avoid a confusing user experience where it is sometimes possible to set
a breakpoint on a line consisting of a closing tag and sometimes not.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<h1 id="part-iii" class="sect0"><a class="anchor" href="#part-iii"></a>Part III</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Appendices B is normative.
Appendices A, C, and D are non-normative.</p>
</div>
<div class="paragraph">
<p>The Appendices are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Appendix A - Packaging JSP pages</p>
</li>
<li>
<p>Appendix B - Page Character Encoding Detection Algorithm</p>
</li>
<li>
<p>Appendix C - Changes</p>
</li>
<li>
<p>Appendix D - Glossary of terms</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="packaging-jsp-pages"><a class="anchor" href="#packaging-jsp-pages"></a>Appendix A: Packaging JSP Pages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix shows two simple examples
of packaging a JSP page into a WAR for delivery into a Web container. In
the first example, the JSP page is delivered in source form. This is
likely to be the most common example. In the second example the JSP page
is compiled into a servlet that uses only Servlet 6.2 and JSP 4.1 API
calls; the servlet is then packaged into a WAR with a deployment
descriptor such that it looks as the original JSP page to any client.</p>
</div>
<div class="paragraph">
<p>This appendix is non normative. Actually,
strictly speaking, the appendix relates more to the Servlet 6.2
capabilities than to the JSP 4.1 capabilities. The appendix is included
here as this is a feature that JSP page authors and JSP page authoring
tools are interested in.</p>
</div>
<div class="sect2">
<h3 id="a-very-simple-jsp-page"><a class="anchor" href="#a-very-simple-jsp-page"></a>A.1. A Very Simple JSP Page</h3>
<div class="paragraph">
<p>We start with a very simple JSP page
<code>HelloWorld.jsp</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp"> &lt;%@ page info=&quot;Example JSP pre-compiled&quot; %&gt;
 &lt;p&gt;
 Hello World
 &lt;/p&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-jsp-page-packaged-as-source-in-a-war-file"><a class="anchor" href="#the-jsp-page-packaged-as-source-in-a-war-file"></a>A.2. The JSP Page Packaged as Source in a WAR File</h3>
<div class="paragraph">
<p>The JSP page can be packaged into a WAR file
by just placing it at location <code>/HelloWorld.jsp</code> the default JSP page
extension mapping will pick it up. The <code>web.xml</code> is trivial:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE webapp
    SYSTEM &quot;http://java.sun.com/j2ee/dtds/web-app_2_3.dtd&quot;&gt;</span>
<span class="tag">&lt;webapp&gt;</span>
  <span class="tag">&lt;session-config&gt;</span>
    <span class="tag">&lt;session-timeout&gt;</span>1<span class="tag">&lt;/session-timeout&gt;</span>
  <span class="tag">&lt;/session-config&gt;</span>
<span class="tag">&lt;/webapp&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-servlet-for-the-compiled-jsp-page"><a class="anchor" href="#the-servlet-for-the-compiled-jsp-page"></a>A.3. The Servlet for the Compiled JSP Page</h3>
<div class="paragraph">
<p>As an alternative, we will show how one can
compile the JSP page into a servlet class to run in a JSP container.</p>
</div>
<div class="paragraph">
<p>The JSP page is compiled into a servlet with
some implementation dependent name <code>com.acme._jsp_HelloWorld_XXX_Impl</code>.
The servlet code only depends on the JSP 4.1 and Servlet 6.2 APIs, as
follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">jakarta.servlet</span>.*;
<span class="keyword">import</span> <span class="include">jakarta.servlet.http</span>.*;
<span class="keyword">import</span> <span class="include">jakarta.servlet.jsp</span>.*;

<span class="directive">public</span> <span class="type">class</span> <span class="class">_jsp_HelloWorld_XXX_Impl</span>
    <span class="directive">extends</span> PlatformDependent_Jsp_Super_Impl {

  <span class="directive">public</span> <span class="type">void</span> jspInit() {
    <span class="comment">// ...</span>
  }

  <span class="directive">public</span> <span class="type">void</span> jspDestroy() {
    <span class="comment">// ...</span>
  }

  <span class="directive">static</span> JspFactory _factory = JspFactory.getDefaultFactory();

  <span class="directive">public</span> <span class="type">void</span> _jspService(HttpServletRequest request,
      HttpServletResponse response)
      <span class="directive">throws</span> <span class="exception">IOException</span>, ServletException {

    <span class="predefined-type">Object</span> page = <span class="local-variable">this</span>;
    HttpSession session = request.getSession();
    ServletConfig config = getServletConfig();
    ServletContext application = config.getServletContext();

    PageContext pageContext = _factory.getPageContext(<span class="local-variable">this</span>,
        request,
        response,
        (<span class="predefined-type">String</span>)NULL,
        <span class="predefined-constant">true</span>,
        JspWriter.DEFAULT_BUFFER,
        <span class="predefined-constant">true</span>);

    JspWriter out = pageContext.getOut();
    <span class="comment">// page context creates initial JspWriter &quot;out&quot;</span>

    <span class="keyword">try</span> {
      out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;p&gt;</span><span class="delimiter">&quot;</span></span>);
      out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World</span><span class="delimiter">&quot;</span></span>);
      out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/p&gt;</span><span class="delimiter">&quot;</span></span>);
    } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
      pageContext.handlePageException(e);
    } <span class="keyword">finally</span> {
      _factory.releasePageContext(pageContext);
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-web-application-descriptor"><a class="anchor" href="#the-web-application-descriptor"></a>A.4. The Web Application Descriptor</h3>
<div class="paragraph">
<p>The servlet is made to look as a JSP page
with the following <code>web.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE webapp
    SYSTEM &quot;http://java.sun.com/j2ee/dtds/web-app_2_3.dtd&quot;&gt;</span>
<span class="tag">&lt;webapp&gt;</span>
  <span class="tag">&lt;servlet&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>HelloWorld<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;servlet-class&gt;</span>com.acme._jsp_HelloWorld_XXX_Impl<span class="tag">&lt;/servlet-class&gt;</span>
  <span class="tag">&lt;/servlet&gt;</span>

  <span class="tag">&lt;servlet-mapping&gt;</span>
    <span class="tag">&lt;servlet-name&gt;</span>HelloWorld<span class="tag">&lt;/servlet-name&gt;</span>
    <span class="tag">&lt;url-pattern&gt;</span>/HelloWorld.jsp<span class="tag">&lt;/url-pattern&gt;</span>
  <span class="tag">&lt;/servlet-mapping&gt;</span>

  <span class="tag">&lt;session-config&gt;</span>
    <span class="tag">&lt;session-timeout&gt;</span>1<span class="tag">&lt;/session-timeout&gt;</span>
   <span class="tag">&lt;/session-config&gt;</span>
<span class="tag">&lt;/webapp&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-war-for-the-compiled-jsp-page"><a class="anchor" href="#the-war-for-the-compiled-jsp-page"></a>A.5. The WAR for the Compiled JSP Page</h3>
<div class="paragraph">
<p>Finally everything is packaged together into
a WAR:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/WEB-INF/web.xml</code></p>
</li>
<li>
<p><code>/WEB-INF/classes/com/acme/_jsp_HelloWorld_XXX_Impl.class</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that if the servlet class generated for
the JSP page had depended on some support classes, they would have to be
included in the WAR.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="page-encoding-detection"><a class="anchor" href="#page-encoding-detection"></a>Appendix B: Page Encoding Detection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix details the algorithm
containers are required to use in order to determine the character
encoding for a JSP page or tag file. See <a href="#internationalization-issues">Chapter 4, <em>Internationalization Issues</em></a>
for details on where this algorithm is
used. The algorithm is designed to maximize convenience to the page
author, while preserving backwards compatibility with previous versions
of the JSP specification.</p>
</div>
<div class="sect2">
<h3 id="detection-algorithm-for-jsp-pages"><a class="anchor" href="#detection-algorithm-for-jsp-pages"></a>B.1. Detection Algorithm for JSP pages</h3>
<div class="paragraph">
<p>The following is a complete though
unoptimized algorithm for determining the character encoding for a JSP
file. JSP containers may use an optimized version of this algorithm, but
it must detect the same encoding as the algorithm in all cases.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decide whether the source file is a JSP
page in standard syntax or a JSP document in XML syntax.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If there is a <code>&lt;is-xml&gt;</code> element in a
<code>&lt;jsp-property-group&gt;</code> that names this file, then if it has the value
&#8220;true&#8221;, the file is a JSP document, and if it has the value &#8220;false&#8221;,
the file is not a JSP document.</p>
</li>
<li>
<p>Otherwise, if the file name has the
extension &#8220;jspx&#8221;, the file is a JSP document.</p>
</li>
<li>
<p>Otherwise, try to find a <code>&lt;jsp:root&gt;</code>
element in the file.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Determine the initial encoding from the
first four bytes of the file, as described in appendix F.1 of the XML
1.0 specification. For the byte sequence &#8220;3C 3F 78 6D&#8221;, use
<code>ISO-8859-1</code> ; for the byte sequence &#8220;4C 6F A7 94&#8221;, use <code>IBM037</code> ;
for all other cases, use the <code>UTF-<strong></code> or <code>UCS-</strong></code> encoding given in the
appendix.</p>
</li>
<li>
<p>Read the file using the initial encoding
and search for a <code>&lt;jsp:root&gt;</code> element. If the element is found and is
the top element, the file is a JSP document in XML syntax</p>
</li>
</ol>
</div>
</li>
<li>
<p>Otherwise, the file is a JSP page in
standard syntax.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Reset the file.</p>
</li>
<li>
<p>If the file is a JSP page in standard syntax:</p>
<div class="paragraph">
<p>3.1 If the file is not preceded by a BOM:</p>
</div>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Check whether there is a JSP configuration
element <code>&lt;page-encoding&gt;</code> whose URL pattern matches this file.</p>
</li>
<li>
<p>Read the file using the initial encoding
and search for a <code>pageEncoding</code> attribute in a page declaration. The
specification requires the attribute to be found only if it is not
preceded by non-ASCII characters, so simplified implementations are
allowed.</p>
</li>
<li>
<p>Report an error if there are a
<code>&lt;page-encoding&gt;</code> configuration element whose URL pattern matches this
file and a <code>pageEncoding</code> attribute, and the two name different
encodings.</p>
</li>
<li>
<p>If there is a <code>&lt;page-encoding&gt;</code>
configuration element whose URL pattern matches this file, the page
character encoding is the one named in this element.</p>
</li>
<li>
<p>Otherwise, if there is a <code>pageEncoding</code>
attribute, the page character encoding is the one named in this
attribute.</p>
</li>
<li>
<p>Otherwise, read the file using the initial
encoding and search for a charset value within a <code>contentType</code> attribute
in a page declaration. If it exists, the page character encoding is the
one named in this charset value. The specification requires the
attribute to be found only if it is not preceded by non-ASCII
characters, so simplified implementations are allowed.</p>
</li>
<li>
<p>Otherwise, the page character encoding is
<code>ISO-8859-1</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>3.2 If the file is preceded by a BOM:</p>
</div>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a" start="8">
<li>
<p>Read the file using the encoding indicated
by the BOM, and search for a pageEncoding attribute in a page
declaration.</p>
</li>
<li>
<p>Report an error if any of the following
conditions are met:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>There is a &lt;page-encoding&gt; configuration
element whose URL pattern matches this page and whose encoding does not
match the encoding indicated by the BOM.</p>
</li>
<li>
<p>There is a pageEncoding page directive
attribute whose encoding does not match the encoding indicated by the
BOM.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If the file is a JSP document in XML syntax, use these steps.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Determine the page character encoding as
described in appendix F.1 of the XML 1.0 specification. Note whether the
encoding was named in the encoding attribute of the XML prolog or just
derived from the initial bytes.</p>
</li>
<li>
<p>Check whether there is a JSP configuration
element <code>&lt;page-encoding&gt;</code> whose URL pattern matches this file.</p>
</li>
<li>
<p>Read the file using the detected encoding
and search for a <code>pageEncoding</code> attribute in a <code>&lt;jsp:directive.page&gt;</code>
element.</p>
</li>
<li>
<p>Report an error if any of the following
conditions is met:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>The XML prolog names an encoding and there
is <code>&lt;page-encoding&gt;</code> configuration element whose URL pattern matches
this file and which names a different encoding.</p>
</li>
<li>
<p>The XML prolog names an encoding and there
is a <code>pageEncoding</code> attribute which names a different encoding.</p>
</li>
<li>
<p>There are a <code>&lt;page-encoding&gt;</code> configuration
element whose URL pattern matches this file and a <code>pageEncoding</code>
attribute, and the two name different encodings.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Reset the file and read it using the page character encoding.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="detection-algorithm-for-tag-files"><a class="anchor" href="#detection-algorithm-for-tag-files"></a>B.2. Detection Algorithm for Tag Files</h3>
<div class="paragraph">
<p>The following details the algorithm for
determining the character
encoding for a tag file. JSP containers may
use an optimized version
of this algorithm, but it must detect the
same encoding as the algorithm
in all cases.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Determine whether the source file is a tag
file in standard or XML syntax.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If the file name has the extension "tagx",
the file is a tag file in XML syntax. Otherwise, it is a tag file in
standard syntax.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If the file is a tag file in standard syntax, use these steps:</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>2.1 If the file is not preceded by a BOM:</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Read the file using the initial default
encoding and search for a <code>pageEncoding</code> attribute in a tag directive.
The specification requires the attribute to be found only if it is not
preceded by non-ASCII characters.</p>
</li>
<li>
<p>If there is a <code>pageEncoding</code> attribute, the
page character encoding is the one named in this attribute.</p>
</li>
<li>
<p>Otherwise, the page character encoding is
<code>ISO-8859-1</code>.</p>
</li>
<li>
<p>Reset the file and read it using the page
character encoding.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>2.2 If the file is preceded by a BOM:</p>
</div>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a" start="5">
<li>
<p>Read the file using the encoding indicated
by the BOM, and search for a pageEncoding attribute in a tag directive.</p>
</li>
<li>
<p>Report an error if there is a pageEncoding
tag directive attribute whose encoding does not match the encoding
indicated by the BOM.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If the file is a JSP document in XML syntax, use these steps.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Determine the page character encoding as
described in appendix F.1 of the XML 1.0 specification.</p>
</li>
<li>
<p>Read the file using the detected encoding.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changes"><a class="anchor" href="#changes"></a>Appendix C: Changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix lists the changes in the
Jakarta Server Pages specification. This appendix is non-normative.</p>
</div>
<div class="sect2">
<h3 id="changes-between-jsp-4-1-and-jsp-4-0"><a class="anchor" href="#changes-between-jsp-4-1-and-jsp-4-0"></a>C.1. Changes between JSP 4.1 and JSP 4.0</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/eclipse-ee4j/jsp-api/issues/245">#245</a>
Utilise the new <code>ELResolver.StandaloneIdentifierMarker</code> class to optimise the
performance of the <code>ImportELResolver</code>. This should significantly improve the
resolving of standalong identifiers e.g. <code>${my-identifier}</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="changes-between-jsp-4-0-and-jsp-3-1"><a class="anchor" href="#changes-between-jsp-4-0-and-jsp-3-1"></a>C.2. Changes between JSP 4.0 and JSP 3.1</h3>
<div class="ulist">
<ul>
<li>
<p>Update the minimum Java version to Java 17.</p>
</li>
<li>
<p>Remove the methods that implemented <code>ELResolver.getFeatureDescriptors()</code> as
those methods have been removed as of EL 6.1.</p>
</li>
<li>
<p>Remove the deprecated classes from the <code>jakarta.servlet.jsp.el</code> package.</p>
</li>
<li>
<p>Remove the deprecated <code>BodyTag.EVAL_BODY_TAG</code> constant.</p>
</li>
<li>
<p>Remove the deprecated <code>JspException.getRootCause</code>.</p>
</li>
<li>
<p>Remove the deprecated <code>isThreadSafe</code> page directive attribute.</p>
</li>
<li>
<p>Remove the deprecated <code>jsp:plugin</code> action and related actions.</p>
</li>
<li>
<p><a href="https://github.com/eclipse-ee4j/jsp-api/issues/235">#235</a>
Update <code>ErrorData</code> to add support for the new attribute
<code>jakarta.servlet.error.query_string</code>.</p>
</li>
<li>
<p>Update <code>ErrorData</code> to add support for the new attribute
<code>jakarta.servlet.error.method</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="changes-between-jsp-3-1-and-jsp-3-0"><a class="anchor" href="#changes-between-jsp-3-1-and-jsp-3-0"></a>C.3. Changes between JSP 3.1 and JSP 3.0</h3>
<div class="ulist">
<ul>
<li>
<p>Deprecate methods that override <code>ELResolver.getFeatureDescriptors()</code> as that
method has been deprecated as of EL 5.0.</p>
</li>
<li>
<p><a href="https://github.com/eclipse-ee4j/jsp-api/issues/40">#40</a>
Add an option to raise a <code>PropertyNotFoundException</code> when an EL expression
contains an unknown identifier.</p>
</li>
<li>
<p><a href="https://github.com/eclipse-ee4j/jsp-api/issues/42">#42</a>
Clarify the meaning of 'scope' in the context of scripting variables
associated with custom actions.</p>
</li>
<li>
<p><a href="https://github.com/eclipse-ee4j/jsp-api/issues/44">#44</a>
Clarify that the EL environment within a JSP has a set of default imports
consistent with the default imports for the scripting environment. Refactor
the <code>ScopedAttributeELResolver</code> to remove the special handling for imports and
unresolved variables.</p>
</li>
<li>
<p>Deprecate the <code>isThreadSafe</code> page directive attribute as the related Servlet
API interface <code>SingleThreadModel</code> has been removed as of the Servlet 6.0
specification.</p>
</li>
<li>
<p><a href="https://github.com/eclipse-ee4j/jsp-api/issues/226">#226</a>
Deprecate the <code>jsp:plugin</code> action and related actions as the associated HTML
elements are no longer supported by any major browser.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="changes-between-jsp-3-0-and-jsr-245"><a class="anchor" href="#changes-between-jsp-3-0-and-jsr-245"></a>C.4. Changes between JSP 3.0 and JSR 245</h3>
<div class="ulist">
<ul>
<li>
<p>The API has moved from the <code>javax.servlet.jsp</code> package to the
<code>jakarta.servlet.jsp</code> package.</p>
</li>
<li>
<p>All deprecated methods now include the <code>@Deprecated</code> annotation.</p>
</li>
<li>
<p>All API methods use generics where appropriate.</p>
</li>
<li>
<p>The contents of the Javadoc and XML schemas were removed and are now included by reference.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glossary"><a class="anchor" href="#glossary"></a>Appendix D: Glossary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix is a glossary of the main
concepts mentioned in this specification. This appendix is
non-normative.</p>
</div>
<div class="paragraph">
<p><strong>action</strong><br>
An element in a JSP page that can act on
implicit objects and other server-side objects or can define new
scripting variables. Actions follow the XML syntax for elements with a
start tag, a body and an end tag; if the body is empty it can also use
the empty tag syntax. The tag must use a prefix.</p>
</div>
<div class="paragraph">
<p><strong>action, standard</strong><br>
An action that is defined in the JSP
specification and is always available to a JSP file without being
imported.</p>
</div>
<div class="paragraph">
<p><strong>action, custom</strong><br>
An action described in a portable manner by a
tag library descriptor and a collection of Java classes and imported
into a JSP page by a taglib directive.</p>
</div>
<div class="paragraph">
<p><strong>Application Assembler</strong><br>
A person that combines JSP pages, servlet
classes, HTML content, tag libraries, and other Web content into a
deployable Web application.</p>
</div>
<div class="paragraph">
<p><strong>classic tag handler</strong><br>
A tag handler that implements the
<code>jakarta.servlet.jsp.tagext.Tag</code> interface.</p>
</div>
<div class="paragraph">
<p><strong>component contract</strong><br>
The contract between a component and its
container, including life cycle management of the component and the APIs
and protocols that the container must support.</p>
</div>
<div class="paragraph">
<p><strong>Component Provider</strong><br>
A vendor that provides a component either as
Java classes or as JSP page source.</p>
</div>
<div class="paragraph">
<p><strong>distributed container</strong><br>
A JSP container that can run a Web
application that is tagged as distributable and is spread across
multiple Java virtual machines that might be running on different
hosts.</p>
</div>
<div class="paragraph">
<p><strong>declaration</strong><br>
A scripting element that declares methods,
variables, or both in a JSP page. Syntactically it is delimited by the
<code>&lt;%!</code> and <code>%&gt;</code> characters.</p>
</div>
<div class="paragraph">
<p><strong>directive</strong><br>
An element in a JSP page that gives an
instruction to the JSP container and is interpreted at translation time.
Syntactically it is delimited by the <code>&lt;%@</code> and <code>%&gt;</code> characters.</p>
</div>
<div class="paragraph">
<p><strong>dynamic attribute</strong><br>
An attribute, passed to a custom action,
whose name is not explicitly declared in the tag library descriptor.</p>
</div>
<div class="paragraph">
<p><strong>element</strong><br>
A portion of a JSP page that is recognized by
the JSP translator. An element can be a directive, an action, or a
scripting element.</p>
</div>
<div class="paragraph">
<p><strong>EL expression</strong><br>
An element in a JSP page representing an
expression to be parsed and evaluated via the JSP Expression Language.
Syntactically it is delimited by the <code>${</code> and <code>}</code> characters.</p>
</div>
<div class="paragraph">
<p><strong>expression</strong><br>
Either a scripting expression or an EL expression.</p>
</div>
<div class="paragraph">
<p><strong>fixed template data</strong><br>
Any portions of a JSP file that are not
described in the JSP specification, such as HTML tags, XML tags, and
text. The template data is returned to the client in the response or is
processed by a component.</p>
</div>
<div class="paragraph">
<p><strong>implicit object</strong><br>
A server-side object that is defined by the
JSP container and is always available in a JSP file without being
declared. The implicit objects are <code>request</code>, <code>response</code>,
<code>pageContext</code>, <code>session</code>, <code>application</code>, <code>out</code>, <code>config</code>, <code>page</code>,
and <code>exception</code> for scriptlets and scripting expressions. The implicit
objects are <code>pageContext</code>, <code>pageScope</code>, <code>requestScope</code>,
<code>sessionScope</code>, <code>applicationScope</code>, <code>param</code>, <code>paramValues</code>, <code>header</code>,
<code>headerValues</code>, <code>cookie</code> and <code>initParam</code> for EL expressions.</p>
</div>
<div class="paragraph">
<p><strong>Jakarta Server Pages technology</strong><br>
An extensible Web technology that uses
template data, custom elements, scripting languages, and server-side
Java objects to return dynamic content to a client. Typically the
template data is HTML or XML elements, and in many cases the client is a
Web browser.</p>
</div>
<div class="paragraph">
<p><strong>JSP container</strong><br>
A system-level entity that provides life
cycle management and runtime support for JSP and servlet components.</p>
</div>
<div class="paragraph">
<p><strong>JSP configuration</strong><br>
The deployment-time process by which the JSP
container is declaratively configured using a deployment descriptor.</p>
</div>
<div class="paragraph">
<p><strong>JSP file</strong><br>
A text file that contains JSP elements,
forming a complete JSP page or just a partial page that must be combined
with other JSP files to form a complete page. Most top-level JSP files
have a <code>.jsp</code> extension, but other extensions can be configured as
well.</p>
</div>
<div class="paragraph">
<p><strong>JSP fragment</strong><br>
A portion of JSP code, translated into an
implementation of the <code>jakarta.servlet.jsp.JspFragment</code> abstract class.</p>
</div>
<div class="paragraph">
<p><strong>JSP page</strong><br>
One or more JSP files that form a
syntactically complete description for processing a request to create a
response.</p>
</div>
<div class="paragraph">
<p><strong>JSP page, front</strong><br>
A JSP page that receives
an HTTP request directly from the client. It creates, updates, and/or
accesses some server-side data and then forwards the request to a
presentation JSP page.</p>
</div>
<div class="paragraph">
<p><strong>JSP page, presentation</strong><br>
 A JSP page that is intended for presentation
purposes only. It accesses and/or updates some server-side data and
incorporates fixed template data to create content that is sent to the
client.</p>
</div>
<div class="paragraph">
<p><strong>JSP page implementation class</strong><br>
The Java programming language class, a
servlet, that is the runtime representation of a JSP page and which
receives the request object and updates the response object. The page
implementation class can use the services provided by the JSP container,
including both the servlet and the JSP APIs.</p>
</div>
<div class="paragraph">
<p><strong>JSP page implementation object</strong><br>
The instance of the JSP page implementation
class that receives the <code>request</code> object and updates the <code>response</code>
object.</p>
</div>
<div class="paragraph">
<p><strong>JSP segment</strong><br>
A portion of JSP code defined in a separate
file, and imported into a page using the include directive.</p>
</div>
<div class="paragraph">
<p><strong>named attribute</strong><br>
A standard or custom action attribute whose
value is defined using the <code>&lt;jsp:attribute&gt;</code> standard action.</p>
</div>
<div class="paragraph">
<p><strong>scripting element</strong><br>
A declaration, scriptlet, or expression,
whose tag syntax is defined by the JSP specification, and whose content
is written according to the scripting language used in the JSP page. The
JSP specification describes the syntax and semantics for the case where
the language page attribute is <code>java</code>.</p>
</div>
<div class="paragraph">
<p><strong>scripting expression</strong><br>
A scripting element that contains a valid
scripting language expression that is evaluated, converted to a String,
and placed into the implicit out object. Syntactically it is delimited
by the <code>&lt;%=</code> and <code>%&gt;</code> characters.</p>
</div>
<div class="paragraph">
<p><strong>scriptlet</strong><br>
An scripting element containing any code
fragment that is valid in the scripting language used in the JSP page.
The JSP specification describes what is a valid scriptlet for the case
where the language page attribute is <code>java</code>. Syntactically a
scriptlet is delimited by the <code>&lt;%</code> and <code>%&gt;</code> characters.</p>
</div>
<div class="paragraph">
<p><strong>simple tag handler</strong><br>
A tag handler that implements the
<code>jakarta.servlet.jsp.tagext.SimpleTag</code> interface.</p>
</div>
<div class="paragraph">
<p><strong>tag</strong><br>
A piece of text between a left angle
bracket and a right angle bracket that has a name, can have attributes,
and is part of an element in a JSP page. Tag names are known to the JSP
translator, either because the name is part of the JSP specification (in
the case of a standard action), or because it has been introduced using
a Tag Library (in the case of custom action).</p>
</div>
<div class="paragraph">
<p><strong>tag file</strong><br>
A text-based document that uses fixed template data and JSP elements to
define a custom action. The semantics of a tag file are realized at
runtime by a tag handler.</p>
</div>
<div class="paragraph">
<p><strong>tag library</strong><br>
A collection of custom actions described by a
tag library descriptor and Java classes.</p>
</div>
<div class="paragraph">
<p><strong>tag library descriptor</strong><br>
An XML document describing a tag library.</p>
</div>
<div class="paragraph">
<p><strong>Tag Library Provider</strong><br>
A vendor that provides a tag library. Typical
examples may be a JSP container vendor, a development group within a
corporation, a component vendor, or a service vendor that wants to
provide easier use of their services.</p>
</div>
<div class="paragraph">
<p><strong>web application</strong><br>
An application built for the Internet, an
intranet, or an extranet.</p>
</div>
<div class="paragraph">
<p><strong>web application, distributable</strong><br>
A Web application that is written so that
it can be deployed in a Web container distributed across multiple Java
virtual machines running on the same host or different hosts. The
deployment descriptor for such an application uses the <code>distributable</code>
element.</p>
</div>
<div class="paragraph">
<p><strong>Web Application Deployer</strong><br>
A person who deploys a Web application in a
Web container, specifying at least the root prefix for the Web
application, and in a Jakarta EE environment, the security and resource
mappings.</p>
</div>
<div class="paragraph">
<p><strong>web component</strong><br>
A servlet class or JSP page that runs in a
JSP container and provides services in response to requests.</p>
</div>
<div class="paragraph">
<p><strong>Web Container Provider</strong><br>
A vendor that provides a servlet and JSP
container that support the corresponding component contracts.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
 4.1-M1<br>
Last updated 2024-01-21 17:19:40 UTC
</div>
</div>
</body>
</html>